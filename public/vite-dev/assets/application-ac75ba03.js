/* empty css             */import{i as Hg}from"./map-e912c496.js";function ro(t,n){const l=Object.create(null),p=t.split(",");for(let d=0;d<p.length;d++)l[p[d]]=!0;return n?d=>!!l[d.toLowerCase()]:d=>!!l[d]}const Ur={},nc=[],Ni=()=>{},Uf=()=>!1,Q2=/^on[^a-z]/,Xl=t=>Q2.test(t),$g=t=>t.startsWith("onUpdate:"),vr=Object.assign,Zg=(t,n)=>{const l=t.indexOf(n);l>-1&&t.splice(l,1)},eE=Object.prototype.hasOwnProperty,Tr=(t,n)=>eE.call(t,n),bt=Array.isArray,ic=t=>wc(t)==="[object Map]",Jl=t=>wc(t)==="[object Set]",__=t=>wc(t)==="[object Date]",tE=t=>wc(t)==="[object RegExp]",$t=t=>typeof t=="function",tr=t=>typeof t=="string",Ns=t=>typeof t=="symbol",Vr=t=>t!==null&&typeof t=="object",Gg=t=>Vr(t)&&$t(t.then)&&$t(t.catch),q0=Object.prototype.toString,wc=t=>q0.call(t),rE=t=>wc(t).slice(8,-1),H0=t=>wc(t)==="[object Object]",Wg=t=>tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fl=ro(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nE=ro("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),_d=t=>{const n=Object.create(null);return l=>n[l]||(n[l]=t(l))},iE=/-(\w)/g,Vn=_d(t=>t.replace(iE,(n,l)=>l?l.toUpperCase():"")),oE=/\B([A-Z])/g,go=_d(t=>t.replace(oE,"-$1").toLowerCase()),Yl=_d(t=>t.charAt(0).toUpperCase()+t.slice(1)),oc=_d(t=>t?`on${Yl(t)}`:""),hc=(t,n)=>!Object.is(t,n),ac=(t,n)=>{for(let l=0;l<t.length;l++)t[l](n)},Xf=(t,n,l)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:l})},Jf=t=>{const n=parseFloat(t);return isNaN(n)?t:n},Yf=t=>{const n=tr(t)?Number(t):NaN;return isNaN(n)?t:n};let x_;const hg=()=>x_||(x_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),aE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",sE=ro(aE);function rh(t){if(bt(t)){const n={};for(let l=0;l<t.length;l++){const p=t[l],d=tr(p)?$0(p):rh(p);if(d)for(const y in d)n[y]=d[y]}return n}else{if(tr(t))return t;if(Vr(t))return t}}const lE=/;(?![^(]*\))/g,uE=/:([^]+)/,cE=/\/\*[^]*?\*\//g;function $0(t){const n={};return t.replace(cE,"").split(lE).forEach(l=>{if(l){const p=l.split(uE);p.length>1&&(n[p[0].trim()]=p[1].trim())}}),n}function Ec(t){let n="";if(tr(t))n=t;else if(bt(t))for(let l=0;l<t.length;l++){const p=Ec(t[l]);p&&(n+=p+" ")}else if(Vr(t))for(const l in t)t[l]&&(n+=l+" ");return n.trim()}function pE(t){if(!t)return null;let{class:n,style:l}=t;return n&&!tr(n)&&(t.class=Ec(n)),l&&(t.style=rh(l)),t}const hE="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",fE="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",dE="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",mE=ro(hE),gE=ro(fE),yE=ro(dE),vE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_E=ro(vE);function Z0(t){return!!t||t===""}function xE(t,n){if(t.length!==n.length)return!1;let l=!0;for(let p=0;l&&p<t.length;p++)l=Us(t[p],n[p]);return l}function Us(t,n){if(t===n)return!0;let l=__(t),p=__(n);if(l||p)return l&&p?t.getTime()===n.getTime():!1;if(l=Ns(t),p=Ns(n),l||p)return t===n;if(l=bt(t),p=bt(n),l||p)return l&&p?xE(t,n):!1;if(l=Vr(t),p=Vr(n),l||p){if(!l||!p)return!1;const d=Object.keys(t).length,y=Object.keys(n).length;if(d!==y)return!1;for(const x in t){const E=t.hasOwnProperty(x),C=n.hasOwnProperty(x);if(E&&!C||!E&&C||!Us(t[x],n[x]))return!1}}return String(t)===String(n)}function xd(t,n){return t.findIndex(l=>Us(l,n))}const Si=t=>tr(t)?t:t==null?"":bt(t)||Vr(t)&&(t.toString===q0||!$t(t.toString))?JSON.stringify(t,G0,2):String(t),G0=(t,n)=>n&&n.__v_isRef?G0(t,n.value):ic(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((l,[p,d])=>(l[`${p} =>`]=d,l),{})}:Jl(n)?{[`Set(${n.size})`]:[...n.values()]}:Vr(n)&&!bt(n)&&!H0(n)?String(n):n;let fo;class Kg{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=fo,!n&&fo&&(this.index=(fo.scopes||(fo.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const l=fo;try{return fo=this,n()}finally{fo=l}}}on(){fo=this}off(){fo=this.parent}stop(n){if(this._active){let l,p;for(l=0,p=this.effects.length;l<p;l++)this.effects[l].stop();for(l=0,p=this.cleanups.length;l<p;l++)this.cleanups[l]();if(this.scopes)for(l=0,p=this.scopes.length;l<p;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!n){const d=this.parent.scopes.pop();d&&d!==this&&(this.parent.scopes[this.index]=d,d.index=this.index)}this.parent=void 0,this._active=!1}}}function bE(t){return new Kg(t)}function W0(t,n=fo){n&&n.active&&n.effects.push(t)}function K0(){return fo}function wE(t){fo&&fo.cleanups.push(t)}const Xg=t=>{const n=new Set(t);return n.w=0,n.n=0,n},X0=t=>(t.w&Vs)>0,J0=t=>(t.n&Vs)>0,EE=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Vs},SE=t=>{const{deps:n}=t;if(n.length){let l=0;for(let p=0;p<n.length;p++){const d=n[p];X0(d)&&!J0(d)?d.delete(t):n[l++]=d,d.w&=~Vs,d.n&=~Vs}n.length=l}},Qf=new WeakMap;let Pp=0,Vs=1;const fg=30;let $o;const Nl=Symbol(""),dg=Symbol("");class nh{constructor(n,l=null,p){this.fn=n,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,W0(this,p)}run(){if(!this.active)return this.fn();let n=$o,l=Ds;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=$o,$o=this,Ds=!0,Vs=1<<++Pp,Pp<=fg?EE(this):b_(this),this.fn()}finally{Pp<=fg&&SE(this),Vs=1<<--Pp,$o=this.parent,Ds=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){$o===this?this.deferStop=!0:this.active&&(b_(this),this.onStop&&this.onStop(),this.active=!1)}}function b_(t){const{deps:n}=t;if(n.length){for(let l=0;l<n.length;l++)n[l].delete(t);n.length=0}}function TE(t,n){t.effect&&(t=t.effect.fn);const l=new nh(t);n&&(vr(l,n),n.scope&&W0(l,n.scope)),(!n||!n.lazy)&&l.run();const p=l.run.bind(l);return p.effect=l,p}function CE(t){t.effect.stop()}let Ds=!0;const Y0=[];function Sc(){Y0.push(Ds),Ds=!1}function Tc(){const t=Y0.pop();Ds=t===void 0?!0:t}function to(t,n,l){if(Ds&&$o){let p=Qf.get(t);p||Qf.set(t,p=new Map);let d=p.get(l);d||p.set(l,d=Xg()),Q0(d)}}function Q0(t,n){let l=!1;Pp<=fg?J0(t)||(t.n|=Vs,l=!X0(t)):l=!t.has($o),l&&(t.add($o),$o.deps.push(t))}function os(t,n,l,p,d,y){const x=Qf.get(t);if(!x)return;let E=[];if(n==="clear")E=[...x.values()];else if(l==="length"&&bt(t)){const C=Number(p);x.forEach((k,D)=>{(D==="length"||D>=C)&&E.push(k)})}else switch(l!==void 0&&E.push(x.get(l)),n){case"add":bt(t)?Wg(l)&&E.push(x.get("length")):(E.push(x.get(Nl)),ic(t)&&E.push(x.get(dg)));break;case"delete":bt(t)||(E.push(x.get(Nl)),ic(t)&&E.push(x.get(dg)));break;case"set":ic(t)&&E.push(x.get(Nl));break}if(E.length===1)E[0]&&mg(E[0]);else{const C=[];for(const k of E)k&&C.push(...k);mg(Xg(C))}}function mg(t,n){const l=bt(t)?t:[...t];for(const p of l)p.computed&&w_(p);for(const p of l)p.computed||w_(p)}function w_(t,n){(t!==$o||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function AE(t,n){var l;return(l=Qf.get(t))==null?void 0:l.get(n)}const IE=ro("__proto__,__v_isRef,__isVue"),e1=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ns)),kE=bd(),PE=bd(!1,!0),ME=bd(!0),zE=bd(!0,!0),E_=LE();function LE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...l){const p=_r(this);for(let y=0,x=this.length;y<x;y++)to(p,"get",y+"");const d=p[n](...l);return d===-1||d===!1?p[n](...l.map(_r)):d}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...l){Sc();const p=_r(this)[n].apply(this,l);return Tc(),p}}),t}function RE(t){const n=_r(this);return to(n,"has",t),n.hasOwnProperty(t)}function bd(t=!1,n=!1){return function(p,d,y){if(d==="__v_isReactive")return!t;if(d==="__v_isReadonly")return t;if(d==="__v_isShallow")return n;if(d==="__v_raw"&&y===(t?n?s1:a1:n?o1:i1).get(p))return p;const x=bt(p);if(!t){if(x&&Tr(E_,d))return Reflect.get(E_,d,y);if(d==="hasOwnProperty")return RE}const E=Reflect.get(p,d,y);return(Ns(d)?e1.has(d):IE(d))||(t||to(p,"get",d),n)?E:Gn(E)?x&&Wg(d)?E:E.value:Vr(E)?t?Yg(E):Sd(E):E}}const OE=t1(),DE=t1(!0);function t1(t=!1){return function(l,p,d,y){let x=l[p];if($l(x)&&Gn(x)&&!Gn(d))return!1;if(!t&&(!Up(d)&&!$l(d)&&(x=_r(x),d=_r(d)),!bt(l)&&Gn(x)&&!Gn(d)))return x.value=d,!0;const E=bt(l)&&Wg(p)?Number(p)<l.length:Tr(l,p),C=Reflect.set(l,p,d,y);return l===_r(y)&&(E?hc(d,x)&&os(l,"set",p,d):os(l,"add",p,d)),C}}function BE(t,n){const l=Tr(t,n);t[n];const p=Reflect.deleteProperty(t,n);return p&&l&&os(t,"delete",n,void 0),p}function FE(t,n){const l=Reflect.has(t,n);return(!Ns(n)||!e1.has(n))&&to(t,"has",n),l}function NE(t){return to(t,"iterate",bt(t)?"length":Nl),Reflect.ownKeys(t)}const r1={get:kE,set:OE,deleteProperty:BE,has:FE,ownKeys:NE},n1={get:ME,set(t,n){return!0},deleteProperty(t,n){return!0}},UE=vr({},r1,{get:PE,set:DE}),VE=vr({},n1,{get:zE}),Jg=t=>t,wd=t=>Reflect.getPrototypeOf(t);function Tf(t,n,l=!1,p=!1){t=t.__v_raw;const d=_r(t),y=_r(n);l||(n!==y&&to(d,"get",n),to(d,"get",y));const{has:x}=wd(d),E=p?Jg:l?ty:Vp;if(x.call(d,n))return E(t.get(n));if(x.call(d,y))return E(t.get(y));t!==d&&t.get(n)}function Cf(t,n=!1){const l=this.__v_raw,p=_r(l),d=_r(t);return n||(t!==d&&to(p,"has",t),to(p,"has",d)),t===d?l.has(t):l.has(t)||l.has(d)}function Af(t,n=!1){return t=t.__v_raw,!n&&to(_r(t),"iterate",Nl),Reflect.get(t,"size",t)}function S_(t){t=_r(t);const n=_r(this);return wd(n).has.call(n,t)||(n.add(t),os(n,"add",t,t)),this}function T_(t,n){n=_r(n);const l=_r(this),{has:p,get:d}=wd(l);let y=p.call(l,t);y||(t=_r(t),y=p.call(l,t));const x=d.call(l,t);return l.set(t,n),y?hc(n,x)&&os(l,"set",t,n):os(l,"add",t,n),this}function C_(t){const n=_r(this),{has:l,get:p}=wd(n);let d=l.call(n,t);d||(t=_r(t),d=l.call(n,t)),p&&p.call(n,t);const y=n.delete(t);return d&&os(n,"delete",t,void 0),y}function A_(){const t=_r(this),n=t.size!==0,l=t.clear();return n&&os(t,"clear",void 0,void 0),l}function If(t,n){return function(p,d){const y=this,x=y.__v_raw,E=_r(x),C=n?Jg:t?ty:Vp;return!t&&to(E,"iterate",Nl),x.forEach((k,D)=>p.call(d,C(k),C(D),y))}}function kf(t,n,l){return function(...p){const d=this.__v_raw,y=_r(d),x=ic(y),E=t==="entries"||t===Symbol.iterator&&x,C=t==="keys"&&x,k=d[t](...p),D=l?Jg:n?ty:Vp;return!n&&to(y,"iterate",C?dg:Nl),{next(){const{value:N,done:ee}=k.next();return ee?{value:N,done:ee}:{value:E?[D(N[0]),D(N[1])]:D(N),done:ee}},[Symbol.iterator](){return this}}}}function ks(t){return function(...n){return t==="delete"?!1:this}}function jE(){const t={get(y){return Tf(this,y)},get size(){return Af(this)},has:Cf,add:S_,set:T_,delete:C_,clear:A_,forEach:If(!1,!1)},n={get(y){return Tf(this,y,!1,!0)},get size(){return Af(this)},has:Cf,add:S_,set:T_,delete:C_,clear:A_,forEach:If(!1,!0)},l={get(y){return Tf(this,y,!0)},get size(){return Af(this,!0)},has(y){return Cf.call(this,y,!0)},add:ks("add"),set:ks("set"),delete:ks("delete"),clear:ks("clear"),forEach:If(!0,!1)},p={get(y){return Tf(this,y,!0,!0)},get size(){return Af(this,!0)},has(y){return Cf.call(this,y,!0)},add:ks("add"),set:ks("set"),delete:ks("delete"),clear:ks("clear"),forEach:If(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=kf(y,!1,!1),l[y]=kf(y,!0,!1),n[y]=kf(y,!1,!0),p[y]=kf(y,!0,!0)}),[t,l,n,p]}const[qE,HE,$E,ZE]=jE();function Ed(t,n){const l=n?t?ZE:$E:t?HE:qE;return(p,d,y)=>d==="__v_isReactive"?!t:d==="__v_isReadonly"?t:d==="__v_raw"?p:Reflect.get(Tr(l,d)&&d in p?l:p,d,y)}const GE={get:Ed(!1,!1)},WE={get:Ed(!1,!0)},KE={get:Ed(!0,!1)},XE={get:Ed(!0,!0)},i1=new WeakMap,o1=new WeakMap,a1=new WeakMap,s1=new WeakMap;function JE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function YE(t){return t.__v_skip||!Object.isExtensible(t)?0:JE(rE(t))}function Sd(t){return $l(t)?t:Td(t,!1,r1,GE,i1)}function l1(t){return Td(t,!1,UE,WE,o1)}function Yg(t){return Td(t,!0,n1,KE,a1)}function QE(t){return Td(t,!0,VE,XE,s1)}function Td(t,n,l,p,d){if(!Vr(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const y=d.get(t);if(y)return y;const x=YE(t);if(x===0)return t;const E=new Proxy(t,x===2?p:l);return d.set(t,E),E}function Ul(t){return $l(t)?Ul(t.__v_raw):!!(t&&t.__v_isReactive)}function $l(t){return!!(t&&t.__v_isReadonly)}function Up(t){return!!(t&&t.__v_isShallow)}function Qg(t){return Ul(t)||$l(t)}function _r(t){const n=t&&t.__v_raw;return n?_r(n):t}function ey(t){return Xf(t,"__v_skip",!0),t}const Vp=t=>Vr(t)?Sd(t):t,ty=t=>Vr(t)?Yg(t):t;function ry(t){Ds&&$o&&(t=_r(t),Q0(t.dep||(t.dep=Xg())))}function Cd(t,n){t=_r(t);const l=t.dep;l&&mg(l)}function Gn(t){return!!(t&&t.__v_isRef===!0)}function sc(t){return u1(t,!1)}function eS(t){return u1(t,!0)}function u1(t,n){return Gn(t)?t:new tS(t,n)}class tS{constructor(n,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?n:_r(n),this._value=l?n:Vp(n)}get value(){return ry(this),this._value}set value(n){const l=this.__v_isShallow||Up(n)||$l(n);n=l?n:_r(n),hc(n,this._rawValue)&&(this._rawValue=n,this._value=l?n:Vp(n),Cd(this))}}function rS(t){Cd(t)}function ny(t){return Gn(t)?t.value:t}function nS(t){return $t(t)?t():ny(t)}const iS={get:(t,n,l)=>ny(Reflect.get(t,n,l)),set:(t,n,l,p)=>{const d=t[n];return Gn(d)&&!Gn(l)?(d.value=l,!0):Reflect.set(t,n,l,p)}};function iy(t){return Ul(t)?t:new Proxy(t,iS)}class oS{constructor(n){this.dep=void 0,this.__v_isRef=!0;const{get:l,set:p}=n(()=>ry(this),()=>Cd(this));this._get=l,this._set=p}get value(){return this._get()}set value(n){this._set(n)}}function aS(t){return new oS(t)}function sS(t){const n=bt(t)?new Array(t.length):{};for(const l in t)n[l]=c1(t,l);return n}class lS{constructor(n,l,p){this._object=n,this._key=l,this._defaultValue=p,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return AE(_r(this._object),this._key)}}class uS{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function cS(t,n,l){return Gn(t)?t:$t(t)?new uS(t):Vr(t)&&arguments.length>1?c1(t,n,l):sc(t)}function c1(t,n,l){const p=t[n];return Gn(p)?p:new lS(t,n,l)}class pS{constructor(n,l,p,d){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new nh(n,()=>{this._dirty||(this._dirty=!0,Cd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!d,this.__v_isReadonly=p}get value(){const n=_r(this);return ry(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function hS(t,n,l=!1){let p,d;const y=$t(t);return y?(p=t,d=Ni):(p=t.get,d=t.set),new pS(p,d,y||!d,l)}function fS(t,...n){}function dS(t,n){}function ns(t,n,l,p){let d;try{d=p?t(...p):t()}catch(y){Ql(y,n,l)}return d}function vo(t,n,l,p){if($t(t)){const y=ns(t,n,l,p);return y&&Gg(y)&&y.catch(x=>{Ql(x,n,l)}),y}const d=[];for(let y=0;y<t.length;y++)d.push(vo(t[y],n,l,p));return d}function Ql(t,n,l,p=!0){const d=n?n.vnode:null;if(n){let y=n.parent;const x=n.proxy,E=l;for(;y;){const k=y.ec;if(k){for(let D=0;D<k.length;D++)if(k[D](t,x,E)===!1)return}y=y.parent}const C=n.appContext.config.errorHandler;if(C){ns(C,null,10,[t,x,E]);return}}mS(t,l,d,p)}function mS(t,n,l,p=!0){console.error(t)}let jp=!1,gg=!1;const Ti=[];let _a=0;const lc=[];let es=null,Rl=0;const p1=Promise.resolve();let oy=null;function ay(t){const n=oy||p1;return t?n.then(this?t.bind(this):t):n}function gS(t){let n=_a+1,l=Ti.length;for(;n<l;){const p=n+l>>>1;qp(Ti[p])<t?n=p+1:l=p}return n}function Ad(t){(!Ti.length||!Ti.includes(t,jp&&t.allowRecurse?_a+1:_a))&&(t.id==null?Ti.push(t):Ti.splice(gS(t.id),0,t),h1())}function h1(){!jp&&!gg&&(gg=!0,oy=p1.then(f1))}function yS(t){const n=Ti.indexOf(t);n>_a&&Ti.splice(n,1)}function sy(t){bt(t)?lc.push(...t):(!es||!es.includes(t,t.allowRecurse?Rl+1:Rl))&&lc.push(t),h1()}function I_(t,n=jp?_a+1:0){for(;n<Ti.length;n++){const l=Ti[n];l&&l.pre&&(Ti.splice(n,1),n--,l())}}function ed(t){if(lc.length){const n=[...new Set(lc)];if(lc.length=0,es){es.push(...n);return}for(es=n,es.sort((l,p)=>qp(l)-qp(p)),Rl=0;Rl<es.length;Rl++)es[Rl]();es=null,Rl=0}}const qp=t=>t.id==null?1/0:t.id,vS=(t,n)=>{const l=qp(t)-qp(n);if(l===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return l};function f1(t){gg=!1,jp=!0,Ti.sort(vS);const n=Ni;try{for(_a=0;_a<Ti.length;_a++){const l=Ti[_a];l&&l.active!==!1&&ns(l,null,14)}}finally{_a=0,Ti.length=0,ed(),jp=!1,oy=null,(Ti.length||lc.length)&&f1()}}let tc,Pf=[];function d1(t,n){var l,p;tc=t,tc?(tc.enabled=!0,Pf.forEach(({event:d,args:y})=>tc.emit(d,...y)),Pf=[]):typeof window<"u"&&window.HTMLElement&&!((p=(l=window.navigator)==null?void 0:l.userAgent)!=null&&p.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(y=>{d1(y,n)}),setTimeout(()=>{tc||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Pf=[])},3e3)):Pf=[]}function _S(t,n,...l){if(t.isUnmounted)return;const p=t.vnode.props||Ur;let d=l;const y=n.startsWith("update:"),x=y&&n.slice(7);if(x&&x in p){const D=`${x==="modelValue"?"model":x}Modifiers`,{number:N,trim:ee}=p[D]||Ur;ee&&(d=l.map(se=>tr(se)?se.trim():se)),N&&(d=l.map(Jf))}let E,C=p[E=oc(n)]||p[E=oc(Vn(n))];!C&&y&&(C=p[E=oc(go(n))]),C&&vo(C,t,6,d);const k=p[E+"Once"];if(k){if(!t.emitted)t.emitted={};else if(t.emitted[E])return;t.emitted[E]=!0,vo(k,t,6,d)}}function m1(t,n,l=!1){const p=n.emitsCache,d=p.get(t);if(d!==void 0)return d;const y=t.emits;let x={},E=!1;if(!$t(t)){const C=k=>{const D=m1(k,n,!0);D&&(E=!0,vr(x,D))};!l&&n.mixins.length&&n.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}return!y&&!E?(Vr(t)&&p.set(t,null),null):(bt(y)?y.forEach(C=>x[C]=null):vr(x,y),Vr(t)&&p.set(t,x),x)}function Id(t,n){return!t||!Xl(n)?!1:(n=n.slice(2).replace(/Once$/,""),Tr(t,n[0].toLowerCase()+n.slice(1))||Tr(t,go(n))||Tr(t,n))}let oi=null,kd=null;function Hp(t){const n=oi;return oi=t,kd=t&&t.type.__scopeId||null,n}function Cc(t){kd=t}function Ac(){kd=null}const xS=t=>Pd;function Pd(t,n=oi,l){if(!n||t._n)return t;const p=(...d)=>{p._d&&Eg(-1);const y=Hp(n);let x;try{x=t(...d)}finally{Hp(y),p._d&&Eg(1)}return x};return p._n=!0,p._c=!0,p._d=!0,p}function Vf(t){const{type:n,vnode:l,proxy:p,withProxy:d,props:y,propsOptions:[x],slots:E,attrs:C,emit:k,render:D,renderCache:N,data:ee,setupState:se,ctx:ne,inheritAttrs:ve}=t;let fe,pe;const ue=Hp(t);try{if(l.shapeFlag&4){const _e=d||p;fe=mo(D.call(_e,_e,N,y,se,ee,ne)),pe=C}else{const _e=n;fe=mo(_e.length>1?_e(y,{attrs:C,slots:E,emit:k}):_e(y,null)),pe=n.props?C:wS(C)}}catch(_e){Dp.length=0,Ql(_e,t,1),fe=Mr(Ii)}let be=fe;if(pe&&ve!==!1){const _e=Object.keys(pe),{shapeFlag:Oe}=be;_e.length&&Oe&7&&(x&&_e.some($g)&&(pe=ES(pe,x)),be=wa(be,pe))}return l.dirs&&(be=wa(be),be.dirs=be.dirs?be.dirs.concat(l.dirs):l.dirs),l.transition&&(be.transition=l.transition),fe=be,Hp(ue),fe}function bS(t){let n;for(let l=0;l<t.length;l++){const p=t[l];if(js(p)){if(p.type!==Ii||p.children==="v-if"){if(n)return;n=p}}else return}return n}const wS=t=>{let n;for(const l in t)(l==="class"||l==="style"||Xl(l))&&((n||(n={}))[l]=t[l]);return n},ES=(t,n)=>{const l={};for(const p in t)(!$g(p)||!(p.slice(9)in n))&&(l[p]=t[p]);return l};function SS(t,n,l){const{props:p,children:d,component:y}=t,{props:x,children:E,patchFlag:C}=n,k=y.emitsOptions;if(n.dirs||n.transition)return!0;if(l&&C>=0){if(C&1024)return!0;if(C&16)return p?k_(p,x,k):!!x;if(C&8){const D=n.dynamicProps;for(let N=0;N<D.length;N++){const ee=D[N];if(x[ee]!==p[ee]&&!Id(k,ee))return!0}}}else return(d||E)&&(!E||!E.$stable)?!0:p===x?!1:p?x?k_(p,x,k):!0:!!x;return!1}function k_(t,n,l){const p=Object.keys(n);if(p.length!==Object.keys(t).length)return!0;for(let d=0;d<p.length;d++){const y=p[d];if(n[y]!==t[y]&&!Id(l,y))return!0}return!1}function ly({vnode:t,parent:n},l){for(;n&&n.subTree===t;)(t=n.vnode).el=l,n=n.parent}const g1=t=>t.__isSuspense,TS={name:"Suspense",__isSuspense:!0,process(t,n,l,p,d,y,x,E,C,k){t==null?AS(n,l,p,d,y,x,E,C,k):IS(t,n,l,p,d,x,E,C,k)},hydrate:kS,create:uy,normalize:PS},CS=TS;function $p(t,n){const l=t.props&&t.props[n];$t(l)&&l()}function AS(t,n,l,p,d,y,x,E,C){const{p:k,o:{createElement:D}}=C,N=D("div"),ee=t.suspense=uy(t,d,p,n,N,l,y,x,E,C);k(null,ee.pendingBranch=t.ssContent,N,null,p,ee,y,x),ee.deps>0?($p(t,"onPending"),$p(t,"onFallback"),k(null,t.ssFallback,n,l,p,null,y,x),uc(ee,t.ssFallback)):ee.resolve(!1,!0)}function IS(t,n,l,p,d,y,x,E,{p:C,um:k,o:{createElement:D}}){const N=n.suspense=t.suspense;N.vnode=n,n.el=t.el;const ee=n.ssContent,se=n.ssFallback,{activeBranch:ne,pendingBranch:ve,isInFallback:fe,isHydrating:pe}=N;if(ve)N.pendingBranch=ee,Zo(ee,ve)?(C(ve,ee,N.hiddenContainer,null,d,N,y,x,E),N.deps<=0?N.resolve():fe&&(C(ne,se,l,p,d,null,y,x,E),uc(N,se))):(N.pendingId++,pe?(N.isHydrating=!1,N.activeBranch=ve):k(ve,d,N),N.deps=0,N.effects.length=0,N.hiddenContainer=D("div"),fe?(C(null,ee,N.hiddenContainer,null,d,N,y,x,E),N.deps<=0?N.resolve():(C(ne,se,l,p,d,null,y,x,E),uc(N,se))):ne&&Zo(ee,ne)?(C(ne,ee,l,p,d,N,y,x,E),N.resolve(!0)):(C(null,ee,N.hiddenContainer,null,d,N,y,x,E),N.deps<=0&&N.resolve()));else if(ne&&Zo(ee,ne))C(ne,ee,l,p,d,N,y,x,E),uc(N,ee);else if($p(n,"onPending"),N.pendingBranch=ee,N.pendingId++,C(null,ee,N.hiddenContainer,null,d,N,y,x,E),N.deps<=0)N.resolve();else{const{timeout:ue,pendingId:be}=N;ue>0?setTimeout(()=>{N.pendingId===be&&N.fallback(se)},ue):ue===0&&N.fallback(se)}}function uy(t,n,l,p,d,y,x,E,C,k,D=!1){const{p:N,m:ee,um:se,n:ne,o:{parentNode:ve,remove:fe}}=k;let pe;const ue=MS(t);ue&&n!=null&&n.pendingBranch&&(pe=n.pendingId,n.deps++);const be=t.props?Yf(t.props.timeout):void 0,_e={vnode:t,parent:n,parentComponent:l,isSVG:x,container:p,hiddenContainer:d,anchor:y,deps:0,pendingId:0,timeout:typeof be=="number"?be:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:D,isUnmounted:!1,effects:[],resolve(Oe=!1,f=!1){const{vnode:ke,activeBranch:Y,pendingBranch:Fe,pendingId:ze,effects:Xe,parentComponent:xe,container:mt}=_e;if(_e.isHydrating)_e.isHydrating=!1;else if(!Oe){const Ot=Y&&Fe.transition&&Fe.transition.mode==="out-in";Ot&&(Y.transition.afterLeave=()=>{ze===_e.pendingId&&ee(Fe,mt,rr,0)});let{anchor:rr}=_e;Y&&(rr=ne(Y),se(Y,xe,_e,!0)),Ot||ee(Fe,mt,rr,0)}uc(_e,Fe),_e.pendingBranch=null,_e.isInFallback=!1;let et=_e.parent,Wt=!1;for(;et;){if(et.pendingBranch){et.effects.push(...Xe),Wt=!0;break}et=et.parent}Wt||sy(Xe),_e.effects=[],ue&&n&&n.pendingBranch&&pe===n.pendingId&&(n.deps--,n.deps===0&&!f&&n.resolve()),$p(ke,"onResolve")},fallback(Oe){if(!_e.pendingBranch)return;const{vnode:f,activeBranch:ke,parentComponent:Y,container:Fe,isSVG:ze}=_e;$p(f,"onFallback");const Xe=ne(ke),xe=()=>{_e.isInFallback&&(N(null,Oe,Fe,Xe,Y,null,ze,E,C),uc(_e,Oe))},mt=Oe.transition&&Oe.transition.mode==="out-in";mt&&(ke.transition.afterLeave=xe),_e.isInFallback=!0,se(ke,Y,null,!0),mt||xe()},move(Oe,f,ke){_e.activeBranch&&ee(_e.activeBranch,Oe,f,ke),_e.container=Oe},next(){return _e.activeBranch&&ne(_e.activeBranch)},registerDep(Oe,f){const ke=!!_e.pendingBranch;ke&&_e.deps++;const Y=Oe.vnode.el;Oe.asyncDep.catch(Fe=>{Ql(Fe,Oe,0)}).then(Fe=>{if(Oe.isUnmounted||_e.isUnmounted||_e.pendingId!==Oe.suspenseId)return;Oe.asyncResolved=!0;const{vnode:ze}=Oe;Sg(Oe,Fe,!1),Y&&(ze.el=Y);const Xe=!Y&&Oe.subTree.el;f(Oe,ze,ve(Y||Oe.subTree.el),Y?null:ne(Oe.subTree),_e,x,C),Xe&&fe(Xe),ly(Oe,ze.el),ke&&--_e.deps===0&&_e.resolve()})},unmount(Oe,f){_e.isUnmounted=!0,_e.activeBranch&&se(_e.activeBranch,l,Oe,f),_e.pendingBranch&&se(_e.pendingBranch,l,Oe,f)}};return _e}function kS(t,n,l,p,d,y,x,E,C){const k=n.suspense=uy(n,p,l,t.parentNode,document.createElement("div"),null,d,y,x,E,!0),D=C(t,k.pendingBranch=n.ssContent,l,k,y,x);return k.deps===0&&k.resolve(!1,!0),D}function PS(t){const{shapeFlag:n,children:l}=t,p=n&32;t.ssContent=P_(p?l.default:l),t.ssFallback=p?P_(l.fallback):Mr(Ii)}function P_(t){let n;if($t(t)){const l=Wl&&t._c;l&&(t._d=!1,nn()),t=t(),l&&(t._d=!0,n=Qi,W1())}return bt(t)&&(t=bS(t)),t=mo(t),n&&!t.dynamicChildren&&(t.dynamicChildren=n.filter(l=>l!==t)),t}function y1(t,n){n&&n.pendingBranch?bt(t)?n.effects.push(...t):n.effects.push(t):sy(t)}function uc(t,n){t.activeBranch=n;const{vnode:l,parentComponent:p}=t,d=l.el=n.el;p&&p.subTree===l&&(p.vnode.el=d,ly(p,d))}function MS(t){var n;return((n=t.props)==null?void 0:n.suspensible)!=null&&t.props.suspensible!==!1}function zS(t,n){return ih(t,null,n)}function v1(t,n){return ih(t,null,{flush:"post"})}function LS(t,n){return ih(t,null,{flush:"sync"})}const Mf={};function Vl(t,n,l){return ih(t,n,l)}function ih(t,n,{immediate:l,deep:p,flush:d,onTrack:y,onTrigger:x}=Ur){var E;const C=K0()===((E=Un)==null?void 0:E.scope)?Un:null;let k,D=!1,N=!1;if(Gn(t)?(k=()=>t.value,D=Up(t)):Ul(t)?(k=()=>t,p=!0):bt(t)?(N=!0,D=t.some(_e=>Ul(_e)||Up(_e)),k=()=>t.map(_e=>{if(Gn(_e))return _e.value;if(Ul(_e))return Dl(_e);if($t(_e))return ns(_e,C,2)})):$t(t)?n?k=()=>ns(t,C,2):k=()=>{if(!(C&&C.isUnmounted))return ee&&ee(),vo(t,C,3,[se])}:k=Ni,n&&p){const _e=k;k=()=>Dl(_e())}let ee,se=_e=>{ee=ue.onStop=()=>{ns(_e,C,4)}},ne;if(dc)if(se=Ni,n?l&&vo(n,C,3,[k(),N?[]:void 0,se]):k(),d==="sync"){const _e=ux();ne=_e.__watcherHandles||(_e.__watcherHandles=[])}else return Ni;let ve=N?new Array(t.length).fill(Mf):Mf;const fe=()=>{if(ue.active)if(n){const _e=ue.run();(p||D||(N?_e.some((Oe,f)=>hc(Oe,ve[f])):hc(_e,ve)))&&(ee&&ee(),vo(n,C,3,[_e,ve===Mf?void 0:N&&ve[0]===Mf?[]:ve,se]),ve=_e)}else ue.run()};fe.allowRecurse=!!n;let pe;d==="sync"?pe=fe:d==="post"?pe=()=>fi(fe,C&&C.suspense):(fe.pre=!0,C&&(fe.id=C.uid),pe=()=>Ad(fe));const ue=new nh(k,pe);n?l?fe():ve=ue.run():d==="post"?fi(ue.run.bind(ue),C&&C.suspense):ue.run();const be=()=>{ue.stop(),C&&C.scope&&Zg(C.scope.effects,ue)};return ne&&ne.push(be),be}function RS(t,n,l){const p=this.proxy,d=tr(t)?t.includes(".")?_1(p,t):()=>p[t]:t.bind(p,p);let y;$t(n)?y=n:(y=n.handler,l=n);const x=Un;qs(this);const E=ih(d,y.bind(p),l);return x?qs(x):Bs(),E}function _1(t,n){const l=n.split(".");return()=>{let p=t;for(let d=0;d<l.length&&p;d++)p=p[l[d]];return p}}function Dl(t,n){if(!Vr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Gn(t))Dl(t.value,n);else if(bt(t))for(let l=0;l<t.length;l++)Dl(t[l],n);else if(Jl(t)||ic(t))t.forEach(l=>{Dl(l,n)});else if(H0(t))for(const l in t)Dl(t[l],n);return t}function x1(t,n){const l=oi;if(l===null)return t;const p=Fd(l)||l.proxy,d=t.dirs||(t.dirs=[]);for(let y=0;y<n.length;y++){let[x,E,C,k=Ur]=n[y];x&&($t(x)&&(x={mounted:x,updated:x}),x.deep&&Dl(E),d.push({dir:x,instance:p,value:E,oldValue:void 0,arg:C,modifiers:k}))}return t}function va(t,n,l,p){const d=t.dirs,y=n&&n.dirs;for(let x=0;x<d.length;x++){const E=d[x];y&&(E.oldValue=y[x].value);let C=E.dir[p];C&&(Sc(),vo(C,l,8,[t.el,E,t,n]),Tc())}}function cy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ah(()=>{t.isMounted=!0}),Rd(()=>{t.isUnmounting=!0}),t}const ko=[Function,Array],py={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ko,onEnter:ko,onAfterEnter:ko,onEnterCancelled:ko,onBeforeLeave:ko,onLeave:ko,onAfterLeave:ko,onLeaveCancelled:ko,onBeforeAppear:ko,onAppear:ko,onAfterAppear:ko,onAppearCancelled:ko},OS={name:"BaseTransition",props:py,setup(t,{slots:n}){const l=ss(),p=cy();let d;return()=>{const y=n.default&&Md(n.default(),!0);if(!y||!y.length)return;let x=y[0];if(y.length>1){for(const ve of y)if(ve.type!==Ii){x=ve;break}}const E=_r(t),{mode:C}=E;if(p.isLeaving)return Zm(x);const k=M_(x);if(!k)return Zm(x);const D=fc(k,E,p,l);Zl(k,D);const N=l.subTree,ee=N&&M_(N);let se=!1;const{getTransitionKey:ne}=k.type;if(ne){const ve=ne();d===void 0?d=ve:ve!==d&&(d=ve,se=!0)}if(ee&&ee.type!==Ii&&(!Zo(k,ee)||se)){const ve=fc(ee,E,p,l);if(Zl(ee,ve),C==="out-in")return p.isLeaving=!0,ve.afterLeave=()=>{p.isLeaving=!1,l.update.active!==!1&&l.update()},Zm(x);C==="in-out"&&k.type!==Ii&&(ve.delayLeave=(fe,pe,ue)=>{const be=w1(p,ee);be[String(ee.key)]=ee,fe._leaveCb=()=>{pe(),fe._leaveCb=void 0,delete D.delayedLeave},D.delayedLeave=ue})}return x}}},b1=OS;function w1(t,n){const{leavingVNodes:l}=t;let p=l.get(n.type);return p||(p=Object.create(null),l.set(n.type,p)),p}function fc(t,n,l,p){const{appear:d,mode:y,persisted:x=!1,onBeforeEnter:E,onEnter:C,onAfterEnter:k,onEnterCancelled:D,onBeforeLeave:N,onLeave:ee,onAfterLeave:se,onLeaveCancelled:ne,onBeforeAppear:ve,onAppear:fe,onAfterAppear:pe,onAppearCancelled:ue}=n,be=String(t.key),_e=w1(l,t),Oe=(Y,Fe)=>{Y&&vo(Y,p,9,Fe)},f=(Y,Fe)=>{const ze=Fe[1];Oe(Y,Fe),bt(Y)?Y.every(Xe=>Xe.length<=1)&&ze():Y.length<=1&&ze()},ke={mode:y,persisted:x,beforeEnter(Y){let Fe=E;if(!l.isMounted)if(d)Fe=ve||E;else return;Y._leaveCb&&Y._leaveCb(!0);const ze=_e[be];ze&&Zo(t,ze)&&ze.el._leaveCb&&ze.el._leaveCb(),Oe(Fe,[Y])},enter(Y){let Fe=C,ze=k,Xe=D;if(!l.isMounted)if(d)Fe=fe||C,ze=pe||k,Xe=ue||D;else return;let xe=!1;const mt=Y._enterCb=et=>{xe||(xe=!0,et?Oe(Xe,[Y]):Oe(ze,[Y]),ke.delayedLeave&&ke.delayedLeave(),Y._enterCb=void 0)};Fe?f(Fe,[Y,mt]):mt()},leave(Y,Fe){const ze=String(t.key);if(Y._enterCb&&Y._enterCb(!0),l.isUnmounting)return Fe();Oe(N,[Y]);let Xe=!1;const xe=Y._leaveCb=mt=>{Xe||(Xe=!0,Fe(),mt?Oe(ne,[Y]):Oe(se,[Y]),Y._leaveCb=void 0,_e[ze]===t&&delete _e[ze])};_e[ze]=t,ee?f(ee,[Y,xe]):xe()},clone(Y){return fc(Y,n,l,p)}};return ke}function Zm(t){if(oh(t))return t=wa(t),t.children=null,t}function M_(t){return oh(t)?t.children?t.children[0]:void 0:t}function Zl(t,n){t.shapeFlag&6&&t.component?Zl(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function Md(t,n=!1,l){let p=[],d=0;for(let y=0;y<t.length;y++){let x=t[y];const E=l==null?x.key:String(l)+String(x.key!=null?x.key:y);x.type===Zn?(x.patchFlag&128&&d++,p=p.concat(Md(x.children,n,E))):(n||x.type!==Ii)&&p.push(E!=null?wa(x,{key:E}):x)}if(d>1)for(let y=0;y<p.length;y++)p[y].patchFlag=-2;return p}function hy(t,n){return $t(t)?(()=>vr({name:t.name},n,{setup:t}))():t}const jl=t=>!!t.type.__asyncLoader;function DS(t){$t(t)&&(t={loader:t});const{loader:n,loadingComponent:l,errorComponent:p,delay:d=200,timeout:y,suspensible:x=!0,onError:E}=t;let C=null,k,D=0;const N=()=>(D++,C=null,ee()),ee=()=>{let se;return C||(se=C=n().catch(ne=>{if(ne=ne instanceof Error?ne:new Error(String(ne)),E)return new Promise((ve,fe)=>{E(ne,()=>ve(N()),()=>fe(ne),D+1)});throw ne}).then(ne=>se!==C&&C?C:(ne&&(ne.__esModule||ne[Symbol.toStringTag]==="Module")&&(ne=ne.default),k=ne,ne)))};return hy({name:"AsyncComponentWrapper",__asyncLoader:ee,get __asyncResolved(){return k},setup(){const se=Un;if(k)return()=>Gm(k,se);const ne=ue=>{C=null,Ql(ue,se,13,!p)};if(x&&se.suspense||dc)return ee().then(ue=>()=>Gm(ue,se)).catch(ue=>(ne(ue),()=>p?Mr(p,{error:ue}):null));const ve=sc(!1),fe=sc(),pe=sc(!!d);return d&&setTimeout(()=>{pe.value=!1},d),y!=null&&setTimeout(()=>{if(!ve.value&&!fe.value){const ue=new Error(`Async component timed out after ${y}ms.`);ne(ue),fe.value=ue}},y),ee().then(()=>{ve.value=!0,se.parent&&oh(se.parent.vnode)&&Ad(se.parent.update)}).catch(ue=>{ne(ue),fe.value=ue}),()=>{if(ve.value&&k)return Gm(k,se);if(fe.value&&p)return Mr(p,{error:fe.value});if(l&&!pe.value)return Mr(l)}}})}function Gm(t,n){const{ref:l,props:p,children:d,ce:y}=n.vnode,x=Mr(t,p,d);return x.ref=l,x.ce=y,delete n.vnode.ce,x}const oh=t=>t.type.__isKeepAlive,BS={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:n}){const l=ss(),p=l.ctx;if(!p.renderer)return()=>{const ue=n.default&&n.default();return ue&&ue.length===1?ue[0]:ue};const d=new Map,y=new Set;let x=null;const E=l.suspense,{renderer:{p:C,m:k,um:D,o:{createElement:N}}}=p,ee=N("div");p.activate=(ue,be,_e,Oe,f)=>{const ke=ue.component;k(ue,be,_e,0,E),C(ke.vnode,ue,be,_e,ke,E,Oe,ue.slotScopeIds,f),fi(()=>{ke.isDeactivated=!1,ke.a&&ac(ke.a);const Y=ue.props&&ue.props.onVnodeMounted;Y&&Ji(Y,ke.parent,ue)},E)},p.deactivate=ue=>{const be=ue.component;k(ue,ee,null,1,E),fi(()=>{be.da&&ac(be.da);const _e=ue.props&&ue.props.onVnodeUnmounted;_e&&Ji(_e,be.parent,ue),be.isDeactivated=!0},E)};function se(ue){Wm(ue),D(ue,l,E,!0)}function ne(ue){d.forEach((be,_e)=>{const Oe=Cg(be.type);Oe&&(!ue||!ue(Oe))&&ve(_e)})}function ve(ue){const be=d.get(ue);!x||!Zo(be,x)?se(be):x&&Wm(x),d.delete(ue),y.delete(ue)}Vl(()=>[t.include,t.exclude],([ue,be])=>{ue&&ne(_e=>Mp(ue,_e)),be&&ne(_e=>!Mp(be,_e))},{flush:"post",deep:!0});let fe=null;const pe=()=>{fe!=null&&d.set(fe,Km(l.subTree))};return ah(pe),Ld(pe),Rd(()=>{d.forEach(ue=>{const{subTree:be,suspense:_e}=l,Oe=Km(be);if(ue.type===Oe.type&&ue.key===Oe.key){Wm(Oe);const f=Oe.component.da;f&&fi(f,_e);return}se(ue)})}),()=>{if(fe=null,!n.default)return null;const ue=n.default(),be=ue[0];if(ue.length>1)return x=null,ue;if(!js(be)||!(be.shapeFlag&4)&&!(be.shapeFlag&128))return x=null,be;let _e=Km(be);const Oe=_e.type,f=Cg(jl(_e)?_e.type.__asyncResolved||{}:Oe),{include:ke,exclude:Y,max:Fe}=t;if(ke&&(!f||!Mp(ke,f))||Y&&f&&Mp(Y,f))return x=_e,be;const ze=_e.key==null?Oe:_e.key,Xe=d.get(ze);return _e.el&&(_e=wa(_e),be.shapeFlag&128&&(be.ssContent=_e)),fe=ze,Xe?(_e.el=Xe.el,_e.component=Xe.component,_e.transition&&Zl(_e,_e.transition),_e.shapeFlag|=512,y.delete(ze),y.add(ze)):(y.add(ze),Fe&&y.size>parseInt(Fe,10)&&ve(y.values().next().value)),_e.shapeFlag|=256,x=_e,g1(be.type)?be:_e}}},FS=BS;function Mp(t,n){return bt(t)?t.some(l=>Mp(l,n)):tr(t)?t.split(",").includes(n):tE(t)?t.test(n):!1}function E1(t,n){T1(t,"a",n)}function S1(t,n){T1(t,"da",n)}function T1(t,n,l=Un){const p=t.__wdc||(t.__wdc=()=>{let d=l;for(;d;){if(d.isDeactivated)return;d=d.parent}return t()});if(zd(n,p,l),l){let d=l.parent;for(;d&&d.parent;)oh(d.parent.vnode)&&NS(p,n,l,d),d=d.parent}}function NS(t,n,l,p){const d=zd(n,t,p,!0);Od(()=>{Zg(p[n],d)},l)}function Wm(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Km(t){return t.shapeFlag&128?t.ssContent:t}function zd(t,n,l=Un,p=!1){if(l){const d=l[t]||(l[t]=[]),y=n.__weh||(n.__weh=(...x)=>{if(l.isUnmounted)return;Sc(),qs(l);const E=vo(n,l,t,x);return Bs(),Tc(),E});return p?d.unshift(y):d.push(y),y}}const as=t=>(n,l=Un)=>(!dc||t==="sp")&&zd(t,(...p)=>n(...p),l),C1=as("bm"),ah=as("m"),A1=as("bu"),Ld=as("u"),Rd=as("bum"),Od=as("um"),I1=as("sp"),k1=as("rtg"),P1=as("rtc");function M1(t,n=Un){zd("ec",t,n)}const fy="components",US="directives";function Go(t,n){return dy(fy,t,!0,n)||t}const z1=Symbol.for("v-ndc");function VS(t){return tr(t)?dy(fy,t,!1)||t:t||z1}function jS(t){return dy(US,t)}function dy(t,n,l=!0,p=!1){const d=oi||Un;if(d){const y=d.type;if(t===fy){const E=Cg(y,!1);if(E&&(E===n||E===Vn(n)||E===Yl(Vn(n))))return y}const x=z_(d[t]||y[t],n)||z_(d.appContext[t],n);return!x&&p?y:x}}function z_(t,n){return t&&(t[n]||t[Vn(n)]||t[Yl(Vn(n))])}function L1(t,n,l,p){let d;const y=l&&l[p];if(bt(t)||tr(t)){d=new Array(t.length);for(let x=0,E=t.length;x<E;x++)d[x]=n(t[x],x,void 0,y&&y[x])}else if(typeof t=="number"){d=new Array(t);for(let x=0;x<t;x++)d[x]=n(x+1,x,void 0,y&&y[x])}else if(Vr(t))if(t[Symbol.iterator])d=Array.from(t,(x,E)=>n(x,E,void 0,y&&y[E]));else{const x=Object.keys(t);d=new Array(x.length);for(let E=0,C=x.length;E<C;E++){const k=x[E];d[E]=n(t[k],k,E,y&&y[E])}}else d=[];return l&&(l[p]=d),d}function qS(t,n){for(let l=0;l<n.length;l++){const p=n[l];if(bt(p))for(let d=0;d<p.length;d++)t[p[d].name]=p[d].fn;else p&&(t[p.name]=p.key?(...d)=>{const y=p.fn(...d);return y&&(y.key=p.key),y}:p.fn)}return t}function HS(t,n,l={},p,d){if(oi.isCE||oi.parent&&jl(oi.parent)&&oi.parent.isCE)return n!=="default"&&(l.name=n),Mr("slot",l,p&&p());let y=t[n];y&&y._c&&(y._d=!1),nn();const x=y&&R1(y(l)),E=rs(Zn,{key:l.key||x&&x.key||`_${n}`},x||(p?p():[]),x&&t._===1?64:-2);return!d&&E.scopeId&&(E.slotScopeIds=[E.scopeId+"-s"]),y&&y._c&&(y._d=!0),E}function R1(t){return t.some(n=>js(n)?!(n.type===Ii||n.type===Zn&&!R1(n.children)):!0)?t:null}function $S(t,n){const l={};for(const p in t)l[n&&/[A-Z]/.test(p)?`on:${p}`:oc(p)]=t[p];return l}const yg=t=>t?tx(t)?Fd(t)||t.proxy:yg(t.parent):null,Lp=vr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yg(t.parent),$root:t=>yg(t.root),$emit:t=>t.emit,$options:t=>my(t),$forceUpdate:t=>t.f||(t.f=()=>Ad(t.update)),$nextTick:t=>t.n||(t.n=ay.bind(t.proxy)),$watch:t=>RS.bind(t)}),Xm=(t,n)=>t!==Ur&&!t.__isScriptSetup&&Tr(t,n),vg={get({_:t},n){const{ctx:l,setupState:p,data:d,props:y,accessCache:x,type:E,appContext:C}=t;let k;if(n[0]!=="$"){const se=x[n];if(se!==void 0)switch(se){case 1:return p[n];case 2:return d[n];case 4:return l[n];case 3:return y[n]}else{if(Xm(p,n))return x[n]=1,p[n];if(d!==Ur&&Tr(d,n))return x[n]=2,d[n];if((k=t.propsOptions[0])&&Tr(k,n))return x[n]=3,y[n];if(l!==Ur&&Tr(l,n))return x[n]=4,l[n];_g&&(x[n]=0)}}const D=Lp[n];let N,ee;if(D)return n==="$attrs"&&to(t,"get",n),D(t);if((N=E.__cssModules)&&(N=N[n]))return N;if(l!==Ur&&Tr(l,n))return x[n]=4,l[n];if(ee=C.config.globalProperties,Tr(ee,n))return ee[n]},set({_:t},n,l){const{data:p,setupState:d,ctx:y}=t;return Xm(d,n)?(d[n]=l,!0):p!==Ur&&Tr(p,n)?(p[n]=l,!0):Tr(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(y[n]=l,!0)},has({_:{data:t,setupState:n,accessCache:l,ctx:p,appContext:d,propsOptions:y}},x){let E;return!!l[x]||t!==Ur&&Tr(t,x)||Xm(n,x)||(E=y[0])&&Tr(E,x)||Tr(p,x)||Tr(Lp,x)||Tr(d.config.globalProperties,x)},defineProperty(t,n,l){return l.get!=null?t._.accessCache[n]=0:Tr(l,"value")&&this.set(t,n,l.value,null),Reflect.defineProperty(t,n,l)}},ZS=vr({},vg,{get(t,n){if(n!==Symbol.unscopables)return vg.get(t,n,t)},has(t,n){return n[0]!=="_"&&!sE(n)}});function GS(){return null}function WS(){return null}function KS(t){}function XS(t){}function JS(){return null}function YS(){}function QS(t,n){return null}function e3(){return O1().slots}function t3(){return O1().attrs}function r3(t,n,l){const p=ss();if(l&&l.local){const d=sc(t[n]);return Vl(()=>t[n],y=>d.value=y),Vl(d,y=>{y!==t[n]&&p.emit(`update:${n}`,y)}),d}else return{__v_isRef:!0,get value(){return t[n]},set value(d){p.emit(`update:${n}`,d)}}}function O1(){const t=ss();return t.setupContext||(t.setupContext=ox(t))}function Zp(t){return bt(t)?t.reduce((n,l)=>(n[l]=null,n),{}):t}function n3(t,n){const l=Zp(t);for(const p in n){if(p.startsWith("__skip"))continue;let d=l[p];d?bt(d)||$t(d)?d=l[p]={type:d,default:n[p]}:d.default=n[p]:d===null&&(d=l[p]={default:n[p]}),d&&n[`__skip_${p}`]&&(d.skipFactory=!0)}return l}function i3(t,n){return!t||!n?t||n:bt(t)&&bt(n)?t.concat(n):vr({},Zp(t),Zp(n))}function o3(t,n){const l={};for(const p in t)n.includes(p)||Object.defineProperty(l,p,{enumerable:!0,get:()=>t[p]});return l}function a3(t){const n=ss();let l=t();return Bs(),Gg(l)&&(l=l.catch(p=>{throw qs(n),p})),[l,()=>qs(n)]}let _g=!0;function s3(t){const n=my(t),l=t.proxy,p=t.ctx;_g=!1,n.beforeCreate&&L_(n.beforeCreate,t,"bc");const{data:d,computed:y,methods:x,watch:E,provide:C,inject:k,created:D,beforeMount:N,mounted:ee,beforeUpdate:se,updated:ne,activated:ve,deactivated:fe,beforeDestroy:pe,beforeUnmount:ue,destroyed:be,unmounted:_e,render:Oe,renderTracked:f,renderTriggered:ke,errorCaptured:Y,serverPrefetch:Fe,expose:ze,inheritAttrs:Xe,components:xe,directives:mt,filters:et}=n;if(k&&l3(k,p,null),x)for(const rr in x){const Dt=x[rr];$t(Dt)&&(p[rr]=Dt.bind(l))}if(d){const rr=d.call(l,l);Vr(rr)&&(t.data=Sd(rr))}if(_g=!0,y)for(const rr in y){const Dt=y[rr],yn=$t(Dt)?Dt.bind(l,l):$t(Dt.get)?Dt.get.bind(l,l):Ni,di=!$t(Dt)&&$t(Dt.set)?Dt.set.bind(l):Ni,Kr=ax({get:yn,set:di});Object.defineProperty(p,rr,{enumerable:!0,configurable:!0,get:()=>Kr.value,set:vn=>Kr.value=vn})}if(E)for(const rr in E)D1(E[rr],p,l,rr);if(C){const rr=$t(C)?C.call(l):C;Reflect.ownKeys(rr).forEach(Dt=>{F1(Dt,rr[Dt])})}D&&L_(D,t,"c");function Ot(rr,Dt){bt(Dt)?Dt.forEach(yn=>rr(yn.bind(l))):Dt&&rr(Dt.bind(l))}if(Ot(C1,N),Ot(ah,ee),Ot(A1,se),Ot(Ld,ne),Ot(E1,ve),Ot(S1,fe),Ot(M1,Y),Ot(P1,f),Ot(k1,ke),Ot(Rd,ue),Ot(Od,_e),Ot(I1,Fe),bt(ze))if(ze.length){const rr=t.exposed||(t.exposed={});ze.forEach(Dt=>{Object.defineProperty(rr,Dt,{get:()=>l[Dt],set:yn=>l[Dt]=yn})})}else t.exposed||(t.exposed={});Oe&&t.render===Ni&&(t.render=Oe),Xe!=null&&(t.inheritAttrs=Xe),xe&&(t.components=xe),mt&&(t.directives=mt)}function l3(t,n,l=Ni){bt(t)&&(t=xg(t));for(const p in t){const d=t[p];let y;Vr(d)?"default"in d?y=Rp(d.from||p,d.default,!0):y=Rp(d.from||p):y=Rp(d),Gn(y)?Object.defineProperty(n,p,{enumerable:!0,configurable:!0,get:()=>y.value,set:x=>y.value=x}):n[p]=y}}function L_(t,n,l){vo(bt(t)?t.map(p=>p.bind(n.proxy)):t.bind(n.proxy),n,l)}function D1(t,n,l,p){const d=p.includes(".")?_1(l,p):()=>l[p];if(tr(t)){const y=n[t];$t(y)&&Vl(d,y)}else if($t(t))Vl(d,t.bind(l));else if(Vr(t))if(bt(t))t.forEach(y=>D1(y,n,l,p));else{const y=$t(t.handler)?t.handler.bind(l):n[t.handler];$t(y)&&Vl(d,y,t)}}function my(t){const n=t.type,{mixins:l,extends:p}=n,{mixins:d,optionsCache:y,config:{optionMergeStrategies:x}}=t.appContext,E=y.get(n);let C;return E?C=E:!d.length&&!l&&!p?C=n:(C={},d.length&&d.forEach(k=>td(C,k,x,!0)),td(C,n,x)),Vr(n)&&y.set(n,C),C}function td(t,n,l,p=!1){const{mixins:d,extends:y}=n;y&&td(t,y,l,!0),d&&d.forEach(x=>td(t,x,l,!0));for(const x in n)if(!(p&&x==="expose")){const E=u3[x]||l&&l[x];t[x]=E?E(t[x],n[x]):n[x]}return t}const u3={data:R_,props:O_,emits:O_,methods:zp,computed:zp,beforeCreate:Fi,created:Fi,beforeMount:Fi,mounted:Fi,beforeUpdate:Fi,updated:Fi,beforeDestroy:Fi,beforeUnmount:Fi,destroyed:Fi,unmounted:Fi,activated:Fi,deactivated:Fi,errorCaptured:Fi,serverPrefetch:Fi,components:zp,directives:zp,watch:p3,provide:R_,inject:c3};function R_(t,n){return n?t?function(){return vr($t(t)?t.call(this,this):t,$t(n)?n.call(this,this):n)}:n:t}function c3(t,n){return zp(xg(t),xg(n))}function xg(t){if(bt(t)){const n={};for(let l=0;l<t.length;l++)n[t[l]]=t[l];return n}return t}function Fi(t,n){return t?[...new Set([].concat(t,n))]:n}function zp(t,n){return t?vr(Object.create(null),t,n):n}function O_(t,n){return t?bt(t)&&bt(n)?[...new Set([...t,...n])]:vr(Object.create(null),Zp(t),Zp(n??{})):n}function p3(t,n){if(!t)return n;if(!n)return t;const l=vr(Object.create(null),t);for(const p in n)l[p]=Fi(t[p],n[p]);return l}function B1(){return{app:null,config:{isNativeTag:Uf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let h3=0;function f3(t,n){return function(p,d=null){$t(p)||(p=vr({},p)),d!=null&&!Vr(d)&&(d=null);const y=B1(),x=new Set;let E=!1;const C=y.app={_uid:h3++,_component:p,_props:d,_container:null,_context:y,_instance:null,version:px,get config(){return y.config},set config(k){},use(k,...D){return x.has(k)||(k&&$t(k.install)?(x.add(k),k.install(C,...D)):$t(k)&&(x.add(k),k(C,...D))),C},mixin(k){return y.mixins.includes(k)||y.mixins.push(k),C},component(k,D){return D?(y.components[k]=D,C):y.components[k]},directive(k,D){return D?(y.directives[k]=D,C):y.directives[k]},mount(k,D,N){if(!E){const ee=Mr(p,d);return ee.appContext=y,D&&n?n(ee,k):t(ee,k,N),E=!0,C._container=k,k.__vue_app__=C,Fd(ee.component)||ee.component.proxy}},unmount(){E&&(t(null,C._container),delete C._container.__vue_app__)},provide(k,D){return y.provides[k]=D,C},runWithContext(k){Gp=C;try{return k()}finally{Gp=null}}};return C}}let Gp=null;function F1(t,n){if(Un){let l=Un.provides;const p=Un.parent&&Un.parent.provides;p===l&&(l=Un.provides=Object.create(p)),l[t]=n}}function Rp(t,n,l=!1){const p=Un||oi;if(p||Gp){const d=p?p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:Gp._context.provides;if(d&&t in d)return d[t];if(arguments.length>1)return l&&$t(n)?n.call(p&&p.proxy):n}}function d3(){return!!(Un||oi||Gp)}function m3(t,n,l,p=!1){const d={},y={};Xf(y,Dd,1),t.propsDefaults=Object.create(null),N1(t,n,d,y);for(const x in t.propsOptions[0])x in d||(d[x]=void 0);l?t.props=p?d:l1(d):t.type.props?t.props=d:t.props=y,t.attrs=y}function g3(t,n,l,p){const{props:d,attrs:y,vnode:{patchFlag:x}}=t,E=_r(d),[C]=t.propsOptions;let k=!1;if((p||x>0)&&!(x&16)){if(x&8){const D=t.vnode.dynamicProps;for(let N=0;N<D.length;N++){let ee=D[N];if(Id(t.emitsOptions,ee))continue;const se=n[ee];if(C)if(Tr(y,ee))se!==y[ee]&&(y[ee]=se,k=!0);else{const ne=Vn(ee);d[ne]=bg(C,E,ne,se,t,!1)}else se!==y[ee]&&(y[ee]=se,k=!0)}}}else{N1(t,n,d,y)&&(k=!0);let D;for(const N in E)(!n||!Tr(n,N)&&((D=go(N))===N||!Tr(n,D)))&&(C?l&&(l[N]!==void 0||l[D]!==void 0)&&(d[N]=bg(C,E,N,void 0,t,!0)):delete d[N]);if(y!==E)for(const N in y)(!n||!Tr(n,N))&&(delete y[N],k=!0)}k&&os(t,"set","$attrs")}function N1(t,n,l,p){const[d,y]=t.propsOptions;let x=!1,E;if(n)for(let C in n){if(Fl(C))continue;const k=n[C];let D;d&&Tr(d,D=Vn(C))?!y||!y.includes(D)?l[D]=k:(E||(E={}))[D]=k:Id(t.emitsOptions,C)||(!(C in p)||k!==p[C])&&(p[C]=k,x=!0)}if(y){const C=_r(l),k=E||Ur;for(let D=0;D<y.length;D++){const N=y[D];l[N]=bg(d,C,N,k[N],t,!Tr(k,N))}}return x}function bg(t,n,l,p,d,y){const x=t[l];if(x!=null){const E=Tr(x,"default");if(E&&p===void 0){const C=x.default;if(x.type!==Function&&!x.skipFactory&&$t(C)){const{propsDefaults:k}=d;l in k?p=k[l]:(qs(d),p=k[l]=C.call(null,n),Bs())}else p=C}x[0]&&(y&&!E?p=!1:x[1]&&(p===""||p===go(l))&&(p=!0))}return p}function U1(t,n,l=!1){const p=n.propsCache,d=p.get(t);if(d)return d;const y=t.props,x={},E=[];let C=!1;if(!$t(t)){const D=N=>{C=!0;const[ee,se]=U1(N,n,!0);vr(x,ee),se&&E.push(...se)};!l&&n.mixins.length&&n.mixins.forEach(D),t.extends&&D(t.extends),t.mixins&&t.mixins.forEach(D)}if(!y&&!C)return Vr(t)&&p.set(t,nc),nc;if(bt(y))for(let D=0;D<y.length;D++){const N=Vn(y[D]);D_(N)&&(x[N]=Ur)}else if(y)for(const D in y){const N=Vn(D);if(D_(N)){const ee=y[D],se=x[N]=bt(ee)||$t(ee)?{type:ee}:vr({},ee);if(se){const ne=N_(Boolean,se.type),ve=N_(String,se.type);se[0]=ne>-1,se[1]=ve<0||ne<ve,(ne>-1||Tr(se,"default"))&&E.push(N)}}}const k=[x,E];return Vr(t)&&p.set(t,k),k}function D_(t){return t[0]!=="$"}function B_(t){const n=t&&t.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:t===null?"null":""}function F_(t,n){return B_(t)===B_(n)}function N_(t,n){return bt(n)?n.findIndex(l=>F_(l,t)):$t(n)&&F_(n,t)?0:-1}const V1=t=>t[0]==="_"||t==="$stable",gy=t=>bt(t)?t.map(mo):[mo(t)],y3=(t,n,l)=>{if(n._n)return n;const p=Pd((...d)=>gy(n(...d)),l);return p._c=!1,p},j1=(t,n,l)=>{const p=t._ctx;for(const d in t){if(V1(d))continue;const y=t[d];if($t(y))n[d]=y3(d,y,p);else if(y!=null){const x=gy(y);n[d]=()=>x}}},q1=(t,n)=>{const l=gy(n);t.slots.default=()=>l},v3=(t,n)=>{if(t.vnode.shapeFlag&32){const l=n._;l?(t.slots=_r(n),Xf(n,"_",l)):j1(n,t.slots={})}else t.slots={},n&&q1(t,n);Xf(t.slots,Dd,1)},_3=(t,n,l)=>{const{vnode:p,slots:d}=t;let y=!0,x=Ur;if(p.shapeFlag&32){const E=n._;E?l&&E===1?y=!1:(vr(d,n),!l&&E===1&&delete d._):(y=!n.$stable,j1(n,d)),x=n}else n&&(q1(t,n),x={default:1});if(y)for(const E in d)!V1(E)&&!(E in x)&&delete d[E]};function rd(t,n,l,p,d=!1){if(bt(t)){t.forEach((ee,se)=>rd(ee,n&&(bt(n)?n[se]:n),l,p,d));return}if(jl(p)&&!d)return;const y=p.shapeFlag&4?Fd(p.component)||p.component.proxy:p.el,x=d?null:y,{i:E,r:C}=t,k=n&&n.r,D=E.refs===Ur?E.refs={}:E.refs,N=E.setupState;if(k!=null&&k!==C&&(tr(k)?(D[k]=null,Tr(N,k)&&(N[k]=null)):Gn(k)&&(k.value=null)),$t(C))ns(C,E,12,[x,D]);else{const ee=tr(C),se=Gn(C);if(ee||se){const ne=()=>{if(t.f){const ve=ee?Tr(N,C)?N[C]:D[C]:C.value;d?bt(ve)&&Zg(ve,y):bt(ve)?ve.includes(y)||ve.push(y):ee?(D[C]=[y],Tr(N,C)&&(N[C]=D[C])):(C.value=[y],t.k&&(D[t.k]=C.value))}else ee?(D[C]=x,Tr(N,C)&&(N[C]=x)):se&&(C.value=x,t.k&&(D[t.k]=x))};x?(ne.id=-1,fi(ne,l)):ne()}}}let Ps=!1;const zf=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",Lf=t=>t.nodeType===8;function x3(t){const{mt:n,p:l,o:{patchProp:p,createText:d,nextSibling:y,parentNode:x,remove:E,insert:C,createComment:k}}=t,D=(pe,ue)=>{if(!ue.hasChildNodes()){l(null,pe,ue),ed(),ue._vnode=pe;return}Ps=!1,N(ue.firstChild,pe,null,null,null),ed(),ue._vnode=pe,Ps&&console.error("Hydration completed but contains mismatches.")},N=(pe,ue,be,_e,Oe,f=!1)=>{const ke=Lf(pe)&&pe.data==="[",Y=()=>ve(pe,ue,be,_e,Oe,ke),{type:Fe,ref:ze,shapeFlag:Xe,patchFlag:xe}=ue;let mt=pe.nodeType;ue.el=pe,xe===-2&&(f=!1,ue.dynamicChildren=null);let et=null;switch(Fe){case Gl:mt!==3?ue.children===""?(C(ue.el=d(""),x(pe),pe),et=pe):et=Y():(pe.data!==ue.children&&(Ps=!0,pe.data=ue.children),et=y(pe));break;case Ii:mt!==8||ke?et=Y():et=y(pe);break;case ql:if(ke&&(pe=y(pe),mt=pe.nodeType),mt===1||mt===3){et=pe;const Wt=!ue.children.length;for(let Ot=0;Ot<ue.staticCount;Ot++)Wt&&(ue.children+=et.nodeType===1?et.outerHTML:et.data),Ot===ue.staticCount-1&&(ue.anchor=et),et=y(et);return ke?y(et):et}else Y();break;case Zn:ke?et=ne(pe,ue,be,_e,Oe,f):et=Y();break;default:if(Xe&1)mt!==1||ue.type.toLowerCase()!==pe.tagName.toLowerCase()?et=Y():et=ee(pe,ue,be,_e,Oe,f);else if(Xe&6){ue.slotScopeIds=Oe;const Wt=x(pe);if(n(ue,Wt,null,be,_e,zf(Wt),f),et=ke?fe(pe):y(pe),et&&Lf(et)&&et.data==="teleport end"&&(et=y(et)),jl(ue)){let Ot;ke?(Ot=Mr(Zn),Ot.anchor=et?et.previousSibling:Wt.lastChild):Ot=pe.nodeType===3?Bd(""):Mr("div"),Ot.el=pe,ue.component.subTree=Ot}}else Xe&64?mt!==8?et=Y():et=ue.type.hydrate(pe,ue,be,_e,Oe,f,t,se):Xe&128&&(et=ue.type.hydrate(pe,ue,be,_e,zf(x(pe)),Oe,f,t,N))}return ze!=null&&rd(ze,null,_e,ue),et},ee=(pe,ue,be,_e,Oe,f)=>{f=f||!!ue.dynamicChildren;const{type:ke,props:Y,patchFlag:Fe,shapeFlag:ze,dirs:Xe}=ue,xe=ke==="input"&&Xe||ke==="option";if(xe||Fe!==-1){if(Xe&&va(ue,null,be,"created"),Y)if(xe||!f||Fe&48)for(const et in Y)(xe&&et.endsWith("value")||Xl(et)&&!Fl(et))&&p(pe,et,null,Y[et],!1,void 0,be);else Y.onClick&&p(pe,"onClick",null,Y.onClick,!1,void 0,be);let mt;if((mt=Y&&Y.onVnodeBeforeMount)&&Ji(mt,be,ue),Xe&&va(ue,null,be,"beforeMount"),((mt=Y&&Y.onVnodeMounted)||Xe)&&y1(()=>{mt&&Ji(mt,be,ue),Xe&&va(ue,null,be,"mounted")},_e),ze&16&&!(Y&&(Y.innerHTML||Y.textContent))){let et=se(pe.firstChild,ue,pe,be,_e,Oe,f);for(;et;){Ps=!0;const Wt=et;et=et.nextSibling,E(Wt)}}else ze&8&&pe.textContent!==ue.children&&(Ps=!0,pe.textContent=ue.children)}return pe.nextSibling},se=(pe,ue,be,_e,Oe,f,ke)=>{ke=ke||!!ue.dynamicChildren;const Y=ue.children,Fe=Y.length;for(let ze=0;ze<Fe;ze++){const Xe=ke?Y[ze]:Y[ze]=mo(Y[ze]);if(pe)pe=N(pe,Xe,_e,Oe,f,ke);else{if(Xe.type===Gl&&!Xe.children)continue;Ps=!0,l(null,Xe,be,null,_e,Oe,zf(be),f)}}return pe},ne=(pe,ue,be,_e,Oe,f)=>{const{slotScopeIds:ke}=ue;ke&&(Oe=Oe?Oe.concat(ke):ke);const Y=x(pe),Fe=se(y(pe),ue,Y,be,_e,Oe,f);return Fe&&Lf(Fe)&&Fe.data==="]"?y(ue.anchor=Fe):(Ps=!0,C(ue.anchor=k("]"),Y,Fe),Fe)},ve=(pe,ue,be,_e,Oe,f)=>{if(Ps=!0,ue.el=null,f){const Fe=fe(pe);for(;;){const ze=y(pe);if(ze&&ze!==Fe)E(ze);else break}}const ke=y(pe),Y=x(pe);return E(pe),l(null,ue,Y,ke,be,_e,zf(Y),Oe),ke},fe=pe=>{let ue=0;for(;pe;)if(pe=y(pe),pe&&Lf(pe)&&(pe.data==="["&&ue++,pe.data==="]")){if(ue===0)return y(pe);ue--}return pe};return[D,N]}const fi=y1;function H1(t){return Z1(t)}function $1(t){return Z1(t,x3)}function Z1(t,n){const l=hg();l.__VUE__=!0;const{insert:p,remove:d,patchProp:y,createElement:x,createText:E,createComment:C,setText:k,setElementText:D,parentNode:N,nextSibling:ee,setScopeId:se=Ni,insertStaticContent:ne}=t,ve=(oe,de,Be,Ge=null,qe=null,Je=null,Te=!1,Le=null,Re=!!de.dynamicChildren)=>{if(oe===de)return;oe&&!Zo(oe,de)&&(Ge=Ln(oe),vn(oe,qe,Je,!0),oe=null),de.patchFlag===-2&&(Re=!1,de.dynamicChildren=null);const{type:Ae,ref:Ye,shapeFlag:He}=de;switch(Ae){case Gl:fe(oe,de,Be,Ge);break;case Ii:pe(oe,de,Be,Ge);break;case ql:oe==null&&ue(de,Be,Ge,Te);break;case Zn:xe(oe,de,Be,Ge,qe,Je,Te,Le,Re);break;default:He&1?Oe(oe,de,Be,Ge,qe,Je,Te,Le,Re):He&6?mt(oe,de,Be,Ge,qe,Je,Te,Le,Re):(He&64||He&128)&&Ae.process(oe,de,Be,Ge,qe,Je,Te,Le,Re,mr)}Ye!=null&&qe&&rd(Ye,oe&&oe.ref,Je,de||oe,!de)},fe=(oe,de,Be,Ge)=>{if(oe==null)p(de.el=E(de.children),Be,Ge);else{const qe=de.el=oe.el;de.children!==oe.children&&k(qe,de.children)}},pe=(oe,de,Be,Ge)=>{oe==null?p(de.el=C(de.children||""),Be,Ge):de.el=oe.el},ue=(oe,de,Be,Ge)=>{[oe.el,oe.anchor]=ne(oe.children,de,Be,Ge,oe.el,oe.anchor)},be=({el:oe,anchor:de},Be,Ge)=>{let qe;for(;oe&&oe!==de;)qe=ee(oe),p(oe,Be,Ge),oe=qe;p(de,Be,Ge)},_e=({el:oe,anchor:de})=>{let Be;for(;oe&&oe!==de;)Be=ee(oe),d(oe),oe=Be;d(de)},Oe=(oe,de,Be,Ge,qe,Je,Te,Le,Re)=>{Te=Te||de.type==="svg",oe==null?f(de,Be,Ge,qe,Je,Te,Le,Re):Fe(oe,de,qe,Je,Te,Le,Re)},f=(oe,de,Be,Ge,qe,Je,Te,Le)=>{let Re,Ae;const{type:Ye,props:He,shapeFlag:ct,transition:nt,dirs:kt}=oe;if(Re=oe.el=x(oe.type,Je,He&&He.is,He),ct&8?D(Re,oe.children):ct&16&&Y(oe.children,Re,null,Ge,qe,Je&&Ye!=="foreignObject",Te,Le),kt&&va(oe,null,Ge,"created"),ke(Re,oe,oe.scopeId,Te,Ge),He){for(const qt in He)qt!=="value"&&!Fl(qt)&&y(Re,qt,null,He[qt],Je,oe.children,Ge,qe,on);"value"in He&&y(Re,"value",null,He.value),(Ae=He.onVnodeBeforeMount)&&Ji(Ae,Ge,oe)}kt&&va(oe,null,Ge,"beforeMount");const jt=(!qe||qe&&!qe.pendingBranch)&&nt&&!nt.persisted;jt&&nt.beforeEnter(Re),p(Re,de,Be),((Ae=He&&He.onVnodeMounted)||jt||kt)&&fi(()=>{Ae&&Ji(Ae,Ge,oe),jt&&nt.enter(Re),kt&&va(oe,null,Ge,"mounted")},qe)},ke=(oe,de,Be,Ge,qe)=>{if(Be&&se(oe,Be),Ge)for(let Je=0;Je<Ge.length;Je++)se(oe,Ge[Je]);if(qe){let Je=qe.subTree;if(de===Je){const Te=qe.vnode;ke(oe,Te,Te.scopeId,Te.slotScopeIds,qe.parent)}}},Y=(oe,de,Be,Ge,qe,Je,Te,Le,Re=0)=>{for(let Ae=Re;Ae<oe.length;Ae++){const Ye=oe[Ae]=Le?Os(oe[Ae]):mo(oe[Ae]);ve(null,Ye,de,Be,Ge,qe,Je,Te,Le)}},Fe=(oe,de,Be,Ge,qe,Je,Te)=>{const Le=de.el=oe.el;let{patchFlag:Re,dynamicChildren:Ae,dirs:Ye}=de;Re|=oe.patchFlag&16;const He=oe.props||Ur,ct=de.props||Ur;let nt;Be&&Pl(Be,!1),(nt=ct.onVnodeBeforeUpdate)&&Ji(nt,Be,de,oe),Ye&&va(de,oe,Be,"beforeUpdate"),Be&&Pl(Be,!0);const kt=qe&&de.type!=="foreignObject";if(Ae?ze(oe.dynamicChildren,Ae,Le,Be,Ge,kt,Je):Te||Dt(oe,de,Le,null,Be,Ge,kt,Je,!1),Re>0){if(Re&16)Xe(Le,de,He,ct,Be,Ge,qe);else if(Re&2&&He.class!==ct.class&&y(Le,"class",null,ct.class,qe),Re&4&&y(Le,"style",He.style,ct.style,qe),Re&8){const jt=de.dynamicProps;for(let qt=0;qt<jt.length;qt++){const dt=jt[qt],zr=He[dt],Lr=ct[dt];(Lr!==zr||dt==="value")&&y(Le,dt,zr,Lr,qe,oe.children,Be,Ge,on)}}Re&1&&oe.children!==de.children&&D(Le,de.children)}else!Te&&Ae==null&&Xe(Le,de,He,ct,Be,Ge,qe);((nt=ct.onVnodeUpdated)||Ye)&&fi(()=>{nt&&Ji(nt,Be,de,oe),Ye&&va(de,oe,Be,"updated")},Ge)},ze=(oe,de,Be,Ge,qe,Je,Te)=>{for(let Le=0;Le<de.length;Le++){const Re=oe[Le],Ae=de[Le],Ye=Re.el&&(Re.type===Zn||!Zo(Re,Ae)||Re.shapeFlag&70)?N(Re.el):Be;ve(Re,Ae,Ye,null,Ge,qe,Je,Te,!0)}},Xe=(oe,de,Be,Ge,qe,Je,Te)=>{if(Be!==Ge){if(Be!==Ur)for(const Le in Be)!Fl(Le)&&!(Le in Ge)&&y(oe,Le,Be[Le],null,Te,de.children,qe,Je,on);for(const Le in Ge){if(Fl(Le))continue;const Re=Ge[Le],Ae=Be[Le];Re!==Ae&&Le!=="value"&&y(oe,Le,Ae,Re,Te,de.children,qe,Je,on)}"value"in Ge&&y(oe,"value",Be.value,Ge.value)}},xe=(oe,de,Be,Ge,qe,Je,Te,Le,Re)=>{const Ae=de.el=oe?oe.el:E(""),Ye=de.anchor=oe?oe.anchor:E("");let{patchFlag:He,dynamicChildren:ct,slotScopeIds:nt}=de;nt&&(Le=Le?Le.concat(nt):nt),oe==null?(p(Ae,Be,Ge),p(Ye,Be,Ge),Y(de.children,Be,Ye,qe,Je,Te,Le,Re)):He>0&&He&64&&ct&&oe.dynamicChildren?(ze(oe.dynamicChildren,ct,Be,qe,Je,Te,Le),(de.key!=null||qe&&de===qe.subTree)&&yy(oe,de,!0)):Dt(oe,de,Be,Ye,qe,Je,Te,Le,Re)},mt=(oe,de,Be,Ge,qe,Je,Te,Le,Re)=>{de.slotScopeIds=Le,oe==null?de.shapeFlag&512?qe.ctx.activate(de,Be,Ge,Te,Re):et(de,Be,Ge,qe,Je,Te,Re):Wt(oe,de,Re)},et=(oe,de,Be,Ge,qe,Je,Te)=>{const Le=oe.component=ex(oe,Ge,qe);if(oh(oe)&&(Le.ctx.renderer=mr),rx(Le),Le.asyncDep){if(qe&&qe.registerDep(Le,Ot),!oe.el){const Re=Le.subTree=Mr(Ii);pe(null,Re,de,Be)}return}Ot(Le,oe,de,Be,qe,Je,Te)},Wt=(oe,de,Be)=>{const Ge=de.component=oe.component;if(SS(oe,de,Be))if(Ge.asyncDep&&!Ge.asyncResolved){rr(Ge,de,Be);return}else Ge.next=de,yS(Ge.update),Ge.update();else de.el=oe.el,Ge.vnode=de},Ot=(oe,de,Be,Ge,qe,Je,Te)=>{const Le=()=>{if(oe.isMounted){let{next:Ye,bu:He,u:ct,parent:nt,vnode:kt}=oe,jt=Ye,qt;Pl(oe,!1),Ye?(Ye.el=kt.el,rr(oe,Ye,Te)):Ye=kt,He&&ac(He),(qt=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&Ji(qt,nt,Ye,kt),Pl(oe,!0);const dt=Vf(oe),zr=oe.subTree;oe.subTree=dt,ve(zr,dt,N(zr.el),Ln(zr),oe,qe,Je),Ye.el=dt.el,jt===null&&ly(oe,dt.el),ct&&fi(ct,qe),(qt=Ye.props&&Ye.props.onVnodeUpdated)&&fi(()=>Ji(qt,nt,Ye,kt),qe)}else{let Ye;const{el:He,props:ct}=de,{bm:nt,m:kt,parent:jt}=oe,qt=jl(de);if(Pl(oe,!1),nt&&ac(nt),!qt&&(Ye=ct&&ct.onVnodeBeforeMount)&&Ji(Ye,jt,de),Pl(oe,!0),He&&oo){const dt=()=>{oe.subTree=Vf(oe),oo(He,oe.subTree,oe,qe,null)};qt?de.type.__asyncLoader().then(()=>!oe.isUnmounted&&dt()):dt()}else{const dt=oe.subTree=Vf(oe);ve(null,dt,Be,Ge,oe,qe,Je),de.el=dt.el}if(kt&&fi(kt,qe),!qt&&(Ye=ct&&ct.onVnodeMounted)){const dt=de;fi(()=>Ji(Ye,jt,dt),qe)}(de.shapeFlag&256||jt&&jl(jt.vnode)&&jt.vnode.shapeFlag&256)&&oe.a&&fi(oe.a,qe),oe.isMounted=!0,de=Be=Ge=null}},Re=oe.effect=new nh(Le,()=>Ad(Ae),oe.scope),Ae=oe.update=()=>Re.run();Ae.id=oe.uid,Pl(oe,!0),Ae()},rr=(oe,de,Be)=>{de.component=oe;const Ge=oe.vnode.props;oe.vnode=de,oe.next=null,g3(oe,de.props,Ge,Be),_3(oe,de.children,Be),Sc(),I_(),Tc()},Dt=(oe,de,Be,Ge,qe,Je,Te,Le,Re=!1)=>{const Ae=oe&&oe.children,Ye=oe?oe.shapeFlag:0,He=de.children,{patchFlag:ct,shapeFlag:nt}=de;if(ct>0){if(ct&128){di(Ae,He,Be,Ge,qe,Je,Te,Le,Re);return}else if(ct&256){yn(Ae,He,Be,Ge,qe,Je,Te,Le,Re);return}}nt&8?(Ye&16&&on(Ae,qe,Je),He!==Ae&&D(Be,He)):Ye&16?nt&16?di(Ae,He,Be,Ge,qe,Je,Te,Le,Re):on(Ae,qe,Je,!0):(Ye&8&&D(Be,""),nt&16&&Y(He,Be,Ge,qe,Je,Te,Le,Re))},yn=(oe,de,Be,Ge,qe,Je,Te,Le,Re)=>{oe=oe||nc,de=de||nc;const Ae=oe.length,Ye=de.length,He=Math.min(Ae,Ye);let ct;for(ct=0;ct<He;ct++){const nt=de[ct]=Re?Os(de[ct]):mo(de[ct]);ve(oe[ct],nt,Be,null,qe,Je,Te,Le,Re)}Ae>Ye?on(oe,qe,Je,!0,!1,He):Y(de,Be,Ge,qe,Je,Te,Le,Re,He)},di=(oe,de,Be,Ge,qe,Je,Te,Le,Re)=>{let Ae=0;const Ye=de.length;let He=oe.length-1,ct=Ye-1;for(;Ae<=He&&Ae<=ct;){const nt=oe[Ae],kt=de[Ae]=Re?Os(de[Ae]):mo(de[Ae]);if(Zo(nt,kt))ve(nt,kt,Be,null,qe,Je,Te,Le,Re);else break;Ae++}for(;Ae<=He&&Ae<=ct;){const nt=oe[He],kt=de[ct]=Re?Os(de[ct]):mo(de[ct]);if(Zo(nt,kt))ve(nt,kt,Be,null,qe,Je,Te,Le,Re);else break;He--,ct--}if(Ae>He){if(Ae<=ct){const nt=ct+1,kt=nt<Ye?de[nt].el:Ge;for(;Ae<=ct;)ve(null,de[Ae]=Re?Os(de[Ae]):mo(de[Ae]),Be,kt,qe,Je,Te,Le,Re),Ae++}}else if(Ae>ct)for(;Ae<=He;)vn(oe[Ae],qe,Je,!0),Ae++;else{const nt=Ae,kt=Ae,jt=new Map;for(Ae=kt;Ae<=ct;Ae++){const ur=de[Ae]=Re?Os(de[Ae]):mo(de[Ae]);ur.key!=null&&jt.set(ur.key,Ae)}let qt,dt=0;const zr=ct-kt+1;let Lr=!1,hn=0;const zi=new Array(zr);for(Ae=0;Ae<zr;Ae++)zi[Ae]=0;for(Ae=nt;Ae<=He;Ae++){const ur=oe[Ae];if(dt>=zr){vn(ur,qe,Je,!0);continue}let nr;if(ur.key!=null)nr=jt.get(ur.key);else for(qt=kt;qt<=ct;qt++)if(zi[qt-kt]===0&&Zo(ur,de[qt])){nr=qt;break}nr===void 0?vn(ur,qe,Je,!0):(zi[nr-kt]=Ae+1,nr>=hn?hn=nr:Lr=!0,ve(ur,de[nr],Be,null,qe,Je,Te,Le,Re),dt++)}const Rn=Lr?b3(zi):nc;for(qt=Rn.length-1,Ae=zr-1;Ae>=0;Ae--){const ur=kt+Ae,nr=de[ur],_n=ur+1<Ye?de[ur+1].el:Ge;zi[Ae]===0?ve(null,nr,Be,_n,qe,Je,Te,Le,Re):Lr&&(qt<0||Ae!==Rn[qt]?Kr(nr,Be,_n,2):qt--)}}},Kr=(oe,de,Be,Ge,qe=null)=>{const{el:Je,type:Te,transition:Le,children:Re,shapeFlag:Ae}=oe;if(Ae&6){Kr(oe.component.subTree,de,Be,Ge);return}if(Ae&128){oe.suspense.move(de,Be,Ge);return}if(Ae&64){Te.move(oe,de,Be,mr);return}if(Te===Zn){p(Je,de,Be);for(let He=0;He<Re.length;He++)Kr(Re[He],de,Be,Ge);p(oe.anchor,de,Be);return}if(Te===ql){be(oe,de,Be);return}if(Ge!==2&&Ae&1&&Le)if(Ge===0)Le.beforeEnter(Je),p(Je,de,Be),fi(()=>Le.enter(Je),qe);else{const{leave:He,delayLeave:ct,afterLeave:nt}=Le,kt=()=>p(Je,de,Be),jt=()=>{He(Je,()=>{kt(),nt&&nt()})};ct?ct(Je,kt,jt):jt()}else p(Je,de,Be)},vn=(oe,de,Be,Ge=!1,qe=!1)=>{const{type:Je,props:Te,ref:Le,children:Re,dynamicChildren:Ae,shapeFlag:Ye,patchFlag:He,dirs:ct}=oe;if(Le!=null&&rd(Le,null,Be,oe,!0),Ye&256){de.ctx.deactivate(oe);return}const nt=Ye&1&&ct,kt=!jl(oe);let jt;if(kt&&(jt=Te&&Te.onVnodeBeforeUnmount)&&Ji(jt,de,oe),Ye&6)cn(oe.component,Be,Ge);else{if(Ye&128){oe.suspense.unmount(Be,Ge);return}nt&&va(oe,null,de,"beforeUnmount"),Ye&64?oe.type.remove(oe,de,Be,qe,mr,Ge):Ae&&(Je!==Zn||He>0&&He&64)?on(Ae,de,Be,!1,!0):(Je===Zn&&He&384||!qe&&Ye&16)&&on(Re,de,Be),Ge&&Mi(oe)}(kt&&(jt=Te&&Te.onVnodeUnmounted)||nt)&&fi(()=>{jt&&Ji(jt,de,oe),nt&&va(oe,null,de,"unmounted")},Be)},Mi=oe=>{const{type:de,el:Be,anchor:Ge,transition:qe}=oe;if(de===Zn){Ui(Be,Ge);return}if(de===ql){_e(oe);return}const Je=()=>{d(Be),qe&&!qe.persisted&&qe.afterLeave&&qe.afterLeave()};if(oe.shapeFlag&1&&qe&&!qe.persisted){const{leave:Te,delayLeave:Le}=qe,Re=()=>Te(Be,Je);Le?Le(oe.el,Je,Re):Re()}else Je()},Ui=(oe,de)=>{let Be;for(;oe!==de;)Be=ee(oe),d(oe),oe=Be;d(de)},cn=(oe,de,Be)=>{const{bum:Ge,scope:qe,update:Je,subTree:Te,um:Le}=oe;Ge&&ac(Ge),qe.stop(),Je&&(Je.active=!1,vn(Te,oe,de,Be)),Le&&fi(Le,de),fi(()=>{oe.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},on=(oe,de,Be,Ge=!1,qe=!1,Je=0)=>{for(let Te=Je;Te<oe.length;Te++)vn(oe[Te],de,Be,Ge,qe)},Ln=oe=>oe.shapeFlag&6?Ln(oe.component.subTree):oe.shapeFlag&128?oe.suspense.next():ee(oe.anchor||oe.el),io=(oe,de,Be)=>{oe==null?de._vnode&&vn(de._vnode,null,null,!0):ve(de._vnode||null,oe,de,null,null,null,Be),I_(),ed(),de._vnode=oe},mr={p:ve,um:vn,m:Kr,r:Mi,mt:et,mc:Y,pc:Dt,pbc:ze,n:Ln,o:t};let pn,oo;return n&&([pn,oo]=n(mr)),{render:io,hydrate:pn,createApp:f3(io,pn)}}function Pl({effect:t,update:n},l){t.allowRecurse=n.allowRecurse=l}function yy(t,n,l=!1){const p=t.children,d=n.children;if(bt(p)&&bt(d))for(let y=0;y<p.length;y++){const x=p[y];let E=d[y];E.shapeFlag&1&&!E.dynamicChildren&&((E.patchFlag<=0||E.patchFlag===32)&&(E=d[y]=Os(d[y]),E.el=x.el),l||yy(x,E)),E.type===Gl&&(E.el=x.el)}}function b3(t){const n=t.slice(),l=[0];let p,d,y,x,E;const C=t.length;for(p=0;p<C;p++){const k=t[p];if(k!==0){if(d=l[l.length-1],t[d]<k){n[p]=d,l.push(p);continue}for(y=0,x=l.length-1;y<x;)E=y+x>>1,t[l[E]]<k?y=E+1:x=E;k<t[l[y]]&&(y>0&&(n[p]=l[y-1]),l[y]=p)}}for(y=l.length,x=l[y-1];y-- >0;)l[y]=x,x=n[x];return l}const w3=t=>t.__isTeleport,Op=t=>t&&(t.disabled||t.disabled===""),U_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,wg=(t,n)=>{const l=t&&t.to;return tr(l)?n?n(l):null:l},E3={__isTeleport:!0,process(t,n,l,p,d,y,x,E,C,k){const{mc:D,pc:N,pbc:ee,o:{insert:se,querySelector:ne,createText:ve,createComment:fe}}=k,pe=Op(n.props);let{shapeFlag:ue,children:be,dynamicChildren:_e}=n;if(t==null){const Oe=n.el=ve(""),f=n.anchor=ve("");se(Oe,l,p),se(f,l,p);const ke=n.target=wg(n.props,ne),Y=n.targetAnchor=ve("");ke&&(se(Y,ke),x=x||U_(ke));const Fe=(ze,Xe)=>{ue&16&&D(be,ze,Xe,d,y,x,E,C)};pe?Fe(l,f):ke&&Fe(ke,Y)}else{n.el=t.el;const Oe=n.anchor=t.anchor,f=n.target=t.target,ke=n.targetAnchor=t.targetAnchor,Y=Op(t.props),Fe=Y?l:f,ze=Y?Oe:ke;if(x=x||U_(f),_e?(ee(t.dynamicChildren,_e,Fe,d,y,x,E),yy(t,n,!0)):C||N(t,n,Fe,ze,d,y,x,E,!1),pe)Y||Rf(n,l,Oe,k,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const Xe=n.target=wg(n.props,ne);Xe&&Rf(n,Xe,null,k,0)}else Y&&Rf(n,f,ke,k,1)}G1(n)},remove(t,n,l,p,{um:d,o:{remove:y}},x){const{shapeFlag:E,children:C,anchor:k,targetAnchor:D,target:N,props:ee}=t;if(N&&y(D),(x||!Op(ee))&&(y(k),E&16))for(let se=0;se<C.length;se++){const ne=C[se];d(ne,n,l,!0,!!ne.dynamicChildren)}},move:Rf,hydrate:S3};function Rf(t,n,l,{o:{insert:p},m:d},y=2){y===0&&p(t.targetAnchor,n,l);const{el:x,anchor:E,shapeFlag:C,children:k,props:D}=t,N=y===2;if(N&&p(x,n,l),(!N||Op(D))&&C&16)for(let ee=0;ee<k.length;ee++)d(k[ee],n,l,2);N&&p(E,n,l)}function S3(t,n,l,p,d,y,{o:{nextSibling:x,parentNode:E,querySelector:C}},k){const D=n.target=wg(n.props,C);if(D){const N=D._lpa||D.firstChild;if(n.shapeFlag&16)if(Op(n.props))n.anchor=k(x(t),n,E(t),l,p,d,y),n.targetAnchor=N;else{n.anchor=x(t);let ee=N;for(;ee;)if(ee=x(ee),ee&&ee.nodeType===8&&ee.data==="teleport anchor"){n.targetAnchor=ee,D._lpa=n.targetAnchor&&x(n.targetAnchor);break}k(N,n,D,l,p,d,y)}G1(n)}return n.anchor&&x(n.anchor)}const T3=E3;function G1(t){const n=t.ctx;if(n&&n.ut){let l=t.children[0].el;for(;l!==t.targetAnchor;)l.nodeType===1&&l.setAttribute("data-v-owner",n.uid),l=l.nextSibling;n.ut()}}const Zn=Symbol.for("v-fgt"),Gl=Symbol.for("v-txt"),Ii=Symbol.for("v-cmt"),ql=Symbol.for("v-stc"),Dp=[];let Qi=null;function nn(t=!1){Dp.push(Qi=t?null:[])}function W1(){Dp.pop(),Qi=Dp[Dp.length-1]||null}let Wl=1;function Eg(t){Wl+=t}function K1(t){return t.dynamicChildren=Wl>0?Qi||nc:null,W1(),Wl>0&&Qi&&Qi.push(t),t}function Ci(t,n,l,p,d,y){return K1(_t(t,n,l,p,d,y,!0))}function rs(t,n,l,p,d){return K1(Mr(t,n,l,p,d,!0))}function js(t){return t?t.__v_isVNode===!0:!1}function Zo(t,n){return t.type===n.type&&t.key===n.key}function C3(t){}const Dd="__vInternal",X1=({key:t})=>t??null,jf=({ref:t,ref_key:n,ref_for:l})=>(typeof t=="number"&&(t=""+t),t!=null?tr(t)||Gn(t)||$t(t)?{i:oi,r:t,k:n,f:!!l}:t:null);function _t(t,n=null,l=null,p=0,d=null,y=t===Zn?0:1,x=!1,E=!1){const C={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&X1(n),ref:n&&jf(n),scopeId:kd,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:p,dynamicProps:d,dynamicChildren:null,appContext:null,ctx:oi};return E?(vy(C,l),y&128&&t.normalize(C)):l&&(C.shapeFlag|=tr(l)?8:16),Wl>0&&!x&&Qi&&(C.patchFlag>0||y&6)&&C.patchFlag!==32&&Qi.push(C),C}const Mr=A3;function A3(t,n=null,l=null,p=0,d=null,y=!1){if((!t||t===z1)&&(t=Ii),js(t)){const E=wa(t,n,!0);return l&&vy(E,l),Wl>0&&!y&&Qi&&(E.shapeFlag&6?Qi[Qi.indexOf(t)]=E:Qi.push(E)),E.patchFlag|=-2,E}if(L3(t)&&(t=t.__vccOpts),n){n=J1(n);let{class:E,style:C}=n;E&&!tr(E)&&(n.class=Ec(E)),Vr(C)&&(Qg(C)&&!bt(C)&&(C=vr({},C)),n.style=rh(C))}const x=tr(t)?1:g1(t)?128:w3(t)?64:Vr(t)?4:$t(t)?2:0;return _t(t,n,l,p,d,x,y,!0)}function J1(t){return t?Qg(t)||Dd in t?vr({},t):t:null}function wa(t,n,l=!1){const{props:p,ref:d,patchFlag:y,children:x}=t,E=n?Q1(p||{},n):p;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:E,key:E&&X1(E),ref:n&&n.ref?l&&d?bt(d)?d.concat(jf(n)):[d,jf(n)]:jf(n):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:x,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Zn?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wa(t.ssContent),ssFallback:t.ssFallback&&wa(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Bd(t=" ",n=0){return Mr(Gl,null,t,n)}function Y1(t,n){const l=Mr(ql,null,t);return l.staticCount=n,l}function xa(t="",n=!1){return n?(nn(),rs(Ii,null,t)):Mr(Ii,null,t)}function mo(t){return t==null||typeof t=="boolean"?Mr(Ii):bt(t)?Mr(Zn,null,t.slice()):typeof t=="object"?Os(t):Mr(Gl,null,String(t))}function Os(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wa(t)}function vy(t,n){let l=0;const{shapeFlag:p}=t;if(n==null)n=null;else if(bt(n))l=16;else if(typeof n=="object")if(p&65){const d=n.default;d&&(d._c&&(d._d=!1),vy(t,d()),d._c&&(d._d=!0));return}else{l=32;const d=n._;!d&&!(Dd in n)?n._ctx=oi:d===3&&oi&&(oi.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else $t(n)?(n={default:n,_ctx:oi},l=32):(n=String(n),p&64?(l=16,n=[Bd(n)]):l=8);t.children=n,t.shapeFlag|=l}function Q1(...t){const n={};for(let l=0;l<t.length;l++){const p=t[l];for(const d in p)if(d==="class")n.class!==p.class&&(n.class=Ec([n.class,p.class]));else if(d==="style")n.style=rh([n.style,p.style]);else if(Xl(d)){const y=n[d],x=p[d];x&&y!==x&&!(bt(y)&&y.includes(x))&&(n[d]=y?[].concat(y,x):x)}else d!==""&&(n[d]=p[d])}return n}function Ji(t,n,l,p=null){vo(t,n,7,[l,p])}const I3=B1();let k3=0;function ex(t,n,l){const p=t.type,d=(n?n.appContext:t.appContext)||I3,y={uid:k3++,vnode:t,type:p,parent:n,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,scope:new Kg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(d.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:U1(p,d),emitsOptions:m1(p,d),emit:null,emitted:null,propsDefaults:Ur,inheritAttrs:p.inheritAttrs,ctx:Ur,data:Ur,props:Ur,attrs:Ur,slots:Ur,refs:Ur,setupState:Ur,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=n?n.root:y,y.emit=_S.bind(null,y),t.ce&&t.ce(y),y}let Un=null;const ss=()=>Un||oi;let _y,Qu,V_="__VUE_INSTANCE_SETTERS__";(Qu=hg()[V_])||(Qu=hg()[V_]=[]),Qu.push(t=>Un=t),_y=t=>{Qu.length>1?Qu.forEach(n=>n(t)):Qu[0](t)};const qs=t=>{_y(t),t.scope.on()},Bs=()=>{Un&&Un.scope.off(),_y(null)};function tx(t){return t.vnode.shapeFlag&4}let dc=!1;function rx(t,n=!1){dc=n;const{props:l,children:p}=t.vnode,d=tx(t);m3(t,l,d,n),v3(t,p);const y=d?P3(t,n):void 0;return dc=!1,y}function P3(t,n){const l=t.type;t.accessCache=Object.create(null),t.proxy=ey(new Proxy(t.ctx,vg));const{setup:p}=l;if(p){const d=t.setupContext=p.length>1?ox(t):null;qs(t),Sc();const y=ns(p,t,0,[t.props,d]);if(Tc(),Bs(),Gg(y)){if(y.then(Bs,Bs),n)return y.then(x=>{Sg(t,x,n)}).catch(x=>{Ql(x,t,0)});t.asyncDep=y}else Sg(t,y,n)}else ix(t,n)}function Sg(t,n,l){$t(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Vr(n)&&(t.setupState=iy(n)),ix(t,l)}let nd,Tg;function nx(t){nd=t,Tg=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,ZS))}}const M3=()=>!nd;function ix(t,n,l){const p=t.type;if(!t.render){if(!n&&nd&&!p.render){const d=p.template||my(t).template;if(d){const{isCustomElement:y,compilerOptions:x}=t.appContext.config,{delimiters:E,compilerOptions:C}=p,k=vr(vr({isCustomElement:y,delimiters:E},x),C);p.render=nd(d,k)}}t.render=p.render||Ni,Tg&&Tg(t)}qs(t),Sc(),s3(t),Tc(),Bs()}function z3(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(n,l){return to(t,"get","$attrs"),n[l]}}))}function ox(t){const n=l=>{t.exposed=l||{}};return{get attrs(){return z3(t)},slots:t.slots,emit:t.emit,expose:n}}function Fd(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(iy(ey(t.exposed)),{get(n,l){if(l in n)return n[l];if(l in Lp)return Lp[l](t)},has(n,l){return l in n||l in Lp}}))}function Cg(t,n=!0){return $t(t)?t.displayName||t.name:t.name||n&&t.__name}function L3(t){return $t(t)&&"__vccOpts"in t}const ax=(t,n)=>hS(t,n,dc);function sx(t,n,l){const p=arguments.length;return p===2?Vr(n)&&!bt(n)?js(n)?Mr(t,null,[n]):Mr(t,n):Mr(t,null,n):(p>3?l=Array.prototype.slice.call(arguments,2):p===3&&js(l)&&(l=[l]),Mr(t,n,l))}const lx=Symbol.for("v-scx"),ux=()=>Rp(lx);function R3(){}function O3(t,n,l,p){const d=l[p];if(d&&cx(d,t))return d;const y=n();return y.memo=t.slice(),l[p]=y}function cx(t,n){const l=t.memo;if(l.length!=n.length)return!1;for(let p=0;p<l.length;p++)if(hc(l[p],n[p]))return!1;return Wl>0&&Qi&&Qi.push(t),!0}const px="3.3.4",D3={createComponentInstance:ex,setupComponent:rx,renderComponentRoot:Vf,setCurrentRenderingInstance:Hp,isVNode:js,normalizeVNode:mo},B3=D3,F3=null,N3=null,U3="http://www.w3.org/2000/svg",Ol=typeof document<"u"?document:null,j_=Ol&&Ol.createElement("template"),V3={insert:(t,n,l)=>{n.insertBefore(t,l||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,l,p)=>{const d=n?Ol.createElementNS(U3,t):Ol.createElement(t,l?{is:l}:void 0);return t==="select"&&p&&p.multiple!=null&&d.setAttribute("multiple",p.multiple),d},createText:t=>Ol.createTextNode(t),createComment:t=>Ol.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ol.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,l,p,d,y){const x=l?l.previousSibling:n.lastChild;if(d&&(d===y||d.nextSibling))for(;n.insertBefore(d.cloneNode(!0),l),!(d===y||!(d=d.nextSibling)););else{j_.innerHTML=p?`<svg>${t}</svg>`:t;const E=j_.content;if(p){const C=E.firstChild;for(;C.firstChild;)E.appendChild(C.firstChild);E.removeChild(C)}n.insertBefore(E,l)}return[x?x.nextSibling:n.firstChild,l?l.previousSibling:n.lastChild]}};function j3(t,n,l){const p=t._vtc;p&&(n=(n?[n,...p]:[...p]).join(" ")),n==null?t.removeAttribute("class"):l?t.setAttribute("class",n):t.className=n}function q3(t,n,l){const p=t.style,d=tr(l);if(l&&!d){if(n&&!tr(n))for(const y in n)l[y]==null&&Ag(p,y,"");for(const y in l)Ag(p,y,l[y])}else{const y=p.display;d?n!==l&&(p.cssText=l):n&&t.removeAttribute("style"),"_vod"in t&&(p.display=y)}}const q_=/\s*!important$/;function Ag(t,n,l){if(bt(l))l.forEach(p=>Ag(t,n,p));else if(l==null&&(l=""),n.startsWith("--"))t.setProperty(n,l);else{const p=H3(t,n);q_.test(l)?t.setProperty(go(p),l.replace(q_,""),"important"):t[p]=l}}const H_=["Webkit","Moz","ms"],Jm={};function H3(t,n){const l=Jm[n];if(l)return l;let p=Vn(n);if(p!=="filter"&&p in t)return Jm[n]=p;p=Yl(p);for(let d=0;d<H_.length;d++){const y=H_[d]+p;if(y in t)return Jm[n]=y}return n}const $_="http://www.w3.org/1999/xlink";function $3(t,n,l,p,d){if(p&&n.startsWith("xlink:"))l==null?t.removeAttributeNS($_,n.slice(6,n.length)):t.setAttributeNS($_,n,l);else{const y=_E(n);l==null||y&&!Z0(l)?t.removeAttribute(n):t.setAttribute(n,y?"":l)}}function Z3(t,n,l,p,d,y,x){if(n==="innerHTML"||n==="textContent"){p&&x(p,d,y),t[n]=l??"";return}const E=t.tagName;if(n==="value"&&E!=="PROGRESS"&&!E.includes("-")){t._value=l;const k=E==="OPTION"?t.getAttribute("value"):t.value,D=l??"";k!==D&&(t.value=D),l==null&&t.removeAttribute(n);return}let C=!1;if(l===""||l==null){const k=typeof t[n];k==="boolean"?l=Z0(l):l==null&&k==="string"?(l="",C=!0):k==="number"&&(l=0,C=!0)}try{t[n]=l}catch{}C&&t.removeAttribute(n)}function ts(t,n,l,p){t.addEventListener(n,l,p)}function G3(t,n,l,p){t.removeEventListener(n,l,p)}function W3(t,n,l,p,d=null){const y=t._vei||(t._vei={}),x=y[n];if(p&&x)x.value=p;else{const[E,C]=K3(n);if(p){const k=y[n]=Y3(p,d);ts(t,E,k,C)}else x&&(G3(t,E,x,C),y[n]=void 0)}}const Z_=/(?:Once|Passive|Capture)$/;function K3(t){let n;if(Z_.test(t)){n={};let p;for(;p=t.match(Z_);)t=t.slice(0,t.length-p[0].length),n[p[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):go(t.slice(2)),n]}let Ym=0;const X3=Promise.resolve(),J3=()=>Ym||(X3.then(()=>Ym=0),Ym=Date.now());function Y3(t,n){const l=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=l.attached)return;vo(Q3(p,l.value),n,5,[p])};return l.value=t,l.attached=J3(),l}function Q3(t,n){if(bt(n)){const l=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{l.call(t),t._stopped=!0},n.map(p=>d=>!d._stopped&&p&&p(d))}else return n}const G_=/^on[a-z]/,eT=(t,n,l,p,d=!1,y,x,E,C)=>{n==="class"?j3(t,p,d):n==="style"?q3(t,l,p):Xl(n)?$g(n)||W3(t,n,l,p,x):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):tT(t,n,p,d))?Z3(t,n,p,y,x,E,C):(n==="true-value"?t._trueValue=p:n==="false-value"&&(t._falseValue=p),$3(t,n,p,d))};function tT(t,n,l,p){return p?!!(n==="innerHTML"||n==="textContent"||n in t&&G_.test(n)&&$t(l)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||G_.test(n)&&tr(l)?!1:n in t}function hx(t,n){const l=hy(t);class p extends Nd{constructor(y){super(l,y,n)}}return p.def=l,p}const rT=t=>hx(t,kx),nT=typeof HTMLElement<"u"?HTMLElement:class{};class Nd extends nT{constructor(n,l={},p){super(),this._def=n,this._props=l,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&p?p(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,ay(()=>{this._connected||(Pg(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let p=0;p<this.attributes.length;p++)this._setAttr(this.attributes[p].name);new MutationObserver(p=>{for(const d of p)this._setAttr(d.attributeName)}).observe(this,{attributes:!0});const n=(p,d=!1)=>{const{props:y,styles:x}=p;let E;if(y&&!bt(y))for(const C in y){const k=y[C];(k===Number||k&&k.type===Number)&&(C in this._props&&(this._props[C]=Yf(this._props[C])),(E||(E=Object.create(null)))[Vn(C)]=!0)}this._numberProps=E,d&&this._resolveProps(p),this._applyStyles(x),this._update()},l=this._def.__asyncLoader;l?l().then(p=>n(p,!0)):n(this._def)}_resolveProps(n){const{props:l}=n,p=bt(l)?l:Object.keys(l||{});for(const d of Object.keys(this))d[0]!=="_"&&p.includes(d)&&this._setProp(d,this[d],!0,!1);for(const d of p.map(Vn))Object.defineProperty(this,d,{get(){return this._getProp(d)},set(y){this._setProp(d,y)}})}_setAttr(n){let l=this.getAttribute(n);const p=Vn(n);this._numberProps&&this._numberProps[p]&&(l=Yf(l)),this._setProp(p,l,!1)}_getProp(n){return this._props[n]}_setProp(n,l,p=!0,d=!0){l!==this._props[n]&&(this._props[n]=l,d&&this._instance&&this._update(),p&&(l===!0?this.setAttribute(go(n),""):typeof l=="string"||typeof l=="number"?this.setAttribute(go(n),l+""):l||this.removeAttribute(go(n))))}_update(){Pg(this._createVNode(),this.shadowRoot)}_createVNode(){const n=Mr(this._def,vr({},this._props));return this._instance||(n.ce=l=>{this._instance=l,l.isCE=!0;const p=(y,x)=>{this.dispatchEvent(new CustomEvent(y,{detail:x}))};l.emit=(y,...x)=>{p(y,x),go(y)!==y&&p(go(y),x)};let d=this;for(;d=d&&(d.parentNode||d.host);)if(d instanceof Nd){l.parent=d._instance,l.provides=d._instance.provides;break}}),n}_applyStyles(n){n&&n.forEach(l=>{const p=document.createElement("style");p.textContent=l,this.shadowRoot.appendChild(p)})}}function iT(t="$style"){{const n=ss();if(!n)return Ur;const l=n.type.__cssModules;if(!l)return Ur;const p=l[t];return p||Ur}}function oT(t){const n=ss();if(!n)return;const l=n.ut=(d=t(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(y=>kg(y,d))},p=()=>{const d=t(n.proxy);Ig(n.subTree,d),l(d)};v1(p),ah(()=>{const d=new MutationObserver(p);d.observe(n.subTree.el.parentNode,{childList:!0}),Od(()=>d.disconnect())})}function Ig(t,n){if(t.shapeFlag&128){const l=t.suspense;t=l.activeBranch,l.pendingBranch&&!l.isHydrating&&l.effects.push(()=>{Ig(l.activeBranch,n)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)kg(t.el,n);else if(t.type===Zn)t.children.forEach(l=>Ig(l,n));else if(t.type===ql){let{el:l,anchor:p}=t;for(;l&&(kg(l,n),l!==p);)l=l.nextSibling}}function kg(t,n){if(t.nodeType===1){const l=t.style;for(const p in n)l.setProperty(`--${p}`,n[p])}}const Ms="transition",Cp="animation",Ud=(t,{slots:n})=>sx(b1,dx(t),n);Ud.displayName="Transition";const fx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},aT=Ud.props=vr({},py,fx),Ml=(t,n=[])=>{bt(t)?t.forEach(l=>l(...n)):t&&t(...n)},W_=t=>t?bt(t)?t.some(n=>n.length>1):t.length>1:!1;function dx(t){const n={};for(const xe in t)xe in fx||(n[xe]=t[xe]);if(t.css===!1)return n;const{name:l="v",type:p,duration:d,enterFromClass:y=`${l}-enter-from`,enterActiveClass:x=`${l}-enter-active`,enterToClass:E=`${l}-enter-to`,appearFromClass:C=y,appearActiveClass:k=x,appearToClass:D=E,leaveFromClass:N=`${l}-leave-from`,leaveActiveClass:ee=`${l}-leave-active`,leaveToClass:se=`${l}-leave-to`}=t,ne=sT(d),ve=ne&&ne[0],fe=ne&&ne[1],{onBeforeEnter:pe,onEnter:ue,onEnterCancelled:be,onLeave:_e,onLeaveCancelled:Oe,onBeforeAppear:f=pe,onAppear:ke=ue,onAppearCancelled:Y=be}=n,Fe=(xe,mt,et)=>{Rs(xe,mt?D:E),Rs(xe,mt?k:x),et&&et()},ze=(xe,mt)=>{xe._isLeaving=!1,Rs(xe,N),Rs(xe,se),Rs(xe,ee),mt&&mt()},Xe=xe=>(mt,et)=>{const Wt=xe?ke:ue,Ot=()=>Fe(mt,xe,et);Ml(Wt,[mt,Ot]),K_(()=>{Rs(mt,xe?C:y),Qa(mt,xe?D:E),W_(Wt)||X_(mt,p,ve,Ot)})};return vr(n,{onBeforeEnter(xe){Ml(pe,[xe]),Qa(xe,y),Qa(xe,x)},onBeforeAppear(xe){Ml(f,[xe]),Qa(xe,C),Qa(xe,k)},onEnter:Xe(!1),onAppear:Xe(!0),onLeave(xe,mt){xe._isLeaving=!0;const et=()=>ze(xe,mt);Qa(xe,N),gx(),Qa(xe,ee),K_(()=>{xe._isLeaving&&(Rs(xe,N),Qa(xe,se),W_(_e)||X_(xe,p,fe,et))}),Ml(_e,[xe,et])},onEnterCancelled(xe){Fe(xe,!1),Ml(be,[xe])},onAppearCancelled(xe){Fe(xe,!0),Ml(Y,[xe])},onLeaveCancelled(xe){ze(xe),Ml(Oe,[xe])}})}function sT(t){if(t==null)return null;if(Vr(t))return[Qm(t.enter),Qm(t.leave)];{const n=Qm(t);return[n,n]}}function Qm(t){return Yf(t)}function Qa(t,n){n.split(/\s+/).forEach(l=>l&&t.classList.add(l)),(t._vtc||(t._vtc=new Set)).add(n)}function Rs(t,n){n.split(/\s+/).forEach(p=>p&&t.classList.remove(p));const{_vtc:l}=t;l&&(l.delete(n),l.size||(t._vtc=void 0))}function K_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let lT=0;function X_(t,n,l,p){const d=t._endId=++lT,y=()=>{d===t._endId&&p()};if(l)return setTimeout(y,l);const{type:x,timeout:E,propCount:C}=mx(t,n);if(!x)return p();const k=x+"end";let D=0;const N=()=>{t.removeEventListener(k,ee),y()},ee=se=>{se.target===t&&++D>=C&&N()};setTimeout(()=>{D<C&&N()},E+1),t.addEventListener(k,ee)}function mx(t,n){const l=window.getComputedStyle(t),p=ne=>(l[ne]||"").split(", "),d=p(`${Ms}Delay`),y=p(`${Ms}Duration`),x=J_(d,y),E=p(`${Cp}Delay`),C=p(`${Cp}Duration`),k=J_(E,C);let D=null,N=0,ee=0;n===Ms?x>0&&(D=Ms,N=x,ee=y.length):n===Cp?k>0&&(D=Cp,N=k,ee=C.length):(N=Math.max(x,k),D=N>0?x>k?Ms:Cp:null,ee=D?D===Ms?y.length:C.length:0);const se=D===Ms&&/\b(transform|all)(,|$)/.test(p(`${Ms}Property`).toString());return{type:D,timeout:N,propCount:ee,hasTransform:se}}function J_(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((l,p)=>Y_(l)+Y_(t[p])))}function Y_(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function gx(){return document.body.offsetHeight}const yx=new WeakMap,vx=new WeakMap,_x={name:"TransitionGroup",props:vr({},aT,{tag:String,moveClass:String}),setup(t,{slots:n}){const l=ss(),p=cy();let d,y;return Ld(()=>{if(!d.length)return;const x=t.moveClass||`${t.name||"v"}-move`;if(!dT(d[0].el,l.vnode.el,x))return;d.forEach(pT),d.forEach(hT);const E=d.filter(fT);gx(),E.forEach(C=>{const k=C.el,D=k.style;Qa(k,x),D.transform=D.webkitTransform=D.transitionDuration="";const N=k._moveCb=ee=>{ee&&ee.target!==k||(!ee||/transform$/.test(ee.propertyName))&&(k.removeEventListener("transitionend",N),k._moveCb=null,Rs(k,x))};k.addEventListener("transitionend",N)})}),()=>{const x=_r(t),E=dx(x);let C=x.tag||Zn;d=y,y=n.default?Md(n.default()):[];for(let k=0;k<y.length;k++){const D=y[k];D.key!=null&&Zl(D,fc(D,E,p,l))}if(d)for(let k=0;k<d.length;k++){const D=d[k];Zl(D,fc(D,E,p,l)),yx.set(D,D.el.getBoundingClientRect())}return Mr(C,null,y)}}},uT=t=>delete t.mode;_x.props;const cT=_x;function pT(t){const n=t.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function hT(t){vx.set(t,t.el.getBoundingClientRect())}function fT(t){const n=yx.get(t),l=vx.get(t),p=n.left-l.left,d=n.top-l.top;if(p||d){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${p}px,${d}px)`,y.transitionDuration="0s",t}}function dT(t,n,l){const p=t.cloneNode();t._vtc&&t._vtc.forEach(x=>{x.split(/\s+/).forEach(E=>E&&p.classList.remove(E))}),l.split(/\s+/).forEach(x=>x&&p.classList.add(x)),p.style.display="none";const d=n.nodeType===1?n:n.parentNode;d.appendChild(p);const{hasTransform:y}=mx(p);return d.removeChild(p),y}const Hs=t=>{const n=t.props["onUpdate:modelValue"]||!1;return bt(n)?l=>ac(n,l):n};function mT(t){t.target.composing=!0}function Q_(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Wp={created(t,{modifiers:{lazy:n,trim:l,number:p}},d){t._assign=Hs(d);const y=p||d.props&&d.props.type==="number";ts(t,n?"change":"input",x=>{if(x.target.composing)return;let E=t.value;l&&(E=E.trim()),y&&(E=Jf(E)),t._assign(E)}),l&&ts(t,"change",()=>{t.value=t.value.trim()}),n||(ts(t,"compositionstart",mT),ts(t,"compositionend",Q_),ts(t,"change",Q_))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,modifiers:{lazy:l,trim:p,number:d}},y){if(t._assign=Hs(y),t.composing||document.activeElement===t&&t.type!=="range"&&(l||p&&t.value.trim()===n||(d||t.type==="number")&&Jf(t.value)===n))return;const x=n??"";t.value!==x&&(t.value=x)}},xy={deep:!0,created(t,n,l){t._assign=Hs(l),ts(t,"change",()=>{const p=t._modelValue,d=mc(t),y=t.checked,x=t._assign;if(bt(p)){const E=xd(p,d),C=E!==-1;if(y&&!C)x(p.concat(d));else if(!y&&C){const k=[...p];k.splice(E,1),x(k)}}else if(Jl(p)){const E=new Set(p);y?E.add(d):E.delete(d),x(E)}else x(bx(t,y))})},mounted:e0,beforeUpdate(t,n,l){t._assign=Hs(l),e0(t,n,l)}};function e0(t,{value:n,oldValue:l},p){t._modelValue=n,bt(n)?t.checked=xd(n,p.props.value)>-1:Jl(n)?t.checked=n.has(p.props.value):n!==l&&(t.checked=Us(n,bx(t,!0)))}const by={created(t,{value:n},l){t.checked=Us(n,l.props.value),t._assign=Hs(l),ts(t,"change",()=>{t._assign(mc(t))})},beforeUpdate(t,{value:n,oldValue:l},p){t._assign=Hs(p),n!==l&&(t.checked=Us(n,p.props.value))}},xx={deep:!0,created(t,{value:n,modifiers:{number:l}},p){const d=Jl(n);ts(t,"change",()=>{const y=Array.prototype.filter.call(t.options,x=>x.selected).map(x=>l?Jf(mc(x)):mc(x));t._assign(t.multiple?d?new Set(y):y:y[0])}),t._assign=Hs(p)},mounted(t,{value:n}){t0(t,n)},beforeUpdate(t,n,l){t._assign=Hs(l)},updated(t,{value:n}){t0(t,n)}};function t0(t,n){const l=t.multiple;if(!(l&&!bt(n)&&!Jl(n))){for(let p=0,d=t.options.length;p<d;p++){const y=t.options[p],x=mc(y);if(l)bt(n)?y.selected=xd(n,x)>-1:y.selected=n.has(x);else if(Us(mc(y),n)){t.selectedIndex!==p&&(t.selectedIndex=p);return}}!l&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function mc(t){return"_value"in t?t._value:t.value}function bx(t,n){const l=n?"_trueValue":"_falseValue";return l in t?t[l]:n}const wx={created(t,n,l){Of(t,n,l,null,"created")},mounted(t,n,l){Of(t,n,l,null,"mounted")},beforeUpdate(t,n,l,p){Of(t,n,l,p,"beforeUpdate")},updated(t,n,l,p){Of(t,n,l,p,"updated")}};function Ex(t,n){switch(t){case"SELECT":return xx;case"TEXTAREA":return Wp;default:switch(n){case"checkbox":return xy;case"radio":return by;default:return Wp}}}function Of(t,n,l,p,d){const x=Ex(t.tagName,l.props&&l.props.type)[d];x&&x(t,n,l,p)}function gT(){Wp.getSSRProps=({value:t})=>({value:t}),by.getSSRProps=({value:t},n)=>{if(n.props&&Us(n.props.value,t))return{checked:!0}},xy.getSSRProps=({value:t},n)=>{if(bt(t)){if(n.props&&xd(t,n.props.value)>-1)return{checked:!0}}else if(Jl(t)){if(n.props&&t.has(n.props.value))return{checked:!0}}else if(t)return{checked:!0}},wx.getSSRProps=(t,n)=>{if(typeof n.type!="string")return;const l=Ex(n.type.toUpperCase(),n.props&&n.props.type);if(l.getSSRProps)return l.getSSRProps(t,n)}}const yT=["ctrl","shift","alt","meta"],vT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>yT.some(l=>t[`${l}Key`]&&!n.includes(l))},Sx=(t,n)=>(l,...p)=>{for(let d=0;d<n.length;d++){const y=vT[n[d]];if(y&&y(l,n))return}return t(l,...p)},_T={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xT=(t,n)=>l=>{if(!("key"in l))return;const p=go(l.key);if(n.some(d=>d===p||_T[d]===p))return t(l)},Tx={beforeMount(t,{value:n},{transition:l}){t._vod=t.style.display==="none"?"":t.style.display,l&&n?l.beforeEnter(t):Ap(t,n)},mounted(t,{value:n},{transition:l}){l&&n&&l.enter(t)},updated(t,{value:n,oldValue:l},{transition:p}){!n!=!l&&(p?n?(p.beforeEnter(t),Ap(t,!0),p.enter(t)):p.leave(t,()=>{Ap(t,!1)}):Ap(t,n))},beforeUnmount(t,{value:n}){Ap(t,n)}};function Ap(t,n){t.style.display=n?t._vod:"none"}function bT(){Tx.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Cx=vr({patchProp:eT},V3);let Bp,r0=!1;function Ax(){return Bp||(Bp=H1(Cx))}function Ix(){return Bp=r0?Bp:$1(Cx),r0=!0,Bp}const Pg=(...t)=>{Ax().render(...t)},kx=(...t)=>{Ix().hydrate(...t)},Px=(...t)=>{const n=Ax().createApp(...t),{mount:l}=n;return n.mount=p=>{const d=Mx(p);if(!d)return;const y=n._component;!$t(y)&&!y.render&&!y.template&&(y.template=d.innerHTML),d.innerHTML="";const x=l(d,!1,d instanceof SVGElement);return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),x},n},wT=(...t)=>{const n=Ix().createApp(...t),{mount:l}=n;return n.mount=p=>{const d=Mx(p);if(d)return l(d,!0,d instanceof SVGElement)},n};function Mx(t){return tr(t)?document.querySelector(t):t}let n0=!1;const ET=()=>{n0||(n0=!0,gT(),bT())},ST=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:b1,BaseTransitionPropsValidators:py,Comment:Ii,EffectScope:Kg,Fragment:Zn,KeepAlive:FS,ReactiveEffect:nh,Static:ql,Suspense:CS,Teleport:T3,Text:Gl,Transition:Ud,TransitionGroup:cT,VueElement:Nd,assertNumber:dS,callWithAsyncErrorHandling:vo,callWithErrorHandling:ns,camelize:Vn,capitalize:Yl,cloneVNode:wa,compatUtils:N3,computed:ax,createApp:Px,createBlock:rs,createCommentVNode:xa,createElementBlock:Ci,createElementVNode:_t,createHydrationRenderer:$1,createPropsRestProxy:o3,createRenderer:H1,createSSRApp:wT,createSlots:qS,createStaticVNode:Y1,createTextVNode:Bd,createVNode:Mr,customRef:aS,defineAsyncComponent:DS,defineComponent:hy,defineCustomElement:hx,defineEmits:WS,defineExpose:KS,defineModel:YS,defineOptions:XS,defineProps:GS,defineSSRCustomElement:rT,defineSlots:JS,get devtools(){return tc},effect:TE,effectScope:bE,getCurrentInstance:ss,getCurrentScope:K0,getTransitionRawChildren:Md,guardReactiveProps:J1,h:sx,handleError:Ql,hasInjectionContext:d3,hydrate:kx,initCustomFormatter:R3,initDirectivesForSSR:ET,inject:Rp,isMemoSame:cx,isProxy:Qg,isReactive:Ul,isReadonly:$l,isRef:Gn,isRuntimeOnly:M3,isShallow:Up,isVNode:js,markRaw:ey,mergeDefaults:n3,mergeModels:i3,mergeProps:Q1,nextTick:ay,normalizeClass:Ec,normalizeProps:pE,normalizeStyle:rh,onActivated:E1,onBeforeMount:C1,onBeforeUnmount:Rd,onBeforeUpdate:A1,onDeactivated:S1,onErrorCaptured:M1,onMounted:ah,onRenderTracked:P1,onRenderTriggered:k1,onScopeDispose:wE,onServerPrefetch:I1,onUnmounted:Od,onUpdated:Ld,openBlock:nn,popScopeId:Ac,provide:F1,proxyRefs:iy,pushScopeId:Cc,queuePostFlushCb:sy,reactive:Sd,readonly:Yg,ref:sc,registerRuntimeCompiler:nx,render:Pg,renderList:L1,renderSlot:HS,resolveComponent:Go,resolveDirective:jS,resolveDynamicComponent:VS,resolveFilter:F3,resolveTransitionHooks:fc,setBlockTracking:Eg,setDevtoolsHook:d1,setTransitionHooks:Zl,shallowReactive:l1,shallowReadonly:QE,shallowRef:eS,ssrContextKey:lx,ssrUtils:B3,stop:CE,toDisplayString:Si,toHandlerKey:oc,toHandlers:$S,toRaw:_r,toRef:cS,toRefs:sS,toValue:nS,transformVNodeArgs:C3,triggerRef:rS,unref:ny,useAttrs:t3,useCssModule:iT,useCssVars:oT,useModel:r3,useSSRContext:ux,useSlots:e3,useTransitionState:cy,vModelCheckbox:xy,vModelDynamic:wx,vModelRadio:by,vModelSelect:xx,vModelText:Wp,vShow:Tx,version:px,warn:fS,watch:Vl,watchEffect:zS,watchPostEffect:v1,watchSyncEffect:LS,withAsyncContext:a3,withCtx:Pd,withDefaults:QS,withDirectives:x1,withKeys:xT,withMemo:O3,withModifiers:Sx,withScopeId:xS},Symbol.toStringTag,{value:"Module"}));function wy(t){throw t}function zx(t){}function un(t,n,l,p){const d=t,y=new SyntaxError(String(d));return y.code=t,y.loc=n,y}const Kp=Symbol(""),Fp=Symbol(""),Ey=Symbol(""),id=Symbol(""),Lx=Symbol(""),Kl=Symbol(""),Rx=Symbol(""),Ox=Symbol(""),Sy=Symbol(""),Ty=Symbol(""),sh=Symbol(""),Cy=Symbol(""),Dx=Symbol(""),Ay=Symbol(""),od=Symbol(""),Iy=Symbol(""),ky=Symbol(""),Py=Symbol(""),My=Symbol(""),Bx=Symbol(""),Fx=Symbol(""),Vd=Symbol(""),ad=Symbol(""),zy=Symbol(""),Ly=Symbol(""),Xp=Symbol(""),lh=Symbol(""),Ry=Symbol(""),Mg=Symbol(""),TT=Symbol(""),zg=Symbol(""),sd=Symbol(""),CT=Symbol(""),AT=Symbol(""),Oy=Symbol(""),IT=Symbol(""),kT=Symbol(""),Dy=Symbol(""),Nx=Symbol(""),gc={[Kp]:"Fragment",[Fp]:"Teleport",[Ey]:"Suspense",[id]:"KeepAlive",[Lx]:"BaseTransition",[Kl]:"openBlock",[Rx]:"createBlock",[Ox]:"createElementBlock",[Sy]:"createVNode",[Ty]:"createElementVNode",[sh]:"createCommentVNode",[Cy]:"createTextVNode",[Dx]:"createStaticVNode",[Ay]:"resolveComponent",[od]:"resolveDynamicComponent",[Iy]:"resolveDirective",[ky]:"resolveFilter",[Py]:"withDirectives",[My]:"renderList",[Bx]:"renderSlot",[Fx]:"createSlots",[Vd]:"toDisplayString",[ad]:"mergeProps",[zy]:"normalizeClass",[Ly]:"normalizeStyle",[Xp]:"normalizeProps",[lh]:"guardReactiveProps",[Ry]:"toHandlers",[Mg]:"camelize",[TT]:"capitalize",[zg]:"toHandlerKey",[sd]:"setBlockTracking",[CT]:"pushScopeId",[AT]:"popScopeId",[Oy]:"withCtx",[IT]:"unref",[kT]:"isRef",[Dy]:"withMemo",[Nx]:"isMemoSame"};function PT(t){Object.getOwnPropertySymbols(t).forEach(n=>{gc[n]=t[n]})}const xo={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function MT(t,n=xo){return{type:0,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:n}}function Jp(t,n,l,p,d,y,x,E=!1,C=!1,k=!1,D=xo){return t&&(E?(t.helper(Kl),t.helper(_c(t.inSSR,k))):t.helper(vc(t.inSSR,k)),x&&t.helper(Py)),{type:13,tag:n,props:l,children:p,patchFlag:d,dynamicProps:y,directives:x,isBlock:E,disableTracking:C,isComponent:k,loc:D}}function uh(t,n=xo){return{type:17,loc:n,elements:t}}function Mo(t,n=xo){return{type:15,loc:n,properties:t}}function Tn(t,n){return{type:16,loc:xo,key:tr(t)?lr(t,!0):t,value:n}}function lr(t,n=!1,l=xo,p=0){return{type:4,loc:l,content:t,isStatic:n,constType:n?3:p}}function Wo(t,n=xo){return{type:8,loc:n,children:t}}function Nn(t,n=[],l=xo){return{type:14,loc:l,callee:t,arguments:n}}function yc(t,n=void 0,l=!1,p=!1,d=xo){return{type:18,params:t,returns:n,newline:l,isSlot:p,loc:d}}function Lg(t,n,l,p=!0){return{type:19,test:t,consequent:n,alternate:l,newline:p,loc:xo}}function zT(t,n,l=!1){return{type:20,index:t,value:n,isVNode:l,loc:xo}}function LT(t){return{type:21,body:t,loc:xo}}function vc(t,n){return t||n?Sy:Ty}function _c(t,n){return t||n?Rx:Ox}function By(t,{helper:n,removeHelper:l,inSSR:p}){t.isBlock||(t.isBlock=!0,l(vc(p,t.isComponent)),n(Kl),n(_c(p,t.isComponent)))}const eo=t=>t.type===4&&t.isStatic,rc=(t,n)=>t===n||t===go(n);function Ux(t){if(rc(t,"Teleport"))return Fp;if(rc(t,"Suspense"))return Ey;if(rc(t,"KeepAlive"))return id;if(rc(t,"BaseTransition"))return Lx}const RT=/^\d|[^\$\w]/,Fy=t=>!RT.test(t),OT=/[A-Za-z_$\xA0-\uFFFF]/,DT=/[\.\?\w$\xA0-\uFFFF]/,BT=/\s+[.[]\s*|\s*[.[]\s+/g,FT=t=>{t=t.trim().replace(BT,x=>x.trim());let n=0,l=[],p=0,d=0,y=null;for(let x=0;x<t.length;x++){const E=t.charAt(x);switch(n){case 0:if(E==="[")l.push(n),n=1,p++;else if(E==="(")l.push(n),n=2,d++;else if(!(x===0?OT:DT).test(E))return!1;break;case 1:E==="'"||E==='"'||E==="`"?(l.push(n),n=3,y=E):E==="["?p++:E==="]"&&(--p||(n=l.pop()));break;case 2:if(E==="'"||E==='"'||E==="`")l.push(n),n=3,y=E;else if(E==="(")d++;else if(E===")"){if(x===t.length-1)return!1;--d||(n=l.pop())}break;case 3:E===y&&(n=l.pop(),y=null);break}}return!p&&!d},Vx=FT;function jx(t,n,l){const d={source:t.source.slice(n,n+l),start:ld(t.start,t.source,n),end:t.end};return l!=null&&(d.end=ld(t.start,t.source,n+l)),d}function ld(t,n,l=n.length){return ud(vr({},t),n,l)}function ud(t,n,l=n.length){let p=0,d=-1;for(let y=0;y<l;y++)n.charCodeAt(y)===10&&(p++,d=y);return t.offset+=l,t.line+=p,t.column=d===-1?t.column+l:l-d,t}function Po(t,n,l=!1){for(let p=0;p<t.props.length;p++){const d=t.props[p];if(d.type===7&&(l||d.exp)&&(tr(n)?d.name===n:n.test(d.name)))return d}}function jd(t,n,l=!1,p=!1){for(let d=0;d<t.props.length;d++){const y=t.props[d];if(y.type===6){if(l)continue;if(y.name===n&&(y.value||p))return y}else if(y.name==="bind"&&(y.exp||p)&&Bl(y.arg,n))return y}}function Bl(t,n){return!!(t&&eo(t)&&t.content===n)}function NT(t){return t.props.some(n=>n.type===7&&n.name==="bind"&&(!n.arg||n.arg.type!==4||!n.arg.isStatic))}function eg(t){return t.type===5||t.type===2}function UT(t){return t.type===7&&t.name==="slot"}function cd(t){return t.type===1&&t.tagType===3}function pd(t){return t.type===1&&t.tagType===2}const VT=new Set([Xp,lh]);function qx(t,n=[]){if(t&&!tr(t)&&t.type===14){const l=t.callee;if(!tr(l)&&VT.has(l))return qx(t.arguments[0],n.concat(t))}return[t,n]}function hd(t,n,l){let p,d=t.type===13?t.props:t.arguments[2],y=[],x;if(d&&!tr(d)&&d.type===14){const E=qx(d);d=E[0],y=E[1],x=y[y.length-1]}if(d==null||tr(d))p=Mo([n]);else if(d.type===14){const E=d.arguments[0];!tr(E)&&E.type===15?i0(n,E)||E.properties.unshift(n):d.callee===Ry?p=Nn(l.helper(ad),[Mo([n]),d]):d.arguments.unshift(Mo([n])),!p&&(p=d)}else d.type===15?(i0(n,d)||d.properties.unshift(n),p=d):(p=Nn(l.helper(ad),[Mo([n]),d]),x&&x.callee===lh&&(x=y[y.length-2]));t.type===13?x?x.arguments[0]=p:t.props=p:x?x.arguments[0]=p:t.arguments[2]=p}function i0(t,n){let l=!1;if(t.key.type===4){const p=t.key.content;l=n.properties.some(d=>d.key.type===4&&d.key.content===p)}return l}function Yp(t,n){return`_${n}_${t.replace(/[^\w]/g,(l,p)=>l==="-"?"_":t.charCodeAt(p).toString())}`}function jT(t){return t.type===14&&t.callee===Dy?t.arguments[1].returns:t}function o0(t,n){const l=n.options?n.options.compatConfig:n.compatConfig,p=l&&l[t];return t==="MODE"?p||3:p}function Hl(t,n){const l=o0("MODE",n),p=o0(t,n);return l===3?p===!0:p!==!1}function Qp(t,n,l,...p){return Hl(t,n)}const qT=/&(gt|lt|amp|apos|quot);/g,HT={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},a0={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Uf,isPreTag:Uf,isCustomElement:Uf,decodeEntities:t=>t.replace(qT,(n,l)=>HT[l]),onError:wy,onWarn:zx,comments:!1};function $T(t,n={}){const l=ZT(t,n),p=_o(l);return MT(Ny(l,0,[]),Ro(l,p))}function ZT(t,n){const l=vr({},a0);let p;for(p in n)l[p]=n[p]===void 0?a0[p]:n[p];return{options:l,column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,onWarn:l.onWarn}}function Ny(t,n,l){const p=qd(l),d=p?p.ns:0,y=[];for(;!tC(t,n,l);){const E=t.source;let C;if(n===0||n===1){if(!t.inVPre&&Ai(E,t.options.delimiters[0]))C=QT(t,n);else if(n===0&&E[0]==="<")if(E.length===1)Nr(t,5,1);else if(E[1]==="!")Ai(E,"<!--")?C=WT(t):Ai(E,"<!DOCTYPE")?C=Ip(t):Ai(E,"<![CDATA[")?d!==0?C=GT(t,l):(Nr(t,1),C=Ip(t)):(Nr(t,11),C=Ip(t));else if(E[1]==="/")if(E.length===2)Nr(t,5,2);else if(E[2]===">"){Nr(t,14,2),Wn(t,3);continue}else if(/[a-z]/i.test(E[2])){Nr(t,23),Rg(t,fd.End,p);continue}else Nr(t,12,2),C=Ip(t);else/[a-z]/i.test(E[1])?(C=KT(t,l),Hl("COMPILER_NATIVE_TEMPLATE",t)&&C&&C.tag==="template"&&!C.props.some(k=>k.type===7&&Hx(k.name))&&(C=C.children)):E[1]==="?"?(Nr(t,21,1),C=Ip(t)):Nr(t,12,1)}if(C||(C=eC(t,n)),bt(C))for(let k=0;k<C.length;k++)s0(y,C[k]);else s0(y,C)}let x=!1;if(n!==2&&n!==1){const E=t.options.whitespace!=="preserve";for(let C=0;C<y.length;C++){const k=y[C];if(k.type===2)if(t.inPre)k.content=k.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(k.content))E&&(k.content=k.content.replace(/[\t\r\n\f ]+/g," "));else{const D=y[C-1],N=y[C+1];!D||!N||E&&(D.type===3&&N.type===3||D.type===3&&N.type===1||D.type===1&&N.type===3||D.type===1&&N.type===1&&/[\r\n]/.test(k.content))?(x=!0,y[C]=null):k.content=" "}else k.type===3&&!t.options.comments&&(x=!0,y[C]=null)}if(t.inPre&&p&&t.options.isPreTag(p.tag)){const C=y[0];C&&C.type===2&&(C.content=C.content.replace(/^\r?\n/,""))}}return x?y.filter(Boolean):y}function s0(t,n){if(n.type===2){const l=qd(t);if(l&&l.type===2&&l.loc.end.offset===n.loc.start.offset){l.content+=n.content,l.loc.end=n.loc.end,l.loc.source+=n.loc.source;return}}t.push(n)}function GT(t,n){Wn(t,9);const l=Ny(t,3,n);return t.source.length===0?Nr(t,6):Wn(t,3),l}function WT(t){const n=_o(t);let l;const p=/--(\!)?>/.exec(t.source);if(!p)l=t.source.slice(4),Wn(t,t.source.length),Nr(t,7);else{p.index<=3&&Nr(t,0),p[1]&&Nr(t,10),l=t.source.slice(4,p.index);const d=t.source.slice(0,p.index);let y=1,x=0;for(;(x=d.indexOf("<!--",y))!==-1;)Wn(t,x-y+1),x+4<d.length&&Nr(t,16),y=x+1;Wn(t,p.index+p[0].length-y+1)}return{type:3,content:l,loc:Ro(t,n)}}function Ip(t){const n=_o(t),l=t.source[1]==="?"?1:2;let p;const d=t.source.indexOf(">");return d===-1?(p=t.source.slice(l),Wn(t,t.source.length)):(p=t.source.slice(l,d),Wn(t,d+1)),{type:3,content:p,loc:Ro(t,n)}}function KT(t,n){const l=t.inPre,p=t.inVPre,d=qd(n),y=Rg(t,fd.Start,d),x=t.inPre&&!l,E=t.inVPre&&!p;if(y.isSelfClosing||t.options.isVoidTag(y.tag))return x&&(t.inPre=!1),E&&(t.inVPre=!1),y;n.push(y);const C=t.options.getTextMode(y,d),k=Ny(t,C,n);n.pop();{const D=y.props.find(N=>N.type===6&&N.name==="inline-template");if(D&&Qp("COMPILER_INLINE_TEMPLATE",t,D.loc)){const N=Ro(t,y.loc.end);D.value={type:2,content:N.source,loc:N}}}if(y.children=k,Og(t.source,y.tag))Rg(t,fd.End,d);else if(Nr(t,24,0,y.loc.start),t.source.length===0&&y.tag.toLowerCase()==="script"){const D=k[0];D&&Ai(D.loc.source,"<!--")&&Nr(t,8)}return y.loc=Ro(t,y.loc.start),x&&(t.inPre=!1),E&&(t.inVPre=!1),y}var fd=(t=>(t[t.Start=0]="Start",t[t.End=1]="End",t))(fd||{});const Hx=ro("if,else,else-if,for,slot");function Rg(t,n,l){const p=_o(t),d=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),y=d[1],x=t.options.getNamespace(y,l);Wn(t,d[0].length),eh(t);const E=_o(t),C=t.source;t.options.isPreTag(y)&&(t.inPre=!0);let k=l0(t,n);n===0&&!t.inVPre&&k.some(ee=>ee.type===7&&ee.name==="pre")&&(t.inVPre=!0,vr(t,E),t.source=C,k=l0(t,n).filter(ee=>ee.name!=="v-pre"));let D=!1;if(t.source.length===0?Nr(t,9):(D=Ai(t.source,"/>"),n===1&&D&&Nr(t,4),Wn(t,D?2:1)),n===1)return;let N=0;return t.inVPre||(y==="slot"?N=2:y==="template"?k.some(ee=>ee.type===7&&Hx(ee.name))&&(N=3):XT(y,k,t)&&(N=1)),{type:1,ns:x,tag:y,tagType:N,props:k,isSelfClosing:D,children:[],loc:Ro(t,p),codegenNode:void 0}}function XT(t,n,l){const p=l.options;if(p.isCustomElement(t))return!1;if(t==="component"||/^[A-Z]/.test(t)||Ux(t)||p.isBuiltInComponent&&p.isBuiltInComponent(t)||p.isNativeTag&&!p.isNativeTag(t))return!0;for(let d=0;d<n.length;d++){const y=n[d];if(y.type===6){if(y.name==="is"&&y.value){if(y.value.content.startsWith("vue:"))return!0;if(Qp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}else{if(y.name==="is")return!0;if(y.name==="bind"&&Bl(y.arg,"is")&&Qp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}}function l0(t,n){const l=[],p=new Set;for(;t.source.length>0&&!Ai(t.source,">")&&!Ai(t.source,"/>");){if(Ai(t.source,"/")){Nr(t,22),Wn(t,1),eh(t);continue}n===1&&Nr(t,3);const d=JT(t,p);d.type===6&&d.value&&d.name==="class"&&(d.value.content=d.value.content.replace(/\s+/g," ").trim()),n===0&&l.push(d),/^[^\t\r\n\f />]/.test(t.source)&&Nr(t,15),eh(t)}return l}function JT(t,n){var l;const p=_o(t),y=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];n.has(y)&&Nr(t,2),n.add(y),y[0]==="="&&Nr(t,19);{const C=/["'<]/g;let k;for(;k=C.exec(y);)Nr(t,17,k.index)}Wn(t,y.length);let x;/^[\t\r\n\f ]*=/.test(t.source)&&(eh(t),Wn(t,1),eh(t),x=YT(t),x||Nr(t,13));const E=Ro(t,p);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(y)){const C=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(y);let k=Ai(y,"."),D=C[1]||(k||Ai(y,":")?"bind":Ai(y,"@")?"on":"slot"),N;if(C[2]){const se=D==="slot",ne=y.lastIndexOf(C[2],y.length-(((l=C[3])==null?void 0:l.length)||0)),ve=Ro(t,u0(t,p,ne),u0(t,p,ne+C[2].length+(se&&C[3]||"").length));let fe=C[2],pe=!0;fe.startsWith("[")?(pe=!1,fe.endsWith("]")?fe=fe.slice(1,fe.length-1):(Nr(t,27),fe=fe.slice(1))):se&&(fe+=C[3]||""),N={type:4,content:fe,isStatic:pe,constType:pe?3:0,loc:ve}}if(x&&x.isQuoted){const se=x.loc;se.start.offset++,se.start.column++,se.end=ld(se.start,x.content),se.source=se.source.slice(1,-1)}const ee=C[3]?C[3].slice(1).split("."):[];return k&&ee.push("prop"),D==="bind"&&N&&ee.includes("sync")&&Qp("COMPILER_V_BIND_SYNC",t,E,N.loc.source)&&(D="model",ee.splice(ee.indexOf("sync"),1)),{type:7,name:D,exp:x&&{type:4,content:x.content,isStatic:!1,constType:0,loc:x.loc},arg:N,modifiers:ee,loc:E}}return!t.inVPre&&Ai(y,"v-")&&Nr(t,26),{type:6,name:y,value:x&&{type:2,content:x.content,loc:x.loc},loc:E}}function YT(t){const n=_o(t);let l;const p=t.source[0],d=p==='"'||p==="'";if(d){Wn(t,1);const y=t.source.indexOf(p);y===-1?l=Np(t,t.source.length,4):(l=Np(t,y,4),Wn(t,1))}else{const y=/^[^\t\r\n\f >]+/.exec(t.source);if(!y)return;const x=/["'<=`]/g;let E;for(;E=x.exec(y[0]);)Nr(t,18,E.index);l=Np(t,y[0].length,4)}return{content:l,isQuoted:d,loc:Ro(t,n)}}function QT(t,n){const[l,p]=t.options.delimiters,d=t.source.indexOf(p,l.length);if(d===-1){Nr(t,25);return}const y=_o(t);Wn(t,l.length);const x=_o(t),E=_o(t),C=d-l.length,k=t.source.slice(0,C),D=Np(t,C,n),N=D.trim(),ee=D.indexOf(N);ee>0&&ud(x,k,ee);const se=C-(D.length-N.length-ee);return ud(E,k,se),Wn(t,p.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:N,loc:Ro(t,x,E)},loc:Ro(t,y)}}function eC(t,n){const l=n===3?["]]>"]:["<",t.options.delimiters[0]];let p=t.source.length;for(let x=0;x<l.length;x++){const E=t.source.indexOf(l[x],1);E!==-1&&p>E&&(p=E)}const d=_o(t);return{type:2,content:Np(t,p,n),loc:Ro(t,d)}}function Np(t,n,l){const p=t.source.slice(0,n);return Wn(t,n),l===2||l===3||!p.includes("&")?p:t.options.decodeEntities(p,l===4)}function _o(t){const{column:n,line:l,offset:p}=t;return{column:n,line:l,offset:p}}function Ro(t,n,l){return l=l||_o(t),{start:n,end:l,source:t.originalSource.slice(n.offset,l.offset)}}function qd(t){return t[t.length-1]}function Ai(t,n){return t.startsWith(n)}function Wn(t,n){const{source:l}=t;ud(t,l,n),t.source=l.slice(n)}function eh(t){const n=/^[\t\r\n\f ]+/.exec(t.source);n&&Wn(t,n[0].length)}function u0(t,n,l){return ld(n,t.originalSource.slice(n.offset,l),l)}function Nr(t,n,l,p=_o(t)){l&&(p.offset+=l,p.column+=l),t.options.onError(un(n,{start:p,end:p,source:""}))}function tC(t,n,l){const p=t.source;switch(n){case 0:if(Ai(p,"</")){for(let d=l.length-1;d>=0;--d)if(Og(p,l[d].tag))return!0}break;case 1:case 2:{const d=qd(l);if(d&&Og(p,d.tag))return!0;break}case 3:if(Ai(p,"]]>"))return!0;break}return!p}function Og(t,n){return Ai(t,"</")&&t.slice(2,2+n.length).toLowerCase()===n.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+n.length]||">")}function rC(t,n){qf(t,n,$x(t,t.children[0]))}function $x(t,n){const{children:l}=t;return l.length===1&&n.type===1&&!pd(n)}function qf(t,n,l=!1){const{children:p}=t,d=p.length;let y=0;for(let x=0;x<p.length;x++){const E=p[x];if(E.type===1&&E.tagType===0){const C=l?0:zo(E,n);if(C>0){if(C>=2){E.codegenNode.patchFlag="-1",E.codegenNode=n.hoist(E.codegenNode),y++;continue}}else{const k=E.codegenNode;if(k.type===13){const D=Kx(k);if((!D||D===512||D===1)&&Gx(E,n)>=2){const N=Wx(E);N&&(k.props=n.hoist(N))}k.dynamicProps&&(k.dynamicProps=n.hoist(k.dynamicProps))}}}if(E.type===1){const C=E.tagType===1;C&&n.scopes.vSlot++,qf(E,n),C&&n.scopes.vSlot--}else if(E.type===11)qf(E,n,E.children.length===1);else if(E.type===9)for(let C=0;C<E.branches.length;C++)qf(E.branches[C],n,E.branches[C].children.length===1)}y&&n.transformHoist&&n.transformHoist(p,n,t),y&&y===d&&t.type===1&&t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&bt(t.codegenNode.children)&&(t.codegenNode.children=n.hoist(uh(t.codegenNode.children)))}function zo(t,n){const{constantCache:l}=n;switch(t.type){case 1:if(t.tagType!==0)return 0;const p=l.get(t);if(p!==void 0)return p;const d=t.codegenNode;if(d.type!==13||d.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject")return 0;if(Kx(d))return l.set(t,0),0;{let E=3;const C=Gx(t,n);if(C===0)return l.set(t,0),0;C<E&&(E=C);for(let k=0;k<t.children.length;k++){const D=zo(t.children[k],n);if(D===0)return l.set(t,0),0;D<E&&(E=D)}if(E>1)for(let k=0;k<t.props.length;k++){const D=t.props[k];if(D.type===7&&D.name==="bind"&&D.exp){const N=zo(D.exp,n);if(N===0)return l.set(t,0),0;N<E&&(E=N)}}if(d.isBlock){for(let k=0;k<t.props.length;k++)if(t.props[k].type===7)return l.set(t,0),0;n.removeHelper(Kl),n.removeHelper(_c(n.inSSR,d.isComponent)),d.isBlock=!1,n.helper(vc(n.inSSR,d.isComponent))}return l.set(t,E),E}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return zo(t.content,n);case 4:return t.constType;case 8:let x=3;for(let E=0;E<t.children.length;E++){const C=t.children[E];if(tr(C)||Ns(C))continue;const k=zo(C,n);if(k===0)return 0;k<x&&(x=k)}return x;default:return 0}}const nC=new Set([zy,Ly,Xp,lh]);function Zx(t,n){if(t.type===14&&!tr(t.callee)&&nC.has(t.callee)){const l=t.arguments[0];if(l.type===4)return zo(l,n);if(l.type===14)return Zx(l,n)}return 0}function Gx(t,n){let l=3;const p=Wx(t);if(p&&p.type===15){const{properties:d}=p;for(let y=0;y<d.length;y++){const{key:x,value:E}=d[y],C=zo(x,n);if(C===0)return C;C<l&&(l=C);let k;if(E.type===4?k=zo(E,n):E.type===14?k=Zx(E,n):k=0,k===0)return k;k<l&&(l=k)}}return l}function Wx(t){const n=t.codegenNode;if(n.type===13)return n.props}function Kx(t){const n=t.patchFlag;return n?parseInt(n,10):void 0}function iC(t,{filename:n="",prefixIdentifiers:l=!1,hoistStatic:p=!1,cacheHandlers:d=!1,nodeTransforms:y=[],directiveTransforms:x={},transformHoist:E=null,isBuiltInComponent:C=Ni,isCustomElement:k=Ni,expressionPlugins:D=[],scopeId:N=null,slotted:ee=!0,ssr:se=!1,inSSR:ne=!1,ssrCssVars:ve="",bindingMetadata:fe=Ur,inline:pe=!1,isTS:ue=!1,onError:be=wy,onWarn:_e=zx,compatConfig:Oe}){const f=n.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),ke={selfName:f&&Yl(Vn(f[1])),prefixIdentifiers:l,hoistStatic:p,cacheHandlers:d,nodeTransforms:y,directiveTransforms:x,transformHoist:E,isBuiltInComponent:C,isCustomElement:k,expressionPlugins:D,scopeId:N,slotted:ee,ssr:se,inSSR:ne,ssrCssVars:ve,bindingMetadata:fe,inline:pe,isTS:ue,onError:be,onWarn:_e,compatConfig:Oe,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(Y){const Fe=ke.helpers.get(Y)||0;return ke.helpers.set(Y,Fe+1),Y},removeHelper(Y){const Fe=ke.helpers.get(Y);if(Fe){const ze=Fe-1;ze?ke.helpers.set(Y,ze):ke.helpers.delete(Y)}},helperString(Y){return`_${gc[ke.helper(Y)]}`},replaceNode(Y){ke.parent.children[ke.childIndex]=ke.currentNode=Y},removeNode(Y){const Fe=ke.parent.children,ze=Y?Fe.indexOf(Y):ke.currentNode?ke.childIndex:-1;!Y||Y===ke.currentNode?(ke.currentNode=null,ke.onNodeRemoved()):ke.childIndex>ze&&(ke.childIndex--,ke.onNodeRemoved()),ke.parent.children.splice(ze,1)},onNodeRemoved:()=>{},addIdentifiers(Y){},removeIdentifiers(Y){},hoist(Y){tr(Y)&&(Y=lr(Y)),ke.hoists.push(Y);const Fe=lr(`_hoisted_${ke.hoists.length}`,!1,Y.loc,2);return Fe.hoisted=Y,Fe},cache(Y,Fe=!1){return zT(ke.cached++,Y,Fe)}};return ke.filters=new Set,ke}function oC(t,n){const l=iC(t,n);Hd(t,l),n.hoistStatic&&rC(t,l),n.ssr||aC(t,l),t.helpers=new Set([...l.helpers.keys()]),t.components=[...l.components],t.directives=[...l.directives],t.imports=l.imports,t.hoists=l.hoists,t.temps=l.temps,t.cached=l.cached,t.filters=[...l.filters]}function aC(t,n){const{helper:l}=n,{children:p}=t;if(p.length===1){const d=p[0];if($x(t,d)&&d.codegenNode){const y=d.codegenNode;y.type===13&&By(y,n),t.codegenNode=y}else t.codegenNode=d}else if(p.length>1){let d=64;t.codegenNode=Jp(n,l(Kp),void 0,t.children,d+"",void 0,void 0,!0,void 0,!1)}}function sC(t,n){let l=0;const p=()=>{l--};for(;l<t.children.length;l++){const d=t.children[l];tr(d)||(n.parent=t,n.childIndex=l,n.onNodeRemoved=p,Hd(d,n))}}function Hd(t,n){n.currentNode=t;const{nodeTransforms:l}=n,p=[];for(let y=0;y<l.length;y++){const x=l[y](t,n);if(x&&(bt(x)?p.push(...x):p.push(x)),n.currentNode)t=n.currentNode;else return}switch(t.type){case 3:n.ssr||n.helper(sh);break;case 5:n.ssr||n.helper(Vd);break;case 9:for(let y=0;y<t.branches.length;y++)Hd(t.branches[y],n);break;case 10:case 11:case 1:case 0:sC(t,n);break}n.currentNode=t;let d=p.length;for(;d--;)p[d]()}function Xx(t,n){const l=tr(t)?p=>p===t:p=>t.test(p);return(p,d)=>{if(p.type===1){const{props:y}=p;if(p.tagType===3&&y.some(UT))return;const x=[];for(let E=0;E<y.length;E++){const C=y[E];if(C.type===7&&l(C.name)){y.splice(E,1),E--;const k=n(p,C,d);k&&x.push(k)}}return x}}}const $d="/*#__PURE__*/",Jx=t=>`${gc[t]}: _${gc[t]}`;function c0(t,{mode:n="function",prefixIdentifiers:l=n==="module",sourceMap:p=!1,filename:d="template.vue.html",scopeId:y=null,optimizeImports:x=!1,runtimeGlobalName:E="Vue",runtimeModuleName:C="vue",ssrRuntimeModuleName:k="vue/server-renderer",ssr:D=!1,isTS:N=!1,inSSR:ee=!1}){const se={mode:n,prefixIdentifiers:l,sourceMap:p,filename:d,scopeId:y,optimizeImports:x,runtimeGlobalName:E,runtimeModuleName:C,ssrRuntimeModuleName:k,ssr:D,isTS:N,inSSR:ee,source:t.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(ve){return`_${gc[ve]}`},push(ve,fe){se.code+=ve},indent(){ne(++se.indentLevel)},deindent(ve=!1){ve?--se.indentLevel:ne(--se.indentLevel)},newline(){ne(se.indentLevel)}};function ne(ve){se.push(`
`+"  ".repeat(ve))}return se}function lC(t,n={}){const l=c0(t,n);n.onContextCreated&&n.onContextCreated(l);const{mode:p,push:d,prefixIdentifiers:y,indent:x,deindent:E,newline:C,scopeId:k,ssr:D}=l,N=Array.from(t.helpers),ee=N.length>0,se=!y&&p!=="module",ne=!1,ve=ne?c0(t,n):l;uC(t,ve);const fe=D?"ssrRender":"render",ue=(D?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(d(`function ${fe}(${ue}) {`),x(),se&&(d("with (_ctx) {"),x(),ee&&(d(`const { ${N.map(Jx).join(", ")} } = _Vue`),d(`
`),C())),t.components.length&&(tg(t.components,"component",l),(t.directives.length||t.temps>0)&&C()),t.directives.length&&(tg(t.directives,"directive",l),t.temps>0&&C()),t.filters&&t.filters.length&&(C(),tg(t.filters,"filter",l),C()),t.temps>0){d("let ");for(let be=0;be<t.temps;be++)d(`${be>0?", ":""}_temp${be}`)}return(t.components.length||t.directives.length||t.temps)&&(d(`
`),C()),D||d("return "),t.codegenNode?ki(t.codegenNode,l):d("null"),se&&(E(),d("}")),E(),d("}"),{ast:t,code:l.code,preamble:ne?ve.code:"",map:l.map?l.map.toJSON():void 0}}function uC(t,n){const{ssr:l,prefixIdentifiers:p,push:d,newline:y,runtimeModuleName:x,runtimeGlobalName:E,ssrRuntimeModuleName:C}=n,k=E,D=Array.from(t.helpers);if(D.length>0&&(d(`const _Vue = ${k}
`),t.hoists.length)){const N=[Sy,Ty,sh,Cy,Dx].filter(ee=>D.includes(ee)).map(Jx).join(", ");d(`const { ${N} } = _Vue
`)}cC(t.hoists,n),y(),d("return ")}function tg(t,n,{helper:l,push:p,newline:d,isTS:y}){const x=l(n==="filter"?ky:n==="component"?Ay:Iy);for(let E=0;E<t.length;E++){let C=t[E];const k=C.endsWith("__self");k&&(C=C.slice(0,-6)),p(`const ${Yp(C,n)} = ${x}(${JSON.stringify(C)}${k?", true":""})${y?"!":""}`),E<t.length-1&&d()}}function cC(t,n){if(!t.length)return;n.pure=!0;const{push:l,newline:p,helper:d,scopeId:y,mode:x}=n;p();for(let E=0;E<t.length;E++){const C=t[E];C&&(l(`const _hoisted_${E+1} = `),ki(C,n),p())}n.pure=!1}function Uy(t,n){const l=t.length>3||!1;n.push("["),l&&n.indent(),ch(t,n,l),l&&n.deindent(),n.push("]")}function ch(t,n,l=!1,p=!0){const{push:d,newline:y}=n;for(let x=0;x<t.length;x++){const E=t[x];tr(E)?d(E):bt(E)?Uy(E,n):ki(E,n),x<t.length-1&&(l?(p&&d(","),y()):p&&d(", "))}}function ki(t,n){if(tr(t)){n.push(t);return}if(Ns(t)){n.push(n.helper(t));return}switch(t.type){case 1:case 9:case 11:ki(t.codegenNode,n);break;case 2:pC(t,n);break;case 4:Yx(t,n);break;case 5:hC(t,n);break;case 12:ki(t.codegenNode,n);break;case 8:Qx(t,n);break;case 3:dC(t,n);break;case 13:mC(t,n);break;case 14:yC(t,n);break;case 15:vC(t,n);break;case 17:_C(t,n);break;case 18:xC(t,n);break;case 19:bC(t,n);break;case 20:wC(t,n);break;case 21:ch(t.body,n,!0,!1);break}}function pC(t,n){n.push(JSON.stringify(t.content),t)}function Yx(t,n){const{content:l,isStatic:p}=t;n.push(p?JSON.stringify(l):l,t)}function hC(t,n){const{push:l,helper:p,pure:d}=n;d&&l($d),l(`${p(Vd)}(`),ki(t.content,n),l(")")}function Qx(t,n){for(let l=0;l<t.children.length;l++){const p=t.children[l];tr(p)?n.push(p):ki(p,n)}}function fC(t,n){const{push:l}=n;if(t.type===8)l("["),Qx(t,n),l("]");else if(t.isStatic){const p=Fy(t.content)?t.content:JSON.stringify(t.content);l(p,t)}else l(`[${t.content}]`,t)}function dC(t,n){const{push:l,helper:p,pure:d}=n;d&&l($d),l(`${p(sh)}(${JSON.stringify(t.content)})`,t)}function mC(t,n){const{push:l,helper:p,pure:d}=n,{tag:y,props:x,children:E,patchFlag:C,dynamicProps:k,directives:D,isBlock:N,disableTracking:ee,isComponent:se}=t;D&&l(p(Py)+"("),N&&l(`(${p(Kl)}(${ee?"true":""}), `),d&&l($d);const ne=N?_c(n.inSSR,se):vc(n.inSSR,se);l(p(ne)+"(",t),ch(gC([y,x,E,C,k]),n),l(")"),N&&l(")"),D&&(l(", "),ki(D,n),l(")"))}function gC(t){let n=t.length;for(;n--&&t[n]==null;);return t.slice(0,n+1).map(l=>l||"null")}function yC(t,n){const{push:l,helper:p,pure:d}=n,y=tr(t.callee)?t.callee:p(t.callee);d&&l($d),l(y+"(",t),ch(t.arguments,n),l(")")}function vC(t,n){const{push:l,indent:p,deindent:d,newline:y}=n,{properties:x}=t;if(!x.length){l("{}",t);return}const E=x.length>1||!1;l(E?"{":"{ "),E&&p();for(let C=0;C<x.length;C++){const{key:k,value:D}=x[C];fC(k,n),l(": "),ki(D,n),C<x.length-1&&(l(","),y())}E&&d(),l(E?"}":" }")}function _C(t,n){Uy(t.elements,n)}function xC(t,n){const{push:l,indent:p,deindent:d}=n,{params:y,returns:x,body:E,newline:C,isSlot:k}=t;k&&l(`_${gc[Oy]}(`),l("(",t),bt(y)?ch(y,n):y&&ki(y,n),l(") => "),(C||E)&&(l("{"),p()),x?(C&&l("return "),bt(x)?Uy(x,n):ki(x,n)):E&&ki(E,n),(C||E)&&(d(),l("}")),k&&(t.isNonScopedSlot&&l(", undefined, true"),l(")"))}function bC(t,n){const{test:l,consequent:p,alternate:d,newline:y}=t,{push:x,indent:E,deindent:C,newline:k}=n;if(l.type===4){const N=!Fy(l.content);N&&x("("),Yx(l,n),N&&x(")")}else x("("),ki(l,n),x(")");y&&E(),n.indentLevel++,y||x(" "),x("? "),ki(p,n),n.indentLevel--,y&&k(),y||x(" "),x(": ");const D=d.type===19;D||n.indentLevel++,ki(d,n),D||n.indentLevel--,y&&C(!0)}function wC(t,n){const{push:l,helper:p,indent:d,deindent:y,newline:x}=n;l(`_cache[${t.index}] || (`),t.isVNode&&(d(),l(`${p(sd)}(-1),`),x()),l(`_cache[${t.index}] = `),ki(t.value,n),t.isVNode&&(l(","),x(),l(`${p(sd)}(1),`),x(),l(`_cache[${t.index}]`),y()),l(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const EC=Xx(/^(if|else|else-if)$/,(t,n,l)=>SC(t,n,l,(p,d,y)=>{const x=l.parent.children;let E=x.indexOf(p),C=0;for(;E-->=0;){const k=x[E];k&&k.type===9&&(C+=k.branches.length)}return()=>{if(y)p.codegenNode=h0(d,C,l);else{const k=TC(p.codegenNode);k.alternate=h0(d,C+p.branches.length-1,l)}}}));function SC(t,n,l,p){if(n.name!=="else"&&(!n.exp||!n.exp.content.trim())){const d=n.exp?n.exp.loc:t.loc;l.onError(un(28,n.loc)),n.exp=lr("true",!1,d)}if(n.name==="if"){const d=p0(t,n),y={type:9,loc:t.loc,branches:[d]};if(l.replaceNode(y),p)return p(y,d,!0)}else{const d=l.parent.children;let y=d.indexOf(t);for(;y-->=-1;){const x=d[y];if(x&&x.type===3){l.removeNode(x);continue}if(x&&x.type===2&&!x.content.trim().length){l.removeNode(x);continue}if(x&&x.type===9){n.name==="else-if"&&x.branches[x.branches.length-1].condition===void 0&&l.onError(un(30,t.loc)),l.removeNode();const E=p0(t,n);x.branches.push(E);const C=p&&p(x,E,!1);Hd(E,l),C&&C(),l.currentNode=null}else l.onError(un(30,t.loc));break}}}function p0(t,n){const l=t.tagType===3;return{type:10,loc:t.loc,condition:n.name==="else"?void 0:n.exp,children:l&&!Po(t,"for")?t.children:[t],userKey:jd(t,"key"),isTemplateIf:l}}function h0(t,n,l){return t.condition?Lg(t.condition,f0(t,n,l),Nn(l.helper(sh),['""',"true"])):f0(t,n,l)}function f0(t,n,l){const{helper:p}=l,d=Tn("key",lr(`${n}`,!1,xo,2)),{children:y}=t,x=y[0];if(y.length!==1||x.type!==1)if(y.length===1&&x.type===11){const C=x.codegenNode;return hd(C,d,l),C}else{let C=64;return Jp(l,p(Kp),Mo([d]),y,C+"",void 0,void 0,!0,!1,!1,t.loc)}else{const C=x.codegenNode,k=jT(C);return k.type===13&&By(k,l),hd(k,d,l),C}}function TC(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const CC=Xx("for",(t,n,l)=>{const{helper:p,removeHelper:d}=l;return AC(t,n,l,y=>{const x=Nn(p(My),[y.source]),E=cd(t),C=Po(t,"memo"),k=jd(t,"key"),D=k&&(k.type===6?lr(k.value.content,!0):k.exp),N=k?Tn("key",D):null,ee=y.source.type===4&&y.source.constType>0,se=ee?64:k?128:256;return y.codegenNode=Jp(l,p(Kp),void 0,x,se+"",void 0,void 0,!0,!ee,!1,t.loc),()=>{let ne;const{children:ve}=y,fe=ve.length!==1||ve[0].type!==1,pe=pd(t)?t:E&&t.children.length===1&&pd(t.children[0])?t.children[0]:null;if(pe?(ne=pe.codegenNode,E&&N&&hd(ne,N,l)):fe?ne=Jp(l,p(Kp),N?Mo([N]):void 0,t.children,"64",void 0,void 0,!0,void 0,!1):(ne=ve[0].codegenNode,E&&N&&hd(ne,N,l),ne.isBlock!==!ee&&(ne.isBlock?(d(Kl),d(_c(l.inSSR,ne.isComponent))):d(vc(l.inSSR,ne.isComponent))),ne.isBlock=!ee,ne.isBlock?(p(Kl),p(_c(l.inSSR,ne.isComponent))):p(vc(l.inSSR,ne.isComponent))),C){const ue=yc(Dg(y.parseResult,[lr("_cached")]));ue.body=LT([Wo(["const _memo = (",C.exp,")"]),Wo(["if (_cached",...D?[" && _cached.key === ",D]:[],` && ${l.helperString(Nx)}(_cached, _memo)) return _cached`]),Wo(["const _item = ",ne]),lr("_item.memo = _memo"),lr("return _item")]),x.arguments.push(ue,lr("_cache"),lr(String(l.cached++)))}else x.arguments.push(yc(Dg(y.parseResult),ne,!0))}})});function AC(t,n,l,p){if(!n.exp){l.onError(un(31,n.loc));return}const d=eb(n.exp);if(!d){l.onError(un(32,n.loc));return}const{addIdentifiers:y,removeIdentifiers:x,scopes:E}=l,{source:C,value:k,key:D,index:N}=d,ee={type:11,loc:n.loc,source:C,valueAlias:k,keyAlias:D,objectIndexAlias:N,parseResult:d,children:cd(t)?t.children:[t]};l.replaceNode(ee),E.vFor++;const se=p&&p(ee);return()=>{E.vFor--,se&&se()}}const IC=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,d0=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,kC=/^\(|\)$/g;function eb(t,n){const l=t.loc,p=t.content,d=p.match(IC);if(!d)return;const[,y,x]=d,E={source:Df(l,x.trim(),p.indexOf(x,y.length)),value:void 0,key:void 0,index:void 0};let C=y.trim().replace(kC,"").trim();const k=y.indexOf(C),D=C.match(d0);if(D){C=C.replace(d0,"").trim();const N=D[1].trim();let ee;if(N&&(ee=p.indexOf(N,k+C.length),E.key=Df(l,N,ee)),D[2]){const se=D[2].trim();se&&(E.index=Df(l,se,p.indexOf(se,E.key?ee+N.length:k+C.length)))}}return C&&(E.value=Df(l,C,k)),E}function Df(t,n,l){return lr(n,!1,jx(t,l,n.length))}function Dg({value:t,key:n,index:l},p=[]){return PC([t,n,l,...p])}function PC(t){let n=t.length;for(;n--&&!t[n];);return t.slice(0,n+1).map((l,p)=>l||lr("_".repeat(p+1),!1))}const m0=lr("undefined",!1),MC=(t,n)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const l=Po(t,"slot");if(l)return l.exp,n.scopes.vSlot++,()=>{n.scopes.vSlot--}}},zC=(t,n,l)=>yc(t,n,!1,!0,n.length?n[0].loc:l);function LC(t,n,l=zC){n.helper(Oy);const{children:p,loc:d}=t,y=[],x=[];let E=n.scopes.vSlot>0||n.scopes.vFor>0;const C=Po(t,"slot",!0);if(C){const{arg:fe,exp:pe}=C;fe&&!eo(fe)&&(E=!0),y.push(Tn(fe||lr("default",!0),l(pe,p,d)))}let k=!1,D=!1;const N=[],ee=new Set;let se=0;for(let fe=0;fe<p.length;fe++){const pe=p[fe];let ue;if(!cd(pe)||!(ue=Po(pe,"slot",!0))){pe.type!==3&&N.push(pe);continue}if(C){n.onError(un(37,ue.loc));break}k=!0;const{children:be,loc:_e}=pe,{arg:Oe=lr("default",!0),exp:f,loc:ke}=ue;let Y;eo(Oe)?Y=Oe?Oe.content:"default":E=!0;const Fe=l(f,be,_e);let ze,Xe,xe;if(ze=Po(pe,"if"))E=!0,x.push(Lg(ze.exp,Bf(Oe,Fe,se++),m0));else if(Xe=Po(pe,/^else(-if)?$/,!0)){let mt=fe,et;for(;mt--&&(et=p[mt],et.type===3););if(et&&cd(et)&&Po(et,"if")){p.splice(fe,1),fe--;let Wt=x[x.length-1];for(;Wt.alternate.type===19;)Wt=Wt.alternate;Wt.alternate=Xe.exp?Lg(Xe.exp,Bf(Oe,Fe,se++),m0):Bf(Oe,Fe,se++)}else n.onError(un(30,Xe.loc))}else if(xe=Po(pe,"for")){E=!0;const mt=xe.parseResult||eb(xe.exp);mt?x.push(Nn(n.helper(My),[mt.source,yc(Dg(mt),Bf(Oe,Fe),!0)])):n.onError(un(32,xe.loc))}else{if(Y){if(ee.has(Y)){n.onError(un(38,ke));continue}ee.add(Y),Y==="default"&&(D=!0)}y.push(Tn(Oe,Fe))}}if(!C){const fe=(pe,ue)=>{const be=l(pe,ue,d);return n.compatConfig&&(be.isNonScopedSlot=!0),Tn("default",be)};k?N.length&&N.some(pe=>tb(pe))&&(D?n.onError(un(39,N[0].loc)):y.push(fe(void 0,N))):y.push(fe(void 0,p))}const ne=E?2:Hf(t.children)?3:1;let ve=Mo(y.concat(Tn("_",lr(ne+"",!1))),d);return x.length&&(ve=Nn(n.helper(Fx),[ve,uh(x)])),{slots:ve,hasDynamicSlots:E}}function Bf(t,n,l){const p=[Tn("name",t),Tn("fn",n)];return l!=null&&p.push(Tn("key",lr(String(l),!0))),Mo(p)}function Hf(t){for(let n=0;n<t.length;n++){const l=t[n];switch(l.type){case 1:if(l.tagType===2||Hf(l.children))return!0;break;case 9:if(Hf(l.branches))return!0;break;case 10:case 11:if(Hf(l.children))return!0;break}}return!1}function tb(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():tb(t.content)}const rb=new WeakMap,RC=(t,n)=>function(){if(t=n.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:p,props:d}=t,y=t.tagType===1;let x=y?OC(t,n):`"${p}"`;const E=Vr(x)&&x.callee===od;let C,k,D,N=0,ee,se,ne,ve=E||x===Fp||x===Ey||!y&&(p==="svg"||p==="foreignObject");if(d.length>0){const fe=nb(t,n,void 0,y,E);C=fe.props,N=fe.patchFlag,se=fe.dynamicPropNames;const pe=fe.directives;ne=pe&&pe.length?uh(pe.map(ue=>BC(ue,n))):void 0,fe.shouldUseBlock&&(ve=!0)}if(t.children.length>0)if(x===id&&(ve=!0,N|=1024),y&&x!==Fp&&x!==id){const{slots:pe,hasDynamicSlots:ue}=LC(t,n);k=pe,ue&&(N|=1024)}else if(t.children.length===1&&x!==Fp){const pe=t.children[0],ue=pe.type,be=ue===5||ue===8;be&&zo(pe,n)===0&&(N|=1),be||ue===2?k=pe:k=t.children}else k=t.children;N!==0&&(D=String(N),se&&se.length&&(ee=FC(se))),t.codegenNode=Jp(n,x,C,k,D,ee,ne,!!ve,!1,y,t.loc)};function OC(t,n,l=!1){let{tag:p}=t;const d=Bg(p),y=jd(t,"is");if(y)if(d||Hl("COMPILER_IS_ON_ELEMENT",n)){const C=y.type===6?y.value&&lr(y.value.content,!0):y.exp;if(C)return Nn(n.helper(od),[C])}else y.type===6&&y.value.content.startsWith("vue:")&&(p=y.value.content.slice(4));const x=!d&&Po(t,"is");if(x&&x.exp)return Nn(n.helper(od),[x.exp]);const E=Ux(p)||n.isBuiltInComponent(p);return E?(l||n.helper(E),E):(n.helper(Ay),n.components.add(p),Yp(p,"component"))}function nb(t,n,l=t.props,p,d,y=!1){const{tag:x,loc:E,children:C}=t;let k=[];const D=[],N=[],ee=C.length>0;let se=!1,ne=0,ve=!1,fe=!1,pe=!1,ue=!1,be=!1,_e=!1;const Oe=[],f=Fe=>{k.length&&(D.push(Mo(g0(k),E)),k=[]),Fe&&D.push(Fe)},ke=({key:Fe,value:ze})=>{if(eo(Fe)){const Xe=Fe.content,xe=Xl(Xe);if(xe&&(!p||d)&&Xe.toLowerCase()!=="onclick"&&Xe!=="onUpdate:modelValue"&&!Fl(Xe)&&(ue=!0),xe&&Fl(Xe)&&(_e=!0),ze.type===20||(ze.type===4||ze.type===8)&&zo(ze,n)>0)return;Xe==="ref"?ve=!0:Xe==="class"?fe=!0:Xe==="style"?pe=!0:Xe!=="key"&&!Oe.includes(Xe)&&Oe.push(Xe),p&&(Xe==="class"||Xe==="style")&&!Oe.includes(Xe)&&Oe.push(Xe)}else be=!0};for(let Fe=0;Fe<l.length;Fe++){const ze=l[Fe];if(ze.type===6){const{loc:Xe,name:xe,value:mt}=ze;let et=!0;if(xe==="ref"&&(ve=!0,n.scopes.vFor>0&&k.push(Tn(lr("ref_for",!0),lr("true")))),xe==="is"&&(Bg(x)||mt&&mt.content.startsWith("vue:")||Hl("COMPILER_IS_ON_ELEMENT",n)))continue;k.push(Tn(lr(xe,!0,jx(Xe,0,xe.length)),lr(mt?mt.content:"",et,mt?mt.loc:Xe)))}else{const{name:Xe,arg:xe,exp:mt,loc:et}=ze,Wt=Xe==="bind",Ot=Xe==="on";if(Xe==="slot"){p||n.onError(un(40,et));continue}if(Xe==="once"||Xe==="memo"||Xe==="is"||Wt&&Bl(xe,"is")&&(Bg(x)||Hl("COMPILER_IS_ON_ELEMENT",n))||Ot&&y)continue;if((Wt&&Bl(xe,"key")||Ot&&ee&&Bl(xe,"vue:before-update"))&&(se=!0),Wt&&Bl(xe,"ref")&&n.scopes.vFor>0&&k.push(Tn(lr("ref_for",!0),lr("true"))),!xe&&(Wt||Ot)){if(be=!0,mt)if(Wt){if(f(),Hl("COMPILER_V_BIND_OBJECT_ORDER",n)){D.unshift(mt);continue}D.push(mt)}else f({type:14,loc:et,callee:n.helper(Ry),arguments:p?[mt]:[mt,"true"]});else n.onError(un(Wt?34:35,et));continue}const rr=n.directiveTransforms[Xe];if(rr){const{props:Dt,needRuntime:yn}=rr(ze,t,n);!y&&Dt.forEach(ke),Ot&&xe&&!eo(xe)?f(Mo(Dt,E)):k.push(...Dt),yn&&(N.push(ze),Ns(yn)&&rb.set(ze,yn))}else nE(Xe)||(N.push(ze),ee&&(se=!0))}}let Y;if(D.length?(f(),D.length>1?Y=Nn(n.helper(ad),D,E):Y=D[0]):k.length&&(Y=Mo(g0(k),E)),be?ne|=16:(fe&&!p&&(ne|=2),pe&&!p&&(ne|=4),Oe.length&&(ne|=8),ue&&(ne|=32)),!se&&(ne===0||ne===32)&&(ve||_e||N.length>0)&&(ne|=512),!n.inSSR&&Y)switch(Y.type){case 15:let Fe=-1,ze=-1,Xe=!1;for(let et=0;et<Y.properties.length;et++){const Wt=Y.properties[et].key;eo(Wt)?Wt.content==="class"?Fe=et:Wt.content==="style"&&(ze=et):Wt.isHandlerKey||(Xe=!0)}const xe=Y.properties[Fe],mt=Y.properties[ze];Xe?Y=Nn(n.helper(Xp),[Y]):(xe&&!eo(xe.value)&&(xe.value=Nn(n.helper(zy),[xe.value])),mt&&(pe||mt.value.type===4&&mt.value.content.trim()[0]==="["||mt.value.type===17)&&(mt.value=Nn(n.helper(Ly),[mt.value])));break;case 14:break;default:Y=Nn(n.helper(Xp),[Nn(n.helper(lh),[Y])]);break}return{props:Y,directives:N,patchFlag:ne,dynamicPropNames:Oe,shouldUseBlock:se}}function g0(t){const n=new Map,l=[];for(let p=0;p<t.length;p++){const d=t[p];if(d.key.type===8||!d.key.isStatic){l.push(d);continue}const y=d.key.content,x=n.get(y);x?(y==="style"||y==="class"||Xl(y))&&DC(x,d):(n.set(y,d),l.push(d))}return l}function DC(t,n){t.value.type===17?t.value.elements.push(n.value):t.value=uh([t.value,n.value],t.loc)}function BC(t,n){const l=[],p=rb.get(t);p?l.push(n.helperString(p)):(n.helper(Iy),n.directives.add(t.name),l.push(Yp(t.name,"directive")));const{loc:d}=t;if(t.exp&&l.push(t.exp),t.arg&&(t.exp||l.push("void 0"),l.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||l.push("void 0"),l.push("void 0"));const y=lr("true",!1,d);l.push(Mo(t.modifiers.map(x=>Tn(x,y)),d))}return uh(l,t.loc)}function FC(t){let n="[";for(let l=0,p=t.length;l<p;l++)n+=JSON.stringify(t[l]),l<p-1&&(n+=", ");return n+"]"}function Bg(t){return t==="component"||t==="Component"}const NC=(t,n)=>{if(pd(t)){const{children:l,loc:p}=t,{slotName:d,slotProps:y}=UC(t,n),x=[n.prefixIdentifiers?"_ctx.$slots":"$slots",d,"{}","undefined","true"];let E=2;y&&(x[2]=y,E=3),l.length&&(x[3]=yc([],l,!1,!1,p),E=4),n.scopeId&&!n.slotted&&(E=5),x.splice(E),t.codegenNode=Nn(n.helper(Bx),x,p)}};function UC(t,n){let l='"default"',p;const d=[];for(let y=0;y<t.props.length;y++){const x=t.props[y];x.type===6?x.value&&(x.name==="name"?l=JSON.stringify(x.value.content):(x.name=Vn(x.name),d.push(x))):x.name==="bind"&&Bl(x.arg,"name")?x.exp&&(l=x.exp):(x.name==="bind"&&x.arg&&eo(x.arg)&&(x.arg.content=Vn(x.arg.content)),d.push(x))}if(d.length>0){const{props:y,directives:x}=nb(t,n,d,!1,!1);p=y,x.length&&n.onError(un(36,x[0].loc))}return{slotName:l,slotProps:p}}const VC=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,ib=(t,n,l,p)=>{const{loc:d,modifiers:y,arg:x}=t;!t.exp&&!y.length&&l.onError(un(35,d));let E;if(x.type===4)if(x.isStatic){let N=x.content;N.startsWith("vue:")&&(N=`vnode-${N.slice(4)}`);const ee=n.tagType!==0||N.startsWith("vnode")||!/[A-Z]/.test(N)?oc(Vn(N)):`on:${N}`;E=lr(ee,!0,x.loc)}else E=Wo([`${l.helperString(zg)}(`,x,")"]);else E=x,E.children.unshift(`${l.helperString(zg)}(`),E.children.push(")");let C=t.exp;C&&!C.content.trim()&&(C=void 0);let k=l.cacheHandlers&&!C&&!l.inVOnce;if(C){const N=Vx(C.content),ee=!(N||VC.test(C.content)),se=C.content.includes(";");(ee||k&&N)&&(C=Wo([`${ee?"$event":"(...args)"} => ${se?"{":"("}`,C,se?"}":")"]))}let D={props:[Tn(E,C||lr("() => {}",!1,d))]};return p&&(D=p(D)),k&&(D.props[0].value=l.cache(D.props[0].value)),D.props.forEach(N=>N.key.isHandlerKey=!0),D},jC=(t,n,l)=>{const{exp:p,modifiers:d,loc:y}=t,x=t.arg;return x.type!==4?(x.children.unshift("("),x.children.push(') || ""')):x.isStatic||(x.content=`${x.content} || ""`),d.includes("camel")&&(x.type===4?x.isStatic?x.content=Vn(x.content):x.content=`${l.helperString(Mg)}(${x.content})`:(x.children.unshift(`${l.helperString(Mg)}(`),x.children.push(")"))),l.inSSR||(d.includes("prop")&&y0(x,"."),d.includes("attr")&&y0(x,"^")),!p||p.type===4&&!p.content.trim()?(l.onError(un(34,y)),{props:[Tn(x,lr("",!0,y))]}):{props:[Tn(x,p)]}},y0=(t,n)=>{t.type===4?t.isStatic?t.content=n+t.content:t.content=`\`${n}\${${t.content}}\``:(t.children.unshift(`'${n}' + (`),t.children.push(")"))},qC=(t,n)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const l=t.children;let p,d=!1;for(let y=0;y<l.length;y++){const x=l[y];if(eg(x)){d=!0;for(let E=y+1;E<l.length;E++){const C=l[E];if(eg(C))p||(p=l[y]=Wo([x],x.loc)),p.children.push(" + ",C),l.splice(E,1),E--;else{p=void 0;break}}}}if(!(!d||l.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(y=>y.type===7&&!n.directiveTransforms[y.name])&&t.tag!=="template")))for(let y=0;y<l.length;y++){const x=l[y];if(eg(x)||x.type===8){const E=[];(x.type!==2||x.content!==" ")&&E.push(x),!n.ssr&&zo(x,n)===0&&E.push("1"),l[y]={type:12,content:x,loc:x.loc,codegenNode:Nn(n.helper(Cy),E)}}}}},v0=new WeakSet,HC=(t,n)=>{if(t.type===1&&Po(t,"once",!0))return v0.has(t)||n.inVOnce||n.inSSR?void 0:(v0.add(t),n.inVOnce=!0,n.helper(sd),()=>{n.inVOnce=!1;const l=n.currentNode;l.codegenNode&&(l.codegenNode=n.cache(l.codegenNode,!0))})},ob=(t,n,l)=>{const{exp:p,arg:d}=t;if(!p)return l.onError(un(41,t.loc)),Ff();const y=p.loc.source,x=p.type===4?p.content:y,E=l.bindingMetadata[y];if(E==="props"||E==="props-aliased")return l.onError(un(44,p.loc)),Ff();const C=!1;if(!x.trim()||!Vx(x)&&!C)return l.onError(un(42,p.loc)),Ff();const k=d||lr("modelValue",!0),D=d?eo(d)?`onUpdate:${Vn(d.content)}`:Wo(['"onUpdate:" + ',d]):"onUpdate:modelValue";let N;const ee=l.isTS?"($event: any)":"$event";N=Wo([`${ee} => ((`,p,") = $event)"]);const se=[Tn(k,t.exp),Tn(D,N)];if(t.modifiers.length&&n.tagType===1){const ne=t.modifiers.map(fe=>(Fy(fe)?fe:JSON.stringify(fe))+": true").join(", "),ve=d?eo(d)?`${d.content}Modifiers`:Wo([d,' + "Modifiers"']):"modelModifiers";se.push(Tn(ve,lr(`{ ${ne} }`,!1,t.loc,2)))}return Ff(se)};function Ff(t=[]){return{props:t}}const $C=/[\w).+\-_$\]]/,ZC=(t,n)=>{Hl("COMPILER_FILTER",n)&&(t.type===5&&dd(t.content,n),t.type===1&&t.props.forEach(l=>{l.type===7&&l.name!=="for"&&l.exp&&dd(l.exp,n)}))};function dd(t,n){if(t.type===4)_0(t,n);else for(let l=0;l<t.children.length;l++){const p=t.children[l];typeof p=="object"&&(p.type===4?_0(p,n):p.type===8?dd(t,n):p.type===5&&dd(p.content,n))}}function _0(t,n){const l=t.content;let p=!1,d=!1,y=!1,x=!1,E=0,C=0,k=0,D=0,N,ee,se,ne,ve=[];for(se=0;se<l.length;se++)if(ee=N,N=l.charCodeAt(se),p)N===39&&ee!==92&&(p=!1);else if(d)N===34&&ee!==92&&(d=!1);else if(y)N===96&&ee!==92&&(y=!1);else if(x)N===47&&ee!==92&&(x=!1);else if(N===124&&l.charCodeAt(se+1)!==124&&l.charCodeAt(se-1)!==124&&!E&&!C&&!k)ne===void 0?(D=se+1,ne=l.slice(0,se).trim()):fe();else{switch(N){case 34:d=!0;break;case 39:p=!0;break;case 96:y=!0;break;case 40:k++;break;case 41:k--;break;case 91:C++;break;case 93:C--;break;case 123:E++;break;case 125:E--;break}if(N===47){let pe=se-1,ue;for(;pe>=0&&(ue=l.charAt(pe),ue===" ");pe--);(!ue||!$C.test(ue))&&(x=!0)}}ne===void 0?ne=l.slice(0,se).trim():D!==0&&fe();function fe(){ve.push(l.slice(D,se).trim()),D=se+1}if(ve.length){for(se=0;se<ve.length;se++)ne=GC(ne,ve[se],n);t.content=ne}}function GC(t,n,l){l.helper(ky);const p=n.indexOf("(");if(p<0)return l.filters.add(n),`${Yp(n,"filter")}(${t})`;{const d=n.slice(0,p),y=n.slice(p+1);return l.filters.add(d),`${Yp(d,"filter")}(${t}${y!==")"?","+y:y}`}}const x0=new WeakSet,WC=(t,n)=>{if(t.type===1){const l=Po(t,"memo");return!l||x0.has(t)?void 0:(x0.add(t),()=>{const p=t.codegenNode||n.currentNode.codegenNode;p&&p.type===13&&(t.tagType!==1&&By(p,n),t.codegenNode=Nn(n.helper(Dy),[l.exp,yc(void 0,p),"_cache",String(n.cached++)]))})}};function KC(t){return[[HC,EC,WC,CC,ZC,NC,RC,MC,qC],{on:ib,bind:jC,model:ob}]}function XC(t,n={}){const l=n.onError||wy,p=n.mode==="module";n.prefixIdentifiers===!0?l(un(47)):p&&l(un(48));const d=!1;n.cacheHandlers&&l(un(49)),n.scopeId&&!p&&l(un(50));const y=tr(t)?$T(t,n):t,[x,E]=KC();return oC(y,vr({},n,{prefixIdentifiers:d,nodeTransforms:[...x,...n.nodeTransforms||[]],directiveTransforms:vr({},E,n.directiveTransforms||{})})),lC(y,vr({},n,{prefixIdentifiers:d}))}const JC=()=>({props:[]}),ab=Symbol(""),sb=Symbol(""),lb=Symbol(""),ub=Symbol(""),Fg=Symbol(""),cb=Symbol(""),pb=Symbol(""),hb=Symbol(""),fb=Symbol(""),db=Symbol("");PT({[ab]:"vModelRadio",[sb]:"vModelCheckbox",[lb]:"vModelText",[ub]:"vModelSelect",[Fg]:"vModelDynamic",[cb]:"withModifiers",[pb]:"withKeys",[hb]:"vShow",[fb]:"Transition",[db]:"TransitionGroup"});let ec;function YC(t,n=!1){return ec||(ec=document.createElement("div")),n?(ec.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,ec.children[0].getAttribute("foo")):(ec.innerHTML=t,ec.textContent)}const QC=ro("style,iframe,script,noscript",!0),e5={isVoidTag:yE,isNativeTag:t=>mE(t)||gE(t),isPreTag:t=>t==="pre",decodeEntities:YC,isBuiltInComponent:t=>{if(rc(t,"Transition"))return fb;if(rc(t,"TransitionGroup"))return db},getNamespace(t,n){let l=n?n.ns:0;if(n&&l===2)if(n.tag==="annotation-xml"){if(t==="svg")return 1;n.props.some(p=>p.type===6&&p.name==="encoding"&&p.value!=null&&(p.value.content==="text/html"||p.value.content==="application/xhtml+xml"))&&(l=0)}else/^m(?:[ions]|text)$/.test(n.tag)&&t!=="mglyph"&&t!=="malignmark"&&(l=0);else n&&l===1&&(n.tag==="foreignObject"||n.tag==="desc"||n.tag==="title")&&(l=0);if(l===0){if(t==="svg")return 1;if(t==="math")return 2}return l},getTextMode({tag:t,ns:n}){if(n===0){if(t==="textarea"||t==="title")return 1;if(QC(t))return 2}return 0}},t5=t=>{t.type===1&&t.props.forEach((n,l)=>{n.type===6&&n.name==="style"&&n.value&&(t.props[l]={type:7,name:"bind",arg:lr("style",!0,n.loc),exp:r5(n.value.content,n.loc),modifiers:[],loc:n.loc})})},r5=(t,n)=>{const l=$0(t);return lr(JSON.stringify(l),!1,n,3)};function Fs(t,n){return un(t,n)}const n5=(t,n,l)=>{const{exp:p,loc:d}=t;return p||l.onError(Fs(53,d)),n.children.length&&(l.onError(Fs(54,d)),n.children.length=0),{props:[Tn(lr("innerHTML",!0,d),p||lr("",!0))]}},i5=(t,n,l)=>{const{exp:p,loc:d}=t;return p||l.onError(Fs(55,d)),n.children.length&&(l.onError(Fs(56,d)),n.children.length=0),{props:[Tn(lr("textContent",!0),p?zo(p,l)>0?p:Nn(l.helperString(Vd),[p],d):lr("",!0))]}},o5=(t,n,l)=>{const p=ob(t,n,l);if(!p.props.length||n.tagType===1)return p;t.arg&&l.onError(Fs(58,t.arg.loc));const{tag:d}=n,y=l.isCustomElement(d);if(d==="input"||d==="textarea"||d==="select"||y){let x=lb,E=!1;if(d==="input"||y){const C=jd(n,"type");if(C){if(C.type===7)x=Fg;else if(C.value)switch(C.value.content){case"radio":x=ab;break;case"checkbox":x=sb;break;case"file":E=!0,l.onError(Fs(59,t.loc));break}}else NT(n)&&(x=Fg)}else d==="select"&&(x=ub);E||(p.needRuntime=l.helper(x))}else l.onError(Fs(57,t.loc));return p.props=p.props.filter(x=>!(x.key.type===4&&x.key.content==="modelValue")),p},a5=ro("passive,once,capture"),s5=ro("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),l5=ro("left,right"),mb=ro("onkeyup,onkeydown,onkeypress",!0),u5=(t,n,l,p)=>{const d=[],y=[],x=[];for(let E=0;E<n.length;E++){const C=n[E];C==="native"&&Qp("COMPILER_V_ON_NATIVE",l)||a5(C)?x.push(C):l5(C)?eo(t)?mb(t.content)?d.push(C):y.push(C):(d.push(C),y.push(C)):s5(C)?y.push(C):d.push(C)}return{keyModifiers:d,nonKeyModifiers:y,eventOptionModifiers:x}},b0=(t,n)=>eo(t)&&t.content.toLowerCase()==="onclick"?lr(n,!0):t.type!==4?Wo(["(",t,`) === "onClick" ? "${n}" : (`,t,")"]):t,c5=(t,n,l)=>ib(t,n,l,p=>{const{modifiers:d}=t;if(!d.length)return p;let{key:y,value:x}=p.props[0];const{keyModifiers:E,nonKeyModifiers:C,eventOptionModifiers:k}=u5(y,d,l,t.loc);if(C.includes("right")&&(y=b0(y,"onContextmenu")),C.includes("middle")&&(y=b0(y,"onMouseup")),C.length&&(x=Nn(l.helper(cb),[x,JSON.stringify(C)])),E.length&&(!eo(y)||mb(y.content))&&(x=Nn(l.helper(pb),[x,JSON.stringify(E)])),k.length){const D=k.map(Yl).join("");y=eo(y)?lr(`${y.content}${D}`,!0):Wo(["(",y,`) + "${D}"`])}return{props:[Tn(y,x)]}}),p5=(t,n,l)=>{const{exp:p,loc:d}=t;return p||l.onError(Fs(61,d)),{props:[],needRuntime:l.helper(hb)}},h5=(t,n)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&n.removeNode()},f5=[t5],d5={cloak:JC,html:n5,text:i5,model:o5,on:c5,show:p5};function m5(t,n={}){return XC(t,vr({},e5,n,{nodeTransforms:[h5,...f5,...n.nodeTransforms||[]],directiveTransforms:vr({},d5,n.directiveTransforms||{}),transformHoist:null}))}const w0=Object.create(null);function g5(t,n){if(!tr(t))if(t.nodeType)t=t.innerHTML;else return Ni;const l=t,p=w0[l];if(p)return p;if(t[0]==="#"){const E=document.querySelector(t);t=E?E.innerHTML:""}const d=vr({hoistStatic:!0,onError:void 0,onWarn:Ni},n);!d.isCustomElement&&typeof customElements<"u"&&(d.isCustomElement=E=>!!customElements.get(E));const{code:y}=m5(t,d),x=new Function("Vue",y)(ST);return x._rc=!0,w0[l]=x}nx(g5);var yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function v5(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var l=function p(){if(this instanceof p){var d=[null];d.push.apply(d,arguments);var y=Function.bind.apply(n,d);return new y}return n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(t).forEach(function(p){var d=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(l,p,d.get?d:{enumerable:!0,get:function(){return t[p]}})}),l}var _5={exports:{}};(function(t,n){(function(l,p){t.exports=p()})(yo,function(){function l(fe,pe){pe===void 0&&(pe={});var ue=pe.insertAt;if(!(!fe||typeof document>"u")){var be=document.head||document.getElementsByTagName("head")[0],_e=document.createElement("style");_e.type="text/css",ue==="top"&&be.firstChild?be.insertBefore(_e,be.firstChild):be.appendChild(_e),_e.styleSheet?_e.styleSheet.cssText=fe:_e.appendChild(document.createTextNode(fe))}}var p=`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`;l(p);var d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof yo<"u"?yo:typeof self<"u"?self:{},y={},x={get exports(){return y},set exports(fe){y=fe}};(function(fe,pe){(function(ue,be){fe.exports=be()})(d,function(){var ue,be,_e;function Oe(f,ke){if(!ue)ue=ke;else if(!be)be=ke;else{var Y="var sharedChunk = {}; ("+ue+")(sharedChunk); ("+be+")(sharedChunk);",Fe={};ue(Fe),_e=ke(Fe),typeof window<"u"&&(_e.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}}return Oe(["exports"],function(f){function ke(e,r){return e(r={exports:{}},r.exports),r.exports}var Y=Fe;function Fe(e,r,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}Fe.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Fe.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Fe.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Fe.prototype.solveCurveX=function(e,r){var i,u,h,m,v;for(r===void 0&&(r=1e-6),h=e,v=0;v<8;v++){if(m=this.sampleCurveX(h)-e,Math.abs(m)<r)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=m/w}if((h=e)<(i=0))return i;if(h>(u=1))return u;for(;i<u;){if(m=this.sampleCurveX(h),Math.abs(m-e)<r)return h;e>m?i=h:u=h,h=.5*(u-i)+i}return h},Fe.prototype.solve=function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))};var ze=Xe;function Xe(e,r){this.x=e,this.y=r}Xe.prototype={clone:function(){return new Xe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,i=e.y-this.y;return r*r+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),i=Math.sin(e),u=i*this.x+r*this.y;return this.x=r*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,r){var i=Math.cos(e),u=Math.sin(e),h=r.y+u*(this.x-r.x)+i*(this.y-r.y);return this.x=r.x+i*(this.x-r.x)-u*(this.y-r.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Xe.convert=function(e){return e instanceof Xe?e:Array.isArray(e)?new Xe(e[0],e[1]):e};var xe=typeof self<"u"?self:{},mt=Math.pow(2,53)-1;function et(e,r,i,u){var h=new Y(e,r,i,u);return function(m){return h.solve(m)}}var Wt=et(.25,.1,.25,1);function Ot(e,r,i){return Math.min(i,Math.max(r,e))}function rr(e,r,i){var u=i-r,h=((e-r)%u+u)%u+r;return h===r?i:h}function Dt(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,m=i;h<m.length;h+=1){var v=m[h];for(var w in v)e[w]=v[w]}return e}var yn=1;function di(){return yn++}function Kr(){return function e(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function vn(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Mi(e,r){e.forEach(function(i){r[i]&&(r[i]=r[i].bind(r))})}function Ui(e,r){return e.indexOf(r,e.length-r.length)!==-1}function cn(e,r,i){var u={};for(var h in e)u[h]=r.call(i||this,e[h],h,e);return u}function on(e,r,i){var u={};for(var h in e)r.call(i||this,e[h],h,e)&&(u[h]=e[h]);return u}function Ln(e){return Array.isArray(e)?e.map(Ln):typeof e=="object"&&e?cn(e,Ln):e}var io={};function mr(e){io[e]||(typeof console<"u"&&console.warn(e),io[e]=!0)}function pn(e,r,i){return(i.y-e.y)*(r.x-e.x)>(r.y-e.y)*(i.x-e.x)}function oo(e){for(var r=0,i=0,u=e.length,h=u-1,m=void 0,v=void 0;i<u;h=i++)r+=((v=e[h]).x-(m=e[i]).x)*(m.y+v.y);return r}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function de(e){var r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,h,m,v){var w=m||v;return r[h]=!w||w.toLowerCase(),""}),r["max-age"]){var i=parseInt(r["max-age"],10);isNaN(i)?delete r["max-age"]:r["max-age"]=i}return r}var Be=null;function Ge(e){if(Be==null){var r=e.navigator?e.navigator.userAgent:null;Be=!!e.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Be}function qe(e){try{var r=xe[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Je,Te,Le,Re,Ae=xe.performance&&xe.performance.now?xe.performance.now.bind(xe.performance):Date.now.bind(Date),Ye=xe.requestAnimationFrame||xe.mozRequestAnimationFrame||xe.webkitRequestAnimationFrame||xe.msRequestAnimationFrame,He=xe.cancelAnimationFrame||xe.mozCancelAnimationFrame||xe.webkitCancelAnimationFrame||xe.msCancelAnimationFrame,ct={now:Ae,frame:function(e){var r=Ye(e);return{cancel:function(){return He(r)}}},getImageData:function(e,r){r===void 0&&(r=0);var i=xe.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-r,-r,e.width+2*r,e.height+2*r)},resolveURL:function(e){return Je||(Je=xe.document.createElement("a")),Je.href=e,Je.href},hardwareConcurrency:xe.navigator&&xe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return xe.devicePixelRatio},get prefersReducedMotion(){return!!xe.matchMedia&&(Te==null&&(Te=xe.matchMedia("(prefers-reduced-motion: reduce)")),Te.matches)}},nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},kt={supported:!1,testSupport:function(e){!jt&&Re&&(qt?dt(e):Le=e)}},jt=!1,qt=!1;function dt(e){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Re),e.isContextLost())return;kt.supported=!0}catch{}e.deleteTexture(r),jt=!0}xe.document&&((Re=xe.document.createElement("img")).onload=function(){Le&&dt(Le),Le=null,qt=!0},Re.onerror=function(){jt=!0,Le=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var zr="01",Lr=function(e,r){this._transformRequestFn=e,this._customAccessToken=r,this._createSkuToken()};function hn(e){return e.indexOf("mapbox:")===0}Lr.prototype._createSkuToken=function(){var e=function(){for(var r="",i=0;i<10;i++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",zr,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Lr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Lr.prototype.transformRequest=function(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}},Lr.prototype.normalizeStyleURL=function(e,r){if(!hn(e))return e;var i=nr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},Lr.prototype.normalizeGlyphsURL=function(e,r){if(!hn(e))return e;var i=nr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},Lr.prototype.normalizeSourceURL=function(e,r){if(!hn(e))return e;var i=nr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||r)},Lr.prototype.normalizeSpriteURL=function(e,r,i,u){var h=nr(e);return hn(e)?(h.path="/styles/v1"+h.path+"/sprite"+r+i,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=""+r+i,_n(h))},Lr.prototype.normalizeTileURL=function(e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!hn(e))return e;var i=nr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ct.devicePixelRatio>=2||r===512?"@2x":"")+(kt.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(h){for(var m=0,v=h;m<v.length;m+=1){var w=v[m].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(i.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},Lr.prototype.canonicalizeTileURL=function(e,r){var i=nr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var h=i.params;return r&&(h=h.filter(function(m){return!m.match(/^access_token=/)})),h.length&&(u+="?"+h.join("&")),u},Lr.prototype.canonicalizeTileset=function(e,r){for(var i=!!r&&hn(r),u=[],h=0,m=e.tiles||[];h<m.length;h+=1){var v=m[h];Rn(v)?u.push(this.canonicalizeTileURL(v,i)):u.push(v)}return u},Lr.prototype._makeAPIURL=function(e,r){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=nr(nt.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!nt.REQUIRE_ACCESS_TOKEN)return _n(e);if(!(r=r||nt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(m){return m.indexOf("access_token")===-1}),e.params.push("access_token="+r),_n(e)};var zi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Rn(e){return zi.test(e)}var ur=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nr(e){var r=e.match(ur);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function _n(e){var r=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+r}function jn(e){if(!e)return null;var r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(xe.atob(r[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var xn=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xn.prototype.getStorageKey=function(e){var r,i=jn(nt.ACCESS_TOKEN);return r=i&&i.u?xe.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,h){return String.fromCharCode(+("0x"+h))})):nt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},xn.prototype.fetchEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=xe.localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));var h=xe.localStorage.getItem(i);h&&(this.anonId=h)}catch{mr("Unable to read from LocalStorage")}},xn.prototype.saveEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{xe.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&xe.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{mr("Unable to write to LocalStorage")}},xn.prototype.processRequests=function(e){},xn.prototype.postEvent=function(e,r,i,u){var h=this;if(nt.EVENTS_URL){var m=nr(nt.EVENTS_URL);m.params.push("access_token="+(u||nt.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:zr,userId:this.anonId},w=r?Dt(v,r):v,T={url:_n(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=Xr(T,function(A){h.pendingRequest=null,i(A),h.saveEventData(),h.processRequests(u)})}},xn.prototype.queueRequest=function(e,r){this.queue.push(e),this.processRequests(r)};var ai,bo,mi=function(e){function r(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(i,u,h,m){this.skuToken=h;var v=!(!m&&!nt.ACCESS_TOKEN),w=Array.isArray(i)&&i.some(function(T){return hn(T)||Rn(T)});nt.EVENTS_URL&&v&&w&&this.queueRequest({id:u,timestamp:Date.now()},m)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),m=h.id,v=h.timestamp;m&&this.success[m]||(this.anonId||this.fetchEventData(),vn(this.anonId)||(this.anonId=Kr()),this.postEvent(v,{skuToken:this.skuToken},function(w){w||m&&(u.success[m]=!0)},i))}},r}(xn),eu=new(function(e){function r(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(i,u){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return hn(h)||Rn(h)})&&this.queueRequest(Date.now(),u)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=jn(nt.ACCESS_TOKEN),m=h?h.u:nt.ACCESS_TOKEN,v=m!==this.eventData.tokenU;vn(this.anonId)||(this.anonId=Kr(),v=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),A=new Date(w),P=(w-this.eventData.lastSuccess)/864e5;v=v||P>=1||P<-1||T.getDate()!==A.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(M){M||(u.eventData.lastSuccess=w,u.eventData.tokenU=m)},i)}},r}(xn)),tu=eu.postTurnstileEvent.bind(eu),Gs=new mi,Ws=Gs.postMapLoadEvent.bind(Gs),ls=500,ru=50;function us(){xe.caches&&!ai&&(ai=xe.caches.open("mapbox-tiles"))}function Ks(e){var r=e.indexOf("?");return r<0?e:e.slice(0,r)}var Ca,Xs=1/0;function Js(){return Ca==null&&(Ca=xe.OffscreenCanvas&&new xe.OffscreenCanvas(1,1).getContext("2d")&&typeof xe.createImageBitmap=="function"),Ca}var nu={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(nu);var iu=function(e){function r(i,u,h){u===401&&Rn(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=h,this.name=this.constructor.name,this.message=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),Aa=oe()?function(){return self.worker&&self.worker.referrer}:function(){return(xe.location.protocol==="blob:"?xe.parent:xe).location.href},Oo,Do,cs=function(e,r){if(!(/^file:/.test(i=e.url)||/^file:/.test(Aa())&&!/^\w+:/.test(i))){if(xe.fetch&&xe.Request&&xe.AbortController&&xe.Request.prototype.hasOwnProperty("signal"))return function(u,h){var m,v=new xe.AbortController,w=new xe.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Aa(),signal:v.signal}),T=!1,A=!1,P=(m=w.url).indexOf("sku=")>0&&Rn(m);u.type==="json"&&w.headers.set("Accept","application/json");var M=function(F,Z,G){if(!A){if(F&&F.message!=="SecurityError"&&mr(F),Z&&G)return O(Z);var ie=Date.now();xe.fetch(w).then(function(Q){if(Q.ok){var he=P?Q.clone():null;return O(Q,he,ie)}return h(new iu(Q.statusText,Q.status,u.url))}).catch(function(Q){Q.code!==20&&h(new Error(Q.message))})}},O=function(F,Z,G){(u.type==="arrayBuffer"?F.arrayBuffer():u.type==="json"?F.json():F.text()).then(function(ie){A||(Z&&G&&function(Q,he,ye){if(us(),ai){var we={status:he.status,statusText:he.statusText,headers:new xe.Headers};he.headers.forEach(function(De,Ze){return we.headers.set(Ze,De)});var Se=de(he.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&we.headers.set("Expires",new Date(ye+1e3*Se["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-ye<42e4||function(De,Ze){if(bo===void 0)try{new Response(new ReadableStream),bo=!0}catch{bo=!1}bo?Ze(De.body):De.blob().then(Ze)}(he,function(De){var Ze=new xe.Response(De,we);us(),ai&&ai.then(function(Qe){return Qe.put(Ks(Q.url),Ze)}).catch(function(Qe){return mr(Qe.message)})}))}}(w,Z,G),T=!0,h(null,ie,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(function(ie){A||h(new Error(ie.message))})};return P?function(F,Z){if(us(),!ai)return Z(null);var G=Ks(F.url);ai.then(function(ie){ie.match(G).then(function(Q){var he=function(ye){if(!ye)return!1;var we=new Date(ye.headers.get("Expires")||0),Se=de(ye.headers.get("Cache-Control")||"");return we>Date.now()&&!Se["no-cache"]}(Q);ie.delete(G),he&&ie.put(G,Q.clone()),Z(null,Q,he)}).catch(Z)}).catch(Z)}(w,M):M(null,null),{cancel:function(){A=!0,T||v.abort()}}}(e,r);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var i;return function(u,h){var m=new xe.XMLHttpRequest;for(var v in m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer"),u.headers)m.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=function(){h(new Error(m.statusText))},m.onload=function(){if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){var w=m.response;if(u.type==="json")try{w=JSON.parse(m.response)}catch(T){return h(T)}h(null,w,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else h(new iu(m.statusText,m.status,u.url))},m.send(u.body),{cancel:function(){return m.abort()}}}(e,r)},Ys=function(e,r){return cs(Dt(e,{type:"arrayBuffer"}),r)},Xr=function(e,r){return cs(Dt(e,{method:"POST"}),r)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Oo=[],Do=0;var R=function(e,r){if(kt.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Do>=nt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Oo.push(i),i}Do++;var u=!1,h=function(){if(!u)for(u=!0,Do--;Oo.length&&Do<nt.MAX_PARALLEL_IMAGE_REQUESTS;){var v=Oo.shift();v.cancelled||(v.cancel=R(v.requestParameters,v.callback).cancel)}},m=Ys(e,function(v,w,T,A){h(),v?r(v):w&&(Js()?function(P,M){var O=new xe.Blob([new Uint8Array(P)],{type:"image/png"});xe.createImageBitmap(O).then(function(F){M(null,F)}).catch(function(F){M(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,r):function(P,M,O,F){var Z=new xe.Image,G=xe.URL;Z.onload=function(){M(null,Z),G.revokeObjectURL(Z.src),Z.onload=null,xe.requestAnimationFrame(function(){Z.src=z})},Z.onerror=function(){return M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ie=new xe.Blob([new Uint8Array(P)],{type:"image/png"});Z.cacheControl=O,Z.expires=F,Z.src=P.byteLength?G.createObjectURL(ie):z}(w,r,T,A))});return{cancel:function(){m.cancel(),h()}}};function B(e,r,i){i[e]&&i[e].indexOf(r)!==-1||(i[e]=i[e]||[],i[e].push(r))}function H(e,r,i){if(i&&i[e]){var u=i[e].indexOf(r);u!==-1&&i[e].splice(u,1)}}var K=function(e,r){r===void 0&&(r={}),Dt(this,r),this.type=e},ae=function(e){function r(i,u){u===void 0&&(u={}),e.call(this,"error",Dt({error:i},u))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(K),ce=function(){};ce.prototype.on=function(e,r){return this._listeners=this._listeners||{},B(e,r,this._listeners),this},ce.prototype.off=function(e,r){return H(e,r,this._listeners),H(e,r,this._oneTimeListeners),this},ce.prototype.once=function(e,r){return this._oneTimeListeners=this._oneTimeListeners||{},B(e,r,this._oneTimeListeners),this},ce.prototype.fire=function(e,r){typeof e=="string"&&(e=new K(e,r||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,h=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<h.length;u+=1)h[u].call(this,e);for(var m=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];m<v.length;m+=1){var w=v[m];H(i,w,this._oneTimeListeners),w.call(this,e)}var T=this._eventedParent;T&&(Dt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof ae&&console.error(e.error);return this},ce.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ce.prototype.setEventedParent=function(e,r){return this._eventedParent=e,this._eventedParentData=r,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},J=function(e,r,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)};function ge(e){var r=e.value;return r?[new J(e.key,r,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,m=i;h<m.length;h+=1){var v=m[h];for(var w in v)e[w]=v[w]}return e}function $e(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pe(e){if(Array.isArray(e))return e.map(Pe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var r={};for(var i in e)r[i]=Pe(e[i]);return r}return $e(e)}var Ve=function(e){function r(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Error),gt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var i=0,u=r;i<u.length;i+=1){var h=u[i];this.bindings[h[0]]=h[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var ht={kind:"null"},Me={kind:"number"},lt={kind:"string"},tt={kind:"boolean"},it={kind:"color"},Vt={kind:"object"},at={kind:"value"},Jt={kind:"collator"},wr={kind:"formatted"},Zt={kind:"resolvedImage"};function cr(e,r){return{kind:"array",itemType:e,N:r}}function Qt(e){if(e.kind==="array"){var r=Qt(e.itemType);return typeof e.N=="number"?"array<"+r+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+r+">"}return e.kind}var Xn=[ht,Me,lt,tt,it,wr,Vt,cr(at),Zt];function fr(e,r){if(r.kind==="error")return null;if(e.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!fr(e.itemType,r.itemType))&&(typeof e.N!="number"||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if(e.kind==="value"){for(var i=0,u=Xn;i<u.length;i+=1)if(!fr(u[i],r))return null}}return"Expected "+Qt(e)+" but found "+Qt(r)+" instead."}function Jr(e,r){return r.some(function(i){return i.kind===e.kind})}function xr(e,r){return r.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Xt=ke(function(e,r){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return u(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function m(w){return(T=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:T>1?1:T;var T}function v(w,T,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?w+(T-w)*A*6:2*A<1?T:3*A<2?w+(T-w)*(2/3-A)*6:w}try{r.parseCSSColor=function(w){var T,A=w.replace(/ /g,"").toLowerCase();if(A in i)return i[A].slice();if(A[0]==="#")return A.length===4?(T=parseInt(A.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:A.length===7&&(T=parseInt(A.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var P=A.indexOf("("),M=A.indexOf(")");if(P!==-1&&M+1===A.length){var O=A.substr(0,P),F=A.substr(P+1,M-(P+1)).split(","),Z=1;switch(O){case"rgba":if(F.length!==4)return null;Z=m(F.pop());case"rgb":return F.length!==3?null:[h(F[0]),h(F[1]),h(F[2]),Z];case"hsla":if(F.length!==4)return null;Z=m(F.pop());case"hsl":if(F.length!==3)return null;var G=(parseFloat(F[0])%360+360)%360/360,ie=m(F[1]),Q=m(F[2]),he=Q<=.5?Q*(ie+1):Q+ie-Q*ie,ye=2*Q-he;return[u(255*v(ye,he,G+1/3)),u(255*v(ye,he,G)),u(255*v(ye,he,G-1/3)),Z];default:return null}}return null}}catch{}}).parseCSSColor,pr=function(e,r,i,u){u===void 0&&(u=1),this.r=e,this.g=r,this.b=i,this.a=u};pr.parse=function(e){if(e){if(e instanceof pr)return e;if(typeof e=="string"){var r=Xt(e);if(r)return new pr(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},pr.prototype.toString=function(){var e=this.toArray(),r=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(r)+","+Math.round(i)+","+u+")"},pr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},pr.black=new pr(0,0,0,1),pr.white=new pr(1,1,1,1),pr.transparent=new pr(0,0,0,0),pr.red=new pr(1,0,0,1);var si=function(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};si.prototype.compare=function(e,r){return this.collator.compare(e,r)},si.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Qs=function(e,r,i,u,h){this.text=e,this.image=r,this.scale=i,this.fontStack=u,this.textColor=h},Cn=function(e){this.sections=e};Cn.fromString=function(e){return new Cn([new Qs(e,null,null,null,null)])},Cn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Cn.factory=function(e){return e instanceof Cn?e:Cn.fromString(e)},Cn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Cn.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(h)}}return e};var li=function(e){this.name=e.name,this.available=e.available};function Pc(e,r,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,r,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,r,i,u]:[e,r,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function el(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof pr||e instanceof si||e instanceof Cn||e instanceof li)return!0;if(Array.isArray(e)){for(var r=0,i=e;r<i.length;r+=1)if(!el(i[r]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!el(e[u]))return!1;return!0}return!1}function Yr(e){if(e===null)return ht;if(typeof e=="string")return lt;if(typeof e=="boolean")return tt;if(typeof e=="number")return Me;if(e instanceof pr)return it;if(e instanceof si)return Jt;if(e instanceof Cn)return wr;if(e instanceof li)return Zt;if(Array.isArray(e)){for(var r,i=e.length,u=0,h=e;u<h.length;u+=1){var m=Yr(h[u]);if(r){if(r===m)continue;r=at;break}r=m}return cr(r||at,i)}return Vt}function tl(e){var r=typeof e;return e===null?"":r==="string"||r==="number"||r==="boolean"?String(e):e instanceof pr||e instanceof Cn||e instanceof li?e.toString():JSON.stringify(e)}li.prototype.toString=function(){return this.name},li.fromString=function(e){return e?new li({name:e,available:!1}):null},li.prototype.serialize=function(){return["image",this.name]};var Jn=function(e,r){this.type=e,this.value=r};Jn.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!el(e[1]))return r.error("invalid value");var i=e[1],u=Yr(i),h=r.expectedType;return u.kind!=="array"||u.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(u=h),new Jn(u,i)},Jn.prototype.evaluate=function(){return this.value},Jn.prototype.eachChild=function(){},Jn.prototype.outputDefined=function(){return!0},Jn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pr?["rgba"].concat(this.value.toArray()):this.value instanceof Cn?this.value.serialize():this.value};var An=function(e){this.name="ExpressionEvaluationError",this.message=e};An.prototype.toJSON=function(){return this.message};var Vi={string:lt,number:Me,boolean:tt,object:Vt},Rr=function(e,r){this.type=e,this.args=r};Rr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i,u=1,h=e[0];if(h==="array"){var m,v;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in Vi)||w==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);m=Vi[w],u++}else m=at;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);v=e[2],u++}i=cr(m,v)}else i=Vi[h];for(var T=[];u<e.length;u++){var A=r.parse(e[u],u,at);if(!A)return null;T.push(A)}return new Rr(i,T)},Rr.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var i=this.args[r].evaluate(e);if(!fr(this.type,Yr(i)))return i;if(r===this.args.length-1)throw new An("Expected value to be of type "+Qt(this.type)+", but found "+Qt(Yr(i))+" instead.")}return null},Rr.prototype.eachChild=function(e){this.args.forEach(e)},Rr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Rr.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(function(h){return h.serialize()}))};var ao=function(e){this.type=wr,this.sections=e};ao.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");for(var u=[],h=!1,m=1;m<=e.length-1;++m){var v=e[m];if(h&&typeof v=="object"&&!Array.isArray(v)){h=!1;var w=null;if(v["font-scale"]&&!(w=r.parse(v["font-scale"],1,Me)))return null;var T=null;if(v["text-font"]&&!(T=r.parse(v["text-font"],1,cr(lt))))return null;var A=null;if(v["text-color"]&&!(A=r.parse(v["text-color"],1,it)))return null;var P=u[u.length-1];P.scale=w,P.font=T,P.textColor=A}else{var M=r.parse(e[m],1,at);if(!M)return null;var O=M.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,u.push({content:M,scale:null,font:null,textColor:null})}}return new ao(u)},ao.prototype.evaluate=function(e){return new Cn(this.sections.map(function(r){var i=r.content.evaluate(e);return Yr(i)===Zt?new Qs("",i,null,null,null):new Qs(tl(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))},ao.prototype.eachChild=function(e){for(var r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e.push(u.content.serialize());var h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),e.push(h)}return e};var Li=function(e){this.type=Zt,this.input=e};Li.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var i=r.parse(e[1],1,lt);return i?new Li(i):r.error("No image name provided.")},Li.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=li.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i},Li.prototype.eachChild=function(e){e(this.input)},Li.prototype.outputDefined=function(){return!1},Li.prototype.serialize=function(){return["image",this.input.serialize()]};var dh={"to-boolean":tt,"to-color":it,"to-number":Me,"to-string":lt},ji=function(e,r){this.type=e,this.args=r};ji.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var u=dh[i],h=[],m=1;m<e.length;m++){var v=r.parse(e[m],m,at);if(!v)return null;h.push(v)}return new ji(u,h)},ji.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var r,i,u=0,h=this.args;u<h.length;u+=1){if(i=null,(r=h[u].evaluate(e))instanceof pr)return r;if(typeof r=="string"){var m=e.parseColor(r);if(m)return m}else if(Array.isArray(r)&&!(i=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":Pc(r[0],r[1],r[2],r[3])))return new pr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new An(i||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var v=null,w=0,T=this.args;w<T.length;w+=1){if((v=T[w].evaluate(e))===null)return 0;var A=Number(v);if(!isNaN(A))return A}throw new An("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Cn.fromString(tl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?li.fromString(tl(this.args[0].evaluate(e))):tl(this.args[0].evaluate(e))},ji.prototype.eachChild=function(e){this.args.forEach(e)},ji.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ji.prototype.serialize=function(){if(this.type.kind==="formatted")return new ao([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Li(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var em=["Unknown","Point","LineString","Polygon"],Bo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Bo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Bo.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?em[this.feature.type]:this.feature.type:null},Bo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Bo.prototype.canonicalID=function(){return this.canonical},Bo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Bo.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=pr.parse(e)),r};var On=function(e,r,i,u){this.name=e,this.type=r,this._evaluate=i,this.args=u};On.prototype.evaluate=function(e){return this._evaluate(e,this.args)},On.prototype.eachChild=function(e){this.args.forEach(e)},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},On.parse=function(e,r){var i,u=e[0],h=On.definitions[u];if(!h)return r.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=v.filter(function(St){var st=St[0];return!Array.isArray(st)||st.length===e.length-1}),T=null,A=0,P=w;A<P.length;A+=1){var M=P[A],O=M[0],F=M[1];T=new Yo(r.registry,r.path,null,r.scope);for(var Z=[],G=!1,ie=1;ie<e.length;ie++){var Q=e[ie],he=Array.isArray(O)?O[ie-1]:O.type,ye=T.parse(Q,1+Z.length,he);if(!ye){G=!0;break}Z.push(ye)}if(!G)if(Array.isArray(O)&&O.length!==Z.length)T.error("Expected "+O.length+" arguments, but found "+Z.length+" instead.");else{for(var we=0;we<Z.length;we++){var Se=Array.isArray(O)?O[we]:O.type,De=Z[we];T.concat(we+1).checkSubtype(Se,De.type)}if(T.errors.length===0)return new On(u,m,F,Z)}}if(w.length===1)(i=r.errors).push.apply(i,T.errors);else{for(var Ze=(w.length?w:v).map(function(St){var st;return st=St[0],Array.isArray(st)?"("+st.map(Qt).join(", ")+")":"("+Qt(st.type)+"...)"}).join(" | "),Qe=[],xt=1;xt<e.length;xt++){var ot=r.parse(e[xt],1+Qe.length);if(!ot)return null;Qe.push(Qt(ot.type))}r.error("Expected arguments of type "+Ze+", but found ("+Qe.join(", ")+") instead.")}return null},On.register=function(e,r){for(var i in On.definitions=r,r)e[i]=On};var wo=function(e,r,i){this.type=Jt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r};function Yn(e,r){e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1])}function Ia(e,r){return!(e[0]<=r[0]||e[2]>=r[2]||e[1]<=r[1]||e[3]>=r[3])}function tm(e,r){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,r.z);return[Math.round(i*h*8192),Math.round(u*h*8192)]}function rm(e,r,i){return r[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-r[0])*(e[1]-r[1])/(i[1]-r[1])+r[0]}function Mc(e,r){for(var i,u,h,m,v,w,T,A=!1,P=0,M=r.length;P<M;P++)for(var O=r[P],F=0,Z=O.length;F<Z-1;F++){if((m=(i=e)[0]-(u=O[F])[0])*(T=i[1]-(h=O[F+1])[1])-(w=i[0]-h[0])*(v=i[1]-u[1])==0&&m*w<=0&&v*T<=0)return!1;rm(e,O[F],O[F+1])&&(A=!A)}return A}function nm(e,r){for(var i=0;i<r.length;i++)if(Mc(e,r[i]))return!0;return!1}function mh(e,r,i,u){var h=u[0]-i[0],m=u[1]-i[1],v=(e[0]-i[0])*m-h*(e[1]-i[1]),w=(r[0]-i[0])*m-h*(r[1]-i[1]);return v>0&&w<0||v<0&&w>0}function im(e,r,i){for(var u=0,h=i;u<h.length;u+=1)for(var m=h[u],v=0;v<m.length-1;++v)if((M=[(P=m[v+1])[0]-(A=m[v])[0],P[1]-A[1]])[0]*(O=[(T=r)[0]-(w=e)[0],T[1]-w[1]])[1]-M[1]*O[0]!=0&&mh(w,T,A,P)&&mh(A,P,w,T))return!0;var w,T,A,P,M,O;return!1}function gh(e,r){for(var i=0;i<e.length;++i)if(!Mc(e[i],r))return!1;for(var u=0;u<e.length-1;++u)if(im(e[u],e[u+1],r))return!1;return!0}function yh(e,r){for(var i=0;i<r.length;i++)if(gh(e,r[i]))return!0;return!1}function ps(e,r,i){for(var u=[],h=0;h<e.length;h++){for(var m=[],v=0;v<e[h].length;v++){var w=tm(e[h][v],i);Yn(r,w),m.push(w)}u.push(m)}return u}function zc(e,r,i){for(var u=[],h=0;h<e.length;h++){var m=ps(e[h],r,i);u.push(m)}return u}function rl(e,r,i,u){if(e[0]<i[0]||e[0]>i[2]){var h=.5*u,m=e[0]-i[0]>h?-u:i[0]-e[0]>h?u:0;m===0&&(m=e[0]-i[2]>h?-u:i[2]-e[0]>h?u:0),e[0]+=m}Yn(r,e)}function vh(e,r,i,u){for(var h=8192*Math.pow(2,u.z),m=[8192*u.x,8192*u.y],v=[],w=0,T=e;w<T.length;w+=1)for(var A=0,P=T[w];A<P.length;A+=1){var M=P[A],O=[M.x+m[0],M.y+m[1]];rl(O,r,i,h),v.push(O)}return v}function ou(e,r,i,u){for(var h,m=8192*Math.pow(2,u.z),v=[8192*u.x,8192*u.y],w=[],T=0,A=e;T<A.length;T+=1){for(var P=[],M=0,O=A[T];M<O.length;M+=1){var F=O[M],Z=[F.x+v[0],F.y+v[1]];Yn(r,Z),P.push(Z)}w.push(P)}if(r[2]-r[0]<=m/2){(h=r)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var G=0,ie=w;G<ie.length;G+=1)for(var Q=0,he=ie[G];Q<he.length;Q+=1)rl(he[Q],r,i,m)}return w}wo.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");var u=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,tt);if(!u)return null;var h=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,tt);if(!h)return null;var m=null;return i.locale&&!(m=r.parse(i.locale,1,lt))?null:new wo(u,h,m)},wo.prototype.evaluate=function(e){return new si(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},wo.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var qi=function(e,r){this.type=tt,this.geojson=e,this.geometries=r};function Ko(e){if(e instanceof On&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof qi)return!1;var r=!0;return e.eachChild(function(i){r&&!Ko(i)&&(r=!1)}),r}function Xo(e){if(e instanceof On&&e.name==="feature-state")return!1;var r=!0;return e.eachChild(function(i){r&&!Xo(i)&&(r=!1)}),r}function ka(e,r){if(e instanceof On&&r.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!ka(u,r)&&(i=!1)}),i}qi.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(el(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var h=i.features[u].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new qi(i,i.features[u].geometry)}else if(i.type==="Feature"){var m=i.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new qi(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new qi(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},qi.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(i.type==="Polygon"){var v=ps(i.coordinates,h,m),w=vh(r.geometry(),u,h,m);if(!Ia(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!Mc(A[T],v))return!1}if(i.type==="MultiPolygon"){var P=zc(i.coordinates,h,m),M=vh(r.geometry(),u,h,m);if(!Ia(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!nm(F[O],P))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(i.type==="Polygon"){var v=ps(i.coordinates,h,m),w=ou(r.geometry(),u,h,m);if(!Ia(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!gh(A[T],v))return!1}if(i.type==="MultiPolygon"){var P=zc(i.coordinates,h,m),M=ou(r.geometry(),u,h,m);if(!Ia(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!yh(F[O],P))return!1}return!0}(e,this.geometries)}return!1},qi.prototype.eachChild=function(){},qi.prototype.outputDefined=function(){return!0},qi.prototype.serialize=function(){return["within",this.geojson]};var Jo=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};Jo.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var i=e[1];return r.scope.has(i)?new Jo(i,r.scope.get(i)):r.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Jo.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Jo.prototype.eachChild=function(){},Jo.prototype.outputDefined=function(){return!1},Jo.prototype.serialize=function(){return["var",this.name]};var Yo=function(e,r,i,u,h){r===void 0&&(r=[]),u===void 0&&(u=new gt),h===void 0&&(h=[]),this.registry=e,this.path=r,this.key=r.map(function(m){return"["+m+"]"}).join(""),this.scope=u,this.errors=h,this.expectedType=i};function au(e,r){for(var i,u=e.length-1,h=0,m=u,v=0;h<=m;)if((i=e[v=Math.floor((h+m)/2)])<=r){if(v===u||r<e[v+1])return v;h=v+1}else{if(!(i>r))throw new An("Input is not a number.");m=v-1}return 0}Yo.prototype.parse=function(e,r,i,u,h){return h===void 0&&(h={}),r?this.concat(r,i,u)._parse(e,h):this._parse(e,h)},Yo.prototype._parse=function(e,r){function i(A,P,M){return M==="assert"?new Rr(P,[A]):M==="coerce"?new ji(P,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[u];if(h){var m=h.parse(e,this);if(!m)return null;if(this.expectedType){var v=this.expectedType,w=m.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||w.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(v,w))return null}else m=i(m,v,r.typeAnnotation||"coerce");else m=i(m,v,r.typeAnnotation||"assert")}if(!(m instanceof Jn)&&m.type.kind!=="resolvedImage"&&function A(P){if(P instanceof Jo)return A(P.boundExpression);if(P instanceof On&&P.name==="error"||P instanceof wo||P instanceof qi)return!1;var M=P instanceof ji||P instanceof Rr,O=!0;return P.eachChild(function(F){O=M?O&&A(F):O&&F instanceof Jn}),!!O&&Ko(P)&&ka(P,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(m)){var T=new Bo;try{m=new Jn(m.type,m.evaluate(T))}catch(A){return this.error(A.message),null}}return m}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Yo.prototype.concat=function(e,r,i){var u=typeof e=="number"?this.path.concat(e):this.path,h=i?this.scope.concat(i):this.scope;return new Yo(this.registry,u,r||null,h,this.errors)},Yo.prototype.error=function(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];var h=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Ve(h,e))},Yo.prototype.checkSubtype=function(e,r){var i=fr(e,r);return i&&this.error(i),i};var gi=function(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var u=0,h=i;u<h.length;u+=1){var m=h[u],v=m[1];this.labels.push(m[0]),this.outputs.push(v)}};function an(e,r,i){return e*(1-i)+r*i}gi.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=[],h=null;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);for(var m=1;m<e.length;m+=2){var v=m===1?-1/0:e[m],w=e[m+1],T=m,A=m+1;if(typeof v!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=v)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var P=r.parse(w,A,h);if(!P)return null;h=h||P.type,u.push([v,P])}return new gi(h,i,u)},gi.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;return u>=r[h-1]?i[h-1].evaluate(e):i[au(r,u)].evaluate(e)},gi.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},gi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},gi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var hs=Object.freeze({__proto__:null,number:an,color:function(e,r,i){return new pr(an(e.r,r.r,i),an(e.g,r.g,i),an(e.b,r.b,i),an(e.a,r.a,i))},array:function(e,r,i){return e.map(function(u,h){return an(u,r[h],i)})}}),_h=6/29*3*(6/29),om=Math.PI/180,am=180/Math.PI;function Lc(e){return e>.008856451679035631?Math.pow(e,1/3):e/_h+4/29}function Rc(e){return e>6/29?e*e*e:_h*(e-4/29)}function Oc(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Dc(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xh(e){var r=Dc(e.r),i=Dc(e.g),u=Dc(e.b),h=Lc((.4124564*r+.3575761*i+.1804375*u)/.95047),m=Lc((.2126729*r+.7151522*i+.072175*u)/1);return{l:116*m-16,a:500*(h-m),b:200*(m-Lc((.0193339*r+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function bh(e){var r=(e.l+16)/116,i=isNaN(e.a)?r:r+e.a/500,u=isNaN(e.b)?r:r-e.b/200;return r=1*Rc(r),i=.95047*Rc(i),u=1.08883*Rc(u),new pr(Oc(3.2404542*i-1.5371385*r-.4985314*u),Oc(-.969266*i+1.8760108*r+.041556*u),Oc(.0556434*i-.2040259*r+1.0572252*u),e.alpha)}function sm(e,r,i){var u=r-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var nl={forward:xh,reverse:bh,interpolate:function(e,r,i){return{l:an(e.l,r.l,i),a:an(e.a,r.a,i),b:an(e.b,r.b,i),alpha:an(e.alpha,r.alpha,i)}}},il={forward:function(e){var r=xh(e),i=r.l,u=r.a,h=r.b,m=Math.atan2(h,u)*am;return{h:m<0?m+360:m,c:Math.sqrt(u*u+h*h),l:i,alpha:e.a}},reverse:function(e){var r=e.h*om,i=e.c;return bh({l:e.l,a:Math.cos(r)*i,b:Math.sin(r)*i,alpha:e.alpha})},interpolate:function(e,r,i){return{h:sm(e.h,r.h,i),c:an(e.c,r.c,i),l:an(e.l,r.l,i),alpha:an(e.alpha,r.alpha,i)}}},wh=Object.freeze({__proto__:null,lab:nl,hcl:il}),Dn=function(e,r,i,u,h){this.type=e,this.operator=r,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var m=0,v=h;m<v.length;m+=1){var w=v[m],T=w[1];this.labels.push(w[0]),this.outputs.push(T)}};function Bc(e,r,i,u){var h=u-i,m=e-i;return h===0?0:r===1?m/h:(Math.pow(r,m)-1)/(Math.pow(r,h)-1)}Dn.interpolationFactor=function(e,r,i,u){var h=0;if(e.name==="exponential")h=Bc(r,e.base,i,u);else if(e.name==="linear")h=Bc(r,1,i,u);else if(e.name==="cubic-bezier"){var m=e.controlPoints;h=new Y(m[0],m[1],m[2],m[3]).solve(Bc(r,1,i,u))}return h},Dn.parse=function(e,r){var i=e[0],u=e[1],h=e[2],m=e.slice(3);if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var v=u[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:v}}else{if(u[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(u[0]),1,0);var w=u.slice(1);if(w.length!==4||w.some(function(ie){return typeof ie!="number"||ie<0||ie>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(h=r.parse(h,2,Me)))return null;var T=[],A=null;i==="interpolate-hcl"||i==="interpolate-lab"?A=it:r.expectedType&&r.expectedType.kind!=="value"&&(A=r.expectedType);for(var P=0;P<m.length;P+=2){var M=m[P],O=m[P+1],F=P+3,Z=P+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(T.length&&T[T.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);var G=r.parse(O,Z,A);if(!G)return null;A=A||G.type,T.push([M,G])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Dn(A,i,u,h,T):r.error("Type "+Qt(A)+" is not interpolatable.")},Dn.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;if(u>=r[h-1])return i[h-1].evaluate(e);var m=au(r,u),v=Dn.interpolationFactor(this.interpolation,u,r[m],r[m+1]),w=i[m].evaluate(e),T=i[m+1].evaluate(e);return this.operator==="interpolate"?hs[this.type.kind.toLowerCase()](w,T,v):this.operator==="interpolate-hcl"?il.reverse(il.interpolate(il.forward(w),il.forward(T),v)):nl.reverse(nl.interpolate(nl.forward(w),nl.forward(T),v))},Dn.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},Dn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Dn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r};var Qo=function(e,r){this.type=e,this.args=r};Qo.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var i=null,u=r.expectedType;u&&u.kind!=="value"&&(i=u);for(var h=[],m=0,v=e.slice(1);m<v.length;m+=1){var w=r.parse(v[m],1+h.length,i,void 0,{typeAnnotation:"omit"});if(!w)return null;i=i||w.type,h.push(w)}var T=u&&h.some(function(A){return fr(u,A.type)});return new Qo(T?at:i,h)},Qo.prototype.evaluate=function(e){for(var r,i=null,u=0,h=0,m=this.args;h<m.length&&(u++,(i=m[h].evaluate(e))&&i instanceof li&&!i.available&&(r||(r=i.name),i=null,u===this.args.length&&(i=r)),i===null);h+=1);return i},Qo.prototype.eachChild=function(e){this.args.forEach(e)},Qo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Qo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ea=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};ea.prototype.evaluate=function(e){return this.result.evaluate(e)},ea.prototype.eachChild=function(e){for(var r=0,i=this.bindings;r<i.length;r+=1)e(i[r][1]);e(this.result)},ea.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var h=e[u];if(typeof h!="string")return r.error("Expected string, but found "+typeof h+" instead.",u);if(/[^a-zA-Z0-9_]/.test(h))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);var m=r.parse(e[u+1],u+1);if(!m)return null;i.push([h,m])}var v=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return v?new ea(i,v):null},ea.prototype.outputDefined=function(){return this.result.outputDefined()},ea.prototype.serialize=function(){for(var e=["let"],r=0,i=this.bindings;r<i.length;r+=1){var u=i[r];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var Pa=function(e,r,i){this.type=e,this.index=r,this.input=i};Pa.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,Me),u=r.parse(e[2],2,cr(r.expectedType||at));return i&&u?new Pa(u.type.itemType,i,u):null},Pa.prototype.evaluate=function(e){var r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new An("Array index out of bounds: "+r+" < 0.");if(r>=i.length)throw new An("Array index out of bounds: "+r+" > "+(i.length-1)+".");if(r!==Math.floor(r))throw new An("Array index must be an integer, but found "+r+" instead.");return i[r]},Pa.prototype.eachChild=function(e){e(this.index),e(this.input)},Pa.prototype.outputDefined=function(){return!1},Pa.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ma=function(e,r){this.type=tt,this.needle=e,this.haystack=r};Ma.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);return i&&u?Jr(i.type,[tt,lt,Me,ht,at])?new Ma(i,u):r.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(i.type)+" instead"):null},Ma.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xr(r,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Yr(r))+" instead.");if(!xr(i,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+Qt(Yr(i))+" instead.");return i.indexOf(r)>=0},Ma.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Ma.prototype.outputDefined=function(){return!0},Ma.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ta=function(e,r,i){this.type=Me,this.needle=e,this.haystack=r,this.fromIndex=i};ta.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);if(!i||!u)return null;if(!Jr(i.type,[tt,lt,Me,ht,at]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new ta(i,u,h):null}return new ta(i,u)},ta.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xr(r,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Yr(r))+" instead.");if(!xr(i,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+Qt(Yr(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(r,u)}return i.indexOf(r)},ta.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var za=function(e,r,i,u,h,m){this.inputType=e,this.type=r,this.input=i,this.cases=u,this.outputs=h,this.otherwise=m};za.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return r.error("Expected an even number of arguments.");var i,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(var h={},m=[],v=2;v<e.length-1;v+=2){var w=e[v],T=e[v+1];Array.isArray(w)||(w=[w]);var A=r.concat(v);if(w.length===0)return A.error("Expected at least one branch label.");for(var P=0,M=w;P<M.length;P+=1){var O=M[P];if(typeof O!="number"&&typeof O!="string")return A.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof O=="number"&&Math.floor(O)!==O)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,Yr(O)))return null}else i=Yr(O);if(h[String(O)]!==void 0)return A.error("Branch labels must be unique.");h[String(O)]=m.length}var F=r.parse(T,v,u);if(!F)return null;u=u||F.type,m.push(F)}var Z=r.parse(e[1],1,at);if(!Z)return null;var G=r.parse(e[e.length-1],e.length-1,u);return G?Z.type.kind!=="value"&&r.concat(1).checkSubtype(i,Z.type)?null:new za(i,u,Z,h,m,G):null},za.prototype.evaluate=function(e){var r=this.input.evaluate(e);return(Yr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)},za.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},za.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},za.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],i=[],u={},h=0,m=Object.keys(this.cases).sort();h<m.length;h+=1){var v=m[h];(M=u[this.cases[v]])===void 0?(u[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[M][1].push(v)}for(var w=function(F){return e.inputType.kind==="number"?Number(F):F},T=0,A=i;T<A.length;T+=1){var P=A[T],M=P[0],O=P[1];r.push(O.length===1?w(O[0]):O.map(w)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var La=function(e,r,i){this.type=e,this.branches=r,this.otherwise=i};La.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var u=[],h=1;h<e.length-1;h+=2){var m=r.parse(e[h],h,tt);if(!m)return null;var v=r.parse(e[h+1],h+1,i);if(!v)return null;u.push([m,v]),i=i||v.type}var w=r.parse(e[e.length-1],e.length-1,i);return w?new La(i,u,w):null},La.prototype.evaluate=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];if(u[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},La.prototype.eachChild=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];e(u[0]),e(h)}e(this.otherwise)},La.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},La.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ra=function(e,r,i,u){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=u};function Eh(e,r){return e==="=="||e==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Sh(e,r,i,u){return u.compare(r,i)===0}function Er(e,r,i){var u=e!=="=="&&e!=="!=";return function(){function h(m,v,w){this.type=tt,this.lhs=m,this.rhs=v,this.collator=w,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}return h.parse=function(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");var w=m[0],T=v.parse(m[1],1,at);if(!T)return null;if(!Eh(w,T.type))return v.concat(1).error('"'+w+`" comparisons are not supported for type '`+Qt(T.type)+"'.");var A=v.parse(m[2],2,at);if(!A)return null;if(!Eh(w,A.type))return v.concat(2).error('"'+w+`" comparisons are not supported for type '`+Qt(A.type)+"'.");if(T.type.kind!==A.type.kind&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot compare types '"+Qt(T.type)+"' and '"+Qt(A.type)+"'.");u&&(T.type.kind==="value"&&A.type.kind!=="value"?T=new Rr(A.type,[T]):T.type.kind!=="value"&&A.type.kind==="value"&&(A=new Rr(T.type,[A])));var P=null;if(m.length===4){if(T.type.kind!=="string"&&A.type.kind!=="string"&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(P=v.parse(m[3],3,Jt)))return null}return new h(T,A,P)},h.prototype.evaluate=function(m){var v=this.lhs.evaluate(m),w=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){var T=Yr(v),A=Yr(w);if(T.kind!==A.kind||T.kind!=="string"&&T.kind!=="number")throw new An('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var P=Yr(v),M=Yr(w);if(P.kind!=="string"||M.kind!=="string")return r(m,v,w)}return this.collator?i(m,v,w,this.collator.evaluate(m)):r(m,v,w)},h.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var m=[e];return this.eachChild(function(v){m.push(v.serialize())}),m},h}()}ra.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,Me);if(!i||!u)return null;if(!Jr(i.type,[cr(at),lt,at]))return r.error("Expected first argument to be of type array or string, but found "+Qt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new ra(i.type,i,u,h):null}return new ra(i.type,i,u)},ra.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!xr(r,["string","array"]))throw new An("Expected first argument to be of type array or string, but found "+Qt(Yr(r))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return r.slice(i,u)}return r.slice(i)},ra.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var lm=Er("==",function(e,r,i){return r===i},Sh),su=Er("!=",function(e,r,i){return r!==i},function(e,r,i,u){return!Sh(0,r,i,u)}),Th=Er("<",function(e,r,i){return r<i},function(e,r,i,u){return u.compare(r,i)<0}),Ch=Er(">",function(e,r,i){return r>i},function(e,r,i,u){return u.compare(r,i)>0}),Ah=Er("<=",function(e,r,i){return r<=i},function(e,r,i,u){return u.compare(r,i)<=0}),Ih=Er(">=",function(e,r,i){return r>=i},function(e,r,i,u){return u.compare(r,i)>=0}),Ra=function(e,r,i,u,h){this.type=lt,this.number=e,this.locale=r,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=h};Ra.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");var h=null;if(u.locale&&!(h=r.parse(u.locale,1,lt)))return null;var m=null;if(u.currency&&!(m=r.parse(u.currency,1,lt)))return null;var v=null;if(u["min-fraction-digits"]&&!(v=r.parse(u["min-fraction-digits"],1,Me)))return null;var w=null;return u["max-fraction-digits"]&&!(w=r.parse(u["max-fraction-digits"],1,Me))?null:new Ra(i,h,m,v,w)},Ra.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Ra.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var na=function(e){this.type=Me,this.input=e};na.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+Qt(i.type)+" instead."):new na(i):null},na.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new An("Expected value to be of type string or array, but found "+Qt(Yr(r))+" instead.")},na.prototype.eachChild=function(e){e(this.input)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Oa={"==":lm,"!=":su,">":Ch,"<":Th,">=":Ih,"<=":Ah,array:Rr,at:Pa,boolean:Rr,case:La,coalesce:Qo,collator:wo,format:ao,image:Li,in:Ma,"index-of":ta,interpolate:Dn,"interpolate-hcl":Dn,"interpolate-lab":Dn,length:na,let:ea,literal:Jn,match:za,number:Rr,"number-format":Ra,object:Rr,slice:ra,step:gi,string:Rr,"to-boolean":ji,"to-color":ji,"to-number":ji,"to-string":ji,var:Jo,within:qi};function kh(e,r){var i=r[0],u=r[1],h=r[2],m=r[3];i=i.evaluate(e),u=u.evaluate(e),h=h.evaluate(e);var v=m?m.evaluate(e):1,w=Pc(i,u,h,v);if(w)throw new An(w);return new pr(i/255*v,u/255*v,h/255*v,v)}function Ph(e,r){return e in r}function Fc(e,r){var i=r[e];return i===void 0?null:i}function Da(e){return{type:e}}function Mh(e){return{result:"success",value:e}}function Ba(e){return{result:"error",value:e}}function Fa(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function zh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function ol(e){return!!e.expression&&e.expression.interpolated}function Ar(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function lu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function um(e){return e}function fs(e,r,i){return e!==void 0?e:r!==void 0?r:i!==void 0?i:void 0}function Lh(e,r,i,u,h){return fs(typeof i===h?u[i]:void 0,e.default,r.default)}function cm(e,r,i){if(Ar(i)!=="number")return fs(e.default,r.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var h=au(e.stops.map(function(m){return m[0]}),i);return e.stops[h][1]}function Rh(e,r,i){var u=e.base!==void 0?e.base:1;if(Ar(i)!=="number")return fs(e.default,r.default);var h=e.stops.length;if(h===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[h-1][0])return e.stops[h-1][1];var m=au(e.stops.map(function(M){return M[0]}),i),v=function(M,O,F,Z){var G=Z-F,ie=M-F;return G===0?0:O===1?ie/G:(Math.pow(O,ie)-1)/(Math.pow(O,G)-1)}(i,u,e.stops[m][0],e.stops[m+1][0]),w=e.stops[m][1],T=e.stops[m+1][1],A=hs[r.type]||um;if(e.colorSpace&&e.colorSpace!=="rgb"){var P=wh[e.colorSpace];A=function(M,O){return P.reverse(P.interpolate(P.forward(M),P.forward(O),v))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var M=arguments,O=[],F=arguments.length;F--;)O[F]=M[F];var Z=w.evaluate.apply(void 0,O),G=T.evaluate.apply(void 0,O);if(Z!==void 0&&G!==void 0)return A(Z,G,v)}}:A(w,T,v)}function uu(e,r,i){return r.type==="color"?i=pr.parse(i):r.type==="formatted"?i=Cn.fromString(i.toString()):r.type==="resolvedImage"?i=li.fromString(i.toString()):Ar(i)===r.type||r.type==="enum"&&r.values[i]||(i=void 0),fs(i,e.default,r.default)}On.register(Oa,{error:[{kind:"error"},[lt],function(e,r){throw new An(r[0].evaluate(e))}],typeof:[lt,[at],function(e,r){return Qt(Yr(r[0].evaluate(e)))}],"to-rgba":[cr(Me,4),[it],function(e,r){return r[0].evaluate(e).toArray()}],rgb:[it,[Me,Me,Me],kh],rgba:[it,[Me,Me,Me,Me],kh],has:{type:tt,overloads:[[[lt],function(e,r){return Ph(r[0].evaluate(e),e.properties())}],[[lt,Vt],function(e,r){var i=r[1];return Ph(r[0].evaluate(e),i.evaluate(e))}]]},get:{type:at,overloads:[[[lt],function(e,r){return Fc(r[0].evaluate(e),e.properties())}],[[lt,Vt],function(e,r){var i=r[1];return Fc(r[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[at,[lt],function(e,r){return Fc(r[0].evaluate(e),e.featureState||{})}],properties:[Vt,[],function(e){return e.properties()}],"geometry-type":[lt,[],function(e){return e.geometryType()}],id:[at,[],function(e){return e.id()}],zoom:[Me,[],function(e){return e.globals.zoom}],"heatmap-density":[Me,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Me,[],function(e){return e.globals.lineProgress||0}],accumulated:[at,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Me,Da(Me),function(e,r){for(var i=0,u=0,h=r;u<h.length;u+=1)i+=h[u].evaluate(e);return i}],"*":[Me,Da(Me),function(e,r){for(var i=1,u=0,h=r;u<h.length;u+=1)i*=h[u].evaluate(e);return i}],"-":{type:Me,overloads:[[[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)-i.evaluate(e)}],[[Me],function(e,r){return-r[0].evaluate(e)}]]},"/":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)/i.evaluate(e)}],"%":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)%i.evaluate(e)}],ln2:[Me,[],function(){return Math.LN2}],pi:[Me,[],function(){return Math.PI}],e:[Me,[],function(){return Math.E}],"^":[Me,[Me,Me],function(e,r){var i=r[1];return Math.pow(r[0].evaluate(e),i.evaluate(e))}],sqrt:[Me,[Me],function(e,r){return Math.sqrt(r[0].evaluate(e))}],log10:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN10}],ln:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))}],log2:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN2}],sin:[Me,[Me],function(e,r){return Math.sin(r[0].evaluate(e))}],cos:[Me,[Me],function(e,r){return Math.cos(r[0].evaluate(e))}],tan:[Me,[Me],function(e,r){return Math.tan(r[0].evaluate(e))}],asin:[Me,[Me],function(e,r){return Math.asin(r[0].evaluate(e))}],acos:[Me,[Me],function(e,r){return Math.acos(r[0].evaluate(e))}],atan:[Me,[Me],function(e,r){return Math.atan(r[0].evaluate(e))}],min:[Me,Da(Me),function(e,r){return Math.min.apply(Math,r.map(function(i){return i.evaluate(e)}))}],max:[Me,Da(Me),function(e,r){return Math.max.apply(Math,r.map(function(i){return i.evaluate(e)}))}],abs:[Me,[Me],function(e,r){return Math.abs(r[0].evaluate(e))}],round:[Me,[Me],function(e,r){var i=r[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Me,[Me],function(e,r){return Math.floor(r[0].evaluate(e))}],ceil:[Me,[Me],function(e,r){return Math.ceil(r[0].evaluate(e))}],"filter-==":[tt,[lt,at],function(e,r){var i=r[0],u=r[1];return e.properties()[i.value]===u.value}],"filter-id-==":[tt,[at],function(e,r){var i=r[0];return e.id()===i.value}],"filter-type-==":[tt,[lt],function(e,r){var i=r[0];return e.geometryType()===i.value}],"filter-<":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],m=u.value;return typeof h==typeof m&&h<m}],"filter-id-<":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<h}],"filter->":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],m=u.value;return typeof h==typeof m&&h>m}],"filter-id->":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>h}],"filter-<=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],m=u.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<=h}],"filter->=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],m=u.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>=h}],"filter-has":[tt,[at],function(e,r){return r[0].value in e.properties()}],"filter-has-id":[tt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[tt,[cr(lt)],function(e,r){return r[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[tt,[cr(at)],function(e,r){return r[0].value.indexOf(e.id())>=0}],"filter-in-small":[tt,[lt,cr(at)],function(e,r){var i=r[0];return r[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[tt,[lt,cr(at)],function(e,r){var i=r[0],u=r[1];return function(h,m,v,w){for(;v<=w;){var T=v+w>>1;if(m[T]===h)return!0;m[T]>h?w=T-1:v=T+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)&&i.evaluate(e)}],[Da(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)||i.evaluate(e)}],[Da(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[tt,[tt],function(e,r){return!r[0].evaluate(e)}],"is-supported-script":[tt,[lt],function(e,r){var i=e.globals&&e.globals.isSupportedScript;return!i||i(r[0].evaluate(e))}],upcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toUpperCase()}],downcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toLowerCase()}],concat:[lt,Da(at),function(e,r){return r.map(function(i){return tl(i.evaluate(e))}).join("")}],"resolved-locale":[lt,[Jt],function(e,r){return r[0].evaluate(e).resolvedLocale()}]});var ds=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Bo,this._defaultValue=r?function(i){return i.type==="color"&&lu(i.default)?new pr(0,0,0,0):i.type==="color"?pr.parse(i.default)||null:i.default===void 0?null:i.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function al(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Oa}function cu(e,r){var i=new Yo(Oa,[],r?function(h){var m={color:it,string:lt,number:Me,enum:lt,boolean:tt,formatted:wr,resolvedImage:Zt};return h.type==="array"?cr(m[h.value]||at,h.length):m[h.type]}(r):void 0),u=i.parse(e,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Mh(new ds(u,r)):Ba(i.errors)}ds.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,m){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)},ds.prototype.evaluate=function(e,r,i,u,h,m){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=m||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new An("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}};var sl=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Xo(r.expression)};sl.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,m)},sl.prototype.evaluate=function(e,r,i,u,h,m){return this._styleExpression.evaluate(e,r,i,u,h,m)};var ms=function(e,r,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Xo(r.expression),this.interpolationType=u};function Oh(e,r){if((e=cu(e,r)).result==="error")return e;var i=e.value.expression,u=Ko(i);if(!u&&!Fa(r))return Ba([new Ve("","data expressions not supported")]);var h=ka(i,["zoom"]);if(!h&&!zh(r))return Ba([new Ve("","zoom expressions not supported")]);var m=function v(w){var T=null;if(w instanceof ea)T=v(w.result);else if(w instanceof Qo)for(var A=0,P=w.args;A<P.length&&!(T=v(P[A]));A+=1);else(w instanceof gi||w instanceof Dn)&&w.input instanceof On&&w.input.name==="zoom"&&(T=w);return T instanceof Ve||w.eachChild(function(M){var O=v(M);O instanceof Ve?T=O:!T&&O?T=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&O&&T!==O&&(T=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return m||h?m instanceof Ve?Ba([m]):m instanceof Dn&&!ol(r)?Ba([new Ve("",'"interpolate" expressions cannot be used with this property')]):Mh(m?new ms(u?"camera":"composite",e.value,m.labels,m instanceof Dn?m.interpolation:void 0):new sl(u?"constant":"source",e.value)):Ba([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ms.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,m)},ms.prototype.evaluate=function(e,r,i,u,h,m){return this._styleExpression.evaluate(e,r,i,u,h,m)},ms.prototype.interpolationFactor=function(e,r,i){return this.interpolationType?Dn.interpolationFactor(this.interpolationType,e,r,i):0};var gs=function(e,r){this._parameters=e,this._specification=r,Ue(this,function i(u,h){var m,v,w,T=h.type==="color",A=u.stops&&typeof u.stops[0][0]=="object",P=A||!(A||u.property!==void 0),M=u.type||(ol(h)?"exponential":"interval");if(T&&((u=Ue({},u)).stops&&(u.stops=u.stops.map(function(ot){return[ot[0],pr.parse(ot[1])]})),u.default=pr.parse(u.default?u.default:h.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!wh[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(M==="exponential")m=Rh;else if(M==="interval")m=cm;else if(M==="categorical"){m=Lh,v=Object.create(null);for(var O=0,F=u.stops;O<F.length;O+=1){var Z=F[O];v[Z[0]]=Z[1]}w=typeof u.stops[0][0]}else{if(M!=="identity")throw new Error('Unknown function type "'+M+'"');m=uu}if(A){for(var G={},ie=[],Q=0;Q<u.stops.length;Q++){var he=u.stops[Q],ye=he[0].zoom;G[ye]===void 0&&(G[ye]={zoom:ye,type:u.type,property:u.property,default:u.default,stops:[]},ie.push(ye)),G[ye].stops.push([he[0].value,he[1]])}for(var we=[],Se=0,De=ie;Se<De.length;Se+=1){var Ze=De[Se];we.push([G[Ze].zoom,i(G[Ze],h)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Dn.interpolationFactor.bind(void 0,Qe),zoomStops:we.map(function(ot){return ot[0]}),evaluate:function(ot,St){var st=ot.zoom;return Rh({stops:we,base:u.base},h,st).evaluate(st,St)}}}if(P){var xt=M==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:xt,interpolationFactor:Dn.interpolationFactor.bind(void 0,xt),zoomStops:u.stops.map(function(ot){return ot[0]}),evaluate:function(ot){return m(u,h,ot.zoom,v,w)}}}return{kind:"source",evaluate:function(ot,St){var st=St&&St.properties?St.properties[u.property]:void 0;return st===void 0?fs(u.default,h.default):m(u,h,st,v,w)}}}(this._parameters,this._specification))};function so(e){var r=e.key,i=e.value,u=e.valueSpec||{},h=e.objectElementValidators||{},m=e.style,v=e.styleSpec,w=[],T=Ar(i);if(T!=="object")return[new J(r,i,"object expected, "+T+" found")];for(var A in i){var P=A.split(".")[0],M=u[P]||u["*"],O=void 0;if(h[P])O=h[P];else if(u[P])O=Yt;else if(h["*"])O=h["*"];else{if(!u["*"]){w.push(new J(r,i[A],'unknown property "'+A+'"'));continue}O=Yt}w=w.concat(O({key:(r&&r+".")+A,value:i[A],valueSpec:M,style:m,styleSpec:v,object:i,objectKey:A},i))}for(var F in u)h[F]||u[F].required&&u[F].default===void 0&&i[F]===void 0&&w.push(new J(r,i,'missing required property "'+F+'"'));return w}function Dh(e){var r=e.value,i=e.valueSpec,u=e.style,h=e.styleSpec,m=e.key,v=e.arrayElementValidator||Yt;if(Ar(r)!=="array")return[new J(m,r,"array expected, "+Ar(r)+" found")];if(i.length&&r.length!==i.length)return[new J(m,r,"array length "+i.length+" expected, length "+r.length+" found")];if(i["min-length"]&&r.length<i["min-length"])return[new J(m,r,"array length at least "+i["min-length"]+" expected, length "+r.length+" found")];var w={type:i.value,values:i.values};h.$version<7&&(w.function=i.function),Ar(i.value)==="object"&&(w=i.value);for(var T=[],A=0;A<r.length;A++)T=T.concat(v({array:r,arrayIndex:A,value:r[A],valueSpec:w,style:u,styleSpec:h,key:m+"["+A+"]"}));return T}function Bh(e){var r=e.key,i=e.value,u=e.valueSpec,h=Ar(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new J(r,i,"number expected, "+h+" found")]:"minimum"in u&&i<u.minimum?[new J(r,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new J(r,i,i+" is greater than the maximum value "+u.maximum)]:[]}function Fh(e){var r,i,u,h=e.valueSpec,m=$e(e.value.type),v={},w=m!=="categorical"&&e.value.property===void 0,T=!w,A=Ar(e.value.stops)==="array"&&Ar(e.value.stops[0])==="array"&&Ar(e.value.stops[0][0])==="object",P=so({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(F){if(m==="identity")return[new J(F.key,F.value,'identity function may not have a "stops" property')];var Z=[],G=F.value;return Z=Z.concat(Dh({key:F.key,value:G,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:M})),Ar(G)==="array"&&G.length===0&&Z.push(new J(F.key,G,"array must have at least one stop")),Z},default:function(F){return Yt({key:F.key,value:F.value,valueSpec:h,style:F.style,styleSpec:F.styleSpec})}}});return m==="identity"&&w&&P.push(new J(e.key,e.value,'missing required property "property"')),m==="identity"||e.value.stops||P.push(new J(e.key,e.value,'missing required property "stops"')),m==="exponential"&&e.valueSpec.expression&&!ol(e.valueSpec)&&P.push(new J(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!Fa(e.valueSpec)?P.push(new J(e.key,e.value,"property functions not supported")):w&&!zh(e.valueSpec)&&P.push(new J(e.key,e.value,"zoom functions not supported"))),m!=="categorical"&&!A||e.value.property!==void 0||P.push(new J(e.key,e.value,'"property" property is required')),P;function M(F){var Z=[],G=F.value,ie=F.key;if(Ar(G)!=="array")return[new J(ie,G,"array expected, "+Ar(G)+" found")];if(G.length!==2)return[new J(ie,G,"array length 2 expected, length "+G.length+" found")];if(A){if(Ar(G[0])!=="object")return[new J(ie,G,"object expected, "+Ar(G[0])+" found")];if(G[0].zoom===void 0)return[new J(ie,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new J(ie,G,"object stop key must have value")];if(u&&u>$e(G[0].zoom))return[new J(ie,G[0].zoom,"stop zoom values must appear in ascending order")];$e(G[0].zoom)!==u&&(u=$e(G[0].zoom),i=void 0,v={}),Z=Z.concat(so({key:ie+"[0]",value:G[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Bh,value:O}}))}else Z=Z.concat(O({key:ie+"[0]",value:G[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},G));return al(Pe(G[1]))?Z.concat([new J(ie+"[1]",G[1],"expressions are not allowed in function stops.")]):Z.concat(Yt({key:ie+"[1]",value:G[1],valueSpec:h,style:F.style,styleSpec:F.styleSpec}))}function O(F,Z){var G=Ar(F.value),ie=$e(F.value),Q=F.value!==null?F.value:Z;if(r){if(G!==r)return[new J(F.key,Q,G+" stop domain type must match previous stop domain type "+r)]}else r=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new J(F.key,Q,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&m!=="categorical"){var he="number expected, "+G+" found";return Fa(h)&&m===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new J(F.key,Q,he)]}return m!=="categorical"||G!=="number"||isFinite(ie)&&Math.floor(ie)===ie?m!=="categorical"&&G==="number"&&i!==void 0&&ie<i?[new J(F.key,Q,"stop domain values must appear in ascending order")]:(i=ie,m==="categorical"&&ie in v?[new J(F.key,Q,"stop domain values must be unique")]:(v[ie]=!0,[])):[new J(F.key,Q,"integer expected, found "+ie)]}}function Na(e){var r=(e.expressionContext==="property"?Oh:cu)(Pe(e.value),e.valueSpec);if(r.result==="error")return r.value.map(function(u){return new J(""+e.key+u.key,e.value,u.message)});var i=r.value.expression||r.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new J(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Xo(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Xo(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!ka(i,["zoom","feature-state"]))return[new J(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ko(i))return[new J(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ll(e){var r=e.key,i=e.value,u=e.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf($e(i))===-1&&h.push(new J(r,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf($e(i))===-1&&h.push(new J(r,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),h}function pu(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var r=0,i=e.slice(1);r<i.length;r+=1){var u=i[r];if(!pu(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}gs.deserialize=function(e){return new gs(e._parameters,e._specification)},gs.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Nc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hu(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};pu(e)||(e=fu(e));var r=cu(e,Nc);if(r.result==="error")throw new Error(r.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,h){return r.value.evaluate(i,u,{},h)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var h=1;h<u.length;h++)if(i(u[h]))return!0;return!1}(e)}}function pm(e,r){return e<r?-1:e>r?1:0}function fu(e){if(!e)return!0;var r,i=e[0];return e.length<=1?i!=="any":i==="=="?Uc(e[1],e[2],"=="):i==="!="?du(Uc(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Uc(e[1],e[2],i):i==="any"?(r=e.slice(1),["any"].concat(r.map(fu))):i==="all"?["all"].concat(e.slice(1).map(fu)):i==="none"?["all"].concat(e.slice(1).map(fu).map(du)):i==="in"?Nh(e[1],e.slice(2)):i==="!in"?du(Nh(e[1],e.slice(2))):i==="has"?Uh(e[1]):i==="!has"?du(Uh(e[1])):i!=="within"||e}function Uc(e,r,i){switch(e){case"$type":return["filter-type-"+i,r];case"$id":return["filter-id-"+i,r];default:return["filter-"+i,e,r]}}function Nh(e,r){if(r.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(i){return typeof i!=typeof r[0]})?["filter-in-large",e,["literal",r.sort(pm)]]:["filter-in-small",e,["literal",r]]}}function Uh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function du(e){return["!",e]}function Vc(e){return pu(Pe(e.value))?Na(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(i){var u=i.value,h=i.key;if(Ar(u)!=="array")return[new J(h,u,"array expected, "+Ar(u)+" found")];var m,v=i.styleSpec,w=[];if(u.length<1)return[new J(h,u,"filter array must have at least 1 element")];switch(w=w.concat(ll({key:h+"[0]",value:u[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),$e(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&$e(u[1])==="$type"&&w.push(new J(h,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&w.push(new J(h,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(m=Ar(u[1]))!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+m+" found"));for(var T=2;T<u.length;T++)m=Ar(u[T]),$e(u[1])==="$type"?w=w.concat(ll({key:h+"["+T+"]",value:u[T],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&w.push(new J(h+"["+T+"]",u[T],"string, number, or boolean expected, "+m+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)w=w.concat(r({key:h+"["+A+"]",value:u[A],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":m=Ar(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+m+" found"));break;case"within":m=Ar(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):m!=="object"&&w.push(new J(h+"[1]",u[1],"object expected, "+m+" found"))}return w}(e)}function jc(e,r){var i=e.key,u=e.style,h=e.styleSpec,m=e.value,v=e.objectKey,w=h[r+"_"+e.layerType];if(!w)return[];var T=v.match(/^(.*)-transition$/);if(r==="paint"&&T&&w[T[1]]&&w[T[1]].transition)return Yt({key:i,value:m,valueSpec:h.transition,style:u,styleSpec:h});var A,P=e.valueSpec||w[v];if(!P)return[new J(i,m,'unknown property "'+v+'"')];if(Ar(m)==="string"&&Fa(P)&&!P.tokens&&(A=/^{([^}]+)}$/.exec(m)))return[new J(i,m,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var M=[];return e.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&M.push(new J(i,m,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&lu(Pe(m))&&$e(m.type)==="identity"&&M.push(new J(i,m,'"text-font" does not support identity functions'))),M.concat(Yt({key:e.key,value:m,valueSpec:P,style:u,styleSpec:h,expressionContext:"property",propertyType:r,propertyKey:v}))}function qc(e){return jc(e,"paint")}function ul(e){return jc(e,"layout")}function Vh(e){var r=[],i=e.value,u=e.key,h=e.style,m=e.styleSpec;i.type||i.ref||r.push(new J(u,i,'either "type" or "ref" is required'));var v,w=$e(i.type),T=$e(i.ref);if(i.id)for(var A=$e(i.id),P=0;P<e.arrayIndex;P++){var M=h.layers[P];$e(M.id)===A&&r.push(new J(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+M.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(Z){Z in i&&r.push(new J(u,i[Z],'"'+Z+'" is prohibited for ref layers'))}),h.layers.forEach(function(Z){$e(Z.id)===T&&(v=Z)}),v?v.ref?r.push(new J(u,i.ref,"ref cannot reference another ref layer")):w=$e(v.type):r.push(new J(u,i.ref,'ref layer "'+T+'" not found'));else if(w!=="background")if(i.source){var O=h.sources&&h.sources[i.source],F=O&&$e(O.type);O?F==="vector"&&w==="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a raster source')):F==="raster"&&w!=="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a vector source')):F!=="vector"||i["source-layer"]?F==="raster-dem"&&w!=="hillshade"?r.push(new J(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!i.paint||!i.paint["line-gradient"]||F==="geojson"&&O.lineMetrics||r.push(new J(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new J(u,i,'layer "'+i.id+'" must specify a "source-layer"')):r.push(new J(u,i.source,'source "'+i.source+'" not found'))}else r.push(new J(u,i,'missing required property "source"'));return r=r.concat(so({key:u,value:i,valueSpec:m.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Yt({key:u+".type",value:i.type,valueSpec:m.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Vc,layout:function(Z){return so({layer:i,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":function(G){return ul(Ue({layerType:w},G))}}})},paint:function(Z){return so({layer:i,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{"*":function(G){return qc(Ue({layerType:w},G))}}})}}}))}function Ua(e){var r=e.value,i=e.key,u=Ar(r);return u!=="string"?[new J(i,r,"string expected, "+u+" found")]:[]}var Or={promoteId:function(e){var r=e.key,i=e.value;if(Ar(i)==="string")return Ua({key:r,value:i});var u=[];for(var h in i)u.push.apply(u,Ua({key:r+"."+h,value:i[h]}));return u}};function mu(e){var r=e.value,i=e.key,u=e.styleSpec,h=e.style;if(!r.type)return[new J(i,r,'"type" is required')];var m,v=$e(r.type);switch(v){case"vector":case"raster":case"raster-dem":return so({key:i,value:r,valueSpec:u["source_"+v.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Or});case"geojson":if(m=so({key:i,value:r,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Or}),r.cluster)for(var w in r.clusterProperties){var T=r.clusterProperties[w],A=T[0],P=typeof A=="string"?[A,["accumulated"],["get",w]]:A;m.push.apply(m,Na({key:i+"."+w+".map",value:T[1],expressionContext:"cluster-map"})),m.push.apply(m,Na({key:i+"."+w+".reduce",value:P,expressionContext:"cluster-reduce"}))}return m;case"video":return so({key:i,value:r,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return so({key:i,value:r,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new J(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ll({key:i+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:u})}}function Va(e){var r=e.value,i=e.styleSpec,u=i.light,h=e.style,m=[],v=Ar(r);if(r===void 0)return m;if(v!=="object")return m.concat([new J("light",r,"object expected, "+v+" found")]);for(var w in r){var T=w.match(/^(.*)-transition$/);m=m.concat(T&&u[T[1]]&&u[T[1]].transition?Yt({key:w,value:r[w],valueSpec:i.transition,style:h,styleSpec:i}):u[w]?Yt({key:w,value:r[w],valueSpec:u[w],style:h,styleSpec:i}):[new J(w,r[w],'unknown property "'+w+'"')])}return m}var ia={"*":function(){return[]},array:Dh,boolean:function(e){var r=e.value,i=e.key,u=Ar(r);return u!=="boolean"?[new J(i,r,"boolean expected, "+u+" found")]:[]},number:Bh,color:function(e){var r=e.key,i=e.value,u=Ar(i);return u!=="string"?[new J(r,i,"color expected, "+u+" found")]:Xt(i)===null?[new J(r,i,'color expected, "'+i+'" found')]:[]},constants:ge,enum:ll,filter:Vc,function:Fh,layer:Vh,object:so,source:mu,light:Va,string:Ua,formatted:function(e){return Ua(e).length===0?[]:Na(e)},resolvedImage:function(e){return Ua(e).length===0?[]:Na(e)}};function Yt(e){var r=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&lu($e(r))?Fh(e):i.expression&&al(Pe(r))?Na(e):i.type&&ia[i.type]?ia[i.type](e):so(Ue({},e,{valueSpec:i.type?u[i.type]:i}))}function Ir(e){var r=e.value,i=e.key,u=Ua(e);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{range}" token'))),u}function Ri(e,r){r===void 0&&(r=V);var i=[];return i=i.concat(Yt({key:"",value:e,valueSpec:r.$root,styleSpec:r,style:e,objectElementValidators:{glyphs:Ir,"*":function(){return[]}}})),e.constants&&(i=i.concat(ge({key:"constants",value:e.constants,style:e,styleSpec:r}))),cl(i)}function cl(e){return[].concat(e).sort(function(r,i){return r.line-i.line})}function ys(e){return function(){for(var r=arguments,i=[],u=arguments.length;u--;)i[u]=r[u];return cl(e.apply(this,i))}}Ri.source=ys(mu),Ri.light=ys(Va),Ri.layer=ys(Vh),Ri.filter=ys(Vc),Ri.paintProperty=ys(qc),Ri.layoutProperty=ys(ul);var pl=Ri,hm=pl.light,fm=pl.paintProperty,hl=pl.layoutProperty;function fl(e,r){var i=!1;if(r&&r.length)for(var u=0,h=r;u<h.length;u+=1)e.fire(new ae(new Error(h[u].message))),i=!0;return i}var Fo=fn;function fn(e,r,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(r=h[1])+2*(i=h[2]);for(var m=0;m<this.d*this.d;m++){var v=h[3+m],w=h[3+m+1];u.push(v===w?null:h.subarray(v,w))}var T=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],T),this.bboxes=h.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*i;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=i,this.scale=r/e,this.uid=0;var P=i/r*e;this.min=-P,this.max=e+P}fn.prototype.insert=function(e,r,i,u,h){this._forEachCell(r,i,u,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(h)},fn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},fn.prototype._insertCell=function(e,r,i,u,h,m){this.cells[h].push(m)},fn.prototype.query=function(e,r,i,u,h){var m=this.min,v=this.max;if(e<=m&&r<=m&&v<=i&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,r,i,u,this._queryCell,w,{},h),w},fn.prototype._queryCell=function(e,r,i,u,h,m,v,w){var T=this.cells[h];if(T!==null)for(var A=this.keys,P=this.bboxes,M=0;M<T.length;M++){var O=T[M];if(v[O]===void 0){var F=4*O;(w?w(P[F+0],P[F+1],P[F+2],P[F+3]):e<=P[F+2]&&r<=P[F+3]&&i>=P[F+0]&&u>=P[F+1])?(v[O]=!0,m.push(A[O])):v[O]=!1}}},fn.prototype._forEachCell=function(e,r,i,u,h,m,v,w){for(var T=this._convertToCellCoord(e),A=this._convertToCellCoord(r),P=this._convertToCellCoord(i),M=this._convertToCellCoord(u),O=T;O<=P;O++)for(var F=A;F<=M;F++){var Z=this.d*F+O;if((!w||w(this._convertFromCellCoord(O),this._convertFromCellCoord(F),this._convertFromCellCoord(O+1),this._convertFromCellCoord(F+1)))&&h.call(this,e,r,i,u,Z,m,v,w))return}},fn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},fn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},fn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,r=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var h=new Int32Array(r+i+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var m=r,v=0;v<e.length;v++){var w=e[v];h[3+v]=m,h.set(w,m),m+=w.length}return h[3+e.length]=m,h.set(this.keys,m),h[3+e.length+1]=m+=this.keys.length,h.set(this.bboxes,m),m+=this.bboxes.length,h.buffer};var dl=xe.ImageData,jh=xe.ImageBitmap,sn={};function ft(e,r,i){i===void 0&&(i={}),Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),sn[e]={klass:r,omit:i.omit||[],shallow:i.shallow||[]}}for(var yi in ft("Object",Object),Fo.serialize=function(e,r){var i=e.toArrayBuffer();return r&&r.push(i),{buffer:i}},Fo.deserialize=function(e){return new Fo(e.buffer)},ft("Grid",Fo),ft("Color",pr),ft("Error",Error),ft("ResolvedImage",li),ft("StylePropertyFunction",gs),ft("StyleExpression",ds,{omit:["_evaluator"]}),ft("ZoomDependentExpression",ms),ft("ZoomConstantExpression",sl),ft("CompoundExpression",On,{omit:["_evaluate"]}),Oa)Oa[yi]._classRegistryKey||ft("Expression_"+yi,Oa[yi]);function gu(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function vs(e){return jh&&e instanceof jh}function lo(e,r){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(gu(e)||vs(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return r&&r.push(i.buffer),i}if(e instanceof dl)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],h=0,m=e;h<m.length;h+=1)u.push(lo(m[h],r));return u}if(typeof e=="object"){var v=e.constructor,w=v._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var T=v.serialize?v.serialize(e,r):{};if(!v.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(sn[w].omit.indexOf(A)>=0)){var P=e[A];T[A]=sn[w].shallow.indexOf(A)>=0?P:lo(P,r)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(T.$name=w),T}throw new Error("can't serialize object of type "+typeof e)}function vi(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||gu(e)||vs(e)||ArrayBuffer.isView(e)||e instanceof dl)return e;if(Array.isArray(e))return e.map(vi);if(typeof e=="object"){var r=e.$name||"Object",i=sn[r].klass;if(!i)throw new Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),h=0,m=Object.keys(e);h<m.length;h+=1){var v=m[h];if(v!=="$name"){var w=e[v];u[v]=sn[r].shallow.indexOf(v)>=0?w:vi(w)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Hc=function(){this.first=!0};Hc.prototype.update=function(e,r){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function $c(e){for(var r=0,i=e;r<i.length;r+=1)if(yu(i[r].charCodeAt(0)))return!0;return!1}function yu(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function Zc(e){return!(yu(e)||function(r){return!!(rt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||rt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||rt["Letterlike Symbols"](r)||rt["Number Forms"](r)||rt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||rt["Control Pictures"](r)&&r!==9251||rt["Optical Character Recognition"](r)||rt["Enclosed Alphanumerics"](r)||rt["Geometric Shapes"](r)||rt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||rt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||rt["CJK Symbols and Punctuation"](r)||rt.Katakana(r)||rt["Private Use Area"](r)||rt["CJK Compatibility Forms"](r)||rt["Small Form Variants"](r)||rt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(e))}function Hi(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function _i(e,r){return!(!r&&Hi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function vu(e){for(var r=0,i=e;r<i.length;r+=1)if(Hi(i[r].charCodeAt(0)))return!0;return!1}var _u=null,xi="unavailable",No=null,qh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(xi="error"),_u&&_u(e)};function ml(){Gc.fire(new K("pluginStateChange",{pluginStatus:xi,pluginURL:No}))}var Gc=new ce,Wc=function(){return xi},uo=function(){if(xi!=="deferred"||!No)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xi="loading",ml(),No&&Ys({url:No},function(e){e?qh(e):(xi="loaded",ml())})},Oi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xi==="loaded"||Oi.applyArabicShaping!=null},isLoading:function(){return xi==="loading"},setState:function(e){xi=e.pluginStatus,No=e.pluginURL},isParsed:function(){return Oi.applyArabicShaping!=null&&Oi.processBidirectionalText!=null&&Oi.processStyledBidirectionalText!=null},getPluginURL:function(){return No}},Gt=function(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hc,this.transition={})};Gt.prototype.isSupportedScript=function(e){return function(r,i){for(var u=0,h=r;u<h.length;u+=1)if(!_i(h[u].charCodeAt(0),i))return!1;return!0}(e,Oi.isLoaded())},Gt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Gt.prototype.getCrossfadeParameters=function(){var e=this.zoom,r=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*r}};var Eo=function(e,r){this.property=e,this.value=r,this.expression=function(i,u){if(lu(i))return new gs(i,u);if(al(i)){var h=Oh(i,u);if(h.result==="error")throw new Error(h.value.map(function(v){return v.key+": "+v.message}).join(", "));return h.value}var m=i;return typeof i=="string"&&u.type==="color"&&(m=pr.parse(i)),{kind:"constant",evaluate:function(){return m}}}(r===void 0?e.specification.default:r,e.specification)};Eo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Eo.prototype.possiblyEvaluate=function(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)};var $i=function(e){this.property=e,this.value=new Eo(e,void 0)};$i.prototype.transitioned=function(e,r){return new ja(this.property,this.value,r,Dt({},e.transition,this.transition),e.now)},$i.prototype.untransitioned=function(){return new ja(this.property,this.value,null,{},0)};var Bn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Bn.prototype.getValue=function(e){return Ln(this._values[e].value.value)},Bn.prototype.setValue=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new $i(this._values[e].property)),this._values[e].value=new Eo(this._values[e].property,r===null?void 0:Ln(r))},Bn.prototype.getTransition=function(e){return Ln(this._values[e].transition)},Bn.prototype.setTransition=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new $i(this._values[e].property)),this._values[e].transition=Ln(r)||void 0},Bn.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h);var m=this.getTransition(u);m!==void 0&&(e[u+"-transition"]=m)}return e},Bn.prototype.transitioned=function(e,r){for(var i=new oa(this._properties),u=0,h=Object.keys(this._values);u<h.length;u+=1){var m=h[u];i._values[m]=this._values[m].transitioned(e,r._values[m])}return i},Bn.prototype.untransitioned=function(){for(var e=new oa(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r];e._values[u]=this._values[u].untransitioned()}return e};var ja=function(e,r,i,u,h){this.property=e,this.value=r,this.begin=h+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};ja.prototype.possiblyEvaluate=function(e,r,i){var u=e.now||0,h=this.value.possiblyEvaluate(e,r,i),m=this.prior;if(m){if(u>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(u<this.begin)return m.possiblyEvaluate(e,r,i);var v=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,r,i),h,function(w){if(w<=0)return 0;if(w>=1)return 1;var T=w*w,A=T*w;return 4*(w<.5?A:3*(w-T)+A-.75)}(v))}return h};var oa=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};oa.prototype.possiblyEvaluate=function(e,r,i){for(var u=new gl(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var v=m[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u},oa.prototype.hasTransition=function(){for(var e=0,r=Object.keys(this._values);e<r.length;e+=1)if(this._values[r[e]].prior)return!0;return!1};var co=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};co.prototype.getValue=function(e){return Ln(this._values[e].value)},co.prototype.setValue=function(e,r){this._values[e]=new Eo(this._values[e].property,r===null?void 0:Ln(r))},co.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h)}return e},co.prototype.possiblyEvaluate=function(e,r,i){for(var u=new gl(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var v=m[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u};var Qn=function(e,r,i){this.property=e,this.value=r,this.parameters=i};Qn.prototype.isConstant=function(){return this.value.kind==="constant"},Qn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Qn.prototype.evaluate=function(e,r,i,u){return this.property.evaluate(this.value,this.parameters,e,r,i,u)};var gl=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};gl.prototype.get=function(e){return this._values[e]};var wt=function(e){this.specification=e};wt.prototype.possiblyEvaluate=function(e,r){return e.expression.evaluate(r)},wt.prototype.interpolate=function(e,r,i){var u=hs[this.specification.type];return u?u(e,r,i):e};var yt=function(e,r){this.specification=e,this.overrides=r};yt.prototype.possiblyEvaluate=function(e,r,i,u){return new Qn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,u)}:e.expression,r)},yt.prototype.interpolate=function(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Qn(this,{kind:"constant",value:void 0},e.parameters);var u=hs[this.specification.type];return u?new Qn(this,{kind:"constant",value:u(e.value.value,r.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,r,i,u,h,m){return e.kind==="constant"?e.value:e.evaluate(r,i,u,h,m)};var xu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u,h,m){if(i.value===void 0)return new Qn(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var v=i.expression.evaluate(u,null,{},h,m),w=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(w,w,w,u);return new Qn(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){var A=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new Qn(this,{kind:"constant",value:A},u)}return new Qn(this,i.expression,u)},r.prototype.evaluate=function(i,u,h,m,v,w){if(i.kind==="source"){var T=i.evaluate(u,h,m,v,w);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},h,m),i.evaluate({zoom:Math.floor(u.zoom)},h,m),i.evaluate({zoom:Math.floor(u.zoom)+1},h,m),u):i.value},r.prototype._calculate=function(i,u,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:h,to:u}},r.prototype.interpolate=function(i){return i},r}(yt),ei=function(e){this.specification=e};ei.prototype.possiblyEvaluate=function(e,r,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(r,null,{},i,u);return this._calculate(h,h,h,r)}return this._calculate(e.expression.evaluate(new Gt(Math.floor(r.zoom-1),r)),e.expression.evaluate(new Gt(Math.floor(r.zoom),r)),e.expression.evaluate(new Gt(Math.floor(r.zoom+1),r)),r)}},ei.prototype._calculate=function(e,r,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:i,to:r}},ei.prototype.interpolate=function(e){return e};var po=function(e){this.specification=e};po.prototype.possiblyEvaluate=function(e,r,i,u){return!!e.expression.evaluate(r,null,{},i,u)},po.prototype.interpolate=function(){return!1};var Fn=function(e){for(var r in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[r];i.specification.overridable&&this.overridableProperties.push(r);var u=this.defaultPropertyValues[r]=new Eo(i,void 0),h=this.defaultTransitionablePropertyValues[r]=new $i(i);this.defaultTransitioningPropertyValues[r]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=u.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",wt),ft("CrossFadedDataDrivenProperty",xu),ft("CrossFadedProperty",ei),ft("ColorRampProperty",po);var So=function(e){function r(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new co(u.layout)),u.paint)){for(var h in this._transitionablePaint=new Bn(u.paint),i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(var m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new gl(u.paint)}}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},r.prototype.setLayoutProperty=function(i,u,h){h===void 0&&(h={}),u!=null&&this._validate(hl,"layers."+this.id+".layout."+i,i,u,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},r.prototype.getPaintProperty=function(i){return Ui(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},r.prototype.setPaintProperty=function(i,u,h){if(h===void 0&&(h={}),u!=null&&this._validate(fm,"layers."+this.id+".paint."+i,i,u,h))return!1;if(Ui(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var m=this._transitionablePaint._values[i],v=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var A=this._transitionablePaint._values[i].value;return A.isDataDriven()||w||v||this._handleOverridablePaintPropertyUpdate(i,T,A)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!1},r.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},r.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),on(i,function(u,h){return!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length)})},r.prototype._validate=function(i,u,h,m,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&fl(this,i.call(pl,{key:u,layerType:this.type,objectKey:h,value:m,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof Qn&&Fa(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},r}(ce),Kc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},bu=function(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},dr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function In(e,r){r===void 0&&(r=1);var i=0,u=0;return{members:e.map(function(h){var m=Kc[h.type].BYTES_PER_ELEMENT,v=i=Hh(i,Math.max(r,m)),w=h.components||1;return u=Math.max(u,m),i+=m*w,{name:h.name,type:h.type,components:w,offset:v}}),size:Hh(i,Math.max(u,r)),alignment:r}}function Hh(e,r){return Math.ceil(e/r)*r}dr.serialize=function(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},dr.deserialize=function(e){var r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},dr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},dr.prototype.clear=function(){this.length=0},dr.prototype.resize=function(e){this.reserve(e),this.length=e},dr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},dr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var qa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var m=2*i;return this.int16[m+0]=u,this.int16[m+1]=h,i},r}(dr);qa.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",qa);var Xc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,m)},r.prototype.emplace=function(i,u,h,m,v){var w=4*i;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=m,this.int16[w+3]=v,i},r}(dr);Xc.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",Xc);var Uo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,m,v,w)},r.prototype.emplace=function(i,u,h,m,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(dr);Uo.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",Uo);var bi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,m,v,w)},r.prototype.emplace=function(i,u,h,m,v,w,T){var A=4*i,P=8*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.uint8[P+4]=m,this.uint8[P+5]=v,this.uint8[P+6]=w,this.uint8[P+7]=T,i},r}(dr);bi.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",bi);var _s=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var m=2*i;return this.float32[m+0]=u,this.float32[m+1]=h,i},r}(dr);_s.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",_s);var To=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w,T,A,P,M){var O=this.length;return this.resize(O+1),this.emplace(O,i,u,h,m,v,w,T,A,P,M)},r.prototype.emplace=function(i,u,h,m,v,w,T,A,P,M,O){var F=10*i;return this.uint16[F+0]=u,this.uint16[F+1]=h,this.uint16[F+2]=m,this.uint16[F+3]=v,this.uint16[F+4]=w,this.uint16[F+5]=T,this.uint16[F+6]=A,this.uint16[F+7]=P,this.uint16[F+8]=M,this.uint16[F+9]=O,i},r}(dr);To.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",To);var wu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w,T,A,P,M,O,F){var Z=this.length;return this.resize(Z+1),this.emplace(Z,i,u,h,m,v,w,T,A,P,M,O,F)},r.prototype.emplace=function(i,u,h,m,v,w,T,A,P,M,O,F,Z){var G=12*i;return this.int16[G+0]=u,this.int16[G+1]=h,this.int16[G+2]=m,this.int16[G+3]=v,this.uint16[G+4]=w,this.uint16[G+5]=T,this.uint16[G+6]=A,this.uint16[G+7]=P,this.int16[G+8]=M,this.int16[G+9]=O,this.int16[G+10]=F,this.int16[G+11]=Z,i},r}(dr);wu.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",wu);var xs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,h)},r.prototype.emplace=function(i,u,h,m){var v=3*i;return this.float32[v+0]=u,this.float32[v+1]=h,this.float32[v+2]=m,i},r}(dr);xs.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",xs);var yl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},r}(dr);yl.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",yl);var Jc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w,T,A,P){var M=this.length;return this.resize(M+1),this.emplace(M,i,u,h,m,v,w,T,A,P)},r.prototype.emplace=function(i,u,h,m,v,w,T,A,P,M){var O=10*i,F=5*i;return this.int16[O+0]=u,this.int16[O+1]=h,this.int16[O+2]=m,this.int16[O+3]=v,this.int16[O+4]=w,this.int16[O+5]=T,this.uint32[F+3]=A,this.uint16[O+8]=P,this.uint16[O+9]=M,i},r}(dr);Jc.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",Jc);var bs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,m,v,w)},r.prototype.emplace=function(i,u,h,m,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(dr);bs.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",bs);var Ha=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v){var w=this.length;return this.resize(w+1),this.emplace(w,i,u,h,m,v)},r.prototype.emplace=function(i,u,h,m,v,w){var T=4*i,A=8*i;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=m,this.int16[A+6]=v,this.int16[A+7]=w,i},r}(dr);Ha.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Ha);var Yc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,m)},r.prototype.emplace=function(i,u,h,m,v){var w=12*i,T=3*i;return this.uint8[w+0]=u,this.uint8[w+1]=h,this.float32[T+1]=m,this.float32[T+2]=v,i},r}(dr);Yc.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Yc);var aa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,h)},r.prototype.emplace=function(i,u,h,m){var v=3*i;return this.uint16[v+0]=u,this.uint16[v+1]=h,this.uint16[v+2]=m,i},r}(dr);aa.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",aa);var sa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he)},r.prototype.emplace=function(i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he,ye){var we=24*i,Se=12*i,De=48*i;return this.int16[we+0]=u,this.int16[we+1]=h,this.uint16[we+2]=m,this.uint16[we+3]=v,this.uint32[Se+2]=w,this.uint32[Se+3]=T,this.uint32[Se+4]=A,this.uint16[we+10]=P,this.uint16[we+11]=M,this.uint16[we+12]=O,this.float32[Se+7]=F,this.float32[Se+8]=Z,this.uint8[De+36]=G,this.uint8[De+37]=ie,this.uint8[De+38]=Q,this.uint32[Se+10]=he,this.int16[we+22]=ye,i},r}(dr);sa.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",sa);var Eu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he,ye,we,Se,De,Ze,Qe,xt,ot,St,st,Ut){var Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he,ye,we,Se,De,Ze,Qe,xt,ot,St,st,Ut)},r.prototype.emplace=function(i,u,h,m,v,w,T,A,P,M,O,F,Z,G,ie,Q,he,ye,we,Se,De,Ze,Qe,xt,ot,St,st,Ut,Pt){var vt=34*i,Ht=17*i;return this.int16[vt+0]=u,this.int16[vt+1]=h,this.int16[vt+2]=m,this.int16[vt+3]=v,this.int16[vt+4]=w,this.int16[vt+5]=T,this.int16[vt+6]=A,this.int16[vt+7]=P,this.uint16[vt+8]=M,this.uint16[vt+9]=O,this.uint16[vt+10]=F,this.uint16[vt+11]=Z,this.uint16[vt+12]=G,this.uint16[vt+13]=ie,this.uint16[vt+14]=Q,this.uint16[vt+15]=he,this.uint16[vt+16]=ye,this.uint16[vt+17]=we,this.uint16[vt+18]=Se,this.uint16[vt+19]=De,this.uint16[vt+20]=Ze,this.uint16[vt+21]=Qe,this.uint16[vt+22]=xt,this.uint32[Ht+12]=ot,this.float32[Ht+13]=St,this.float32[Ht+14]=st,this.float32[Ht+15]=Ut,this.float32[Ht+16]=Pt,i},r}(dr);Eu.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",Eu);var la=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},r}(dr);la.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",la);var Zi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,h)},r.prototype.emplace=function(i,u,h,m){var v=3*i;return this.int16[v+0]=u,this.int16[v+1]=h,this.int16[v+2]=m,i},r}(dr);Zi.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Zi);var Qc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var m=this.length;return this.resize(m+1),this.emplace(m,i,u,h)},r.prototype.emplace=function(i,u,h,m){var v=4*i;return this.uint32[2*i+0]=u,this.uint16[v+2]=h,this.uint16[v+3]=m,i},r}(dr);Qc.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Qc);var vl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var m=2*i;return this.uint16[m+0]=u,this.uint16[m+1]=h,i},r}(dr);vl.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",vl);var ep=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},r}(dr);ep.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",ep);var Su=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,m){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,m)},r.prototype.emplace=function(i,u,h,m,v){var w=4*i;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=m,this.float32[w+3]=v,i},r}(dr);Su.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",Su);var o=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new ze(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,i),r}(bu);o.prototype.size=20;var s=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new o(this,i)},r}(Jc);ft("CollisionBoxArray",s);var a=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,i),r}(bu);a.prototype.size=48;var c=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new a(this,i)},r}(sa);ft("PlacedSymbolArray",c);var g=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,i),r}(bu);g.prototype.size=68;var _=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new g(this,i)},r}(Eu);ft("SymbolInstanceArray",_);var b=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getoffsetX=function(i){return this.float32[1*i+0]},r}(la);ft("GlyphOffsetArray",b);var S=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getx=function(i){return this.int16[3*i+0]},r.prototype.gety=function(i){return this.int16[3*i+1]},r.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},r}(Zi);ft("SymbolLineVertexArray",S);var I=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,i),r}(bu);I.prototype.size=8;var L=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new I(this,i)},r}(Qc);ft("FeatureIndexArray",L);var U=In([{name:"a_pos",components:2,type:"Int16"}],4).members,j=function(e){e===void 0&&(e=[]),this.segments=e};function q(e,r){return 256*(e=Ot(Math.floor(e),0,255))+Ot(Math.floor(r),0,255)}j.prototype.prepareSegment=function(e,r,i,u){var h=this.segments[this.segments.length-1];return e>j.MAX_VERTEX_ARRAY_LENGTH&&mr("Max vertices per segment is "+j.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>j.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==u)&&(h={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(h.sortKey=u),this.segments.push(h)),h},j.prototype.get=function(){return this.segments},j.prototype.destroy=function(){for(var e=0,r=this.segments;e<r.length;e+=1){var i=r[e];for(var u in i.vaos)i.vaos[u].destroy()}},j.simpleSegment=function(e,r,i,u){return new j([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},j.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",j);var X=In([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),W=ke(function(e){e.exports=function(r,i){var u,h,m,v,w,T,A,P;for(h=r.length-(u=3&r.length),m=i,w=3432918353,T=461845907,P=0;P<h;)A=255&r.charCodeAt(P)|(255&r.charCodeAt(++P))<<8|(255&r.charCodeAt(++P))<<16|(255&r.charCodeAt(++P))<<24,++P,m=27492+(65535&(v=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&r.charCodeAt(P+2))<<16;case 2:A^=(255&r.charCodeAt(P+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&r.charCodeAt(P)))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),re=ke(function(e){e.exports=function(r,i){for(var u,h=r.length,m=i^h,v=0;h>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(v)|(255&r.charCodeAt(++v))<<8|(255&r.charCodeAt(++v))<<16|(255&r.charCodeAt(++v))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&r.charCodeAt(v+2))<<16;case 2:m^=(255&r.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),$=W,te=re;$.murmur3=W,$.murmur2=te;var le=function(){this.ids=[],this.positions=[],this.indexed=!1};le.prototype.add=function(e,r,i,u){this.ids.push(Ce(e)),this.positions.push(r,i,u)},le.prototype.getPositions=function(e){for(var r=Ce(e),i=0,u=this.ids.length-1;i<u;){var h=i+u>>1;this.ids[h]>=r?u=h:i=h+1}for(var m=[];this.ids[i]===r;)m.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return m},le.serialize=function(e,r){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function h(m,v,w,T){for(;w<T;){for(var A=m[w+T>>1],P=w-1,M=T+1;;){do P++;while(m[P]<A);do M--;while(m[M]>A);if(P>=M)break;Ee(m,P,M),Ee(v,3*P,3*M),Ee(v,3*P+1,3*M+1),Ee(v,3*P+2,3*M+2)}M-w<T-M?(h(m,v,w,M),w=M+1):(h(m,v,M+1,T),T=M)}}(i,u,0,i.length-1),r&&r.push(i.buffer,u.buffer),{ids:i,positions:u}},le.deserialize=function(e){var r=new le;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r};var me=Math.pow(2,53)-1;function Ce(e){var r=+e;return!isNaN(r)&&r<=me?r:$(String(e))}function Ee(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}ft("FeaturePositionMap",le);var Ie=function(e,r){this.gl=e.gl,this.location=r},Ne=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},r}(Ie),Ke=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},r}(Ie),We=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},r}(Ie),ut=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},r}(Ie),Et=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},r}(Ie),At=function(e){function r(i,u){e.call(this,i,u),this.current=pr.transparent}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},r}(Ie),Ct=new Float32Array(16),ir=function(e){function r(i,u){e.call(this,i,u),this.current=Ct}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},r}(Ie);function pt(e){return[q(255*e.r,255*e.g),q(255*e.b,255*e.a)]}var Rt=function(e,r,i){this.value=e,this.uniformNames=r.map(function(u){return"u_"+u}),this.type=i};Rt.prototype.setUniform=function(e,r,i){e.set(i.constantOr(this.value))},Rt.prototype.getBinding=function(e,r,i){return this.type==="color"?new At(e,r):new Ke(e,r)};var Nt=function(e,r){this.uniformNames=r.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Nt.prototype.setConstantPatternPositions=function(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr},Nt.prototype.setUniform=function(e,r,i,u){var h=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Nt.prototype.getBinding=function(e,r,i){return i.substr(0,9)==="u_pattern"?new Et(e,r):new Ke(e,r)};var Lt=function(e,r,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(function(h){return{name:"a_"+h,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};Lt.prototype.populatePaintArray=function(e,r,i,u,h){var m=this.paintVertexArray.length,v=this.expression.evaluate(new Gt(0),r,{},u,[],h);this.paintVertexArray.resize(e),this._setPaintValue(m,e,v)},Lt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,r,h)},Lt.prototype._setPaintValue=function(e,r,i){if(this.type==="color")for(var u=pt(i),h=e;h<r;h++)this.paintVertexArray.emplace(h,u[0],u[1]);else{for(var m=e;m<r;m++)this.paintVertexArray.emplace(m,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Lt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Lt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zt=function(e,r,i,u,h,m){this.expression=e,this.uniformNames=r.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new m};zt.prototype.populatePaintArray=function(e,r,i,u,h){var m=this.expression.evaluate(new Gt(this.zoom),r,{},u,[],h),v=this.expression.evaluate(new Gt(this.zoom+1),r,{},u,[],h),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,m,v)},zt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:this.zoom},i,u),m=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,r,h,m)},zt.prototype._setPaintValue=function(e,r,i,u){if(this.type==="color")for(var h=pt(i),m=pt(u),v=e;v<r;v++)this.paintVertexArray.emplace(v,h[0],h[1],m[0],m[1]);else{for(var w=e;w<r;w++)this.paintVertexArray.emplace(w,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zt.prototype.setUniform=function(e,r){var i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,u=Ot(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},zt.prototype.getBinding=function(e,r,i){return new Ke(e,r)};var Ft=function(e,r,i,u,h,m){this.expression=e,this.type=r,this.useIntegerZoom=i,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Ft.prototype.populatePaintArray=function(e,r,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],i)},Ft.prototype.updatePaintArray=function(e,r,i,u,h){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],h)},Ft.prototype._setPaintValues=function(e,r,i,u){if(u&&i){var h=u[i.min],m=u[i.mid],v=u[i.max];if(h&&m&&v)for(var w=e;w<r;w++)this.zoomInPaintVertexArray.emplace(w,m.tl[0],m.tl[1],m.br[0],m.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],m.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,m.tl[0],m.tl[1],m.br[0],m.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],m.pixelRatio,v.pixelRatio)}},Ft.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,X.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,X.members,this.expression.isStateDependent))},Ft.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Mt=function(e,r,i){this.binders={},this._buffers=[];var u=[];for(var h in e.paint._values)if(i(h)){var m=e.paint.get(h);if(m instanceof Qn&&Fa(m.property.specification)){var v=bn(h,e.type),w=m.value,T=m.property.specification.type,A=m.property.useIntegerZoom,P=m.property.specification["property-type"],M=P==="cross-faded"||P==="cross-faded-data-driven";if(w.kind==="constant")this.binders[h]=M?new Nt(w.value,v):new Rt(w.value,v,T),u.push("/u_"+h);else if(w.kind==="source"||M){var O=$r(h,T,"source");this.binders[h]=M?new Ft(w,T,A,r,O,e.id):new Lt(w,v,T,O),u.push("/a_"+h)}else{var F=$r(h,T,"composite");this.binders[h]=new zt(w,v,T,A,r,F),u.push("/z_"+h)}}}this.cacheKey=u.sort().join("")};Mt.prototype.getMaxValue=function(e){var r=this.binders[e];return r instanceof Lt||r instanceof zt?r.maxValue:0},Mt.prototype.populatePaintArrays=function(e,r,i,u,h){for(var m in this.binders){var v=this.binders[m];(v instanceof Lt||v instanceof zt||v instanceof Ft)&&v.populatePaintArray(e,r,i,u,h)}},Mt.prototype.setConstantPatternPositions=function(e,r){for(var i in this.binders){var u=this.binders[i];u instanceof Nt&&u.setConstantPatternPositions(e,r)}},Mt.prototype.updatePaintArrays=function(e,r,i,u,h){var m=!1;for(var v in e)for(var w=0,T=r.getPositions(v);w<T.length;w+=1){var A=T[w],P=i.feature(A.index);for(var M in this.binders){var O=this.binders[M];if((O instanceof Lt||O instanceof zt||O instanceof Ft)&&O.expression.isStateDependent===!0){var F=u.paint.get(M);O.expression=F.value,O.updatePaintArray(A.start,A.end,P,e[v],h),m=!0}}}return m},Mt.prototype.defines=function(){var e=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Rt||i instanceof Nt)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Mt.prototype.getBinderAttributes=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Lt||i instanceof zt)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Ft)for(var h=0;h<X.members.length;h++)e.push(X.members[h].name)}return e},Mt.prototype.getBinderUniforms=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Rt||i instanceof Nt||i instanceof zt)for(var u=0,h=i.uniformNames;u<h.length;u+=1)e.push(h[u])}return e},Mt.prototype.getPaintVertexBuffers=function(){return this._buffers},Mt.prototype.getUniforms=function(e,r){var i=[];for(var u in this.binders){var h=this.binders[u];if(h instanceof Rt||h instanceof Nt||h instanceof zt)for(var m=0,v=h.uniformNames;m<v.length;m+=1){var w=v[m];if(r[w]){var T=h.getBinding(e,r[w],w);i.push({name:w,property:u,binding:T})}}}return i},Mt.prototype.setUniforms=function(e,r,i,u){for(var h=0,m=r;h<m.length;h+=1){var v=m[h],w=v.name,T=v.property;this.binders[T].setUniform(v.binding,u,i.get(T),w)}},Mt.prototype.updatePaintBuffers=function(e){for(var r in this._buffers=[],this.binders){var i=this.binders[r];if(e&&i instanceof Ft){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof Lt||i instanceof zt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Mt.prototype.upload=function(e){for(var r in this.binders){var i=this.binders[r];(i instanceof Lt||i instanceof zt||i instanceof Ft)&&i.upload(e)}this.updatePaintBuffers()},Mt.prototype.destroy=function(){for(var e in this.binders){var r=this.binders[e];(r instanceof Lt||r instanceof zt||r instanceof Ft)&&r.destroy()}};var It=function(e,r,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,h=e;u<h.length;u+=1){var m=h[u];this.programConfigurations[m.id]=new Mt(m,r,i)}this.needsUpload=!1,this._featureMap=new le,this._bufferOffset=0};function bn(e,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(r+"-","").replace(/-/g,"_")]}function $r(e,r,i){var u={color:{source:_s,composite:Su},number:{source:la,composite:_s}},h=function(m){return{"line-pattern":{source:To,composite:To},"fill-pattern":{source:To,composite:To},"fill-extrusion-pattern":{source:To,composite:To}}[m]}(e);return h&&h[i]||u[r][i]}It.prototype.populatePaintArrays=function(e,r,i,u,h,m){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,r,u,h,m);r.id!==void 0&&this._featureMap.add(r.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},It.prototype.updatePaintArrays=function(e,r,i,u){for(var h=0,m=i;h<m.length;h+=1){var v=m[h];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,r,v,u)||this.needsUpload}},It.prototype.get=function(e){return this.programConfigurations[e]},It.prototype.upload=function(e){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}},It.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Rt),ft("CrossFadedConstantBinder",Nt),ft("SourceExpressionBinder",Lt),ft("CrossFadedCompositeBinder",Ft),ft("CompositeExpressionBinder",zt),ft("ProgramConfiguration",Mt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",It);var qn=Math.pow(2,14)-1,kn=-qn-1;function qr(e){for(var r=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var h=i[u],m=0;m<h.length;m++){var v=h[m],w=Math.round(v.x*r),T=Math.round(v.y*r);v.x=Ot(w,kn,qn),v.y=Ot(T,kn,qn),(w<v.x||w>v.x+1||T<v.y||T>v.y+1)&&mr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Qr(e,r){return{type:e.type,id:e.id,properties:e.properties,geometry:r?qr(e):[]}}function wi(e,r,i,u,h){e.emplaceBack(2*r+(u+1)/2,2*i+(h+1)/2)}var ti=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new qa,this.indexArray=new aa,this.segments=new j,this.programConfigurations=new It(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function ua(e,r){for(var i=0;i<e.length;i++)if(Co(r,e[i]))return!0;for(var u=0;u<r.length;u++)if(Co(e,r[u]))return!0;return!!_l(e,r)}function ui(e,r,i){return!!Co(e,r)||!!ca(r,e,i)}function ho(e,r){if(e.length===1)return xl(r,e[0]);for(var i=0;i<r.length;i++)for(var u=r[i],h=0;h<u.length;h++)if(Co(e,u[h]))return!0;for(var m=0;m<e.length;m++)if(xl(r,e[m]))return!0;for(var v=0;v<r.length;v++)if(_l(e,r[v]))return!0;return!1}function Gi(e,r,i){if(e.length>1){if(_l(e,r))return!0;for(var u=0;u<r.length;u++)if(ca(r[u],e,i))return!0}for(var h=0;h<e.length;h++)if(ca(e[h],r,i))return!0;return!1}function _l(e,r){if(e.length===0||r.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],h=e[i+1],m=0;m<r.length-1;m++)if(ws(u,h,r[m],r[m+1]))return!0;return!1}function ws(e,r,i,u){return pn(e,i,u)!==pn(r,i,u)&&pn(e,r,i)!==pn(e,r,u)}function ca(e,r,i){var u=i*i;if(r.length===1)return e.distSqr(r[0])<u;for(var h=1;h<r.length;h++)if(Es(e,r[h-1],r[h])<u)return!0;return!1}function Es(e,r,i){var u=r.distSqr(i);if(u===0)return e.distSqr(r);var h=((e.x-r.x)*(i.x-r.x)+(e.y-r.y)*(i.y-r.y))/u;return e.distSqr(h<0?r:h>1?i:i.sub(r)._mult(h)._add(r))}function xl(e,r){for(var i,u,h,m=!1,v=0;v<e.length;v++)for(var w=0,T=(i=e[v]).length-1;w<i.length;T=w++)(u=i[w]).y>r.y!=(h=i[T]).y>r.y&&r.x<(h.x-u.x)*(r.y-u.y)/(h.y-u.y)+u.x&&(m=!m);return m}function Co(e,r){for(var i=!1,u=0,h=e.length-1;u<e.length;h=u++){var m=e[u],v=e[h];m.y>r.y!=v.y>r.y&&r.x<(v.x-m.x)*(r.y-m.y)/(v.y-m.y)+m.x&&(i=!i)}return i}function bl(e,r,i){var u=i[0],h=i[2];if(e.x<u.x&&r.x<u.x||e.x>h.x&&r.x>h.x||e.y<u.y&&r.y<u.y||e.y>h.y&&r.y>h.y)return!1;var m=pn(e,r,i[0]);return m!==pn(e,r,i[1])||m!==pn(e,r,i[2])||m!==pn(e,r,i[3])}function Ao(e,r,i){var u=r.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(r.id).getMaxValue(e)}function wn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Vo(e,r,i,u,h){if(!r[0]&&!r[1])return e;var m=ze.convert(r)._mult(h);i==="viewport"&&m._rotate(-u);for(var v=[],w=0;w<e.length;w++)v.push(e[w].sub(m));return v}ti.prototype.populate=function(e,r,i){var u=this.layers[0],h=[],m=null;u.type==="circle"&&(m=u.layout.get("circle-sort-key"));for(var v=0,w=e;v<w.length;v+=1){var T=w[v],A=T.feature,P=T.id,M=T.index,O=T.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,Z=Qr(A,F);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),Z,i)){var G=m?m.evaluate(Z,{},i):void 0,ie={id:P,properties:A.properties,type:A.type,sourceLayerIndex:O,index:M,geometry:F?Z.geometry:qr(A),patterns:{},sortKey:G};h.push(ie)}}m&&h.sort(function(Qe,xt){return Qe.sortKey-xt.sortKey});for(var Q=0,he=h;Q<he.length;Q+=1){var ye=he[Q],we=ye.geometry,Se=ye.index,De=ye.sourceLayerIndex,Ze=e[Se].feature;this.addFeature(ye,we,Se,i),r.featureIndex.insert(Ze,we,Se,De,this.index)}},ti.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},ti.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ti.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ti.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,U),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ti.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ti.prototype.addFeature=function(e,r,i,u){for(var h=0,m=r;h<m.length;h+=1)for(var v=0,w=m[h];v<w.length;v+=1){var T=w[v],A=T.x,P=T.y;if(!(A<0||A>=8192||P<0||P>=8192)){var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=M.vertexLength;wi(this.layoutVertexArray,A,P,-1,-1),wi(this.layoutVertexArray,A,P,1,-1),wi(this.layoutVertexArray,A,P,1,1),wi(this.layoutVertexArray,A,P,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),M.vertexLength+=4,M.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},ft("CircleBucket",ti,{omit:["layers"]});var pa=new Fn({"circle-sort-key":new yt(V.layout_circle["circle-sort-key"])}),$a={paint:new Fn({"circle-radius":new yt(V.paint_circle["circle-radius"]),"circle-color":new yt(V.paint_circle["circle-color"]),"circle-blur":new yt(V.paint_circle["circle-blur"]),"circle-opacity":new yt(V.paint_circle["circle-opacity"]),"circle-translate":new wt(V.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(V.paint_circle["circle-stroke-opacity"])}),layout:pa},hr=typeof Float32Array<"u"?Float32Array:Array;function Di(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ci(e,r,i){var u=r[0],h=r[1],m=r[2],v=r[3],w=r[4],T=r[5],A=r[6],P=r[7],M=r[8],O=r[9],F=r[10],Z=r[11],G=r[12],ie=r[13],Q=r[14],he=r[15],ye=i[0],we=i[1],Se=i[2],De=i[3];return e[0]=ye*u+we*w+Se*M+De*G,e[1]=ye*h+we*T+Se*O+De*ie,e[2]=ye*m+we*A+Se*F+De*Q,e[3]=ye*v+we*P+Se*Z+De*he,e[4]=(ye=i[4])*u+(we=i[5])*w+(Se=i[6])*M+(De=i[7])*G,e[5]=ye*h+we*T+Se*O+De*ie,e[6]=ye*m+we*A+Se*F+De*Q,e[7]=ye*v+we*P+Se*Z+De*he,e[8]=(ye=i[8])*u+(we=i[9])*w+(Se=i[10])*M+(De=i[11])*G,e[9]=ye*h+we*T+Se*O+De*ie,e[10]=ye*m+we*A+Se*F+De*Q,e[11]=ye*v+we*P+Se*Z+De*he,e[12]=(ye=i[12])*u+(we=i[13])*w+(Se=i[14])*M+(De=i[15])*G,e[13]=ye*h+we*T+Se*O+De*ie,e[14]=ye*m+we*A+Se*F+De*Q,e[15]=ye*v+we*P+Se*Z+De*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,r=0,i=arguments.length;i--;)r+=e[i]*e[i];return Math.sqrt(r)});var Za,dm=ci;function Tu(e,r,i){var u=r[0],h=r[1],m=r[2],v=r[3];return e[0]=i[0]*u+i[4]*h+i[8]*m+i[12]*v,e[1]=i[1]*u+i[5]*h+i[9]*m+i[13]*v,e[2]=i[2]*u+i[6]*h+i[10]*m+i[14]*v,e[3]=i[3]*u+i[7]*h+i[11]*m+i[15]*v,e}Za=new hr(3),hr!=Float32Array&&(Za[0]=0,Za[1]=0,Za[2]=0),function(){var e=new hr(4);hr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var mm=(function(){var e=new hr(2);hr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function r(i){e.call(this,i,$a)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new ti(i)},r.prototype.queryRadius=function(i){var u=i;return Ao("circle-radius",this,u)+Ao("circle-stroke-width",this,u)+wn(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,m,v,w,T,A){for(var P=Vo(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),M=this.paint.get("circle-radius").evaluate(u,h)+this.paint.get("circle-stroke-width").evaluate(u,h),O=this.paint.get("circle-pitch-alignment")==="map",F=O?P:function(Ze,Qe){return Ze.map(function(xt){return wl(xt,Qe)})}(P,A),Z=O?M*T:M,G=0,ie=m;G<ie.length;G+=1)for(var Q=0,he=ie[G];Q<he.length;Q+=1){var ye=he[Q],we=O?ye:wl(ye,A),Se=Z,De=Tu([],[ye.x,ye.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Se*=De[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Se*=w.cameraToCenterDistance/De[3]),ui(F,we,Se))return!0}return!1},r}(So));function wl(e,r){var i=Tu([],[e.x,e.y,0,1],r);return new ze(i[0]/i[3],i[1]/i[3])}var $h=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(ti);function Ss(e,r,i,u){var h=r.width,m=r.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==h*m*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(h*m*i);return e.width=h,e.height=m,e.data=u,e}function Cu(e,r,i){var u=r.width,h=r.height;if(u!==e.width||h!==e.height){var m=Ss({},{width:u,height:h},i);gm(e,m,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,h)},i),e.width=u,e.height=h,e.data=m.data}}function gm(e,r,i,u,h,m){if(h.width===0||h.height===0)return r;if(h.width>e.width||h.height>e.height||i.x>e.width-h.width||i.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>r.width||h.height>r.height||u.x>r.width-h.width||u.y>r.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,w=r.data,T=0;T<h.height;T++)for(var A=((i.y+T)*e.width+i.x)*m,P=((u.y+T)*r.width+u.x)*m,M=0;M<h.width*m;M++)w[P+M]=v[A+M];return r}ft("HeatmapBucket",$h,{omit:["layers"]});var El=function(e,r){Ss(this,e,1,r)};El.prototype.resize=function(e){Cu(this,e,1)},El.prototype.clone=function(){return new El({width:this.width,height:this.height},new Uint8Array(this.data))},El.copy=function(e,r,i,u,h){gm(e,r,i,u,h,1)};var Ei=function(e,r){Ss(this,e,4,r)};Ei.prototype.resize=function(e){Cu(this,e,4)},Ei.prototype.replace=function(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Ei.prototype.clone=function(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))},Ei.copy=function(e,r,i,u,h){gm(e,r,i,u,h,4)},ft("AlphaImage",El),ft("RGBAImage",Ei);var bw={paint:new Fn({"heatmap-radius":new yt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new po(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(V.paint_heatmap["heatmap-opacity"])})};function Qy(e){var r={},i=e.resolution||256,u=e.clips?e.clips.length:1,h=e.image||new Ei({width:i,height:u}),m=function(Z,G,ie){r[e.evaluationKey]=ie;var Q=e.expression.evaluate(r);h.data[Z+G+0]=Math.floor(255*Q.r/Q.a),h.data[Z+G+1]=Math.floor(255*Q.g/Q.a),h.data[Z+G+2]=Math.floor(255*Q.b/Q.a),h.data[Z+G+3]=Math.floor(255*Q.a)};if(e.clips)for(var v=0,w=0;v<u;++v,w+=4*i)for(var T=0,A=0;T<i;T++,A+=4){var P=T/(i-1),M=e.clips[v];m(w,A,M.start*(1-P)+M.end*P)}else for(var O=0,F=0;O<i;O++,F+=4)m(0,F,O/(i-1));return h}var ww=function(e){function r(i){e.call(this,i,bw),this._updateColorRamp()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new $h(i)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=Qy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(So),Ew={paint:new Fn({"hillshade-illumination-direction":new wt(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(V.paint_hillshade["hillshade-accent-color"])})},Sw=function(e){function r(i){e.call(this,i,Ew)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(So),Tw=In([{name:"a_pos",components:2,type:"Int16"}],4).members,ym=Zh,Cw=Zh;function Zh(e,r,i){i=i||2;var u,h,m,v,w,T,A,P=r&&r.length,M=P?r[0]*i:e.length,O=ev(e,0,M,i,!0),F=[];if(!O||O.next===O.prev)return F;if(P&&(O=function(G,ie,Q,he){var ye,we,Se,De=[];for(ye=0,we=ie.length;ye<we;ye++)(Se=ev(G,ie[ye]*he,ye<we-1?ie[ye+1]*he:G.length,he,!1))===Se.next&&(Se.steiner=!0),De.push(Rw(Se));for(De.sort(Mw),ye=0;ye<De.length;ye++)zw(De[ye],Q),Q=Ts(Q,Q.next);return Q}(e,r,O,i)),e.length>80*i){u=m=e[0],h=v=e[1];for(var Z=i;Z<M;Z+=i)(w=e[Z])<u&&(u=w),(T=e[Z+1])<h&&(h=T),w>m&&(m=w),T>v&&(v=T);A=(A=Math.max(m-u,v-h))!==0?1/A:0}return tp(O,F,i,u,h,A),F}function ev(e,r,i,u,h){var m,v;if(h===xm(e,r,i,u)>0)for(m=r;m<i;m+=u)v=nv(m,e[m],e[m+1],v);else for(m=i-u;m>=r;m-=u)v=nv(m,e[m],e[m+1],v);return v&&Gh(v,v.next)&&(np(v),v=v.next),v}function Ts(e,r){if(!e)return e;r||(r=e);var i,u=e;do if(i=!1,u.steiner||!Gh(u,u.next)&&dn(u.prev,u,u.next)!==0)u=u.next;else{if(np(u),(u=r=u.prev)===u.next)break;i=!0}while(i||u!==r);return r}function tp(e,r,i,u,h,m,v){if(e){!v&&m&&function(P,M,O,F){var Z=P;do Z.z===null&&(Z.z=vm(Z.x,Z.y,M,O,F)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==P);Z.prevZ.nextZ=null,Z.prevZ=null,function(G){var ie,Q,he,ye,we,Se,De,Ze,Qe=1;do{for(Q=G,G=null,we=null,Se=0;Q;){for(Se++,he=Q,De=0,ie=0;ie<Qe&&(De++,he=he.nextZ);ie++);for(Ze=Qe;De>0||Ze>0&&he;)De!==0&&(Ze===0||!he||Q.z<=he.z)?(ye=Q,Q=Q.nextZ,De--):(ye=he,he=he.nextZ,Ze--),we?we.nextZ=ye:G=ye,ye.prevZ=we,we=ye;Q=he}we.nextZ=null,Qe*=2}while(Se>1)}(Z)}(e,u,h,m);for(var w,T,A=e;e.prev!==e.next;)if(w=e.prev,T=e.next,m?Iw(e,u,h,m):Aw(e))r.push(w.i/i),r.push(e.i/i),r.push(T.i/i),np(e),e=T.next,A=T.next;else if((e=T)===A){v?v===1?tp(e=kw(Ts(e),r,i),r,i,u,h,m,2):v===2&&Pw(e,r,i,u,h,m):tp(Ts(e),r,i,u,h,m,1);break}}}function Aw(e){var r=e.prev,i=e,u=e.next;if(dn(r,i,u)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(Au(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&dn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function Iw(e,r,i,u){var h=e.prev,m=e,v=e.next;if(dn(h,m,v)>=0)return!1;for(var w=h.x>m.x?h.x>v.x?h.x:v.x:m.x>v.x?m.x:v.x,T=h.y>m.y?h.y>v.y?h.y:v.y:m.y>v.y?m.y:v.y,A=vm(h.x<m.x?h.x<v.x?h.x:v.x:m.x<v.x?m.x:v.x,h.y<m.y?h.y<v.y?h.y:v.y:m.y<v.y?m.y:v.y,r,i,u),P=vm(w,T,r,i,u),M=e.prevZ,O=e.nextZ;M&&M.z>=A&&O&&O.z<=P;){if(M!==e.prev&&M!==e.next&&Au(h.x,h.y,m.x,m.y,v.x,v.y,M.x,M.y)&&dn(M.prev,M,M.next)>=0||(M=M.prevZ,O!==e.prev&&O!==e.next&&Au(h.x,h.y,m.x,m.y,v.x,v.y,O.x,O.y)&&dn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;M&&M.z>=A;){if(M!==e.prev&&M!==e.next&&Au(h.x,h.y,m.x,m.y,v.x,v.y,M.x,M.y)&&dn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;O&&O.z<=P;){if(O!==e.prev&&O!==e.next&&Au(h.x,h.y,m.x,m.y,v.x,v.y,O.x,O.y)&&dn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function kw(e,r,i){var u=e;do{var h=u.prev,m=u.next.next;!Gh(h,m)&&tv(h,u,u.next,m)&&rp(h,m)&&rp(m,h)&&(r.push(h.i/i),r.push(u.i/i),r.push(m.i/i),np(u),np(u.next),u=e=m),u=u.next}while(u!==e);return Ts(u)}function Pw(e,r,i,u,h,m){var v=e;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&Ow(v,w)){var T=rv(v,w);return v=Ts(v,v.next),T=Ts(T,T.next),tp(v,r,i,u,h,m),void tp(T,r,i,u,h,m)}w=w.next}v=v.next}while(v!==e)}function Mw(e,r){return e.x-r.x}function zw(e,r){if(r=function(u,h){var m,v=h,w=u.x,T=u.y,A=-1/0;do{if(T<=v.y&&T>=v.next.y&&v.next.y!==v.y){var P=v.x+(T-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(P<=w&&P>A){if(A=P,P===w){if(T===v.y)return v;if(T===v.next.y)return v.next}m=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!m)return null;if(w===A)return m;var M,O=m,F=m.x,Z=m.y,G=1/0;v=m;do w>=v.x&&v.x>=F&&w!==v.x&&Au(T<Z?w:A,T,F,Z,T<Z?A:w,T,v.x,v.y)&&(M=Math.abs(T-v.y)/(w-v.x),rp(v,u)&&(M<G||M===G&&(v.x>m.x||v.x===m.x&&Lw(m,v)))&&(m=v,G=M)),v=v.next;while(v!==O);return m}(e,r)){var i=rv(r,e);Ts(r,r.next),Ts(i,i.next)}}function Lw(e,r){return dn(e.prev,e,r.prev)<0&&dn(r.next,e,e.next)<0}function vm(e,r,i,u,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*h)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Rw(e){var r=e,i=e;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==e);return i}function Au(e,r,i,u,h,m,v,w){return(h-v)*(r-w)-(e-v)*(m-w)>=0&&(e-v)*(u-w)-(i-v)*(r-w)>=0&&(i-v)*(m-w)-(h-v)*(u-w)>=0}function Ow(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(i,u){var h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==u.i&&h.next.i!==u.i&&tv(h,h.next,i,u))return!0;h=h.next}while(h!==i);return!1}(e,r)&&(rp(e,r)&&rp(r,e)&&function(i,u){var h=i,m=!1,v=(i.x+u.x)/2,w=(i.y+u.y)/2;do h.y>w!=h.next.y>w&&h.next.y!==h.y&&v<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==i);return m}(e,r)&&(dn(e.prev,e,r.prev)||dn(e,r.prev,r))||Gh(e,r)&&dn(e.prev,e,e.next)>0&&dn(r.prev,r,r.next)>0)}function dn(e,r,i){return(r.y-e.y)*(i.x-r.x)-(r.x-e.x)*(i.y-r.y)}function Gh(e,r){return e.x===r.x&&e.y===r.y}function tv(e,r,i,u){var h=Kh(dn(e,r,i)),m=Kh(dn(e,r,u)),v=Kh(dn(i,u,e)),w=Kh(dn(i,u,r));return h!==m&&v!==w||!(h!==0||!Wh(e,i,r))||!(m!==0||!Wh(e,u,r))||!(v!==0||!Wh(i,e,u))||!(w!==0||!Wh(i,r,u))}function Wh(e,r,i){return r.x<=Math.max(e.x,i.x)&&r.x>=Math.min(e.x,i.x)&&r.y<=Math.max(e.y,i.y)&&r.y>=Math.min(e.y,i.y)}function Kh(e){return e>0?1:e<0?-1:0}function rp(e,r){return dn(e.prev,e,e.next)<0?dn(e,r,e.next)>=0&&dn(e,e.prev,r)>=0:dn(e,r,e.prev)<0||dn(e,e.next,r)<0}function rv(e,r){var i=new _m(e.i,e.x,e.y),u=new _m(r.i,r.x,r.y),h=e.next,m=r.prev;return e.next=r,r.prev=e,i.next=h,h.prev=i,u.next=i,i.prev=u,m.next=u,u.prev=m,u}function nv(e,r,i,u){var h=new _m(e,r,i);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function np(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _m(e,r,i){this.i=e,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xm(e,r,i,u){for(var h=0,m=r,v=i-u;m<i;m+=u)h+=(e[v]-e[m])*(e[m+1]+e[v+1]),v=m;return h}function Dw(e,r,i,u,h){(function m(v,w,T,A,P){for(;A>T;){if(A-T>600){var M=A-T+1,O=w-T+1,F=Math.log(M),Z=.5*Math.exp(2*F/3),G=.5*Math.sqrt(F*Z*(M-Z)/M)*(O-M/2<0?-1:1);m(v,w,Math.max(T,Math.floor(w-O*Z/M+G)),Math.min(A,Math.floor(w+(M-O)*Z/M+G)),P)}var ie=v[w],Q=T,he=A;for(ip(v,T,w),P(v[A],ie)>0&&ip(v,T,A);Q<he;){for(ip(v,Q,he),Q++,he--;P(v[Q],ie)<0;)Q++;for(;P(v[he],ie)>0;)he--}P(v[T],ie)===0?ip(v,T,he):ip(v,++he,A),he<=w&&(T=he+1),w<=he&&(A=he-1)}})(e,r,i||0,u||e.length-1,h||Bw)}function ip(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}function Bw(e,r){return e<r?-1:e>r?1:0}function bm(e,r){var i=e.length;if(i<=1)return[e];for(var u,h,m=[],v=0;v<i;v++){var w=oo(e[v]);w!==0&&(e[v].area=Math.abs(w),h===void 0&&(h=w<0),h===w<0?(u&&m.push(u),u=[e[v]]):u.push(e[v]))}if(u&&m.push(u),r>1)for(var T=0;T<m.length;T++)m[T].length<=r||(Dw(m[T],r,1,m[T].length-1,Fw),m[T]=m[T].slice(0,r));return m}function Fw(e,r){return r.area-e.area}function wm(e,r,i){for(var u=i.patternDependencies,h=!1,m=0,v=r;m<v.length;m+=1){var w=v[m].paint.get(e+"-pattern");w.isConstant()||(h=!0);var T=w.constantOr(null);T&&(h=!0,u[T.to]=!0,u[T.from]=!0)}return h}function Em(e,r,i,u,h){for(var m=h.patternDependencies,v=0,w=r;v<w.length;v+=1){var T=w[v],A=T.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var P=A.evaluate({zoom:u-1},i,{},h.availableImages),M=A.evaluate({zoom:u},i,{},h.availableImages),O=A.evaluate({zoom:u+1},i,{},h.availableImages);M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,m[P=P&&P.name?P.name:P]=!0,m[M]=!0,m[O]=!0,i.patterns[T.id]={min:P,mid:M,max:O}}}return i}Zh.deviation=function(e,r,i,u){var h=r&&r.length,m=Math.abs(xm(e,0,h?r[0]*i:e.length,i));if(h)for(var v=0,w=r.length;v<w;v++)m-=Math.abs(xm(e,r[v]*i,v<w-1?r[v+1]*i:e.length,i));var T=0;for(v=0;v<u.length;v+=3){var A=u[v]*i,P=u[v+1]*i,M=u[v+2]*i;T+=Math.abs((e[A]-e[M])*(e[P+1]-e[A+1])-(e[A]-e[P])*(e[M+1]-e[A+1]))}return m===0&&T===0?0:Math.abs((T-m)/m)},Zh.flatten=function(e){for(var r=e[0][0].length,i={vertices:[],holes:[],dimensions:r},u=0,h=0;h<e.length;h++){for(var m=0;m<e[h].length;m++)for(var v=0;v<r;v++)i.vertices.push(e[h][m][v]);h>0&&i.holes.push(u+=e[h-1].length)}return i},ym.default=Cw;var jo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qa,this.indexArray=new aa,this.indexArray2=new vl,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new j,this.segments2=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};jo.prototype.populate=function(e,r,i){this.hasPattern=wm("fill",this.layers,r);for(var u=this.layers[0].layout.get("fill-sort-key"),h=[],m=0,v=e;m<v.length;m+=1){var w=v[m],T=w.feature,A=w.id,P=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Qr(T,O);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),F,i)){var Z=u?u.evaluate(F,{},i,r.availableImages):void 0,G={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:P,geometry:O?F.geometry:qr(T),patterns:{},sortKey:Z};h.push(G)}}u&&h.sort(function(Ze,Qe){return Ze.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=Em("fill",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},jo.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},jo.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var m=h[u];this.addFeature(m,m.geometry,m.index,r,i)}},jo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Tw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},jo.prototype.addFeature=function(e,r,i,u,h){for(var m=0,v=bm(r,500);m<v.length;m+=1){for(var w=v[m],T=0,A=0,P=w;A<P.length;A+=1)T+=P[A].length;for(var M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=M.vertexLength,F=[],Z=[],G=0,ie=w;G<ie.length;G+=1){var Q=ie[G];if(Q.length!==0){Q!==w[0]&&Z.push(F.length/2);var he=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ye=he.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ye+Q.length-1,ye),F.push(Q[0].x),F.push(Q[0].y);for(var we=1;we<Q.length;we++)this.layoutVertexArray.emplaceBack(Q[we].x,Q[we].y),this.indexArray2.emplaceBack(ye+we-1,ye+we),F.push(Q[we].x),F.push(Q[we].y);he.vertexLength+=Q.length,he.primitiveLength+=Q.length}}for(var Se=ym(F,Z),De=0;De<Se.length;De+=3)this.indexArray.emplaceBack(O+Se[De],O+Se[De+1],O+Se[De+2]);M.vertexLength+=T,M.primitiveLength+=Se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillBucket",jo,{omit:["layers","patternFeatures"]});var Nw=new Fn({"fill-sort-key":new yt(V.layout_fill["fill-sort-key"])}),Uw={paint:new Fn({"fill-antialias":new wt(V.paint_fill["fill-antialias"]),"fill-opacity":new yt(V.paint_fill["fill-opacity"]),"fill-color":new yt(V.paint_fill["fill-color"]),"fill-outline-color":new yt(V.paint_fill["fill-outline-color"]),"fill-translate":new wt(V.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new xu(V.paint_fill["fill-pattern"])}),layout:Nw},Vw=function(e){function r(i){e.call(this,i,Uw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(i){return new jo(i)},r.prototype.queryRadius=function(){return wn(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,m,v,w,T){return ho(Vo(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),m)},r.prototype.isTileClipped=function(){return!0},r}(So),jw=In([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,iv=Iu;function Iu(e,r,i,u,h){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=h,e.readFields(qw,this,r)}function qw(e,r,i){e==1?r.id=i.readVarint():e==2?function(u,h){for(var m=u.readVarint()+u.pos;u.pos<m;){var v=h._keys[u.readVarint()],w=h._values[u.readVarint()];h.properties[v]=w}}(i,r):e==3?r.type=i.readVarint():e==4&&(r._geometry=i.pos)}function Hw(e){for(var r,i,u=0,h=0,m=e.length,v=m-1;h<m;v=h++)u+=((i=e[v]).x-(r=e[h]).x)*(r.y+i.y);return u}Iu.types=["Unknown","Point","LineString","Polygon"],Iu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,i=e.readVarint()+e.pos,u=1,h=0,m=0,v=0,w=[];e.pos<i;){if(h<=0){var T=e.readVarint();u=7&T,h=T>>3}if(h--,u===1||u===2)m+=e.readSVarint(),v+=e.readSVarint(),u===1&&(r&&w.push(r),r=[]),r.push(new ze(m,v));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&w.push(r),w},Iu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var r=e.readVarint()+e.pos,i=1,u=0,h=0,m=0,v=1/0,w=-1/0,T=1/0,A=-1/0;e.pos<r;){if(u<=0){var P=e.readVarint();i=7&P,u=P>>3}if(u--,i===1||i===2)(h+=e.readSVarint())<v&&(v=h),h>w&&(w=h),(m+=e.readSVarint())<T&&(T=m),m>A&&(A=m);else if(i!==7)throw new Error("unknown command "+i)}return[v,T,w,A]},Iu.prototype.toGeoJSON=function(e,r,i){var u,h,m=this.extent*Math.pow(2,i),v=this.extent*e,w=this.extent*r,T=this.loadGeometry(),A=Iu.types[this.type];function P(F){for(var Z=0;Z<F.length;Z++){var G=F[Z];F[Z]=[360*(G.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(G.y+w)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(u=0;u<T.length;u++)M[u]=T[u][0];P(T=M);break;case 2:for(u=0;u<T.length;u++)P(T[u]);break;case 3:for(T=function(F){var Z=F.length;if(Z<=1)return[F];for(var G,ie,Q=[],he=0;he<Z;he++){var ye=Hw(F[he]);ye!==0&&(ie===void 0&&(ie=ye<0),ie===ye<0?(G&&Q.push(G),G=[F[he]]):G.push(F[he]))}return G&&Q.push(G),Q}(T),u=0;u<T.length;u++)for(h=0;h<T[u].length;h++)P(T[u][h])}T.length===1?T=T[0]:A="Multi"+A;var O={type:"Feature",geometry:{type:A,coordinates:T},properties:this.properties};return"id"in this&&(O.id=this.id),O};var ov=av;function av(e,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields($w,this,r),this.length=this._features.length}function $w(e,r,i){e===15?r.version=i.readVarint():e===1?r.name=i.readString():e===5?r.extent=i.readVarint():e===2?r._features.push(i.pos):e===3?r._keys.push(i.readString()):e===4&&r._values.push(function(u){for(var h=null,m=u.readVarint()+u.pos;u.pos<m;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(i))}function Zw(e,r,i){if(e===3){var u=new ov(i,i.readVarint()+i.pos);u.length&&(r[u.name]=u)}}av.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var r=this._pbf.readVarint()+this._pbf.pos;return new iv(this._pbf,r,this.extent,this._keys,this._values)};var ku={VectorTile:function(e,r){this.layers=e.readFields(Zw,{},r)},VectorTileFeature:iv,VectorTileLayer:ov},Gw=ku.VectorTileFeature.types,Sm=Math.pow(2,13);function op(e,r,i,u,h,m,v,w){e.emplaceBack(r,i,2*Math.floor(u*Sm)+v,h*Sm*2,m*Sm*2,Math.round(w))}var qo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Uo,this.indexArray=new aa,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Ww(e,r){return e.x===r.x&&(e.x<0||e.x>8192)||e.y===r.y&&(e.y<0||e.y>8192)}qo.prototype.populate=function(e,r,i){this.features=[],this.hasPattern=wm("fill-extrusion",this.layers,r);for(var u=0,h=e;u<h.length;u+=1){var m=h[u],v=m.feature,w=m.id,T=m.index,A=m.sourceLayerIndex,P=this.layers[0]._featureFilter.needGeometry,M=Qr(v,P);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),M,i)){var O={id:w,sourceLayerIndex:A,index:T,geometry:P?M.geometry:qr(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Em("fill-extrusion",this.layers,O,this.zoom,r)):this.addFeature(O,O.geometry,T,i,{}),r.featureIndex.insert(v,O.geometry,T,A,this.index,!0)}}},qo.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.features;u<h.length;u+=1){var m=h[u];this.addFeature(m,m.geometry,m.index,r,i)}},qo.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},qo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,jw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(e,r,i,u,h){for(var m=0,v=bm(r,500);m<v.length;m+=1){for(var w=v[m],T=0,A=0,P=w;A<P.length;A+=1)T+=P[A].length;for(var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),O=0,F=w;O<F.length;O+=1){var Z=F[O];if(Z.length!==0&&!((Ht=Z).every(function(Bt){return Bt.x<0})||Ht.every(function(Bt){return Bt.x>8192})||Ht.every(function(Bt){return Bt.y<0})||Ht.every(function(Bt){return Bt.y>8192})))for(var G=0,ie=0;ie<Z.length;ie++){var Q=Z[ie];if(ie>=1){var he=Z[ie-1];if(!Ww(Q,he)){M.vertexLength+4>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ye=Q.sub(he)._perp()._unit(),we=he.dist(Q);G+we>32768&&(G=0),op(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,0,G),op(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,1,G),op(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,0,G+=we),op(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,1,G);var Se=M.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+T>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),Gw[e.type]==="Polygon"){for(var De=[],Ze=[],Qe=M.vertexLength,xt=0,ot=w;xt<ot.length;xt+=1){var St=ot[xt];if(St.length!==0){St!==w[0]&&Ze.push(De.length/2);for(var st=0;st<St.length;st++){var Ut=St[st];op(this.layoutVertexArray,Ut.x,Ut.y,0,0,1,1,0),De.push(Ut.x),De.push(Ut.y)}}}for(var Pt=ym(De,Ze),vt=0;vt<Pt.length;vt+=3)this.indexArray.emplaceBack(Qe+Pt[vt],Qe+Pt[vt+2],Qe+Pt[vt+1]);M.primitiveLength+=Pt.length/3,M.vertexLength+=T}}var Ht;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillExtrusionBucket",qo,{omit:["layers","features"]});var Kw={paint:new Fn({"fill-extrusion-opacity":new wt(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xu(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Xw=function(e){function r(i){e.call(this,i,Kw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new qo(i)},r.prototype.queryRadius=function(){return wn(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(i,u,h,m,v,w,T,A){var P=Vo(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),M=this.paint.get("fill-extrusion-height").evaluate(u,h),O=this.paint.get("fill-extrusion-base").evaluate(u,h),F=function(G,ie,Q,he){for(var ye=[],we=0,Se=G;we<Se.length;we+=1){var De=Se[we],Ze=[De.x,De.y,0,1];Tu(Ze,Ze,ie),ye.push(new ze(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return ye}(P,A),Z=function(G,ie,Q,he){for(var ye=[],we=[],Se=he[8]*ie,De=he[9]*ie,Ze=he[10]*ie,Qe=he[11]*ie,xt=he[8]*Q,ot=he[9]*Q,St=he[10]*Q,st=he[11]*Q,Ut=0,Pt=G;Ut<Pt.length;Ut+=1){for(var vt=[],Ht=[],Bt=0,er=Pt[Ut];Bt<er.length;Bt+=1){var Tt=er[Bt],ar=Tt.x,Br=Tt.y,Zr=he[0]*ar+he[4]*Br+he[12],Hr=he[1]*ar+he[5]*Br+he[13],Fr=he[2]*ar+he[6]*Br+he[14],Gr=he[3]*ar+he[7]*Br+he[15],En=Fr+Ze,Sn=Gr+Qe,ni=Zr+xt,Mn=Hr+ot,ii=Fr+St,en=Gr+st,zn=new ze((Zr+Se)/Sn,(Hr+De)/Sn);zn.z=En/Sn,vt.push(zn);var Kt=new ze(ni/en,Mn/en);Kt.z=ii/en,Ht.push(Kt)}ye.push(vt),we.push(Ht)}return[ye,we]}(m,O,M,A);return function(G,ie,Q){var he=1/0;ho(Q,ie)&&(he=sv(Q,ie[0]));for(var ye=0;ye<ie.length;ye++)for(var we=ie[ye],Se=G[ye],De=0;De<we.length-1;De++){var Ze=we[De],Qe=[Ze,we[De+1],Se[De+1],Se[De],Ze];ua(Q,Qe)&&(he=Math.min(he,sv(Q,Qe)))}return he!==1/0&&he}(Z[0],Z[1],F)},r}(So);function ap(e,r){return e.x*r.x+e.y*r.y}function sv(e,r){if(e.length===1){for(var i,u=0,h=r[u++];!i||h.equals(i);)if(!(i=r[u++]))return 1/0;for(;u<r.length;u++){var m=r[u],v=e[0],w=i.sub(h),T=m.sub(h),A=v.sub(h),P=ap(w,w),M=ap(w,T),O=ap(T,T),F=ap(A,w),Z=ap(A,T),G=P*O-M*M,ie=(O*F-M*Z)/G,Q=(P*Z-M*F)/G,he=h.z*(1-ie-Q)+i.z*ie+m.z*Q;if(isFinite(he))return he}return 1/0}for(var ye=1/0,we=0,Se=r;we<Se.length;we+=1)ye=Math.min(ye,Se[we].z);return ye}var Jw=In([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Yw=In([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Qw=ku.VectorTileFeature.types,e2=Math.cos(Math.PI/180*37.5),lv=Math.pow(2,14)/.5,pi=function(e){var r=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){r.gradients[i.id]={}}),this.layoutVertexArray=new bi,this.layoutVertexArray2=new _s,this.indexArray=new aa,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new j,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};pi.prototype.populate=function(e,r,i){this.hasPattern=wm("line",this.layers,r);for(var u=this.layers[0].layout.get("line-sort-key"),h=[],m=0,v=e;m<v.length;m+=1){var w=v[m],T=w.feature,A=w.id,P=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Qr(T,O);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),F,i)){var Z=u?u.evaluate(F,{},i):void 0,G={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:P,geometry:O?F.geometry:qr(T),patterns:{},sortKey:Z};h.push(G)}}u&&h.sort(function(Ze,Qe){return Ze.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=Em("line",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},pi.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},pi.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var m=h[u];this.addFeature(m,m.geometry,m.index,r,i)}},pi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Yw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},pi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},pi.prototype.addFeature=function(e,r,i,u,h){var m=this.layers[0].layout,v=m.get("line-join").evaluate(e,{}),w=m.get("line-cap"),T=m.get("line-miter-limit"),A=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var P=0,M=r;P<M.length;P+=1)this.addLine(M[P],e,v,w,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},pi.prototype.addLine=function(e,r,i,u,h,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=Qw[r.type]==="Polygon",T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var A=0;A<T-1&&e[A].equals(e[A+1]);)A++;if(!(T<(w?3:2))){i==="bevel"&&(h=1.05);var P,M=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),F=void 0,Z=void 0,G=void 0,ie=void 0;this.e1=this.e2=-1,w&&(ie=e[A].sub(P=e[T-2])._unit()._perp());for(var Q=A;Q<T;Q++)if(!(Z=Q===T-1?w?e[A+1]:void 0:e[Q+1])||!e[Q].equals(Z)){ie&&(G=ie),P&&(F=P),P=e[Q],ie=Z?Z.sub(P)._unit()._perp():G;var he=(G=G||ie).add(ie);he.x===0&&he.y===0||he._unit();var ye=G.x*ie.x+G.y*ie.y,we=he.x*ie.x+he.y*ie.y,Se=we!==0?1/we:1/0,De=2*Math.sqrt(2-2*we),Ze=we<e2&&F&&Z,Qe=G.x*ie.y-G.y*ie.x>0;if(Ze&&Q>A){var xt=P.dist(F);if(xt>2*M){var ot=P.sub(P.sub(F)._mult(M/xt)._round());this.updateDistance(F,ot),this.addCurrentVertex(ot,G,0,0,O),F=ot}}var St=F&&Z,st=St?i:w?"butt":u;if(St&&st==="round"&&(Se<m?st="miter":Se<=2&&(st="fakeround")),st==="miter"&&Se>h&&(st="bevel"),st==="bevel"&&(Se>2&&(st="flipbevel"),Se<h&&(st="miter")),F&&this.updateDistance(F,P),st==="miter")he._mult(Se),this.addCurrentVertex(P,he,0,0,O);else if(st==="flipbevel"){if(Se>100)he=ie.mult(-1);else{var Ut=Se*G.add(ie).mag()/G.sub(ie).mag();he._perp()._mult(Ut*(Qe?-1:1))}this.addCurrentVertex(P,he,0,0,O),this.addCurrentVertex(P,he.mult(-1),0,0,O)}else if(st==="bevel"||st==="fakeround"){var Pt=-Math.sqrt(Se*Se-1),vt=Qe?Pt:0,Ht=Qe?0:Pt;if(F&&this.addCurrentVertex(P,G,vt,Ht,O),st==="fakeround")for(var Bt=Math.round(180*De/Math.PI/20),er=1;er<Bt;er++){var Tt=er/Bt;if(Tt!==.5){var ar=Tt-.5;Tt+=Tt*ar*(Tt-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*ar*ar+(.848013+ye*(.215638*ye-1.06021)))}var Br=ie.sub(G)._mult(Tt)._add(G)._unit()._mult(Qe?-1:1);this.addHalfVertex(P,Br.x,Br.y,!1,Qe,0,O)}Z&&this.addCurrentVertex(P,ie,-vt,-Ht,O)}else if(st==="butt")this.addCurrentVertex(P,he,0,0,O);else if(st==="square"){var Zr=F?1:-1;this.addCurrentVertex(P,he,Zr,Zr,O)}else st==="round"&&(F&&(this.addCurrentVertex(P,G,0,0,O),this.addCurrentVertex(P,G,1,1,O,!0)),Z&&(this.addCurrentVertex(P,ie,-1,-1,O,!0),this.addCurrentVertex(P,ie,0,0,O)));if(Ze&&Q<T-1){var Hr=P.dist(Z);if(Hr>2*M){var Fr=P.add(Z.sub(P)._mult(M/Hr)._round());this.updateDistance(P,Fr),this.addCurrentVertex(Fr,ie,0,0,O),P=Fr}}}}},pi.prototype.addCurrentVertex=function(e,r,i,u,h,m){m===void 0&&(m=!1);var v=r.y*u-r.x,w=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,m,!1,i,h),this.addHalfVertex(e,v,w,m,!0,-u,h),this.distance>lv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,r,i,u,h,m))},pi.prototype.addHalfVertex=function(e,r,i,u,h,m,v){var w=.5*(this.lineClips?this.scaledDistance*(lv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(h?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(m===0?0:m<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),v.primitiveLength++),h?this.e2=T:this.e1=T},pi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},pi.prototype.updateDistance=function(e,r){this.distance+=e.dist(r),this.updateScaledDistance()},ft("LineBucket",pi,{omit:["layers","patternFeatures"]});var t2=new Fn({"line-cap":new wt(V.layout_line["line-cap"]),"line-join":new yt(V.layout_line["line-join"]),"line-miter-limit":new wt(V.layout_line["line-miter-limit"]),"line-round-limit":new wt(V.layout_line["line-round-limit"]),"line-sort-key":new yt(V.layout_line["line-sort-key"])}),uv={paint:new Fn({"line-opacity":new yt(V.paint_line["line-opacity"]),"line-color":new yt(V.paint_line["line-color"]),"line-translate":new wt(V.paint_line["line-translate"]),"line-translate-anchor":new wt(V.paint_line["line-translate-anchor"]),"line-width":new yt(V.paint_line["line-width"]),"line-gap-width":new yt(V.paint_line["line-gap-width"]),"line-offset":new yt(V.paint_line["line-offset"]),"line-blur":new yt(V.paint_line["line-blur"]),"line-dasharray":new ei(V.paint_line["line-dasharray"]),"line-pattern":new xu(V.paint_line["line-pattern"]),"line-gradient":new po(V.paint_line["line-gradient"])}),layout:t2},cv=new(function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u){return u=new Gt(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},r.prototype.evaluate=function(i,u,h,m){return u=Dt({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,h,m)},r}(yt))(uv.paint.properties["line-width"].specification);cv.useIntegerZoom=!0;var r2=function(e){function r(i){e.call(this,i,uv),this.gradientVersion=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof gi,this.gradientVersion=(this.gradientVersion+1)%mt)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=cv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},r.prototype.createBucket=function(i){return new pi(i)},r.prototype.queryRadius=function(i){var u=i,h=pv(Ao("line-width",this,u),Ao("line-gap-width",this,u)),m=Ao("line-offset",this,u);return h/2+Math.abs(m)+wn(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,m,v,w,T){var A=Vo(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),P=T/2*pv(this.paint.get("line-width").evaluate(u,h),this.paint.get("line-gap-width").evaluate(u,h)),M=this.paint.get("line-offset").evaluate(u,h);return M&&(m=function(O,F){for(var Z=[],G=new ze(0,0),ie=0;ie<O.length;ie++){for(var Q=O[ie],he=[],ye=0;ye<Q.length;ye++){var we=Q[ye],Se=Q[ye+1],De=ye===0?G:we.sub(Q[ye-1])._unit()._perp(),Ze=ye===Q.length-1?G:Se.sub(we)._unit()._perp(),Qe=De._add(Ze)._unit();Qe._mult(1/(Qe.x*Ze.x+Qe.y*Ze.y)),he.push(Qe._mult(F)._add(we))}Z.push(he)}return Z}(m,M*T)),function(O,F,Z){for(var G=0;G<F.length;G++){var ie=F[G];if(O.length>=3){for(var Q=0;Q<ie.length;Q++)if(Co(O,ie[Q]))return!0}if(Gi(O,ie,Z))return!0}return!1}(A,m,P)},r.prototype.isTileClipped=function(){return!0},r}(So);function pv(e,r){return r>0?r+2*e:e}var n2=In([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),i2=In([{name:"a_projected_pos",components:3,type:"Float32"}],4),o2=(In([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),In([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),hv=(In([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),In([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),a2=In([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function s2(e,r,i){return e.sections.forEach(function(u){u.text=function(h,m,v){var w=m.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?h=h.toLocaleUpperCase():w==="lowercase"&&(h=h.toLocaleLowerCase()),Oi.applyArabicShaping&&(h=Oi.applyArabicShaping(h)),h}(u.text,r,i)}),e}In([{name:"triangle",components:3,type:"Uint16"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),In([{type:"Float32",name:"offsetX"}]),In([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var sp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},fv=function(e,r,i,u,h){var m,v,w=8*h-u-1,T=(1<<w)-1,A=T>>1,P=-7,M=i?h-1:0,O=i?-1:1,F=e[r+M];for(M+=O,m=F&(1<<-P)-1,F>>=-P,P+=w;P>0;m=256*m+e[r+M],M+=O,P-=8);for(v=m&(1<<-P)-1,m>>=-P,P+=u;P>0;v=256*v+e[r+M],M+=O,P-=8);if(m===0)m=1-A;else{if(m===T)return v?NaN:1/0*(F?-1:1);v+=Math.pow(2,u),m-=A}return(F?-1:1)*v*Math.pow(2,m-u)},dv=function(e,r,i,u,h,m){var v,w,T,A=8*m-h-1,P=(1<<A)-1,M=P>>1,O=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=u?0:m-1,Z=u?1:-1,G=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,v=P):(v=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-v))<1&&(v--,T*=2),(r+=v+M>=1?O/T:O*Math.pow(2,1-M))*T>=2&&(v++,T/=2),v+M>=P?(w=0,v=P):v+M>=1?(w=(r*T-1)*Math.pow(2,h),v+=M):(w=r*Math.pow(2,M-1)*Math.pow(2,h),v=0));h>=8;e[i+F]=255&w,F+=Z,w/=256,h-=8);for(v=v<<h|w,A+=h;A>0;e[i+F]=255&v,F+=Z,v/=256,A-=8);e[i+F-Z]|=128*G},Xh=kr;function kr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}kr.Varint=0,kr.Fixed64=1,kr.Bytes=2,kr.Fixed32=5;var mv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ga(e){return e.type===kr.Bytes?e.readVarint()+e.pos:e.pos+1}function Pu(e,r,i){return i?4294967296*r+(e>>>0):4294967296*(r>>>0)+(e>>>0)}function gv(e,r,i){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(u);for(var h=i.pos-1;h>=e;h--)i.buf[h+u]=i.buf[h]}function l2(e,r){for(var i=0;i<e.length;i++)r.writeVarint(e[i])}function u2(e,r){for(var i=0;i<e.length;i++)r.writeSVarint(e[i])}function c2(e,r){for(var i=0;i<e.length;i++)r.writeFloat(e[i])}function p2(e,r){for(var i=0;i<e.length;i++)r.writeDouble(e[i])}function h2(e,r){for(var i=0;i<e.length;i++)r.writeBoolean(e[i])}function f2(e,r){for(var i=0;i<e.length;i++)r.writeFixed32(e[i])}function d2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed32(e[i])}function m2(e,r){for(var i=0;i<e.length;i++)r.writeFixed64(e[i])}function g2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed64(e[i])}function Jh(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+16777216*e[r+3]}function Mu(e,r,i){e[i]=r,e[i+1]=r>>>8,e[i+2]=r>>>16,e[i+3]=r>>>24}function yv(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function y2(e,r,i){e===1&&i.readMessage(v2,r)}function v2(e,r,i){if(e===3){var u=i.readMessage(_2,{}),h=u.width,m=u.height,v=u.left,w=u.top,T=u.advance;r.push({id:u.id,bitmap:new El({width:h+6,height:m+6},u.bitmap),metrics:{width:h,height:m,left:v,top:w,advance:T}})}}function _2(e,r,i){e===1?r.id=i.readVarint():e===2?r.bitmap=i.readBytes():e===3?r.width=i.readVarint():e===4?r.height=i.readVarint():e===5?r.left=i.readSVarint():e===6?r.top=i.readSVarint():e===7&&(r.advance=i.readVarint())}function vv(e){for(var r=0,i=0,u=0,h=e;u<h.length;u+=1){var m=h[u];r+=m.w*m.h,i=Math.max(i,m.w)}e.sort(function(G,ie){return ie.h-G.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),i),h:1/0}],w=0,T=0,A=0,P=e;A<P.length;A+=1)for(var M=P[A],O=v.length-1;O>=0;O--){var F=v[O];if(!(M.w>F.w||M.h>F.h)){if(M.x=F.x,M.y=F.y,T=Math.max(T,M.y+M.h),w=Math.max(w,M.x+M.w),M.w===F.w&&M.h===F.h){var Z=v.pop();O<v.length&&(v[O]=Z)}else M.h===F.h?(F.x+=M.w,F.w-=M.w):M.w===F.w?(F.y+=M.h,F.h-=M.h):(v.push({x:F.x+M.w,y:F.y,w:F.w-M.w,h:M.h}),F.y+=M.h,F.h-=M.h);break}}return{w,h:T,fill:r/(w*T)||0}}kr.prototype={destroy:function(){this.buf=null},readFields:function(e,r,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),h=u>>3,m=this.pos;this.type=7&u,e(h,r,this),this.pos===m&&this.skip(u)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=Jh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=yv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Jh(this.buf,this.pos)+4294967296*Jh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Jh(this.buf,this.pos)+4294967296*yv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=fv(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=fv(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r,i,u=this.buf;return r=127&(i=u[this.pos++]),i<128?r:(r|=(127&(i=u[this.pos++]))<<7,i<128?r:(r|=(127&(i=u[this.pos++]))<<14,i<128?r:(r|=(127&(i=u[this.pos++]))<<21,i<128?r:function(h,m,v){var w,T,A=v.buf;if(w=(112&(T=A[v.pos++]))>>4,T<128||(w|=(127&(T=A[v.pos++]))<<3,T<128)||(w|=(127&(T=A[v.pos++]))<<10,T<128)||(w|=(127&(T=A[v.pos++]))<<17,T<128)||(w|=(127&(T=A[v.pos++]))<<24,T<128)||(w|=(1&(T=A[v.pos++]))<<31,T<128))return Pu(h,w,m);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&mv?function(i,u,h){return mv.decode(i.subarray(u,h))}(this.buf,r,e):function(i,u,h){for(var m="",v=u;v<h;){var w,T,A,P=i[v],M=null,O=P>239?4:P>223?3:P>191?2:1;if(v+O>h)break;O===1?P<128&&(M=P):O===2?(192&(w=i[v+1]))==128&&(M=(31&P)<<6|63&w)<=127&&(M=null):O===3?(T=i[v+2],(192&(w=i[v+1]))==128&&(192&T)==128&&((M=(15&P)<<12|(63&w)<<6|63&T)<=2047||M>=55296&&M<=57343)&&(M=null)):O===4&&(T=i[v+2],A=i[v+3],(192&(w=i[v+1]))==128&&(192&T)==128&&(192&A)==128&&((M=(15&P)<<18|(63&w)<<12|(63&T)<<6|63&A)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,O=1):M>65535&&(M-=65536,m+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),m+=String.fromCharCode(M),v+=O}return m}(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==kr.Bytes)return e.push(this.readVarint(r));var i=Ga(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==kr.Bytes)return e.push(this.readSVarint());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==kr.Bytes)return e.push(this.readBoolean());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==kr.Bytes)return e.push(this.readFloat());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==kr.Bytes)return e.push(this.readDouble());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==kr.Bytes)return e.push(this.readFixed32());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==kr.Bytes)return e.push(this.readSFixed32());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==kr.Bytes)return e.push(this.readFixed64());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==kr.Bytes)return e.push(this.readSFixed64());var r=Ga(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===kr.Varint)for(;this.buf[this.pos++]>127;);else if(r===kr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===kr.Fixed32)this.pos+=4;else{if(r!==kr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Mu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Mu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Mu(this.buf,-1&e,this.pos),Mu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Mu(this.buf,-1&e,this.pos),Mu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(r,i){var u,h;if(r>=0?(u=r%4294967296|0,h=r/4294967296|0):(h=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,h=h+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(m,v,w){w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,m>>>=7,w.buf[w.pos++]=127&m|128,w.buf[w.pos]=127&(m>>>=7)}(u,0,i),function(m,v){var w=(7&m)<<4;v.buf[v.pos++]|=w|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(h,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var r=this.pos;this.pos=function(u,h,m){for(var v,w,T=0;T<h.length;T++){if((v=h.charCodeAt(T))>55295&&v<57344){if(!w){v>56319||T+1===h.length?(u[m++]=239,u[m++]=191,u[m++]=189):w=v;continue}if(v<56320){u[m++]=239,u[m++]=191,u[m++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(u[m++]=239,u[m++]=191,u[m++]=189,w=null);v<128?u[m++]=v:(v<2048?u[m++]=v>>6|192:(v<65536?u[m++]=v>>12|224:(u[m++]=v>>18|240,u[m++]=v>>12&63|128),u[m++]=v>>6&63|128),u[m++]=63&v|128)}return m}(this.buf,e,this.pos);var i=this.pos-r;i>=128&&gv(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),dv(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),dv(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,r){this.pos++;var i=this.pos;e(r,this);var u=this.pos-i;u>=128&&gv(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,r,i){this.writeTag(e,kr.Bytes),this.writeRawMessage(r,i)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,l2,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,u2,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,h2,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,c2,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,p2,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,f2,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,d2,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,m2,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,g2,r)},writeBytesField:function(e,r){this.writeTag(e,kr.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,kr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,kr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,kr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,kr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,kr.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,kr.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,kr.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,kr.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,kr.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,!!r)}};var Yh=function(e,r){var i=r.pixelRatio,u=r.version,h=r.stretchX,m=r.stretchY,v=r.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=m,this.content=v,this.version=u},lp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};lp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},lp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},lp.tlbr.get=function(){return this.tl.concat(this.br)},lp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Yh.prototype,lp);var up=function(e,r){var i={},u={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,i,h),this.addImages(r,u,h);var m=vv(h),v=new Ei({width:m.w||1,height:m.h||1});for(var w in e){var T=e[w],A=i[w].paddedRect;Ei.copy(T.data,v,{x:0,y:0},{x:A.x+1,y:A.y+1},T.data)}for(var P in r){var M=r[P],O=u[P].paddedRect,F=O.x+1,Z=O.y+1,G=M.data.width,ie=M.data.height;Ei.copy(M.data,v,{x:0,y:0},{x:F,y:Z},M.data),Ei.copy(M.data,v,{x:0,y:ie-1},{x:F,y:Z-1},{width:G,height:1}),Ei.copy(M.data,v,{x:0,y:0},{x:F,y:Z+ie},{width:G,height:1}),Ei.copy(M.data,v,{x:G-1,y:0},{x:F-1,y:Z},{width:1,height:ie}),Ei.copy(M.data,v,{x:0,y:0},{x:F+G,y:Z},{width:1,height:ie})}this.image=v,this.iconPositions=i,this.patternPositions=u};up.prototype.addImages=function(e,r,i){for(var u in e){var h=e[u],m={x:0,y:0,w:h.data.width+2,h:h.data.height+2};i.push(m),r[u]=new Yh(m,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},up.prototype.patchUpdatedImages=function(e,r){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),r)},up.prototype.patchUpdatedImage=function(e,r,i){if(e&&r&&e.version!==r.version){e.version=r.version;var u=e.tl;i.update(r.data,void 0,{x:u[0],y:u[1]})}},ft("ImagePosition",Yh),ft("ImageAtlas",up);var Wi={horizontal:1,vertical:2,horizontalOnly:3},zu=function(){this.scale=1,this.fontStack="",this.imageName=null};zu.forText=function(e,r){var i=new zu;return i.scale=e||1,i.fontStack=r,i},zu.forImage=function(e){var r=new zu;return r.imageName=e,r};var ri=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Qh(e,r,i,u,h,m,v,w,T,A,P,M,O,F,Z,G){var ie,Q=ri.fromFeature(e,h);M===Wi.vertical&&Q.verticalizePunctuation();var he=Oi.processBidirectionalText,ye=Oi.processStyledBidirectionalText;if(he&&Q.sections.length===1){ie=[];for(var we=0,Se=he(Q.toString(),Tm(Q,A,m,r,u,F,Z));we<Se.length;we+=1){var De=Se[we],Ze=new ri;Ze.text=De,Ze.sections=Q.sections;for(var Qe=0;Qe<De.length;Qe++)Ze.sectionIndex.push(0);ie.push(Ze)}}else if(ye){ie=[];for(var xt=0,ot=ye(Q.text,Q.sectionIndex,Tm(Q,A,m,r,u,F,Z));xt<ot.length;xt+=1){var St=ot[xt],st=new ri;st.text=St[0],st.sectionIndex=St[1],st.sections=Q.sections,ie.push(st)}}else ie=function(vt,Ht){for(var Bt=[],er=vt.text,Tt=0,ar=0,Br=Ht;ar<Br.length;ar+=1){var Zr=Br[ar];Bt.push(vt.substring(Tt,Zr)),Tt=Zr}return Tt<er.length&&Bt.push(vt.substring(Tt,er.length)),Bt}(Q,Tm(Q,A,m,r,u,F,Z));var Ut=[],Pt={positionedLines:Ut,text:Q.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(vt,Ht,Bt,er,Tt,ar,Br,Zr,Hr,Fr,Gr,En){for(var Sn=0,ni=-17,Mn=0,ii=0,en=Zr==="right"?1:Zr==="left"?0:.5,zn=0,Kt=0,Sr=Tt;Kt<Sr.length;Kt+=1){var gr=Sr[Kt];gr.trim();var or=gr.getMaxScale(),hi=24*(or-1),Hn={positionedGlyphs:[],lineOffset:0};vt.positionedLines[zn]=Hn;var Pr=Hn.positionedGlyphs,ln=0;if(gr.length()){for(var $n=0;$n<gr.length();$n++){var sr=gr.getSection($n),ha=gr.getSectionIndex($n),Ki=gr.getCharCode($n),fa=0,tn=null,da=null,Io=null,Uu=24,Al=!(Hr===Wi.horizontal||!Gr&&!yu(Ki)||Gr&&(ef[Ki]||(Ja=Ki,rt.Arabic(Ja)||rt["Arabic Supplement"](Ja)||rt["Arabic Extended-A"](Ja)||rt["Arabic Presentation Forms-A"](Ja)||rt["Arabic Presentation Forms-B"](Ja))));if(sr.imageName){var Vu=er[sr.imageName];if(!Vu)continue;Io=sr.imageName,vt.iconsInText=vt.iconsInText||!0,da=Vu.paddedRect;var Xa=Vu.displaySize;sr.scale=24*sr.scale/En,fa=hi+(24-Xa[1]*sr.scale),Uu=(tn={width:Xa[0],height:Xa[1],left:1,top:-3,advance:Al?Xa[1]:Xa[0]}).advance;var ju=Al?Xa[0]*sr.scale-24*or:Xa[1]*sr.scale-24*or;ju>0&&ju>ln&&(ln=ju)}else{var cf=Bt[sr.fontStack],qu=cf&&cf[Ki];if(qu&&qu.rect)da=qu.rect,tn=qu.metrics;else{var hp=Ht[sr.fontStack],pf=hp&&hp[Ki];if(!pf)continue;tn=pf.metrics}fa=24*(or-sr.scale)}Al?(vt.verticalizable=!0,Pr.push({glyph:Ki,imageName:Io,x:Sn,y:ni+fa,vertical:Al,scale:sr.scale,fontStack:sr.fontStack,sectionIndex:ha,metrics:tn,rect:da}),Sn+=Uu*sr.scale+Fr):(Pr.push({glyph:Ki,imageName:Io,x:Sn,y:ni+fa,vertical:Al,scale:sr.scale,fontStack:sr.fontStack,sectionIndex:ha,metrics:tn,rect:da}),Sn+=tn.advance*sr.scale+Fr)}Pr.length!==0&&(Mn=Math.max(Sn-Fr,Mn),b2(Pr,0,Pr.length-1,en,ln)),Sn=0;var hf=ar*or+ln;Hn.lineOffset=Math.max(ln,hi),ni+=hf,ii=Math.max(hf,ii),++zn}else ni+=ar,++zn}var Ja,fp=ni- -17,Hu=Cm(Br),As=Hu.horizontalAlign,$u=Hu.verticalAlign;(function(ff,df,dp,mp,mf,gp,yp,vp,gf){var Zu,yf=(df-dp)*mf;Zu=gp!==yp?-vp*mp- -17:(-mp*gf+.5)*yp;for(var Gu=0,_p=ff;Gu<_p.length;Gu+=1)for(var Il=0,xp=_p[Gu].positionedGlyphs;Il<xp.length;Il+=1){var Wu=xp[Il];Wu.x+=yf,Wu.y+=Zu}})(vt.positionedLines,en,As,$u,Mn,ii,ar,fp,Tt.length),vt.top+=-$u*fp,vt.bottom=vt.top+fp,vt.left+=-As*Mn,vt.right=vt.left+Mn}(Pt,r,i,u,ie,v,w,T,M,A,O,G),!function(vt){for(var Ht=0,Bt=vt;Ht<Bt.length;Ht+=1)if(Bt[Ht].positionedGlyphs.length!==0)return!1;return!0}(Ut)&&Pt}ri.fromFeature=function(e,r){for(var i=new ri,u=0;u<e.sections.length;u++){var h=e.sections[u];h.image?i.addImageSection(h):i.addTextSection(h,r)}return i},ri.prototype.length=function(){return this.text.length},ri.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ri.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},ri.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ri.prototype.verticalizePunctuation=function(){this.text=function(e){for(var r="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,h=e.charCodeAt(i-1)||null;r+=u&&Zc(u)&&!sp[e[i+1]]||h&&Zc(h)&&!sp[e[i-1]]||!sp[e[i]]?e[i]:sp[e[i]]}return r}(this.text)},ri.prototype.trim=function(){for(var e=0,r=0;r<this.text.length&&ef[this.text.charCodeAt(r)];r++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&ef[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},ri.prototype.substring=function(e,r){var i=new ri;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i},ri.prototype.toString=function(){return this.text},ri.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(r,i){return Math.max(r,e.sections[i].scale)},0)},ri.prototype.addTextSection=function(e,r){this.text+=e.text,this.sections.push(zu.forText(e.scale,e.fontStack||r));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},ri.prototype.addImageSection=function(e){var r=e.image?e.image.name:"";if(r.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(zu.forImage(r)),this.sectionIndex.push(this.sections.length-1)):mr("Reached maximum number of images 6401")}else mr("Can't add FormattedSection with an empty image.")},ri.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ef={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bi={};function _v(e,r,i,u,h,m){if(r.imageName){var v=u[r.imageName];return v?v.displaySize[0]*r.scale*24/m+h:0}var w=i[r.fontStack],T=w&&w[e];return T?T.metrics.advance*r.scale+h:0}function xv(e,r,i,u){var h=Math.pow(e-r,2);return u?e<r?h/2:2*h:h+Math.abs(i)*i}function x2(e,r,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function bv(e,r,i,u,h,m){for(var v=null,w=xv(r,i,h,m),T=0,A=u;T<A.length;T+=1){var P=A[T],M=xv(r-P.x,i,h,m)+P.badness;M<=w&&(v=P,w=M)}return{index:e,x:r,priorBreak:v,badness:w}}function Tm(e,r,i,u,h,m,v){if(m!=="point")return[];if(!e)return[];for(var w,T=[],A=function(ie,Q,he,ye,we,Se){for(var De=0,Ze=0;Ze<ie.length();Ze++){var Qe=ie.getSection(Ze);De+=_v(ie.getCharCode(Ze),Qe,ye,we,Q,Se)}return De/Math.max(1,Math.ceil(De/he))}(e,r,i,u,h,v),P=e.text.indexOf("​")>=0,M=0,O=0;O<e.length();O++){var F=e.getSection(O),Z=e.getCharCode(O);if(ef[Z]||(M+=_v(Z,F,u,h,r,v)),O<e.length()-1){var G=!((w=Z)<11904||!(rt["Bopomofo Extended"](w)||rt.Bopomofo(w)||rt["CJK Compatibility Forms"](w)||rt["CJK Compatibility Ideographs"](w)||rt["CJK Compatibility"](w)||rt["CJK Radicals Supplement"](w)||rt["CJK Strokes"](w)||rt["CJK Symbols and Punctuation"](w)||rt["CJK Unified Ideographs Extension A"](w)||rt["CJK Unified Ideographs"](w)||rt["Enclosed CJK Letters and Months"](w)||rt["Halfwidth and Fullwidth Forms"](w)||rt.Hiragana(w)||rt["Ideographic Description Characters"](w)||rt["Kangxi Radicals"](w)||rt["Katakana Phonetic Extensions"](w)||rt.Katakana(w)||rt["Vertical Forms"](w)||rt["Yi Radicals"](w)||rt["Yi Syllables"](w)));(Bi[Z]||G||F.imageName)&&T.push(bv(O+1,M,A,T,x2(Z,e.getCharCode(O+1),G&&P),!1))}}return function ie(Q){return Q?ie(Q.priorBreak).concat(Q.index):[]}(bv(e.length(),M,A,T,0,!0))}function Cm(e){var r=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:r,verticalAlign:i}}function b2(e,r,i,u,h){if(u||h)for(var m=e[i],v=(e[i].x+m.metrics.advance*m.scale)*u,w=r;w<=i;w++)e[w].x-=v,e[w].y+=h}function wv(e,r,i,u,h,m){var v,w=e.image;if(w.content){var T=w.content,A=w.pixelRatio||1;v=[T[0]/A,T[1]/A,w.displaySize[0]-T[2]/A,w.displaySize[1]-T[3]/A]}var P,M,O,F,Z=r.left*m,G=r.right*m;i==="width"||i==="both"?(F=h[0]+Z-u[3],M=h[0]+G+u[1]):M=(F=h[0]+(Z+G-w.displaySize[0])/2)+w.displaySize[0];var ie=r.top*m,Q=r.bottom*m;return i==="height"||i==="both"?(P=h[1]+ie-u[0],O=h[1]+Q+u[2]):O=(P=h[1]+(ie+Q-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:P,right:M,bottom:O,left:F,collisionPadding:v}}Bi[10]=!0,Bi[32]=!0,Bi[38]=!0,Bi[40]=!0,Bi[41]=!0,Bi[43]=!0,Bi[45]=!0,Bi[47]=!0,Bi[173]=!0,Bi[183]=!0,Bi[8203]=!0,Bi[8208]=!0,Bi[8211]=!0,Bi[8231]=!0;var Lu=function(e){function r(i,u,h,m){e.call(this,i,u),this.angle=h,m!==void 0&&(this.segment=m)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(ze);function Am(e,r){var i=r.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Gt(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,h=i.interpolationType,m=0;m<u.length&&u[m]<=e;)m++;for(var v=m=Math.max(0,m-1);v<u.length&&u[v]<e+1;)v++;v=Math.min(u.length-1,v);var w=u[m],T=u[v];return i.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:T,minSize:i.evaluate(new Gt(w)),maxSize:i.evaluate(new Gt(T)),interpolationType:h}}function Ev(e,r,i){var u=r.uSize,h=i.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?an(h/128,i.upperSize/128,r.uSizeT):u}function Sv(e,r){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,m=h?Ot(Dn.interpolationFactor(h,r,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=an(e.minSize,e.maxSize,m):i=m}return{uSizeT:i,uSize:u}}ft("Anchor",Lu);var w2=Object.freeze({__proto__:null,getSizeData:Am,evaluateSizeForFeature:Ev,evaluateSizeForZoom:Sv,SIZE_PACK_FACTOR:128});function Tv(e,r,i,u,h){if(r.segment===void 0)return!0;for(var m=r,v=r.segment+1,w=0;w>-i/2;){if(--v<0)return!1;w-=e[v].dist(m),m=e[v]}w+=e[v].dist(e[v+1]),v++;for(var T=[],A=0;w<i/2;){var P=e[v],M=e[v+1];if(!M)return!1;var O=e[v-1].angleTo(P)-P.angleTo(M);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:O}),A+=O;w-T[0].distance>u;)A-=T.shift().angleDelta;if(A>h)return!1;v++,w+=P.dist(M)}return!0}function Cv(e){for(var r=0,i=0;i<e.length-1;i++)r+=e[i].dist(e[i+1]);return r}function Av(e,r,i){return e?.6*r*i:0}function Iv(e,r){return Math.max(e?e.right-e.left:0,r?r.right-r.left:0)}function E2(e,r,i,u,h,m){for(var v=Av(i,h,m),w=Iv(i,u)*m,T=0,A=Cv(e)/2,P=0;P<e.length-1;P++){var M=e[P],O=e[P+1],F=M.dist(O);if(T+F>A){var Z=(A-T)/F,G=an(M.x,O.x,Z),ie=an(M.y,O.y,Z),Q=new Lu(G,ie,O.angleTo(M),P);return Q._round(),!v||Tv(e,Q,w,v,r)?Q:void 0}T+=F}}function S2(e,r,i,u,h,m,v,w,T){var A=Av(u,m,v),P=Iv(u,h),M=P*v,O=e[0].x===0||e[0].x===T||e[0].y===0||e[0].y===T;return r-M<r/4&&(r=M+r/4),function F(Z,G,ie,Q,he,ye,we,Se,De){for(var Ze=ye/2,Qe=Cv(Z),xt=0,ot=G-ie,St=[],st=0;st<Z.length-1;st++){for(var Ut=Z[st],Pt=Z[st+1],vt=Ut.dist(Pt),Ht=Pt.angleTo(Ut);ot+ie<xt+vt;){var Bt=((ot+=ie)-xt)/vt,er=an(Ut.x,Pt.x,Bt),Tt=an(Ut.y,Pt.y,Bt);if(er>=0&&er<De&&Tt>=0&&Tt<De&&ot-Ze>=0&&ot+Ze<=Qe){var ar=new Lu(er,Tt,Ht,st);ar._round(),Q&&!Tv(Z,ar,ye,Q,he)||St.push(ar)}}xt+=vt}return Se||St.length||we||(St=F(Z,xt/2,ie,Q,he,ye,we,!0,De)),St}(e,O?r/2*w%r:(P/2+2*m)*v*w%r,r,A,i,M,O,!1,T)}function kv(e,r,i,u,h){for(var m=[],v=0;v<e.length;v++)for(var w=e[v],T=void 0,A=0;A<w.length-1;A++){var P=w[A],M=w[A+1];P.x<r&&M.x<r||(P.x<r?P=new ze(r,P.y+(r-P.x)/(M.x-P.x)*(M.y-P.y))._round():M.x<r&&(M=new ze(r,P.y+(r-P.x)/(M.x-P.x)*(M.y-P.y))._round()),P.y<i&&M.y<i||(P.y<i?P=new ze(P.x+(i-P.y)/(M.y-P.y)*(M.x-P.x),i)._round():M.y<i&&(M=new ze(P.x+(i-P.y)/(M.y-P.y)*(M.x-P.x),i)._round()),P.x>=u&&M.x>=u||(P.x>=u?P=new ze(u,P.y+(u-P.x)/(M.x-P.x)*(M.y-P.y))._round():M.x>=u&&(M=new ze(u,P.y+(u-P.x)/(M.x-P.x)*(M.y-P.y))._round()),P.y>=h&&M.y>=h||(P.y>=h?P=new ze(P.x+(h-P.y)/(M.y-P.y)*(M.x-P.x),h)._round():M.y>=h&&(M=new ze(P.x+(h-P.y)/(M.y-P.y)*(M.x-P.x),h)._round()),T&&P.equals(T[T.length-1])||m.push(T=[P]),T.push(M)))))}return m}function Pv(e,r,i,u){var h=[],m=e.image,v=m.pixelRatio,w=m.paddedRect.w-2,T=m.paddedRect.h-2,A=e.right-e.left,P=e.bottom-e.top,M=m.stretchX||[[0,w]],O=m.stretchY||[[0,T]],F=function(er,Tt){return er+Tt[1]-Tt[0]},Z=M.reduce(F,0),G=O.reduce(F,0),ie=w-Z,Q=T-G,he=0,ye=Z,we=0,Se=G,De=0,Ze=ie,Qe=0,xt=Q;if(m.content&&u){var ot=m.content;he=tf(M,0,ot[0]),we=tf(O,0,ot[1]),ye=tf(M,ot[0],ot[2]),Se=tf(O,ot[1],ot[3]),De=ot[0]-he,Qe=ot[1]-we,Ze=ot[2]-ot[0]-ye,xt=ot[3]-ot[1]-Se}var St=function(er,Tt,ar,Br){var Zr=rf(er.stretch-he,ye,A,e.left),Hr=nf(er.fixed-De,Ze,er.stretch,Z),Fr=rf(Tt.stretch-we,Se,P,e.top),Gr=nf(Tt.fixed-Qe,xt,Tt.stretch,G),En=rf(ar.stretch-he,ye,A,e.left),Sn=nf(ar.fixed-De,Ze,ar.stretch,Z),ni=rf(Br.stretch-we,Se,P,e.top),Mn=nf(Br.fixed-Qe,xt,Br.stretch,G),ii=new ze(Zr,Fr),en=new ze(En,Fr),zn=new ze(En,ni),Kt=new ze(Zr,ni),Sr=new ze(Hr/v,Gr/v),gr=new ze(Sn/v,Mn/v),or=r*Math.PI/180;if(or){var hi=Math.sin(or),Hn=Math.cos(or),Pr=[Hn,-hi,hi,Hn];ii._matMult(Pr),en._matMult(Pr),Kt._matMult(Pr),zn._matMult(Pr)}var ln=er.stretch+er.fixed,$n=Tt.stretch+Tt.fixed;return{tl:ii,tr:en,bl:Kt,br:zn,tex:{x:m.paddedRect.x+1+ln,y:m.paddedRect.y+1+$n,w:ar.stretch+ar.fixed-ln,h:Br.stretch+Br.fixed-$n},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Sr,pixelOffsetBR:gr,minFontScaleX:Ze/v/A,minFontScaleY:xt/v/P,isSDF:i}};if(u&&(m.stretchX||m.stretchY))for(var st=Mv(M,ie,Z),Ut=Mv(O,Q,G),Pt=0;Pt<st.length-1;Pt++)for(var vt=st[Pt],Ht=st[Pt+1],Bt=0;Bt<Ut.length-1;Bt++)h.push(St(vt,Ut[Bt],Ht,Ut[Bt+1]));else h.push(St({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return h}function tf(e,r,i){for(var u=0,h=0,m=e;h<m.length;h+=1){var v=m[h];u+=Math.max(r,Math.min(i,v[1]))-Math.max(r,Math.min(i,v[0]))}return u}function Mv(e,r,i){for(var u=[{fixed:-1,stretch:0}],h=0,m=e;h<m.length;h+=1){var v=m[h],w=v[0],T=v[1],A=u[u.length-1];u.push({fixed:w-A.stretch,stretch:A.stretch}),u.push({fixed:w-A.stretch,stretch:A.stretch+(T-w)})}return u.push({fixed:r+1,stretch:i}),u}function rf(e,r,i,u){return e/r*i+u}function nf(e,r,i,u){return e-r*i/u}var of=function(e,r,i,u,h,m,v,w,T,A){if(this.boxStartIndex=e.length,T){var P=m.top,M=m.bottom,O=m.collisionPadding;O&&(P-=O[1],M+=O[3]);var F=M-P;F>0&&(F=Math.max(10,F),this.circleDiameter=F)}else{var Z=m.top*v-w,G=m.bottom*v+w,ie=m.left*v-w,Q=m.right*v+w,he=m.collisionPadding;if(he&&(ie-=he[0]*v,Z-=he[1]*v,Q+=he[2]*v,G+=he[3]*v),A){var ye=new ze(ie,Z),we=new ze(Q,Z),Se=new ze(ie,G),De=new ze(Q,G),Ze=A*Math.PI/180;ye._rotate(Ze),we._rotate(Ze),Se._rotate(Ze),De._rotate(Ze),ie=Math.min(ye.x,we.x,Se.x,De.x),Q=Math.max(ye.x,we.x,Se.x,De.x),Z=Math.min(ye.y,we.y,Se.y,De.y),G=Math.max(ye.y,we.y,Se.y,De.y)}e.emplaceBack(r.x,r.y,ie,Z,Q,G,i,u,h)}this.boxEndIndex=e.length},Ru=function(e,r){if(e===void 0&&(e=[]),r===void 0&&(r=T2),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function T2(e,r){return e<r?-1:e>r?1:0}function C2(e,r,i){r===void 0&&(r=1),i===void 0&&(i=!1);for(var u=1/0,h=1/0,m=-1/0,v=-1/0,w=e[0],T=0;T<w.length;T++){var A=w[T];(!T||A.x<u)&&(u=A.x),(!T||A.y<h)&&(h=A.y),(!T||A.x>m)&&(m=A.x),(!T||A.y>v)&&(v=A.y)}var P=Math.min(m-u,v-h),M=P/2,O=new Ru([],A2);if(P===0)return new ze(u,h);for(var F=u;F<m;F+=P)for(var Z=h;Z<v;Z+=P)O.push(new Ou(F+M,Z+M,M,e));for(var G=function(he){for(var ye=0,we=0,Se=0,De=he[0],Ze=0,Qe=De.length,xt=Qe-1;Ze<Qe;xt=Ze++){var ot=De[Ze],St=De[xt],st=ot.x*St.y-St.x*ot.y;we+=(ot.x+St.x)*st,Se+=(ot.y+St.y)*st,ye+=3*st}return new Ou(we/ye,Se/ye,0,he)}(e),ie=O.length;O.length;){var Q=O.pop();(Q.d>G.d||!G.d)&&(G=Q,i&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,ie)),Q.max-G.d<=r||(O.push(new Ou(Q.p.x-(M=Q.h/2),Q.p.y-M,M,e)),O.push(new Ou(Q.p.x+M,Q.p.y-M,M,e)),O.push(new Ou(Q.p.x-M,Q.p.y+M,M,e)),O.push(new Ou(Q.p.x+M,Q.p.y+M,M,e)),ie+=4)}return i&&(console.log("num probes: "+ie),console.log("best distance: "+G.d)),G.p}function A2(e,r){return r.max-e.max}function Ou(e,r,i,u){this.p=new ze(e,r),this.h=i,this.d=function(h,m){for(var v=!1,w=1/0,T=0;T<m.length;T++)for(var A=m[T],P=0,M=A.length,O=M-1;P<M;O=P++){var F=A[P],Z=A[O];F.y>h.y!=Z.y>h.y&&h.x<(Z.x-F.x)*(h.y-F.y)/(Z.y-F.y)+F.x&&(v=!v),w=Math.min(w,Es(h,F,Z))}return(v?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}Ru.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Ru.prototype.pop=function(){if(this.length!==0){var e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}},Ru.prototype.peek=function(){return this.data[0]},Ru.prototype._up=function(e){for(var r=this.data,i=this.compare,u=r[e];e>0;){var h=e-1>>1,m=r[h];if(i(u,m)>=0)break;r[e]=m,e=h}r[e]=u},Ru.prototype._down=function(e){for(var r=this.data,i=this.compare,u=this.length>>1,h=r[e];e<u;){var m=1+(e<<1),v=r[m],w=m+1;if(w<this.length&&i(r[w],v)<0&&(m=w,v=r[w]),i(v,h)>=0)break;r[e]=v,e=m}r[e]=h};var Im=Number.POSITIVE_INFINITY;function zv(e,r){return r[1]!==Im?function(i,u,h){var m=0,v=0;switch(u=Math.abs(u),h=Math.abs(h),i){case"top-right":case"top-left":case"top":v=h-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-h}switch(i){case"top-right":case"bottom-right":case"right":m=-u;break;case"top-left":case"bottom-left":case"left":m=u}return[m,v]}(e,r[0],r[1]):function(i,u){var h=0,m=0;u<0&&(u=0);var v=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":m=v-7;break;case"bottom-right":case"bottom-left":m=7-v;break;case"bottom":m=7-u;break;case"top":m=u-7}switch(i){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=u;break;case"right":h=-u}return[h,m]}(e,r[0])}function km(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lv(e,r,i,u,h,m,v,w,T,A,P,M,O,F,Z){var G=function(we,Se,De,Ze,Qe,xt,ot,St){for(var st=Ze.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,Ut=[],Pt=0,vt=Se.positionedLines;Pt<vt.length;Pt+=1)for(var Ht=vt[Pt],Bt=0,er=Ht.positionedGlyphs;Bt<er.length;Bt+=1){var Tt=er[Bt];if(Tt.rect){var ar=Tt.rect||{},Br=4,Zr=!0,Hr=1,Fr=0,Gr=(Qe||St)&&Tt.vertical,En=Tt.metrics.advance*Tt.scale/2;if(St&&Se.verticalizable&&(Fr=Ht.lineOffset/2-(Tt.imageName?-(24-Tt.metrics.width*Tt.scale)/2:24*(Tt.scale-1))),Tt.imageName){var Sn=ot[Tt.imageName];Zr=Sn.sdf,Br=1/(Hr=Sn.pixelRatio)}var ni=Qe?[Tt.x+En,Tt.y]:[0,0],Mn=Qe?[0,0]:[Tt.x+En+De[0],Tt.y+De[1]-Fr],ii=[0,0];Gr&&(ii=Mn,Mn=[0,0]);var en=(Tt.metrics.left-Br)*Tt.scale-En+Mn[0],zn=(-Tt.metrics.top-Br)*Tt.scale+Mn[1],Kt=en+ar.w*Tt.scale/Hr,Sr=zn+ar.h*Tt.scale/Hr,gr=new ze(en,zn),or=new ze(Kt,zn),hi=new ze(en,Sr),Hn=new ze(Kt,Sr);if(Gr){var Pr=new ze(-En,En- -17),ln=-Math.PI/2,$n=12-En,sr=new ze(22-$n,-(Tt.imageName?$n:0)),ha=new(Function.prototype.bind.apply(ze,[null].concat(ii)));gr._rotateAround(ln,Pr)._add(sr)._add(ha),or._rotateAround(ln,Pr)._add(sr)._add(ha),hi._rotateAround(ln,Pr)._add(sr)._add(ha),Hn._rotateAround(ln,Pr)._add(sr)._add(ha)}if(st){var Ki=Math.sin(st),fa=Math.cos(st),tn=[fa,-Ki,Ki,fa];gr._matMult(tn),or._matMult(tn),hi._matMult(tn),Hn._matMult(tn)}var da=new ze(0,0),Io=new ze(0,0);Ut.push({tl:gr,tr:or,bl:hi,br:Hn,tex:ar,writingMode:Se.writingMode,glyphOffset:ni,sectionIndex:Tt.sectionIndex,isSDF:Zr,pixelOffsetTL:da,pixelOffsetBR:Io,minFontScaleX:0,minFontScaleY:0})}}return Ut}(0,i,w,h,m,v,u,e.allowVerticalPlacement),ie=e.textSizeData,Q=null;ie.kind==="source"?(Q=[128*h.layout.get("text-size").evaluate(v,{})])[0]>32640&&mr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ie.kind==="composite"&&((Q=[128*F.compositeTextSizes[0].evaluate(v,{},Z),128*F.compositeTextSizes[1].evaluate(v,{},Z)])[0]>32640||Q[1]>32640)&&mr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,G,Q,w,m,v,A,r,T.lineStartIndex,T.lineLength,O,Z);for(var he=0,ye=P;he<ye.length;he+=1)M[ye[he]]=e.text.placedSymbolArray.length-1;return 4*G.length}function Rv(e){for(var r in e)return e[r];return null}function I2(e,r,i,u){var h=e.compareText;if(r in h){for(var m=h[r],v=m.length-1;v>=0;v--)if(u.dist(m[v])<i)return!0}else h[r]=[];return h[r].push(u),!1}var k2=ku.VectorTileFeature.types,P2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function af(e,r,i,u,h,m,v,w,T,A,P,M,O){var F=w?Math.min(32640,Math.round(w[0])):0,Z=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(r,i,Math.round(32*u),Math.round(32*h),m,v,(F<<1)+(T?1:0),Z,16*A,16*P,256*M,256*O)}function Pm(e,r,i){e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i)}function M2(e){for(var r=0,i=e.sections;r<i.length;r+=1)if(vu(i[r].text))return!0;return!1}var Du=function(e){this.layoutVertexArray=new wu,this.indexArray=new aa,this.programConfigurations=e,this.segments=new j,this.dynamicLayoutVertexArray=new xs,this.opacityVertexArray=new yl,this.placedSymbolArray=new c};Du.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Du.prototype.upload=function(e,r,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,n2.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,i2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,P2,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},Du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",Du);var cp=function(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new j,this.collisionVertexArray=new Yc};cp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,o2.members,!0)},cp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",cp);var br=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Di([]),this.placementViewportMatrix=Di([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Am(this.zoom,r["text-size"]),this.iconSizeData=Am(this.zoom,r["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),h=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(m){return Wi[m]})),this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id}),this.sourceID=e.sourceID};br.prototype.createArrays=function(){this.text=new Du(new It(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Du(new It(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new b,this.lineVertexArray=new S,this.symbolInstances=new _},br.prototype.calculateGlyphDependencies=function(e,r,i,u,h){for(var m=0;m<e.length;m++)if(r[e.charCodeAt(m)]=!0,(i||u)&&h){var v=sp[e.charAt(m)];v&&(r[v.charCodeAt(0)]=!0)}},br.prototype.populate=function(e,r,i){var u=this.layers[0],h=u.layout,m=h.get("text-font"),v=h.get("text-field"),w=h.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof Cn&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),A=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,P=h.get("symbol-sort-key");if(this.features=[],T||A){for(var M=r.iconDependencies,O=r.glyphDependencies,F=r.availableImages,Z=new Gt(this.zoom),G=0,ie=e;G<ie.length;G+=1){var Q=ie[G],he=Q.feature,ye=Q.id,we=Q.index,Se=Q.sourceLayerIndex,De=u._featureFilter.needGeometry,Ze=Qr(he,De);if(u._featureFilter.filter(Z,Ze,i)){De||(Ze.geometry=qr(he));var Qe=void 0;if(T){var xt=u.getValueAndResolveTokens("text-field",Ze,i,F),ot=Cn.factory(xt);M2(ot)&&(this.hasRTLText=!0),(!this.hasRTLText||Wc()==="unavailable"||this.hasRTLText&&Oi.isParsed())&&(Qe=s2(ot,u,Ze))}var St=void 0;if(A){var st=u.getValueAndResolveTokens("icon-image",Ze,i,F);St=st instanceof li?st:li.fromString(st)}if(Qe||St){var Ut=this.sortFeaturesByKey?P.evaluate(Ze,{},i):void 0;if(this.features.push({id:ye,text:Qe,icon:St,index:we,sourceLayerIndex:Se,geometry:Ze.geometry,properties:he.properties,type:k2[he.type],sortKey:Ut}),St&&(M[St.name]=!0),Qe){var Pt=m.evaluate(Ze,{},i).join(","),vt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wi.vertical)>=0;for(var Ht=0,Bt=Qe.sections;Ht<Bt.length;Ht+=1){var er=Bt[Ht];if(er.image)M[er.image.name]=!0;else{var Tt=$c(Qe.toString()),ar=er.fontStack||Pt,Br=O[ar]=O[ar]||{};this.calculateGlyphDependencies(er.text,Br,vt,this.allowVerticalPlacement,Tt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(Zr){var Hr={},Fr={},Gr=[],En=0;function Sn(Pr){Gr.push(Zr[Pr]),En++}function ni(Pr,ln,$n){var sr=Fr[Pr];return delete Fr[Pr],Fr[ln]=sr,Gr[sr].geometry[0].pop(),Gr[sr].geometry[0]=Gr[sr].geometry[0].concat($n[0]),sr}function Mn(Pr,ln,$n){var sr=Hr[ln];return delete Hr[ln],Hr[Pr]=sr,Gr[sr].geometry[0].shift(),Gr[sr].geometry[0]=$n[0].concat(Gr[sr].geometry[0]),sr}function ii(Pr,ln,$n){var sr=$n?ln[0][ln[0].length-1]:ln[0][0];return Pr+":"+sr.x+":"+sr.y}for(var en=0;en<Zr.length;en++){var zn=Zr[en],Kt=zn.geometry,Sr=zn.text?zn.text.toString():null;if(Sr){var gr=ii(Sr,Kt),or=ii(Sr,Kt,!0);if(gr in Fr&&or in Hr&&Fr[gr]!==Hr[or]){var hi=Mn(gr,or,Kt),Hn=ni(gr,or,Gr[hi].geometry);delete Hr[gr],delete Fr[or],Fr[ii(Sr,Gr[Hn].geometry,!0)]=Hn,Gr[hi].geometry=null}else gr in Fr?ni(gr,or,Kt):or in Hr?Mn(gr,or,Kt):(Sn(en),Hr[gr]=En-1,Fr[or]=En-1)}else Sn(en)}return Gr.filter(function(Pr){return Pr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Zr,Hr){return Zr.sortKey-Hr.sortKey})}},br.prototype.update=function(e,r,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,i))},br.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},br.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},br.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},br.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},br.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},br.prototype.addToLineVertexArray=function(e,r){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(r[e.segment+1]),h=e.dist(r[e.segment]),m={},v=e.segment+1;v<r.length;v++)m[v]={x:r[v].x,y:r[v].y,tileUnitDistanceFromAnchor:u},v<r.length-1&&(u+=r[v+1].dist(r[v]));for(var w=e.segment||0;w>=0;w--)m[w]={x:r[w].x,y:r[w].y,tileUnitDistanceFromAnchor:h},w>0&&(h+=r[w-1].dist(r[w]));for(var T=0;T<r.length;T++){var A=m[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},br.prototype.addSymbols=function(e,r,i,u,h,m,v,w,T,A,P,M){for(var O=e.indexArray,F=e.layoutVertexArray,Z=e.segments.prepareSegment(4*r.length,F,O,this.canOverlap?m.sortKey:void 0),G=this.glyphOffsetArray.length,ie=Z.vertexLength,Q=this.allowVerticalPlacement&&v===Wi.vertical?Math.PI/2:0,he=m.text&&m.text.sections,ye=0;ye<r.length;ye++){var we=r[ye],Se=we.tl,De=we.tr,Ze=we.bl,Qe=we.br,xt=we.tex,ot=we.pixelOffsetTL,St=we.pixelOffsetBR,st=we.minFontScaleX,Ut=we.minFontScaleY,Pt=we.glyphOffset,vt=we.isSDF,Ht=we.sectionIndex,Bt=Z.vertexLength,er=Pt[1];af(F,w.x,w.y,Se.x,er+Se.y,xt.x,xt.y,i,vt,ot.x,ot.y,st,Ut),af(F,w.x,w.y,De.x,er+De.y,xt.x+xt.w,xt.y,i,vt,St.x,ot.y,st,Ut),af(F,w.x,w.y,Ze.x,er+Ze.y,xt.x,xt.y+xt.h,i,vt,ot.x,St.y,st,Ut),af(F,w.x,w.y,Qe.x,er+Qe.y,xt.x+xt.w,xt.y+xt.h,i,vt,St.x,St.y,st,Ut),Pm(e.dynamicLayoutVertexArray,w,Q),O.emplaceBack(Bt,Bt+1,Bt+2),O.emplaceBack(Bt+1,Bt+2,Bt+3),Z.vertexLength+=4,Z.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),ye!==r.length-1&&Ht===r[ye+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,m,m.index,{},M,he&&he[Ht])}e.placedSymbolArray.emplaceBack(w.x,w.y,G,this.glyphOffsetArray.length-G,ie,T,A,w.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],v,0,!1,0,P)},br.prototype._addCollisionDebugVertex=function(e,r,i,u,h,m){return r.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,h,Math.round(m.x),Math.round(m.y))},br.prototype.addCollisionDebugVertices=function(e,r,i,u,h,m,v){var w=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),T=w.vertexLength,A=h.layoutVertexArray,P=h.collisionVertexArray,M=v.anchorX,O=v.anchorY;this._addCollisionDebugVertex(A,P,m,M,O,new ze(e,r)),this._addCollisionDebugVertex(A,P,m,M,O,new ze(i,r)),this._addCollisionDebugVertex(A,P,m,M,O,new ze(i,u)),this._addCollisionDebugVertex(A,P,m,M,O,new ze(e,u)),w.vertexLength+=4;var F=h.indexArray;F.emplaceBack(T,T+1),F.emplaceBack(T+1,T+2),F.emplaceBack(T+2,T+3),F.emplaceBack(T+3,T),w.primitiveLength+=4},br.prototype.addDebugCollisionBoxes=function(e,r,i,u){for(var h=e;h<r;h++){var m=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,i)}},br.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cp(bs,hv.members,vl),this.iconCollisionBox=new cp(bs,hv.members,vl);for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},br.prototype._deserializeCollisionBoxesForSymbol=function(e,r,i,u,h,m,v,w,T){for(var A={},P=r;P<i;P++){var M=e.get(P);A.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},A.textFeatureIndex=M.featureIndex;break}for(var O=u;O<h;O++){var F=e.get(O);A.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},A.verticalTextFeatureIndex=F.featureIndex;break}for(var Z=m;Z<v;Z++){var G=e.get(Z);A.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},A.iconFeatureIndex=G.featureIndex;break}for(var ie=w;ie<T;ie++){var Q=e.get(ie);A.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},A.verticalIconFeatureIndex=Q.featureIndex;break}return A},br.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},br.prototype.hasTextData=function(){return this.text.segments.get().length>0},br.prototype.hasIconData=function(){return this.icon.segments.get().length>0},br.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},br.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},br.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},br.prototype.addIndicesForPlacedSymbol=function(e,r){for(var i=e.placedSymbolArray.get(r),u=i.vertexStartIndex+4*i.numGlyphs,h=i.vertexStartIndex;h<u;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},br.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(e),i=Math.cos(e),u=[],h=[],m=[],v=0;v<this.symbolInstances.length;++v){m.push(v);var w=this.symbolInstances.get(v);u.push(0|Math.round(r*w.anchorX+i*w.anchorY)),h.push(w.featureIndex)}return m.sort(function(T,A){return u[T]-u[A]||h[A]-h[T]}),m},br.prototype.addToSortKeyRanges=function(e,r){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})},br.prototype.sortFeatures=function(e){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var h=this.symbolInstances.get(u[i]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(m,v,w){m>=0&&w.indexOf(m)===v&&r.addIndicesForPlacedSymbol(r.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",br,{omit:["layers","collisionBoxArray","features","compareText"]}),br.MAX_GLYPHS=65535,br.addDynamicAttributes=Pm;var z2=new Fn({"symbol-placement":new wt(V.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new wt(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(V.layout_symbol["icon-size"]),"icon-text-fit":new wt(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(V.layout_symbol["icon-image"]),"icon-rotate":new yt(V.layout_symbol["icon-rotate"]),"icon-padding":new wt(V.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(V.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(V.layout_symbol["icon-offset"]),"icon-anchor":new yt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(V.layout_symbol["text-rotation-alignment"]),"text-field":new yt(V.layout_symbol["text-field"]),"text-font":new yt(V.layout_symbol["text-font"]),"text-size":new yt(V.layout_symbol["text-size"]),"text-max-width":new yt(V.layout_symbol["text-max-width"]),"text-line-height":new wt(V.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(V.layout_symbol["text-letter-spacing"]),"text-justify":new yt(V.layout_symbol["text-justify"]),"text-radial-offset":new yt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(V.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(V.layout_symbol["text-anchor"]),"text-max-angle":new wt(V.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(V.layout_symbol["text-writing-mode"]),"text-rotate":new yt(V.layout_symbol["text-rotate"]),"text-padding":new wt(V.layout_symbol["text-padding"]),"text-keep-upright":new wt(V.layout_symbol["text-keep-upright"]),"text-transform":new yt(V.layout_symbol["text-transform"]),"text-offset":new yt(V.layout_symbol["text-offset"]),"text-allow-overlap":new wt(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new wt(V.layout_symbol["text-ignore-placement"]),"text-optional":new wt(V.layout_symbol["text-optional"])}),Mm={paint:new Fn({"icon-opacity":new yt(V.paint_symbol["icon-opacity"]),"icon-color":new yt(V.paint_symbol["icon-color"]),"icon-halo-color":new yt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(V.paint_symbol["text-opacity"]),"text-color":new yt(V.paint_symbol["text-color"],{runtimeType:it,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(V.paint_symbol["text-halo-color"]),"text-halo-width":new yt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(V.paint_symbol["text-halo-blur"]),"text-translate":new wt(V.paint_symbol["text-translate"]),"text-translate-anchor":new wt(V.paint_symbol["text-translate-anchor"])}),layout:z2},Bu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ht,this.defaultValue=e};Bu.prototype.evaluate=function(e){if(e.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Bu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Bu.prototype.outputDefined=function(){return!1},Bu.prototype.serialize=function(){return null},ft("FormatSectionOverride",Bu,{omit:["defaultValue"]});var L2=function(e){function r(i){e.call(this,i,Mm)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var m=[],v=0,w=h;v<w.length;v+=1){var T=w[v];m.indexOf(T)<0&&m.push(T)}this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(i,u,h,m){var v=this.layout.get(i).evaluate(u,{},h,m),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||al(w.value)||!v?v:function(T,A){return A.replace(/{([^{}]+)}/g,function(P,M){return M in T?String(T[M]):""})}(u.properties,v)},r.prototype.createBucket=function(i){return new br(i)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var i=0,u=Mm.paint.overridableProperties;i<u.length;i+=1){var h=u[i];if(r.hasPaintOverride(this.layout,h)){var m,v=this.paint.get(h),w=new Bu(v),T=new ds(w,v.property.specification);m=v.value.kind==="constant"||v.value.kind==="source"?new sl("source",T):new ms("composite",T,v.value.zoomStops,v.value._interpolationType),this.paint._values[h]=new Qn(v.property,m,v.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&r.hasPaintOverride(this.layout,i)},r.hasPaintOverride=function(i,u){var h=i.get("text-field"),m=Mm.paint.properties[u],v=!1,w=function(P){for(var M=0,O=P;M<O.length;M+=1)if(m.overrides&&m.overrides.hasOverride(O[M]))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Cn)w(h.value.value.sections);else if(h.value.kind==="source"){var T=function(P){v||(P instanceof Jn&&Yr(P.value)===wr?w(P.value.sections):P instanceof ao?w(P.sections):P.eachChild(T))},A=h.value;A._styleExpression&&T(A._styleExpression.expression)}return v},r}(So),R2={paint:new Fn({"background-color":new wt(V.paint_background["background-color"]),"background-pattern":new ei(V.paint_background["background-pattern"]),"background-opacity":new wt(V.paint_background["background-opacity"])})},O2=function(e){function r(i){e.call(this,i,R2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(So),D2={paint:new Fn({"raster-opacity":new wt(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(V.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(V.paint_raster["raster-saturation"]),"raster-contrast":new wt(V.paint_raster["raster-contrast"]),"raster-resampling":new wt(V.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(V.paint_raster["raster-fade-duration"])})},B2=function(e){function r(i){e.call(this,i,D2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(So),F2=function(e){function r(i){e.call(this,i,{}),this.implementation=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},r.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},r}(So),N2={circle:mm,heatmap:ww,hillshade:Sw,fill:Vw,"fill-extrusion":Xw,line:r2,symbol:L2,background:O2,raster:B2},Ov=xe.HTMLImageElement,Dv=xe.HTMLCanvasElement,Bv=xe.HTMLVideoElement,Fv=xe.ImageData,sf=xe.ImageBitmap,Sl=function(e,r,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,u)};Sl.prototype.update=function(e,r,i){var u=e.width,h=e.height,m=!(this.size&&this.size[0]===u&&this.size[1]===h||i),v=this.context,w=v.gl;if(this.useMipmap=!!(r&&r.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!r||r.premultiply!==!1)),m)this.size=[u,h],e instanceof Ov||e instanceof Dv||e instanceof Bv||e instanceof Fv||sf&&e instanceof sf?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,u,h,0,this.format,w.UNSIGNED_BYTE,e.data);else{var T=i||{x:0,y:0},A=T.x,P=T.y;e instanceof Ov||e instanceof Dv||e instanceof Bv||e instanceof Fv||sf&&e instanceof sf?w.texSubImage2D(w.TEXTURE_2D,0,A,P,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,A,P,u,h,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},Sl.prototype.bind=function(e,r,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),r!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrap=r)},Sl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var zm=function(e){var r=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};zm.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},zm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Fu=function(e,r,i){this.target=e,this.parent=r,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Mi(["receive","process"],this),this.invoker=new zm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?e:xe};function Nv(e,r,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}Fu.prototype.send=function(e,r,i,u,h){var m=this;h===void 0&&(h=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var w=Ge(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:lo(r,w)},w),{cancel:function(){i&&delete m.callbacks[v],m.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:m.mapId})}}},Fu.prototype.receive=function(e){var r=e.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else oe()||r.mustQueue?(this.tasks[i]=r,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,r)},Fu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(e,r)}},Fu.prototype.processTask=function(e,r){var i=this;if(r.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(r.error?u(vi(r.error)):u(null,vi(r.data)))}else{var h=!1,m=Ge(this.globalScope)?void 0:[],v=r.hasCallback?function(P,M){h=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:P?lo(P):null,data:lo(M,m)},m)}:function(P){h=!0},w=null,T=vi(r.data);if(this.parent[r.type])w=this.parent[r.type](r.sourceMapId,T,v);else if(this.parent.getWorkerSource){var A=r.type.split(".");w=this.parent.getWorkerSource(r.sourceMapId,A[0],T.source)[A[1]](T,v)}else v(new Error("Could not find function "+r.type));!h&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},Fu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var mn=function(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};mn.prototype.setNorthEast=function(e){return this._ne=e instanceof Dr?new Dr(e.lng,e.lat):Dr.convert(e),this},mn.prototype.setSouthWest=function(e){return this._sw=e instanceof Dr?new Dr(e.lng,e.lat):Dr.convert(e),this},mn.prototype.extend=function(e){var r,i,u=this._sw,h=this._ne;if(e instanceof Dr)r=e,i=e;else{if(!(e instanceof mn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(mn.convert(e)):this.extend(Dr.convert(e)):this;if(i=e._ne,!(r=e._sw)||!i)return this}return u||h?(u.lng=Math.min(r.lng,u.lng),u.lat=Math.min(r.lat,u.lat),h.lng=Math.max(i.lng,h.lng),h.lat=Math.max(i.lat,h.lat)):(this._sw=new Dr(r.lng,r.lat),this._ne=new Dr(i.lng,i.lat)),this},mn.prototype.getCenter=function(){return new Dr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},mn.prototype.getSouthWest=function(){return this._sw},mn.prototype.getNorthEast=function(){return this._ne},mn.prototype.getNorthWest=function(){return new Dr(this.getWest(),this.getNorth())},mn.prototype.getSouthEast=function(){return new Dr(this.getEast(),this.getSouth())},mn.prototype.getWest=function(){return this._sw.lng},mn.prototype.getSouth=function(){return this._sw.lat},mn.prototype.getEast=function(){return this._ne.lng},mn.prototype.getNorth=function(){return this._ne.lat},mn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},mn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},mn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},mn.prototype.contains=function(e){var r=Dr.convert(e),i=r.lng,u=r.lat,h=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h},mn.convert=function(e){return!e||e instanceof mn?e:new mn(e)};var Dr=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid LngLat object: ("+e+", "+r+")");if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dr.prototype.wrap=function(){return new Dr(rr(this.lng,-180,180),this.lat)},Dr.prototype.toArray=function(){return[this.lng,this.lat]},Dr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dr.prototype.distanceTo=function(e){var r=Math.PI/180,i=this.lat*r,u=e.lat*r,h=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(h,1))},Dr.prototype.toBounds=function(e){e===void 0&&(e=0);var r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new mn(new Dr(this.lng-i,this.lat-r),new Dr(this.lng+i,this.lat+r))},Dr.convert=function(e){if(e instanceof Dr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Dr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Dr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Uv=2*Math.PI*63710088e-1;function Vv(e){return Uv*Math.cos(e*Math.PI/180)}function jv(e){return(180+e)/360}function qv(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Hv(e,r){return e/Vv(r)}function Lm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Tl=function(e,r,i){i===void 0&&(i=0),this.x=+e,this.y=+r,this.z=+i};Tl.fromLngLat=function(e,r){r===void 0&&(r=0);var i=Dr.convert(e);return new Tl(jv(i.lng),qv(i.lat),Hv(r,i.lat))},Tl.prototype.toLngLat=function(){return new Dr(360*this.x-180,Lm(this.y))},Tl.prototype.toAltitude=function(){return this.z*Vv(Lm(this.y))},Tl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Uv*(e=Lm(this.y),1/Math.cos(e*Math.PI/180));var e};var Cl=function(e,r,i){this.z=e,this.x=r,this.y=i,this.key=pp(0,e,e,r,i)};Cl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Cl.prototype.url=function(e,r){var i,u,h,m,v,w=(u=this.y,h=this.z,m=Nv(256*(i=this.x),256*(u=Math.pow(2,h)-u-1),h),v=Nv(256*(i+1),256*(u+1),h),m[0]+","+m[1]+","+v[0]+","+v[1]),T=function(A,P,M){for(var O,F="",Z=A;Z>0;Z--)F+=(P&(O=1<<Z-1)?1:0)+(M&O?2:0);return F}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",w)},Cl.prototype.getTilePoint=function(e){var r=Math.pow(2,this.z);return new ze(8192*(e.x*r-this.x),8192*(e.y*r-this.y))},Cl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var $v=function(e,r){this.wrap=e,this.canonical=r,this.key=pp(e,r.z,r.z,r.x,r.y)},gn=function(e,r,i,u,h){this.overscaledZ=e,this.wrap=r,this.canonical=new Cl(i,+u,+h),this.key=pp(r,e,i,u,h)};function pp(e,r,i,u,h){(e*=2)<0&&(e=-1*e-1);var m=1<<i;return(m*m*e+m*h+u).toString(36)+i.toString(36)+r.toString(36)}gn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},gn.prototype.scaledTo=function(e){var r=this.canonical.z-e;return e>this.canonical.z?new gn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gn(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)},gn.prototype.calculateScaledKey=function(e,r){var i=this.canonical.z-e;return e>this.canonical.z?pp(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):pp(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)},gn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r},gn.prototype.children=function(e){if(this.overscaledZ>=e)return[new gn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new gn(r,this.wrap,r,i,u),new gn(r,this.wrap,r,i+1,u),new gn(r,this.wrap,r,i,u+1),new gn(r,this.wrap,r,i+1,u+1)]},gn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},gn.prototype.wrapped=function(){return new gn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},gn.prototype.unwrapTo=function(e){return new gn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},gn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},gn.prototype.toUnwrapped=function(){return new $v(this.wrap,this.canonical)},gn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},gn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Tl(e.x-this.wrap,e.y))},ft("CanonicalTileID",Cl),ft("OverscaledTileID",gn,{omit:["posMatrix"]});var Wa=function(e,r,i){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return mr('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var u=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=i||"mapbox";for(var h=0;h<u;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(u,h)]=this.data[this._idx(u-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,u)]=this.data[this._idx(h,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Wa.prototype.get=function(e,r){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},Wa.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Wa.prototype._idx=function(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)},Wa.prototype._unpackMapbox=function(e,r,i){return(256*e*256+256*r+i)/10-1e4},Wa.prototype._unpackTerrarium=function(e,r,i){return 256*e+r+i/256-32768},Wa.prototype.getPixels=function(){return new Ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Wa.prototype.backfillBorder=function(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=r*this.dim,h=r*this.dim+this.dim,m=i*this.dim,v=i*this.dim+this.dim;switch(r){case-1:u=h-1;break;case 1:h=u+1}switch(i){case-1:m=v-1;break;case 1:v=m+1}for(var w=-r*this.dim,T=-i*this.dim,A=m;A<v;A++)for(var P=u;P<h;P++)this.data[this._idx(P,A)]=e.data[this._idx(P+w,A+T)]},ft("DEMData",Wa);var lf=function(e){this._stringToNumber={},this._numberToString=[];for(var r=0;r<e.length;r++){var i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}};lf.prototype.encode=function(e){return this._stringToNumber[e]},lf.prototype.decode=function(e){return this._numberToString[e]};var uf=function(e,r,i,u,h){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=i,e._y=u,this.properties=e.properties,this.id=h},Rm={geometry:{configurable:!0}};Rm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rm.geometry.set=function(e){this._geometry=e},uf.prototype.toJSON=function(){var e={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e},Object.defineProperties(uf.prototype,Rm);var Nu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Nu.prototype.updateState=function(e,r,i){var u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Dt(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==u&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var m in this.deletedStates[e][u]={},this.state[e][u])i[m]||(this.deletedStates[e][u][m]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][v]===null&&delete this.deletedStates[e][u][v]},Nu.prototype.removeFeatureState=function(e,r,i){if(this.deletedStates[e]!==null){var u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},Nu.prototype.getState=function(e,r){var i=String(r),u=Dt({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][r];if(h===null)return{};for(var m in h)delete u[m]}return u},Nu.prototype.initializeTileState=function(e,r){e.setFeatureState(this.state,r)},Nu.prototype.coalesceChanges=function(e,r){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var h={};for(var m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Dt(this.state[u][m],this.stateChanges[u][m]),h[m]=this.state[u][m];i[u]=h}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var w={};if(this.deletedStates[v]===null)for(var T in this.state[v])w[T]={},this.state[v][T]={};else for(var A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else for(var P=0,M=Object.keys(this.deletedStates[v][A]);P<M.length;P+=1)delete this.state[v][A][M[P]];w[A]=this.state[v][A]}i[v]=i[v]||{},Dt(i[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var O in e)e[O].setFeatureState(i,r)};var Ka=function(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Fo(8192,16,0),this.grid3D=new Fo(8192,16,0),this.featureIndexArray=new L,this.promoteId=r};function Zv(e,r,i,u,h){return cn(e,function(m,v){var w=r instanceof gl?r.get(v):null;return w&&w.evaluate?w.evaluate(i,u,h):w})}function Gv(e){for(var r=1/0,i=1/0,u=-1/0,h=-1/0,m=0,v=e;m<v.length;m+=1){var w=v[m];r=Math.min(r,w.x),i=Math.min(i,w.y),u=Math.max(u,w.x),h=Math.max(h,w.y)}return{minX:r,minY:i,maxX:u,maxY:h}}function U2(e,r){return r-e}Ka.prototype.insert=function(e,r,i,u,h,m){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,h);for(var w=m?this.grid3D:this.grid,T=0;T<r.length;T++){for(var A=r[T],P=[1/0,1/0,-1/0,-1/0],M=0;M<A.length;M++){var O=A[M];P[0]=Math.min(P[0],O.x),P[1]=Math.min(P[1],O.y),P[2]=Math.max(P[2],O.x),P[3]=Math.max(P[3],O.y)}P[0]<8192&&P[1]<8192&&P[2]>=0&&P[3]>=0&&w.insert(v,P[0],P[1],P[2],P[3])}},Ka.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ku.VectorTile(new Xh(this.rawTileData)).layers,this.sourceLayerCoder=new lf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ka.prototype.query=function(e,r,i,u){var h=this;this.loadVTLayers();for(var m=e.params||{},v=8192/e.tileSize/e.scale,w=hu(m.filter),T=e.queryGeometry,A=e.queryPadding*v,P=Gv(T),M=this.grid.query(P.minX-A,P.minY-A,P.maxX+A,P.maxY+A),O=Gv(e.cameraQueryGeometry),F=this.grid3D.query(O.minX-A,O.minY-A,O.maxX+A,O.maxY+A,function(we,Se,De,Ze){return function(Qe,xt,ot,St,st){for(var Ut=0,Pt=Qe;Ut<Pt.length;Ut+=1){var vt=Pt[Ut];if(xt<=vt.x&&ot<=vt.y&&St>=vt.x&&st>=vt.y)return!0}var Ht=[new ze(xt,ot),new ze(xt,st),new ze(St,st),new ze(St,ot)];if(Qe.length>2){for(var Bt=0,er=Ht;Bt<er.length;Bt+=1)if(Co(Qe,er[Bt]))return!0}for(var Tt=0;Tt<Qe.length-1;Tt++)if(bl(Qe[Tt],Qe[Tt+1],Ht))return!0;return!1}(e.cameraQueryGeometry,we-A,Se-A,De+A,Ze+A)}),Z=0,G=F;Z<G.length;Z+=1)M.push(G[Z]);M.sort(U2);for(var ie,Q={},he=function(we){var Se=M[we];if(Se!==ie){ie=Se;var De=h.featureIndexArray.get(Se),Ze=null;h.loadMatchingFeature(Q,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,w,m.layers,m.availableImages,r,i,u,function(Qe,xt,ot){return Ze||(Ze=qr(Qe)),xt.queryIntersectsFeature(T,Qe,ot,Ze,h.z,e.transform,v,e.pixelPosMatrix)})}},ye=0;ye<M.length;ye++)he(ye);return Q},Ka.prototype.loadMatchingFeature=function(e,r,i,u,h,m,v,w,T,A,P){var M=this.bucketLayerIDs[r];if(!m||function(Qe,xt){for(var ot=0;ot<Qe.length;ot++)if(xt.indexOf(Qe[ot])>=0)return!0;return!1}(m,M)){var O=this.sourceLayerCoder.decode(i),F=this.vtLayers[O].feature(u);if(h.needGeometry){var Z=Qr(F,!0);if(!h.filter(new Gt(this.tileID.overscaledZ),Z,this.tileID.canonical))return}else if(!h.filter(new Gt(this.tileID.overscaledZ),F))return;for(var G=this.getId(F,O),ie=0;ie<M.length;ie++){var Q=M[ie];if(!(m&&m.indexOf(Q)<0)){var he=w[Q];if(he){var ye={};G!==void 0&&A&&(ye=A.getState(he.sourceLayer||"_geojsonTileLayer",G));var we=Dt({},T[Q]);we.paint=Zv(we.paint,he.paint,F,ye,v),we.layout=Zv(we.layout,he.layout,F,ye,v);var Se=!P||P(F,he,ye);if(Se){var De=new uf(F,this.z,this.x,this.y,G);De.layer=we;var Ze=e[Q];Ze===void 0&&(Ze=e[Q]=[]),Ze.push({featureIndex:u,feature:De,intersectionZ:Se})}}}}}},Ka.prototype.lookupSymbolFeatures=function(e,r,i,u,h,m,v,w){var T={};this.loadVTLayers();for(var A=hu(h),P=0,M=e;P<M.length;P+=1)this.loadMatchingFeature(T,i,u,M[P],A,m,v,w,r);return T},Ka.prototype.hasLayer=function(e){for(var r=0,i=this.bucketLayerIDs;r<i.length;r+=1)for(var u=0,h=i[r];u<h.length;u+=1)if(e===h[u])return!0;return!1},Ka.prototype.getId=function(e,r){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",Ka,{omit:["rawTileData","sourceLayerCoder"]});var Pn=function(e,r){this.tileID=e,this.uid=di(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Pn.prototype.registerFadeDuration=function(e){var r=e+this.timeAdded;r<ct.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},Pn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Pn.prototype.loadVectorData=function(e,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,P){var M={};if(!P)return M;for(var O=function(){var G=Z[F],ie=G.layerIds.map(function(ye){return P.getLayer(ye)}).filter(Boolean);if(ie.length!==0){G.layers=ie,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(function(ye){return ie.filter(function(we){return we.id===ye})[0]}));for(var Q=0,he=ie;Q<he.length;Q+=1)M[he[Q].id]=G}},F=0,Z=A;F<Z.length;F+=1)O();return M}(e.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[u];if(h instanceof br){if(this.hasSymbolBuckets=!0,!i)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var m in this.buckets){var v=this.buckets[m];if(v instanceof br&&v.hasRTLText){this.hasRTLText=!0,Oi.isLoading()||Oi.isLoaded()||Wc()!=="deferred"||uo();break}}for(var w in this.queryPadding=0,this.buckets){var T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(w).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Pn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Pn.prototype.getBucket=function(e){return this.buckets[e.id]},Pn.prototype.upload=function(e){for(var r in this.buckets){var i=this.buckets[r];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sl(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sl(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Pn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Pn.prototype.queryRenderedFeatures=function(e,r,i,u,h,m,v,w,T,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:h,scale:m,tileSize:this.tileSize,pixelPosMatrix:A,transform:w,params:v,queryPadding:this.queryPadding*T},e,r,i):{}},Pn.prototype.querySourceFeatures=function(e,r){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),h=r?r.sourceLayer:"",m=u._geojsonTileLayer||u[h];if(m)for(var v=hu(r&&r.filter),w=this.tileID.canonical,T=w.z,A=w.x,P=w.y,M={z:T,x:A,y:P},O=0;O<m.length;O++){var F=m.feature(O);if(v.needGeometry){var Z=Qr(F,!0);if(!v.filter(new Gt(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!v.filter(new Gt(this.tileID.overscaledZ),F))continue;var G=i.getId(F,h),ie=new uf(F,T,A,P,G);ie.tile=M,e.push(ie)}}},Pn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Pn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Pn.prototype.setExpiryData=function(e){var r=this.expirationTime;if(e.cacheControl){var i=de(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),h=!1;if(this.expirationTime>u)h=!1;else if(r)if(this.expirationTime<r)h=!0;else{var m=this.expirationTime-r;m?this.expirationTime=u+Math.max(m,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Pn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Pn.prototype.setFeatureState=function(e,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(r.style.hasLayer(u)){var h=this.buckets[u],m=h.layers[0].sourceLayer||"_geojsonTileLayer",v=i[m],w=e[m];if(v&&w&&Object.keys(w).length!==0){h.update(w,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=r&&r.style&&r.style.getLayer(u);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(h)))}}}},Pn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Pn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ct.now()},Pn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Pn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ct.now()+e},Pn.prototype.setDependencies=function(e,r){for(var i={},u=0,h=r;u<h.length;u+=1)i[h[u]]=!0;this.dependencies[e]=i},Pn.prototype.hasDependency=function(e,r){for(var i=0,u=e;i<u.length;i+=1){var h=this.dependencies[u[i]];if(h){for(var m=0,v=r;m<v.length;m+=1)if(h[v[m]])return!0}}return!1};var Cs=xe.performance,Wv=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Cs.mark(this._marks.start)};Wv.prototype.finish=function(){Cs.mark(this._marks.end);var e=Cs.getEntriesByName(this._marks.measure);return e.length===0&&(Cs.measure(this._marks.measure,this._marks.start,this._marks.end),e=Cs.getEntriesByName(this._marks.measure),Cs.clearMarks(this._marks.start),Cs.clearMarks(this._marks.end),Cs.clearMeasures(this._marks.measure)),e},f.Actor=Fu,f.AlphaImage=El,f.CanonicalTileID=Cl,f.CollisionBoxArray=s,f.Color=pr,f.DEMData=Wa,f.DataConstantProperty=wt,f.DictionaryCoder=lf,f.EXTENT=8192,f.ErrorEvent=ae,f.EvaluationParameters=Gt,f.Event=K,f.Evented=ce,f.FeatureIndex=Ka,f.FillBucket=jo,f.FillExtrusionBucket=qo,f.ImageAtlas=up,f.ImagePosition=Yh,f.LineBucket=pi,f.LngLat=Dr,f.LngLatBounds=mn,f.MercatorCoordinate=Tl,f.ONE_EM=24,f.OverscaledTileID=gn,f.Point=ze,f.Point$1=ze,f.Properties=Fn,f.Protobuf=Xh,f.RGBAImage=Ei,f.RequestManager=Lr,f.RequestPerformance=Wv,f.ResourceType=nu,f.SegmentVector=j,f.SourceFeatureState=Nu,f.StructArrayLayout1ui2=ep,f.StructArrayLayout2f1f2i16=Ha,f.StructArrayLayout2i4=qa,f.StructArrayLayout3ui6=aa,f.StructArrayLayout4i8=Xc,f.SymbolBucket=br,f.Texture=Sl,f.Tile=Pn,f.Transitionable=Bn,f.Uniform1f=Ke,f.Uniform1i=Ne,f.Uniform2f=We,f.Uniform3f=ut,f.Uniform4f=Et,f.UniformColor=At,f.UniformMatrix4f=ir,f.UnwrappedTileID=$v,f.ValidationError=J,f.WritingMode=Wi,f.ZoomHistory=Hc,f.add=function(e,r,i){return e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e},f.addDynamicAttributes=Pm,f.asyncAll=function(e,r,i){if(!e.length)return i(null,[]);var u=e.length,h=new Array(e.length),m=null;e.forEach(function(v,w){r(v,function(T,A){T&&(m=T),h[w]=A,--u==0&&i(m,h)})})},f.bezier=et,f.bindAll=Mi,f.browser=ct,f.cacheEntryPossiblyAdded=function(e){++Xs>ru&&(e.getActor().send("enforceCacheSizeLimit",ls),Xs=0)},f.clamp=Ot,f.clearTileCache=function(e){var r=xe.caches.delete("mapbox-tiles");e&&r.catch(e).then(function(){return e()})},f.clipLine=kv,f.clone=function(e){var r=new hr(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.clone$1=Ln,f.clone$2=function(e){var r=new hr(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},f.collisionCircleLayout=a2,f.config=nt,f.create=function(){var e=new hr(16);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},f.create$1=function(){var e=new hr(9);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},f.create$2=function(){var e=new hr(4);return hr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},f.createCommonjsModule=ke,f.createExpression=cu,f.createLayout=In,f.createStyleLayer=function(e){return e.type==="custom"?new F2(e):new N2[e.type](e)},f.cross=function(e,r,i){var u=r[0],h=r[1],m=r[2],v=i[0],w=i[1],T=i[2];return e[0]=h*T-m*w,e[1]=m*v-u*T,e[2]=u*w-h*v,e},f.deepEqual=function e(r,i){if(Array.isArray(r)){if(!Array.isArray(i)||r.length!==i.length)return!1;for(var u=0;u<r.length;u++)if(!e(r[u],i[u]))return!1;return!0}if(typeof r=="object"&&r!==null&&i!==null){if(typeof i!="object"||Object.keys(r).length!==Object.keys(i).length)return!1;for(var h in r)if(!e(r[h],i[h]))return!1;return!0}return r===i},f.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},f.dot$1=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},f.ease=Wt,f.emitValidationErrors=fl,f.endsWith=Ui,f.enforceCacheSizeLimit=function(e){us(),ai&&ai.then(function(r){r.keys().then(function(i){for(var u=0;u<i.length-e;u++)r.delete(i[u])})})},f.evaluateSizeForFeature=Ev,f.evaluateSizeForZoom=Sv,f.evaluateVariableOffset=zv,f.evented=Gc,f.extend=Dt,f.featureFilter=hu,f.filterObject=on,f.fromRotation=function(e,r){var i=Math.sin(r),u=Math.cos(r);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.getAnchorAlignment=Cm,f.getAnchorJustification=km,f.getArrayBuffer=Ys,f.getImage=R,f.getJSON=function(e,r){return cs(Dt(e,{type:"json"}),r)},f.getRTLTextPluginStatus=Wc,f.getReferrer=Aa,f.getVideo=function(e,r){var i,u,h=xe.document.createElement("video");h.muted=!0,h.onloadstart=function(){r(null,h)};for(var m=0;m<e.length;m++){var v=xe.document.createElement("source");i=e[m],u=void 0,(u=xe.document.createElement("a")).href=i,(u.protocol!==xe.document.location.protocol||u.host!==xe.document.location.host)&&(h.crossOrigin="Anonymous"),v.src=e[m],h.appendChild(v)}return{cancel:function(){}}},f.identity=Di,f.invert=function(e,r){var i=r[0],u=r[1],h=r[2],m=r[3],v=r[4],w=r[5],T=r[6],A=r[7],P=r[8],M=r[9],O=r[10],F=r[11],Z=r[12],G=r[13],ie=r[14],Q=r[15],he=i*w-u*v,ye=i*T-h*v,we=i*A-m*v,Se=u*T-h*w,De=u*A-m*w,Ze=h*A-m*T,Qe=P*G-M*Z,xt=P*ie-O*Z,ot=P*Q-F*Z,St=M*ie-O*G,st=M*Q-F*G,Ut=O*Q-F*ie,Pt=he*Ut-ye*st+we*St+Se*ot-De*xt+Ze*Qe;return Pt?(e[0]=(w*Ut-T*st+A*St)*(Pt=1/Pt),e[1]=(h*st-u*Ut-m*St)*Pt,e[2]=(G*Ze-ie*De+Q*Se)*Pt,e[3]=(O*De-M*Ze-F*Se)*Pt,e[4]=(T*ot-v*Ut-A*xt)*Pt,e[5]=(i*Ut-h*ot+m*xt)*Pt,e[6]=(ie*we-Z*Ze-Q*ye)*Pt,e[7]=(P*Ze-O*we+F*ye)*Pt,e[8]=(v*st-w*ot+A*Qe)*Pt,e[9]=(u*ot-i*st-m*Qe)*Pt,e[10]=(Z*De-G*we+Q*he)*Pt,e[11]=(M*we-P*De-F*he)*Pt,e[12]=(w*xt-v*St-T*Qe)*Pt,e[13]=(i*St-u*xt+h*Qe)*Pt,e[14]=(G*ye-Z*Se-ie*he)*Pt,e[15]=(P*Se-M*ye+O*he)*Pt,e):null},f.isChar=rt,f.isMapboxURL=hn,f.keysDifference=function(e,r){var i=[];for(var u in e)u in r||i.push(u);return i},f.makeRequest=cs,f.mapObject=cn,f.mercatorXfromLng=jv,f.mercatorYfromLat=qv,f.mercatorZfromAltitude=Hv,f.mul=dm,f.multiply=ci,f.mvt=ku,f.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},f.normalize=function(e,r){var i=r[0],u=r[1],h=r[2],m=i*i+u*u+h*h;return m>0&&(m=1/Math.sqrt(m)),e[0]=r[0]*m,e[1]=r[1]*m,e[2]=r[2]*m,e},f.number=an,f.offscreenCanvasSupported=Js,f.ortho=function(e,r,i,u,h,m,v){var w=1/(r-i),T=1/(u-h),A=1/(m-v);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(r+i)*w,e[13]=(h+u)*T,e[14]=(v+m)*A,e[15]=1,e},f.parseGlyphPBF=function(e){return new Xh(e).readFields(y2,[])},f.pbf=Xh,f.performSymbolLayout=function(e,r,i,u,h,m,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,A={};if(e.textSizeData.kind==="composite"){var P=e.textSizeData,M=P.maxZoom;A.compositeTextSizes=[T["text-size"].possiblyEvaluate(new Gt(P.minZoom),v),T["text-size"].possiblyEvaluate(new Gt(M),v)]}if(e.iconSizeData.kind==="composite"){var O=e.iconSizeData,F=O.maxZoom;A.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new Gt(O.minZoom),v),T["icon-size"].possiblyEvaluate(new Gt(F),v)]}A.layoutTextSize=T["text-size"].possiblyEvaluate(new Gt(e.zoom+1),v),A.layoutIconSize=T["icon-size"].possiblyEvaluate(new Gt(e.zoom+1),v),A.textMaxSize=T["text-size"].possiblyEvaluate(new Gt(18));for(var Z=24*w.get("text-line-height"),G=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",ie=w.get("text-keep-upright"),Q=w.get("text-size"),he=function(){var Se=we[ye],De=w.get("text-font").evaluate(Se,{},v).join(","),Ze=Q.evaluate(Se,{},v),Qe=A.layoutTextSize.evaluate(Se,{},v),xt=A.layoutIconSize.evaluate(Se,{},v),ot={horizontal:{},vertical:void 0},St=Se.text,st=[0,0];if(St){var Ut=St.toString(),Pt=24*w.get("text-letter-spacing").evaluate(Se,{},v),vt=function(Kt){for(var Sr=0,gr=Kt;Sr<gr.length;Sr+=1)if(or=gr[Sr].charCodeAt(0),rt.Arabic(or)||rt["Arabic Supplement"](or)||rt["Arabic Extended-A"](or)||rt["Arabic Presentation Forms-A"](or)||rt["Arabic Presentation Forms-B"](or))return!1;var or;return!0}(Ut)?Pt:0,Ht=w.get("text-anchor").evaluate(Se,{},v),Bt=w.get("text-variable-anchor");if(!Bt){var er=w.get("text-radial-offset").evaluate(Se,{},v);st=er?zv(Ht,[24*er,Im]):w.get("text-offset").evaluate(Se,{},v).map(function(Kt){return 24*Kt})}var Tt=G?"center":w.get("text-justify").evaluate(Se,{},v),ar=w.get("symbol-placement"),Br=ar==="point"?24*w.get("text-max-width").evaluate(Se,{},v):0,Zr=function(){e.allowVerticalPlacement&&$c(Ut)&&(ot.vertical=Qh(St,r,i,h,De,Br,Z,Ht,"left",vt,st,Wi.vertical,!0,ar,Qe,Ze))};if(!G&&Bt){for(var Hr=Tt==="auto"?Bt.map(function(Kt){return km(Kt)}):[Tt],Fr=!1,Gr=0;Gr<Hr.length;Gr++){var En=Hr[Gr];if(!ot.horizontal[En])if(Fr)ot.horizontal[En]=ot.horizontal[0];else{var Sn=Qh(St,r,i,h,De,Br,Z,"center",En,vt,st,Wi.horizontal,!1,ar,Qe,Ze);Sn&&(ot.horizontal[En]=Sn,Fr=Sn.positionedLines.length===1)}}Zr()}else{Tt==="auto"&&(Tt=km(Ht));var ni=Qh(St,r,i,h,De,Br,Z,Ht,Tt,vt,st,Wi.horizontal,!1,ar,Qe,Ze);ni&&(ot.horizontal[Tt]=ni),Zr(),$c(Ut)&&G&&ie&&(ot.vertical=Qh(St,r,i,h,De,Br,Z,Ht,Tt,vt,st,Wi.vertical,!1,ar,Qe,Ze))}}var Mn=void 0,ii=!1;if(Se.icon&&Se.icon.name){var en=u[Se.icon.name];en&&(Mn=function(Kt,Sr,gr){var or=Cm(gr),hi=Sr[0]-Kt.displaySize[0]*or.horizontalAlign,Hn=Sr[1]-Kt.displaySize[1]*or.verticalAlign;return{image:Kt,top:Hn,bottom:Hn+Kt.displaySize[1],left:hi,right:hi+Kt.displaySize[0]}}(h[Se.icon.name],w.get("icon-offset").evaluate(Se,{},v),w.get("icon-anchor").evaluate(Se,{},v)),ii=en.sdf,e.sdfIcons===void 0?e.sdfIcons=en.sdf:e.sdfIcons!==en.sdf&&mr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(en.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var zn=Rv(ot.horizontal)||ot.vertical;e.iconsInText=!!zn&&zn.iconsInText,(zn||Mn)&&function(Kt,Sr,gr,or,hi,Hn,Pr,ln,$n,sr,ha){var Ki=Hn.textMaxSize.evaluate(Sr,{});Ki===void 0&&(Ki=Pr);var fa,tn=Kt.layers[0].layout,da=tn.get("icon-offset").evaluate(Sr,{},ha),Io=Rv(gr.horizontal),Uu=Pr/24,Al=Kt.tilePixelRatio*Uu,Vu=Kt.tilePixelRatio*Ki/24,Xa=Kt.tilePixelRatio*ln,ju=Kt.tilePixelRatio*tn.get("symbol-spacing"),cf=tn.get("text-padding")*Kt.tilePixelRatio,qu=tn.get("icon-padding")*Kt.tilePixelRatio,hp=tn.get("text-max-angle")/180*Math.PI,pf=tn.get("text-rotation-alignment")==="map"&&tn.get("symbol-placement")!=="point",hf=tn.get("icon-rotation-alignment")==="map"&&tn.get("symbol-placement")!=="point",Ja=tn.get("symbol-placement"),fp=ju/2,Hu=tn.get("icon-text-fit");or&&Hu!=="none"&&(Kt.allowVerticalPlacement&&gr.vertical&&(fa=wv(or,gr.vertical,Hu,tn.get("icon-text-fit-padding"),da,Uu)),Io&&(or=wv(or,Io,Hu,tn.get("icon-text-fit-padding"),da,Uu)));var As=function(V2,bp){bp.x<0||bp.x>=8192||bp.y<0||bp.y>=8192||function(rn,Ho,j2,Is,Fm,Jv,vf,ma,_f,wp,xf,bf,Nm,Yv,Ep,Qv,e_,t_,r_,n_,Xi,wf,i_,ga,q2){var o_,kl,Ku,Xu,Ju,Yu=rn.addToLineVertexArray(Ho,j2),a_=0,s_=0,l_=0,u_=0,Um=-1,Vm=-1,Ya={},c_=$(""),jm=0,qm=0;if(ma._unevaluatedLayout.getValue("text-radial-offset")===void 0?(jm=(o_=ma.layout.get("text-offset").evaluate(Xi,{},ga).map(function(Tp){return 24*Tp}))[0],qm=o_[1]):(jm=24*ma.layout.get("text-radial-offset").evaluate(Xi,{},ga),qm=Im),rn.allowVerticalPlacement&&Is.vertical){var p_=ma.layout.get("text-rotate").evaluate(Xi,{},ga)+90;Xu=new of(_f,Ho,wp,xf,bf,Is.vertical,Nm,Yv,Ep,p_),vf&&(Ju=new of(_f,Ho,wp,xf,bf,vf,e_,t_,Ep,p_))}if(Fm){var Hm=ma.layout.get("icon-rotate").evaluate(Xi,{}),h_=ma.layout.get("icon-text-fit")!=="none",f_=Pv(Fm,Hm,i_,h_),$m=vf?Pv(vf,Hm,i_,h_):void 0;Ku=new of(_f,Ho,wp,xf,bf,Fm,e_,t_,!1,Hm),a_=4*f_.length;var d_=rn.iconSizeData,Sp=null;d_.kind==="source"?(Sp=[128*ma.layout.get("icon-size").evaluate(Xi,{})])[0]>32640&&mr(rn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):d_.kind==="composite"&&((Sp=[128*wf.compositeIconSizes[0].evaluate(Xi,{},ga),128*wf.compositeIconSizes[1].evaluate(Xi,{},ga)])[0]>32640||Sp[1]>32640)&&mr(rn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),rn.addSymbols(rn.icon,f_,Sp,n_,r_,Xi,!1,Ho,Yu.lineStartIndex,Yu.lineLength,-1,ga),Um=rn.icon.placedSymbolArray.length-1,$m&&(s_=4*$m.length,rn.addSymbols(rn.icon,$m,Sp,n_,r_,Xi,Wi.vertical,Ho,Yu.lineStartIndex,Yu.lineLength,-1,ga),Vm=rn.icon.placedSymbolArray.length-1)}for(var m_ in Is.horizontal){var Ef=Is.horizontal[m_];if(!kl){c_=$(Ef.text);var H2=ma.layout.get("text-rotate").evaluate(Xi,{},ga);kl=new of(_f,Ho,wp,xf,bf,Ef,Nm,Yv,Ep,H2)}var g_=Ef.positionedLines.length===1;if(l_+=Lv(rn,Ho,Ef,Jv,ma,Ep,Xi,Qv,Yu,Is.vertical?Wi.horizontal:Wi.horizontalOnly,g_?Object.keys(Is.horizontal):[m_],Ya,Um,wf,ga),g_)break}Is.vertical&&(u_+=Lv(rn,Ho,Is.vertical,Jv,ma,Ep,Xi,Qv,Yu,Wi.vertical,["vertical"],Ya,Vm,wf,ga));var $2=kl?kl.boxStartIndex:rn.collisionBoxArray.length,Z2=kl?kl.boxEndIndex:rn.collisionBoxArray.length,G2=Xu?Xu.boxStartIndex:rn.collisionBoxArray.length,W2=Xu?Xu.boxEndIndex:rn.collisionBoxArray.length,K2=Ku?Ku.boxStartIndex:rn.collisionBoxArray.length,X2=Ku?Ku.boxEndIndex:rn.collisionBoxArray.length,J2=Ju?Ju.boxStartIndex:rn.collisionBoxArray.length,Y2=Ju?Ju.boxEndIndex:rn.collisionBoxArray.length,ya=-1,Sf=function(Tp,v_){return Tp&&Tp.circleDiameter?Math.max(Tp.circleDiameter,v_):v_};ya=Sf(kl,ya),ya=Sf(Xu,ya),ya=Sf(Ku,ya);var y_=(ya=Sf(Ju,ya))>-1?1:0;y_&&(ya*=q2/24),rn.glyphOffsetArray.length>=br.MAX_GLYPHS&&mr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xi.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,Xi.sortKey),rn.symbolInstances.emplaceBack(Ho.x,Ho.y,Ya.right>=0?Ya.right:-1,Ya.center>=0?Ya.center:-1,Ya.left>=0?Ya.left:-1,Ya.vertical||-1,Um,Vm,c_,$2,Z2,G2,W2,K2,X2,J2,Y2,wp,l_,u_,a_,s_,y_,0,Nm,jm,qm,ya)}(Kt,bp,V2,gr,or,hi,fa,Kt.layers[0],Kt.collisionBoxArray,Sr.index,Sr.sourceLayerIndex,Kt.index,Al,cf,pf,$n,Xa,qu,hf,da,Sr,Hn,sr,ha,Pr)};if(Ja==="line")for(var $u=0,ff=kv(Sr.geometry,0,0,8192,8192);$u<ff.length;$u+=1)for(var df=ff[$u],dp=0,mp=S2(df,ju,hp,gr.vertical||Io,or,24,Vu,Kt.overscaling,8192);dp<mp.length;dp+=1){var mf=mp[dp];Io&&I2(Kt,Io.text,fp,mf)||As(df,mf)}else if(Ja==="line-center")for(var gp=0,yp=Sr.geometry;gp<yp.length;gp+=1){var vp=yp[gp];if(vp.length>1){var gf=E2(vp,hp,gr.vertical||Io,or,24,Vu);gf&&As(vp,gf)}}else if(Sr.type==="Polygon")for(var Zu=0,yf=bm(Sr.geometry,0);Zu<yf.length;Zu+=1){var Gu=yf[Zu],_p=C2(Gu,16);As(Gu[0],new Lu(_p.x,_p.y,0))}else if(Sr.type==="LineString")for(var Il=0,xp=Sr.geometry;Il<xp.length;Il+=1){var Wu=xp[Il];As(Wu,new Lu(Wu[0].x,Wu[0].y,0))}else if(Sr.type==="Point")for(var Om=0,Kv=Sr.geometry;Om<Kv.length;Om+=1)for(var Dm=0,Xv=Kv[Om];Dm<Xv.length;Dm+=1){var Bm=Xv[Dm];As([Bm],new Lu(Bm.x,Bm.y,0))}}(e,Se,ot,Mn,u,A,Qe,xt,st,ii,v)},ye=0,we=e.features;ye<we.length;ye+=1)he();m&&e.generateCollisionDebugBuffers()},f.perspective=function(e,r,i,u,h){var m,v=1/Math.tan(r/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+u)*(m=1/(u-h)),e[14]=2*h*u*m):(e[10]=-1,e[14]=-2*u),e},f.pick=function(e,r){for(var i={},u=0;u<r.length;u++){var h=r[u];h in e&&(i[h]=e[h])}return i},f.plugin=Oi,f.polygonIntersectsPolygon=ua,f.postMapLoadEvent=Ws,f.postTurnstileEvent=tu,f.potpack=vv,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=ft,f.registerForPluginStateChange=function(e){return e({pluginStatus:xi,pluginURL:No}),Gc.on("pluginStateChange",e),e},f.renderColorRamp=Qy,f.rotate=function(e,r,i){var u=r[0],h=r[1],m=r[2],v=r[3],w=Math.sin(i),T=Math.cos(i);return e[0]=u*T+m*w,e[1]=h*T+v*w,e[2]=u*-w+m*T,e[3]=h*-w+v*T,e},f.rotateX=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),m=r[4],v=r[5],w=r[6],T=r[7],A=r[8],P=r[9],M=r[10],O=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=m*h+A*u,e[5]=v*h+P*u,e[6]=w*h+M*u,e[7]=T*h+O*u,e[8]=A*h-m*u,e[9]=P*h-v*u,e[10]=M*h-w*u,e[11]=O*h-T*u,e},f.rotateZ=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),m=r[0],v=r[1],w=r[2],T=r[3],A=r[4],P=r[5],M=r[6],O=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=m*h+A*u,e[1]=v*h+P*u,e[2]=w*h+M*u,e[3]=T*h+O*u,e[4]=A*h-m*u,e[5]=P*h-v*u,e[6]=M*h-w*u,e[7]=O*h-T*u,e},f.scale=function(e,r,i){var u=i[0],h=i[1],m=i[2];return e[0]=r[0]*u,e[1]=r[1]*u,e[2]=r[2]*u,e[3]=r[3]*u,e[4]=r[4]*h,e[5]=r[5]*h,e[6]=r[6]*h,e[7]=r[7]*h,e[8]=r[8]*m,e[9]=r[9]*m,e[10]=r[10]*m,e[11]=r[11]*m,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.scale$1=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e},f.scale$2=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e},f.setCacheLimits=function(e,r){ls=e,ru=r},f.setRTLTextPlugin=function(e,r,i){if(i===void 0&&(i=!1),xi==="deferred"||xi==="loading"||xi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");No=ct.resolveURL(e),xi="deferred",_u=r,ml(),i||uo()},f.sphericalToCartesian=function(e){var r=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(u),y:r*Math.sin(i)*Math.sin(u),z:r*Math.cos(u)}},f.sqrLen=function(e){var r=e[0],i=e[1];return r*r+i*i},f.styleSpec=V,f.sub=function(e,r,i){return e[0]=r[0]-i[0],e[1]=r[1]-i[1],e[2]=r[2]-i[2],e},f.symbolSize=w2,f.transformMat3=function(e,r,i){var u=r[0],h=r[1],m=r[2];return e[0]=u*i[0]+h*i[3]+m*i[6],e[1]=u*i[1]+h*i[4]+m*i[7],e[2]=u*i[2]+h*i[5]+m*i[8],e},f.transformMat4=Tu,f.translate=function(e,r,i){var u,h,m,v,w,T,A,P,M,O,F,Z,G=i[0],ie=i[1],Q=i[2];return r===e?(e[12]=r[0]*G+r[4]*ie+r[8]*Q+r[12],e[13]=r[1]*G+r[5]*ie+r[9]*Q+r[13],e[14]=r[2]*G+r[6]*ie+r[10]*Q+r[14],e[15]=r[3]*G+r[7]*ie+r[11]*Q+r[15]):(h=r[1],m=r[2],v=r[3],w=r[4],T=r[5],A=r[6],P=r[7],M=r[8],O=r[9],F=r[10],Z=r[11],e[0]=u=r[0],e[1]=h,e[2]=m,e[3]=v,e[4]=w,e[5]=T,e[6]=A,e[7]=P,e[8]=M,e[9]=O,e[10]=F,e[11]=Z,e[12]=u*G+w*ie+M*Q+r[12],e[13]=h*G+T*ie+O*Q+r[13],e[14]=m*G+A*ie+F*Q+r[14],e[15]=v*G+P*ie+Z*Q+r[15]),e},f.triggerPluginCompletionEvent=qh,f.uniqueId=di,f.validateCustomStyleLayer=function(e){var r=[],i=e.id;return i===void 0&&r.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&r.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&r.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),r},f.validateLight=hm,f.validateStyle=pl,f.values=function(e){var r=[];for(var i in e)r.push(e[i]);return r},f.vectorTile=ku,f.version="1.13.3",f.warnOnce=mr,f.webpSupported=kt,f.window=xe,f.wrap=rr}),Oe(["./shared"],function(f){function ke(z){var R=typeof z;if(R==="number"||R==="boolean"||R==="string"||z==null)return JSON.stringify(z);if(Array.isArray(z)){for(var B="[",H=0,K=z;H<K.length;H+=1)B+=ke(K[H])+",";return B+"]"}for(var ae=Object.keys(z).sort(),ce="{",V=0;V<ae.length;V++)ce+=JSON.stringify(ae[V])+":"+ke(z[ae[V]])+",";return ce+"}"}function Y(z){for(var R="",B=0,H=f.refProperties;B<H.length;B+=1)R+="/"+ke(z[H[B]]);return R}var Fe=function(z){this.keyCache={},z&&this.replace(z)};Fe.prototype.replace=function(z){this._layerConfigs={},this._layers={},this.update(z,[])},Fe.prototype.update=function(z,R){for(var B=this,H=0,K=z;H<K.length;H+=1){var ae=K[H];this._layerConfigs[ae.id]=ae;var ce=this._layers[ae.id]=f.createStyleLayer(ae);ce._featureFilter=f.featureFilter(ce.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(var V=0,J=R;V<J.length;V+=1){var ge=J[V];delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge]}this.familiesBySource={};for(var Ue=0,$e=function(tt,it){for(var Vt={},at=0;at<tt.length;at++){var Jt=it&&it[tt[at].id]||Y(tt[at]);it&&(it[tt[at].id]=Jt);var wr=Vt[Jt];wr||(wr=Vt[Jt]=[]),wr.push(tt[at])}var Zt=[];for(var cr in Vt)Zt.push(Vt[cr]);return Zt}(f.values(this._layerConfigs),this.keyCache);Ue<$e.length;Ue+=1){var Pe=$e[Ue].map(function(tt){return B._layers[tt.id]}),Ve=Pe[0];if(Ve.visibility!=="none"){var gt=Ve.source||"",ht=this.familiesBySource[gt];ht||(ht=this.familiesBySource[gt]={});var Me=Ve.sourceLayer||"_geojsonTileLayer",lt=ht[Me];lt||(lt=ht[Me]=[]),lt.push(Pe)}}};var ze=function(z){var R={},B=[];for(var H in z){var K=z[H],ae=R[H]={};for(var ce in K){var V=K[+ce];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var J={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};B.push(J),ae[ce]={rect:J,metrics:V.metrics}}}}var ge=f.potpack(B),Ue=new f.AlphaImage({width:ge.w||1,height:ge.h||1});for(var $e in z){var Pe=z[$e];for(var Ve in Pe){var gt=Pe[+Ve];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var ht=R[$e][Ve].rect;f.AlphaImage.copy(gt.bitmap,Ue,{x:0,y:0},{x:ht.x+1,y:ht.y+1},gt.bitmap)}}}this.image=Ue,this.positions=R};f.register("GlyphAtlas",ze);var Xe=function(z){this.tileID=new f.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId};function xe(z,R,B){for(var H=new f.EvaluationParameters(R),K=0,ae=z;K<ae.length;K+=1)ae[K].recalculate(H,B)}function mt(z,R){var B=f.getArrayBuffer(z.request,function(H,K,ae,ce){H?R(H):K&&R(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(K)),rawData:K,cacheControl:ae,expires:ce})});return function(){B.cancel(),R()}}Xe.prototype.parse=function(z,R,B,H,K){var ae=this;this.status="parsing",this.data=z,this.collisionBoxArray=new f.CollisionBoxArray;var ce=new f.DictionaryCoder(Object.keys(z.layers).sort()),V=new f.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var J,ge,Ue,$e,Pe={},Ve={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:B},gt=R.familiesBySource[this.source];for(var ht in gt){var Me=z.layers[ht];if(Me){Me.version===1&&f.warnOnce('Vector tile source "'+this.source+'" layer "'+ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var lt=ce.encode(ht),tt=[],it=0;it<Me.length;it++){var Vt=Me.feature(it),at=V.getId(Vt,ht);tt.push({feature:Vt,id:at,index:it,sourceLayerIndex:lt})}for(var Jt=0,wr=gt[ht];Jt<wr.length;Jt+=1){var Zt=wr[Jt],cr=Zt[0];cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||cr.visibility!=="none"&&(xe(Zt,this.zoom,B),(Pe[cr.id]=cr.createBucket({index:V.bucketLayerIDs.length,layers:Zt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lt,sourceID:this.source})).populate(tt,Ve,this.tileID.canonical),V.bucketLayerIDs.push(Zt.map(function(xr){return xr.id})))}}}var Qt=f.mapObject(Ve.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(Qt).length?H.send("getGlyphs",{uid:this.uid,stacks:Qt},function(xr,Xt){J||(J=xr,ge=Xt,Jr.call(ae))}):ge={};var Xn=Object.keys(Ve.iconDependencies);Xn.length?H.send("getImages",{icons:Xn,source:this.source,tileID:this.tileID,type:"icons"},function(xr,Xt){J||(J=xr,Ue=Xt,Jr.call(ae))}):Ue={};var fr=Object.keys(Ve.patternDependencies);function Jr(){if(J)return K(J);if(ge&&Ue&&$e){var xr=new ze(ge),Xt=new f.ImageAtlas(Ue,$e);for(var pr in Pe){var si=Pe[pr];si instanceof f.SymbolBucket?(xe(si.layers,this.zoom,B),f.performSymbolLayout(si,ge,xr.positions,Ue,Xt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):si.hasPattern&&(si instanceof f.LineBucket||si instanceof f.FillBucket||si instanceof f.FillExtrusionBucket)&&(xe(si.layers,this.zoom,B),si.addFeatures(Ve,this.tileID.canonical,Xt.patternPositions))}this.status="done",K(null,{buckets:f.values(Pe).filter(function(Qs){return!Qs.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:Xt,glyphMap:this.returnDependencies?ge:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?xr.positions:null})}}fr.length?H.send("getImages",{icons:fr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,Xt){J||(J=xr,$e=Xt,Jr.call(ae))}):$e={},Jr.call(this)};var et=function(z,R,B,H){this.actor=z,this.layerIndex=R,this.availableImages=B,this.loadVectorData=H||mt,this.loading={},this.loaded={}};et.prototype.loadTile=function(z,R){var B=this,H=z.uid;this.loading||(this.loading={});var K=!!(z&&z.request&&z.request.collectResourceTiming)&&new f.RequestPerformance(z.request),ae=this.loading[H]=new Xe(z);ae.abort=this.loadVectorData(z,function(ce,V){if(delete B.loading[H],ce||!V)return ae.status="done",B.loaded[H]=ae,R(ce);var J=V.rawData,ge={};V.expires&&(ge.expires=V.expires),V.cacheControl&&(ge.cacheControl=V.cacheControl);var Ue={};if(K){var $e=K.finish();$e&&(Ue.resourceTiming=JSON.parse(JSON.stringify($e)))}ae.vectorTile=V.vectorTile,ae.parse(V.vectorTile,B.layerIndex,B.availableImages,B.actor,function(Pe,Ve){if(Pe||!Ve)return R(Pe);R(null,f.extend({rawTileData:J.slice(0)},Ve,ge,Ue))}),B.loaded=B.loaded||{},B.loaded[H]=ae})},et.prototype.reloadTile=function(z,R){var B=this,H=this.loaded,K=z.uid,ae=this;if(H&&H[K]){var ce=H[K];ce.showCollisionBoxes=z.showCollisionBoxes;var V=function(J,ge){var Ue=ce.reloadCallback;Ue&&(delete ce.reloadCallback,ce.parse(ce.vectorTile,ae.layerIndex,B.availableImages,ae.actor,Ue)),R(J,ge)};ce.status==="parsing"?ce.reloadCallback=V:ce.status==="done"&&(ce.vectorTile?ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},et.prototype.abortTile=function(z,R){var B=this.loading,H=z.uid;B&&B[H]&&B[H].abort&&(B[H].abort(),delete B[H]),R()},et.prototype.removeTile=function(z,R){var B=this.loaded,H=z.uid;B&&B[H]&&delete B[H],R()};var Wt=f.window.ImageBitmap,Ot=function(){this.loaded={}};function rr(z,R){if(z.length!==0){Dt(z[0],R);for(var B=1;B<z.length;B++)Dt(z[B],!R)}}function Dt(z,R){for(var B=0,H=0,K=0,ae=z.length,ce=ae-1;K<ae;ce=K++){var V=(z[K][0]-z[ce][0])*(z[ce][1]+z[K][1]),J=B+V;H+=Math.abs(B)>=Math.abs(V)?B-J+V:V-J+B,B=J}B+H>=0!=!!R&&z.reverse()}Ot.prototype.loadTile=function(z,R){var B=z.uid,H=z.encoding,K=z.rawImageData,ae=Wt&&K instanceof Wt?this.getImageData(K):K,ce=new f.DEMData(B,ae,H);this.loaded=this.loaded||{},this.loaded[B]=ce,R(null,ce)},Ot.prototype.getImageData=function(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);var R=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:R.width,height:R.height},R.data)},Ot.prototype.removeTile=function(z){var R=this.loaded,B=z.uid;R&&R[B]&&delete R[B]};var yn=f.vectorTile.VectorTileFeature.prototype.toGeoJSON,di=function(z){this._feature=z,this.extent=f.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))};di.prototype.loadGeometry=function(){if(this._feature.type===1){for(var z=[],R=0,B=this._feature.geometry;R<B.length;R+=1){var H=B[R];z.push([new f.Point$1(H[0],H[1])])}return z}for(var K=[],ae=0,ce=this._feature.geometry;ae<ce.length;ae+=1){for(var V=[],J=0,ge=ce[ae];J<ge.length;J+=1){var Ue=ge[J];V.push(new f.Point$1(Ue[0],Ue[1]))}K.push(V)}return K},di.prototype.toGeoJSON=function(z,R,B){return yn.call(this,z,R,B)};var Kr=function(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=z.length,this._features=z};Kr.prototype.feature=function(z){return new di(this._features[z])};var vn=f.vectorTile.VectorTileFeature,Mi=Ui;function Ui(z,R){this.options=R||{},this.features=z,this.length=z.length}function cn(z,R){this.id=typeof z.id=="number"?z.id:void 0,this.type=z.type,this.rawGeometry=z.type===1?[z.geometry]:z.geometry,this.properties=z.tags,this.extent=R||4096}Ui.prototype.feature=function(z){return new cn(this.features[z],this.options.extent)},cn.prototype.loadGeometry=function(){var z=this.rawGeometry;this.geometry=[];for(var R=0;R<z.length;R++){for(var B=z[R],H=[],K=0;K<B.length;K++)H.push(new f.Point$1(B[K][0],B[K][1]));this.geometry.push(H)}return this.geometry},cn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var z=this.geometry,R=1/0,B=-1/0,H=1/0,K=-1/0,ae=0;ae<z.length;ae++)for(var ce=z[ae],V=0;V<ce.length;V++){var J=ce[V];R=Math.min(R,J.x),B=Math.max(B,J.x),H=Math.min(H,J.y),K=Math.max(K,J.y)}return[R,H,B,K]},cn.prototype.toGeoJSON=vn.prototype.toGeoJSON;var on=io,Ln=Mi;function io(z){var R=new f.pbf;return function(B,H){for(var K in B.layers)H.writeMessage(3,mr,B.layers[K])}(z,R),R.finish()}function mr(z,R){var B;R.writeVarintField(15,z.version||1),R.writeStringField(1,z.name||""),R.writeVarintField(5,z.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<z.length;B++)H.feature=z.feature(B),R.writeMessage(2,pn,H);var K=H.keys;for(B=0;B<K.length;B++)R.writeStringField(3,K[B]);var ae=H.values;for(B=0;B<ae.length;B++)R.writeMessage(4,Ge,ae[B])}function pn(z,R){var B=z.feature;B.id!==void 0&&R.writeVarintField(1,B.id),R.writeMessage(2,oo,z),R.writeVarintField(3,B.type),R.writeMessage(4,Be,B)}function oo(z,R){var B=z.feature,H=z.keys,K=z.values,ae=z.keycache,ce=z.valuecache;for(var V in B.properties){var J=ae[V];J===void 0&&(H.push(V),ae[V]=J=H.length-1),R.writeVarint(J);var ge=B.properties[V],Ue=typeof ge;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(ge=JSON.stringify(ge));var $e=Ue+":"+ge,Pe=ce[$e];Pe===void 0&&(K.push(ge),ce[$e]=Pe=K.length-1),R.writeVarint(Pe)}}function oe(z,R){return(R<<3)+(7&z)}function de(z){return z<<1^z>>31}function Be(z,R){for(var B=z.loadGeometry(),H=z.type,K=0,ae=0,ce=B.length,V=0;V<ce;V++){var J=B[V],ge=1;H===1&&(ge=J.length),R.writeVarint(oe(1,ge));for(var Ue=H===3?J.length-1:J.length,$e=0;$e<Ue;$e++){$e===1&&H!==1&&R.writeVarint(oe(2,Ue-1));var Pe=J[$e].x-K,Ve=J[$e].y-ae;R.writeVarint(de(Pe)),R.writeVarint(de(Ve)),K+=Pe,ae+=Ve}H===3&&R.writeVarint(oe(7,1))}}function Ge(z,R){var B=typeof z;B==="string"?R.writeStringField(1,z):B==="boolean"?R.writeBooleanField(7,z):B==="number"&&(z%1!=0?R.writeDoubleField(3,z):z<0?R.writeSVarintField(6,z):R.writeVarintField(5,z))}function qe(z,R,B,H){Je(z,B,H),Je(R,2*B,2*H),Je(R,2*B+1,2*H+1)}function Je(z,R,B){var H=z[R];z[R]=z[B],z[B]=H}function Te(z,R,B,H){var K=z-B,ae=R-H;return K*K+ae*ae}on.fromVectorTileJs=io,on.fromGeojsonVt=function(z,R){R=R||{};var B={};for(var H in z)B[H]=new Mi(z[H].features,R),B[H].name=H,B[H].version=R.version,B[H].extent=R.extent;return io({layers:B})},on.GeoJSONWrapper=Ln;var Le=function(z){return z[0]},Re=function(z){return z[1]},Ae=function(z,R,B,H,K){R===void 0&&(R=Le),B===void 0&&(B=Re),H===void 0&&(H=64),K===void 0&&(K=Float64Array),this.nodeSize=H,this.points=z;for(var ae=z.length<65536?Uint16Array:Uint32Array,ce=this.ids=new ae(z.length),V=this.coords=new K(2*z.length),J=0;J<z.length;J++)ce[J]=J,V[2*J]=R(z[J]),V[2*J+1]=B(z[J]);(function ge(Ue,$e,Pe,Ve,gt,ht){if(!(gt-Ve<=Pe)){var Me=Ve+gt>>1;(function lt(tt,it,Vt,at,Jt,wr){for(;Jt>at;){if(Jt-at>600){var Zt=Jt-at+1,cr=Vt-at+1,Qt=Math.log(Zt),Xn=.5*Math.exp(2*Qt/3),fr=.5*Math.sqrt(Qt*Xn*(Zt-Xn)/Zt)*(cr-Zt/2<0?-1:1);lt(tt,it,Vt,Math.max(at,Math.floor(Vt-cr*Xn/Zt+fr)),Math.min(Jt,Math.floor(Vt+(Zt-cr)*Xn/Zt+fr)),wr)}var Jr=it[2*Vt+wr],xr=at,Xt=Jt;for(qe(tt,it,at,Vt),it[2*Jt+wr]>Jr&&qe(tt,it,at,Jt);xr<Xt;){for(qe(tt,it,xr,Xt),xr++,Xt--;it[2*xr+wr]<Jr;)xr++;for(;it[2*Xt+wr]>Jr;)Xt--}it[2*at+wr]===Jr?qe(tt,it,at,Xt):qe(tt,it,++Xt,Jt),Xt<=Vt&&(at=Xt+1),Vt<=Xt&&(Jt=Xt-1)}})(Ue,$e,Me,Ve,gt,ht%2),ge(Ue,$e,Pe,Ve,Me-1,ht+1),ge(Ue,$e,Pe,Me+1,gt,ht+1)}})(ce,V,H,0,ce.length-1,0)};Ae.prototype.range=function(z,R,B,H){return function(K,ae,ce,V,J,ge,Ue){for(var $e,Pe,Ve=[0,K.length-1,0],gt=[];Ve.length;){var ht=Ve.pop(),Me=Ve.pop(),lt=Ve.pop();if(Me-lt<=Ue)for(var tt=lt;tt<=Me;tt++)Pe=ae[2*tt+1],($e=ae[2*tt])>=ce&&$e<=J&&Pe>=V&&Pe<=ge&&gt.push(K[tt]);else{var it=Math.floor((lt+Me)/2);Pe=ae[2*it+1],($e=ae[2*it])>=ce&&$e<=J&&Pe>=V&&Pe<=ge&&gt.push(K[it]);var Vt=(ht+1)%2;(ht===0?ce<=$e:V<=Pe)&&(Ve.push(lt),Ve.push(it-1),Ve.push(Vt)),(ht===0?J>=$e:ge>=Pe)&&(Ve.push(it+1),Ve.push(Me),Ve.push(Vt))}}return gt}(this.ids,this.coords,z,R,B,H,this.nodeSize)},Ae.prototype.within=function(z,R,B){return function(H,K,ae,ce,V,J){for(var ge=[0,H.length-1,0],Ue=[],$e=V*V;ge.length;){var Pe=ge.pop(),Ve=ge.pop(),gt=ge.pop();if(Ve-gt<=J)for(var ht=gt;ht<=Ve;ht++)Te(K[2*ht],K[2*ht+1],ae,ce)<=$e&&Ue.push(H[ht]);else{var Me=Math.floor((gt+Ve)/2),lt=K[2*Me],tt=K[2*Me+1];Te(lt,tt,ae,ce)<=$e&&Ue.push(H[Me]);var it=(Pe+1)%2;(Pe===0?ae-V<=lt:ce-V<=tt)&&(ge.push(gt),ge.push(Me-1),ge.push(it)),(Pe===0?ae+V>=lt:ce+V>=tt)&&(ge.push(Me+1),ge.push(Ve),ge.push(it))}}return Ue}(this.ids,this.coords,z,R,B,this.nodeSize)};var Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(z){return z}},He=function(z){this.options=zr(Object.create(Ye),z),this.trees=new Array(this.options.maxZoom+1)};function ct(z,R,B,H,K){return{x:z,y:R,zoom:1/0,id:B,parentId:-1,numPoints:H,properties:K}}function nt(z,R){var B=z.geometry.coordinates,H=B[1];return{x:qt(B[0]),y:dt(H),zoom:1/0,index:R,parentId:-1}}function kt(z){return{type:"Feature",id:z.id,properties:jt(z),geometry:{type:"Point",coordinates:[(H=z.x,360*(H-.5)),(R=z.y,B=(180-360*R)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var R,B,H}function jt(z){var R=z.numPoints,B=R>=1e4?Math.round(R/1e3)+"k":R>=1e3?Math.round(R/100)/10+"k":R;return zr(zr({},z.properties),{cluster:!0,cluster_id:z.id,point_count:R,point_count_abbreviated:B})}function qt(z){return z/360+.5}function dt(z){var R=Math.sin(z*Math.PI/180),B=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return B<0?0:B>1?1:B}function zr(z,R){for(var B in R)z[B]=R[B];return z}function Lr(z){return z.x}function hn(z){return z.y}function zi(z,R,B,H,K,ae){var ce=K-B,V=ae-H;if(ce!==0||V!==0){var J=((z-B)*ce+(R-H)*V)/(ce*ce+V*V);J>1?(B=K,H=ae):J>0&&(B+=ce*J,H+=V*J)}return(ce=z-B)*ce+(V=R-H)*V}function Rn(z,R,B,H){var K={id:z===void 0?null:z,type:R,geometry:B,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var ce=ae.geometry,V=ae.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")ur(ae,ce);else if(V==="Polygon"||V==="MultiLineString")for(var J=0;J<ce.length;J++)ur(ae,ce[J]);else if(V==="MultiPolygon")for(J=0;J<ce.length;J++)for(var ge=0;ge<ce[J].length;ge++)ur(ae,ce[J][ge])}(K),K}function ur(z,R){for(var B=0;B<R.length;B+=3)z.minX=Math.min(z.minX,R[B]),z.minY=Math.min(z.minY,R[B+1]),z.maxX=Math.max(z.maxX,R[B]),z.maxY=Math.max(z.maxY,R[B+1])}function nr(z,R,B,H){if(R.geometry){var K=R.geometry.coordinates,ae=R.geometry.type,ce=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),V=[],J=R.id;if(B.promoteId?J=R.properties[B.promoteId]:B.generateId&&(J=H||0),ae==="Point")_n(K,V);else if(ae==="MultiPoint")for(var ge=0;ge<K.length;ge++)_n(K[ge],V);else if(ae==="LineString")jn(K,V,ce,!1);else if(ae==="MultiLineString"){if(B.lineMetrics){for(ge=0;ge<K.length;ge++)jn(K[ge],V=[],ce,!1),z.push(Rn(J,"LineString",V,R.properties));return}xn(K,V,ce,!1)}else if(ae==="Polygon")xn(K,V,ce,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ge=0;ge<R.geometry.geometries.length;ge++)nr(z,{id:J,geometry:R.geometry.geometries[ge],properties:R.properties},B,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ge=0;ge<K.length;ge++){var Ue=[];xn(K[ge],Ue,ce,!0),V.push(Ue)}}z.push(Rn(J,ae,V,R.properties))}}function _n(z,R){R.push(ai(z[0])),R.push(bo(z[1])),R.push(0)}function jn(z,R,B,H){for(var K,ae,ce=0,V=0;V<z.length;V++){var J=ai(z[V][0]),ge=bo(z[V][1]);R.push(J),R.push(ge),R.push(0),V>0&&(ce+=H?(K*ge-J*ae)/2:Math.sqrt(Math.pow(J-K,2)+Math.pow(ge-ae,2))),K=J,ae=ge}var Ue=R.length-3;R[2]=1,function $e(Pe,Ve,gt,ht){for(var Me,lt=ht,tt=gt-Ve>>1,it=gt-Ve,Vt=Pe[Ve],at=Pe[Ve+1],Jt=Pe[gt],wr=Pe[gt+1],Zt=Ve+3;Zt<gt;Zt+=3){var cr=zi(Pe[Zt],Pe[Zt+1],Vt,at,Jt,wr);if(cr>lt)Me=Zt,lt=cr;else if(cr===lt){var Qt=Math.abs(Zt-tt);Qt<it&&(Me=Zt,it=Qt)}}lt>ht&&(Me-Ve>3&&$e(Pe,Ve,Me,ht),Pe[Me+2]=lt,gt-Me>3&&$e(Pe,Me,gt,ht))}(R,0,Ue,B),R[Ue+2]=1,R.size=Math.abs(ce),R.start=0,R.end=R.size}function xn(z,R,B,H){for(var K=0;K<z.length;K++){var ae=[];jn(z[K],ae,B,H),R.push(ae)}}function ai(z){return z/360+.5}function bo(z){var R=Math.sin(z*Math.PI/180),B=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return B<0?0:B>1?1:B}function mi(z,R,B,H,K,ae,ce,V){if(H/=R,ae>=(B/=R)&&ce<H)return z;if(ce<B||ae>=H)return null;for(var J=[],ge=0;ge<z.length;ge++){var Ue=z[ge],$e=Ue.geometry,Pe=Ue.type,Ve=K===0?Ue.minX:Ue.minY,gt=K===0?Ue.maxX:Ue.maxY;if(Ve>=B&&gt<H)J.push(Ue);else if(!(gt<B||Ve>=H)){var ht=[];if(Pe==="Point"||Pe==="MultiPoint")eu($e,ht,B,H,K);else if(Pe==="LineString")tu($e,ht,B,H,K,!1,V.lineMetrics);else if(Pe==="MultiLineString")Ws($e,ht,B,H,K,!1);else if(Pe==="Polygon")Ws($e,ht,B,H,K,!0);else if(Pe==="MultiPolygon")for(var Me=0;Me<$e.length;Me++){var lt=[];Ws($e[Me],lt,B,H,K,!0),lt.length&&ht.push(lt)}if(ht.length){if(V.lineMetrics&&Pe==="LineString"){for(Me=0;Me<ht.length;Me++)J.push(Rn(Ue.id,Pe,ht[Me],Ue.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(ht.length===1?(Pe="LineString",ht=ht[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=ht.length===3?"Point":"MultiPoint"),J.push(Rn(Ue.id,Pe,ht,Ue.tags))}}}return J.length?J:null}function eu(z,R,B,H,K){for(var ae=0;ae<z.length;ae+=3){var ce=z[ae+K];ce>=B&&ce<=H&&(R.push(z[ae]),R.push(z[ae+1]),R.push(z[ae+2]))}}function tu(z,R,B,H,K,ae,ce){for(var V,J,ge=Gs(z),Ue=K===0?ru:us,$e=z.start,Pe=0;Pe<z.length-3;Pe+=3){var Ve=z[Pe],gt=z[Pe+1],ht=z[Pe+2],Me=z[Pe+3],lt=z[Pe+4],tt=K===0?Ve:gt,it=K===0?Me:lt,Vt=!1;ce&&(V=Math.sqrt(Math.pow(Ve-Me,2)+Math.pow(gt-lt,2))),tt<B?it>B&&(J=Ue(ge,Ve,gt,Me,lt,B),ce&&(ge.start=$e+V*J)):tt>H?it<H&&(J=Ue(ge,Ve,gt,Me,lt,H),ce&&(ge.start=$e+V*J)):ls(ge,Ve,gt,ht),it<B&&tt>=B&&(J=Ue(ge,Ve,gt,Me,lt,B),Vt=!0),it>H&&tt<=H&&(J=Ue(ge,Ve,gt,Me,lt,H),Vt=!0),!ae&&Vt&&(ce&&(ge.end=$e+V*J),R.push(ge),ge=Gs(z)),ce&&($e+=V)}var at=z.length-3;Ve=z[at],gt=z[at+1],ht=z[at+2],(tt=K===0?Ve:gt)>=B&&tt<=H&&ls(ge,Ve,gt,ht),at=ge.length-3,ae&&at>=3&&(ge[at]!==ge[0]||ge[at+1]!==ge[1])&&ls(ge,ge[0],ge[1],ge[2]),ge.length&&R.push(ge)}function Gs(z){var R=[];return R.size=z.size,R.start=z.start,R.end=z.end,R}function Ws(z,R,B,H,K,ae){for(var ce=0;ce<z.length;ce++)tu(z[ce],R,B,H,K,ae,!1)}function ls(z,R,B,H){z.push(R),z.push(B),z.push(H)}function ru(z,R,B,H,K,ae){var ce=(ae-R)/(H-R);return z.push(ae),z.push(B+(K-B)*ce),z.push(1),ce}function us(z,R,B,H,K,ae){var ce=(ae-B)/(K-B);return z.push(R+(H-R)*ce),z.push(ae),z.push(1),ce}function Ks(z,R){for(var B=[],H=0;H<z.length;H++){var K,ae=z[H],ce=ae.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")K=Ca(ae.geometry,R);else if(ce==="MultiLineString"||ce==="Polygon"){K=[];for(var V=0;V<ae.geometry.length;V++)K.push(Ca(ae.geometry[V],R))}else if(ce==="MultiPolygon")for(K=[],V=0;V<ae.geometry.length;V++){for(var J=[],ge=0;ge<ae.geometry[V].length;ge++)J.push(Ca(ae.geometry[V][ge],R));K.push(J)}B.push(Rn(ae.id,ce,K,ae.tags))}return B}function Ca(z,R){var B=[];B.size=z.size,z.start!==void 0&&(B.start=z.start,B.end=z.end);for(var H=0;H<z.length;H+=3)B.push(z[H]+R,z[H+1],z[H+2]);return B}function Xs(z,R){if(z.transformed)return z;var B,H,K,ae=1<<z.z,ce=z.x,V=z.y;for(B=0;B<z.features.length;B++){var J=z.features[B],ge=J.geometry,Ue=J.type;if(J.geometry=[],Ue===1)for(H=0;H<ge.length;H+=2)J.geometry.push(Js(ge[H],ge[H+1],R,ae,ce,V));else for(H=0;H<ge.length;H++){var $e=[];for(K=0;K<ge[H].length;K+=2)$e.push(Js(ge[H][K],ge[H][K+1],R,ae,ce,V));J.geometry.push($e)}}return z.transformed=!0,z}function Js(z,R,B,H,K,ae){return[Math.round(B*(z*H-K)),Math.round(B*(R*H-ae))]}function nu(z,R,B,H,K){for(var ae=R===K.maxZoom?0:K.tolerance/((1<<R)*K.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:H,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<z.length;V++){ce.numFeatures++,iu(ce,z[V],ae,K);var J=z[V].minX,ge=z[V].minY,Ue=z[V].maxX,$e=z[V].maxY;J<ce.minX&&(ce.minX=J),ge<ce.minY&&(ce.minY=ge),Ue>ce.maxX&&(ce.maxX=Ue),$e>ce.maxY&&(ce.maxY=$e)}return ce}function iu(z,R,B,H){var K=R.geometry,ae=R.type,ce=[];if(ae==="Point"||ae==="MultiPoint")for(var V=0;V<K.length;V+=3)ce.push(K[V]),ce.push(K[V+1]),z.numPoints++,z.numSimplified++;else if(ae==="LineString")Aa(ce,K,z,B,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(V=0;V<K.length;V++)Aa(ce,K[V],z,B,ae==="Polygon",V===0);else if(ae==="MultiPolygon")for(var J=0;J<K.length;J++){var ge=K[J];for(V=0;V<ge.length;V++)Aa(ce,ge[V],z,B,!0,V===0)}if(ce.length){var Ue=R.tags||null;if(ae==="LineString"&&H.lineMetrics){for(var $e in Ue={},R.tags)Ue[$e]=R.tags[$e];Ue.mapbox_clip_start=K.start/K.size,Ue.mapbox_clip_end=K.end/K.size}var Pe={geometry:ce,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ue};R.id!==null&&(Pe.id=R.id),z.features.push(Pe)}}function Aa(z,R,B,H,K,ae){var ce=H*H;if(H>0&&R.size<(K?ce:H))B.numPoints+=R.length/3;else{for(var V=[],J=0;J<R.length;J+=3)(H===0||R[J+2]>ce)&&(B.numSimplified++,V.push(R[J]),V.push(R[J+1])),B.numPoints++;K&&function(ge,Ue){for(var $e=0,Pe=0,Ve=ge.length,gt=Ve-2;Pe<Ve;gt=Pe,Pe+=2)$e+=(ge[Pe]-ge[gt])*(ge[Pe+1]+ge[gt+1]);if($e>0===Ue)for(Pe=0,Ve=ge.length;Pe<Ve/2;Pe+=2){var ht=ge[Pe],Me=ge[Pe+1];ge[Pe]=ge[Ve-2-Pe],ge[Pe+1]=ge[Ve-1-Pe],ge[Ve-2-Pe]=ht,ge[Ve-1-Pe]=Me}}(V,ae),z.push(V)}}function Oo(z,R){var B=(R=this.options=function(K,ae){for(var ce in ae)K[ce]=ae[ce];return K}(Object.create(this.options),R)).debug;if(B&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(K,ae){var ce=[];if(K.type==="FeatureCollection")for(var V=0;V<K.features.length;V++)nr(ce,K.features[V],ae,V);else nr(ce,K.type==="Feature"?K:{geometry:K},ae);return ce}(z,R);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(H=function(K,ae){var ce=ae.buffer/ae.extent,V=K,J=mi(K,1,-1-ce,ce,0,-1,2,ae),ge=mi(K,1,1-ce,2+ce,0,-1,2,ae);return(J||ge)&&(V=mi(K,1,-ce,1+ce,0,-1,2,ae)||[],J&&(V=Ks(J,1).concat(V)),ge&&(V=V.concat(Ks(ge,-1)))),V}(H,R)).length&&this.splitTile(H,0,0,0),B&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Do(z,R,B){return 32*((1<<z)*B+R)+z}function cs(z,R){var B=z.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);var H=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!H)return R(null,null);var K=new Kr(H.features),ae=on(K);ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),R(null,{vectorTile:K,rawData:ae.buffer})}He.prototype.load=function(z){var R=this.options,B=R.log,H=R.minZoom,K=R.maxZoom,ae=R.nodeSize;B&&console.time("total time");var ce="prepare "+z.length+" points";B&&console.time(ce),this.points=z;for(var V=[],J=0;J<z.length;J++)z[J].geometry&&V.push(nt(z[J],J));this.trees[K+1]=new Ae(V,Lr,hn,ae,Float32Array),B&&console.timeEnd(ce);for(var ge=K;ge>=H;ge--){var Ue=+Date.now();V=this._cluster(V,ge),this.trees[ge]=new Ae(V,Lr,hn,ae,Float32Array),B&&console.log("z%d: %d clusters in %dms",ge,V.length,+Date.now()-Ue)}return B&&console.timeEnd("total time"),this},He.prototype.getClusters=function(z,R){var B=((z[0]+180)%360+360)%360-180,H=Math.max(-90,Math.min(90,z[1])),K=z[2]===180?180:((z[2]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)B=-180,K=180;else if(B>K){var ce=this.getClusters([B,H,180,ae],R),V=this.getClusters([-180,H,K,ae],R);return ce.concat(V)}for(var J=this.trees[this._limitZoom(R)],ge=[],Ue=0,$e=J.range(qt(B),dt(ae),qt(K),dt(H));Ue<$e.length;Ue+=1){var Pe=J.points[$e[Ue]];ge.push(Pe.numPoints?kt(Pe):this.points[Pe.index])}return ge},He.prototype.getChildren=function(z){var R=this._getOriginId(z),B=this._getOriginZoom(z),H="No cluster with the specified id.",K=this.trees[B];if(!K)throw new Error(H);var ae=K.points[R];if(!ae)throw new Error(H);for(var ce=this.options.radius/(this.options.extent*Math.pow(2,B-1)),V=[],J=0,ge=K.within(ae.x,ae.y,ce);J<ge.length;J+=1){var Ue=K.points[ge[J]];Ue.parentId===z&&V.push(Ue.numPoints?kt(Ue):this.points[Ue.index])}if(V.length===0)throw new Error(H);return V},He.prototype.getLeaves=function(z,R,B){var H=[];return this._appendLeaves(H,z,R=R||10,B=B||0,0),H},He.prototype.getTile=function(z,R,B){var H=this.trees[this._limitZoom(z)],K=Math.pow(2,z),ae=this.options,ce=ae.radius/ae.extent,V=(B-ce)/K,J=(B+1+ce)/K,ge={features:[]};return this._addTileFeatures(H.range((R-ce)/K,V,(R+1+ce)/K,J),H.points,R,B,K,ge),R===0&&this._addTileFeatures(H.range(1-ce/K,V,1,J),H.points,K,B,K,ge),R===K-1&&this._addTileFeatures(H.range(0,V,ce/K,J),H.points,-1,B,K,ge),ge.features.length?ge:null},He.prototype.getClusterExpansionZoom=function(z){for(var R=this._getOriginZoom(z)-1;R<=this.options.maxZoom;){var B=this.getChildren(z);if(R++,B.length!==1)break;z=B[0].properties.cluster_id}return R},He.prototype._appendLeaves=function(z,R,B,H,K){for(var ae=0,ce=this.getChildren(R);ae<ce.length;ae+=1){var V=ce[ae],J=V.properties;if(J&&J.cluster?K+J.point_count<=H?K+=J.point_count:K=this._appendLeaves(z,J.cluster_id,B,H,K):K<H?K++:z.push(V),z.length===B)break}return K},He.prototype._addTileFeatures=function(z,R,B,H,K,ae){for(var ce=0,V=z;ce<V.length;ce+=1){var J=R[V[ce]],ge=J.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(J.x*K-B)),Math.round(this.options.extent*(J.y*K-H))]],tags:ge?jt(J):this.points[J.index].properties},$e=void 0;ge?$e=J.id:this.options.generateId?$e=J.index:this.points[J.index].id&&($e=this.points[J.index].id),$e!==void 0&&(Ue.id=$e),ae.features.push(Ue)}},He.prototype._limitZoom=function(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))},He.prototype._cluster=function(z,R){for(var B=[],H=this.options,K=H.reduce,ae=H.minPoints,ce=H.radius/(H.extent*Math.pow(2,R)),V=0;V<z.length;V++){var J=z[V];if(!(J.zoom<=R)){J.zoom=R;for(var ge=this.trees[R+1],Ue=ge.within(J.x,J.y,ce),$e=J.numPoints||1,Pe=$e,Ve=0,gt=Ue;Ve<gt.length;Ve+=1){var ht=ge.points[gt[Ve]];ht.zoom>R&&(Pe+=ht.numPoints||1)}if(Pe>=ae){for(var Me=J.x*$e,lt=J.y*$e,tt=K&&$e>1?this._map(J,!0):null,it=(V<<5)+(R+1)+this.points.length,Vt=0,at=Ue;Vt<at.length;Vt+=1){var Jt=ge.points[at[Vt]];if(!(Jt.zoom<=R)){Jt.zoom=R;var wr=Jt.numPoints||1;Me+=Jt.x*wr,lt+=Jt.y*wr,Jt.parentId=it,K&&(tt||(tt=this._map(J,!0)),K(tt,this._map(Jt)))}}J.parentId=it,B.push(ct(Me/Pe,lt/Pe,it,Pe,tt))}else if(B.push(J),Pe>1)for(var Zt=0,cr=Ue;Zt<cr.length;Zt+=1){var Qt=ge.points[cr[Zt]];Qt.zoom<=R||(Qt.zoom=R,B.push(Qt))}}}return B},He.prototype._getOriginId=function(z){return z-this.points.length>>5},He.prototype._getOriginZoom=function(z){return(z-this.points.length)%32},He.prototype._map=function(z,R){if(z.numPoints)return R?zr({},z.properties):z.properties;var B=this.points[z.index].properties,H=this.options.map(B);return R&&H===B?zr({},H):H},Oo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Oo.prototype.splitTile=function(z,R,B,H,K,ae,ce){for(var V=[z,R,B,H],J=this.options,ge=J.debug;V.length;){H=V.pop(),B=V.pop(),R=V.pop(),z=V.pop();var Ue=1<<R,$e=Do(R,B,H),Pe=this.tiles[$e];if(!Pe&&(ge>1&&console.time("creation"),Pe=this.tiles[$e]=nu(z,R,B,H,J),this.tileCoords.push({z:R,x:B,y:H}),ge)){ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,B,H,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var Ve="z"+R;this.stats[Ve]=(this.stats[Ve]||0)+1,this.total++}if(Pe.source=z,K){if(R===J.maxZoom||R===K)continue;var gt=1<<K-R;if(B!==Math.floor(ae/gt)||H!==Math.floor(ce/gt))continue}else if(R===J.indexMaxZoom||Pe.numPoints<=J.indexMaxPoints)continue;if(Pe.source=null,z.length!==0){ge>1&&console.time("clipping");var ht,Me,lt,tt,it,Vt,at=.5*J.buffer/J.extent,Jt=.5-at,wr=.5+at,Zt=1+at;ht=Me=lt=tt=null,it=mi(z,Ue,B-at,B+wr,0,Pe.minX,Pe.maxX,J),Vt=mi(z,Ue,B+Jt,B+Zt,0,Pe.minX,Pe.maxX,J),z=null,it&&(ht=mi(it,Ue,H-at,H+wr,1,Pe.minY,Pe.maxY,J),Me=mi(it,Ue,H+Jt,H+Zt,1,Pe.minY,Pe.maxY,J),it=null),Vt&&(lt=mi(Vt,Ue,H-at,H+wr,1,Pe.minY,Pe.maxY,J),tt=mi(Vt,Ue,H+Jt,H+Zt,1,Pe.minY,Pe.maxY,J),Vt=null),ge>1&&console.timeEnd("clipping"),V.push(ht||[],R+1,2*B,2*H),V.push(Me||[],R+1,2*B,2*H+1),V.push(lt||[],R+1,2*B+1,2*H),V.push(tt||[],R+1,2*B+1,2*H+1)}}},Oo.prototype.getTile=function(z,R,B){var H=this.options,K=H.extent,ae=H.debug;if(z<0||z>24)return null;var ce=1<<z,V=Do(z,R=(R%ce+ce)%ce,B);if(this.tiles[V])return Xs(this.tiles[V],K);ae>1&&console.log("drilling down to z%d-%d-%d",z,R,B);for(var J,ge=z,Ue=R,$e=B;!J&&ge>0;)ge--,Ue=Math.floor(Ue/2),$e=Math.floor($e/2),J=this.tiles[Do(ge,Ue,$e)];return J&&J.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ge,Ue,$e),ae>1&&console.time("drilling down"),this.splitTile(J.source,ge,Ue,$e,z,R,B),ae>1&&console.timeEnd("drilling down"),this.tiles[V]?Xs(this.tiles[V],K):null):null};var Ys=function(z){function R(B,H,K,ae){z.call(this,B,H,K,cs),ae&&(this.loadGeoJSON=ae)}return z&&(R.__proto__=z),(R.prototype=Object.create(z&&z.prototype)).constructor=R,R.prototype.loadData=function(B,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=H,this._pendingLoadDataParams=B,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},R.prototype._loadData=function(){var B=this;if(this._pendingCallback&&this._pendingLoadDataParams){var H=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ae=!!(K&&K.request&&K.request.collectResourceTiming)&&new f.RequestPerformance(K.request);this.loadGeoJSON(K,function(ce,V){if(ce||!V)return H(ce);if(typeof V!="object")return H(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));(function Pe(Ve,gt){var ht,Me=Ve&&Ve.type;if(Me==="FeatureCollection")for(ht=0;ht<Ve.features.length;ht++)Pe(Ve.features[ht],gt);else if(Me==="GeometryCollection")for(ht=0;ht<Ve.geometries.length;ht++)Pe(Ve.geometries[ht],gt);else if(Me==="Feature")Pe(Ve.geometry,gt);else if(Me==="Polygon")rr(Ve.coordinates,gt);else if(Me==="MultiPolygon")for(ht=0;ht<Ve.coordinates.length;ht++)rr(Ve.coordinates[ht],gt);return Ve})(V,!0);try{if(K.filter){var J=f.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));var ge=V.features.filter(function(Pe){return J.value.evaluate({zoom:0},Pe)});V={type:"FeatureCollection",features:ge}}B._geoJSONIndex=K.cluster?new He(function(Pe){var Ve=Pe.superclusterOptions,gt=Pe.clusterProperties;if(!gt||!Ve)return Ve;for(var ht={},Me={},lt={accumulated:null,zoom:0},tt={properties:null},it=Object.keys(gt),Vt=0,at=it;Vt<at.length;Vt+=1){var Jt=at[Vt],wr=gt[Jt],Zt=wr[0],cr=f.createExpression(wr[1]),Qt=f.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",Jt]]:Zt);ht[Jt]=cr.value,Me[Jt]=Qt.value}return Ve.map=function(Xn){tt.properties=Xn;for(var fr={},Jr=0,xr=it;Jr<xr.length;Jr+=1){var Xt=xr[Jr];fr[Xt]=ht[Xt].evaluate(lt,tt)}return fr},Ve.reduce=function(Xn,fr){tt.properties=fr;for(var Jr=0,xr=it;Jr<xr.length;Jr+=1){var Xt=xr[Jr];lt.accumulated=Xn[Xt],Xn[Xt]=Me[Xt].evaluate(lt,tt)}},Ve}(K)).load(V.features):function(Pe,Ve){return new Oo(Pe,Ve)}(V,K.geojsonVtOptions)}catch(Pe){return H(Pe)}B.loaded={};var Ue={};if(ae){var $e=ae.finish();$e&&(Ue.resourceTiming={},Ue.resourceTiming[K.source]=JSON.parse(JSON.stringify($e)))}H(null,Ue)})}},R.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},R.prototype.reloadTile=function(B,H){var K=this.loaded;return K&&K[B.uid]?z.prototype.reloadTile.call(this,B,H):this.loadTile(B,H)},R.prototype.loadGeoJSON=function(B,H){if(B.request)f.getJSON(B.request,H);else{if(typeof B.data!="string")return H(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."));try{return H(null,JSON.parse(B.data))}catch{return H(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."))}}},R.prototype.removeSource=function(B,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),H()},R.prototype.getClusterExpansionZoom=function(B,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(K){H(K)}},R.prototype.getClusterChildren=function(B,H){try{H(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(K){H(K)}},R.prototype.getClusterLeaves=function(B,H){try{H(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(K){H(K)}},R}(et),Xr=function(z){var R=this;this.self=z,this.actor=new f.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:et,geojson:Ys},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(B,H){if(R.workerSourceTypes[B])throw new Error('Worker source with name "'+B+'" already registered.');R.workerSourceTypes[B]=H},this.self.registerRTLTextPlugin=function(B){if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=B.applyArabicShaping,f.plugin.processBidirectionalText=B.processBidirectionalText,f.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}};return Xr.prototype.setReferrer=function(z,R){this.referrer=R},Xr.prototype.setImages=function(z,R,B){for(var H in this.availableImages[z]=R,this.workerSources[z]){var K=this.workerSources[z][H];for(var ae in K)K[ae].availableImages=R}B()},Xr.prototype.setLayers=function(z,R,B){this.getLayerIndex(z).replace(R),B()},Xr.prototype.updateLayers=function(z,R,B){this.getLayerIndex(z).update(R.layers,R.removedIds),B()},Xr.prototype.loadTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).loadTile(R,B)},Xr.prototype.loadDEMTile=function(z,R,B){this.getDEMWorkerSource(z,R.source).loadTile(R,B)},Xr.prototype.reloadTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).reloadTile(R,B)},Xr.prototype.abortTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).abortTile(R,B)},Xr.prototype.removeTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).removeTile(R,B)},Xr.prototype.removeDEMTile=function(z,R){this.getDEMWorkerSource(z,R.source).removeTile(R)},Xr.prototype.removeSource=function(z,R,B){if(this.workerSources[z]&&this.workerSources[z][R.type]&&this.workerSources[z][R.type][R.source]){var H=this.workerSources[z][R.type][R.source];delete this.workerSources[z][R.type][R.source],H.removeSource!==void 0?H.removeSource(R,B):B()}},Xr.prototype.loadWorkerSource=function(z,R,B){try{this.self.importScripts(R.url),B()}catch(H){B(H.toString())}},Xr.prototype.syncRTLPluginState=function(z,R,B){try{f.plugin.setState(R);var H=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&H!=null){this.self.importScripts(H);var K=f.plugin.isParsed();B(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+H),K)}}catch(ae){B(ae.toString())}},Xr.prototype.getAvailableImages=function(z){var R=this.availableImages[z];return R||(R=[]),R},Xr.prototype.getLayerIndex=function(z){var R=this.layerIndexes[z];return R||(R=this.layerIndexes[z]=new Fe),R},Xr.prototype.getWorkerSource=function(z,R,B){var H=this;return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][R]||(this.workerSources[z][R]={}),this.workerSources[z][R][B]||(this.workerSources[z][R][B]=new this.workerSourceTypes[R]({send:function(K,ae,ce){H.actor.send(K,ae,ce,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][R][B]},Xr.prototype.getDEMWorkerSource=function(z,R){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][R]||(this.demWorkerSources[z][R]=new Ot),this.demWorkerSources[z][R]},Xr.prototype.enforceCacheSizeLimit=function(z,R){f.enforceCacheSizeLimit(R)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Xr(self)),Xr}),Oe(["./shared"],function(f){var ke=f.createCommonjsModule(function(o){function s(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,I=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(I);try{S=new Worker(L),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(L),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var I=S.getImageData(0,0,1,1);return I&&I.width===b.width}()?(c[_=g&&g.failIfMajorPerformanceCaveat]===void 0&&(c[_]=function(b){var S=function(L){var U=document.createElement("canvas"),j=Object.create(s.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=L,U.probablySupportsContext?U.probablySupportsContext("webgl",j)||U.probablySupportsContext("experimental-webgl",j):U.supportsContext?U.supportsContext("webgl",j)||U.supportsContext("experimental-webgl",j):U.getContext("webgl",j)||U.getContext("experimental-webgl",j)}(b);if(!S)return!1;var I=S.createShader(S.VERTEX_SHADER);return!(!I||S.isContextLost())&&(S.shaderSource(I,"void main() {}"),S.compileShader(I),S.getShaderParameter(I,S.COMPILE_STATUS)===!0)}(_)),c[_]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Y={create:function(o,s,a){var c=f.window.document.createElement(o);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(o,s){return f.window.document.createElementNS(o,s)}},Fe=f.window.document&&f.window.document.documentElement.style;function ze(o){if(!Fe)return o[0];for(var s=0;s<o.length;s++)if(o[s]in Fe)return o[s];return o[0]}var Xe,xe=ze(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Y.disableDrag=function(){Fe&&xe&&(Xe=Fe[xe],Fe[xe]="none")},Y.enableDrag=function(){Fe&&xe&&(Fe[xe]=Xe)};var mt=ze(["transform","WebkitTransform"]);Y.setTransform=function(o,s){o.style[mt]=s};var et=!1;try{var Wt=Object.defineProperty({},"passive",{get:function(){et=!0}});f.window.addEventListener("test",Wt,Wt),f.window.removeEventListener("test",Wt,Wt)}catch{et=!1}Y.addEventListener=function(o,s,a,c){c===void 0&&(c={}),o.addEventListener(s,a,"passive"in c&&et?c:c.capture)},Y.removeEventListener=function(o,s,a,c){c===void 0&&(c={}),o.removeEventListener(s,a,"passive"in c&&et?c:c.capture)};var Ot=function(o){o.preventDefault(),o.stopPropagation(),f.window.removeEventListener("click",Ot,!0)};function rr(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}Y.suppressClick=function(){f.window.addEventListener("click",Ot,!0),f.window.setTimeout(function(){f.window.removeEventListener("click",Ot,!0)},0)},Y.mousePos=function(o,s){var a=o.getBoundingClientRect();return new f.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},Y.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),c=[],g=0;g<s.length;g++)c.push(new f.Point(s[g].clientX-a.left-o.clientLeft,s[g].clientY-a.top-o.clientTop));return c},Y.mouseButton=function(o){return f.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},Y.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var Dt=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,g=this.requestors;c<g.length;c+=1){var _=g[c];this._notify(_.ids,_.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),g=!1),this._validateContent(c.content,c)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),g=!1),g},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var g=0,_=0,b=a;_<b.length;_+=1){var S=b[_];if(S[0]<g||S[1]<S[0]||c<S[1])return!1;g=S[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var g=!0;if(!this.isLoaded())for(var _=0,b=a;_<b.length;_+=1)this.images[b[_]]||(g=!1);this.isLoaded()||g?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var g={},_=0,b=a;_<b.length;_+=1){var S=b[_];this.images[S]||this.fire(new f.Event("styleimagemissing",{id:S}));var I=this.images[S];I?g[S]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:f.warnOnce('Image "'+S+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,g)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],g=this.getImage(a);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{var _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new f.ImagePosition(_,g);this.patterns[a]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var g=f.potpack(a),_=g.w,b=g.h,S=this.atlasImage;for(var I in S.resize({width:_||1,height:b||1}),this.patterns){var L=this.patterns[I].bin,U=L.x+1,j=L.y+1,q=this.images[I].data,X=q.width,W=q.height;f.RGBAImage.copy(q,S,{x:0,y:0},{x:U,y:j},{width:X,height:W}),f.RGBAImage.copy(q,S,{x:0,y:W-1},{x:U,y:j-1},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:U,y:j+W},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:X-1,y:0},{x:U-1,y:j},{width:1,height:W}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:U+X,y:j},{width:1,height:W})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,g=a;c<g.length;c+=1){var _=g[c];if(!this.callbackDispatchedThisFrame[_]){this.callbackDispatchedThisFrame[_]=!0;var b=this.images[_];rr(b)&&this.updateImage(_,b)}}},s}(f.Evented),yn=vn,di=vn,Kr=1e20;function vn(o,s,a,c,g,_){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=g||"sans-serif",this.fontWeight=_||"normal",this.radius=a||8;var b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=b,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.d=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Int16Array(b),this.middle=Math.round(b/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Mi(o,s,a,c,g,_,b){for(var S=0;S<s;S++){for(var I=0;I<a;I++)c[I]=o[I*s+S];for(Ui(c,g,_,b,a),I=0;I<a;I++)o[I*s+S]=g[I]}for(I=0;I<a;I++){for(S=0;S<s;S++)c[S]=o[I*s+S];for(Ui(c,g,_,b,s),S=0;S<s;S++)o[I*s+S]=Math.sqrt(g[S])}}function Ui(o,s,a,c,g){a[0]=0,c[0]=-Kr,c[1]=+Kr;for(var _=1,b=0;_<g;_++){for(var S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);S<=c[b];)b--,S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);a[++b]=_,c[b]=S,c[b+1]=+Kr}for(_=0,b=0;_<g;_++){for(;c[b+1]<_;)b++;s[_]=(_-a[b])*(_-a[b])+o[a[b]]}}vn.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var g=s.data[4*c+3]/255;this.gridOuter[c]=g===1?0:g===0?Kr:Math.pow(Math.max(0,.5-g),2),this.gridInner[c]=g===1?Kr:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(Mi(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Mi(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},yn.default=di;var cn=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};cn.prototype.setURL=function(o){this.url=o},cn.prototype.getGlyphs=function(o,s){var a=this,c=[];for(var g in o)for(var _=0,b=o[g];_<b.length;_+=1)c.push({stack:g,id:b[_]});f.asyncAll(c,function(S,I){var L=S.stack,U=S.id,j=a.entries[L];j||(j=a.entries[L]={glyphs:{},requests:{},ranges:{}});var q=j.glyphs[U];if(q===void 0){if(q=a._tinySDF(j,L,U))return j.glyphs[U]=q,void I(null,{stack:L,id:U,glyph:q});var X=Math.floor(U/256);if(256*X>65535)I(new Error("glyphs > 65535 not supported"));else if(j.ranges[X])I(null,{stack:L,id:U,glyph:q});else{var W=j.requests[X];W||(W=j.requests[X]=[],cn.loadGlyphRange(L,X,a.url,a.requestManager,function(re,$){if($){for(var te in $)a._doesCharSupportLocalGlyph(+te)||(j.glyphs[+te]=$[+te]);j.ranges[X]=!0}for(var le=0,me=W;le<me.length;le+=1)(0,me[le])(re,$);delete j.requests[X]})),W.push(function(re,$){re?I(re):$&&I(null,{stack:L,id:U,glyph:$[U]||null})})}}else I(null,{stack:L,id:U,glyph:q})},function(S,I){if(S)s(S);else if(I){for(var L={},U=0,j=I;U<j.length;U+=1){var q=j[U],X=q.stack,W=q.id,re=q.glyph;(L[X]||(L[X]={}))[W]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics}}s(null,L)}})},cn.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(f.isChar["CJK Unified Ideographs"](o)||f.isChar["Hangul Syllables"](o)||f.isChar.Hiragana(o)||f.isChar.Katakana(o))},cn.prototype._tinySDF=function(o,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var g=o.tinySDF;if(!g){var _="400";/bold/i.test(s)?_="900":/medium/i.test(s)?_="500":/light/i.test(s)&&(_="200"),g=o.tinySDF=new cn.TinySDF(24,3,8,.25,c,_)}return{id:a,bitmap:new f.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},cn.loadGlyphRange=function(o,s,a,c,g){var _=256*s,b=_+255,S=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",_+"-"+b),f.ResourceType.Glyphs);f.getArrayBuffer(S,function(I,L){if(I)g(I);else if(L){for(var U={},j=0,q=f.parseGlyphPBF(L);j<q.length;j+=1){var X=q[j];U[X.id]=X}g(null,U)}})},cn.TinySDF=yn;var on=function(){this.specification=f.styleSpec.light.position};on.prototype.possiblyEvaluate=function(o,s){return f.sphericalToCartesian(o.expression.evaluate(s))},on.prototype.interpolate=function(o,s,a){return{x:f.number(o.x,s.x,a),y:f.number(o.y,s.y,a),z:f.number(o.z,s.z,a)}};var Ln=new f.Properties({anchor:new f.DataConstantProperty(f.styleSpec.light.anchor),position:new on,color:new f.DataConstantProperty(f.styleSpec.light.color),intensity:new f.DataConstantProperty(f.styleSpec.light.intensity)}),io=function(o){function s(a){o.call(this),this._transitionable=new f.Transitionable(Ln),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(f.validateLight,a,c))for(var g in a){var _=a[g];f.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,g){return(!g||g.validate!==!1)&&f.emitValidationErrors(this,a.call(f.validateStyle,f.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:f.styleSpec})))},s}(f.Evented),mr=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};mr.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},mr.prototype.getDashRanges=function(o,s,a){var c=[],g=o.length%2==1?-o[o.length-1]*a:0,_=o[0]*a,b=!0;c.push({left:g,right:_,isDash:b,zeroLength:o[0]===0});for(var S=o[0],I=1;I<o.length;I++){var L=o[I];c.push({left:g=S*a,right:_=(S+=L)*a,isDash:b=!b,zeroLength:L===0})}return c},mr.prototype.addRoundDash=function(o,s,a){for(var c=s/2,g=-a;g<=a;g++)for(var _=this.width*(this.nextRow+a+g),b=0,S=o[b],I=0;I<this.width;I++){I/S.right>1&&(S=o[++b]);var L=Math.abs(I-S.left),U=Math.abs(I-S.right),j=Math.min(L,U),q=void 0,X=g/a*(c+1);if(S.isDash){var W=c-Math.abs(X);q=Math.sqrt(j*j+W*W)}else q=c-Math.sqrt(j*j+X*X);this.data[_+I]=Math.max(0,Math.min(255,q+128))}},mr.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],c=o[s+1];a.zeroLength?o.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,o.splice(s,1))}var g=o[0],_=o[o.length-1];g.isDash===_.isDash&&(g.left=_.left-this.width,_.right=g.right+this.width);for(var b=this.width*this.nextRow,S=0,I=o[S],L=0;L<this.width;L++){L/I.right>1&&(I=o[++S]);var U=Math.abs(L-I.left),j=Math.abs(L-I.right),q=Math.min(U,j);this.data[b+L]=Math.max(0,Math.min(255,(I.isDash?q:-q)+128))}},mr.prototype.addDash=function(o,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return f.warnOnce("LineAtlas out of space"),null;for(var g=0,_=0;_<o.length;_++)g+=o[_];if(g!==0){var b=this.width/g,S=this.getDashRanges(o,this.width,b);s?this.addRoundDash(S,b,a):this.addRegularDash(S)}var I={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:g};return this.nextRow+=c,this.dirty=!0,I},mr.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var pn=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f.uniqueId();for(var c=this.workerPool.acquire(this.id),g=0;g<c.length;g++){var _=new o.Actor(c[g],a,this.id);_.name="Worker "+g,this.actors.push(_)}};function oo(o,s,a){var c=function(g,_){if(g)return a(g);if(_){var b=f.pick(f.extend(_,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(b.vectorLayers=_.vector_layers,b.vectorLayerIds=b.vectorLayers.map(function(S){return S.id})),b.tiles=s.canonicalizeTileset(b,o.url),a(null,b)}};return o.url?f.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),f.ResourceType.Source),c):f.browser.frame(function(){return c(null,o)})}pn.prototype.broadcast=function(o,s,a){f.asyncAll(this.actors,function(c,g){c.send(o,s,g)},a=a||function(){})},pn.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},pn.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},pn.Actor=f.Actor;var oe=function(o,s,a){this.bounds=f.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};oe.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},oe.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*s),g=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*s),_=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<g&&o.y>=c&&o.y<_};var de=function(o){function s(a,c,g,_){if(o.call(this),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(c,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=oo(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles,a.map._requestManager._customAccessToken),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,f.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(S,I){return delete a.request,a.aborted?c(null):S&&S.status!==404?c(S):(I&&I.resourceTiming&&(a.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&a.setExpiryData(I),a.loadVectorData(I,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",_,b.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",_,b.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Be=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},c),f.extend(this,f.pick(c,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=oo(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var g=this,_=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=f.getImage(this.map._requestManager.transformRequest(_,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){g.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=g.map.painter.context,L=I.gl;a.texture=g.map.painter.getTileTexture(S.width),a.texture?a.texture.update(S,{useMipmap:!0}):(a.texture=new f.Texture(I,S,L.RGBA,{useMipmap:!0}),a.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),a.state="loaded",f.cacheEntryPossiblyAdded(g.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Ge=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function _(b,S){b&&(a.state="errored",c(b)),S&&(a.dem=S,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=f.getImage(this.map._requestManager.transformRequest(g,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){this.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=f.window.ImageBitmap&&S instanceof f.window.ImageBitmap&&f.offscreenCanvasSupported()?S:f.browser.getImageData(S,1),L={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:I,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",L,_.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,g=Math.pow(2,c.z),_=(c.x-1+g)%g,b=c.x===0?a.wrap-1:a.wrap,S=(c.x+1+g)%g,I=c.x+1===g?a.wrap+1:a.wrap,L={};return L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<g&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y+1).key]={backfilled:!1}),L},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Be),qe=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(_),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var b=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new f.ErrorEvent(c));else{var g={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(g.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new f.Event("data",g))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)c.fire(new f.ErrorEvent(g));else{var _={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new f.Event("data",_))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,g,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:g},_),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var g=f.extend({},this.workerOptions),_=this._data;typeof _=="string"?(g.request=this.map._requestManager.transformRequest(f.browser.resolveURL(_),f.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(_),this.actor.send(this.type+".loadData",g,function(b,S){c._removed||S&&S.abandoned||(c._loaded=!0,S&&S.resourceTiming&&S.resourceTiming[c.id]&&(c._resourceTiming=S.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:g.source},null),a(b))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var g=this,_=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(_,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(b,S){return delete a.request,a.unloadVectorData(),a.aborted?c(null):b?c(b):(a.loadVectorData(S,g.map.painter,_==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return f.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Je=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Te=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,c){var g=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),function(_,b){g._loaded=!0,_?g.fire(new f.ErrorEvent(_)):b&&(g.image=b,a&&(g.coordinates=a),c&&c(),g._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var g=a.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(b){for(var S=1/0,I=1/0,L=-1/0,U=-1/0,j=0,q=b;j<q.length;j+=1){var X=q[j];S=Math.min(S,X.x),I=Math.min(I,X.y),L=Math.max(L,X.x),U=Math.max(U,X.y)}var W=Math.max(L-S,U-I),re=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),$=Math.pow(2,re);return new f.CanonicalTileID(re,Math.floor((S+L)/2*$),Math.floor((I+U)/2*$))}(g),this.minzoom=this.maxzoom=this.tileID.z;var _=g.map(function(b){return c.tileID.getTilePoint(b)._round()});return this._boundsArray=new f.StructArrayLayout4i8,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Le=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.roundZoom=!0,this.type="video",this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var g=0,_=c.urls;g<_.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(_[g],f.ResourceType.Source).url);f.getVideo(this.urls,function(b,S){a._loaded=!0,b?a.fire(new f.ErrorEvent(b)):S&&(a.video=S,a.video.loop=!0,a.video.setAttribute("playsinline",""),a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Te),Re=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(b){return!Array.isArray(b)||b.length!==2||b.some(function(S){return typeof S!="number"})})||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,g=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(c,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var g=c[a];if(isNaN(g)||g<=0)return!0}return!1},s}(Te),Ae={vector:de,raster:Be,"raster-dem":Ge,geojson:qe,video:Le,image:Te,canvas:Re};function Ye(o,s){var a=f.identity([]);return f.translate(a,a,[1,1,0]),f.scale(a,a,[.5*o.width,.5*o.height,1]),f.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function He(o,s,a,c,g,_){var b=function(re,$,te){if(re)for(var le=0,me=re;le<me.length;le+=1){var Ce=$[me[le]];if(Ce&&Ce.source===te&&Ce.type==="fill-extrusion")return!0}else for(var Ee in $){var Ie=$[Ee];if(Ie.source===te&&Ie.type==="fill-extrusion")return!0}return!1}(g&&g.layers,s,o.id),S=_.maxPitchScaleFactor(),I=o.tilesIn(c,S,b);I.sort(ct);for(var L=[],U=0,j=I;U<j.length;U+=1){var q=j[U];L.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,a,o._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,_,S,Ye(o.transform,q.tileID))})}var X=function(re){for(var $={},te={},le=0,me=re;le<me.length;le+=1){var Ce=me[le],Ee=Ce.queryResults,Ie=Ce.wrappedTileID,Ne=te[Ie]=te[Ie]||{};for(var Ke in Ee)for(var We=Ee[Ke],ut=Ne[Ke]=Ne[Ke]||{},Et=$[Ke]=$[Ke]||[],At=0,Ct=We;At<Ct.length;At+=1){var ir=Ct[At];ut[ir.featureIndex]||(ut[ir.featureIndex]=!0,Et.push(ir))}}return $}(L);for(var W in X)X[W].forEach(function(re){var $=re.feature,te=o.getFeatureState($.layer["source-layer"],$.id);$.source=$.layer.source,$.layer["source-layer"]&&($.sourceLayer=$.layer["source-layer"]),$.state=te});return X}function ct(o,s){var a=o.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var nt=function(o,s){this.max=o,this.onRemove=s,this.reset()};nt.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},nt.prototype.add=function(o,s,a){var c=this,g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var _={value:s,timeout:void 0};if(a!==void 0&&(_.timeout=setTimeout(function(){c.remove(o,_)},a)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},nt.prototype.has=function(o){return o.wrapped().key in this.data},nt.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},nt.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},nt.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},nt.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},nt.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),g=this.data[a][c];return this.data[a].splice(c,1),g.timeout&&clearTimeout(g.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(g.value),this.order.splice(this.order.indexOf(a),1),this},nt.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},nt.prototype.filter=function(o){var s=[];for(var a in this.data)for(var c=0,g=this.data[a];c<g.length;c+=1){var _=g[c];o(_.value)||s.push(_)}for(var b=0,S=s;b<S.length;b+=1){var I=S[b];this.remove(I.value.tileID,I)}};var kt=function(o,s,a){this.context=o;var c=o.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};kt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},kt.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},kt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},qt=function(o,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=o;var g=o.gl;this.buffer=g.createBuffer(),o.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},qt.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},qt.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&o.enableVertexAttribArray(c)}},qt.prototype.setVertexAttribPointers=function(o,s,a){for(var c=0;c<this.attributes.length;c++){var g=this.attributes[c],_=s.attributes[g.name];_!==void 0&&o.vertexAttribPointer(_,g.components,o[jt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(a||0))}},qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dt=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};dt.prototype.get=function(){return this.current},dt.prototype.set=function(o){},dt.prototype.getDefault=function(){return this.default},dt.prototype.setDefault=function(){this.set(this.default)};var zr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),Lr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(dt),hn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(dt),zi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),Rn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(dt),ur=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(dt),nr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(dt),_n=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(dt),jn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(dt),xn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),ai=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(dt),bo=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(dt),mi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(dt),eu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),tu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),Gs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(dt),Ws=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(dt),ls=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(dt),ru=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(dt),us=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(dt),Ks=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(dt),Ca=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),Xs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),Js=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),nu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(dt),iu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(dt),Aa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(dt),Oo=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(dt),Do=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(dt),cs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Ys=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Xr=function(o){function s(a,c){o.call(this,a),this.context=a,this.parent=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(dt),z=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Xr),R=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Xr),B=function(o,s,a,c){this.context=o,this.width=s,this.height=a;var g=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new z(o,g),c&&(this.depthAttachment=new R(o,g))};B.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var H=function(o,s,a){this.func=o,this.mask=s,this.range=a};H.ReadOnly=!1,H.ReadWrite=!0,H.disabled=new H(519,H.ReadOnly,[0,1]);var K=function(o,s,a,c,g,_){this.test=o,this.ref=s,this.mask=a,this.fail=c,this.depthFail=g,this.pass=_};K.disabled=new K({func:519,mask:0},0,0,7680,7680,7680);var ae=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};ae.disabled=new ae(ae.Replace=[1,0],f.Color.transparent,[!1,!1,!1,!1]),ae.unblended=new ae(ae.Replace,f.Color.transparent,[!0,!0,!0,!0]),ae.alphaBlended=new ae([1,771],f.Color.transparent,[!0,!0,!0,!0]);var ce=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};ce.disabled=new ce(!1,1029,2305),ce.backCCW=new ce(!0,1029,2305);var V=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zr(this),this.clearDepth=new Lr(this),this.clearStencil=new hn(this),this.colorMask=new zi(this),this.depthMask=new Rn(this),this.stencilMask=new ur(this),this.stencilFunc=new nr(this),this.stencilOp=new _n(this),this.stencilTest=new jn(this),this.depthRange=new xn(this),this.depthTest=new ai(this),this.depthFunc=new bo(this),this.blend=new mi(this),this.blendFunc=new eu(this),this.blendColor=new tu(this),this.blendEquation=new Gs(this),this.cullFace=new Ws(this),this.cullFaceSide=new ls(this),this.frontFace=new ru(this),this.program=new us(this),this.activeTexture=new Ks(this),this.viewport=new Ca(this),this.bindFramebuffer=new Xs(this),this.bindRenderbuffer=new Js(this),this.bindTexture=new nu(this),this.bindVertexBuffer=new iu(this),this.bindElementBuffer=new Aa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Oo(this),this.pixelStoreUnpack=new Do(this),this.pixelStoreUnpackPremultiplyAlpha=new cs(this),this.pixelStoreUnpackFlipY=new Ys(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(o,s){return new kt(this,o,s)},V.prototype.createVertexBuffer=function(o,s,a){return new qt(this,o,s,a)},V.prototype.createRenderbuffer=function(o,s,a){var c=this.gl,g=c.createRenderbuffer();return this.bindRenderbuffer.set(g),c.renderbufferStorage(c.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),g},V.prototype.createFramebuffer=function(o,s,a){return new B(this,o,s,a)},V.prototype.clear=function(o){var s=o.color,a=o.depth,c=this.gl,g=0;s&&(g|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(g|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(g)},V.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},V.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(o){f.deepEqual(o.blendFunction,ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var J=function(o){function s(a,c,g){var _=this;o.call(this),this.id=a,this.dispatcher=g,this.on("data",function(b){b.dataType==="source"&&b.sourceDataType==="metadata"&&(_._sourceLoaded=!0),_._sourceLoaded&&!_._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(_.reload(),_.transform&&_.update(_.transform))}),this.on("error",function(){_._sourceErrored=!0}),this._source=function(b,S,I,L){var U=new Ae[S.type](b,S,I,L);if(U.id!==b)throw new Error("Expected Source id to be "+b+" instead of "+U.id);return f.bindAll(["load","abort","unload","serialize","prepare"],U),U}(a,c,g,this),this._tiles={},this._cache=new nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new f.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[c];g.upload(a),g.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return f.values(this._tiles).map(function(a){return a.tileID}).sort(ge).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,g=[];for(var _ in this._tiles)this._isIdRenderable(_,a)&&g.push(this._tiles[_]);return a?g.sort(function(b,S){var I=b.tileID,L=S.tileID,U=new f.Point(I.canonical.x,I.canonical.y)._rotate(c.transform.angle),j=new f.Point(L.canonical.x,L.canonical.y)._rotate(c.transform.angle);return I.overscaledZ-L.overscaledZ||j.y-U.y||j.x-U.x}).map(function(b){return b.tileID.key}):g.map(function(b){return b.tileID}).sort(ge).map(function(b){return b.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,a,c)))},s.prototype._tileLoaded=function(a,c,g,_){if(_)return a.state="errored",void(_.status!==404?this._source.fire(new f.ErrorEvent(_,{tile:a})):this.update(this.transform));a.timeAdded=f.browser.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new f.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),g=0;g<c.length;g++){var _=c[g];if(a.neighboringTiles&&a.neighboringTiles[_]){var b=this.getTileByID(_);S(a,b),S(b,a)}}function S(I,L){I.needsHillshadePrepare=!0;var U=L.tileID.canonical.x-I.tileID.canonical.x,j=L.tileID.canonical.y-I.tileID.canonical.y,q=Math.pow(2,I.tileID.canonical.z),X=L.tileID.key;U===0&&j===0||Math.abs(j)>1||(Math.abs(U)>1&&(Math.abs(U+q)===1?U+=q:Math.abs(U-q)===1&&(U-=q)),L.dem&&I.dem&&(I.dem.backfillBorder(L.dem,U,j),I.neighboringTiles&&I.neighboringTiles[X]&&(I.neighboringTiles[X].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,g,_){for(var b in this._tiles){var S=this._tiles[b];if(!(_[b]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>g)){for(var I=S.tileID;S&&S.tileID.overscaledZ>c+1;){var L=S.tileID.scaledTo(S.tileID.overscaledZ-1);(S=this._tiles[L.key])&&S.hasData()&&(I=L)}for(var U=I;U.overscaledZ>c;)if(a[(U=U.scaledTo(U.overscaledZ-1)).key]){_[I.key]=I;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=c?g:null}for(var _=a.overscaledZ-1;_>=c;_--){var b=a.scaledTo(_),S=this._getLoadedTile(b);if(S)return S}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(c*g*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var g={};for(var _ in this._tiles){var b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),g[b.tileID.key]=b}for(var S in this._tiles=g,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new f.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(g=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ne){return c._source.hasTile(Ne)}))):g=[];var _=a.coveringZoomLevel(this._source),b=Math.max(_-s.maxOverzooming,this._source.minzoom),S=Math.max(_+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(g,_);if(Ue(this._source.type)){for(var L={},U={},j=0,q=Object.keys(I);j<q.length;j+=1){var X=q[j],W=I[X],re=this._tiles[X];if(re&&!(re.fadeEndTime&&re.fadeEndTime<=f.browser.now())){var $=this.findLoadedParent(W,b);$&&(this._addTile($.tileID),L[$.tileID.key]=$.tileID),U[X]=W}}for(var te in this._retainLoadedChildren(U,_,S,I),L)I[te]||(this._coveredTiles[te]=!0,I[te]=L[te])}for(var le in I)this._tiles[le].clearFadeHold();for(var me=0,Ce=f.keysDifference(this._tiles,I);me<Ce.length;me+=1){var Ee=Ce[me],Ie=this._tiles[Ee];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var g={},_={},b=Math.max(c-s.maxOverzooming,this._source.minzoom),S=Math.max(c+s.maxUnderzooming,this._source.minzoom),I={},L=0,U=a;L<U.length;L+=1){var j=U[L],q=this._addTile(j);g[j.key]=j,q.hasData()||c<this._source.maxzoom&&(I[j.key]=j)}this._retainLoadedChildren(I,c,S,g);for(var X=0,W=a;X<W.length;X+=1){var re=W[X],$=this._tiles[re.key];if(!$.hasData()){if(c+1>this._source.maxzoom){var te=re.children(this._source.maxzoom)[0],le=this.getTile(te);if(le&&le.hasData()){g[te.key]=te;continue}}else{var me=re.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}for(var Ce=$.wasRequested(),Ee=re.overscaledZ-1;Ee>=b;--Ee){var Ie=re.scaledTo(Ee);if(_[Ie.key]||(_[Ie.key]=!0,!($=this.getTile(Ie))&&Ce&&($=this._addTile(Ie)),$&&(g[Ie.key]=Ie,Ce=$.wasRequested(),$.hasData())))break}}}return g},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],g=void 0,_=this._tiles[a].tileID;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}c.push(_.key);var b=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(b))break;_=b}for(var S=0,I=c;S<I.length;S+=1)this._loadedParentTiles[I[S]]=g}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var g=!!c;return g||(c=new f.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,g||this._source.fire(new f.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var g=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var _=c.getExpiryTimeout();_&&(this._timers[a]=setTimeout(function(){g._reloadTile(a,"expired"),delete g._timers[a]},_))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,g){var _=this,b=[],S=this.transform;if(!S)return b;for(var I=g?S.getCameraQueryGeometry(a):a,L=a.map(function(Ee){return S.pointCoordinate(Ee)}),U=I.map(function(Ee){return S.pointCoordinate(Ee)}),j=this.getIds(),q=1/0,X=1/0,W=-1/0,re=-1/0,$=0,te=U;$<te.length;$+=1){var le=te[$];q=Math.min(q,le.x),X=Math.min(X,le.y),W=Math.max(W,le.x),re=Math.max(re,le.y)}for(var me=function(Ee){var Ie=_._tiles[j[Ee]];if(!Ie.holdingForFade()){var Ne=Ie.tileID,Ke=Math.pow(2,S.zoom-Ie.tileID.overscaledZ),We=c*Ie.queryPadding*f.EXTENT/Ie.tileSize/Ke,ut=[Ne.getTilePoint(new f.MercatorCoordinate(q,X)),Ne.getTilePoint(new f.MercatorCoordinate(W,re))];if(ut[0].x-We<f.EXTENT&&ut[0].y-We<f.EXTENT&&ut[1].x+We>=0&&ut[1].y+We>=0){var Et=L.map(function(Ct){return Ne.getTilePoint(Ct)}),At=U.map(function(Ct){return Ne.getTilePoint(Ct)});b.push({tile:Ie,tileID:Ne,queryGeometry:Et,cameraQueryGeometry:At,scale:Ke})}}},Ce=0;Ce<j.length;Ce++)me(Ce);return b},s.prototype.getVisibleCoordinates=function(a){for(var c=this,g=this.getRenderableIds(a).map(function(I){return c._tiles[I].tileID}),_=0,b=g;_<b.length;_+=1){var S=b[_];S.posMatrix=this.transform.calculatePosMatrix(S.toUnwrapped())}return g},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=f.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,g){this._state.updateState(a=a||"_geojsonTileLayer",c,g)},s.prototype.removeFeatureState=function(a,c,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,g)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,g){var _=this._tiles[a];_&&_.setDependencies(c,g)},s.prototype.reloadTilesForDependencies=function(a,c){for(var g in this._tiles)this._tiles[g].hasDependency(a,c)&&this._reloadTile(g,"reloading");this._cache.filter(function(_){return!_.hasDependency(a,c)})},s}(f.Evented);function ge(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||c-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function Ue(o){return o==="raster"||o==="image"||o==="video"}function $e(){return new f.window.Worker(Su.workerUrl)}J.maxOverzooming=10,J.maxUnderzooming=3;var Pe="mapboxgl_preloaded_worker_pool",Ve=function(){this.active={}};Ve.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new $e);return this.active[o]=!0,this.workers.slice()},Ve.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ve.prototype.isPreloaded=function(){return!!this.active[Pe]},Ve.prototype.numActive=function(){return Object.keys(this.active).length};var gt,ht=Math.floor(f.browser.hardwareConcurrency/2);function Me(){return gt||(gt=new Ve),gt}function lt(o,s){var a={};for(var c in o)c!=="ref"&&(a[c]=o[c]);return f.refProperties.forEach(function(g){g in s&&(a[g]=s[g])}),a}function tt(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var c=0;c<o.length;c++)"ref"in o[c]&&(o[c]=lt(o[c],s[o[c].ref]));return o}Ve.workerCount=Math.max(Math.min(ht,6),1);var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(o,s,a){a.push({command:it.addSource,args:[o,s[o]]})}function at(o,s,a){s.push({command:it.removeSource,args:[o]}),a[o]=!0}function Jt(o,s,a,c){at(o,a,c),Vt(o,s,a)}function wr(o,s,a){var c;for(c in o[a])if(o[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;return!0}function Zt(o,s,a,c,g,_){var b;for(b in s=s||{},o=o||{})o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}));for(b in s)s.hasOwnProperty(b)&&!o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}))}function cr(o){return o.id}function Qt(o,s){return o[s.id]=s,o}var Xn=function(o,s){this.reset(o,s)};Xn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=f.clamp(o,0,1);for(var s=1,a=this._distances[s],c=o*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var g=s-1,_=this._distances[g],b=a-_,S=b>0?(c-_)/b:0;return this.points[g].mult(1-S).add(this.points[s].mult(S))};var fr=function(o,s,a){var c=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var _=0;_<this.xCellCount*this.yCellCount;_++)c.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Jr(o,s,a,c,g){var _=f.create();return s?(f.scale(_,_,[1/g,1/g,1]),a||f.rotateZ(_,_,c.angle)):f.multiply(_,c.labelPlaneMatrix,o),_}function xr(o,s,a,c,g){if(s){var _=f.clone(o);return f.scale(_,_,[g,g,1]),a||f.rotateZ(_,_,-c.angle),_}return c.glCoordMatrix}function Xt(o,s){var a=[o.x,o.y,0,1];An(a,a,s);var c=a[3];return{point:new f.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function pr(o,s){return .5+o/s*.5}function si(o,s){var a=o[0]/o[3],c=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function Qs(o,s,a,c,g,_,b,S){var I=c?o.textSizeData:o.iconSizeData,L=f.evaluateSizeForZoom(I,a.transform.zoom),U=[256/a.width*2+1,256/a.height*2+1],j=c?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;j.clear();for(var q=o.lineVertexArray,X=c?o.text.placedSymbolArray:o.icon.placedSymbolArray,W=a.transform.width/a.transform.height,re=!1,$=0;$<X.length;$++){var te=X.get($);if(te.hidden||te.writingMode===f.WritingMode.vertical&&!re)Jn(te.numGlyphs,j);else{re=!1;var le=[te.anchorX,te.anchorY,0,1];if(f.transformMat4(le,le,s),si(le,U)){var me=pr(a.transform.cameraToCenterDistance,le[3]),Ce=f.evaluateSizeForFeature(I,L,te),Ee=b?Ce/me:Ce*me,Ie=new f.Point(te.anchorX,te.anchorY),Ne=Xt(Ie,g).point,Ke={},We=Pc(te,Ee,!1,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,Ke,W);re=We.useVertical,(We.notEnoughRoom||re||We.needsFlipping&&Pc(te,Ee,!0,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,Ke,W).notEnoughRoom)&&Jn(te.numGlyphs,j)}else Jn(te.numGlyphs,j)}}c?o.text.dynamicLayoutVertexBuffer.updateData(j):o.icon.dynamicLayoutVertexBuffer.updateData(j)}function Cn(o,s,a,c,g,_,b,S,I,L,U){var j=S.glyphStartIndex+S.numGlyphs,q=S.lineStartIndex,X=S.lineStartIndex+S.lineLength,W=s.getoffsetX(S.glyphStartIndex),re=s.getoffsetX(j-1),$=Yr(o*W,a,c,g,_,b,S.segment,q,X,I,L,U);if(!$)return null;var te=Yr(o*re,a,c,g,_,b,S.segment,q,X,I,L,U);return te?{first:$,last:te}:null}function li(o,s,a,c){return o===f.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(o===f.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function Pc(o,s,a,c,g,_,b,S,I,L,U,j,q,X){var W,re=s/24,$=o.lineOffsetX*re,te=o.lineOffsetY*re;if(o.numGlyphs>1){var le=o.glyphStartIndex+o.numGlyphs,me=o.lineStartIndex,Ce=o.lineStartIndex+o.lineLength,Ee=Cn(re,S,$,te,a,U,j,o,I,_,q);if(!Ee)return{notEnoughRoom:!0};var Ie=Xt(Ee.first.point,b).point,Ne=Xt(Ee.last.point,b).point;if(c&&!a){var Ke=li(o.writingMode,Ie,Ne,X);if(Ke)return Ke}W=[Ee.first];for(var We=o.glyphStartIndex+1;We<le-1;We++)W.push(Yr(re*S.getoffsetX(We),$,te,a,U,j,o.segment,me,Ce,I,_,q));W.push(Ee.last)}else{if(c&&!a){var ut=Xt(j,g).point,Et=o.lineStartIndex+o.segment+1,At=new f.Point(I.getx(Et),I.gety(Et)),Ct=Xt(At,g),ir=Ct.signedDistanceFromCamera>0?Ct.point:el(j,At,ut,1,g),pt=li(o.writingMode,ut,ir,X);if(pt)return pt}var Rt=Yr(re*S.getoffsetX(o.glyphStartIndex),$,te,a,U,j,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,I,_,q);if(!Rt)return{notEnoughRoom:!0};W=[Rt]}for(var Nt=0,Lt=W;Nt<Lt.length;Nt+=1){var zt=Lt[Nt];f.addDynamicAttributes(L,zt.point,zt.angle)}return{}}function el(o,s,a,c,g){var _=Xt(o.add(o.sub(s)._unit()),g).point,b=a.sub(_);return a.add(b._mult(c/b.mag()))}function Yr(o,s,a,c,g,_,b,S,I,L,U,j){var q=c?o-s:o+s,X=q>0?1:-1,W=0;c&&(X*=-1,W=Math.PI),X<0&&(W+=Math.PI);for(var re=X>0?S+b:S+b+1,$=g,te=g,le=0,me=0,Ce=Math.abs(q),Ee=[];le+me<=Ce;){if((re+=X)<S||re>=I)return null;if(te=$,Ee.push($),($=j[re])===void 0){var Ie=new f.Point(L.getx(re),L.gety(re)),Ne=Xt(Ie,U);if(Ne.signedDistanceFromCamera>0)$=j[re]=Ne.point;else{var Ke=re-X;$=el(le===0?_:new f.Point(L.getx(Ke),L.gety(Ke)),Ie,te,Ce-le+1,U)}}le+=me,me=te.dist($)}var We=(Ce-le)/me,ut=$.sub(te),Et=ut.mult(We)._add(te);Et._add(ut._unit()._perp()._mult(a*X));var At=W+Math.atan2($.y-te.y,$.x-te.x);return Ee.push(Et),{point:Et,angle:At,path:Ee}}fr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},fr.prototype.insert=function(o,s,a,c,g){this._forEachCell(s,a,c,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(g)},fr.prototype.insertCircle=function(o,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(c)},fr.prototype._insertBoxCell=function(o,s,a,c,g,_){this.boxCells[g].push(_)},fr.prototype._insertCircleCell=function(o,s,a,c,g,_){this.circleCells[g].push(_)},fr.prototype._query=function(o,s,a,c,g,_){if(a<0||o>this.width||c<0||s>this.height)return!g&&[];var b=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=c){if(g)return!0;for(var S=0;S<this.boxKeys.length;S++)b.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(var I=0;I<this.circleKeys.length;I++){var L=this.circles[3*I],U=this.circles[3*I+1],j=this.circles[3*I+2];b.push({key:this.circleKeys[I],x1:L-j,y1:U-j,x2:L+j,y2:U+j})}return _?b.filter(_):b}return this._forEachCell(o,s,a,c,this._queryCell,b,{hitTest:g,seenUids:{box:{},circle:{}}},_),g?b.length>0:b},fr.prototype._queryCircle=function(o,s,a,c,g){var _=o-a,b=o+a,S=s-a,I=s+a;if(b<0||_>this.width||I<0||S>this.height)return!c&&[];var L=[];return this._forEachCell(_,S,b,I,this._queryCellCircle,L,{hitTest:c,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},g),c?L.length>0:L},fr.prototype.query=function(o,s,a,c,g){return this._query(o,s,a,c,!1,g)},fr.prototype.hitTest=function(o,s,a,c,g){return this._query(o,s,a,c,!0,g)},fr.prototype.hitTestCircle=function(o,s,a,c){return this._queryCircle(o,s,a,!0,c)},fr.prototype._queryCell=function(o,s,a,c,g,_,b,S){var I=b.seenUids,L=this.boxCells[g];if(L!==null)for(var U=this.bboxes,j=0,q=L;j<q.length;j+=1){var X=q[j];if(!I.box[X]){I.box[X]=!0;var W=4*X;if(o<=U[W+2]&&s<=U[W+3]&&a>=U[W+0]&&c>=U[W+1]&&(!S||S(this.boxKeys[X]))){if(b.hitTest)return _.push(!0),!0;_.push({key:this.boxKeys[X],x1:U[W],y1:U[W+1],x2:U[W+2],y2:U[W+3]})}}}var re=this.circleCells[g];if(re!==null)for(var $=this.circles,te=0,le=re;te<le.length;te+=1){var me=le[te];if(!I.circle[me]){I.circle[me]=!0;var Ce=3*me;if(this._circleAndRectCollide($[Ce],$[Ce+1],$[Ce+2],o,s,a,c)&&(!S||S(this.circleKeys[me]))){if(b.hitTest)return _.push(!0),!0;var Ee=$[Ce],Ie=$[Ce+1],Ne=$[Ce+2];_.push({key:this.circleKeys[me],x1:Ee-Ne,y1:Ie-Ne,x2:Ee+Ne,y2:Ie+Ne})}}}},fr.prototype._queryCellCircle=function(o,s,a,c,g,_,b,S){var I=b.circle,L=b.seenUids,U=this.boxCells[g];if(U!==null)for(var j=this.bboxes,q=0,X=U;q<X.length;q+=1){var W=X[q];if(!L.box[W]){L.box[W]=!0;var re=4*W;if(this._circleAndRectCollide(I.x,I.y,I.radius,j[re+0],j[re+1],j[re+2],j[re+3])&&(!S||S(this.boxKeys[W])))return _.push(!0),!0}}var $=this.circleCells[g];if($!==null)for(var te=this.circles,le=0,me=$;le<me.length;le+=1){var Ce=me[le];if(!L.circle[Ce]){L.circle[Ce]=!0;var Ee=3*Ce;if(this._circlesCollide(te[Ee],te[Ee+1],te[Ee+2],I.x,I.y,I.radius)&&(!S||S(this.circleKeys[Ce])))return _.push(!0),!0}}},fr.prototype._forEachCell=function(o,s,a,c,g,_,b,S){for(var I=this._convertToXCellCoord(o),L=this._convertToYCellCoord(s),U=this._convertToXCellCoord(a),j=this._convertToYCellCoord(c),q=I;q<=U;q++)for(var X=L;X<=j;X++)if(g.call(this,o,s,a,c,this.xCellCount*X+q,_,b,S))return},fr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},fr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},fr.prototype._circlesCollide=function(o,s,a,c,g,_){var b=c-o,S=g-s,I=a+_;return I*I>b*b+S*S},fr.prototype._circleAndRectCollide=function(o,s,a,c,g,_,b){var S=(_-c)/2,I=Math.abs(o-(c+S));if(I>S+a)return!1;var L=(b-g)/2,U=Math.abs(s-(g+L));if(U>L+a)return!1;if(I<=S||U<=L)return!0;var j=I-S,q=U-L;return j*j+q*q<=a*a};var tl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Jn(o,s){for(var a=0;a<o;a++){var c=s.length;s.resize(c+4),s.float32.set(tl,3*c)}}function An(o,s,a){var c=s[0],g=s[1];return o[0]=a[0]*c+a[4]*g+a[12],o[1]=a[1]*c+a[5]*g+a[13],o[3]=a[3]*c+a[7]*g+a[15],o}var Vi=function(o,s,a){s===void 0&&(s=new fr(o.width+200,o.height+200,25)),a===void 0&&(a=new fr(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Rr(o,s,a){return s*(f.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Vi.prototype.placeCollisionBox=function(o,s,a,c,g){var _=this.projectAndGetPerspectiveRatio(c,o.anchorPointX,o.anchorPointY),b=a*_.perspectiveRatio,S=o.x1*b+_.point.x,I=o.y1*b+_.point.y,L=o.x2*b+_.point.x,U=o.y2*b+_.point.y;return!this.isInsideGrid(S,I,L,U)||!s&&this.grid.hitTest(S,I,L,U,g)?{box:[],offscreen:!1}:{box:[S,I,L,U],offscreen:this.isOffscreen(S,I,L,U)}},Vi.prototype.placeCollisionCircles=function(o,s,a,c,g,_,b,S,I,L,U,j,q){var X=[],W=new f.Point(s.anchorX,s.anchorY),re=Xt(W,_),$=pr(this.transform.cameraToCenterDistance,re.signedDistanceFromCamera),te=(L?g/$:g*$)/f.ONE_EM,le=Xt(W,b).point,me=Cn(te,c,s.lineOffsetX*te,s.lineOffsetY*te,!1,le,W,s,a,b,{}),Ce=!1,Ee=!1,Ie=!0;if(me){for(var Ne=.5*j*$+q,Ke=new f.Point(-100,-100),We=new f.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Xn,Et=me.first,At=me.last,Ct=[],ir=Et.path.length-1;ir>=1;ir--)Ct.push(Et.path[ir]);for(var pt=1;pt<At.path.length;pt++)Ct.push(At.path[pt]);var Rt=2.5*Ne;if(S){var Nt=Ct.map(function(Gi){return Xt(Gi,S)});Ct=Nt.some(function(Gi){return Gi.signedDistanceFromCamera<=0})?[]:Nt.map(function(Gi){return Gi.point})}var Lt=[];if(Ct.length>0){for(var zt=Ct[0].clone(),Ft=Ct[0].clone(),Mt=1;Mt<Ct.length;Mt++)zt.x=Math.min(zt.x,Ct[Mt].x),zt.y=Math.min(zt.y,Ct[Mt].y),Ft.x=Math.max(Ft.x,Ct[Mt].x),Ft.y=Math.max(Ft.y,Ct[Mt].y);Lt=zt.x>=Ke.x&&Ft.x<=We.x&&zt.y>=Ke.y&&Ft.y<=We.y?[Ct]:Ft.x<Ke.x||zt.x>We.x||Ft.y<Ke.y||zt.y>We.y?[]:f.clipLine([Ct],Ke.x,Ke.y,We.x,We.y)}for(var It=0,bn=Lt;It<bn.length;It+=1){var $r;ut.reset(bn[It],.25*Ne),$r=ut.length<=.5*Ne?1:Math.ceil(ut.paddedLength/Rt)+1;for(var qn=0;qn<$r;qn++){var kn=qn/Math.max($r-1,1),qr=ut.lerp(kn),Qr=qr.x+100,wi=qr.y+100;X.push(Qr,wi,Ne,0);var ti=Qr-Ne,ua=wi-Ne,ui=Qr+Ne,ho=wi+Ne;if(Ie=Ie&&this.isOffscreen(ti,ua,ui,ho),Ee=Ee||this.isInsideGrid(ti,ua,ui,ho),!o&&this.grid.hitTestCircle(Qr,wi,Ne,U)&&(Ce=!0,!I))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!I&&Ce||!Ee?[]:X,offscreen:Ie,collisionDetected:Ce}},Vi.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,g=-1/0,_=-1/0,b=0,S=o;b<S.length;b+=1){var I=S[b],L=new f.Point(I.x+100,I.y+100);a=Math.min(a,L.x),c=Math.min(c,L.y),g=Math.max(g,L.x),_=Math.max(_,L.y),s.push(L)}for(var U={},j={},q=0,X=this.grid.query(a,c,g,_).concat(this.ignoredGrid.query(a,c,g,_));q<X.length;q+=1){var W=X[q],re=W.key;if(U[re.bucketInstanceId]===void 0&&(U[re.bucketInstanceId]={}),!U[re.bucketInstanceId][re.featureIndex]){var $=[new f.Point(W.x1,W.y1),new f.Point(W.x2,W.y1),new f.Point(W.x2,W.y2),new f.Point(W.x1,W.y2)];f.polygonIntersectsPolygon(s,$)&&(U[re.bucketInstanceId][re.featureIndex]=!0,j[re.bucketInstanceId]===void 0&&(j[re.bucketInstanceId]=[]),j[re.bucketInstanceId].push(re.featureIndex))}}return j},Vi.prototype.insertCollisionBox=function(o,s,a,c,g){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:g},o[0],o[1],o[2],o[3])},Vi.prototype.insertCollisionCircles=function(o,s,a,c,g){for(var _=s?this.ignoredGrid:this.grid,b={bucketInstanceId:a,featureIndex:c,collisionGroupID:g},S=0;S<o.length;S+=4)_.insertCircle(b,o[S],o[S+1],o[S+2])},Vi.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var c=[s,a,0,1];return An(c,c,o),{point:new f.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},Vi.prototype.isOffscreen=function(o,s,a,c){return a<100||o>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},Vi.prototype.isInsideGrid=function(o,s,a,c){return a>=0&&o<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},Vi.prototype.getViewportMatrix=function(){var o=f.identity([]);return f.translate(o,o,[-100,-100,0]),o};var ao=function(o,s,a,c){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):c&&a?1:0,this.placed=a};ao.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Li=function(o,s,a,c,g){this.text=new ao(o?o.text:null,s,a,g),this.icon=new ao(o?o.icon:null,s,c,g)};Li.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var dh=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},ji=function(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]},em=function(o,s,a,c,g){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=g},Bo=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function On(o,s,a,c,g){var _=f.getAnchorAlignment(o),b=-(_.horizontalAlign-.5)*s,S=-(_.verticalAlign-.5)*a,I=f.evaluateVariableOffset(o,c);return new f.Point(b+I[0]*g,S+I[1]*g)}function wo(o,s,a,c,g,_){var b=o.x1,S=o.x2,I=o.y1,L=o.y2,U=o.anchorPointX,j=o.anchorPointY,q=new f.Point(s,a);return c&&q._rotate(g?_:-_),{x1:b+q.x,y1:I+q.y,x2:S+q.x,y2:L+q.y,anchorPointX:U,anchorPointY:j}}Bo.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var Yn=function(o,s,a,c){this.transform=o.clone(),this.collisionIndex=new Vi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Bo(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function Ia(o,s,a,c,g){o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0)}Yn.prototype.getBucketParts=function(o,s,a,c){var g=a.getBucket(s),_=a.latestFeatureIndex;if(g&&_&&s.id===g.layerIds[0]){var b=a.collisionBoxArray,S=g.layers[0].layout,I=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),L=a.tileSize/f.EXTENT,U=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),j=S.get("text-pitch-alignment")==="map",q=S.get("text-rotation-alignment")==="map",X=Rr(a,1,this.transform.zoom),W=Jr(U,j,q,this.transform,X),re=null;if(j){var $=xr(U,j,q,this.transform,X);re=f.multiply([],this.transform.labelPlaneMatrix,$)}this.retainedQueryData[g.bucketInstanceId]=new em(g.bucketInstanceId,_,g.sourceLayerIndex,g.index,a.tileID);var te={bucket:g,layout:S,posMatrix:U,textLabelPlaneMatrix:W,labelToScreenMatrix:re,scale:I,textPixelRatio:L,holdingForFade:a.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(c)for(var le=0,me=g.sortKeyRanges;le<me.length;le+=1){var Ce=me[le];o.push({sortKey:Ce.sortKey,symbolInstanceStart:Ce.symbolInstanceStart,symbolInstanceEnd:Ce.symbolInstanceEnd,parameters:te})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:te})}},Yn.prototype.attemptAnchorPlacement=function(o,s,a,c,g,_,b,S,I,L,U,j,q,X,W){var re,$=[j.textOffset0,j.textOffset1],te=On(o,a,c,$,g),le=this.collisionIndex.placeCollisionBox(wo(s,te.x,te.y,_,b,this.transform.angle),U,S,I,L.predicate);if(!W||this.collisionIndex.placeCollisionBox(wo(W,te.x,te.y,_,b,this.transform.angle),U,S,I,L.predicate).box.length!==0)return le.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(re=this.prevPlacement.variableOffsets[j.crossTileID].anchor),this.variableOffsets[j.crossTileID]={textOffset:$,width:a,height:c,anchor:o,textBoxScale:g,prevAnchor:re},this.markUsedJustification(q,o,j,X),q.allowVerticalPlacement&&(this.markUsedOrientation(q,X,j),this.placedOrientations[j.crossTileID]=X),{shift:te,placedGlyphBoxes:le}):void 0},Yn.prototype.placeLayerBucketPart=function(o,s,a){var c=this,g=o.parameters,_=g.bucket,b=g.layout,S=g.posMatrix,I=g.textLabelPlaneMatrix,L=g.labelToScreenMatrix,U=g.textPixelRatio,j=g.holdingForFade,q=g.collisionBoxArray,X=g.partiallyEvaluatedTextSize,W=g.collisionGroup,re=b.get("text-optional"),$=b.get("icon-optional"),te=b.get("text-allow-overlap"),le=b.get("icon-allow-overlap"),me=b.get("text-rotation-alignment")==="map",Ce=b.get("text-pitch-alignment")==="map",Ee=b.get("icon-text-fit")!=="none",Ie=b.get("symbol-z-order")==="viewport-y",Ne=te&&(le||!_.hasIconData()||$),Ke=le&&(te||!_.hasTextData()||re);!_.collisionArrays&&q&&_.deserializeCollisionBoxes(q);var We=function(pt,Rt){if(!s[pt.crossTileID])if(j)c.placements[pt.crossTileID]=new dh(!1,!1,!1);else{var Nt,Lt=!1,zt=!1,Ft=!0,Mt=null,It={box:null,offscreen:null},bn={box:null,offscreen:null},$r=null,qn=null,kn=0,qr=0,Qr=0;Rt.textFeatureIndex?kn=Rt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(kn=pt.featureIndex),Rt.verticalTextFeatureIndex&&(qr=Rt.verticalTextFeatureIndex);var wi=Rt.textBox;if(wi){var ti=function(hr){var Di=f.WritingMode.horizontal;if(_.allowVerticalPlacement&&!hr&&c.prevPlacement){var ci=c.prevPlacement.placedOrientations[pt.crossTileID];ci&&(c.placedOrientations[pt.crossTileID]=ci,c.markUsedOrientation(_,Di=ci,pt))}return Di},ua=function(hr,Di){if(_.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Rt.verticalTextBox)for(var ci=0,Za=_.writingModes;ci<Za.length&&(Za[ci]===f.WritingMode.vertical?(It=Di(),bn=It):It=hr(),!(It&&It.box&&It.box.length));ci+=1);else It=hr()};if(b.get("text-variable-anchor")){var ui=b.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[pt.crossTileID]){var ho=c.prevPlacement.variableOffsets[pt.crossTileID];ui.indexOf(ho.anchor)>0&&(ui=ui.filter(function(hr){return hr!==ho.anchor})).unshift(ho.anchor)}var Gi=function(hr,Di,ci){for(var Za=hr.x2-hr.x1,dm=hr.y2-hr.y1,Tu=pt.textBoxScale,mm=Ee&&!le?Di:null,wl={box:[],offscreen:!1},$h=te?2*ui.length:ui.length,Ss=0;Ss<$h;++Ss){var Cu=c.attemptAnchorPlacement(ui[Ss%ui.length],hr,Za,dm,Tu,me,Ce,U,S,W,Ss>=ui.length,pt,_,ci,mm);if(Cu&&(wl=Cu.placedGlyphBoxes)&&wl.box&&wl.box.length){Lt=!0,Mt=Cu.shift;break}}return wl};ua(function(){return Gi(wi,Rt.iconBox,f.WritingMode.horizontal)},function(){var hr=Rt.verticalTextBox;return _.allowVerticalPlacement&&!(It&&It.box&&It.box.length)&&pt.numVerticalGlyphVertices>0&&hr?Gi(hr,Rt.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),It&&(Lt=It.box,Ft=It.offscreen);var _l=ti(It&&It.box);if(!Lt&&c.prevPlacement){var ws=c.prevPlacement.variableOffsets[pt.crossTileID];ws&&(c.variableOffsets[pt.crossTileID]=ws,c.markUsedJustification(_,ws.anchor,pt,_l))}}else{var ca=function(hr,Di){var ci=c.collisionIndex.placeCollisionBox(hr,te,U,S,W.predicate);return ci&&ci.box&&ci.box.length&&(c.markUsedOrientation(_,Di,pt),c.placedOrientations[pt.crossTileID]=Di),ci};ua(function(){return ca(wi,f.WritingMode.horizontal)},function(){var hr=Rt.verticalTextBox;return _.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&hr?ca(hr,f.WritingMode.vertical):{box:null,offscreen:null}}),ti(It&&It.box&&It.box.length)}}if(Lt=(Nt=It)&&Nt.box&&Nt.box.length>0,Ft=Nt&&Nt.offscreen,pt.useRuntimeCollisionCircles){var Es=_.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),xl=f.evaluateSizeForFeature(_.textSizeData,X,Es),Co=b.get("text-padding");$r=c.collisionIndex.placeCollisionCircles(te,Es,_.lineVertexArray,_.glyphOffsetArray,xl,S,I,L,a,Ce,W.predicate,pt.collisionCircleDiameter,Co),Lt=te||$r.circles.length>0&&!$r.collisionDetected,Ft=Ft&&$r.offscreen}if(Rt.iconFeatureIndex&&(Qr=Rt.iconFeatureIndex),Rt.iconBox){var bl=function(hr){var Di=Ee&&Mt?wo(hr,Mt.x,Mt.y,me,Ce,c.transform.angle):hr;return c.collisionIndex.placeCollisionBox(Di,le,U,S,W.predicate)};zt=bn&&bn.box&&bn.box.length&&Rt.verticalIconBox?(qn=bl(Rt.verticalIconBox)).box.length>0:(qn=bl(Rt.iconBox)).box.length>0,Ft=Ft&&qn.offscreen}var Ao=re||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,wn=$||pt.numIconVertices===0;if(Ao||wn?wn?Ao||(zt=zt&&Lt):Lt=zt&&Lt:zt=Lt=zt&&Lt,Lt&&Nt&&Nt.box&&c.collisionIndex.insertCollisionBox(Nt.box,b.get("text-ignore-placement"),_.bucketInstanceId,bn&&bn.box&&qr?qr:kn,W.ID),zt&&qn&&c.collisionIndex.insertCollisionBox(qn.box,b.get("icon-ignore-placement"),_.bucketInstanceId,Qr,W.ID),$r&&(Lt&&c.collisionIndex.insertCollisionCircles($r.circles,b.get("text-ignore-placement"),_.bucketInstanceId,kn,W.ID),a)){var Vo=_.bucketInstanceId,pa=c.collisionCircleArrays[Vo];pa===void 0&&(pa=c.collisionCircleArrays[Vo]=new ji);for(var $a=0;$a<$r.circles.length;$a+=4)pa.circles.push($r.circles[$a+0]),pa.circles.push($r.circles[$a+1]),pa.circles.push($r.circles[$a+2]),pa.circles.push($r.collisionDetected?1:0)}c.placements[pt.crossTileID]=new dh(Lt||Ne,zt||Ke,Ft||_.justReloaded),s[pt.crossTileID]=!0}};if(Ie)for(var ut=_.getSortedSymbolIndexes(this.transform.angle),Et=ut.length-1;Et>=0;--Et){var At=ut[Et];We(_.symbolInstances.get(At),_.collisionArrays[At])}else for(var Ct=o.symbolInstanceStart;Ct<o.symbolInstanceEnd;Ct++)We(_.symbolInstances.get(Ct),_.collisionArrays[Ct]);if(a&&_.bucketInstanceId in this.collisionCircleArrays){var ir=this.collisionCircleArrays[_.bucketInstanceId];f.invert(ir.invProjMatrix,S),ir.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1},Yn.prototype.markUsedJustification=function(o,s,a,c){var g;g=c===f.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(s)];for(var _=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];_<b.length;_+=1){var S=b[_];S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=g>=0&&S!==g?0:a.crossTileID)}},Yn.prototype.markUsedOrientation=function(o,s,a){for(var c=s===f.WritingMode.horizontal||s===f.WritingMode.horizontalOnly?s:0,g=s===f.WritingMode.vertical?s:0,_=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];_<b.length;_+=1)o.text.placedSymbolArray.get(b[_]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=g)},Yn.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(o):1,g=s?s.opacities:{},_=s?s.variableOffsets:{},b=s?s.placedOrientations:{};for(var S in this.placements){var I=this.placements[S],L=g[S];L?(this.opacities[S]=new Li(L,c,I.text,I.icon),a=a||I.text!==L.text.placed||I.icon!==L.icon.placed):(this.opacities[S]=new Li(null,c,I.text,I.icon,I.skipFade),a=a||I.text||I.icon)}for(var U in g){var j=g[U];if(!this.opacities[U]){var q=new Li(j,c,!1,!1);q.isHidden()||(this.opacities[U]=q,a=a||j.text.placed||j.icon.placed)}}for(var X in _)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=_[X]);for(var W in b)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=b[W]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},Yn.prototype.updateLayerOpacities=function(o,s){for(var a={},c=0,g=s;c<g.length;c+=1){var _=g[c],b=_.getBucket(o);b&&_.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,a,_.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(o,s,a){var c=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var g=o.layers[0].layout,_=new Li(null,0,!1,!1,!0),b=g.get("text-allow-overlap"),S=g.get("icon-allow-overlap"),I=g.get("text-variable-anchor"),L=g.get("text-rotation-alignment")==="map",U=g.get("text-pitch-alignment")==="map",j=g.get("icon-text-fit")!=="none",q=new Li(null,0,b&&(S||!o.hasIconData()||g.get("icon-optional")),S&&(b||!o.hasTextData()||g.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var X=function(te,le,me){for(var Ce=0;Ce<le/4;Ce++)te.opacityVertexArray.emplaceBack(me)},W=function(te){var le=o.symbolInstances.get(te),me=le.numHorizontalGlyphVertices,Ce=le.numVerticalGlyphVertices,Ee=le.crossTileID,Ie=c.opacities[Ee];s[Ee]?Ie=_:Ie||(c.opacities[Ee]=Ie=q),s[Ee]=!0;var Ne=le.numIconVertices>0,Ke=c.placedOrientations[le.crossTileID],We=Ke===f.WritingMode.vertical,ut=Ke===f.WritingMode.horizontal||Ke===f.WritingMode.horizontalOnly;if(me>0||Ce>0){var Et=yh(Ie.text);X(o.text,me,We?ps:Et),X(o.text,Ce,ut?ps:Et);var At=Ie.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(function(It){It>=0&&(o.text.placedSymbolArray.get(It).hidden=At||We?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=At||ut?1:0);var Ct=c.variableOffsets[le.crossTileID];Ct&&c.markUsedJustification(o,Ct.anchor,le,Ke);var ir=c.placedOrientations[le.crossTileID];ir&&(c.markUsedJustification(o,"left",le,ir),c.markUsedOrientation(o,ir,le))}if(Ne){var pt=yh(Ie.icon),Rt=!(j&&le.verticalPlacedIconSymbolIndex&&We);le.placedIconSymbolIndex>=0&&(X(o.icon,le.numIconVertices,Rt?pt:ps),o.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(X(o.icon,le.numVerticalIconVertices,Rt?ps:pt),o.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Nt=o.collisionArrays[te];if(Nt){var Lt=new f.Point(0,0);if(Nt.textBox||Nt.verticalTextBox){var zt=!0;if(I){var Ft=c.variableOffsets[Ee];Ft?(Lt=On(Ft.anchor,Ft.width,Ft.height,Ft.textOffset,Ft.textBoxScale),L&&Lt._rotate(U?c.transform.angle:-c.transform.angle)):zt=!1}Nt.textBox&&Ia(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!zt||We,Lt.x,Lt.y),Nt.verticalTextBox&&Ia(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!zt||ut,Lt.x,Lt.y)}var Mt=!!(!ut&&Nt.verticalIconBox);Nt.iconBox&&Ia(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Mt,j?Lt.x:0,j?Lt.y:0),Nt.verticalIconBox&&Ia(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Mt,j?Lt.x:0,j?Lt.y:0)}}},re=0;re<o.symbolInstances.length;re++)W(re);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var $=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=$.invProjMatrix,o.placementViewportMatrix=$.viewportMatrix,o.collisionCircleArray=$.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},Yn.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},Yn.prototype.setStale=function(){this.stale=!0};var tm=Math.pow(2,25),rm=Math.pow(2,24),Mc=Math.pow(2,17),nm=Math.pow(2,16),mh=Math.pow(2,9),im=Math.pow(2,8),gh=Math.pow(2,1);function yh(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*tm+s*rm+a*Mc+s*nm+a*mh+s*im+a*gh+s}var ps=0,zc=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};zc.prototype.continuePlacement=function(o,s,a,c,g){for(var _=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(_,c,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort(function(b,S){return b.sortKey-S.sortKey}));this._currentPartIndex<_.length;)if(s.placeLayerBucketPart(_[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,g())return!0;return!1};var rl=function(o,s,a,c,g,_,b){this.placement=new Yn(o,g,_,b),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};rl.prototype.isDone=function(){return this._done},rl.prototype.continuePlacement=function(o,s,a){for(var c=this,g=f.browser.now(),_=function(){var I=f.browser.now()-g;return!c._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var b=s[o[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=S)&&(!b.maxzoom||b.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new zc(b)),this._inProgressLayer.continuePlacement(a[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},rl.prototype.commit=function(o){return this.placement.commit(o),this.placement};var vh=512/f.EXTENT/2,ou=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var g=s.get(c),_=g.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,o)})}};ou.prototype.getScaledCoordinates=function(o,s){var a=vh/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*f.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*f.EXTENT+o.anchorY)*a)}},ou.prototype.findMatches=function(o,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),g=0;g<o.length;g++){var _=o.get(g);if(!_.crossTileID){var b=this.indexedSymbolInstances[_.key];if(b)for(var S=this.getScaledCoordinates(_,s),I=0,L=b;I<L.length;I+=1){var U=L[I];if(Math.abs(U.coord.x-S.x)<=c&&Math.abs(U.coord.y-S.y)<=c&&!a[U.crossTileID]){a[U.crossTileID]=!0,_.crossTileID=U.crossTileID;break}}}}};var qi=function(){this.maxCrossTileID=0};qi.prototype.generate=function(){return++this.maxCrossTileID};var Ko=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ko.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],g={};for(var _ in c){var b=c[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),g[b.tileID.key]=b}this.indexes[a]=g}this.lng=o},Ko.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var g=this.usedCrossTileIDs[o.overscaledZ];for(var _ in this.indexes){var b=this.indexes[_];if(Number(_)>o.overscaledZ)for(var S in b){var I=b[S];I.tileID.isChildOf(o)&&I.findMatches(s.symbolInstances,o,g)}else{var L=b[o.scaledTo(Number(_)).key];L&&L.findMatches(s.symbolInstances,o,g)}}for(var U=0;U<s.symbolInstances.length;U++){var j=s.symbolInstances.get(U);j.crossTileID||(j.crossTileID=a.generate(),g[j.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new ou(o,s.symbolInstances,s.bucketInstanceId),!0},Ko.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var c=0,g=s.indexedSymbolInstances[a];c<g.length;c+=1)delete this.usedCrossTileIDs[o][g[c].crossTileID]},Ko.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var g in c)o[c[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[g]),delete c[g],s=!0)}return s};var Xo=function(){this.layerIndexes={},this.crossTileIDs=new qi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Xo.prototype.addLayer=function(o,s,a){var c=this.layerIndexes[o.id];c===void 0&&(c=this.layerIndexes[o.id]=new Ko);var g=!1,_={};c.handleWrapJump(a);for(var b=0,S=s;b<S.length;b+=1){var I=S[b],L=I.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(I.tileID,L,this.crossTileIDs)&&(g=!0),_[L.bucketInstanceId]=!0)}return c.removeStaleBuckets(_)&&(g=!0),g},Xo.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var ka=function(o,s){return f.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},Jo=f.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yo=f.pick(it,["setCenter","setZoom","setBearing","setPitch"]),au=function(){var o={},s=f.styleSpec.$version;for(var a in f.styleSpec.$root){var c,g=f.styleSpec.$root[a];g.required&&(c=a==="version"?s:g.type==="array"?[]:{})!=null&&(o[a]=c)}return o}(),gi=function(o){function s(a,c){var g=this;c===void 0&&(c={}),o.call(this),this.map=a,this.dispatcher=new pn(Me(),this),this.imageManager=new Dt,this.imageManager.setEventedParent(this),this.glyphManager=new cn(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new mr(256,512),this.crossTileSymbolIndex=new Xo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());var _=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(b){_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},function(S,I){if(f.triggerPluginCompletionEvent(S),I&&I.every(function(U){return U}))for(var L in _.sourceCaches)_.sourceCaches[L].reload()})}),this.on("data",function(b){if(b.dataType==="source"&&b.sourceDataType==="metadata"){var S=g.sourceCaches[b.sourceId];if(S){var I=S.getSource();if(I&&I.vectorLayerIds)for(var L in g._layers){var U=g._layers[L];U.source===I.id&&g._validateLayer(U)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"}));var _=typeof c.validate=="boolean"?c.validate:!f.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var b=this.map._requestManager.transformRequest(a,f.ResourceType.Style);this._request=f.getJSON(b,function(S,I){g._request=null,S?g.fire(new f.ErrorEvent(S)):I&&g._load(I,_)})},s.prototype.loadJSON=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.browser.frame(function(){g._request=null,g._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(au,!1)},s.prototype._load=function(a,c){if(!c||!ka(this,f.validateStyle(a))){for(var g in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(g,a.sources[g],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var _=tt(this.stylesheet.layers);this._order=_.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var b=0,S=_;b<S.length;b+=1){var I=S[b];(I=f.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new io(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(g,_,b){var S,I,L,U=f.browser.devicePixelRatio>1?"@2x":"",j=f.getJSON(_.transformRequest(_.normalizeSpriteURL(g,U,".json"),f.ResourceType.SpriteJSON),function(W,re){j=null,L||(L=W,S=re,X())}),q=f.getImage(_.transformRequest(_.normalizeSpriteURL(g,U,".png"),f.ResourceType.SpriteImage),function(W,re){q=null,L||(L=W,I=re,X())});function X(){if(L)b(L);else if(S&&I){var W=f.browser.getImageData(I),re={};for(var $ in S){var te=S[$],le=te.width,me=te.height,Ce=te.x,Ee=te.y,Ie=te.sdf,Ne=te.pixelRatio,Ke=te.stretchX,We=te.stretchY,ut=te.content,Et=new f.RGBAImage({width:le,height:me});f.RGBAImage.copy(W,Et,{x:Ce,y:Ee},{x:0,y:0},{width:le,height:me}),re[$]={data:Et,pixelRatio:Ne,sdf:Ie,stretchX:Ke,stretchY:We,content:ut}}b(null,re)}}return{cancel:function(){j&&(j.cancel(),j=null),q&&(q.cancel(),q=null)}}}(a,this.map._requestManager,function(g,_){if(c._spriteRequest=null,g)c.fire(new f.ErrorEvent(g));else if(_)for(var b in _)c.imageManager.addImage(b,_[b]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new f.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var g=a.sourceLayer;if(g){var _=c.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new f.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+_.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],g=0,_=a;g<_.length;g+=1){var b=this._layers[_[g]];b.type!=="custom"&&c.push(b.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);for(var b in(g.length||_.length)&&this._updateWorkerLayers(g,_),this._updatedSources){var S=this._updatedSources[b];S==="reload"?this._reloadSource(b):S==="clear"&&this._clearSource(b)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var L={};for(var U in this.sourceCaches){var j=this.sourceCaches[U];L[U]=j.used,j.used=!1}for(var q=0,X=this._order;q<X.length;q+=1){var W=this._layers[X[q]];W.recalculate(a,this._availableImages),!W.isHidden(a.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}for(var re in L){var $=this.sourceCaches[re];L[re]!==$.used&&$.fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:re}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new f.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),ka(this,f.validateStyle(a)))return!1;(a=f.clone$1(a)).layers=tt(a.layers);var g=function(b,S){if(!b)return[{command:it.setStyle,args:[S]}];var I=[];try{if(!f.deepEqual(b.version,S.version))return[{command:it.setStyle,args:[S]}];f.deepEqual(b.center,S.center)||I.push({command:it.setCenter,args:[S.center]}),f.deepEqual(b.zoom,S.zoom)||I.push({command:it.setZoom,args:[S.zoom]}),f.deepEqual(b.bearing,S.bearing)||I.push({command:it.setBearing,args:[S.bearing]}),f.deepEqual(b.pitch,S.pitch)||I.push({command:it.setPitch,args:[S.pitch]}),f.deepEqual(b.sprite,S.sprite)||I.push({command:it.setSprite,args:[S.sprite]}),f.deepEqual(b.glyphs,S.glyphs)||I.push({command:it.setGlyphs,args:[S.glyphs]}),f.deepEqual(b.transition,S.transition)||I.push({command:it.setTransition,args:[S.transition]}),f.deepEqual(b.light,S.light)||I.push({command:it.setLight,args:[S.light]});var L={},U=[];(function(q,X,W,re){var $;for($ in X=X||{},q=q||{})q.hasOwnProperty($)&&(X.hasOwnProperty($)||at($,W,re));for($ in X)X.hasOwnProperty($)&&(q.hasOwnProperty($)?f.deepEqual(q[$],X[$])||(q[$].type==="geojson"&&X[$].type==="geojson"&&wr(q,X,$)?W.push({command:it.setGeoJSONSourceData,args:[$,X[$].data]}):Jt($,X,W,re)):Vt($,X,W))})(b.sources,S.sources,U,L);var j=[];b.layers&&b.layers.forEach(function(q){L[q.source]?I.push({command:it.removeLayer,args:[q.id]}):j.push(q)}),I=I.concat(U),function(q,X,W){X=X||[];var re,$,te,le,me,Ce,Ee,Ie=(q=q||[]).map(cr),Ne=X.map(cr),Ke=q.reduce(Qt,{}),We=X.reduce(Qt,{}),ut=Ie.slice(),Et=Object.create(null);for(re=0,$=0;re<Ie.length;re++)We.hasOwnProperty(te=Ie[re])?$++:(W.push({command:it.removeLayer,args:[te]}),ut.splice(ut.indexOf(te,$),1));for(re=0,$=0;re<Ne.length;re++)ut[ut.length-1-re]!==(te=Ne[Ne.length-1-re])&&(Ke.hasOwnProperty(te)?(W.push({command:it.removeLayer,args:[te]}),ut.splice(ut.lastIndexOf(te,ut.length-$),1)):$++,W.push({command:it.addLayer,args:[We[te],Ce=ut[ut.length-re]]}),ut.splice(ut.length-re,0,te),Et[te]=!0);for(re=0;re<Ne.length;re++)if(le=Ke[te=Ne[re]],me=We[te],!Et[te]&&!f.deepEqual(le,me))if(f.deepEqual(le.source,me.source)&&f.deepEqual(le["source-layer"],me["source-layer"])&&f.deepEqual(le.type,me.type)){for(Ee in Zt(le.layout,me.layout,W,te,null,it.setLayoutProperty),Zt(le.paint,me.paint,W,te,null,it.setPaintProperty),f.deepEqual(le.filter,me.filter)||W.push({command:it.setFilter,args:[te,me.filter]}),f.deepEqual(le.minzoom,me.minzoom)&&f.deepEqual(le.maxzoom,me.maxzoom)||W.push({command:it.setLayerZoomRange,args:[te,me.minzoom,me.maxzoom]}),le)le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Zt(le[Ee],me[Ee],W,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||W.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}));for(Ee in me)me.hasOwnProperty(Ee)&&!le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Zt(le[Ee],me[Ee],W,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||W.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}))}else W.push({command:it.removeLayer,args:[te]}),Ce=ut[ut.lastIndexOf(te)+1],W.push({command:it.addLayer,args:[me,Ce]})}(j,S.layers,I)}catch(q){console.warn("Unable to compute style diff:",q),I=[{command:it.setStyle,args:[S]}]}return I}(this.serialize(),a).filter(function(b){return!(b.command in Yo)});if(g.length===0)return!1;var _=g.filter(function(b){return!(b.command in Jo)});if(_.length>0)throw new Error("Unimplemented: "+_.map(function(b){return b.command}).join(", ")+".");return g.forEach(function(b){b.command!=="setTransition"&&c[b.command].apply(c,b.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new f.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new f.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,g){var _=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(f.validateStyle.source,"sources."+a,c,null,g))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var b=this.sourceCaches[a]=new J(a,c,this.dispatcher);b.style=this,b.setEventedParent(this,function(){return{isSourceLoaded:_.loaded(),source:b.serialize(),sourceId:a}}),b.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new f.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var g=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],g.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=a.id;if(this.getLayer(_))this.fire(new f.ErrorEvent(new Error('Layer with id "'+_+'" already exists on this map')));else{var b;if(a.type==="custom"){if(ka(this,f.validateCustomStyleLayer(a)))return;b=f.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(_,a.source),a=f.clone$1(a),a=f.extend(a,{source:_})),this._validate(f.validateStyle.layer,"layers."+_,a,{arrayIndex:-1},g))return;b=f.createStyleLayer(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize()}var S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(S,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){var I=this._removedLayers[_];delete this._removedLayers[_],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var g=this._order.indexOf(a);this._order.splice(g,1);var _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,g){this._checkLoaded();var _=this.getLayer(a);_?_.minzoom===c&&_.maxzoom===g||(c!=null&&(_.minzoom=c),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=this.getLayer(a);if(_){if(!f.deepEqual(_.filter,c))return c==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(f.validateStyle.filter,"layers."+_.id+".filter",c,null,g)||(_.filter=f.clone$1(c),this._updateLayer(_)))}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return f.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getLayoutProperty(c),g)||(b.setLayoutProperty(c,g,_),this._updateLayer(b)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var g=this.getLayer(a);if(g)return g.getLayoutProperty(c);this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getPaintProperty(c),g)||(b.setPaintProperty(c,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=a.sourceLayer,b=this.sourceCaches[g];if(b!==void 0){var S=b.getSource().type;S==="geojson"&&_?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||_?(a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,a.id,c)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=this.sourceCaches[g];if(_!==void 0){var b=_.getSource().type,S=b==="vector"?a.sourceLayer:void 0;b!=="vector"||S?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(S,a.id,c):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,g=a.sourceLayer,_=this.sourceCaches[c];if(_!==void 0){if(_.getSource().type!=="vector"||g)return a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,g=function(Ke){return c._layers[Ke].type==="fill-extrusion"},_={},b=[],S=this._order.length-1;S>=0;S--){var I=this._order[S];if(g(I)){_[I]=S;for(var L=0,U=a;L<U.length;L+=1){var j=U[L][I];if(j)for(var q=0,X=j;q<X.length;q+=1)b.push(X[q])}}}b.sort(function(Ke,We){return We.intersectionZ-Ke.intersectionZ});for(var W=[],re=this._order.length-1;re>=0;re--){var $=this._order[re];if(g($))for(var te=b.length-1;te>=0;te--){var le=b[te].feature;if(_[le.layer.id]<re)break;W.push(le),b.pop()}else for(var me=0,Ce=a;me<Ce.length;me+=1){var Ee=Ce[me][$];if(Ee)for(var Ie=0,Ne=Ee;Ie<Ne.length;Ie+=1)W.push(Ne[Ie].feature)}}return W},s.prototype.queryRenderedFeatures=function(a,c,g){c&&c.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var _={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var b=0,S=c.layers;b<S.length;b+=1){var I=S[b],L=this._layers[I];if(!L)return this.fire(new f.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];_[L.source]=!0}}var U=[];for(var j in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!_[j]||U.push(He(this.sourceCaches[j],this._layers,this._serializedLayers,a,c,g));return this.placement&&U.push(function(q,X,W,re,$,te,le){for(var me={},Ce=te.queryRenderedSymbols(re),Ee=[],Ie=0,Ne=Object.keys(Ce).map(Number);Ie<Ne.length;Ie+=1)Ee.push(le[Ne[Ie]]);Ee.sort(ct);for(var Ke=function(){var Ct=ut[We],ir=Ct.featureIndex.lookupSymbolFeatures(Ce[Ct.bucketInstanceId],X,Ct.bucketIndex,Ct.sourceLayerIndex,$.filter,$.layers,$.availableImages,q);for(var pt in ir){var Rt=me[pt]=me[pt]||[],Nt=ir[pt];Nt.sort(function(Ft,Mt){var It=Ct.featureSortOrder;if(It){var bn=It.indexOf(Ft.featureIndex);return It.indexOf(Mt.featureIndex)-bn}return Mt.featureIndex-Ft.featureIndex});for(var Lt=0,zt=Nt;Lt<zt.length;Lt+=1)Rt.push(zt[Lt])}},We=0,ut=Ee;We<ut.length;We+=1)Ke();var Et=function(Ct){me[Ct].forEach(function(ir){var pt=ir.feature,Rt=W[q[Ct].source].getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=Rt})};for(var At in me)Et(At);return me}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(U)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var g=this.sourceCaches[a];return g?function(_,b){for(var S=_.getRenderableIds().map(function(X){return _.getTileByID(X)}),I=[],L={},U=0;U<S.length;U++){var j=S[U],q=j.tileID.canonical.key;L[q]||(L[q]=!0,j.querySourceFeatures(I,b))}return I}(g,c):[]},s.prototype.addSourceType=function(a,c,g){return s.getSourceType(a)?g(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},g):g(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var g=this.light.getLight(),_=!1;for(var b in a)if(!f.deepEqual(a[b],g[b])){_=!0;break}if(_){var S={now:f.browser.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(S)}},s.prototype._validate=function(a,c,g,_,b){return b===void 0&&(b={}),(!b||b.validate!==!1)&&ka(this,a.call(f.validateStyle,f.extend({key:c,style:this.serialize(),value:g,styleSpec:f.styleSpec},_)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,g,_,b){b===void 0&&(b=!1);for(var S=!1,I=!1,L={},U=0,j=this._order;U<j.length;U+=1){var q=this._layers[j[U]];if(q.type==="symbol"){if(!L[q.source]){var X=this.sourceCaches[q.source];L[q.source]=X.getRenderableIds(!0).map(function(le){return X.getTileByID(le)}).sort(function(le,me){return me.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(me.tileID)?-1:1)})}var W=this.crossTileSymbolIndex.addLayer(q,L[q.source],a.center.lng);S=S||W}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.browser.now(),a.zoom))&&(this.pauseablePlacement=new rl(a,this._order,b,c,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.browser.now()),I=!0),S&&this.pauseablePlacement.placement.setStale()),I||S)for(var re=0,$=this._order;re<$.length;re+=1){var te=this._layers[$[re]];te.type==="symbol"&&this.placement.updateLayerOpacities(te,L[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,g){this.imageManager.getImages(c.icons,g),this._updateTilesForChangedImages();var _=this.sourceCaches[c.source];_&&_.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,g){this.glyphManager.getGlyphs(c.stacks,g)},s.prototype.getResource=function(a,c,g){return f.makeRequest(c,g)},s}(f.Evented);gi.getSourceType=function(o){return Ae[o]},gi.setSourceType=function(o,s){Ae[o]=s},gi.registerForPluginStateChange=f.registerForPluginStateChange;var an=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),hs=Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),_h=Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),om=Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),am=Er(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Lc=Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rc=Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Oc=Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Dc=Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),xh=Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),bh=Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),sm=Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),nl=Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),il=Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),wh=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Dn=Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Bc=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Qo=Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ea=Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Pa=Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ma=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ta=Er(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),za=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),La=Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ra=Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Eh=Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Sh=Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Er(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),g=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(g):g,S={};return{fragmentSource:o=o.replace(a,function(I,L,U,j,q){return S[q]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
varying `+U+" "+j+" "+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`}),vertexSource:s=s.replace(a,function(I,L,U,j,q){var X=j==="float"?"vec2":"vec4",W=q.match(/color/)?"color":X;return S[q]?L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+U+" "+X+" a_"+q+`;
varying `+U+" "+j+" "+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = a_"+q+`;
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = unpack_mix_"+W+"(a_"+q+", u_"+q+`_t);
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+U+" "+X+" a_"+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = a_"+q+`;
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = unpack_mix_"+W+"(a_"+q+", u_"+q+`_t);
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`}),staticAttributes:c,staticUniforms:b}}var lm=Object.freeze({__proto__:null,prelude:hs,background:_h,backgroundPattern:om,circle:am,clippingMask:Lc,heatmap:Rc,heatmapTexture:Oc,collisionBox:Dc,collisionCircle:xh,debug:bh,fill:sm,fillOutline:nl,fillOutlinePattern:il,fillPattern:wh,fillExtrusion:Dn,fillExtrusionPattern:Bc,hillshadePrepare:Qo,hillshade:ea,line:Pa,lineGradient:Ma,linePattern:ta,lineSDF:za,raster:La,symbolIcon:ra,symbolSDF:Eh,symbolTextAndIcon:Sh}),su=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Th(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var c=o[a].split(" ");s.push(c.pop())}return s}su.prototype.bind=function(o,s,a,c,g,_,b,S){this.context=o;for(var I=this.boundPaintVertexBuffers.length!==c.length,L=0;!I&&L<c.length;L++)this.boundPaintVertexBuffers[L]!==c[L]&&(I=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!I&&this.boundIndexBuffer===g&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===b&&this.boundDynamicVertexBuffer2===S?(o.bindVertexArrayOES.set(this.vao),b&&b.bind(),g&&g.dynamicDraw&&g.bind(),S&&S.bind()):this.freshBind(s,a,c,g,_,b,S)},su.prototype.freshBind=function(o,s,a,c,g,_,b){var S,I=o.numAttributes,L=this.context,U=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=b;else{S=L.currentNumAttributes||0;for(var j=I;j<S;j++)U.disableVertexAttribArray(j)}s.enableAttributes(U,o);for(var q=0,X=a;q<X.length;q+=1)X[q].enableAttributes(U,o);_&&_.enableAttributes(U,o),b&&b.enableAttributes(U,o),s.bind(),s.setVertexAttribPointers(U,o,g);for(var W=0,re=a;W<re.length;W+=1){var $=re[W];$.bind(),$.setVertexAttribPointers(U,o,g)}_&&(_.bind(),_.setVertexAttribPointers(U,o,g)),c&&c.bind(),b&&(b.bind(),b.setVertexAttribPointers(U,o,g)),L.currentNumAttributes=I},su.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ch=function(o,s,a,c,g,_){var b=o.gl;this.program=b.createProgram();for(var S=Th(a.staticAttributes),I=c?c.getBinderAttributes():[],L=S.concat(I),U=a.staticUniforms?Th(a.staticUniforms):[],j=c?c.getBinderUniforms():[],q=[],X=0,W=U.concat(j);X<W.length;X+=1){var re=W[X];q.indexOf(re)<0&&q.push(re)}var $=c?c.defines():[];_&&$.push("#define OVERDRAW_INSPECTOR;");var te=$.concat(hs.fragmentSource,a.fragmentSource).join(`
`),le=$.concat(hs.vertexSource,a.vertexSource).join(`
`),me=b.createShader(b.FRAGMENT_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(me,te),b.compileShader(me),b.attachShader(this.program,me);var Ce=b.createShader(b.VERTEX_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(Ce,le),b.compileShader(Ce),b.attachShader(this.program,Ce),this.attributes={};var Ee={};this.numAttributes=L.length;for(var Ie=0;Ie<this.numAttributes;Ie++)L[Ie]&&(b.bindAttribLocation(this.program,Ie,L[Ie]),this.attributes[L[Ie]]=Ie);b.linkProgram(this.program),b.deleteShader(Ce),b.deleteShader(me);for(var Ne=0;Ne<q.length;Ne++){var Ke=q[Ne];if(Ke&&!Ee[Ke]){var We=b.getUniformLocation(this.program,Ke);We&&(Ee[Ke]=We)}}this.fixedUniforms=g(o,Ee),this.binderUniforms=c?c.getUniforms(o,Ee):[]}}};function Ah(o,s,a){var c=1/Rr(a,1,s.transform.tileZoom),g=Math.pow(2,a.tileID.overscaledZ),_=a.tileSize*Math.pow(2,s.transform.tileZoom)/g,b=_*(a.tileID.canonical.x+a.tileID.wrap*g),S=_*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[b>>16,S>>16],u_pixel_coord_lower:[65535&b,65535&S]}}Ch.prototype.draw=function(o,s,a,c,g,_,b,S,I,L,U,j,q,X,W,re){var $,te=o.gl;if(!this.failedToCreate){for(var le in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(c),o.setColorMode(g),o.setCullFace(_),this.fixedUniforms)this.fixedUniforms[le].set(b[le]);X&&X.setUniforms(o,this.binderUniforms,j,{zoom:q});for(var me=($={},$[te.LINES]=2,$[te.TRIANGLES]=3,$[te.LINE_STRIP]=1,$)[s],Ce=0,Ee=U.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce],Ne=Ie.vaos||(Ie.vaos={});(Ne[S]||(Ne[S]=new su)).bind(o,this,I,X?X.getPaintVertexBuffers():[],L,Ie.vertexOffset,W,re),te.drawElements(s,Ie.primitiveLength*me,te.UNSIGNED_SHORT,Ie.primitiveOffset*me*2)}}};var Ih=function(o,s,a,c){var g=s.style.light,_=g.properties.get("position"),b=[_.x,_.y,_.z],S=f.create$1();g.properties.get("anchor")==="viewport"&&f.fromRotation(S,-s.transform.angle),f.transformMat3(b,b,S);var I=g.properties.get("color");return{u_matrix:o,u_lightpos:b,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:c}},Ra=function(o,s,a,c,g,_,b){return f.extend(Ih(o,s,a,c),Ah(_,s,b),{u_height_factor:-Math.pow(2,g.overscaledZ)/b.tileSize/8})},na=function(o){return{u_matrix:o}},Oa=function(o,s,a,c){return f.extend(na(o),Ah(a,s,c))},kh=function(o,s){return{u_matrix:o,u_world:s}},Ph=function(o,s,a,c,g){return f.extend(Oa(o,s,a,c),{u_world:g})},Fc=function(o,s,a,c){var g,_,b=o.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var S=Rr(a,1,b.zoom);g=!0,_=[S,S]}else g=!1,_=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:f.browser.devicePixelRatio,u_extrude_scale:_}},Da=function(o,s,a){var c=Rr(a,1,s.zoom),g=Math.pow(2,s.zoom-a.tileID.overscaledZ),_=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*g),s.pixelsToGLUnits[1]/(c*g)],u_overscale_factor:_}},Mh=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Ba=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},Fa=function(o){return{u_matrix:o}},zh=function(o,s,a,c){return{u_matrix:o,u_extrude_scale:Rr(s,1,a),u_intensity:c}},ol=function(o,s,a){var c=o.transform;return{u_matrix:Lh(o,s,a),u_ratio:1/Rr(s,1,c.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ar=function(o,s,a,c){return f.extend(ol(o,s,a),{u_image:0,u_image_height:c})},lu=function(o,s,a,c){var g=o.transform,_=fs(s,g);return{u_matrix:Lh(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Rr(s,1,g.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_image:0,u_scale:[_,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},um=function(o,s,a,c,g){var _=o.lineAtlas,b=fs(s,o.transform),S=a.layout.get("line-cap")==="round",I=_.getDash(c.from,S),L=_.getDash(c.to,S),U=I.width*g.fromScale,j=L.width*g.toScale;return f.extend(ol(o,s,a),{u_patternscale_a:[b/U,-I.height/2],u_patternscale_b:[b/j,-L.height/2],u_sdfgamma:_.width/(256*Math.min(U,j)*f.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:L.y,u_mix:g.t})};function fs(o,s){return 1/Rr(o,1,s.tileZoom)}function Lh(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var cm=function(o,s,a,c,g){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(b=g.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Rh(g.paint.get("raster-hue-rotate"))};var _,b};function Rh(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var uu,ds=function(o,s,a,c,g,_,b,S,I,L){var U=g.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:U.width/U.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:b,u_coord_matrix:S,u_is_text:+I,u_pitch_with_map:+c,u_texsize:L,u_texture:0}},al=function(o,s,a,c,g,_,b,S,I,L,U){var j=g.transform;return f.extend(ds(o,s,a,c,g,_,b,S,I,L),{u_gamma_scale:c?Math.cos(j._pitch)*j.cameraToCenterDistance:1,u_device_pixel_ratio:f.browser.devicePixelRatio,u_is_halo:+U})},cu=function(o,s,a,c,g,_,b,S,I,L){return f.extend(al(o,s,a,c,g,_,b,S,!0,I,!0),{u_texsize_icon:L,u_texture_icon:1})},sl=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},ms=function(o,s,a,c,g,_){return f.extend(function(b,S,I,L){var U=I.imageManager.getPattern(b.from.toString()),j=I.imageManager.getPattern(b.to.toString()),q=I.imageManager.getPixelSize(),X=q.width,W=q.height,re=Math.pow(2,L.tileID.overscaledZ),$=L.tileSize*Math.pow(2,I.transform.tileZoom)/re,te=$*(L.tileID.canonical.x+L.tileID.wrap*re),le=$*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:j.tl,u_pattern_br_b:j.br,u_texsize:[X,W],u_mix:S.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:j.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Rr(L,1,I.transform.tileZoom),u_pixel_coord_upper:[te>>16,le>>16],u_pixel_coord_lower:[65535&te,65535&le]}}(c,_,a,g),{u_matrix:o,u_opacity:s})},Oh={fillExtrusion:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new f.Uniform1f(o,s.u_height_factor),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new f.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new f.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new f.UniformColor(o,s.u_color),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_overlay:new f.Uniform1i(o,s.u_overlay),u_overlay_scale:new f.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new f.Uniform1f(o,s.u_extrude_scale),u_intensity:new f.Uniform1f(o,s.u_intensity),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_color_ramp:new f.Uniform1i(o,s.u_color_ramp),u_opacity:new f.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_latrange:new f.Uniform2f(o,s.u_latrange),u_light:new f.Uniform2f(o,s.u_light),u_shadow:new f.UniformColor(o,s.u_shadow),u_highlight:new f.UniformColor(o,s.u_highlight),u_accent:new f.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_dimension:new f.Uniform2f(o,s.u_dimension),u_zoom:new f.Uniform1f(o,s.u_zoom),u_unpack:new f.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_image:new f.Uniform1i(o,s.u_image),u_image_height:new f.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_texsize:new f.Uniform2f(o,s.u_texsize),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_image:new f.Uniform1i(o,s.u_image),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new f.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new f.Uniform1f(o,s.u_sdfgamma),u_image:new f.Uniform1i(o,s.u_image),u_tex_y_a:new f.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new f.Uniform1f(o,s.u_tex_y_b),u_mix:new f.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new f.Uniform2f(o,s.u_tl_parent),u_scale_parent:new f.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new f.Uniform1f(o,s.u_buffer_scale),u_fade_t:new f.Uniform1f(o,s.u_fade_t),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image0:new f.Uniform1i(o,s.u_image0),u_image1:new f.Uniform1i(o,s.u_image1),u_brightness_low:new f.Uniform1f(o,s.u_brightness_low),u_brightness_high:new f.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new f.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new f.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new f.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texsize_icon:new f.Uniform2f(o,s.u_texsize_icon),u_texture:new f.Uniform1i(o,s.u_texture),u_texture_icon:new f.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_color:new f.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image:new f.Uniform1i(o,s.u_image),u_pattern_tl_a:new f.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(o,s.u_pattern_br_b),u_texsize:new f.Uniform2f(o,s.u_texsize),u_mix:new f.Uniform1f(o,s.u_mix),u_pattern_size_a:new f.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new f.Uniform1f(o,s.u_scale_a),u_scale_b:new f.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(o,s.u_tile_units_to_pixels)}}};function gs(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=o.useProgram("collisionBox"),U=[],j=0,q=0,X=0;X<c.length;X++){var W=c[X],re=s.getTile(W),$=re.getBucket(a);if($){var te=W.posMatrix;g[0]===0&&g[1]===0||(te=o.translatePosMatrix(W.posMatrix,re,g,_));var le=b?$.textCollisionBox:$.iconCollisionBox,me=$.collisionCircleArray;if(me.length>0){var Ce=f.create(),Ee=te;f.mul(Ce,$.placementInvProjMatrix,o.transform.glCoordMatrix),f.mul(Ce,Ce,$.placementViewportMatrix),U.push({circleArray:me,circleOffset:q,transform:Ee,invTransform:Ce}),q=j+=me.length/4}le&&L.draw(S,I.LINES,H.disabled,K.disabled,o.colorModeForRenderPass(),ce.disabled,Da(te,o.transform,re),a.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,null,o.transform.zoom,null,null,le.collisionVertexBuffer)}}if(b&&U.length){var Ie=o.useProgram("collisionCircle"),Ne=new f.StructArrayLayout2f1f2i16;Ne.resize(4*j),Ne._trim();for(var Ke=0,We=0,ut=U;We<ut.length;We+=1)for(var Et=ut[We],At=0;At<Et.circleArray.length/4;At++){var Ct=4*At,ir=Et.circleArray[Ct+0],pt=Et.circleArray[Ct+1],Rt=Et.circleArray[Ct+2],Nt=Et.circleArray[Ct+3];Ne.emplace(Ke++,ir,pt,Rt,Nt,0),Ne.emplace(Ke++,ir,pt,Rt,Nt,1),Ne.emplace(Ke++,ir,pt,Rt,Nt,2),Ne.emplace(Ke++,ir,pt,Rt,Nt,3)}(!uu||uu.length<2*j)&&(uu=function($r){var qn=2*$r,kn=new f.StructArrayLayout3ui6;kn.resize(qn),kn._trim();for(var qr=0;qr<qn;qr++){var Qr=6*qr;kn.uint16[Qr+0]=4*qr+0,kn.uint16[Qr+1]=4*qr+1,kn.uint16[Qr+2]=4*qr+2,kn.uint16[Qr+3]=4*qr+2,kn.uint16[Qr+4]=4*qr+3,kn.uint16[Qr+5]=4*qr+0}return kn}(j));for(var Lt=S.createIndexBuffer(uu,!0),zt=S.createVertexBuffer(Ne,f.collisionCircleLayout.members,!0),Ft=0,Mt=U;Ft<Mt.length;Ft+=1){var It=Mt[Ft],bn=Mh(It.transform,It.invTransform,o.transform);Ie.draw(S,I.TRIANGLES,H.disabled,K.disabled,o.colorModeForRenderPass(),ce.disabled,bn,a.id,zt,Lt,f.SegmentVector.simpleSegment(0,2*It.circleOffset,It.circleArray.length,It.circleArray.length/2),null,o.transform.zoom,null,null,null)}zt.destroy(),Lt.destroy()}}var so=f.identity(new Float32Array(16));function Dh(o,s,a,c,g,_){var b=f.getAnchorAlignment(o),S=-(b.horizontalAlign-.5)*s,I=-(b.verticalAlign-.5)*a,L=f.evaluateVariableOffset(o,c);return new f.Point((S/g+L[0])*_,(I/g+L[1])*_)}function Bh(o,s,a,c,g,_,b,S,I,L,U){var j=o.text.placedSymbolArray,q=o.text.dynamicLayoutVertexArray,X=o.icon.dynamicLayoutVertexArray,W={};q.clear();for(var re=0;re<j.length;re++){var $=j.get(re),te=$.hidden||!$.crossTileID||o.allowVerticalPlacement&&!$.placedOrientation?null:c[$.crossTileID];if(te){var le=new f.Point($.anchorX,$.anchorY),me=Xt(le,a?S:b),Ce=pr(_.cameraToCenterDistance,me.signedDistanceFromCamera),Ee=g.evaluateSizeForFeature(o.textSizeData,L,$)*Ce/f.ONE_EM;a&&(Ee*=o.tilePixelRatio/I);for(var Ie=Dh(te.anchor,te.width,te.height,te.textOffset,te.textBoxScale,Ee),Ne=a?Xt(le.add(Ie),b).point:me.point.add(s?Ie.rotate(-_.angle):Ie),Ke=o.allowVerticalPlacement&&$.placedOrientation===f.WritingMode.vertical?Math.PI/2:0,We=0;We<$.numGlyphs;We++)f.addDynamicAttributes(q,Ne,Ke);U&&$.associatedIconIndex>=0&&(W[$.associatedIconIndex]={shiftedAnchor:Ne,angle:Ke})}else Jn($.numGlyphs,q)}if(U){X.clear();for(var ut=o.icon.placedSymbolArray,Et=0;Et<ut.length;Et++){var At=ut.get(Et);if(At.hidden)Jn(At.numGlyphs,X);else{var Ct=W[Et];if(Ct)for(var ir=0;ir<At.numGlyphs;ir++)f.addDynamicAttributes(X,Ct.shiftedAnchor,Ct.angle);else Jn(At.numGlyphs,X)}}o.icon.dynamicLayoutVertexBuffer.updateData(X)}o.text.dynamicLayoutVertexBuffer.updateData(q)}function Fh(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function Na(o,s,a,c,g,_,b,S,I,L,U,j){for(var q=o.context,X=q.gl,W=o.transform,re=S==="map",$=I==="map",te=re&&a.layout.get("symbol-placement")!=="point",le=re&&!$&&!te,me=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=!1,Ee=o.depthModeForSublayer(0,H.ReadOnly),Ie=a.layout.get("text-variable-anchor"),Ne=[],Ke=0,We=c;Ke<We.length;Ke+=1){var ut=We[Ke],Et=s.getTile(ut),At=Et.getBucket(a);if(At){var Ct=g?At.text:At.icon;if(Ct&&Ct.segments.get().length){var ir=Ct.programConfigurations.get(a.id),pt=g||At.sdfIcons,Rt=g?At.textSizeData:At.iconSizeData,Nt=$||W.pitch!==0,Lt=o.useProgram(Fh(pt,g,At),ir),zt=f.evaluateSizeForZoom(Rt,W.zoom),Ft=void 0,Mt=[0,0],It=void 0,bn=void 0,$r=null,qn=void 0;if(g)It=Et.glyphAtlasTexture,bn=X.LINEAR,Ft=Et.glyphAtlasTexture.size,At.iconsInText&&(Mt=Et.imageAtlasTexture.size,$r=Et.imageAtlasTexture,qn=Nt||o.options.rotating||o.options.zooming||Rt.kind==="composite"||Rt.kind==="camera"?X.LINEAR:X.NEAREST);else{var kn=a.layout.get("icon-size").constantOr(0)!==1||At.iconsNeedLinear;It=Et.imageAtlasTexture,bn=pt||o.options.rotating||o.options.zooming||kn||Nt?X.LINEAR:X.NEAREST,Ft=Et.imageAtlasTexture.size}var qr=Rr(Et,1,o.transform.zoom),Qr=Jr(ut.posMatrix,$,re,o.transform,qr),wi=xr(ut.posMatrix,$,re,o.transform,qr),ti=Ie&&At.hasTextData(),ua=a.layout.get("icon-text-fit")!=="none"&&ti&&At.hasIconData();te&&Qs(At,ut.posMatrix,o,g,Qr,wi,$,L);var ui=o.translatePosMatrix(ut.posMatrix,Et,_,b),ho=te||g&&Ie||ua?so:Qr,Gi=o.translatePosMatrix(wi,Et,_,b,!0),_l=pt&&a.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ws={program:Lt,buffers:Ct,uniformValues:pt?At.iconsInText?cu(Rt.kind,zt,le,$,o,ui,ho,Gi,Ft,Mt):al(Rt.kind,zt,le,$,o,ui,ho,Gi,g,Ft,!0):ds(Rt.kind,zt,le,$,o,ui,ho,Gi,g,Ft),atlasTexture:It,atlasTextureIcon:$r,atlasInterpolation:bn,atlasInterpolationIcon:qn,isSDF:pt,hasHalo:_l};if(me&&At.canOverlap){Ce=!0;for(var ca=0,Es=Ct.segments.get();ca<Es.length;ca+=1){var xl=Es[ca];Ne.push({segments:new f.SegmentVector([xl]),sortKey:xl.sortKey,state:ws})}}else Ne.push({segments:Ct.segments,sortKey:0,state:ws})}}}Ce&&Ne.sort(function(pa,$a){return pa.sortKey-$a.sortKey});for(var Co=0,bl=Ne;Co<bl.length;Co+=1){var Ao=bl[Co],wn=Ao.state;if(q.activeTexture.set(X.TEXTURE0),wn.atlasTexture.bind(wn.atlasInterpolation,X.CLAMP_TO_EDGE),wn.atlasTextureIcon&&(q.activeTexture.set(X.TEXTURE1),wn.atlasTextureIcon&&wn.atlasTextureIcon.bind(wn.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),wn.isSDF){var Vo=wn.uniformValues;wn.hasHalo&&(Vo.u_is_halo=1,ll(wn.buffers,Ao.segments,a,o,wn.program,Ee,U,j,Vo)),Vo.u_is_halo=0}ll(wn.buffers,Ao.segments,a,o,wn.program,Ee,U,j,wn.uniformValues)}}function ll(o,s,a,c,g,_,b,S,I){var L=c.context;g.draw(L,L.gl.TRIANGLES,_,b,S,ce.disabled,I,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,c.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function pu(o,s,a,c,g,_,b){var S,I,L,U,j,q=o.context.gl,X=a.paint.get("fill-pattern"),W=X&&X.constantOr(1),re=a.getCrossfadeParameters();b?(I=W&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",S=q.LINES):(I=W?"fillPattern":"fill",S=q.TRIANGLES);for(var $=0,te=c;$<te.length;$+=1){var le=te[$],me=s.getTile(le);if(!W||me.patternsLoaded()){var Ce=me.getBucket(a);if(Ce){var Ee=Ce.programConfigurations.get(a.id),Ie=o.useProgram(I,Ee);W&&(o.context.activeTexture.set(q.TEXTURE0),me.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ee.updatePaintBuffers(re));var Ne=X.constantOr(null);if(Ne&&me.imageAtlas){var Ke=me.imageAtlas,We=Ke.patternPositions[Ne.to.toString()],ut=Ke.patternPositions[Ne.from.toString()];We&&ut&&Ee.setConstantPatternPositions(We,ut)}var Et=o.translatePosMatrix(le.posMatrix,me,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(b){U=Ce.indexBuffer2,j=Ce.segments2;var At=[q.drawingBufferWidth,q.drawingBufferHeight];L=I==="fillOutlinePattern"&&W?Ph(Et,o,re,me,At):kh(Et,At)}else U=Ce.indexBuffer,j=Ce.segments,L=W?Oa(Et,o,re,me):na(Et);Ie.draw(o.context,S,g,o.stencilModeForClipping(le),_,ce.disabled,L,a.id,Ce.layoutVertexBuffer,U,j,a.paint,o.transform.zoom,Ee)}}}}function Nc(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=a.paint.get("fill-extrusion-pattern"),U=L.constantOr(1),j=a.getCrossfadeParameters(),q=a.paint.get("fill-extrusion-opacity"),X=0,W=c;X<W.length;X+=1){var re=W[X],$=s.getTile(re),te=$.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me=o.useProgram(U?"fillExtrusionPattern":"fillExtrusion",le);U&&(o.context.activeTexture.set(I.TEXTURE0),$.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),le.updatePaintBuffers(j));var Ce=L.constantOr(null);if(Ce&&$.imageAtlas){var Ee=$.imageAtlas,Ie=Ee.patternPositions[Ce.to.toString()],Ne=Ee.patternPositions[Ce.from.toString()];Ie&&Ne&&le.setConstantPatternPositions(Ie,Ne)}var Ke=o.translatePosMatrix(re.posMatrix,$,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),We=a.paint.get("fill-extrusion-vertical-gradient"),ut=U?Ra(Ke,o,We,q,re,j,$):Ih(Ke,o,We,q);me.draw(S,S.gl.TRIANGLES,g,_,b,ce.backCCW,ut,a.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,a.paint,o.transform.zoom,le)}}}function hu(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.fbo;if(I){var L=o.useProgram("hillshade");b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get());var U=function(j,q,X){var W=X.paint.get("hillshade-shadow-color"),re=X.paint.get("hillshade-highlight-color"),$=X.paint.get("hillshade-accent-color"),te=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=j.transform.angle);var le,me,Ce,Ee=!j.options.moving;return{u_matrix:j.transform.calculatePosMatrix(q.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(le=q.tileID,me=Math.pow(2,le.canonical.z),Ce=le.canonical.y,[new f.MercatorCoordinate(0,Ce/me).toLngLat().lat,new f.MercatorCoordinate(0,(Ce+1)/me).toLngLat().lat]),u_light:[X.paint.get("hillshade-exaggeration"),te],u_shadow:W,u_highlight:re,u_accent:$}}(o,s,a);L.draw(b,S.TRIANGLES,c,g,_,ce.disabled,U,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function pm(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.dem;if(I&&I.data){var L=I.dim,U=I.stride,j=I.getPixels();if(b.activeTexture.set(S.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(U),s.demTexture){var q=s.demTexture;q.update(j,{premultiply:!1}),q.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else s.demTexture=new f.Texture(b,j,S.RGBA,{premultiply:!1}),s.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);b.activeTexture.set(S.TEXTURE0);var X=s.fbo;if(!X){var W=new f.Texture(b,{width:L,height:L,data:null},S.RGBA);W.bind(S.LINEAR,S.CLAMP_TO_EDGE),(X=s.fbo=b.createFramebuffer(L,L,!0)).colorAttachment.set(W.texture)}b.bindFramebuffer.set(X.framebuffer),b.viewport.set([0,0,L,L]),o.useProgram("hillshadePrepare").draw(b,S.TRIANGLES,c,g,_,ce.disabled,function(re,$){var te=$.stride,le=f.create();return f.ortho(le,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(le,le,[0,-f.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[te,te],u_zoom:re.overscaledZ,u_unpack:$.getUnpackVector()}}(s.tileID,I),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function fu(o,s,a,c,g){var _=c.paint.get("raster-fade-duration");if(_>0){var b=f.browser.now(),S=(b-o.timeAdded)/_,I=s?(b-s.timeAdded)/_:-1,L=a.getSource(),U=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),j=!s||Math.abs(s.tileID.overscaledZ-U)>Math.abs(o.tileID.overscaledZ-U),q=j&&o.refreshedUponExpiration?1:f.clamp(j?S:1-I,0,1);return o.refreshedUponExpiration&&S>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}var Uc=new f.Color(1,0,0,1),Nh=new f.Color(0,1,0,1),Uh=new f.Color(0,0,1,1),du=new f.Color(1,0,1,1),Vc=new f.Color(0,1,1,1);function jc(o,s,a,c){ul(o,0,s+a/2,o.transform.width,a,c)}function qc(o,s,a,c){ul(o,s-a/2,0,a,o.transform.height,c)}function ul(o,s,a,c,g,_){var b=o.context,S=b.gl;S.enable(S.SCISSOR_TEST),S.scissor(s*f.browser.devicePixelRatio,a*f.browser.devicePixelRatio,c*f.browser.devicePixelRatio,g*f.browser.devicePixelRatio),b.clear({color:_}),S.disable(S.SCISSOR_TEST)}function Vh(o,s,a){var c=o.context,g=c.gl,_=a.posMatrix,b=o.useProgram("debug"),S=H.disabled,I=K.disabled,L=o.colorModeForRenderPass();c.activeTexture.set(g.TEXTURE0),o.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),b.draw(c,g.LINE_STRIP,S,I,L,ce.disabled,Ba(_,f.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var U=s.getTileByID(a.key).latestRawTileData,j=Math.floor((U&&U.byteLength||0)/1024),q=s.getTile(a).tileSize,X=512/Math.min(q,512)*(a.overscaledZ/o.transform.zoom)*.5,W=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(W+=" => "+a.overscaledZ),function(re,$){re.initDebugOverlayCanvas();var te=re.debugOverlayCanvas,le=re.context.gl,me=re.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,te.width,te.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText($,5,5),me.strokeText($,5,5),re.debugOverlayTexture.update(te),re.debugOverlayTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE)}(o,W+" "+j+"kb"),b.draw(c,g.TRIANGLES,S,I,ae.alphaBlended,ce.disabled,Ba(_,f.Color.transparent,X),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var Ua={symbol:function(o,s,a,c,g){if(o.renderPass==="translucent"){var _=K.disabled,b=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(S,I,L,U,j,q,X){for(var W=I.transform,re=j==="map",$=q==="map",te=0,le=S;te<le.length;te+=1){var me=le[te],Ce=U.getTile(me),Ee=Ce.getBucket(L);if(Ee&&Ee.text&&Ee.text.segments.get().length){var Ie=f.evaluateSizeForZoom(Ee.textSizeData,W.zoom),Ne=Rr(Ce,1,I.transform.zoom),Ke=Jr(me.posMatrix,$,re,I.transform,Ne),We=L.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ie){var ut=Math.pow(2,W.zoom-Ce.tileID.overscaledZ);Bh(Ee,re,$,X,f.symbolSize,W,Ke,me.posMatrix,ut,Ie,We)}}}}(c,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),g),a.paint.get("icon-opacity").constantOr(1)!==0&&Na(o,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),_,b),a.paint.get("text-opacity").constantOr(1)!==0&&Na(o,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),_,b),s.map.showCollisionBoxes&&(gs(o,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),gs(o,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("circle-opacity"),_=a.paint.get("circle-stroke-width"),b=a.paint.get("circle-stroke-opacity"),S=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||_.constantOr(1)!==0&&b.constantOr(1)!==0){for(var I=o.context,L=I.gl,U=o.depthModeForSublayer(0,H.ReadOnly),j=K.disabled,q=o.colorModeForRenderPass(),X=[],W=0;W<c.length;W++){var re=c[W],$=s.getTile(re),te=$.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me={programConfiguration:le,program:o.useProgram("circle",le),layoutVertexBuffer:te.layoutVertexBuffer,indexBuffer:te.indexBuffer,uniformValues:Fc(o,re,$,a)};if(S)for(var Ce=0,Ee=te.segments.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce];X.push({segments:new f.SegmentVector([Ie]),sortKey:Ie.sortKey,state:me})}else X.push({segments:te.segments,sortKey:0,state:me})}}S&&X.sort(function(Et,At){return Et.sortKey-At.sortKey});for(var Ne=0,Ke=X;Ne<Ke.length;Ne+=1){var We=Ke[Ne],ut=We.state;ut.program.draw(I,L.TRIANGLES,U,j,q,ce.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,We.segments,a.paint,o.transform.zoom,ut.programConfiguration)}}}},heatmap:function(o,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var g=o.context,_=g.gl,b=K.disabled,S=new ae([_.ONE,_.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(X,W,re){var $=X.gl;X.activeTexture.set($.TEXTURE1),X.viewport.set([0,0,W.width/4,W.height/4]);var te=re.heatmapFbo;if(te)$.bindTexture($.TEXTURE_2D,te.colorAttachment.get()),X.bindFramebuffer.set(te.framebuffer);else{var le=$.createTexture();$.bindTexture($.TEXTURE_2D,le),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),te=re.heatmapFbo=X.createFramebuffer(W.width/4,W.height/4,!1),function(me,Ce,Ee,Ie){var Ne=me.gl;Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Ce.width/4,Ce.height/4,0,Ne.RGBA,me.extRenderToTextureHalfFloat?me.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Ee)}(X,W,le,te)}})(g,o,a),g.clear({color:f.Color.transparent});for(var I=0;I<c.length;I++){var L=c[I];if(!s.hasRenderableParent(L)){var U=s.getTile(L),j=U.getBucket(a);if(j){var q=j.programConfigurations.get(a.id);o.useProgram("heatmap",q).draw(g,_.TRIANGLES,H.disabled,b,S,ce.disabled,zh(L.posMatrix,U,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,a.paint,o.transform.zoom,q)}}}g.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(X,W){var re=X.context,$=re.gl,te=W.heatmapFbo;if(te){re.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,te.colorAttachment.get()),re.activeTexture.set($.TEXTURE1);var le=W.colorRampTexture;le||(le=W.colorRampTexture=new f.Texture(re,W.colorRamp,$.RGBA)),le.bind($.LINEAR,$.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(re,$.TRIANGLES,H.disabled,K.disabled,X.colorModeForRenderPass(),ce.disabled,function(me,Ce,Ee,Ie){var Ne=f.create();f.ortho(Ne,0,me.width,me.height,0,0,1);var Ke=me.context.gl;return{u_matrix:Ne,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}}(X,W),W.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,W.paint,X.transform.zoom)}}(o,a))},line:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("line-opacity"),_=a.paint.get("line-width");if(g.constantOr(1)!==0&&_.constantOr(1)!==0)for(var b=o.depthModeForSublayer(0,H.ReadOnly),S=o.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),L=a.paint.get("line-pattern"),U=L.constantOr(1),j=a.paint.get("line-gradient"),q=a.getCrossfadeParameters(),X=U?"linePattern":I?"lineSDF":j?"lineGradient":"line",W=o.context,re=W.gl,$=!0,te=0,le=c;te<le.length;te+=1){var me=le[te],Ce=s.getTile(me);if(!U||Ce.patternsLoaded()){var Ee=Ce.getBucket(a);if(Ee){var Ie=Ee.programConfigurations.get(a.id),Ne=o.context.program.get(),Ke=o.useProgram(X,Ie),We=$||Ke.program!==Ne,ut=L.constantOr(null);if(ut&&Ce.imageAtlas){var Et=Ce.imageAtlas,At=Et.patternPositions[ut.to.toString()],Ct=Et.patternPositions[ut.from.toString()];At&&Ct&&Ie.setConstantPatternPositions(At,Ct)}var ir=U?lu(o,Ce,a,q):I?um(o,Ce,a,I,q):j?Ar(o,Ce,a,Ee.lineClipsArray.length):ol(o,Ce,a);if(U)W.activeTexture.set(re.TEXTURE0),Ce.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),Ie.updatePaintBuffers(q);else if(I&&(We||o.lineAtlas.dirty))W.activeTexture.set(re.TEXTURE0),o.lineAtlas.bind(W);else if(j){var pt=Ee.gradients[a.id],Rt=pt.texture;if(a.gradientVersion!==pt.version){var Nt=256;if(a.stepInterpolant){var Lt=s.getSource().maxzoom,zt=me.canonical.z===Lt?Math.ceil(1<<o.transform.maxZoom-me.canonical.z):1;Nt=f.clamp(f.nextPowerOfTwo(Ee.maxLineLength/f.EXTENT*1024*zt),256,W.maxTextureSize)}pt.gradient=f.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Nt,image:pt.gradient||void 0,clips:Ee.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new f.Texture(W,pt.gradient,re.RGBA),pt.version=a.gradientVersion,Rt=pt.texture}W.activeTexture.set(re.TEXTURE0),Rt.bind(a.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}Ke.draw(W,re.TRIANGLES,b,o.stencilModeForClipping(me),S,ce.disabled,ir,a.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,a.paint,o.transform.zoom,Ie,Ee.layoutVertexBuffer2),$=!1}}}}},fill:function(o,s,a,c){var g=a.paint.get("fill-color"),_=a.paint.get("fill-opacity");if(_.constantOr(1)!==0){var b=o.colorModeForRenderPass(),S=a.paint.get("fill-pattern"),I=o.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(f.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===I){var L=o.depthModeForSublayer(1,o.renderPass==="opaque"?H.ReadWrite:H.ReadOnly);pu(o,s,a,c,L,b,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var U=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,H.ReadOnly);pu(o,s,a,c,U,b,!0)}}},"fill-extrusion":function(o,s,a,c){var g=a.paint.get("fill-extrusion-opacity");if(g!==0&&o.renderPass==="translucent"){var _=new H(o.context.gl.LEQUAL,H.ReadWrite,o.depthRangeFor3D);if(g!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Nc(o,s,a,c,_,K.disabled,ae.disabled),Nc(o,s,a,c,_,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var b=o.colorModeForRenderPass();Nc(o,s,a,c,_,K.disabled,b)}}},hillshade:function(o,s,a,c){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var g=o.context,_=o.depthModeForSublayer(0,H.ReadOnly),b=o.colorModeForRenderPass(),S=o.renderPass==="translucent"?o.stencilConfigForOverlap(c):[{},c],I=S[0],L=0,U=S[1];L<U.length;L+=1){var j=U[L],q=s.getTile(j);q.needsHillshadePrepare&&o.renderPass==="offscreen"?pm(o,q,a,_,K.disabled,b):o.renderPass==="translucent"&&hu(o,q,a,_,I[j.overscaledZ],b)}g.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,c){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var g=o.context,_=g.gl,b=s.getSource(),S=o.useProgram("raster"),I=o.colorModeForRenderPass(),L=b instanceof Te?[{},c]:o.stencilConfigForOverlap(c),U=L[0],j=L[1],q=j[j.length-1].overscaledZ,X=!o.options.moving,W=0,re=j;W<re.length;W+=1){var $=re[W],te=o.depthModeForSublayer($.overscaledZ-q,a.paint.get("raster-opacity")===1?H.ReadWrite:H.ReadOnly,_.LESS),le=s.getTile($),me=o.transform.calculatePosMatrix($.toUnwrapped(),X);le.registerFadeDuration(a.paint.get("raster-fade-duration"));var Ce=s.findLoadedParent($,0),Ee=fu(le,Ce,s,a,o.transform),Ie=void 0,Ne=void 0,Ke=a.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;g.activeTexture.set(_.TEXTURE0),le.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(_.TEXTURE1),Ce?(Ce.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,Ce.tileID.overscaledZ-le.tileID.overscaledZ),Ne=[le.tileID.canonical.x*Ie%1,le.tileID.canonical.y*Ie%1]):le.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);var We=cm(me,Ne||[0,0],Ie||1,Ee,a);b instanceof Te?S.draw(g,_.TRIANGLES,te,K.disabled,I,ce.disabled,We,a.id,b.boundsBuffer,o.quadTriangleIndexBuffer,b.boundsSegments):S.draw(g,_.TRIANGLES,te,U[$.overscaledZ],I,ce.disabled,We,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var c=a.paint.get("background-color"),g=a.paint.get("background-opacity");if(g!==0){var _=o.context,b=_.gl,S=o.transform,I=S.tileSize,L=a.paint.get("background-pattern");if(!o.isPatternMissing(L)){var U=!L&&c.a===1&&g===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===U){var j=K.disabled,q=o.depthModeForSublayer(0,U==="opaque"?H.ReadWrite:H.ReadOnly),X=o.colorModeForRenderPass(),W=o.useProgram(L?"backgroundPattern":"background"),re=S.coveringTiles({tileSize:I});L&&(_.activeTexture.set(b.TEXTURE0),o.imageManager.bind(o.context));for(var $=a.getCrossfadeParameters(),te=0,le=re;te<le.length;te+=1){var me=le[te],Ce=o.transform.calculatePosMatrix(me.toUnwrapped()),Ee=L?ms(Ce,g,o,L,{tileID:me,tileSize:I},$):sl(Ce,g,c);W.draw(_,b.TRIANGLES,q,j,X,ce.disabled,Ee,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var c=0;c<a.length;c++)Vh(o,s,a[c])},custom:function(o,s,a){var c=o.context,g=a.implementation;if(o.renderPass==="offscreen"){var _=g.prerender;_&&(o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),_.call(g,c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),c.setStencilMode(K.disabled);var b=g.renderingMode==="3d"?new H(o.context.gl.LEQUAL,H.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,H.ReadOnly);c.setDepthMode(b),g.render(c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState(),c.bindFramebuffer.set(null)}}},Or=function(o,s){this.context=new V(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xo,this.gpuTimers={}};Or.prototype.resize=function(o,s){if(this.width=o*f.browser.devicePixelRatio,this.height=s*f.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},Or.prototype.setup=function(){var o=this.context,s=new f.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(f.EXTENT,0),s.emplaceBack(0,f.EXTENT),s.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,an.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);var a=new f.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(f.EXTENT,0),a.emplaceBack(0,f.EXTENT),a.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=o.createVertexBuffer(a,an.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);var c=new f.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(f.EXTENT,0,f.EXTENT,0),c.emplaceBack(0,f.EXTENT,0,f.EXTENT),c.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(c,Je.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);var g=new f.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(g,an.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);var _=new f.StructArrayLayout1ui2;_.emplaceBack(0),_.emplaceBack(1),_.emplaceBack(3),_.emplaceBack(2),_.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(_);var b=new f.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(b),this.emptyTexture=new f.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var S=this.context.gl;this.stencilClearMode=new K({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)},Or.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=f.create();f.ortho(a,0,this.width,this.height,0,0,1),f.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,H.disabled,this.stencilClearMode,ae.disabled,ce.disabled,Fa(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Or.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ae.disabled),a.setDepthMode(H.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var _=0,b=s;_<b.length;_+=1){var S=b[_],I=this._tileClippingMaskIDs[S.key]=this.nextStencilID++;g.draw(a,c.TRIANGLES,H.disabled,new K({func:c.ALWAYS,mask:0},I,255,c.KEEP,c.KEEP,c.REPLACE),ae.disabled,ce.disabled,Fa(S.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Or.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new K({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},Or.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new K({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},Or.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,c=o.sort(function(I,L){return L.overscaledZ-I.overscaledZ}),g=c[c.length-1].overscaledZ,_=c[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();for(var b={},S=0;S<_;S++)b[S+g]=new K({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=_,[b,c]}return[(s={},s[g]=K.disabled,s),c]},Or.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ae([o.CONSTANT_COLOR,o.ONE],new f.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ae.unblended:ae.alphaBlended},Or.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return H.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new H(a||this.context.gl.LEQUAL,s,[c,c])},Or.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Or.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(f.browser.now()),this.imageManager.beginFrame();var c=this.style._order,g=this.style.sourceCaches;for(var _ in g){var b=g[_];b.used&&b.prepare(this.context)}var S,I,L={},U={},j={};for(var q in g){var X=g[q];L[q]=X.getVisibleCoordinates(),U[q]=L[q].slice().reverse(),j[q]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var W=0;W<c.length;W++)if(this.style._layers[c[W]].is3D()){this.opaquePassCutoff=W;break}this.renderPass="offscreen";for(var re=0,$=c;re<$.length;re+=1){var te=this.style._layers[$[re]];if(te.hasOffscreenPass()&&!te.isHidden(this.transform.zoom)){var le=U[te.source];(te.type==="custom"||le.length)&&this.renderLayer(this,g[te.source],te,le)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var me=this.style._layers[c[this.currentLayer]],Ce=g[me.source],Ee=L[me.source];this._renderTileClippingMasks(me,Ee),this.renderLayer(this,Ce,me,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ie=this.style._layers[c[this.currentLayer]],Ne=g[Ie.source],Ke=(Ie.type==="symbol"?j:U)[Ie.source];this._renderTileClippingMasks(Ie,L[Ie.source]),this.renderLayer(this,Ne,Ie,Ke)}this.options.showTileBoundaries&&(f.values(this.style._layers).forEach(function(We){We.source&&!We.isHidden(a.transform.zoom)&&(We.source!==(I&&I.id)&&(I=a.style.sourceCaches[We.source]),(!S||S.getSource().maxzoom<I.getSource().maxzoom)&&(S=I))}),S&&Ua.debug(this,S,S.getVisibleCoordinates())),this.options.showPadding&&function(We){var ut=We.transform.padding;jc(We,We.transform.height-(ut.top||0),3,Uc),jc(We,ut.bottom||0,3,Nh),qc(We,ut.left||0,3,Uh),qc(We,We.transform.width-(ut.right||0),3,du);var Et=We.transform.centerPoint;(function(At,Ct,ir,pt){ul(At,Ct-1,ir-10,2,20,pt),ul(At,Ct-10,ir-1,20,2,pt)})(We,Et.x,We.transform.height-Et.y,Vc)}(this),this.context.setDefault()},Or.prototype.renderLayer=function(o,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),Ua[a.type](o,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Or.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Or.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Or.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Or.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var c=o[a],g=this.context.extTimerQuery,_=g.getQueryObjectEXT(c.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(c.query),s[a]=_}return s},Or.prototype.translatePosMatrix=function(o,s,a,c,g){if(!a[0]&&!a[1])return o;var _=g?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(_){var b=Math.sin(_),S=Math.cos(_);a=[a[0]*S-a[1]*b,a[0]*b+a[1]*S]}var I=[g?a[0]:Rr(s,a[0],this.transform.zoom),g?a[1]:Rr(s,a[1],this.transform.zoom),0],L=new Float32Array(16);return f.translate(L,o,I),L},Or.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},Or.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},Or.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},Or.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new Ch(this.context,o,lm[o],s,Oh[o],this._showOverdrawInspector)),this.cache[a]},Or.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Or.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Or.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Or.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var mu=function(o,s){this.points=o,this.planes=s};mu.fromInvProjectionMatrix=function(o,s,a){var c=Math.pow(2,a),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(b){return f.transformMat4([],b,o)}).map(function(b){return f.scale$1([],b,1/b[3]/s*c)}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(b){var S=f.sub([],g[b[0]],g[b[1]]),I=f.sub([],g[b[2]],g[b[1]]),L=f.normalize([],f.cross([],S,I)),U=-f.dot(L,g[b[1]]);return L.concat(U)});return new mu(g,_)};var Va=function(o,s){this.min=o,this.max=s,this.center=f.scale$2([],f.add([],this.min,this.max),.5)};Va.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=f.clone$2(this.min),c=f.clone$2(this.max),g=0;g<s.length;g++)a[g]=s[g]?this.min[g]:this.center[g],c[g]=s[g]?this.center[g]:this.max[g];return c[2]=this.max[2],new Va(a,c)},Va.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},Va.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},Va.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<o.planes.length;c++){for(var g=o.planes[c],_=0,b=0;b<s.length;b++)_+=f.dot$1(g,s[b])>=0;if(_===0)return 0;_!==s.length&&(a=!1)}if(a)return 2;for(var S=0;S<3;S++){for(var I=Number.MAX_VALUE,L=-Number.MAX_VALUE,U=0;U<o.points.length;U++){var j=o.points[U][S]-this.min[S];I=Math.min(I,j),L=Math.max(L,j)}if(L<0||I>this.max[S]-this.min[S])return 0}return 1};var ia=function(o,s,a,c){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=c};ia.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=f.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=f.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=f.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=f.number(o.right,s.right,a)),this},ia.prototype.getCenter=function(o,s){var a=f.clamp((this.left+o-this.right)/2,0,o),c=f.clamp((this.top+s-this.bottom)/2,0,s);return new f.Point(a,c)},ia.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},ia.prototype.clone=function(){return new ia(this.top,this.bottom,this.left,this.right)},ia.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Yt=function(o,s,a,c,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ia,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ir={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Yt.prototype.clone=function(){var o=new Yt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},Ir.minZoom.get=function(){return this._minZoom},Ir.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},Ir.maxZoom.get=function(){return this._maxZoom},Ir.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},Ir.minPitch.get=function(){return this._minPitch},Ir.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},Ir.maxPitch.get=function(){return this._maxPitch},Ir.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},Ir.renderWorldCopies.get=function(){return this._renderWorldCopies},Ir.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},Ir.worldSize.get=function(){return this.tileSize*this.scale},Ir.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ir.size.get=function(){return new f.Point(this.width,this.height)},Ir.bearing.get=function(){return-this.angle/Math.PI*180},Ir.bearing.set=function(o){var s=-f.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=f.create$2(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ir.pitch.get=function(){return this._pitch/Math.PI*180},Ir.pitch.set=function(o){var s=f.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Ir.fov.get=function(){return this._fov/Math.PI*180},Ir.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},Ir.zoom.get=function(){return this._zoom},Ir.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Ir.center.get=function(){return this._center},Ir.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},Ir.padding.get=function(){return this._edgeInsets.toJSON()},Ir.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},Ir.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Yt.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},Yt.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},Yt.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},Yt.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new f.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new f.Point(0,0)),c=this.pointCoordinate(new f.Point(this.width,0)),g=this.pointCoordinate(new f.Point(this.width,this.height)),_=this.pointCoordinate(new f.Point(0,this.height)),b=Math.floor(Math.min(a.x,c.x,g.x,_.x)),S=Math.floor(Math.max(a.x,c.x,g.x,_.x)),I=b-1;I<=S+1;I++)I!==0&&s.push(new f.UnwrappedTileID(I,o));return s},Yt.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var c=f.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,s),_=[g*c.x,g*c.y,0],b=mu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),S=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(S=s);var I=function(We){return{aabb:new Va([We*g,0,0],[(We+1)*g,g,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}},L=[],U=[],j=s,q=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var X=1;X<=3;X++)L.push(I(-X)),L.push(I(X));for(L.push(I(0));L.length>0;){var W=L.pop(),re=W.x,$=W.y,te=W.fullyVisible;if(!te){var le=W.aabb.intersects(b);if(le===0)continue;te=le===2}var me=W.aabb.distanceX(_),Ce=W.aabb.distanceY(_),Ee=Math.max(Math.abs(me),Math.abs(Ce));if(W.zoom===j||Ee>3+(1<<j-W.zoom)-2&&W.zoom>=S)U.push({tileID:new f.OverscaledTileID(W.zoom===j?q:W.zoom,W.wrap,W.zoom,re,$),distanceSq:f.sqrLen([_[0]-.5-re,_[1]-.5-$])});else for(var Ie=0;Ie<4;Ie++){var Ne=(re<<1)+Ie%2,Ke=($<<1)+(Ie>>1);L.push({aabb:W.aabb.quadrant(Ie),zoom:W.zoom+1,x:Ne,y:Ke,wrap:W.wrap,fullyVisible:te})}}return U.sort(function(We,ut){return We.distanceSq-ut.distanceSq}).map(function(We){return We.tileID})},Yt.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},Ir.unmodified.get=function(){return this._unmodified},Yt.prototype.zoomScale=function(o){return Math.pow(2,o)},Yt.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},Yt.prototype.project=function(o){var s=f.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.Point(f.mercatorXfromLng(o.lng)*this.worldSize,f.mercatorYfromLat(s)*this.worldSize)},Yt.prototype.unproject=function(o){return new f.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},Ir.point.get=function(){return this.project(this.center)},Yt.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(o),_=new f.MercatorCoordinate(g.x-(a.x-c.x),g.y-(a.y-c.y));this.center=this.coordinateLocation(_),this._renderWorldCopies&&(this.center=this.center.wrap())},Yt.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},Yt.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},Yt.prototype.locationCoordinate=function(o){return f.MercatorCoordinate.fromLngLat(o)},Yt.prototype.coordinateLocation=function(o){return o.toLngLat()},Yt.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];f.transformMat4(s,s,this.pixelMatrixInverse),f.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],g=a[3],_=s[1]/c,b=a[1]/g,S=s[2]/c,I=a[2]/g,L=(0-S)/(I-S);return new f.MercatorCoordinate(f.number(s[0]/c,a[0]/g,L)/this.worldSize,f.number(_,b,L)/this.worldSize)},Yt.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix),new f.Point(s[0]/s[3],s[1]/s[3])},Yt.prototype.getBounds=function(){return new f.LngLatBounds().extend(this.pointLocation(new f.Point(0,0))).extend(this.pointLocation(new f.Point(this.width,0))).extend(this.pointLocation(new f.Point(this.width,this.height))).extend(this.pointLocation(new f.Point(0,this.height)))},Yt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Yt.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Yt.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var g=o.canonical,_=this.worldSize/this.zoomScale(g.z),b=g.x+Math.pow(2,g.z)*o.wrap,S=f.identity(new Float64Array(16));return f.translate(S,S,[b*_,g.y*_,0]),f.scale(S,S,[_/f.EXTENT,_/f.EXTENT,1]),f.multiply(S,s?this.alignedProjMatrix:this.projMatrix,S),c[a]=new Float32Array(S),c[a]},Yt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Yt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,c,g=-90,_=90,b=-180,S=180,I=this.size,L=this._unmodified;if(this.latRange){var U=this.latRange;g=f.mercatorYfromLat(U[1])*this.worldSize,o=(_=f.mercatorYfromLat(U[0])*this.worldSize)-g<I.y?I.y/(_-g):0}if(this.lngRange){var j=this.lngRange;b=f.mercatorXfromLng(j[0])*this.worldSize,s=(S=f.mercatorXfromLng(j[1])*this.worldSize)-b<I.x?I.x/(S-b):0}var q=this.point,X=Math.max(s||0,o||0);if(X)return this.center=this.unproject(new f.Point(s?(S+b)/2:q.x,o?(_+g)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=L,void(this._constraining=!1);if(this.latRange){var W=q.y,re=I.y/2;W-re<g&&(c=g+re),W+re>_&&(c=_-re)}if(this.lngRange){var $=q.x,te=I.x/2;$-te<b&&(a=b+te),$+te>S&&(a=S-te)}a===void 0&&c===void 0||(this.center=this.unproject(new f.Point(a!==void 0?a:q.x,c!==void 0?c:q.y))),this._unmodified=L,this._constraining=!1}},Yt.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-s-a,.01,Math.PI-.01)),g=this.point,_=g.x,b=g.y,S=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),I=this.height/50,L=new Float64Array(16);f.perspective(L,this._fov,this.width/this.height,I,S),L[8]=2*-o.x/this.width,L[9]=2*o.y/this.height,f.scale(L,L,[1,-1,1]),f.translate(L,L,[0,0,-this.cameraToCenterDistance]),f.rotateX(L,L,this._pitch),f.rotateZ(L,L,this.angle),f.translate(L,L,[-_,-b,0]),this.mercatorMatrix=f.scale([],L,[this.worldSize,this.worldSize,this.worldSize]),f.scale(L,L,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=L,this.invProjMatrix=f.invert([],this.projMatrix);var U=this.width%2/2,j=this.height%2/2,q=Math.cos(this.angle),X=Math.sin(this.angle),W=_-Math.round(_)+q*U+X*j,re=b-Math.round(b)+q*j+X*U,$=new Float64Array(L);if(f.translate($,$,[W>.5?W-1:W,re>.5?re-1:re,0]),this.alignedProjMatrix=$,L=f.create(),f.scale(L,L,[this.width/2,-this.height/2,1]),f.translate(L,L,[1,-1,0]),this.labelPlaneMatrix=L,L=f.create(),f.scale(L,L,[1,-1,1]),f.translate(L,L,[-1,-1,0]),f.scale(L,L,[2/this.width,2/this.height,1]),this.glCoordMatrix=L,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(L=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=L,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new f.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Yt.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.Point(0,o))},Yt.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,c=s.y,g=s.x,_=s.y,b=0,S=o;b<S.length;b+=1){var I=S[b];a=Math.min(a,I.x),c=Math.min(c,I.y),g=Math.max(g,I.x),_=Math.max(_,I.y)}return[new f.Point(a,c),new f.Point(g,c),new f.Point(g,_),new f.Point(a,_),new f.Point(a,c)]},Object.defineProperties(Yt.prototype,Ir);var Ri=function(o){var s,a,c,g;this._hashName=o&&encodeURIComponent(o),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,g=function(){c=null,a&&(s(),c=setTimeout(g,300),a=!1)},function(){return a=!0,c||g(),c})};Ri.prototype.addTo=function(o){return this._map=o,f.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ri.prototype.remove=function(){return f.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ri.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,c),_=Math.round(s.lng*g)/g,b=Math.round(s.lat*g)/g,S=this._map.getBearing(),I=this._map.getPitch(),L="";if(L+=o?"/"+_+"/"+b+"/"+a:a+"/"+b+"/"+_,(S||I)&&(L+="/"+Math.round(10*S)/10),I&&(L+="/"+Math.round(I)),this._hashName){var U=this._hashName,j=!1,q=f.window.location.hash.slice(1).split("&").map(function(X){var W=X.split("=")[0];return W===U?(j=!0,W+"="+L):X}).filter(function(X){return X});return j||q.push(U+"="+L),"#"+q.join("&")}return"#"+L},Ri.prototype._getCurrentHash=function(){var o,s=this,a=f.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(o=c)}),(o&&o[1]||"").split("/")):a.split("/")},Ri.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},Ri.prototype._updateHashUnthrottled=function(){var o=f.window.location.href.replace(/(#.+)?$/,this.getHashString());try{f.window.history.replaceState(f.window.history.state,null,o)}catch{}};var cl={linearity:.3,easing:f.bezier(0,0,.3,1)},ys=f.extend({deceleration:2500,maxSpeed:1400},cl),pl=f.extend({deceleration:20,maxSpeed:1400},cl),hm=f.extend({deceleration:1e3,maxSpeed:360},cl),fm=f.extend({deceleration:1e3,maxSpeed:90},cl),hl=function(o){this._map=o,this.clear()};function fl(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function Fo(o,s,a){var c=a.maxSpeed,g=a.linearity,_=a.deceleration,b=f.clamp(o*g/(s/1e3),-c,c),S=Math.abs(b)/(_*g);return{easing:a.easing,duration:1e3*S,amount:b*(S/2)}}hl.prototype.clear=function(){this._inertiaBuffer=[]},hl.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.browser.now(),settings:o})},hl.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=f.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},hl.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new f.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var g=c[a].settings;s.zoom+=g.zoomDelta||0,s.bearing+=g.bearingDelta||0,s.pitch+=g.pitchDelta||0,g.panDelta&&s.pan._add(g.panDelta),g.around&&(s.around=g.around),g.pinchAround&&(s.pinchAround=g.pinchAround)}var _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(s.pan.mag()){var S=Fo(s.pan.mag(),_,f.extend({},ys,o||{}));b.offset=s.pan.mult(S.amount/s.pan.mag()),b.center=this._map.transform.center,fl(b,S)}if(s.zoom){var I=Fo(s.zoom,_,pl);b.zoom=this._map.transform.zoom+I.amount,fl(b,I)}if(s.bearing){var L=Fo(s.bearing,_,hm);b.bearing=this._map.transform.bearing+f.clamp(L.amount,-179,179),fl(b,L)}if(s.pitch){var U=Fo(s.pitch,_,fm);b.pitch=this._map.transform.pitch+U.amount,fl(b,U)}if(b.zoom||b.bearing){var j=s.pinchAround===void 0?s.around:s.pinchAround;b.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),f.extend(b,{noMoveStart:!0})}};var fn=function(o){function s(c,g,_,b){b===void 0&&(b={});var S=Y.mousePos(g.getCanvasContainer(),_),I=g.unproject(S);o.call(this,c,f.extend({point:S,lngLat:I,originalEvent:_},b)),this._defaultPrevented=!1,this.target=g}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),dl=function(o){function s(c,g,_){var b=c==="touchend"?_.changedTouches:_.touches,S=Y.touchPos(g.getCanvasContainer(),b),I=S.map(function(j){return g.unproject(j)}),L=S.reduce(function(j,q,X,W){return j.add(q.div(W.length))},new f.Point(0,0)),U=g.unproject(L);o.call(this,c,{points:S,point:L,lngLats:I,lngLat:U,originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),jh=function(o){function s(c,g,_){o.call(this,c,{originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),sn=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};sn.prototype.reset=function(){delete this._mousedownPos},sn.prototype.wheel=function(o){return this._firePreventable(new jh(o.type,this._map,o))},sn.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new fn(o.type,this._map,o))},sn.prototype.mouseup=function(o){this._map.fire(new fn(o.type,this._map,o))},sn.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new fn(o.type,this._map,o))},sn.prototype.dblclick=function(o){return this._firePreventable(new fn(o.type,this._map,o))},sn.prototype.mouseover=function(o){this._map.fire(new fn(o.type,this._map,o))},sn.prototype.mouseout=function(o){this._map.fire(new fn(o.type,this._map,o))},sn.prototype.touchstart=function(o){return this._firePreventable(new dl(o.type,this._map,o))},sn.prototype.touchmove=function(o){this._map.fire(new dl(o.type,this._map,o))},sn.prototype.touchend=function(o){this._map.fire(new dl(o.type,this._map,o))},sn.prototype.touchcancel=function(o){this._map.fire(new dl(o.type,this._map,o))},sn.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},sn.prototype.isEnabled=function(){return!0},sn.prototype.isActive=function(){return!1},sn.prototype.enable=function(){},sn.prototype.disable=function(){};var ft=function(o){this._map=o};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(o){this._map.fire(new fn(o.type,this._map,o))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new fn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var yi=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function gu(o,s){for(var a={},c=0;c<o.length;c++)a[o[c].identifier]=s[c];return a}yi.prototype.isEnabled=function(){return!!this._enabled},yi.prototype.isActive=function(){return!!this._active},yi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yi.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(Y.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},yi.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=Y.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var g=Math.min(c.x,a.x),_=Math.max(c.x,a.x),b=Math.min(c.y,a.y),S=Math.max(c.y,a.y);Y.setTransform(this._box,"translate("+g+"px,"+b+"px)"),this._box.style.width=_-g+"px",this._box.style.height=S-b+"px"}}},yi.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var c=this._startPos,g=s;if(this.reset(),Y.suppressClick(),c.x!==g.x||c.y!==g.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(_){return _.fitScreenCoordinates(c,g,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},yi.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},yi.prototype.blur=function(){this.reset()},yi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos},yi.prototype._fireEvent=function(o,s){return this._map.fire(new f.Event(o,{originalEvent:s}))};var vs=function(o){this.reset(),this.numTouches=o.numTouches};vs.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},vs.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var g=new f.Point(0,0),_=0,b=c;_<b.length;_+=1)g._add(b[_]);return g.div(c.length)}(s),this.touches=gu(a,s)))},vs.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var c=gu(a,s);for(var g in this.touches){var _=c[g];(!_||_.dist(this.touches[g])>30)&&(this.aborted=!0)}}},vs.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var lo=function(o){this.singleTap=new vs(o),this.numTaps=o.numTaps,this.reset()};lo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},lo.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},lo.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},lo.prototype.touchend=function(o,s,a){var c=this.singleTap.touchend(o,s,a);if(c){var g=o.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(c)<30;if(g&&_||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var vi=function(){this._zoomIn=new lo({numTouches:1,numTaps:2}),this._zoomOut=new lo({numTouches:2,numTaps:1}),this.reset()};vi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vi.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},vi.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},vi.prototype.touchend=function(o,s,a){var c=this,g=this._zoomIn.touchend(o,s,a),_=this._zoomOut.touchend(o,s,a);return g?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(g)},{originalEvent:o})}}):_?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(_)},{originalEvent:o})}}):void 0},vi.prototype.touchcancel=function(){this.reset()},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var Hc={0:1,2:2},rt=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(o,s){return!1},rt.prototype._move=function(o,s){return{}},rt.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=Y.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},rt.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(c,g){var _=Hc[g];return c.buttons===void 0||(c.buttons&_)!==_}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},rt.prototype.mouseupWindow=function(o){this._lastPoint&&Y.mouseButton(o)===this._eventButton&&(this._moved&&Y.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var $c=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,c){o.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}(rt),yu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=.8*(c.x-a.x);if(g)return this._active=!0,{bearingDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),Zc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=-.5*(c.y-a.y);if(g)return this._active=!0,{pitchDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),Hi=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Hi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new f.Point(0,0)},Hi.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},Hi.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},Hi.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},Hi.prototype.touchcancel=function(){this.reset()},Hi.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var c=gu(a,s),g=new f.Point(0,0),_=new f.Point(0,0),b=0;for(var S in c){var I=c[S],L=this._touches[S];L&&(g._add(I),_._add(I.sub(L)),b++,c[S]=I)}if(this._touches=c,!(b<this._minTouches)&&_.mag()){var U=_.div(b);if(this._sum._add(U),!(this._sum.mag()<this._clickTolerance))return{around:g.div(b),panDelta:U}}},Hi.prototype.enable=function(){this._enabled=!0},Hi.prototype.disable=function(){this._enabled=!1,this.reset()},Hi.prototype.isEnabled=function(){return this._enabled},Hi.prototype.isActive=function(){return this._active};var _i=function(){this.reset()};function vu(o,s,a){for(var c=0;c<o.length;c++)if(o[c].identifier===a)return s[c]}function _u(o,s){return Math.log(o/s)/Math.LN2}_i.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},_i.prototype._start=function(o){},_i.prototype._move=function(o,s,a){return{}},_i.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},_i.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var c=this._firstTwoTouches,g=c[1],_=vu(a,s,c[0]),b=vu(a,s,g);if(_&&b){var S=this._aroundCenter?null:_.add(b).div(2);return this._move([_,b],S,o)}}},_i.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,g=c[1],_=vu(a,s,c[0]),b=vu(a,s,g);_&&b||(this._active&&Y.suppressClick(),this.reset())}},_i.prototype.touchcancel=function(){this.reset()},_i.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},_i.prototype.disable=function(){this._enabled=!1,this.reset()},_i.prototype.isEnabled=function(){return this._enabled},_i.prototype.isActive=function(){return this._active};var xi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(_u(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_u(this._distance,g),pinchAround:c}},s}(_i);function No(o,s){return 180*o.angleWith(s)/Math.PI}var qh=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:No(this._vector,g),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,g=No(a,this._startVector);return Math.abs(g)<c},s}(_i);function ml(o){return Math.abs(o.y)>Math.abs(o.x)}var Gc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,ml(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,g){var _=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,b,g.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,g){if(this._valid!==void 0)return this._valid;var _=a.mag()>=2,b=c.mag()>=2;if(_||b){if(!_||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var S=a.y>0==c.y>0;return ml(a)&&ml(c)&&S}},s}(_i),Wc={panStep:100,bearingStep:15,pitchStep:10},uo=function(){var o=Wc;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function Oi(o){return o*(2-o)}uo.prototype.blur=function(){this.reset()},uo.prototype.reset=function(){this._active=!1},uo.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,c=0,g=0,_=0,b=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?c=-1:(o.preventDefault(),_=-1);break;case 39:o.shiftKey?c=1:(o.preventDefault(),_=1);break;case 38:o.shiftKey?g=1:(o.preventDefault(),b=-1);break;case 40:o.shiftKey?g=-1:(o.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(c=0,g=0),{cameraAnimation:function(S){var I=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Oi,zoom:a?Math.round(I)+a*(o.shiftKey?2:1):I,bearing:S.getBearing()+c*s._bearingStep,pitch:S.getPitch()+g*s._pitchStep,offset:[-_*s._panStep,-b*s._panStep],center:S.getCenter()},{originalEvent:o})}}}},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active},uo.prototype.disableRotation=function(){this._rotationDisabled=!0},uo.prototype.enableRotation=function(){this._rotationDisabled=!1};var Gt=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,f.bindAll(["_onTimeout"],this)};Gt.prototype.setZoomRate=function(o){this._defaultZoomRate=o},Gt.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},Gt.prototype.isEnabled=function(){return!!this._enabled},Gt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Gt.prototype.isZooming=function(){return!!this._zooming},Gt.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},Gt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gt.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=f.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},Gt.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},Gt.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=Y.mousePos(this._el,o);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Gt.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var g=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(g*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var _,b=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,S=this._startZoom,I=this._easing,L=!1;if(this._type==="wheel"&&S&&I){var U=Math.min((f.browser.now()-this._lastWheelEventTime)/200,1),j=I(U);_=f.number(S,b,j),U<1?this._frameId||(this._frameId=!0):L=!0}else _=b,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:_-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Gt.prototype._smoothOutEasing=function(o){var s=f.ease;if(this._prevEase){var a=this._prevEase,c=(f.browser.now()-a.start)/a.duration,g=a.easing(c+.01)-a.easing(c),_=.27/Math.sqrt(g*g+1e-4)*.01,b=Math.sqrt(.0729-_*_);s=f.bezier(_,b,.25,1)}return this._prevEase={start:f.browser.now(),duration:o,easing:s},s},Gt.prototype.blur=function(){this.reset()},Gt.prototype.reset=function(){this._active=!1};var Eo=function(o,s){this._clickZoom=o,this._tapZoom=s};Eo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Eo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Eo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Eo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var $i=function(){this.reset()};$i.prototype.reset=function(){this._active=!1},$i.prototype.blur=function(){this.reset()},$i.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var Bn=function(){this._tap=new lo({numTouches:1,numTaps:1}),this.reset()};Bn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Bn.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},Bn.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],g=c.y-this._swipePoint.y;return this._swipePoint=c,o.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(o,s,a)},Bn.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},Bn.prototype.touchcancel=function(){this.reset()},Bn.prototype.enable=function(){this._enabled=!0},Bn.prototype.disable=function(){this._enabled=!1,this.reset()},Bn.prototype.isEnabled=function(){return this._enabled},Bn.prototype.isActive=function(){return this._active};var ja=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};ja.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ja.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ja.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ja.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var oa=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};oa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},oa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},oa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},oa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var co=function(o,s,a,c){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};co.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},co.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},co.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},co.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},co.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},co.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Qn=function(o){return o.zoom||o.drag||o.pitch||o.rotate},gl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(f.Event);function wt(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yt=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hl(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),f.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[f.window,"blur",void 0]];for(var c=0,g=this._listeners;c<g.length;c+=1){var _=g[c],b=_[0];Y.addEventListener(b,_[1],b===f.window.document?this.handleWindowEvent:this.handleEvent,_[2])}};yt.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],c=a[0];Y.removeEventListener(c,a[1],c===f.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},yt.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new sn(s,o));var c=s.boxZoom=new yi(s,o);this._add("boxZoom",c);var g=new vi,_=new $i;s.doubleClickZoom=new Eo(_,g),this._add("tapZoom",g),this._add("clickZoom",_);var b=new Bn;this._add("tapDragZoom",b);var S=s.touchPitch=new Gc;this._add("touchPitch",S);var I=new yu(o),L=new Zc(o);s.dragRotate=new oa(o,I,L),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);var U=new $c(o),j=new Hi(o);s.dragPan=new ja(a,U,j),this._add("mousePan",U),this._add("touchPan",j,["touchZoom","touchRotate"]);var q=new qh,X=new xi;s.touchZoomRotate=new co(a,X,q,b),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]);var W=s.scrollZoom=new Gt(s,this);this._add("scrollZoom",W,["mousePan"]);var re=s.keyboard=new uo;this._add("keyboard",re),this._add("blockableMapEvent",new ft(s));for(var $=0,te=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];$<te.length;$+=1){var le=te[$];o.interactive&&o[le]&&s[le].enable(o[le])}},yt.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},yt.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yt.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return!!Qn(this._eventsInProgress)||this.isZooming()},yt.prototype._blockedByActive=function(o,s,a){for(var c in o)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yt.prototype._getMapTouches=function(o){for(var s=[],a=0,c=o;a<c.length;a+=1){var g=c[a];this._el.contains(g.target)&&s.push(g)}return s},yt.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,c={needsRenderFrame:!1},g={},_={},b=o.touches?this._getMapTouches(o.touches):void 0,S=b?Y.touchPos(this._el,b):Y.mousePos(this._el,o),I=0,L=this._handlers;I<L.length;I+=1){var U=L[I],j=U.handlerName,q=U.handler,X=U.allowed;if(q.isEnabled()){var W=void 0;this._blockedByActive(_,X,j)?q.reset():q[s||o.type]&&(W=q[s||o.type](o,S,b),this.mergeHandlerResult(c,g,W,j,a),W&&W.needsRenderFrame&&this._triggerRenderFrame()),(W||q.isActive())&&(_[j]=q)}}var re={};for(var $ in this._previousActiveHandlers)_[$]||(re[$]=a);this._previousActiveHandlers=_,(Object.keys(re).length||wt(c))&&(this._changes.push([c,g,re]),this._triggerRenderFrame()),(Object.keys(_).length||wt(c))&&this._map._stop(!0),this._updatingCamera=!1;var te=c.cameraAnimation;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},yt.prototype.mergeHandlerResult=function(o,s,a,c,g){if(a){f.extend(o,a);var _={handlerName:c,originalEvent:a.originalEvent||g};a.zoomDelta!==void 0&&(s.zoom=_),a.panDelta!==void 0&&(s.drag=_),a.pitchDelta!==void 0&&(s.pitch=_),a.bearingDelta!==void 0&&(s.rotate=_)}},yt.prototype._applyChanges=function(){for(var o={},s={},a={},c=0,g=this._changes;c<g.length;c+=1){var _=g[c],b=_[0],S=_[1],I=_[2];b.panDelta&&(o.panDelta=(o.panDelta||new f.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),f.extend(s,S),f.extend(a,I)}this._updateMapTransform(o,s,a),this._changes=[]},yt.prototype._updateMapTransform=function(o,s,a){var c=this._map,g=c.transform;if(!wt(o))return this._fireEvents(s,a,!0);var _=o.panDelta,b=o.zoomDelta,S=o.bearingDelta,I=o.pitchDelta,L=o.around,U=o.pinchAround;U!==void 0&&(L=U),c._stop(!0),L=L||c.transform.centerPoint;var j=g.pointLocation(_?L.sub(_):L);S&&(g.bearing+=S),I&&(g.pitch+=I),b&&(g.zoom+=b),g.setLocationAtPoint(j,L),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},yt.prototype._fireEvents=function(o,s,a){var c=this,g=Qn(this._eventsInProgress),_=Qn(o),b={};for(var S in o)this._eventsInProgress[S]||(b[S+"start"]=o[S].originalEvent),this._eventsInProgress[S]=o[S];for(var I in!g&&_&&this._fireEvent("movestart",_.originalEvent),b)this._fireEvent(I,b[I]);for(var L in _&&this._fireEvent("move",_.originalEvent),o)this._fireEvent(L,o[L].originalEvent);var U,j={};for(var q in this._eventsInProgress){var X=this._eventsInProgress[q],W=X.handlerName,re=X.originalEvent;this._handlersById[W].isActive()||(delete this._eventsInProgress[q],j[q+"end"]=U=s[W]||re)}for(var $ in j)this._fireEvent($,j[$]);var te=Qn(this._eventsInProgress);if(a&&(g||_)&&!te){this._updatingCamera=!0;var le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=function(Ce){return Ce!==0&&-c._bearingSnap<Ce&&Ce<c._bearingSnap};le?(me(le.bearing||this._map.getBearing())&&(le.bearing=0),this._map.easeTo(le,{originalEvent:U})):(this._map.fire(new f.Event("moveend",{originalEvent:U})),me(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(o,s){this._map.fire(new f.Event(o,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new gl("renderFrame",{timeStamp:s})),o._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var xu=function(o){function s(a,c){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,g){return a=f.Point.convert(a).mult(-1),this.panTo(this.transform.center,f.extend({offset:a},c),g)},s.prototype.panTo=function(a,c,g){return this.easeTo(f.extend({center:a},c),g)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,g){return this.easeTo(f.extend({zoom:a},c),g)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,g){return this.easeTo(f.extend({bearing:a},c),g)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,f.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=f.LngLatBounds.convert(a);var g=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,c)},s.prototype._cameraForBoxAndBearing=function(a,c,g,_){var b={top:0,bottom:0,right:0,left:0};if(typeof(_=f.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){var S=_.padding;_.padding={top:S,bottom:S,right:S,left:S}}_.padding=f.extend(b,_.padding);var I=this.transform,L=I.padding,U=I.project(f.LngLat.convert(a)),j=I.project(f.LngLat.convert(c)),q=U.rotate(-g*Math.PI/180),X=j.rotate(-g*Math.PI/180),W=new f.Point(Math.max(q.x,X.x),Math.max(q.y,X.y)),re=new f.Point(Math.min(q.x,X.x),Math.min(q.y,X.y)),$=W.sub(re),te=(I.width-(L.left+L.right+_.padding.left+_.padding.right))/$.x,le=(I.height-(L.top+L.bottom+_.padding.top+_.padding.bottom))/$.y;if(!(le<0||te<0)){var me=Math.min(I.scaleZoom(I.scale*Math.min(te,le)),_.maxZoom),Ce=typeof _.offset.x=="number"?new f.Point(_.offset.x,_.offset.y):f.Point.convert(_.offset),Ee=new f.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(g*Math.PI/180),Ie=Ce.add(Ee).mult(I.scale/I.zoomScale(me));return{center:I.unproject(U.add(j).div(2).sub(Ie)),zoom:me,bearing:g}}f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,g){return this._fitInternal(this.cameraForBounds(a,c),c,g)},s.prototype.fitScreenCoordinates=function(a,c,g,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.Point.convert(a)),this.transform.pointLocation(f.Point.convert(c)),g,_),_,b)},s.prototype._fitInternal=function(a,c,g){return a?(delete(c=f.extend(a,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this},s.prototype.jumpTo=function(a,c){this.stop();var g=this.transform,_=!1,b=!1,S=!1;return"zoom"in a&&g.zoom!==+a.zoom&&(_=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=f.LngLat.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(b=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(S=!0,g.pitch=+a.pitch),a.padding==null||g.isPaddingEqual(a.padding)||(g.padding=a.padding),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),_&&this.fire(new f.Event("zoomstart",c)).fire(new f.Event("zoom",c)).fire(new f.Event("zoomend",c)),b&&this.fire(new f.Event("rotatestart",c)).fire(new f.Event("rotate",c)).fire(new f.Event("rotateend",c)),S&&this.fire(new f.Event("pitchstart",c)).fire(new f.Event("pitch",c)).fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))},s.prototype.easeTo=function(a,c){var g=this;this._stop(!1,a.easeId),((a=f.extend({offset:[0,0],duration:500,easing:f.ease},a)).animate===!1||!a.essential&&f.browser.prefersReducedMotion)&&(a.duration=0);var _=this.transform,b=this.getZoom(),S=this.getBearing(),I=this.getPitch(),L=this.getPadding(),U="zoom"in a?+a.zoom:b,j="bearing"in a?this._normalizeBearing(a.bearing,S):S,q="pitch"in a?+a.pitch:I,X="padding"in a?a.padding:_.padding,W=f.Point.convert(a.offset),re=_.centerPoint.add(W),$=_.pointLocation(re),te=f.LngLat.convert(a.center||$);this._normalizeCenter(te);var le,me,Ce=_.project($),Ee=_.project(te).sub(Ce),Ie=_.zoomScale(U-b);a.around&&(le=f.LngLat.convert(a.around),me=_.locationPoint(le));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||U!==b,this._rotating=this._rotating||S!==j,this._pitching=this._pitching||q!==I,this._padding=!_.isPaddingEqual(X),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ne),this._ease(function(Ke){if(g._zooming&&(_.zoom=f.number(b,U,Ke)),g._rotating&&(_.bearing=f.number(S,j,Ke)),g._pitching&&(_.pitch=f.number(I,q,Ke)),g._padding&&(_.interpolatePadding(L,X,Ke),re=_.centerPoint.add(W)),le)_.setLocationAtPoint(le,me);else{var We=_.zoomScale(_.zoom-b),ut=U>b?Math.min(2,Ie):Math.max(.5,Ie),Et=Math.pow(ut,1-Ke),At=_.unproject(Ce.add(Ee.mult(Ke*Et)).mult(We));_.setLocationAtPoint(_.renderWorldCopies?At.wrap():At,re)}g._fireMoveEvents(c)},function(Ke){g._afterEase(c,Ke)},a),this},s.prototype._prepareEase=function(a,c,g){g===void 0&&(g={}),this._moving=!0,c||g.moving||this.fire(new f.Event("movestart",a)),this._zooming&&!g.zooming&&this.fire(new f.Event("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new f.Event("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new f.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new f.Event("move",a)),this._zooming&&this.fire(new f.Event("zoom",a)),this._rotating&&this.fire(new f.Event("rotate",a)),this._pitching&&this.fire(new f.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new f.Event("zoomend",a)),_&&this.fire(new f.Event("rotateend",a)),b&&this.fire(new f.Event("pitchend",a)),this.fire(new f.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var g=this;if(!a.essential&&f.browser.prefersReducedMotion){var _=f.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_,c)}this.stop(),a=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},a);var b=this.transform,S=this.getZoom(),I=this.getBearing(),L=this.getPitch(),U=this.getPadding(),j="zoom"in a?f.clamp(+a.zoom,b.minZoom,b.maxZoom):S,q="bearing"in a?this._normalizeBearing(a.bearing,I):I,X="pitch"in a?+a.pitch:L,W="padding"in a?a.padding:b.padding,re=b.zoomScale(j-S),$=f.Point.convert(a.offset),te=b.centerPoint.add($),le=b.pointLocation(te),me=f.LngLat.convert(a.center||le);this._normalizeCenter(me);var Ce=b.project(le),Ee=b.project(me).sub(Ce),Ie=a.curve,Ne=Math.max(b.width,b.height),Ke=Ne/re,We=Ee.mag();if("minZoom"in a){var ut=f.clamp(Math.min(a.minZoom,S,j),b.minZoom,b.maxZoom),Et=Ne/b.zoomScale(ut-S);Ie=Math.sqrt(Et/We*2)}var At=Ie*Ie;function Ct(Mt){var It=(Ke*Ke-Ne*Ne+(Mt?-1:1)*At*At*We*We)/(2*(Mt?Ke:Ne)*At*We);return Math.log(Math.sqrt(It*It+1)-It)}function ir(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function pt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}var Rt=Ct(0),Nt=function(Mt){return pt(Rt)/pt(Rt+Ie*Mt)},Lt=function(Mt){return Ne*((pt(Rt)*(ir(It=Rt+Ie*Mt)/pt(It))-ir(Rt))/At)/We;var It},zt=(Ct(1)-Rt)/Ie;if(Math.abs(We)<1e-6||!isFinite(zt)){if(Math.abs(Ne-Ke)<1e-6)return this.easeTo(a,c);var Ft=Ke<Ne?-1:1;zt=Math.abs(Math.log(Ke/Ne))/Ie,Lt=function(){return 0},Nt=function(Mt){return Math.exp(Ft*Ie*Mt)}}return a.duration="duration"in a?+a.duration:1e3*zt/("screenSpeed"in a?+a.screenSpeed/Ie:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=I!==q,this._pitching=X!==L,this._padding=!b.isPaddingEqual(W),this._prepareEase(c,!1),this._ease(function(Mt){var It=Mt*zt,bn=1/Nt(It);b.zoom=Mt===1?j:S+b.scaleZoom(bn),g._rotating&&(b.bearing=f.number(I,q,Mt)),g._pitching&&(b.pitch=f.number(L,X,Mt)),g._padding&&(b.interpolatePadding(U,W,Mt),te=b.centerPoint.add($));var $r=Mt===1?me:b.unproject(Ce.add(Ee.mult(Lt(It))).mult(bn));b.setLocationAtPoint(b.renderWorldCopies?$r.wrap():$r,te),g._fireMoveEvents(c)},function(){return g._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}if(!a){var _=this.handlers;_&&_.stop(!1)}return this},s.prototype._ease=function(a,c,g){g.animate===!1||g.duration===0?(a(1),c()):(this._easeStart=f.browser.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((f.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=f.wrap(a,-180,180);var g=Math.abs(a-c);return Math.abs(a-360-c)<g&&(a-=360),Math.abs(a+360-c)<g&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var g=a.lng-c.center.lng;a.lng+=g>180?-360:g<-180?360:0}},s}(f.Evented),ei=function(o){o===void 0&&(o={}),this.options=o,f.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ei.prototype.getDefaultPosition=function(){return"bottom-right"},ei.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ei.prototype.onRemove=function(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ei.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},ei.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ei.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(c,g,_){return g.value&&(c+=g.key+"="+g.value+(_<s.length-1?"&":"")),c},"?");o.href=f.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},ei.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},ei.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(S){return typeof S!="string"?"":S})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var g=a[c];if(g.used){var _=g.getSource();_.attribution&&o.indexOf(_.attribution)<0&&o.push(_.attribution)}}o.sort(function(S,I){return S.length-I.length});var b=(o=o.filter(function(S,I){for(var L=I+1;L<o.length;L++)if(o[L].indexOf(S)>=0)return!1;return!0})).join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ei.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var po=function(){f.bindAll(["_updateLogo"],this),f.bindAll(["_updateCompact"],this)};po.prototype.onAdd=function(o){this._map=o,this._container=Y.create("div","mapboxgl-ctrl");var s=Y.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},po.prototype.onRemove=function(){Y.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},po.prototype.getDefaultPosition=function(){return"bottom-left"},po.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},po.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},po.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Fn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Fn.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},Fn.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var g=c[a];if(g.id===o)return void(g.cancelled=!0)}},Fn.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var g=c[a];if(!g.cancelled&&(g.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Fn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var So={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Kc=f.window.HTMLImageElement,bu=f.window.HTMLElement,dr=f.window.ImageBitmap,In={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Hh=function(o){function s(c){var g=this;if((c=f.extend({},In,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var _=new Yt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(o.call(this,_,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},So,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new f.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=f.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof bu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),f.window!==void 0&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1),f.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,c),this._hash=c.hash&&new Ri(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,f.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new ei({customAttribution:c.customAttribution})),this.addControl(new po,c.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(b){g._update(b.dataType==="style"),g.fire(new f.Event(b.dataType+"data",b))}),this.on("dataloading",function(b){g.fire(new f.Event(b.dataType+"dataloading",b))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,g){if(g===void 0&&(g=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var _=c.onAdd(this);this._controls.push(c);var b=this._controlPositions[g];return g.indexOf("bottom")!==-1?b.insertBefore(_,b.firstChild):b.appendChild(_),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(c);return g>-1&&this._controls.splice(g,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var g=this._containerDimensions(),_=g[0],b=g[1];if(_===this.transform.width&&b===this.transform.height)return this;this._resizeCanvas(_,b),this.transform.resize(_,b),this.painter.resize(_,b);var S=!this._moving;return S&&this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),this.fire(new f.Event("resize",c)),S&&this.fire(new f.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(f.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(f.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(f.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,g,_){var b,S=this;if(c==="mouseenter"||c==="mouseover"){var I=!1;return{layer:g,listener:_,delegates:{mousemove:function(U){var j=S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[];j.length?I||(I=!0,_.call(S,new fn(c,S,U.originalEvent,{features:j}))):I=!1},mouseout:function(){I=!1}}}}if(c==="mouseleave"||c==="mouseout"){var L=!1;return{layer:g,listener:_,delegates:{mousemove:function(U){(S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[]).length?L=!0:L&&(L=!1,_.call(S,new fn(c,S,U.originalEvent)))},mouseout:function(U){L&&(L=!1,_.call(S,new fn(c,S,U.originalEvent)))}}}}return{layer:g,listener:_,delegates:(b={},b[c]=function(U){var j=S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[];j.length&&(U.features=j,_.call(S,U),delete U.features)},b)}},s.prototype.on=function(c,g,_){if(_===void 0)return o.prototype.on.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(b),b.delegates)this.on(S,b.delegates[S]);return this},s.prototype.once=function(c,g,_){if(_===void 0)return o.prototype.once.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in b.delegates)this.once(S,b.delegates[S]);return this},s.prototype.off=function(c,g,_){var b=this;return _===void 0?o.prototype.off.call(this,c,g):(this._delegatedListeners&&this._delegatedListeners[c]&&function(S){for(var I=S[c],L=0;L<I.length;L++){var U=I[L];if(U.layer===g&&U.listener===_){for(var j in U.delegates)b.off(j,U.delegates[j]);return I.splice(L,1),b}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,g){if(!this.style)return[];var _;if(g!==void 0||c===void 0||c instanceof f.Point||Array.isArray(c)||(g=c,c=void 0),g=g||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof f.Point||typeof c[0]=="number")_=[f.Point.convert(c)];else{var b=f.Point.convert(c[0]),S=f.Point.convert(c[1]);_=[b,new f.Point(S.x,b.y),S,new f.Point(b.x,S.y),b]}return this.style.queryRenderedFeatures(_,g,this.transform)},s.prototype.querySourceFeatures=function(c,g){return this.style.querySourceFeatures(c,g)},s.prototype.setStyle=function(c,g){return(g=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(c,g))},s.prototype._getUIString=function(c){var g=this._locale[c];if(g==null)throw new Error("Missing UI string '"+c+"'");return g},s.prototype._updateStyle=function(c,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new gi(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new gi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,g){var _=this;if(typeof c=="string"){var b=this._requestManager.normalizeStyleURL(c),S=this._requestManager.transformRequest(b,f.ResourceType.Style);f.getJSON(S,function(I,L){I?_.fire(new f.ErrorEvent(I)):L&&_._updateDiff(L,g)})}else typeof c=="object"&&this._updateDiff(c,g)},s.prototype._updateDiff=function(c,g){try{this.style.setState(c)&&this._update(!0)}catch(_){f.warnOnce("Unable to perform style diff: "+(_.message||_.error||_)+".  Rebuilding the style from scratch."),this._updateStyle(c,g)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,g){return this._lazyInitEmptyStyle(),this.style.addSource(c,g),this._update(!0)},s.prototype.isSourceLoaded=function(c){var g=this.style&&this.style.sourceCaches[c];if(g!==void 0)return g.loaded();this.fire(new f.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var g in c){var _=c[g]._tiles;for(var b in _){var S=_[b];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,g,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,g,_)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,g,_){_===void 0&&(_={});var b=_.pixelRatio;b===void 0&&(b=1);var S=_.sdf;S===void 0&&(S=!1);var I=_.stretchX,L=_.stretchY,U=_.content;if(this._lazyInitEmptyStyle(),g instanceof Kc||dr&&g instanceof dr){var j=f.browser.getImageData(g);this.style.addImage(c,{data:new f.RGBAImage({width:j.width,height:j.height},j.data),pixelRatio:b,stretchX:I,stretchY:L,content:U,sdf:S,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var q=g;this.style.addImage(c,{data:new f.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:b,stretchX:I,stretchY:L,content:U,sdf:S,version:0,userImage:q}),q.onAdd&&q.onAdd(this,c)}},s.prototype.updateImage=function(c,g){var _=this.style.getImage(c);if(!_)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var b=g instanceof Kc||dr&&g instanceof dr?f.browser.getImageData(g):g,S=b.width,I=b.height,L=b.data;return S===void 0||I===void 0?this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):S!==_.data.width||I!==_.data.height?this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(_.data.replace(L,!(g instanceof Kc||dr&&g instanceof dr)),void this.style.updateImage(c,_))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,g){f.getImage(this._requestManager.transformRequest(c,f.ResourceType.Image),g)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,g){return this._lazyInitEmptyStyle(),this.style.addLayer(c,g),this._update(!0)},s.prototype.moveLayer=function(c,g){return this.style.moveLayer(c,g),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,g,_){return this.style.setLayerZoomRange(c,g,_),this._update(!0)},s.prototype.setFilter=function(c,g,_){return _===void 0&&(_={}),this.style.setFilter(c,g,_),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setPaintProperty(c,g,_,b),this._update(!0)},s.prototype.getPaintProperty=function(c,g){return this.style.getPaintProperty(c,g)},s.prototype.setLayoutProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setLayoutProperty(c,g,_,b),this._update(!0)},s.prototype.getLayoutProperty=function(c,g){return this.style.getLayoutProperty(c,g)},s.prototype.setLight=function(c,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(c,g),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,g){return this.style.setFeatureState(c,g),this._update()},s.prototype.removeFeatureState=function(c,g){return this.style.removeFeatureState(c,g),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,g=0;return this._container&&(c=this._container.clientWidth||400,g=this._container.clientHeight||300),[c,g]},s.prototype._detectMissingCSS=function(){f.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&f.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=Y.create("div","mapboxgl-canvas-container",c);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=Y.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var _=this._containerDimensions();this._resizeCanvas(_[0],_[1]);var b=this._controlContainer=Y.create("div","mapboxgl-control-container",c),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){S[I]=Y.create("div","mapboxgl-ctrl-"+I,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,g){var _=f.browser.devicePixelRatio||1;this._canvas.width=_*c,this._canvas.height=_*g,this._canvas.style.width=c+"px",this._canvas.style.height=g+"px"},s.prototype._setupPainter=function(){var c=f.extend({},ke.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);g?(this.painter=new Or(g,this.transform),f.webpSupported.testSupport(g)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var g,_=this,b=0,S=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=S.createQueryEXT(),S.beginQueryEXT(S.TIME_ELAPSED_EXT,g),b=f.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var L=this.transform.zoom,U=f.browser.now();this.style.zoomHistory.update(L,U);var j=new f.EvaluationParameters(L,{now:U,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=j.crossFadingFactor();q===1&&q===this._crossFadingFactor||(I=!0,this._crossFadingFactor=q),this.style.update(j)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=f.browser.now()-b;S.endQueryEXT(S.TIME_ELAPSED_EXT,g),setTimeout(function(){var $=S.getQueryObjectEXT(g,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(g),_.fire(new f.Event("gpu-timing-frame",{cpuTime:X,gpuTime:$}))},50)}if(this.listens("gpu-timing-layer")){var W=this.painter.collectGpuTimers();setTimeout(function(){var $=_.painter.queryGpuTimers(W);_.fire(new f.Event("gpu-timing-layer",{layerTimes:$}))},50)}var re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new f.Event("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,g=this._controls;c<g.length;c+=1)g[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),f.window!==void 0&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("orientationchange",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1));var _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),qa(this._canvasContainer),qa(this._controlContainer),qa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new f.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=f.browser.frame(function(g){c._frame=null,c._render(g)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,g){f.setCacheLimits(c,g)},a.version.get=function(){return f.version},Object.defineProperties(s.prototype,a),s}(xu);function qa(o){o.parentNode&&o.parentNode.removeChild(o)}var Xc={showCompass:!0,showZoom:!0,visualizePitch:!1},Uo=function(o){var s=this;this.options=f.extend({},Xc,o),this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=Y.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Uo.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},Uo.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},Uo.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bi(this._map,this._compass,this.options.visualizePitch)),this._container},Uo.prototype.onRemove=function(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Uo.prototype._createButton=function(o,s){var a=Y.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},Uo.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var bi=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new yu({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new Zc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Y.addEventListener(s,"mousedown",this.mousedown),Y.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(s,"touchmove",this.touchmove),Y.addEventListener(s,"touchend",this.touchend),Y.addEventListener(s,"touchcancel",this.reset)};function _s(o,s,a){if(o=new f.LngLat(o.lng,o.lat),s){var c=new f.LngLat(o.lng-360,o.lat),g=new f.LngLat(o.lng+360,o.lat),_=a.locationPoint(o).distSqr(s);a.locationPoint(c).distSqr(s)<_?o=c:a.locationPoint(g).distSqr(s)<_&&(o=g)}for(;Math.abs(o.lng-a.center.lng)>180;){var b=a.locationPoint(o);if(b.x>=0&&b.y>=0&&b.x<=a.width&&b.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}bi.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),Y.disableDrag()},bi.prototype.move=function(o,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(o,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(o,s);g&&g.pitchDelta&&a.setPitch(a.getPitch()+g.pitchDelta)}},bi.prototype.off=function(){var o=this.element;Y.removeEventListener(o,"mousedown",this.mousedown),Y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(o,"touchmove",this.touchmove),Y.removeEventListener(o,"touchend",this.touchend),Y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},bi.prototype.offTemp=function(){Y.enableDrag(),Y.removeEventListener(f.window,"mousemove",this.mousemove),Y.removeEventListener(f.window,"mouseup",this.mouseup)},bi.prototype.mousedown=function(o){this.down(f.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),Y.mousePos(this.element,o)),Y.addEventListener(f.window,"mousemove",this.mousemove),Y.addEventListener(f.window,"mouseup",this.mouseup)},bi.prototype.mousemove=function(o){this.move(o,Y.mousePos(this.element,o))},bi.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},bi.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},bi.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},bi.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},bi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var To={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wu(o,s,a){var c=o.classList;for(var g in To)c.remove("mapboxgl-"+a+"-anchor-"+g);c.add("mapboxgl-"+a+"-anchor-"+s)}var xs,yl=function(o){function s(a,c){if(o.call(this),(a instanceof f.window.HTMLElement||c)&&(a=f.extend({element:a},c)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=f.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div"),this._element.setAttribute("aria-label","Map marker");var g=Y.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var _=Y.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");var b=Y.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");var S=Y.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var I=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<L.length;I+=1){var U=L[I],j=Y.createNS("http://www.w3.org/2000/svg","ellipse");j.setAttributeNS(null,"opacity","0.04"),j.setAttributeNS(null,"cx","10.5"),j.setAttributeNS(null,"cy","5.80029008"),j.setAttributeNS(null,"rx",U.rx),j.setAttributeNS(null,"ry",U.ry),S.appendChild(j)}var q=Y.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);var X=Y.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(X);var W=Y.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");var re=Y.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(re);var $=Y.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$.setAttributeNS(null,"fill","#FFFFFF");var te=Y.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");var le=Y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");var me=Y.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),te.appendChild(le),te.appendChild(me),b.appendChild(S),b.appendChild(q),b.appendChild(W),b.appendChild($),b.appendChild(te),g.appendChild(b),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=f.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),wu(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,g=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&g!==32&&g!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=_s(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),Y.setTransform(this._element,To[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=f.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new f.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(f.Evented),Jc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},bs=0,Ha=!1,Yc=function(o){function s(a){o.call(this),this.options=f.extend({},Jc,a),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,xs!==void 0?c(xs):f.window.navigator.permissions!==void 0?f.window.navigator.permissions.query({name:"geolocation"}).then(function(g){c(xs=g.state!=="denied")}):c(xs=!!f.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bs=0,Ha=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),g=a.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),b=f.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(g),b,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),g=this._map.unproject([1,a]),_=c.distanceTo(g),b=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=b+"px",this._circleElement.style.height=b+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Ha)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=Y.create("button","mapboxgl-ctrl-geolocate",this._container),Y.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var _=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new yl(this._dotElement),this._circleElement=Y.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(b){b.geolocateSource||c._watchState!=="ACTIVE_LOCK"||b.originalEvent&&b.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new f.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bs--,Ha=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++bs>1?(a={maximumAge:6e5,timeout:0},Ha=!0):(a=this.options.positionOptions,Ha=!1),this._geolocationWatchID=f.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else f.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(f.Evented),aa={maxWidth:100,unit:"metric"},sa=function(o){this.options=f.extend({},aa,o),f.bindAll(["_onMove","setUnit"],this)};function Eu(o,s,a){var c=a&&a.maxWidth||100,g=o._container.clientHeight/2,_=o.unproject([0,g]),b=o.unproject([c,g]),S=_.distanceTo(b);if(a&&a.unit==="imperial"){var I=3.2808*S;I>5280?la(s,c,I/5280,o._getUIString("ScaleControl.Miles")):la(s,c,I,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?la(s,c,S/1852,o._getUIString("ScaleControl.NauticalMiles")):S>=1e3?la(s,c,S/1e3,o._getUIString("ScaleControl.Kilometers")):la(s,c,S,o._getUIString("ScaleControl.Meters"))}function la(o,s,a,c){var g,_,b,S=(g=a,(_=Math.pow(10,(""+Math.floor(g)).length-1))*(b=(b=g/_)>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(I){var L=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*L)/L}(b)));o.style.width=s*(S/a)+"px",o.innerHTML=S+"&nbsp;"+c}sa.prototype.getDefaultPosition=function(){return"bottom-left"},sa.prototype._onMove=function(){Eu(this._map,this._container,this.options)},sa.prototype.onAdd=function(o){return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},sa.prototype.onRemove=function(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},sa.prototype.setUnit=function(o){this.options.unit=o,Eu(this._map,this._container,this.options)};var Zi=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof f.window.HTMLElement?this._container=o.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in f.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in f.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in f.window.document&&(this._fullscreenchange="MSFullscreenChange")};Zi.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Zi.prototype.onRemove=function(){Y.remove(this._controlContainer),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Zi.prototype._checkFullscreenSupport=function(){return!!(f.window.document.fullscreenEnabled||f.window.document.mozFullScreenEnabled||f.window.document.msFullscreenEnabled||f.window.document.webkitFullscreenEnabled)},Zi.prototype._setupUI=function(){var o=this._fullscreenButton=Y.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Zi.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Zi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Zi.prototype._isFullscreen=function(){return this._fullscreen},Zi.prototype._changeIcon=function(){(f.window.document.fullscreenElement||f.window.document.mozFullScreenElement||f.window.document.webkitFullscreenElement||f.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Zi.prototype._onClickFullscreen=function(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.mozCancelFullScreen?f.window.document.mozCancelFullScreen():f.window.document.msExitFullscreen?f.window.document.msExitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Qc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},vl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ep=function(o){function s(a){o.call(this),this.options=f.extend(Object.create(Qc),a),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(f.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,g=f.window.document.createDocumentFragment(),_=f.window.document.createElement("body");for(_.innerHTML=a;c=_.firstChild;)g.appendChild(c);return this.setDOMContent(g)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Y.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Y.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Y.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(j){return c._container.classList.add(j)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=_s(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var g=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),_=this.options.anchor,b=function j(q){if(q){if(typeof q=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(q,2)));return{center:new f.Point(0,0),top:new f.Point(0,q),"top-left":new f.Point(X,X),"top-right":new f.Point(-X,X),bottom:new f.Point(0,-q),"bottom-left":new f.Point(X,-X),"bottom-right":new f.Point(-X,-X),left:new f.Point(q,0),right:new f.Point(-q,0)}}if(q instanceof f.Point||Array.isArray(q)){var W=f.Point.convert(q);return{center:W,top:W,"top-left":W,"top-right":W,bottom:W,"bottom-left":W,"bottom-right":W,left:W,right:W}}return{center:f.Point.convert(q.center||[0,0]),top:f.Point.convert(q.top||[0,0]),"top-left":f.Point.convert(q["top-left"]||[0,0]),"top-right":f.Point.convert(q["top-right"]||[0,0]),bottom:f.Point.convert(q.bottom||[0,0]),"bottom-left":f.Point.convert(q["bottom-left"]||[0,0]),"bottom-right":f.Point.convert(q["bottom-right"]||[0,0]),left:f.Point.convert(q.left||[0,0]),right:f.Point.convert(q.right||[0,0])}}return j(new f.Point(0,0))}(this.options.offset);if(!_){var S,I=this._container.offsetWidth,L=this._container.offsetHeight;S=g.y+b.bottom.y<L?["top"]:g.y>this._map.transform.height-L?["bottom"]:[],g.x<I/2?S.push("left"):g.x>this._map.transform.width-I/2&&S.push("right"),_=S.length===0?"bottom":S.join("-")}var U=g.add(b[_]).round();Y.setTransform(this._container,To[_]+" translate("+U.x+"px,"+U.y+"px)"),wu(this._container,_,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(vl);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(f.Evented),Su={version:f.version,supported:ke,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:Hh,NavigationControl:Uo,GeolocateControl:Yc,AttributionControl:ei,ScaleControl:sa,FullscreenControl:Zi,Popup:ep,Marker:yl,Style:gi,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.Point,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,config:f.config,prewarm:function(){Me().acquire(Pe)},clearPrewarmedResources:function(){var o=gt;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Pe),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(o){f.config.ACCESS_TOKEN=o},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(o){f.config.API_URL=o},get workerCount(){return Ve.workerCount},set workerCount(o){Ve.workerCount=o},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){f.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){f.clearTileCache(o)},workerUrl:""};return Su}),_e})})(x);var E=y;function C(fe){if(typeof fe=="string"){var pe=fe;if(fe=document.getElementById(fe),!fe)throw new Error("No element with id "+pe)}return fe}function k(fe){if(!/^#([0-9a-f]{3}){1,2}$/i.test(fe)&&!/^[a-z]+$/i.test(fe))throw new Error("Invalid color")}function D(fe,pe){var ue=41,be=27,_e=2,Oe=new fe.Marker()._element.querySelector("svg");Oe.removeAttribute("display"),Oe.setAttribute("xmlns","http://www.w3.org/2000/svg"),Oe.setAttribute("height",ue),Oe.setAttribute("width",be),Oe.setAttribute("viewBox","0 0 "+be+" "+ue),k(pe),Oe.querySelector("*[fill='#3FB1CE']").setAttribute("fill",pe);var f=Oe.querySelectorAll("circle"),ke=f[f.length-1];if(f.length==1){var Y=ke.cloneNode();Y.setAttribute("fill","#000000"),Y.setAttribute("opacity",.25),ke.parentNode.insertBefore(Y,ke)}ke.setAttribute("r",4.5);var Fe=new Image(be*_e,ue*_e);return Fe.src="data:image/svg+xml;utf8,"+encodeURIComponent(Oe.outerHTML),Fe}var N={},ee=function(pe,ue,be,_e){var Oe=this;!ve.library&&typeof window<"u"&&(ve.library=window.mapboxgl||window.maplibregl||null);var f=ve.library;if(!f)throw new Error("No mapping library found");var ke,Y={},Fe={},ze=[],Xe=0;pe=C(pe),pe.id&&(N[pe.id]=this);function xe(Te,Le,Re){var Ae=new XMLHttpRequest;Ae.open("GET",Le,!0),Ae.setRequestHeader("Content-Type","application/json"),Ae.onload=function(){Ae.status===200?Re(JSON.parse(Ae.responseText)):rr(Te,Ae.statusText)},Ae.send()}function mt(Te){ke.loaded()?Te():ke.on("load",Te)}function et(Te){return typeof Te=="number"?Te:new Date(Te).getTime()/1e3}function Wt(Te,Le,Re){for(var Ae=0;Ae<Le.length;Ae++){var Ye=Le[Ae],He=et(Ye.time);He&&(Fe[He]||(Fe[He]=[]),Fe[He].push(Ye),Je.extend(Mi(Ye)))}for(var ct in Fe)Object.prototype.hasOwnProperty.call(Fe,ct)&&ze.push(parseInt(ct));ze.sort(),oo(Te,Fe[ze[Xe]],Re),mt(function(){setTimeout(function(){Ot(Te,Re)},100)})}function Ot(Te,Le){Xe++,di(Te,Fe[ze[Xe]],Le),Xe<ze.length-1&&setTimeout(function(){Ot(Te,Le)},100)}function rr(Te,Le){Te.textContent=Le}function Dt(Te,Le,Re,Ae){try{Ae(Te,Le,Re)}catch(Ye){throw rr(Te,Ye.message),Ye}}function yn(Te,Le,Re,Ae){typeof Le=="string"?xe(Te,Le,function(Ye){Dt(Te,Ye,Re,Ae)}):typeof Le=="function"?Le(function(Ye){Dt(Te,Ye,Re,Ae)},function(Ye){rr(Te,Ye)}):Dt(Te,Le,Re,Ae)}function di(Te,Le,Re){Be(function(){Re.trail&&(cn(Le,Re.trail),ke.getSource("trails").setData(on(Le))),ke.getSource("objects").setData(vn(Le,Re))})}var Kr=new window.Map;function vn(Te,Le){for(var Re={type:"FeatureCollection",features:[]},Ae=0;Ae<Te.length;Ae++){var Ye=Te[Ae],He=Object.assign({},Ye),ct=void 0;if(_e==="point"){if(He.icon||(He.icon=Le.defaultIcon||"mapkick"),He.mapkickIconSize=He.icon==="mapkick"?.5:1,He.mapkickIconAnchor=He.icon==="mapkick"?"bottom":"center",He.mapkickIconOffset=He.icon==="mapkick"?[0,10]:[0,0],He.icon==="mapkick"){var nt=He.color||qe.color||"#f84d4d",kt=Kr.get(nt);kt===void 0&&(kt=Kr.size,k(nt),Kr.set(nt,kt)),He.icon="mapkick-"+kt}var jt=Mi(Ye);if(!jt[1])throw new Error("missing latitude (index: "+Ae+")");if(!jt[0])throw new Error("missing longitude (index: "+Ae+")");ct={type:"Point",coordinates:jt}}else{if(ct=Ye.geometry,!ct)throw new Error("missing geometry (index: "+Ae+")");delete He.geometry,He.mapkickColor=He.color||qe.color||"#0090ff"}Re.features.push({type:"Feature",id:Ae,geometry:ct,properties:He})}return Re}function Mi(Te){return[Te.longitude||Te.lng||Te.lon,Te.latitude||Te.lat]}function Ui(Te){return Te.id}function cn(Te,Le){for(var Re=0;Re<Te.length;Re++){var Ae=Te[Re],Ye=Ui(Ae);Y[Ye]||(Y[Ye]=[]),Y[Ye].push(Mi(Ae)),Le&&Le.len&&Y[Ye].length>Le.len&&Y[Ye].shift()}}function on(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.length;Re++){var Ae=Te[Re];Le.features.push({type:"Feature",geometry:{type:"LineString",coordinates:Y[Ui(Ae)]}})}return Le}function Ln(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.features.length;Re++){var Ae=Te.features[Re],Ye=void 0,He=new f.LngLatBounds;if(pn(He,Ae.geometry),!He.isEmpty()){var ct=He.getCenter();Ye=[ct.lng,ct.lat]}Ye&&Le.features.push({type:"Feature",id:Re,geometry:{type:"Point",coordinates:Ye},properties:Ae.properties})}return Le}function io(Te){for(var Le=Te.getStyle().layers,Re,Ae=Le.length-1;Ae>=0;Ae--){var Ye=Le[Ae];if(!(Ye.metadata&&Ye.metadata["mapbox:featureComponent"]==="place-labels"))break;Re=Ye.id}return Re}function mr(Te,Le){var Re={};if(ke.addSource(Te,{type:"geojson",data:Le}),_e==="point")ke.addLayer({id:Te+"-text",source:Te,type:"symbol",layout:{"text-field":"{label}","text-size":11,"text-anchor":"top","text-offset":[0,1]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}}),ke.addLayer({id:Te,source:Te,type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-size":{type:"identity",property:"mapkickIconSize"},"icon-anchor":{type:"identity",property:"mapkickIconAnchor"},"icon-offset":{type:"identity",property:"mapkickIconOffset"}}});else{var Ae=io(ke),Ye=Te+"-outline";ke.addLayer({id:Ye,source:Te,type:"line",paint:{"line-color":{type:"identity",property:"mapkickColor"},"line-opacity":.7,"line-width":1}},Ae),ke.addLayer({id:Te,source:Te,type:"fill",paint:{"fill-color":{type:"identity",property:"mapkickColor"},"fill-opacity":.3}},Ye);for(var He=Te+"-text",ct=Ln(Le),nt=0;nt<ct.features.length;nt++){var kt=ct.features[nt];Re[kt.id]=kt.geometry.coordinates}ke.addSource(He,{type:"geojson",data:ct}),ke.addLayer({id:Te+"-text",source:He,type:"symbol",layout:{"text-field":"{label}","text-size":11},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}})}var jt=!("hover"in Ge)||Ge.hover,qt={closeButton:!1,closeOnClick:!1};jt||(qt.anchor="bottom");var dt=new f.Popup(qt),zr=function(ur,nr){var _n=window.getComputedStyle(nr.getElement()),jn=new DOMMatrixReadOnly(_n.transform),xn=5,ai=5,bo=jn.m42,mi=jn.m41;(bo<xn||mi<xn)&&ur.panBy([Math.min(mi-xn-ai,0),Math.min(bo-xn-ai,0)])},Lr=function(ur){var nr=zi(ur),_n=nr.properties.tooltip;if(_n){_e==="point"&&nr.properties.icon.startsWith("mapkick-")?dt.options.offset={top:[0,14],"top-left":[0,14],"top-right":[0,14],bottom:[0,-44],"bottom-left":[0,-44],"bottom-right":[0,-44],left:[14,0],right:[-14,0]}:dt.options.offset=14;var jn;_e==="point"?jn=nr.geometry.coordinates:jn=Re[nr.id],dt.setLngLat(jn),Ge.html?dt.setHTML(_n):dt.setText(_n),dt.addTo(ke),dt._container.offsetWidth%2!==0&&(dt._container.style.width=dt._container.offsetWidth+1+"px"),_e!=="area"&&zr(ke,dt)}},hn=function(ur){return ur.geometry.coordinates[1]},zi=function(ur){for(var nr=ur.features,_n=nr[0],jn=1;jn<nr.length;jn++){var xn=nr[jn];hn(xn)<hn(_n)&&(_n=xn)}return _n};if(!jt){var Rn=null;ke.on("click",Te,function(ur){var nr=zi(ur).id;nr!==Rn&&(Lr(ur),Rn=nr,ur.mapkickPopupOpened=!0)}),ke.on("click",function(ur){ur.mapkickPopupOpened||(dt.remove(),Rn=null)})}ke.on("mouseenter",Te,function(ur){var nr=zi(ur).properties.tooltip;nr&&(ke.getCanvas().style.cursor="pointer",jt&&Lr(ur))}),ke.on("mouseleave",Te,function(){ke.getCanvas().style.cursor="",jt&&dt.remove()})}function pn(Te,Le){if(Le.type==="Point")Te.extend(Le.coordinates);else if(Le.type==="Polygon")for(var Re=Le.coordinates[0],Ae=0;Ae<Re.length;Ae++)Te.extend(Re[Ae]);else if(Le.type==="MultiPolygon")for(var Ye=Le.coordinates,He=0;He<Ye.length;He++)for(var ct=Ye[He][0],nt=0;nt<ct.length;nt++)Te.extend(ct[nt])}var oo=function(Te,Le,Re){var Ae=vn(Le,Re);Re=Re||{};for(var Ye=0;Ye<Ae.features.length;Ye++)pn(Je,Ae.features[Ye].geometry);Te.textContent="";var He=Re.style;if(!He){var ct=!("accessToken"in f)||/^1\.1[45]/.test(f.version);if(ct)throw new Error("style required for MapLibre");He="mapbox://styles/mapbox/streets-v12"}var nt=Re.zoom,kt=Re.center;kt||(Je.isEmpty()?(kt=[0,0],nt||(nt=1)):kt=Je.getCenter());var jt={container:Te,style:He,dragRotate:!1,touchZoomRotate:!1,center:kt,zoom:nt||15};Re.style||(jt.projection="mercator"),Re.accessToken&&(jt.accessToken=Re.accessToken),ke=new f.Map(jt),Re.controls&&ke.addControl(new f.NavigationControl({showCompass:!1})),Re.zoom||(ke.style.stylesheet||(ke.style.stylesheet={}),Je.isEmpty()||ke.fitBounds(Je,{padding:40,animate:!1,maxZoom:15})),Oe.map=ke,mt(function(){Re.trail&&(cn(Le),ke.addSource("trails",{type:"geojson",data:on([])}),ke.addLayer({id:"trails",source:"trails",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}}));var qt=Kr.size;function dt(){if(qt!==0){qt--;return}mr("objects",Ae),oe=!0;for(var zr;zr=de.shift();)zr()}Kr.forEach(function(zr,Lr){var hn=D(f,Lr);hn.addEventListener("load",function(){ke.addImage("mapkick-"+zr+"-15",hn),dt()})}),dt()})},oe=!1,de=[];function Be(Te){oe?Te():de.push(Te)}be=be||{},be=Object.assign({},ve.options,be);var Ge=be.tooltips||{},qe=be.markers||{},Je=new f.LngLatBounds;be.replay?yn(pe,ue,be,Wt):(yn(pe,ue,be,oo),be.refresh&&(this.intervalId=setInterval(function(){yn(pe,ue,be,di)},be.refresh*1e3)))};ee.prototype.getMapObject=function(){return this.map},ee.prototype.destroy=function(){this.stopRefresh(),this.map&&(this.map.remove(),this.map=null)},ee.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};var se=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"point")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ne=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"area")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ve={Map:se,AreaMap:ne,maps:N,options:{},library:null};return ve.use=function(fe){ve.library=fe},typeof window<"u"&&!window.Mapkick&&(window.Mapkick=ve,setTimeout(function(){window.dispatchEvent(new Event("mapkick:load"))},0)),ve.use(E),ve})})(_5);const Ea=(t,n)=>{const l=t.__vccOpts||t;for(const[p,d]of n)l[p]=d;return l},x5={},b5={class:"modal-mask"},w5={class:"modal-wrapper"},E5={class:"modal-container"};function S5(t,n){return nn(),rs(Ud,{name:"modal"},{default:Pd(()=>[_t("div",b5,[_t("div",w5,[_t("div",E5,[_t("button",{class:"btn btn-light m-1 btn-lg",onClick:n[0]||(n[0]=l=>t.$emit("show-houses"))},"See Izumo houses"),_t("button",{class:"btn btn-info m-1 btn-lg",onClick:n[1]||(n[1]=l=>t.$emit("add-house"))},"Add my house")])])])]),_:1})}const T5=Ea(x5,[["render",S5]]);const C5={components:{Modal:T5},data(){return{access_token:this.$mapboxApiKey,map:{},showModal:!1}},mounted(){this.createMap()},methods:{showHouses(){this.$emit("show-houses")},addHouse(){this.$emit("add-house")},async createMap(){try{this.map=Hg(this.access_token,"globe",this.flyended);const t={center:[132.7445942,35.3665752],zoom:12.5,bearing:90,pitch:80},n=this;document.getElementById("fly").addEventListener("click",()=>{n.map.flyTo({...t,duration:15e3,essential:!0}),event.target.style.display="none"})}catch(t){console.log("map error",t)}},flyended(){console.log("ended!");const t=this;setTimeout(()=>{t.showModal=!0},2e3)}}},A5=t=>(Cc("data-v-b7420dbc"),t=t(),Ac(),t),I5={class:"main"},k5=A5(()=>_t("div",{class:"map-wrapper"},[_t("div",{id:"map"}),_t("button",{class:"btn btn-lg mt-5 ml-5 text-white border border-light glow-on-hover",id:"fly",style:{"background-color":"transparent"}},"Let's go Izumo!")],-1));function P5(t,n,l,p,d,y){const x=Go("Modal");return nn(),Ci("div",I5,[k5,d.showModal?(nn(),rs(x,{key:0,onClose:n[0]||(n[0]=E=>d.showModal=!1),onShowHouses:y.showHouses,onAddHouse:y.addHouse},null,8,["onShowHouses","onAddHouse"])):xa("",!0)])}const M5=Ea(C5,[["render",P5],["__scopeId","data-v-b7420dbc"]]);function gb(t,n){return function(){return t.apply(n,arguments)}}const{toString:z5}=Object.prototype,{getPrototypeOf:Vy}=Object,Zd=(t=>n=>{const l=z5.call(n);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Sa=t=>(t=t.toLowerCase(),n=>Zd(n)===t),Gd=t=>n=>typeof n===t,{isArray:Ic}=Array,th=Gd("undefined");function L5(t){return t!==null&&!th(t)&&t.constructor!==null&&!th(t.constructor)&&Lo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yb=Sa("ArrayBuffer");function R5(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&yb(t.buffer),n}const O5=Gd("string"),Lo=Gd("function"),vb=Gd("number"),Wd=t=>t!==null&&typeof t=="object",D5=t=>t===!0||t===!1,$f=t=>{if(Zd(t)!=="object")return!1;const n=Vy(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},B5=Sa("Date"),F5=Sa("File"),N5=Sa("Blob"),U5=Sa("FileList"),V5=t=>Wd(t)&&Lo(t.pipe),j5=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Lo(t.append)&&((n=Zd(t))==="formdata"||n==="object"&&Lo(t.toString)&&t.toString()==="[object FormData]"))},q5=Sa("URLSearchParams"),H5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ph(t,n,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let p,d;if(typeof t!="object"&&(t=[t]),Ic(t))for(p=0,d=t.length;p<d;p++)n.call(null,t[p],p,t);else{const y=l?Object.getOwnPropertyNames(t):Object.keys(t),x=y.length;let E;for(p=0;p<x;p++)E=y[p],n.call(null,t[E],E,t)}}function _b(t,n){n=n.toLowerCase();const l=Object.keys(t);let p=l.length,d;for(;p-- >0;)if(d=l[p],n===d.toLowerCase())return d;return null}const xb=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),bb=t=>!th(t)&&t!==xb;function Ng(){const{caseless:t}=bb(this)&&this||{},n={},l=(p,d)=>{const y=t&&_b(n,d)||d;$f(n[y])&&$f(p)?n[y]=Ng(n[y],p):$f(p)?n[y]=Ng({},p):Ic(p)?n[y]=p.slice():n[y]=p};for(let p=0,d=arguments.length;p<d;p++)arguments[p]&&ph(arguments[p],l);return n}const $5=(t,n,l,{allOwnKeys:p}={})=>(ph(n,(d,y)=>{l&&Lo(d)?t[y]=gb(d,l):t[y]=d},{allOwnKeys:p}),t),Z5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),G5=(t,n,l,p)=>{t.prototype=Object.create(n.prototype,p),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),l&&Object.assign(t.prototype,l)},W5=(t,n,l,p)=>{let d,y,x;const E={};if(n=n||{},t==null)return n;do{for(d=Object.getOwnPropertyNames(t),y=d.length;y-- >0;)x=d[y],(!p||p(x,t,n))&&!E[x]&&(n[x]=t[x],E[x]=!0);t=l!==!1&&Vy(t)}while(t&&(!l||l(t,n))&&t!==Object.prototype);return n},K5=(t,n,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=n.length;const p=t.indexOf(n,l);return p!==-1&&p===l},X5=t=>{if(!t)return null;if(Ic(t))return t;let n=t.length;if(!vb(n))return null;const l=new Array(n);for(;n-- >0;)l[n]=t[n];return l},J5=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Vy(Uint8Array)),Y5=(t,n)=>{const p=(t&&t[Symbol.iterator]).call(t);let d;for(;(d=p.next())&&!d.done;){const y=d.value;n.call(t,y[0],y[1])}},Q5=(t,n)=>{let l;const p=[];for(;(l=t.exec(n))!==null;)p.push(l);return p},eA=Sa("HTMLFormElement"),tA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,p,d){return p.toUpperCase()+d}),E0=(({hasOwnProperty:t})=>(n,l)=>t.call(n,l))(Object.prototype),rA=Sa("RegExp"),wb=(t,n)=>{const l=Object.getOwnPropertyDescriptors(t),p={};ph(l,(d,y)=>{n(d,y,t)!==!1&&(p[y]=d)}),Object.defineProperties(t,p)},nA=t=>{wb(t,(n,l)=>{if(Lo(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const p=t[l];if(Lo(p)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},iA=(t,n)=>{const l={},p=d=>{d.forEach(y=>{l[y]=!0})};return Ic(t)?p(t):p(String(t).split(n)),l},oA=()=>{},aA=(t,n)=>(t=+t,Number.isFinite(t)?t:n),rg="abcdefghijklmnopqrstuvwxyz",S0="0123456789",Eb={DIGIT:S0,ALPHA:rg,ALPHA_DIGIT:rg+rg.toUpperCase()+S0},sA=(t=16,n=Eb.ALPHA_DIGIT)=>{let l="";const{length:p}=n;for(;t--;)l+=n[Math.random()*p|0];return l};function lA(t){return!!(t&&Lo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const uA=t=>{const n=new Array(10),l=(p,d)=>{if(Wd(p)){if(n.indexOf(p)>=0)return;if(!("toJSON"in p)){n[d]=p;const y=Ic(p)?[]:{};return ph(p,(x,E)=>{const C=l(x,d+1);!th(C)&&(y[E]=C)}),n[d]=void 0,y}}return p};return l(t,0)},cA=Sa("AsyncFunction"),pA=t=>t&&(Wd(t)||Lo(t))&&Lo(t.then)&&Lo(t.catch),je={isArray:Ic,isArrayBuffer:yb,isBuffer:L5,isFormData:j5,isArrayBufferView:R5,isString:O5,isNumber:vb,isBoolean:D5,isObject:Wd,isPlainObject:$f,isUndefined:th,isDate:B5,isFile:F5,isBlob:N5,isRegExp:rA,isFunction:Lo,isStream:V5,isURLSearchParams:q5,isTypedArray:J5,isFileList:U5,forEach:ph,merge:Ng,extend:$5,trim:H5,stripBOM:Z5,inherits:G5,toFlatObject:W5,kindOf:Zd,kindOfTest:Sa,endsWith:K5,toArray:X5,forEachEntry:Y5,matchAll:Q5,isHTMLForm:eA,hasOwnProperty:E0,hasOwnProp:E0,reduceDescriptors:wb,freezeMethods:nA,toObjectSet:iA,toCamelCase:tA,noop:oA,toFiniteNumber:aA,findKey:_b,global:xb,isContextDefined:bb,ALPHABET:Eb,generateString:sA,isSpecCompliantForm:lA,toJSONObject:uA,isAsyncFn:cA,isThenable:pA};function Cr(t,n,l,p,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),l&&(this.config=l),p&&(this.request=p),d&&(this.response=d)}je.inherits(Cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Sb=Cr.prototype,Tb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tb[t]={value:t}});Object.defineProperties(Cr,Tb);Object.defineProperty(Sb,"isAxiosError",{value:!0});Cr.from=(t,n,l,p,d,y)=>{const x=Object.create(Sb);return je.toFlatObject(t,x,function(C){return C!==Error.prototype},E=>E!=="isAxiosError"),Cr.call(x,t.message,n,l,p,d),x.cause=t,x.name=t.name,y&&Object.assign(x,y),x};const hA=null;function Ug(t){return je.isPlainObject(t)||je.isArray(t)}function Cb(t){return je.endsWith(t,"[]")?t.slice(0,-2):t}function T0(t,n,l){return t?t.concat(n).map(function(d,y){return d=Cb(d),!l&&y?"["+d+"]":d}).join(l?".":""):n}function fA(t){return je.isArray(t)&&!t.some(Ug)}const dA=je.toFlatObject(je,{},null,function(n){return/^is[A-Z]/.test(n)});function Kd(t,n,l){if(!je.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,l=je.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ve,fe){return!je.isUndefined(fe[ve])});const p=l.metaTokens,d=l.visitor||D,y=l.dots,x=l.indexes,C=(l.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(n);if(!je.isFunction(d))throw new TypeError("visitor must be a function");function k(ne){if(ne===null)return"";if(je.isDate(ne))return ne.toISOString();if(!C&&je.isBlob(ne))throw new Cr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(ne)||je.isTypedArray(ne)?C&&typeof Blob=="function"?new Blob([ne]):Buffer.from(ne):ne}function D(ne,ve,fe){let pe=ne;if(ne&&!fe&&typeof ne=="object"){if(je.endsWith(ve,"{}"))ve=p?ve:ve.slice(0,-2),ne=JSON.stringify(ne);else if(je.isArray(ne)&&fA(ne)||(je.isFileList(ne)||je.endsWith(ve,"[]"))&&(pe=je.toArray(ne)))return ve=Cb(ve),pe.forEach(function(be,_e){!(je.isUndefined(be)||be===null)&&n.append(x===!0?T0([ve],_e,y):x===null?ve:ve+"[]",k(be))}),!1}return Ug(ne)?!0:(n.append(T0(fe,ve,y),k(ne)),!1)}const N=[],ee=Object.assign(dA,{defaultVisitor:D,convertValue:k,isVisitable:Ug});function se(ne,ve){if(!je.isUndefined(ne)){if(N.indexOf(ne)!==-1)throw Error("Circular reference detected in "+ve.join("."));N.push(ne),je.forEach(ne,function(pe,ue){(!(je.isUndefined(pe)||pe===null)&&d.call(n,pe,je.isString(ue)?ue.trim():ue,ve,ee))===!0&&se(pe,ve?ve.concat(ue):[ue])}),N.pop()}}if(!je.isObject(t))throw new TypeError("data must be an object");return se(t),n}function C0(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(p){return n[p]})}function jy(t,n){this._pairs=[],t&&Kd(t,this,n)}const Ab=jy.prototype;Ab.append=function(n,l){this._pairs.push([n,l])};Ab.toString=function(n){const l=n?function(p){return n.call(this,p,C0)}:C0;return this._pairs.map(function(d){return l(d[0])+"="+l(d[1])},"").join("&")};function mA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ib(t,n,l){if(!n)return t;const p=l&&l.encode||mA,d=l&&l.serialize;let y;if(d?y=d(n,l):y=je.isURLSearchParams(n)?n.toString():new jy(n,l).toString(p),y){const x=t.indexOf("#");x!==-1&&(t=t.slice(0,x)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class gA{constructor(){this.handlers=[]}use(n,l,p){return this.handlers.push({fulfilled:n,rejected:l,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){je.forEach(this.handlers,function(p){p!==null&&n(p)})}}const A0=gA,kb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yA=typeof URLSearchParams<"u"?URLSearchParams:jy,vA=typeof FormData<"u"?FormData:null,_A=typeof Blob<"u"?Blob:null,xA=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),bA=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ba={isBrowser:!0,classes:{URLSearchParams:yA,FormData:vA,Blob:_A},isStandardBrowserEnv:xA,isStandardBrowserWebWorkerEnv:bA,protocols:["http","https","file","blob","url","data"]};function wA(t,n){return Kd(t,new ba.classes.URLSearchParams,Object.assign({visitor:function(l,p,d,y){return ba.isNode&&je.isBuffer(l)?(this.append(p,l.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},n))}function EA(t){return je.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function SA(t){const n={},l=Object.keys(t);let p;const d=l.length;let y;for(p=0;p<d;p++)y=l[p],n[y]=t[y];return n}function Pb(t){function n(l,p,d,y){let x=l[y++];const E=Number.isFinite(+x),C=y>=l.length;return x=!x&&je.isArray(d)?d.length:x,C?(je.hasOwnProp(d,x)?d[x]=[d[x],p]:d[x]=p,!E):((!d[x]||!je.isObject(d[x]))&&(d[x]=[]),n(l,p,d[x],y)&&je.isArray(d[x])&&(d[x]=SA(d[x])),!E)}if(je.isFormData(t)&&je.isFunction(t.entries)){const l={};return je.forEachEntry(t,(p,d)=>{n(EA(p),d,l,0)}),l}return null}const TA={"Content-Type":void 0};function CA(t,n,l){if(je.isString(t))try{return(n||JSON.parse)(t),je.trim(t)}catch(p){if(p.name!=="SyntaxError")throw p}return(l||JSON.stringify)(t)}const Xd={transitional:kb,adapter:["xhr","http"],transformRequest:[function(n,l){const p=l.getContentType()||"",d=p.indexOf("application/json")>-1,y=je.isObject(n);if(y&&je.isHTMLForm(n)&&(n=new FormData(n)),je.isFormData(n))return d&&d?JSON.stringify(Pb(n)):n;if(je.isArrayBuffer(n)||je.isBuffer(n)||je.isStream(n)||je.isFile(n)||je.isBlob(n))return n;if(je.isArrayBufferView(n))return n.buffer;if(je.isURLSearchParams(n))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let E;if(y){if(p.indexOf("application/x-www-form-urlencoded")>-1)return wA(n,this.formSerializer).toString();if((E=je.isFileList(n))||p.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Kd(E?{"files[]":n}:n,C&&new C,this.formSerializer)}}return y||d?(l.setContentType("application/json",!1),CA(n)):n}],transformResponse:[function(n){const l=this.transitional||Xd.transitional,p=l&&l.forcedJSONParsing,d=this.responseType==="json";if(n&&je.isString(n)&&(p&&!this.responseType||d)){const x=!(l&&l.silentJSONParsing)&&d;try{return JSON.parse(n)}catch(E){if(x)throw E.name==="SyntaxError"?Cr.from(E,Cr.ERR_BAD_RESPONSE,this,null,this.response):E}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ba.classes.FormData,Blob:ba.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};je.forEach(["delete","get","head"],function(n){Xd.headers[n]={}});je.forEach(["post","put","patch"],function(n){Xd.headers[n]=je.merge(TA)});const qy=Xd,AA=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),IA=t=>{const n={};let l,p,d;return t&&t.split(`
`).forEach(function(x){d=x.indexOf(":"),l=x.substring(0,d).trim().toLowerCase(),p=x.substring(d+1).trim(),!(!l||n[l]&&AA[l])&&(l==="set-cookie"?n[l]?n[l].push(p):n[l]=[p]:n[l]=n[l]?n[l]+", "+p:p)}),n},I0=Symbol("internals");function kp(t){return t&&String(t).trim().toLowerCase()}function Zf(t){return t===!1||t==null?t:je.isArray(t)?t.map(Zf):String(t)}function kA(t){const n=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=l.exec(t);)n[p[1]]=p[2];return n}const PA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ng(t,n,l,p,d){if(je.isFunction(p))return p.call(this,n,l);if(d&&(n=l),!!je.isString(n)){if(je.isString(p))return n.indexOf(p)!==-1;if(je.isRegExp(p))return p.test(n)}}function MA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,l,p)=>l.toUpperCase()+p)}function zA(t,n){const l=je.toCamelCase(" "+n);["get","set","has"].forEach(p=>{Object.defineProperty(t,p+l,{value:function(d,y,x){return this[p].call(this,n,d,y,x)},configurable:!0})})}class Jd{constructor(n){n&&this.set(n)}set(n,l,p){const d=this;function y(E,C,k){const D=kp(C);if(!D)throw new Error("header name must be a non-empty string");const N=je.findKey(d,D);(!N||d[N]===void 0||k===!0||k===void 0&&d[N]!==!1)&&(d[N||C]=Zf(E))}const x=(E,C)=>je.forEach(E,(k,D)=>y(k,D,C));return je.isPlainObject(n)||n instanceof this.constructor?x(n,l):je.isString(n)&&(n=n.trim())&&!PA(n)?x(IA(n),l):n!=null&&y(l,n,p),this}get(n,l){if(n=kp(n),n){const p=je.findKey(this,n);if(p){const d=this[p];if(!l)return d;if(l===!0)return kA(d);if(je.isFunction(l))return l.call(this,d,p);if(je.isRegExp(l))return l.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,l){if(n=kp(n),n){const p=je.findKey(this,n);return!!(p&&this[p]!==void 0&&(!l||ng(this,this[p],p,l)))}return!1}delete(n,l){const p=this;let d=!1;function y(x){if(x=kp(x),x){const E=je.findKey(p,x);E&&(!l||ng(p,p[E],E,l))&&(delete p[E],d=!0)}}return je.isArray(n)?n.forEach(y):y(n),d}clear(n){const l=Object.keys(this);let p=l.length,d=!1;for(;p--;){const y=l[p];(!n||ng(this,this[y],y,n,!0))&&(delete this[y],d=!0)}return d}normalize(n){const l=this,p={};return je.forEach(this,(d,y)=>{const x=je.findKey(p,y);if(x){l[x]=Zf(d),delete l[y];return}const E=n?MA(y):String(y).trim();E!==y&&delete l[y],l[E]=Zf(d),p[E]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const l=Object.create(null);return je.forEach(this,(p,d)=>{p!=null&&p!==!1&&(l[d]=n&&je.isArray(p)?p.join(", "):p)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,l])=>n+": "+l).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...l){const p=new this(n);return l.forEach(d=>p.set(d)),p}static accessor(n){const p=(this[I0]=this[I0]={accessors:{}}).accessors,d=this.prototype;function y(x){const E=kp(x);p[E]||(zA(d,x),p[E]=!0)}return je.isArray(n)?n.forEach(y):y(n),this}}Jd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.freezeMethods(Jd.prototype);je.freezeMethods(Jd);const is=Jd;function ig(t,n){const l=this||qy,p=n||l,d=is.from(p.headers);let y=p.data;return je.forEach(t,function(E){y=E.call(l,y,d.normalize(),n?n.status:void 0)}),d.normalize(),y}function Mb(t){return!!(t&&t.__CANCEL__)}function hh(t,n,l){Cr.call(this,t??"canceled",Cr.ERR_CANCELED,n,l),this.name="CanceledError"}je.inherits(hh,Cr,{__CANCEL__:!0});function LA(t,n,l){const p=l.config.validateStatus;!l.status||!p||p(l.status)?t(l):n(new Cr("Request failed with status code "+l.status,[Cr.ERR_BAD_REQUEST,Cr.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}const RA=ba.isStandardBrowserEnv?function(){return{write:function(l,p,d,y,x,E){const C=[];C.push(l+"="+encodeURIComponent(p)),je.isNumber(d)&&C.push("expires="+new Date(d).toGMTString()),je.isString(y)&&C.push("path="+y),je.isString(x)&&C.push("domain="+x),E===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(l){const p=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function OA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function DA(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}function zb(t,n){return t&&!OA(n)?DA(t,n):n}const BA=ba.isStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a");let p;function d(y){let x=y;return n&&(l.setAttribute("href",x),x=l.href),l.setAttribute("href",x),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return p=d(window.location.href),function(x){const E=je.isString(x)?d(x):x;return E.protocol===p.protocol&&E.host===p.host}}():function(){return function(){return!0}}();function FA(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function NA(t,n){t=t||10;const l=new Array(t),p=new Array(t);let d=0,y=0,x;return n=n!==void 0?n:1e3,function(C){const k=Date.now(),D=p[y];x||(x=k),l[d]=C,p[d]=k;let N=y,ee=0;for(;N!==d;)ee+=l[N++],N=N%t;if(d=(d+1)%t,d===y&&(y=(y+1)%t),k-x<n)return;const se=D&&k-D;return se?Math.round(ee*1e3/se):void 0}}function k0(t,n){let l=0;const p=NA(50,250);return d=>{const y=d.loaded,x=d.lengthComputable?d.total:void 0,E=y-l,C=p(E),k=y<=x;l=y;const D={loaded:y,total:x,progress:x?y/x:void 0,bytes:E,rate:C||void 0,estimated:C&&x&&k?(x-y)/C:void 0,event:d};D[n?"download":"upload"]=!0,t(D)}}const UA=typeof XMLHttpRequest<"u",VA=UA&&function(t){return new Promise(function(l,p){let d=t.data;const y=is.from(t.headers).normalize(),x=t.responseType;let E;function C(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}je.isFormData(d)&&(ba.isStandardBrowserEnv||ba.isStandardBrowserWebWorkerEnv?y.setContentType(!1):y.setContentType("multipart/form-data;",!1));let k=new XMLHttpRequest;if(t.auth){const se=t.auth.username||"",ne=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.set("Authorization","Basic "+btoa(se+":"+ne))}const D=zb(t.baseURL,t.url);k.open(t.method.toUpperCase(),Ib(D,t.params,t.paramsSerializer),!0),k.timeout=t.timeout;function N(){if(!k)return;const se=is.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ve={data:!x||x==="text"||x==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:se,config:t,request:k};LA(function(pe){l(pe),C()},function(pe){p(pe),C()},ve),k=null}if("onloadend"in k?k.onloadend=N:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(N)},k.onabort=function(){k&&(p(new Cr("Request aborted",Cr.ECONNABORTED,t,k)),k=null)},k.onerror=function(){p(new Cr("Network Error",Cr.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let ne=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const ve=t.transitional||kb;t.timeoutErrorMessage&&(ne=t.timeoutErrorMessage),p(new Cr(ne,ve.clarifyTimeoutError?Cr.ETIMEDOUT:Cr.ECONNABORTED,t,k)),k=null},ba.isStandardBrowserEnv){const se=(t.withCredentials||BA(D))&&t.xsrfCookieName&&RA.read(t.xsrfCookieName);se&&y.set(t.xsrfHeaderName,se)}d===void 0&&y.setContentType(null),"setRequestHeader"in k&&je.forEach(y.toJSON(),function(ne,ve){k.setRequestHeader(ve,ne)}),je.isUndefined(t.withCredentials)||(k.withCredentials=!!t.withCredentials),x&&x!=="json"&&(k.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&k.addEventListener("progress",k0(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",k0(t.onUploadProgress)),(t.cancelToken||t.signal)&&(E=se=>{k&&(p(!se||se.type?new hh(null,t,k):se),k.abort(),k=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E)));const ee=FA(D);if(ee&&ba.protocols.indexOf(ee)===-1){p(new Cr("Unsupported protocol "+ee+":",Cr.ERR_BAD_REQUEST,t));return}k.send(d||null)})},Gf={http:hA,xhr:VA};je.forEach(Gf,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const jA={getAdapter:t=>{t=je.isArray(t)?t:[t];const{length:n}=t;let l,p;for(let d=0;d<n&&(l=t[d],!(p=je.isString(l)?Gf[l.toLowerCase()]:l));d++);if(!p)throw p===!1?new Cr(`Adapter ${l} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(je.hasOwnProp(Gf,l)?`Adapter '${l}' is not available in the build`:`Unknown adapter '${l}'`);if(!je.isFunction(p))throw new TypeError("adapter is not a function");return p},adapters:Gf};function og(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hh(null,t)}function P0(t){return og(t),t.headers=is.from(t.headers),t.data=ig.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jA.getAdapter(t.adapter||qy.adapter)(t).then(function(p){return og(t),p.data=ig.call(t,t.transformResponse,p),p.headers=is.from(p.headers),p},function(p){return Mb(p)||(og(t),p&&p.response&&(p.response.data=ig.call(t,t.transformResponse,p.response),p.response.headers=is.from(p.response.headers))),Promise.reject(p)})}const M0=t=>t instanceof is?t.toJSON():t;function xc(t,n){n=n||{};const l={};function p(k,D,N){return je.isPlainObject(k)&&je.isPlainObject(D)?je.merge.call({caseless:N},k,D):je.isPlainObject(D)?je.merge({},D):je.isArray(D)?D.slice():D}function d(k,D,N){if(je.isUndefined(D)){if(!je.isUndefined(k))return p(void 0,k,N)}else return p(k,D,N)}function y(k,D){if(!je.isUndefined(D))return p(void 0,D)}function x(k,D){if(je.isUndefined(D)){if(!je.isUndefined(k))return p(void 0,k)}else return p(void 0,D)}function E(k,D,N){if(N in n)return p(k,D);if(N in t)return p(void 0,k)}const C={url:y,method:y,data:y,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:E,headers:(k,D)=>d(M0(k),M0(D),!0)};return je.forEach(Object.keys(Object.assign({},t,n)),function(D){const N=C[D]||d,ee=N(t[D],n[D],D);je.isUndefined(ee)&&N!==E||(l[D]=ee)}),l}const Lb="1.4.0",Hy={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Hy[t]=function(p){return typeof p===t||"a"+(n<1?"n ":" ")+t}});const z0={};Hy.transitional=function(n,l,p){function d(y,x){return"[Axios v"+Lb+"] Transitional option '"+y+"'"+x+(p?". "+p:"")}return(y,x,E)=>{if(n===!1)throw new Cr(d(x," has been removed"+(l?" in "+l:"")),Cr.ERR_DEPRECATED);return l&&!z0[x]&&(z0[x]=!0,console.warn(d(x," has been deprecated since v"+l+" and will be removed in the near future"))),n?n(y,x,E):!0}};function qA(t,n,l){if(typeof t!="object")throw new Cr("options must be an object",Cr.ERR_BAD_OPTION_VALUE);const p=Object.keys(t);let d=p.length;for(;d-- >0;){const y=p[d],x=n[y];if(x){const E=t[y],C=E===void 0||x(E,y,t);if(C!==!0)throw new Cr("option "+y+" must be "+C,Cr.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new Cr("Unknown option "+y,Cr.ERR_BAD_OPTION)}}const Vg={assertOptions:qA,validators:Hy},zs=Vg.validators;class md{constructor(n){this.defaults=n,this.interceptors={request:new A0,response:new A0}}request(n,l){typeof n=="string"?(l=l||{},l.url=n):l=n||{},l=xc(this.defaults,l);const{transitional:p,paramsSerializer:d,headers:y}=l;p!==void 0&&Vg.assertOptions(p,{silentJSONParsing:zs.transitional(zs.boolean),forcedJSONParsing:zs.transitional(zs.boolean),clarifyTimeoutError:zs.transitional(zs.boolean)},!1),d!=null&&(je.isFunction(d)?l.paramsSerializer={serialize:d}:Vg.assertOptions(d,{encode:zs.function,serialize:zs.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let x;x=y&&je.merge(y.common,y[l.method]),x&&je.forEach(["delete","get","head","post","put","patch","common"],ne=>{delete y[ne]}),l.headers=is.concat(x,y);const E=[];let C=!0;this.interceptors.request.forEach(function(ve){typeof ve.runWhen=="function"&&ve.runWhen(l)===!1||(C=C&&ve.synchronous,E.unshift(ve.fulfilled,ve.rejected))});const k=[];this.interceptors.response.forEach(function(ve){k.push(ve.fulfilled,ve.rejected)});let D,N=0,ee;if(!C){const ne=[P0.bind(this),void 0];for(ne.unshift.apply(ne,E),ne.push.apply(ne,k),ee=ne.length,D=Promise.resolve(l);N<ee;)D=D.then(ne[N++],ne[N++]);return D}ee=E.length;let se=l;for(N=0;N<ee;){const ne=E[N++],ve=E[N++];try{se=ne(se)}catch(fe){ve.call(this,fe);break}}try{D=P0.call(this,se)}catch(ne){return Promise.reject(ne)}for(N=0,ee=k.length;N<ee;)D=D.then(k[N++],k[N++]);return D}getUri(n){n=xc(this.defaults,n);const l=zb(n.baseURL,n.url);return Ib(l,n.params,n.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(n){md.prototype[n]=function(l,p){return this.request(xc(p||{},{method:n,url:l,data:(p||{}).data}))}});je.forEach(["post","put","patch"],function(n){function l(p){return function(y,x,E){return this.request(xc(E||{},{method:n,headers:p?{"Content-Type":"multipart/form-data"}:{},url:y,data:x}))}}md.prototype[n]=l(),md.prototype[n+"Form"]=l(!0)});const Wf=md;class $y{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(y){l=y});const p=this;this.promise.then(d=>{if(!p._listeners)return;let y=p._listeners.length;for(;y-- >0;)p._listeners[y](d);p._listeners=null}),this.promise.then=d=>{let y;const x=new Promise(E=>{p.subscribe(E),y=E}).then(d);return x.cancel=function(){p.unsubscribe(y)},x},n(function(y,x,E){p.reason||(p.reason=new hh(y,x,E),l(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const l=this._listeners.indexOf(n);l!==-1&&this._listeners.splice(l,1)}static source(){let n;return{token:new $y(function(d){n=d}),cancel:n}}}const HA=$y;function $A(t){return function(l){return t.apply(null,l)}}function ZA(t){return je.isObject(t)&&t.isAxiosError===!0}const jg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jg).forEach(([t,n])=>{jg[n]=t});const GA=jg;function Rb(t){const n=new Wf(t),l=gb(Wf.prototype.request,n);return je.extend(l,Wf.prototype,n,{allOwnKeys:!0}),je.extend(l,n,null,{allOwnKeys:!0}),l.create=function(d){return Rb(xc(t,d))},l}const Kn=Rb(qy);Kn.Axios=Wf;Kn.CanceledError=hh;Kn.CancelToken=HA;Kn.isCancel=Mb;Kn.VERSION=Lb;Kn.toFormData=Kd;Kn.AxiosError=Cr;Kn.Cancel=Kn.CanceledError;Kn.all=function(n){return Promise.all(n)};Kn.spread=$A;Kn.isAxiosError=ZA;Kn.mergeConfig=xc;Kn.AxiosHeaders=is;Kn.formToJSON=t=>Pb(je.isHTMLForm(t)?new FormData(t):t);Kn.HttpStatusCode=GA;Kn.default=Kn;const Yi=Kn;const WA={data(){return{houses:[],access_token:this.$mapboxApiKey,map:{},features:[]}},mounted(){this.createMap()},computed:{renderedHouses(){return this.houses.filter(t=>t.fake_latitude!=null)}},methods:{createdAt(t){return t.created_at.slice(0,10)},async createMap(){try{this.map=Hg(this.access_token,"streets"),Yi.get("/properties",{headers:{"Content-Type":"application/json"}}).then(t=>{console.log("response",t.data);let n=JSON.parse(JSON.stringify(t.data));this.houses=n.sort((l,p)=>p.rating-l.rating),this.drawHouses(JSON.parse(JSON.stringify(t.data)))})}catch(t){console.log("map error",t)}},drawHouses(t){const n=[];t.forEach(l=>{if(console.log(l),l.fake_longitude){l.longitude,l.latitude;const p=[l.fake_longitude,l.fake_latitude],d=this.createGeoJSONCircle(p,.5);n.push(d)}}),this.showMarkers("circles",n)},showMarkers(t,n){const l=this;this.map.on("load",function(){l.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n}});const p=t==="circles"?{id:t,type:"fill",source:t,paint:{"fill-color":"blue","fill-opacity":.6}}:{id:t,type:"circle",source:t,paint:{"circle-radius":3,"circle-color":"red"}};l.map.addLayer(p)})},createGeoJSONCircle(t,n,l){l||(l=64);for(var p={latitude:t[1],longitude:t[0]},d=n,y=[],x=d/(111.32*Math.cos(p.latitude*Math.PI/180)),E=d/110.574,C,k,D,N=0;N<l;N++)C=N/l*(2*Math.PI),k=x*Math.cos(C),D=E*Math.sin(C),y.push([p.longitude+k,p.latitude+D]);return y.push(y[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[y]}}}}},KA=t=>(Cc("data-v-dc52f418"),t=t(),Ac(),t),XA={class:"main"},JA={class:"sidebar col-4 py-1"},YA={class:"list-group"},QA=["onClick"],eI={class:"d-flex w-100 justify-content-between align-items-center"},tI={class:"mb-1"},rI={class:"badge badge-secondary ml-1"},nI={class:"d-flex w-100 justify-content-between align-items-center"},iI={class:"text-nowrap"},oI={class:"text-nowrap ml-1"},aI=KA(()=>_t("div",{class:"map-wrapper"},[_t("div",{id:"map"})],-1));function sI(t,n,l,p,d,y){return nn(),Ci("div",XA,[_t("div",JA,[_t("div",null,[_t("button",{class:"btn btn-block btn-primary my-1",onClick:n[0]||(n[0]=x=>t.$emit("add-house"))},"Add my house")]),_t("div",YA,[(nn(!0),Ci(Zn,null,L1(y.renderedHouses,x=>(nn(),Ci("a",{class:"list-group-item list-group-item-action flex-column align-items-start",onClick:E=>t.$emit("show-house",x)},[_t("div",eI,[_t("h5",tI,Si(x.title),1),_t("h4",rI,Si(x.rating),1)]),_t("div",nI,[_t("small",iI,"Updated: "+Si(y.createdAt(x)),1),_t("small",oI,Si(x.price)+" ￥",1)])],8,QA))),256))])]),aI])}const lI=Ea(WA,[["render",sI],["__scopeId","data-v-dc52f418"]]);var kc=cI,uI=Object.prototype.hasOwnProperty;function cI(){for(var t={},n=0;n<arguments.length;n++){var l=arguments[n];for(var p in l)uI.call(l,p)&&(t[p]=l[p])}return t}var Ob={exports:{}};(function(t,n){(function(){var l={};t.exports=l,l.simpleFilter=function(p,d){return d.filter(function(y){return l.test(p,y)})},l.test=function(p,d){return l.match(p,d)!==null},l.match=function(p,d,y){y=y||{};var x=0,E=[],C=d.length,k=0,D=0,N=y.pre||"",ee=y.post||"",se=y.caseSensitive&&d||d.toLowerCase(),ne;p=y.caseSensitive&&p||p.toLowerCase();for(var ve=0;ve<C;ve++)ne=d[ve],se[ve]===p[x]?(ne=N+ne+ee,x+=1,D+=1+D):D=0,k+=D,E[E.length]=ne;return x===p.length?(k=se===p?1/0:k,{rendered:E.join(""),score:k}):null},l.filter=function(p,d,y){return!d||d.length===0?[]:typeof p!="string"?d:(y=y||{},d.reduce(function(x,E,C,k){var D=E;y.extract&&(D=y.extract(E));var N=l.match(p,D,y);return N!=null&&(x[x.length]={string:N.rendered,score:N.score,index:C,original:E}),x},[]).sort(function(x,E){var C=E.score-x.score;return C||x.index-E.index}))}})()})(Ob);var pI=Ob.exports,no=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};no.prototype.show=function(){this.element.style.display="block"};no.prototype.hide=function(){this.element.style.display="none"};no.prototype.add=function(t){this.items.push(t)};no.prototype.clear=function(){this.items=[],this.active=0};no.prototype.isEmpty=function(){return!this.items.length};no.prototype.isVisible=function(){return this.element.style.display==="block"};no.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};no.prototype.drawItem=function(t,n){var l=document.createElement("li"),p=document.createElement("a");n&&(l.className+=" active"),p.innerHTML=t.string,l.appendChild(p),this.element.appendChild(l),l.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),l.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))};no.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};no.prototype.move=function(t){this.active=t,this.draw()};no.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};no.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};no.prototype.drawError=function(t){var n=document.createElement("li");n.innerHTML=t,this.element.appendChild(n),this.show()};var hI=no,fI=kc,dI=pI,mI=hI,Pi=function(t,n,l){return l=l||{},this.options=fI({minLength:2,limit:5,filter:!0,hideOnBlur:!0},l),this.el=t,this.data=n||[],this.list=new mI(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(p){this.handleKeyUp(p.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(p){this.handleKeyDown(p)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(p){this.handlePaste(p)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Pi.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};Pi.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Pi.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Pi.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var n=this;setTimeout(function(){n.handleInputChange(t.target.value)},100)}};Pi.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(n){for(var l=0;l<n.length&&(this.list.add(n[l]),l!==this.options.limit-1);l++);this.list.draw()}.bind(this))};Pi.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Pi.prototype.update=function(t){this.data=t,this.handleKeyUp()};Pi.prototype.clear=function(){this.data=[],this.list.clear()};Pi.prototype.normalize=function(t){return t=t.toLowerCase(),t};Pi.prototype.match=function(t,n){return t.indexOf(n)>-1};Pi.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),this.el.dispatchEvent(n)}else this.el.fireEvent("onchange")};Pi.prototype.getCandidates=function(t){var n={pre:"<strong>",post:"</strong>",extract:function(p){return this.getItemValue(p)}.bind(this)},l;this.options.filter?(l=dI.filter(this.query,this.data,n),l=l.map(function(p){return{original:p.original,string:this.render(p.original,p.string)}}.bind(this))):l=this.data.map(function(p){var d=this.render(p);return{original:p,string:d}}.bind(this)),t(l)};Pi.prototype.getItemValue=function(t){return t};Pi.prototype.render=function(t,n){if(n)return n;for(var l=t.original?this.getItemValue(t.original):this.getItemValue(t),p=this.normalize(l),d=p.lastIndexOf(this.query);d>-1;){var y=d+this.query.length;l=l.slice(0,d)+"<strong>"+l.slice(d,y)+"</strong>"+l.slice(y),d=p.slice(0,d).lastIndexOf(this.query)}return l};Pi.prototype.renderError=function(t){this.list.drawError(t)};var gI=Pi,Db=gI,yI=Db;typeof window<"u"&&(window.Suggestions=Db);var vI="Expected a function",L0=0/0,_I="[object Symbol]",xI=/^\s+|\s+$/g,bI=/^[-+]0x[0-9a-f]+$/i,wI=/^0b[01]+$/i,EI=/^0o[0-7]+$/i,SI=parseInt,TI=typeof yo=="object"&&yo&&yo.Object===Object&&yo,CI=typeof self=="object"&&self&&self.Object===Object&&self,AI=TI||CI||Function("return this")(),II=Object.prototype,kI=II.toString,PI=Math.max,MI=Math.min,ag=function(){return AI.Date.now()};function zI(t,n,l){var p,d,y,x,E,C,k=0,D=!1,N=!1,ee=!0;if(typeof t!="function")throw new TypeError(vI);n=R0(n)||0,qg(l)&&(D=!!l.leading,N="maxWait"in l,y=N?PI(R0(l.maxWait)||0,n):y,ee="trailing"in l?!!l.trailing:ee);function se(f){var ke=p,Y=d;return p=d=void 0,k=f,x=t.apply(Y,ke),x}function ne(f){return k=f,E=setTimeout(pe,n),D?se(f):x}function ve(f){var ke=f-C,Y=f-k,Fe=n-ke;return N?MI(Fe,y-Y):Fe}function fe(f){var ke=f-C,Y=f-k;return C===void 0||ke>=n||ke<0||N&&Y>=y}function pe(){var f=ag();if(fe(f))return ue(f);E=setTimeout(pe,ve(f))}function ue(f){return E=void 0,ee&&p?se(f):(p=d=void 0,x)}function be(){E!==void 0&&clearTimeout(E),k=0,p=C=d=E=void 0}function _e(){return E===void 0?x:ue(ag())}function Oe(){var f=ag(),ke=fe(f);if(p=arguments,d=this,C=f,ke){if(E===void 0)return ne(C);if(N)return E=setTimeout(pe,n),se(C)}return E===void 0&&(E=setTimeout(pe,n)),x}return Oe.cancel=be,Oe.flush=_e,Oe}function qg(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function LI(t){return!!t&&typeof t=="object"}function RI(t){return typeof t=="symbol"||LI(t)&&kI.call(t)==_I}function R0(t){if(typeof t=="number")return t;if(RI(t))return L0;if(qg(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=qg(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(xI,"");var l=wI.test(t);return l||EI.test(t)?SI(t.slice(2),l?2:8):bI.test(t)?L0:+t}var OI=zI,Zy={exports:{}},cc=typeof Reflect=="object"?Reflect:null,O0=cc&&typeof cc.apply=="function"?cc.apply:function(n,l,p){return Function.prototype.apply.call(n,l,p)},Kf;cc&&typeof cc.ownKeys=="function"?Kf=cc.ownKeys:Object.getOwnPropertySymbols?Kf=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Kf=function(n){return Object.getOwnPropertyNames(n)};function DI(t){console&&console.warn&&console.warn(t)}var Bb=Number.isNaN||function(n){return n!==n};function jr(){jr.init.call(this)}Zy.exports=jr;Zy.exports.once=UI;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var D0=10;function Yd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return D0},set:function(t){if(typeof t!="number"||t<0||Bb(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D0=t}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||Bb(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function Fb(t){return t._maxListeners===void 0?jr.defaultMaxListeners:t._maxListeners}jr.prototype.getMaxListeners=function(){return Fb(this)};jr.prototype.emit=function(n){for(var l=[],p=1;p<arguments.length;p++)l.push(arguments[p]);var d=n==="error",y=this._events;if(y!==void 0)d=d&&y.error===void 0;else if(!d)return!1;if(d){var x;if(l.length>0&&(x=l[0]),x instanceof Error)throw x;var E=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw E.context=x,E}var C=y[n];if(C===void 0)return!1;if(typeof C=="function")O0(C,this,l);else for(var k=C.length,D=qb(C,k),p=0;p<k;++p)O0(D[p],this,l);return!0};function Nb(t,n,l,p){var d,y,x;if(Yd(l),y=t._events,y===void 0?(y=t._events=Object.create(null),t._eventsCount=0):(y.newListener!==void 0&&(t.emit("newListener",n,l.listener?l.listener:l),y=t._events),x=y[n]),x===void 0)x=y[n]=l,++t._eventsCount;else if(typeof x=="function"?x=y[n]=p?[l,x]:[x,l]:p?x.unshift(l):x.push(l),d=Fb(t),d>0&&x.length>d&&!x.warned){x.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=t,E.type=n,E.count=x.length,DI(E)}return t}jr.prototype.addListener=function(n,l){return Nb(this,n,l,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(n,l){return Nb(this,n,l,!0)};function BI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ub(t,n,l){var p={fired:!1,wrapFn:void 0,target:t,type:n,listener:l},d=BI.bind(p);return d.listener=l,p.wrapFn=d,d}jr.prototype.once=function(n,l){return Yd(l),this.on(n,Ub(this,n,l)),this};jr.prototype.prependOnceListener=function(n,l){return Yd(l),this.prependListener(n,Ub(this,n,l)),this};jr.prototype.removeListener=function(n,l){var p,d,y,x,E;if(Yd(l),d=this._events,d===void 0)return this;if(p=d[n],p===void 0)return this;if(p===l||p.listener===l)--this._eventsCount===0?this._events=Object.create(null):(delete d[n],d.removeListener&&this.emit("removeListener",n,p.listener||l));else if(typeof p!="function"){for(y=-1,x=p.length-1;x>=0;x--)if(p[x]===l||p[x].listener===l){E=p[x].listener,y=x;break}if(y<0)return this;y===0?p.shift():FI(p,y),p.length===1&&(d[n]=p[0]),d.removeListener!==void 0&&this.emit("removeListener",n,E||l)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(n){var l,p,d;if(p=this._events,p===void 0)return this;if(p.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):p[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete p[n]),this;if(arguments.length===0){var y=Object.keys(p),x;for(d=0;d<y.length;++d)x=y[d],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(l=p[n],typeof l=="function")this.removeListener(n,l);else if(l!==void 0)for(d=l.length-1;d>=0;d--)this.removeListener(n,l[d]);return this};function Vb(t,n,l){var p=t._events;if(p===void 0)return[];var d=p[n];return d===void 0?[]:typeof d=="function"?l?[d.listener||d]:[d]:l?NI(d):qb(d,d.length)}jr.prototype.listeners=function(n){return Vb(this,n,!0)};jr.prototype.rawListeners=function(n){return Vb(this,n,!1)};jr.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):jb.call(t,n)};jr.prototype.listenerCount=jb;function jb(t){var n=this._events;if(n!==void 0){var l=n[t];if(typeof l=="function")return 1;if(l!==void 0)return l.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?Kf(this._events):[]};function qb(t,n){for(var l=new Array(n),p=0;p<n;++p)l[p]=t[p];return l}function FI(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function NI(t){for(var n=new Array(t.length),l=0;l<n.length;++l)n[l]=t[l].listener||t[l];return n}function UI(t,n){return new Promise(function(l,p){function d(x){t.removeListener(n,y),p(x)}function y(){typeof t.removeListener=="function"&&t.removeListener("error",d),l([].slice.call(arguments))}Hb(t,n,y,{once:!0}),n!=="error"&&VI(t,d,{once:!0})})}function VI(t,n,l){typeof t.on=="function"&&Hb(t,"error",n,l)}function Hb(t,n,l,p){if(typeof t.on=="function")p.once?t.once(n,l):t.on(n,l);else if(typeof t.addEventListener=="function")t.addEventListener(n,function d(y){p.once&&t.removeEventListener(n,d),l(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var jI=Zy.exports,qI={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function HI(t){var n=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n?{key:n[1],value:n[2]}:null}function $I(t){var n=t.match(/<?([^>]*)>(.*)/);if(!n)return null;var l=n[1],p=n[2].split(";"),d=null,y=p.reduce(function(x,E){var C=HI(E);return C?C.key==="rel"?(d||(d=C.value),x):(x[C.key]=C.value,x):x},{});return d?{url:l,rel:d,params:y}:null}function ZI(t){return t?t.split(/,\s*</).reduce(function(n,l){var p=$I(l);if(!p)return n;var d=p.rel.split(/\s+/);return d.forEach(function(y){n[y]||(n[y]={url:p.url,params:p.params})}),n},{}):{}}var GI=ZI,WI=GI;function Gy(t,n){this.request=t,this.headers=n.headers,this.rawBody=n.body,this.statusCode=n.statusCode;try{this.body=JSON.parse(n.body||"{}")}catch{this.body=n.body}this.links=WI(this.headers.link)}Gy.prototype.hasNextPage=function(){return!!this.links.next};Gy.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var KI=Gy,Qd={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},B0=Qd;function XI(t){var n=t.type||B0.ERROR_HTTP,l;if(t.body)try{l=JSON.parse(t.body)}catch{l=t.body}else l=null;var p=t.message||null;p||(typeof l=="string"?p=l:l&&typeof l.message=="string"?p=l.message:n===B0.ERROR_REQUEST_ABORTED&&(p="Request aborted")),this.message=p,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=l}var JI=XI;function YI(t){var n=t.indexOf(":"),l=t.substring(0,n).trim().toLowerCase(),p=t.substring(n+1).trim();return{name:l,value:p}}function QI(t){var n={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(l){var p=YI(l);n[p.name]=p.value}),n}var ek=QI,tk=KI,F0=JI,sg=Qd,rk=ek,gd={};function nk(t){var n=gd[t.id];n&&(n.abort(),delete gd[t.id])}function ik(t,n){return new tk(t,{body:n.response,headers:rk(n.getAllResponseHeaders()),statusCode:n.status})}function N0(t){var n=t.total,l=t.loaded,p=100*l/n;return{total:n,transferred:l,percent:p}}function $b(t,n){return new Promise(function(l,p){n.onprogress=function(x){t.emitter.emit(sg.EVENT_PROGRESS_DOWNLOAD,N0(x))};var d=t.file;d&&(n.upload.onprogress=function(x){t.emitter.emit(sg.EVENT_PROGRESS_UPLOAD,N0(x))}),n.onerror=function(x){p(x)},n.onabort=function(){var x=new F0({request:t,type:sg.ERROR_REQUEST_ABORTED});p(x)},n.onload=function(){if(delete gd[t.id],n.status<200||n.status>=400){var x=new F0({request:t,body:n.response,statusCode:n.status});p(x);return}l(n)};var y=t.body;typeof y=="string"?n.send(y):y?n.send(JSON.stringify(y)):d?n.send(d):n.send(),gd[t.id]=n}).then(function(l){return ik(t,l)})}function Zb(t,n){var l=t.url(n),p=new window.XMLHttpRequest;return p.open(t.method,l),Object.keys(t.headers).forEach(function(d){p.setRequestHeader(d,t.headers[d])}),p}function ok(t){return Promise.resolve().then(function(){var n=Zb(t,t.client.accessToken);return $b(t,n)})}var ak={browserAbort:nk,sendRequestXhr:$b,browserSend:ok,createRequestXhr:Zb},yd={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */yd.exports;(function(t,n){(function(l){var p=n,d=t&&t.exports==p&&t,y=typeof yo=="object"&&yo;(y.global===y||y.window===y)&&(l=y);var x=function(ne){this.message=ne};x.prototype=new Error,x.prototype.name="InvalidCharacterError";var E=function(ne){throw new x(ne)},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=/[\t\n\f\r ]/g,D=function(ne){ne=String(ne).replace(k,"");var ve=ne.length;ve%4==0&&(ne=ne.replace(/==?$/,""),ve=ne.length),(ve%4==1||/[^+a-zA-Z0-9/]/.test(ne))&&E("Invalid character: the string to be decoded is not correctly encoded.");for(var fe=0,pe,ue,be="",_e=-1;++_e<ve;)ue=C.indexOf(ne.charAt(_e)),pe=fe%4?pe*64+ue:ue,fe++%4&&(be+=String.fromCharCode(255&pe>>(-2*fe&6)));return be},N=function(ne){ne=String(ne),/[^\0-\xFF]/.test(ne)&&E("The string to be encoded contains characters outside of the Latin1 range.");for(var ve=ne.length%3,fe="",pe=-1,ue,be,_e,Oe,f=ne.length-ve;++pe<f;)ue=ne.charCodeAt(pe)<<16,be=ne.charCodeAt(++pe)<<8,_e=ne.charCodeAt(++pe),Oe=ue+be+_e,fe+=C.charAt(Oe>>18&63)+C.charAt(Oe>>12&63)+C.charAt(Oe>>6&63)+C.charAt(Oe&63);return ve==2?(ue=ne.charCodeAt(pe)<<8,be=ne.charCodeAt(++pe),Oe=ue+be,fe+=C.charAt(Oe>>10)+C.charAt(Oe>>4&63)+C.charAt(Oe<<2&63)+"="):ve==1&&(Oe=ne.charCodeAt(pe),fe+=C.charAt(Oe>>2)+C.charAt(Oe<<4&63)+"=="),fe},ee={encode:N,decode:D,version:"0.1.0"};if(p&&!p.nodeType)if(d)d.exports=ee;else for(var se in ee)ee.hasOwnProperty(se)&&(p[se]=ee[se]);else l.base64=ee})(yo)})(yd,yd.exports);var sk=yd.exports,lk=sk,lg={};function uk(t){if(lg[t])return lg[t];var n=t.split("."),l=n[0],p=n[1];if(!p)throw new Error("Invalid token");var d=ck(p),y={usage:l,user:d.u};return zl(d,"a")&&(y.authorization=d.a),zl(d,"exp")&&(y.expires=d.exp*1e3),zl(d,"iat")&&(y.created=d.iat*1e3),zl(d,"scopes")&&(y.scopes=d.scopes),zl(d,"client")&&(y.client=d.client),zl(d,"ll")&&(y.lastLogin=d.ll),zl(d,"iu")&&(y.impersonator=d.iu),lg[t]=y,y}function ck(t){try{return JSON.parse(lk.decode(t))}catch{throw new Error("Invalid token")}}function zl(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var Gb=uk,Wb={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,l="~";function p(){}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(l=!1));function d(C,k,D){this.fn=C,this.context=k,this.once=D||!1}function y(C,k,D,N,ee){if(typeof D!="function")throw new TypeError("The listener must be a function");var se=new d(D,N||C,ee),ne=l?l+k:k;return C._events[ne]?C._events[ne].fn?C._events[ne]=[C._events[ne],se]:C._events[ne].push(se):(C._events[ne]=se,C._eventsCount++),C}function x(C,k){--C._eventsCount===0?C._events=new p:delete C._events[k]}function E(){this._events=new p,this._eventsCount=0}E.prototype.eventNames=function(){var k=[],D,N;if(this._eventsCount===0)return k;for(N in D=this._events)n.call(D,N)&&k.push(l?N.slice(1):N);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(D)):k},E.prototype.listeners=function(k){var D=l?l+k:k,N=this._events[D];if(!N)return[];if(N.fn)return[N.fn];for(var ee=0,se=N.length,ne=new Array(se);ee<se;ee++)ne[ee]=N[ee].fn;return ne},E.prototype.listenerCount=function(k){var D=l?l+k:k,N=this._events[D];return N?N.fn?1:N.length:0},E.prototype.emit=function(k,D,N,ee,se,ne){var ve=l?l+k:k;if(!this._events[ve])return!1;var fe=this._events[ve],pe=arguments.length,ue,be;if(fe.fn){switch(fe.once&&this.removeListener(k,fe.fn,void 0,!0),pe){case 1:return fe.fn.call(fe.context),!0;case 2:return fe.fn.call(fe.context,D),!0;case 3:return fe.fn.call(fe.context,D,N),!0;case 4:return fe.fn.call(fe.context,D,N,ee),!0;case 5:return fe.fn.call(fe.context,D,N,ee,se),!0;case 6:return fe.fn.call(fe.context,D,N,ee,se,ne),!0}for(be=1,ue=new Array(pe-1);be<pe;be++)ue[be-1]=arguments[be];fe.fn.apply(fe.context,ue)}else{var _e=fe.length,Oe;for(be=0;be<_e;be++)switch(fe[be].once&&this.removeListener(k,fe[be].fn,void 0,!0),pe){case 1:fe[be].fn.call(fe[be].context);break;case 2:fe[be].fn.call(fe[be].context,D);break;case 3:fe[be].fn.call(fe[be].context,D,N);break;case 4:fe[be].fn.call(fe[be].context,D,N,ee);break;default:if(!ue)for(Oe=1,ue=new Array(pe-1);Oe<pe;Oe++)ue[Oe-1]=arguments[Oe];fe[be].fn.apply(fe[be].context,ue)}}return!0},E.prototype.on=function(k,D,N){return y(this,k,D,N,!1)},E.prototype.once=function(k,D,N){return y(this,k,D,N,!0)},E.prototype.removeListener=function(k,D,N,ee){var se=l?l+k:k;if(!this._events[se])return this;if(!D)return x(this,se),this;var ne=this._events[se];if(ne.fn)ne.fn===D&&(!ee||ne.once)&&(!N||ne.context===N)&&x(this,se);else{for(var ve=0,fe=[],pe=ne.length;ve<pe;ve++)(ne[ve].fn!==D||ee&&!ne[ve].once||N&&ne[ve].context!==N)&&fe.push(ne[ve]);fe.length?this._events[se]=fe.length===1?fe[0]:fe:x(this,se)}return this},E.prototype.removeAllListeners=function(k){var D;return k?(D=l?l+k:k,this._events[D]&&x(this,D)):(this._events=new p,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=l,E.EventEmitter=E,t.exports=E})(Wb);var pk=Wb.exports;function hk(t){return t.map(encodeURIComponent).join(",")}function Kb(t){return Array.isArray(t)?hk(t):encodeURIComponent(String(t))}function Xb(t,n,l){if(l===!1||l===null)return t;var p=/\?/.test(t)?"&":"?",d=encodeURIComponent(n);return l!==void 0&&l!==""&&l!==!0&&(d+="="+Kb(l)),""+t+p+d}function fk(t,n){if(!n)return t;var l=t;return Object.keys(n).forEach(function(p){var d=n[p];d!==void 0&&(Array.isArray(d)&&(d=d.filter(function(y){return y!=null}).join(",")),l=Xb(l,p,d))}),l}function dk(t,n){if(!n||t.slice(0,4)==="http")return t;var l=t[0]==="/"?"":"/";return""+n.replace(/\/$/,"")+l+t}function mk(t,n){return n?t.replace(/\/:([a-zA-Z0-9]+)/g,function(l,p){var d=n[p];if(d===void 0)throw new Error("Unspecified route parameter "+p);var y=Kb(d);return"/"+y}):t}var gk={appendQueryObject:fk,appendQueryParam:Xb,prependOrigin:dk,interpolateRouteParams:mk},yk=Gb,Wy=kc,vk=pk,Nf=gk,U0=Qd,_k=1;function $s(t,n){if(!t)throw new Error("MapiRequest requires a client");if(!n||!n.path||!n.method)throw new Error("MapiRequest requires an options object with path and method properties");var l={};n.body&&(l["content-type"]="application/json");var p=Wy(l,n.headers),d=Object.keys(p).reduce(function(y,x){return y[x.toLowerCase()]=p[x],y},{});this.id=_k++,this._options=n,this.emitter=new vk,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=n.path,this.method=n.method,this.origin=n.origin||t.origin,this.query=n.query||{},this.params=n.params||{},this.body=n.body||null,this.file=n.file||null,this.encoding=n.encoding||"utf8",this.sendFileAs=n.sendFileAs||null,this.headers=d}$s.prototype.url=function(n){var l=Nf.prependOrigin(this.path,this.origin);l=Nf.appendQueryObject(l,this.query);var p=this.params,d=n??this.client.accessToken;if(d){l=Nf.appendQueryParam(l,"access_token",d);var y=yk(d).user;p=Wy({ownerId:y},p)}return l=Nf.interpolateRouteParams(l,p),l};$s.prototype.send=function(){var n=this;if(n.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return n.sent=!0,n.client.sendRequest(n).then(function(l){return n.response=l,n.emitter.emit(U0.EVENT_RESPONSE,l),l},function(l){throw n.error=l,n.emitter.emit(U0.EVENT_ERROR,l),l})};$s.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};$s.prototype.eachPage=function(n){var l=this;function p(x){function E(){delete l._nextPageRequest;var C=x.nextPage();C&&(l._nextPageRequest=C,y(C))}n(null,x,E)}function d(x){n(x,null,function(){})}function y(x){x.send().then(p,d)}y(this)};$s.prototype.clone=function(){return this._extend()};$s.prototype._extend=function(n){var l=Wy(this._options,n);return new $s(this.client,l)};var xk=$s,bk=Gb,wk=xk,Ek=Qd;function Jb(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");bk(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||Ek.API_ORIGIN}Jb.prototype.createRequest=function(n){return new wk(this,n)};var Yb=Jb,Qb=ak,ew=Yb;function bc(t){ew.call(this,t)}bc.prototype=Object.create(ew.prototype);bc.prototype.constructor=bc;bc.prototype.sendRequest=Qb.browserSend;bc.prototype.abortRequest=Qb.browserAbort;function Sk(t){return new bc(t)}var tw=Sk,Tk=tw,Ck=Tk,Ak=Object.prototype.toString,Ik=function(t){var n;return Ak.call(t)==="[object Object]"&&(n=Object.getPrototypeOf(t),n===null||n===Object.getPrototypeOf({}))},kk=Ik,Pk=kc,rw="value",ug=`
  `,Wr={};Wr.assert=function(t,n){return n=n||{},function(l){var p=Zs(t,l);if(p){var d=Ky(p,n);throw n.apiName&&(d=n.apiName+": "+d),new Error(d)}}};Wr.shape=function(n){var l=Rk(n);return function(d){var y=Zs(Wr.plainObject,d);if(y)return y;for(var x,E,C=[],k=0;k<l.length;k++)x=l[k].key,E=l[k].value,y=Zs(E,d[x]),y&&C.push([x].concat(y));return C.length<2?C[0]:function(D){C=C.map(function(se){var ne=se[0],ve=Ky(se,D).split(`
`).join(ug);return"- "+ne+": "+ve});var N=D.path.join("."),ee=N===rw?"":" of "+N;return"The following properties"+ee+" have invalid values:"+ug+C.join(ug)}}};Wr.strictShape=function(n){var l=Wr.shape(n);return function(d){var y=l(d);if(y)return y;var x=Object.keys(d).reduce(function(E,C){return n[C]===void 0&&E.push(C),E},[]);if(x.length!==0)return function(){return"The following keys are invalid: "+x.join(", ")}}};Wr.arrayOf=function(n){return nw(n)};Wr.tuple=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return nw(n)};function nw(t){var n=Array.isArray(t),l=function(p){return n?t[p]:t};return function(d){var y=Zs(Wr.plainArray,d);if(y)return y;if(n&&d.length!==t.length)return"an array with "+t.length+" items";for(var x=0;x<d.length;x++)if(y=Zs(l(x),d[x]),y)return[x].concat(y)}}Wr.required=function(n){function l(p){return p==null?function(d){return iw(d,ow(d.path)?"cannot be undefined/null.":"is required.")}:n.apply(this,arguments)}return l.__required=!0,l};Wr.oneOfType=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(p){var d=n.map(function(y){return Zs(y,p)}).filter(Boolean);if(d.length===n.length)return d.every(function(y){return y.length===1&&typeof y[0]=="string"})?Mk(d.map(function(y){return y[0]})):d.reduce(function(y,x){return x.length>y.length?x:y})}};Wr.equal=function(n){return function(p){if(p!==n)return JSON.stringify(n)}};Wr.oneOf=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),l=n.map(function(p){return Wr.equal(p)});return Wr.oneOfType.apply(this,l)};Wr.range=function(n){var l=n[0],p=n[1];return function(y){var x=Zs(Wr.number,y);if(x||y<l||y>p)return"number between "+l+" & "+p+" (inclusive)"}};Wr.any=function(){};Wr.boolean=function(n){if(typeof n!="boolean")return"boolean"};Wr.number=function(n){if(typeof n!="number")return"number"};Wr.plainArray=function(n){if(!Array.isArray(n))return"array"};Wr.plainObject=function(n){if(!kk(n))return"object"};Wr.string=function(n){if(typeof n!="string")return"string"};Wr.func=function(n){if(typeof n!="function")return"function"};function Zs(t,n){if(!(n==null&&!t.hasOwnProperty("__required"))){var l=t(n);if(l)return Array.isArray(l)?l:[l]}}function Ky(t,n){var l=t.length,p=t[l-1],d=t.slice(0,l-1);return d.length===0&&(d=[rw]),n=Pk(n,{path:d}),typeof p=="function"?p(n):iw(n,zk(p))}function Mk(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function zk(t){return"must be "+Lk(t)+"."}function Lk(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function iw(t,n){var l=ow(t.path),p=t.path.join(".")+" "+n,d=l?"Item at position ":"";return d+p}function ow(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function Rk(t){return Object.keys(t||{}).map(function(n){return{key:n,value:t[n]}})}Wr.validate=Zs;Wr.processMessage=Ky;var Ok=Wr,Dk=kc,pc=Ok;function Bk(t){if(typeof window<"u")return t instanceof yo.Blob||t instanceof yo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function Fk(t,n){return pc.assert(pc.strictShape(t),n)}function Nk(t){var n="date";if(typeof t=="boolean")return n;try{var l=new Date(t);if(l.getTime&&isNaN(l.getTime()))return n}catch{return n}}function Uk(t){return pc.tuple(pc.number,pc.number)(t)}var Vk=Dk(pc,{file:Bk,date:Nk,coordinates:Uk,assertShape:Fk});function jk(t,n){var l=function(p,d){return n.indexOf(p)!==-1&&d!==void 0};return typeof n=="function"&&(l=n),Object.keys(t).filter(function(p){return l(p,t[p])}).reduce(function(p,d){return p[d]=t[d],p},{})}var qk=jk;function Hk(t,n){return Object.keys(t).reduce(function(l,p){return l[p]=n(p,t[p]),l},{})}var $k=Hk,Zk=$k;function Gk(t){return Zk(t,function(n,l){return typeof l=="boolean"?JSON.stringify(l):l})}var Wk=Gk,Kk=Yb,Xk=tw;function Jk(t){return function(n){var l;Kk.prototype.isPrototypeOf(n)?l=n:l=Xk(n);var p=Object.create(t);return p.client=l,p}}var Yk=Jk,aw=kc,yr=Vk,vd=qk,sw=Wk,Qk=Yk,Xy={},lw=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Xy.forwardGeocode=function(t){yr.assertShape({query:yr.required(yr.string),mode:yr.oneOf("mapbox.places","mapbox.places-permanent"),countries:yr.arrayOf(yr.string),proximity:yr.oneOf(yr.coordinates,"ip"),types:yr.arrayOf(yr.oneOf(lw)),autocomplete:yr.boolean,bbox:yr.arrayOf(yr.number),limit:yr.number,language:yr.arrayOf(yr.string),routing:yr.boolean,fuzzyMatch:yr.boolean,worldview:yr.string})(t),t.mode=t.mode||"mapbox.places";var n=sw(aw({country:t.countries},vd(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:vd(t,["mode","query"]),query:n})};Xy.reverseGeocode=function(t){yr.assertShape({query:yr.required(yr.coordinates),mode:yr.oneOf("mapbox.places","mapbox.places-permanent"),countries:yr.arrayOf(yr.string),types:yr.arrayOf(yr.oneOf(lw)),bbox:yr.arrayOf(yr.number),limit:yr.number,language:yr.arrayOf(yr.string),reverseMode:yr.oneOf("distance","score"),routing:yr.boolean,worldview:yr.string})(t),t.mode=t.mode||"mapbox.places";var n=sw(aw({country:t.countries},vd(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:vd(t,["mode","query"]),query:n})};var eP=Qk(Xy);let tP="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",uw=t=>crypto.getRandomValues(new Uint8Array(t)),cw=(t,n,l)=>{let p=(2<<Math.log(t.length-1)/Math.LN2)-1,d=-~(1.6*p*n/t.length);return(y=n)=>{let x="";for(;;){let E=l(d),C=d;for(;C--;)if(x+=t[E[C]&p]||"",x.length===y)return x}}},rP=(t,n=21)=>cw(t,n,uw),nP=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,l)=>(l&=63,l<36?n+=l.toString(36):l<62?n+=(l-26).toString(36).toUpperCase():l>62?n+="-":n+="_",n),"");const iP=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:rP,customRandom:cw,nanoid:nP,random:uw,urlAlphabet:tP},Symbol.toStringTag,{value:"Module"})),oP=v5(iP);var aP=oP.nanoid;function pw(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}pw.prototype={select:function(t,n){var l=this.getSelectedIndex(t,n),p=this.getEventPayload("search.select",n);if(p.resultIndex=l,p.resultPlaceName=t.place_name,p.resultId=t.id,!(l===this.lastSentIndex&&p.queryString===this.lastSentInput||l==-1)&&(this.lastSentIndex=l,this.lastSentInput=p.queryString,!!p.queryString))return this.push(p)},start:function(t){var n=this.getEventPayload("search.start",t);if(n.queryString)return this.push(n)},keyevent:function(t,n){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var l=this.getEventPayload("search.keystroke",n);if(l.lastAction=t.key,!!l.queryString)return this.push(l)}},send:function(t,n){if(!this.enableEventLogging)return n?n():void 0;var l=this.getRequestOptions(t);this.request(l,function(p){if(p)return this.handleError(p,n);if(n)return n()}.bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var n={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return n},getEventPayload:function(t,n){var l;n.options.proximity?typeof n.options.proximity=="object"?l=[n.options.proximity.longitude,n.options.proximity.latitude]:n.options.proximity==="ip"?l=[999,999]:l=n.options.proximity:l=null;var p=n._map?n._map.getZoom():void 0,d={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:n.options.autocomplete,fuzzyMatch:n.options.fuzzyMatch,proximity:l,limit:n.options.limit,routing:n.options.routing,worldview:n.options.worldview,mapZoom:p,keyboardLocale:this.locale};return t==="search.select"?d.queryString=n.inputString:t!="search.select"&&n._inputEl?d.queryString=n._inputEl.value:d.queryString=n.inputString,d},request:function(t,n){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(this.readyState==4)return this.status==204?n(null):n(this.statusText)},l.open(t.method,t.host+"/"+t.path,!0);for(var p in t.headers){var d=t.headers[p];l.setRequestHeader(p,d)}l.send(t.body)},handleError:function(t,n){if(n)return n(t)},generateSessionID:function(){return aP()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,n){if(n._typeahead){var l=n._typeahead.data,p=t.id,d=l.map(function(x){return x.id}),y=d.indexOf(p);return y}},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com"||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,n){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||n)&&this.flush()},remove:function(){this.flush()}};var sP=pw,lP={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},uP={placeholder:lP},hw={exports:{}};(function(t){(function(n,l,p){t.exports?t.exports=p():n[l]=p()})(yo,"subtag",function(){var n="",l=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function p(C){return C.match(l)||[]}function d(C){return p(C).filter(function(k,D){return k&&D})}function y(C){return C=p(C),{language:C[1]||n,extlang:C[2]||n,script:C[3]||n,region:C[4]||n}}function x(C,k,D){Object.defineProperty(C,k,{value:D,enumerable:!0})}function E(C,k,D){function N(ee){return p(ee)[C]||n}x(N,"pattern",k),x(y,D,N)}return E(1,/^[a-zA-Z]{2,3}$/,"language"),E(2,/^[a-zA-Z]{3}$/,"extlang"),E(3,/^[a-zA-Z]{4}$/,"script"),E(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),x(y,"split",d),y})})(hw);var cP=hw.exports;function fw(){}fw.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(n,l){window.navigator.geolocation.getCurrentPosition(n,l,t)})}};var pP=fw;function hP(t,n){const l=dw(t),p=["address","street","place","country"];var d;if(typeof n=="function")return n(l);const y=p.indexOf(n);return y===-1?d=p:d=p.slice(y),d.reduce(function(x,E){return l[E]?(x!==""&&(x=x+", "),x+l[E]):x},"")}function dw(t){const n=t.address||"",l=t.text||"",p=t.place_name||"",y={address:p.split(",")[0],houseNumber:n,street:l,placeName:p};return t.context.forEach(function(x){const E=x.id.split(".")[0];y[E]=x.text}),y}const fP=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var dP={transformFeatureToGeolocationText:hP,getAddressInfo:dw,REVERSE_GEOCODE_COORD_RGX:fP},mP=yI,gP=OI,Ll=kc,yP=jI.EventEmitter,V0=qI,cg=Ck,pg=eP,vP=sP,_P=uP,xP=cP,bP=pP,j0=dP;const Ls={FORWARD:0,LOCAL:1,REVERSE:2};function wP(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function mw(t){this._eventEmitter=new yP,this.options=Ll({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new bP}mw.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var n=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+n[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+n.splice(1,n.length).join(",")+"</div></div>"}},addTo:function(t){function n(l,p){if(!document.body.contains(p))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const d=l.onAdd();p.appendChild(d)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)n(this,t);else if(typeof t=="string"){const l=document.querySelectorAll(t);if(l.length===0)throw new Error("Element ",t,"not found.");if(l.length>1)throw new Error("Geocoder can only be added to a single html element");n(this,l[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=pg(cg({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new vP(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var n=this.container=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var l=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",gP(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(k){this.eventManager.keyevent(k,this)}.bind(this));var p=document.createElement("div");p.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(d),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),p.appendChild(this._clearEl),p.appendChild(this._loadingEl),n.appendChild(l),n.appendChild(this._inputEl),n.appendChild(p),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var y=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(y),p.appendChild(this._geolocateEl),this._showGeolocateButton()}var x=this._typeahead=new mP(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),x.getItemValue=this.options.getItemValue;var E=x.list.draw,C=this._footerNode=wP();return x.list.draw=function(){E.call(this),C.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),C.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(C)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),n},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const n={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(n),this._fly(n),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(n),this._showClearButton(),this.fresh=!1;const l={limit:1,language:[this.options.language],query:n.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const p=n.geometry.coordinates[0]+","+n.geometry.coordinates[1];this._setInputValue(p),this._eventEmitter.emit("result",{result:n})}else this.geocoderService.reverseGeocode(l).send().then(function(p){const d=p.body.features[0];if(d){const y=j0.transformFeatureToGeolocationText(d,this.options.addressAccuracy);this._setInputValue(y),d.user_coordinates=n.geometry.coordinates,this._eventEmitter.emit("result",{result:d})}else this._eventEmitter.emit("result",{result:{user_coordinates:n.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,n){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");return l.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),l.setAttribute("viewBox","0 0 18 18"),l.setAttribute("xml:space","preserve"),l.setAttribute("width",18),l.setAttribute("height",18),l.innerHTML=n,l},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var n=(t.clipboardData||window.clipboardData).getData("text");n.length>=this.options.minLength&&this._geocode(n)},_onKeyDown:function(t){var n=27,l=9;if(t.keyCode===n&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var p=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,d=p?p.value:"";if(!d)return this.fresh=!0,t.keyCode!==l&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[l,n,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&p.value.length>=this.options.minLength&&this._geocode(p.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var n;if(t.properties&&V0[t.properties.short_code])n=Ll({},this.options.flyTo),this._map&&this._map.fitBounds(V0[t.properties.short_code].bbox,n);else if(t.bbox){var l=t.bbox;n=Ll({},this.options.flyTo),this._map&&this._map.fitBounds([[l[0],l[1]],[l[2],l[3]]],n)}else{var p={zoom:this.options.zoom};n=Ll({},p,this.options.flyTo),t.center?n.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(n.center=t.geometry.coordinates),this._map&&this._map.flyTo(n)}},_requestType:function(t,n){var l;return t.localGeocoderOnly?l=Ls.LOCAL:t.reverseGeocode&&j0.REVERSE_GEOCODE_COORD_RGX.test(n)?l=Ls.REVERSE:l=Ls.FORWARD,l},_setupConfig:function(t,n){const l=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],p=/[\s,]+/;var d=this,y=l.reduce(function(E,C){if(d.options[C]===void 0||d.options[C]===null)return E;["countries","types","language"].indexOf(C)>-1?E[C]=d.options[C].split(p):E[C]=d.options[C];const k=typeof d.options[C].longitude=="number"&&typeof d.options[C].latitude=="number";if(C==="proximity"&&k){const D=d.options[C].longitude,N=d.options[C].latitude;E[C]=[D,N]}return E},{});switch(t){case Ls.REVERSE:{var x=n.split(p).map(function(E){return parseFloat(E,10)});d.options.flipCoordinates||x.reverse(),y.types&&y.types[0],y=Ll(y,{query:x,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(E){E in y&&delete y[E]})}break;case Ls.FORWARD:{const E=n.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(E)&&(n=n.replace(/,/g," ")),y=Ll(y,{query:n})}break}return y},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const n=this._requestType(this.options,t),l=this._setupConfig(n,t);var p;switch(n){case Ls.LOCAL:p=Promise.resolve();break;case Ls.FORWARD:p=this.geocoderService.forwardGeocode(l).send();break;case Ls.REVERSE:p=this.geocoderService.reverseGeocode(l).send();break}var d=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],y=[],x=null;return p.catch(function(E){x=E}.bind(this)).then(function(E){this._hideLoadingIcon();var C={};return E?E.statusCode=="200"&&(C=E.body,C.request=E.request,C.headers=E.headers):C={type:"FeatureCollection",features:[]},C.config=l,this.fresh&&(this.eventManager.start(this),this.fresh=!1),C.features=C.features?d.concat(C.features):d,this.options.externalGeocoder?(y=this.options.externalGeocoder(t,C.features)||Promise.resolve([]),y.then(function(k){return C.features=C.features?k.concat(C.features):k,C},function(){return C})):C}.bind(this)).then(function(E){if(x)throw x;this.options.filter&&E.features.length&&(E.features=E.features.filter(this.options.filter)),E.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",E),this._typeahead.update(E.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",E))}.bind(this)).catch(function(E){this._hideLoadingIcon(),this._hideAttribution(),d.length&&this.options.localGeocoder||y.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(d)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:d}),this._eventEmitter.emit("error",{error:E})}.bind(this)),p},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var n=this;t.relatedTarget&&n._clear(t)},_onQueryResult:function(t){var n=t.body;if(n.features.length){var l=n.features[0];this._typeahead.selected=l,this._inputEl.value=l.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],n=xP.language(t),l=_P.placeholder[n];if(l)return l}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t,n=!0){return this.options.proximity=t,n&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var n=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||n,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=pg(cg({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=pg(cg({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var n={color:"#4668F2"},l=Ll({},n,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(l),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,n){return this._eventEmitter.on(t,n),this},off:function(t,n){return this._eventEmitter.removeListener(t,n),this.eventManager.remove(),this}};var EP=mw;const gw=y5(EP),SP={props:["latitude","longitude","location","rating"],methods:{submit(){const t=this,n=this.$refs.form,l=new FormData(n);Yi.post("/properties",l).then(p=>t.$emit("show-houses")).catch(p=>console.log(p))}}},TP=Y1('<div class="form-group"><label for="formGroupExampleInput">Title</label><input type="text" class="form-control" id="formGroupExampleInput" name="property[title]" required></div><div class="row"><div class="form-group col-6"><label for="formGroupExampleInput2">Price（￥）</label><input type="number" class="form-control" id="Price" name="property[price]" required></div><div class="form-group col-3"><label for="formGroupExampleInput2">Rooms</label><input type="number" class="form-control" id="Rooms" name="property[rooms]" required></div><div class="form-group col-3"><label for="formGroupExampleInput2">Bathrooms</label><input type="number" class="form-control" id="Bathrooms" name="property[bathrooms]" required></div></div><div class="form-group"><label for="exampleFormControlFile1">Photo</label><input type="file" class="form-control-file" id="exampleFormControlFile1" multiple name="property[avatar]"></div>',3),CP=["value"],AP=["value"],IP=["value"],kP=["value"];function PP(t,n,l,p,d,y){return nn(),Ci("form",{ref:"form",onSubmit:n[0]||(n[0]=Sx(()=>{},["prevent","stop"]))},[TP,_t("input",{type:"hidden",name:"property[latitude]",value:l.latitude},null,8,CP),_t("input",{type:"hidden",name:"property[longitude]",value:l.longitude},null,8,AP),_t("input",{type:"hidden",name:"property[address]",value:l.location},null,8,IP),_t("input",{type:"hidden",name:"property[rating]",value:l.rating},null,8,kP)],544)}const yw=Ea(SP,[["render",PP]]),MP={props:["current-location","access-token"],methods:{search(){const t=parseFloat(this.currentLocation[0])-.02,n=parseFloat(this.currentLocation[1])-.02,l=parseFloat(this.currentLocation[0])+.02,p=parseFloat(this.currentLocation[1])+.02,d=`bbox=${t},${n},${l},${p}`;console.log(this.currentLocation),console.log(d),console.log(this.currentLocation),Yi.get(`https://api.mapbox.com/search/v1/forward/クリニック?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"clinics",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/生活>小学校?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"elemSchools",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/医療>病院?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"hospitals",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/ショップ>コンビニ?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"konbini",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/生活>幼稚園?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"kindergardens",data:y.data})})}}};function zP(t,n,l,p,d,y){return nn(),Ci("button",{class:"btn btn-info",onClick:n[0]||(n[0]=(...x)=>y.search&&y.search(...x))},"Search places nearby")}const vw=Ea(MP,[["render",zP]]),LP={props:["count"],computed:{rating(){let t=0;for(const n in this.count)t=t+this.count[n];return t>=40?10:6+t/10}}},RP={class:"mt-1"},OP={class:"text-lg badge badge-primary m-1"},DP={class:"text-lg badge badge-warning m-1"},BP={class:"text-lg badge badge-danger m-1"},FP={class:"text-lg badge badge-success m-1"},NP={class:"text-lg badge badge-info m-1"};function UP(t,n,l,p,d,y){return nn(),Ci(Zn,null,[_t("p",RP,[_t("span",OP,"elementary schools: "+Si(l.count.elemSchools),1),_t("span",DP,"konbini: "+Si(l.count.konbini),1),_t("span",BP,"hospitals: "+Si(l.count.hospitals),1),_t("span",FP,"clinics: "+Si(l.count.clinics),1),_t("span",NP,"kindergardens: "+Si(l.count.kindergardens),1)]),_t("h6",null,"Average rating: "+Si(y.rating)+" / 10",1)],64)}const _w=Ea(LP,[["render",UP]]);const VP={props:["map","center"],components:{SearchButton:vw,Rating:_w},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,marker:!1,editPositionFlg:!1,searchedFlg:!1,locationFound:!1,addressEdited:!0,count:{clinics:0,hospitals:0,elementarySchools:0,konbini:0,kindergardens:0}}},mounted(){this.init()},computed:{btnEditPositionText(){return this.editPositionFlg?"Save new position":"Adjust position"},rating(){let t=0;for(const n in this.count)t=t+this.count[n];return t>=40?10:6+t/10}},methods:{locationInput(t){this.addressEdited=!0,this.$emit("location-input",t.target.value)},toggleEditPosition(){this.editPositionFlg,this.editPositionFlg=!this.editPositionFlg},async init(){try{let t=new gw({accessToken:this.access_token,mapboxgl,marker:!1})}catch(t){console.log("map error",t)}},async getLocation(){try{this.loading=!0,console.log(this.center);const t=await Yi.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.center[0]},${this.center[1]}.json?access_token=${this.access_token}&language=ja`);if(this.loading=!1,t.data.features.length==0)throw Error("not found!");this.location=t.data.features[0].place_name}catch(t){this.loading=!1,console.log(t),t.message==="not found!"&&console.log("not found!")}},async searchLngLat(){console.log("click",this.location),this.location&&(this.loading=!0,Yi.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.location}.json?proximity=ip&access_token=${this.access_token}&language=ja`).then(t=>{if(console.log("answer"),this.loading=!1,t.data.features.length===0)throw Error("not found");this.$emit("set-marker",t.data.features[0].center),this.locationFound=!0,this.addressEdited=!1}).catch(t=>{console.log("err"),this.locationFound=!1,t.message=="not found"&&console.log("not found"),console.log(t)}))},showMarkers(t){switch(console.log("found-places search",t),this.searchedFlg=!0,t.type){case"clinics":this.count.clinics=t.data.features.length;break;case"hospitals":this.count.hospitals=t.data.features.length;break;case"elemSchools":this.count.elemSchools=t.data.features.length;break;case"konbini":this.count.konbini=t.data.features.length;break;case"kindergardens":this.count.kindergardens=t.data.features.length;break}this.$emit("found-places",t),this.$emit("rating-update",this.rating)}}},fh=t=>(Cc("data-v-2d51097d"),t=t(),Ac(),t),jP={class:"dislpay-arena"},qP={class:"coordinates-header"},HP=fh(()=>_t("h3",null,"Location",-1)),$P=fh(()=>_t("span",{class:"font-italic"},"Your address will not be displayed to others.",-1)),ZP={class:"form-group"},GP=fh(()=>_t("label",{for:"address"},"Address",-1)),WP=["disabled"],KP={key:2,class:"ml-1 font-italic"},XP=fh(()=>_t("h4",null,"Places nearby",-1)),JP=fh(()=>_t("p",{class:"font-italic"},"Check you location rating!",-1)),YP={key:0};function QP(t,n,l,p,d,y){const x=Go("SearchButton"),E=Go("Rating");return nn(),Ci("div",jP,[_t("div",qP,[HP,$P,_t("div",ZP,[GP,x1(_t("input",{type:"text",class:"form-control location-control my-2",id:"address","onUpdate:modelValue":n[0]||(n[0]=C=>d.location=C),onInput:n[1]||(n[1]=(...C)=>y.locationInput&&y.locationInput(...C))},null,544),[[Wp,d.location]]),d.addressEdited?(nn(),Ci("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:n[2]||(n[2]=(...C)=>y.searchLngLat&&y.searchLngLat(...C))}," Show my house on the map! ")):xa("",!0),d.locationFound&&!d.addressEdited?(nn(),Ci("button",{key:1,type:"button",disabled:d.loading,class:Ec([{disabled:d.loading},"btn btn-outline-info m-1"]),onClick:n[3]||(n[3]=(...C)=>y.toggleEditPosition&&y.toggleEditPosition(...C))},Si(y.btnEditPositionText),11,WP)):xa("",!0),d.editPositionFlg?(nn(),Ci("span",KP,"Move marker")):xa("",!0)]),XP,JP,Mr(x,{disabled:!d.locationFound||d.addressEdited,"access-token":d.access_token,"current-location":l.center,onFoundPlaces:y.showMarkers},null,8,["disabled","access-token","current-location","onFoundPlaces"]),d.locationFound&&d.searchedFlg&&!d.addressEdited?(nn(),Ci("div",YP,[Mr(E,{count:d.count},null,8,["count"])])):xa("",!0)])])}const xw=Ea(VP,[["render",QP],["__scopeId","data-v-2d51097d"]]);const eM={components:{AddPropertyForm:yw,Search:xw},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,center:[132.7445942,35.3665752],map:{},rating:6}},mounted(){this.createMap()},methods:{ratingUpdate(t){this.rating=t},locationInput(t){this.location=t},async createMap(){try{this.map=Hg(this.access_token,"streets");let t=new gw({accessToken:this.access_token,mapboxgl,marker:!1})}catch(t){console.log("map error",t)}},submitForm(){this.$refs.form.submit()},showMarkers({type:t,data:n}){console.log("addproperty");let l="magneta";switch(t){case"hospitals":l="red";break;case"konbini":l="yellow";break;case"elemSchools":l="blue";break;case"clinics":l="green";break;case"kindergardens":l="#17a2b8";break}console.log(this.map.getSource(t)),this.map.getSource(t)?this.map.getSource(t).setData(n):(this.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n.features}}),this.map.addLayer({id:t,type:"circle",source:t,paint:{"circle-radius":10,"circle-color":l,"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":.5}}))},setMarker(t){this.marker&&this.marker.remove();const n=new mapboxgl.Marker({draggable:!0,color:"#D80739"}).setLngLat(t).addTo(this.map);n.on("dragend",l=>{this.center=Object.values(l.target.getLngLat()),console.log("center changed welcome",this.center)}),this.marker=n,this.center=t,this.map.flyTo({center:t,speed:.2})}}},Jy=t=>(Cc("data-v-aaf63e56"),t=t(),Ac(),t),tM={class:"main"},rM={class:"sidebar col-4 py-3"},nM={class:"d-flex justify-content-between align-items-center"},iM=Jy(()=>_t("h2",null,"Add house",-1)),oM=Jy(()=>_t("h3",null,"General",-1)),aM=Jy(()=>_t("div",{class:"map-wrapper"},[_t("div",{id:"map"})],-1));function sM(t,n,l,p,d,y){const x=Go("AddPropertyForm"),E=Go("Search");return nn(),Ci("div",tM,[_t("div",rM,[_t("div",null,[_t("div",nM,[iM,_t("button",{class:"btn btn-outline-info",onClick:n[0]||(n[0]=C=>t.$emit("show-houses"))},"See all houses")]),oM,Mr(x,{ref:"form",latitude:d.center[1],longitude:d.center[0],location:d.location,rating:d.rating,onShowHouses:n[1]||(n[1]=C=>t.$emit("show-houses"))},null,8,["latitude","longitude","location","rating"]),Mr(E,{map:d.map,center:d.center,onSetMarker:y.setMarker,onFoundPlaces:y.showMarkers,onLocationInput:y.locationInput,onRatingUpdate:y.ratingUpdate},null,8,["map","center","onSetMarker","onFoundPlaces","onLocationInput","onRatingUpdate"]),_t("button",{type:"submit",class:"btn btn-primary btn-lg btn-block mt-3",onClick:n[2]||(n[2]=(...C)=>y.submitForm&&y.submitForm(...C))},"Submit")])]),aM])}const lM=Ea(eM,[["render",sM],["__scopeId","data-v-aaf63e56"]]);const uM={props:["house"],components:{AddPropertyForm:yw,Search:xw,Rating:_w,SearchButton:vw},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,currentLocation:[],map:{},rating:6,count:{clinics:0,hospitals:0,elementarySchools:0,konbini:0,kindergardens:0}}},mounted(){this.createMap()},methods:{async createMap(){try{mapboxgl.accessToken=this.access_token;let t={container:"map",style:"mapbox://styles/mapbox/streets-v12",zoom:12,center:[132.7445942,35.3665752]};this.map=new mapboxgl.Map(t);const n=[this.house.fake_longitude,this.house.fake_latitude],p=[this.createGeoJSONCircle(n,.5)];this.showMarkers({type:"circles",data:{features:p}}),console.log("init"),this.currentLocation=[this.house.longitude,this.house.latitude],this.search()}catch(t){console.log("map error",t)}},countMarkers(t){switch(t.type){case"clinics":this.count.clinics=t.data.features.length;break;case"hospitals":this.count.hospitals=t.data.features.length;break;case"elemSchools":this.count.elemSchools=t.data.features.length;break;case"konbini":this.count.konbini=t.data.features.length;break;case"kindergardens":this.count.kindergardens=t.data.features.length;break}},showMarkers({type:t,data:n}){this.countMarkers({type:t,data:n});let l="pink";switch(t){case"hospitals":l="red";break;case"konbini":l="yellow";break;case"elemSchools":l="blue";break;case"clinics":l="green";break;case"kindergardens":l="#17a2b8";break}console.log(this.map.getSource(t));const p=this;this.map.on("load",function(){if(p.map.getSource(t))p.map.getSource(t).setData(n);else{p.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n.features}});const d=t==="circles"?{id:t,type:"fill",source:t,paint:{"fill-color":"blue","fill-opacity":.6}}:{id:t,type:"circle",source:t,paint:{"circle-radius":10,"circle-color":l,"circle-opacity":.5}};p.map.addLayer(d)}})},createGeoJSONCircle(t,n,l){l||(l=64);for(var p={latitude:t[1],longitude:t[0]},d=n,y=[],x=d/(111.32*Math.cos(p.latitude*Math.PI/180)),E=d/110.574,C,k,D,N=0;N<l;N++)C=N/l*(2*Math.PI),k=x*Math.cos(C),D=E*Math.sin(C),y.push([p.longitude+k,p.latitude+D]);return y.push(y[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[y]}}},search(){const t=parseFloat(this.currentLocation[0])-.02,n=parseFloat(this.currentLocation[1])-.02,l=parseFloat(this.currentLocation[0])+.02,p=parseFloat(this.currentLocation[1])+.02,d=`bbox=${t},${n},${l},${p}`;console.log(this.currentLocation),console.log(d),console.log(this.currentLocation),Yi.get(`https://api.mapbox.com/search/v1/forward/クリニック?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.access_token}`).then(y=>{console.log(y.data),this.showMarkers({type:"clinics",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/生活>小学校?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.access_token}`).then(y=>{console.log(y.data),this.showMarkers({type:"elemSchools",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/医療>病院?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.access_token}`).then(y=>{console.log(y.data),this.showMarkers({type:"hospitals",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/ショップ>コンビニ?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.access_token}`).then(y=>{console.log(y.data),this.showMarkers({type:"konbini",data:y.data})}),Yi.get(`https://api.mapbox.com/search/searchbox/v1/category/生活>幼稚園?language=ja&limit=10&${d}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.access_token}`).then(y=>{console.log(y.data),this.showMarkers({type:"kindergardens",data:y.data})})}}},Ta=t=>(Cc("data-v-60010729"),t=t(),Ac(),t),cM={class:"main"},pM={class:"sidebar col-4 py-3"},hM={class:"d-flex justify-content-between align-items-center"},fM=Ta(()=>_t("br",null,null,-1)),dM=Ta(()=>_t("h4",null,"General",-1)),mM={class:"container text-lg"},gM={class:"row my-1"},yM=Ta(()=>_t("div",{class:"col"}," Price ",-1)),vM={class:"col"},_M={class:"row my-1"},xM=Ta(()=>_t("div",{class:"col"}," Rooms ",-1)),bM={class:"col"},wM={class:"row my-1"},EM=Ta(()=>_t("div",{class:"col"}," Bathrooms ",-1)),SM={class:"col"},TM=Ta(()=>_t("br",null,null,-1)),CM=Ta(()=>_t("h4",null,"Location",-1)),AM=Ta(()=>_t("br",null,null,-1)),IM=Ta(()=>_t("h5",null,"Owner",-1)),kM=Ta(()=>_t("div",{class:"map-wrapper"},[_t("div",{id:"map"})],-1));function PM(t,n,l,p,d,y){const x=Go("Rating");return nn(),Ci("div",cM,[_t("div",pM,[_t("div",null,[_t("div",hM,[_t("h2",null,Si(l.house.title),1),_t("button",{class:"btn btn-outline-info",onClick:n[0]||(n[0]=E=>t.$emit("show-houses"))},"See all houses")]),fM,dM,_t("div",mM,[_t("div",gM,[yM,_t("div",vM,Si(l.house.price)+" ￥ ",1)]),_t("div",_M,[xM,_t("div",bM,Si(l.house.rooms),1)]),_t("div",wM,[EM,_t("div",SM,Si(l.house.bathrooms),1)])]),TM,CM,Mr(x,{count:d.count},null,8,["count"]),AM,IM,Bd(" Asakura Yo ")])]),kM])}const MM=Ea(uM,[["render",PM],["__scopeId","data-v-60010729"]]);const zM={components:{TheWelcome:M5,Houses:lI,AddProperty:lM,Property:MM},data(){return{showHousesPage:!1,showAddHouse:!1,showWelcome:!0,showOneHouse:!1,currentHouse:null}},methods:{showHouses(){this.showHousesPage=!0,this.showWelcome=!1,this.showAddHouse=!1,this.showOneHouse=!1},addHouse(){this.showAddHouse=!0,this.showWelcome=!1,this.showHousesPage=!1},showHouse(t){this.currentHouse=t,this.showAddHouse=!1,this.showWelcome=!1,this.showHousesPage=!1,this.showOneHouse=!0}}},LM={id:"app"};function RM(t,n,l,p,d,y){const x=Go("TheWelcome"),E=Go("Houses"),C=Go("AddProperty"),k=Go("Property");return nn(),Ci("div",LM,[_t("main",null,[d.showWelcome?(nn(),rs(x,{key:0,onShowHouses:y.showHouses,onAddHouse:y.addHouse},null,8,["onShowHouses","onAddHouse"])):xa("",!0),d.showHousesPage?(nn(),rs(E,{key:1,onAddHouse:y.addHouse,onShowHouse:y.showHouse},null,8,["onAddHouse","onShowHouse"])):xa("",!0),d.showAddHouse?(nn(),rs(C,{key:2,onShowHouses:y.showHouses},null,8,["onShowHouses"])):xa("",!0),d.showOneHouse&&d.currentHouse?(nn(),rs(k,{key:3,house:d.currentHouse,onShowHouses:y.showHouses},null,8,["house","onShowHouses"])):xa("",!0)])])}const OM=Ea(zM,[["render",RM]]),Yy=Px(OM);Yy.config.globalProperties.$mapboxApiKey="pk.eyJ1IjoiaXJpbmFzayIsImEiOiJjbDIwOHhrbm0wdWJlM2pxZDNvN3A5NHNzIn0.M37Dun7-7tjVc9C0O82lpw";Yy.mount("#app");console.log("app",Yy);
