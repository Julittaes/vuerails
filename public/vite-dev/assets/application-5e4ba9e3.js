/* empty css             */import{i as jg}from"./map-e912c496.js";function eo(t,n){const l=Object.create(null),p=t.split(",");for(let m=0;m<p.length;m++)l[p[m]]=!0;return n?m=>!!l[m.toLowerCase()]:m=>!!l[m]}const Nr={},rc=[],Bi=()=>{},Nf=()=>!1,W2=/^on[^a-z]/,Kl=t=>W2.test(t),qg=t=>t.startsWith("onUpdate:"),vr=Object.assign,Hg=(t,n)=>{const l=t.indexOf(n);l>-1&&t.splice(l,1)},K2=Object.prototype.hasOwnProperty,Tr=(t,n)=>K2.call(t,n),xt=Array.isArray,nc=t=>bc(t)==="[object Map]",Xl=t=>bc(t)==="[object Set]",v_=t=>bc(t)==="[object Date]",X2=t=>bc(t)==="[object RegExp]",Zt=t=>typeof t=="function",tr=t=>typeof t=="string",Bs=t=>typeof t=="symbol",Ur=t=>t!==null&&typeof t=="object",Zg=t=>Ur(t)&&Zt(t.then)&&Zt(t.catch),j0=Object.prototype.toString,bc=t=>j0.call(t),J2=t=>bc(t).slice(8,-1),q0=t=>bc(t)==="[object Object]",Gg=t=>tr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Bl=eo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y2=eo("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),vd=t=>{const n=Object.create(null);return l=>n[l]||(n[l]=t(l))},Q2=/-(\w)/g,Vn=vd(t=>t.replace(Q2,(n,l)=>l?l.toUpperCase():"")),eE=/\B([A-Z])/g,fo=vd(t=>t.replace(eE,"-$1").toLowerCase()),Jl=vd(t=>t.charAt(0).toUpperCase()+t.slice(1)),ic=vd(t=>t?`on${Jl(t)}`:""),pc=(t,n)=>!Object.is(t,n),oc=(t,n)=>{for(let l=0;l<t.length;l++)t[l](n)},Kf=(t,n,l)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:l})},Xf=t=>{const n=parseFloat(t);return isNaN(n)?t:n},Jf=t=>{const n=tr(t)?Number(t):NaN;return isNaN(n)?t:n};let __;const cg=()=>__||(__=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),tE="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",rE=eo(tE);function Qp(t){if(xt(t)){const n={};for(let l=0;l<t.length;l++){const p=t[l],m=tr(p)?H0(p):Qp(p);if(m)for(const y in m)n[y]=m[y]}return n}else{if(tr(t))return t;if(Ur(t))return t}}const nE=/;(?![^(]*\))/g,iE=/:([^]+)/,oE=/\/\*[^]*?\*\//g;function H0(t){const n={};return t.replace(oE,"").split(nE).forEach(l=>{if(l){const p=l.split(iE);p.length>1&&(n[p[0].trim()]=p[1].trim())}}),n}function wc(t){let n="";if(tr(t))n=t;else if(xt(t))for(let l=0;l<t.length;l++){const p=wc(t[l]);p&&(n+=p+" ")}else if(Ur(t))for(const l in t)t[l]&&(n+=l+" ");return n.trim()}function aE(t){if(!t)return null;let{class:n,style:l}=t;return n&&!tr(n)&&(t.class=wc(n)),l&&(t.style=Qp(l)),t}const sE="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",lE="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",uE="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",cE=eo(sE),pE=eo(lE),hE=eo(uE),fE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dE=eo(fE);function Z0(t){return!!t||t===""}function mE(t,n){if(t.length!==n.length)return!1;let l=!0;for(let p=0;l&&p<t.length;p++)l=Fs(t[p],n[p]);return l}function Fs(t,n){if(t===n)return!0;let l=v_(t),p=v_(n);if(l||p)return l&&p?t.getTime()===n.getTime():!1;if(l=Bs(t),p=Bs(n),l||p)return t===n;if(l=xt(t),p=xt(n),l||p)return l&&p?mE(t,n):!1;if(l=Ur(t),p=Ur(n),l||p){if(!l||!p)return!1;const m=Object.keys(t).length,y=Object.keys(n).length;if(m!==y)return!1;for(const x in t){const E=t.hasOwnProperty(x),C=n.hasOwnProperty(x);if(E&&!C||!E&&C||!Fs(t[x],n[x]))return!1}}return String(t)===String(n)}function _d(t,n){return t.findIndex(l=>Fs(l,n))}const Io=t=>tr(t)?t:t==null?"":xt(t)||Ur(t)&&(t.toString===j0||!Zt(t.toString))?JSON.stringify(t,G0,2):String(t),G0=(t,n)=>n&&n.__v_isRef?G0(t,n.value):nc(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((l,[p,m])=>(l[`${p} =>`]=m,l),{})}:Xl(n)?{[`Set(${n.size})`]:[...n.values()]}:Ur(n)&&!xt(n)&&!q0(n)?String(n):n;let po;class $g{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=po,!n&&po&&(this.index=(po.scopes||(po.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const l=po;try{return po=this,n()}finally{po=l}}}on(){po=this}off(){po=this.parent}stop(n){if(this._active){let l,p;for(l=0,p=this.effects.length;l<p;l++)this.effects[l].stop();for(l=0,p=this.cleanups.length;l<p;l++)this.cleanups[l]();if(this.scopes)for(l=0,p=this.scopes.length;l<p;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!n){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function gE(t){return new $g(t)}function $0(t,n=po){n&&n.active&&n.effects.push(t)}function W0(){return po}function yE(t){po&&po.cleanups.push(t)}const Wg=t=>{const n=new Set(t);return n.w=0,n.n=0,n},K0=t=>(t.w&Ns)>0,X0=t=>(t.n&Ns)>0,vE=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Ns},_E=t=>{const{deps:n}=t;if(n.length){let l=0;for(let p=0;p<n.length;p++){const m=n[p];K0(m)&&!X0(m)?m.delete(t):n[l++]=m,m.w&=~Ns,m.n&=~Ns}n.length=l}},Yf=new WeakMap;let Ap=0,Ns=1;const pg=30;let Ho;const Fl=Symbol(""),hg=Symbol("");class eh{constructor(n,l=null,p){this.fn=n,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,$0(this,p)}run(){if(!this.active)return this.fn();let n=Ho,l=zs;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=Ho,Ho=this,zs=!0,Ns=1<<++Ap,Ap<=pg?vE(this):x_(this),this.fn()}finally{Ap<=pg&&_E(this),Ns=1<<--Ap,Ho=this.parent,zs=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ho===this?this.deferStop=!0:this.active&&(x_(this),this.onStop&&this.onStop(),this.active=!1)}}function x_(t){const{deps:n}=t;if(n.length){for(let l=0;l<n.length;l++)n[l].delete(t);n.length=0}}function xE(t,n){t.effect&&(t=t.effect.fn);const l=new eh(t);n&&(vr(l,n),n.scope&&$0(l,n.scope)),(!n||!n.lazy)&&l.run();const p=l.run.bind(l);return p.effect=l,p}function bE(t){t.effect.stop()}let zs=!0;const J0=[];function Ec(){J0.push(zs),zs=!1}function Sc(){const t=J0.pop();zs=t===void 0?!0:t}function Qi(t,n,l){if(zs&&Ho){let p=Yf.get(t);p||Yf.set(t,p=new Map);let m=p.get(l);m||p.set(l,m=Wg()),Y0(m)}}function Y0(t,n){let l=!1;Ap<=pg?X0(t)||(t.n|=Ns,l=!K0(t)):l=!t.has(Ho),l&&(t.add(Ho),Ho.deps.push(t))}function ts(t,n,l,p,m,y){const x=Yf.get(t);if(!x)return;let E=[];if(n==="clear")E=[...x.values()];else if(l==="length"&&xt(t)){const C=Number(p);x.forEach((k,D)=>{(D==="length"||D>=C)&&E.push(k)})}else switch(l!==void 0&&E.push(x.get(l)),n){case"add":xt(t)?Gg(l)&&E.push(x.get("length")):(E.push(x.get(Fl)),nc(t)&&E.push(x.get(hg)));break;case"delete":xt(t)||(E.push(x.get(Fl)),nc(t)&&E.push(x.get(hg)));break;case"set":nc(t)&&E.push(x.get(Fl));break}if(E.length===1)E[0]&&fg(E[0]);else{const C=[];for(const k of E)k&&C.push(...k);fg(Wg(C))}}function fg(t,n){const l=xt(t)?t:[...t];for(const p of l)p.computed&&b_(p);for(const p of l)p.computed||b_(p)}function b_(t,n){(t!==Ho||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function wE(t,n){var l;return(l=Yf.get(t))==null?void 0:l.get(n)}const EE=eo("__proto__,__v_isRef,__isVue"),Q0=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bs)),SE=xd(),TE=xd(!1,!0),CE=xd(!0),AE=xd(!0,!0),w_=IE();function IE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...l){const p=_r(this);for(let y=0,x=this.length;y<x;y++)Qi(p,"get",y+"");const m=p[n](...l);return m===-1||m===!1?p[n](...l.map(_r)):m}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...l){Ec();const p=_r(this)[n].apply(this,l);return Sc(),p}}),t}function kE(t){const n=_r(this);return Qi(n,"has",t),n.hasOwnProperty(t)}function xd(t=!1,n=!1){return function(p,m,y){if(m==="__v_isReactive")return!t;if(m==="__v_isReadonly")return t;if(m==="__v_isShallow")return n;if(m==="__v_raw"&&y===(t?n?a1:o1:n?i1:n1).get(p))return p;const x=xt(p);if(!t){if(x&&Tr(w_,m))return Reflect.get(w_,m,y);if(m==="hasOwnProperty")return kE}const E=Reflect.get(p,m,y);return(Bs(m)?Q0.has(m):EE(m))||(t||Qi(p,"get",m),n)?E:Gn(E)?x&&Gg(m)?E:E.value:Ur(E)?t?Xg(E):Ed(E):E}}const PE=e1(),ME=e1(!0);function e1(t=!1){return function(l,p,m,y){let x=l[p];if(Hl(x)&&Gn(x)&&!Gn(m))return!1;if(!t&&(!Bp(m)&&!Hl(m)&&(x=_r(x),m=_r(m)),!xt(l)&&Gn(x)&&!Gn(m)))return x.value=m,!0;const E=xt(l)&&Gg(p)?Number(p)<l.length:Tr(l,p),C=Reflect.set(l,p,m,y);return l===_r(y)&&(E?pc(m,x)&&ts(l,"set",p,m):ts(l,"add",p,m)),C}}function zE(t,n){const l=Tr(t,n);t[n];const p=Reflect.deleteProperty(t,n);return p&&l&&ts(t,"delete",n,void 0),p}function LE(t,n){const l=Reflect.has(t,n);return(!Bs(n)||!Q0.has(n))&&Qi(t,"has",n),l}function RE(t){return Qi(t,"iterate",xt(t)?"length":Fl),Reflect.ownKeys(t)}const t1={get:SE,set:PE,deleteProperty:zE,has:LE,ownKeys:RE},r1={get:CE,set(t,n){return!0},deleteProperty(t,n){return!0}},OE=vr({},t1,{get:TE,set:ME}),DE=vr({},r1,{get:AE}),Kg=t=>t,bd=t=>Reflect.getPrototypeOf(t);function Sf(t,n,l=!1,p=!1){t=t.__v_raw;const m=_r(t),y=_r(n);l||(n!==y&&Qi(m,"get",n),Qi(m,"get",y));const{has:x}=bd(m),E=p?Kg:l?Qg:Fp;if(x.call(m,n))return E(t.get(n));if(x.call(m,y))return E(t.get(y));t!==m&&t.get(n)}function Tf(t,n=!1){const l=this.__v_raw,p=_r(l),m=_r(t);return n||(t!==m&&Qi(p,"has",t),Qi(p,"has",m)),t===m?l.has(t):l.has(t)||l.has(m)}function Cf(t,n=!1){return t=t.__v_raw,!n&&Qi(_r(t),"iterate",Fl),Reflect.get(t,"size",t)}function E_(t){t=_r(t);const n=_r(this);return bd(n).has.call(n,t)||(n.add(t),ts(n,"add",t,t)),this}function S_(t,n){n=_r(n);const l=_r(this),{has:p,get:m}=bd(l);let y=p.call(l,t);y||(t=_r(t),y=p.call(l,t));const x=m.call(l,t);return l.set(t,n),y?pc(n,x)&&ts(l,"set",t,n):ts(l,"add",t,n),this}function T_(t){const n=_r(this),{has:l,get:p}=bd(n);let m=l.call(n,t);m||(t=_r(t),m=l.call(n,t)),p&&p.call(n,t);const y=n.delete(t);return m&&ts(n,"delete",t,void 0),y}function C_(){const t=_r(this),n=t.size!==0,l=t.clear();return n&&ts(t,"clear",void 0,void 0),l}function Af(t,n){return function(p,m){const y=this,x=y.__v_raw,E=_r(x),C=n?Kg:t?Qg:Fp;return!t&&Qi(E,"iterate",Fl),x.forEach((k,D)=>p.call(m,C(k),C(D),y))}}function If(t,n,l){return function(...p){const m=this.__v_raw,y=_r(m),x=nc(y),E=t==="entries"||t===Symbol.iterator&&x,C=t==="keys"&&x,k=m[t](...p),D=l?Kg:n?Qg:Fp;return!n&&Qi(y,"iterate",C?hg:Fl),{next(){const{value:N,done:ee}=k.next();return ee?{value:N,done:ee}:{value:E?[D(N[0]),D(N[1])]:D(N),done:ee}},[Symbol.iterator](){return this}}}}function Ts(t){return function(...n){return t==="delete"?!1:this}}function BE(){const t={get(y){return Sf(this,y)},get size(){return Cf(this)},has:Tf,add:E_,set:S_,delete:T_,clear:C_,forEach:Af(!1,!1)},n={get(y){return Sf(this,y,!1,!0)},get size(){return Cf(this)},has:Tf,add:E_,set:S_,delete:T_,clear:C_,forEach:Af(!1,!0)},l={get(y){return Sf(this,y,!0)},get size(){return Cf(this,!0)},has(y){return Tf.call(this,y,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:Af(!0,!1)},p={get(y){return Sf(this,y,!0,!0)},get size(){return Cf(this,!0)},has(y){return Tf.call(this,y,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:Af(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=If(y,!1,!1),l[y]=If(y,!0,!1),n[y]=If(y,!1,!0),p[y]=If(y,!0,!0)}),[t,l,n,p]}const[FE,NE,UE,VE]=BE();function wd(t,n){const l=n?t?VE:UE:t?NE:FE;return(p,m,y)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?p:Reflect.get(Tr(l,m)&&m in p?l:p,m,y)}const jE={get:wd(!1,!1)},qE={get:wd(!1,!0)},HE={get:wd(!0,!1)},ZE={get:wd(!0,!0)},n1=new WeakMap,i1=new WeakMap,o1=new WeakMap,a1=new WeakMap;function GE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $E(t){return t.__v_skip||!Object.isExtensible(t)?0:GE(J2(t))}function Ed(t){return Hl(t)?t:Sd(t,!1,t1,jE,n1)}function s1(t){return Sd(t,!1,OE,qE,i1)}function Xg(t){return Sd(t,!0,r1,HE,o1)}function WE(t){return Sd(t,!0,DE,ZE,a1)}function Sd(t,n,l,p,m){if(!Ur(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const y=m.get(t);if(y)return y;const x=$E(t);if(x===0)return t;const E=new Proxy(t,x===2?p:l);return m.set(t,E),E}function Nl(t){return Hl(t)?Nl(t.__v_raw):!!(t&&t.__v_isReactive)}function Hl(t){return!!(t&&t.__v_isReadonly)}function Bp(t){return!!(t&&t.__v_isShallow)}function Jg(t){return Nl(t)||Hl(t)}function _r(t){const n=t&&t.__v_raw;return n?_r(n):t}function Yg(t){return Kf(t,"__v_skip",!0),t}const Fp=t=>Ur(t)?Ed(t):t,Qg=t=>Ur(t)?Xg(t):t;function ey(t){zs&&Ho&&(t=_r(t),Y0(t.dep||(t.dep=Wg())))}function Td(t,n){t=_r(t);const l=t.dep;l&&fg(l)}function Gn(t){return!!(t&&t.__v_isRef===!0)}function ac(t){return l1(t,!1)}function KE(t){return l1(t,!0)}function l1(t,n){return Gn(t)?t:new XE(t,n)}class XE{constructor(n,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?n:_r(n),this._value=l?n:Fp(n)}get value(){return ey(this),this._value}set value(n){const l=this.__v_isShallow||Bp(n)||Hl(n);n=l?n:_r(n),pc(n,this._rawValue)&&(this._rawValue=n,this._value=l?n:Fp(n),Td(this))}}function JE(t){Td(t)}function ty(t){return Gn(t)?t.value:t}function YE(t){return Zt(t)?t():ty(t)}const QE={get:(t,n,l)=>ty(Reflect.get(t,n,l)),set:(t,n,l,p)=>{const m=t[n];return Gn(m)&&!Gn(l)?(m.value=l,!0):Reflect.set(t,n,l,p)}};function ry(t){return Nl(t)?t:new Proxy(t,QE)}class eS{constructor(n){this.dep=void 0,this.__v_isRef=!0;const{get:l,set:p}=n(()=>ey(this),()=>Td(this));this._get=l,this._set=p}get value(){return this._get()}set value(n){this._set(n)}}function tS(t){return new eS(t)}function rS(t){const n=xt(t)?new Array(t.length):{};for(const l in t)n[l]=u1(t,l);return n}class nS{constructor(n,l,p){this._object=n,this._key=l,this._defaultValue=p,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return wE(_r(this._object),this._key)}}class iS{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function oS(t,n,l){return Gn(t)?t:Zt(t)?new iS(t):Ur(t)&&arguments.length>1?u1(t,n,l):ac(t)}function u1(t,n,l){const p=t[n];return Gn(p)?p:new nS(t,n,l)}class aS{constructor(n,l,p,m){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new eh(n,()=>{this._dirty||(this._dirty=!0,Td(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=p}get value(){const n=_r(this);return ey(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function sS(t,n,l=!1){let p,m;const y=Zt(t);return y?(p=t,m=Bi):(p=t.get,m=t.set),new aS(p,m,y||!m,l)}function lS(t,...n){}function uS(t,n){}function Qa(t,n,l,p){let m;try{m=p?t(...p):t()}catch(y){Yl(y,n,l)}return m}function go(t,n,l,p){if(Zt(t)){const y=Qa(t,n,l,p);return y&&Zg(y)&&y.catch(x=>{Yl(x,n,l)}),y}const m=[];for(let y=0;y<t.length;y++)m.push(go(t[y],n,l,p));return m}function Yl(t,n,l,p=!0){const m=n?n.vnode:null;if(n){let y=n.parent;const x=n.proxy,E=l;for(;y;){const k=y.ec;if(k){for(let D=0;D<k.length;D++)if(k[D](t,x,E)===!1)return}y=y.parent}const C=n.appContext.config.errorHandler;if(C){Qa(C,null,10,[t,x,E]);return}}cS(t,l,m,p)}function cS(t,n,l,p=!0){console.error(t)}let Np=!1,dg=!1;const Si=[];let ya=0;const sc=[];let Ka=null,Ll=0;const c1=Promise.resolve();let ny=null;function iy(t){const n=ny||c1;return t?n.then(this?t.bind(this):t):n}function pS(t){let n=ya+1,l=Si.length;for(;n<l;){const p=n+l>>>1;Up(Si[p])<t?n=p+1:l=p}return n}function Cd(t){(!Si.length||!Si.includes(t,Np&&t.allowRecurse?ya+1:ya))&&(t.id==null?Si.push(t):Si.splice(pS(t.id),0,t),p1())}function p1(){!Np&&!dg&&(dg=!0,ny=c1.then(h1))}function hS(t){const n=Si.indexOf(t);n>ya&&Si.splice(n,1)}function oy(t){xt(t)?sc.push(...t):(!Ka||!Ka.includes(t,t.allowRecurse?Ll+1:Ll))&&sc.push(t),p1()}function A_(t,n=Np?ya+1:0){for(;n<Si.length;n++){const l=Si[n];l&&l.pre&&(Si.splice(n,1),n--,l())}}function Qf(t){if(sc.length){const n=[...new Set(sc)];if(sc.length=0,Ka){Ka.push(...n);return}for(Ka=n,Ka.sort((l,p)=>Up(l)-Up(p)),Ll=0;Ll<Ka.length;Ll++)Ka[Ll]();Ka=null,Ll=0}}const Up=t=>t.id==null?1/0:t.id,fS=(t,n)=>{const l=Up(t)-Up(n);if(l===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return l};function h1(t){dg=!1,Np=!0,Si.sort(fS);const n=Bi;try{for(ya=0;ya<Si.length;ya++){const l=Si[ya];l&&l.active!==!1&&Qa(l,null,14)}}finally{ya=0,Si.length=0,Qf(),Np=!1,ny=null,(Si.length||sc.length)&&h1()}}let ec,kf=[];function f1(t,n){var l,p;ec=t,ec?(ec.enabled=!0,kf.forEach(({event:m,args:y})=>ec.emit(m,...y)),kf=[]):typeof window<"u"&&window.HTMLElement&&!((p=(l=window.navigator)==null?void 0:l.userAgent)!=null&&p.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(y=>{f1(y,n)}),setTimeout(()=>{ec||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,kf=[])},3e3)):kf=[]}function dS(t,n,...l){if(t.isUnmounted)return;const p=t.vnode.props||Nr;let m=l;const y=n.startsWith("update:"),x=y&&n.slice(7);if(x&&x in p){const D=`${x==="modelValue"?"model":x}Modifiers`,{number:N,trim:ee}=p[D]||Nr;ee&&(m=l.map(se=>tr(se)?se.trim():se)),N&&(m=l.map(Xf))}let E,C=p[E=ic(n)]||p[E=ic(Vn(n))];!C&&y&&(C=p[E=ic(fo(n))]),C&&go(C,t,6,m);const k=p[E+"Once"];if(k){if(!t.emitted)t.emitted={};else if(t.emitted[E])return;t.emitted[E]=!0,go(k,t,6,m)}}function d1(t,n,l=!1){const p=n.emitsCache,m=p.get(t);if(m!==void 0)return m;const y=t.emits;let x={},E=!1;if(!Zt(t)){const C=k=>{const D=d1(k,n,!0);D&&(E=!0,vr(x,D))};!l&&n.mixins.length&&n.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}return!y&&!E?(Ur(t)&&p.set(t,null),null):(xt(y)?y.forEach(C=>x[C]=null):vr(x,y),Ur(t)&&p.set(t,x),x)}function Ad(t,n){return!t||!Kl(n)?!1:(n=n.slice(2).replace(/Once$/,""),Tr(t,n[0].toLowerCase()+n.slice(1))||Tr(t,fo(n))||Tr(t,n))}let oi=null,Id=null;function Vp(t){const n=oi;return oi=t,Id=t&&t.type.__scopeId||null,n}function th(t){Id=t}function rh(){Id=null}const mS=t=>kd;function kd(t,n=oi,l){if(!n||t._n)return t;const p=(...m)=>{p._d&&bg(-1);const y=Vp(n);let x;try{x=t(...m)}finally{Vp(y),p._d&&bg(1)}return x};return p._n=!0,p._c=!0,p._d=!0,p}function Uf(t){const{type:n,vnode:l,proxy:p,withProxy:m,props:y,propsOptions:[x],slots:E,attrs:C,emit:k,render:D,renderCache:N,data:ee,setupState:se,ctx:ne,inheritAttrs:ve}=t;let fe,pe;const ue=Vp(t);try{if(l.shapeFlag&4){const _e=m||p;fe=ho(D.call(_e,_e,N,y,se,ee,ne)),pe=C}else{const _e=n;fe=ho(_e.length>1?_e(y,{attrs:C,slots:E,emit:k}):_e(y,null)),pe=n.props?C:yS(C)}}catch(_e){Lp.length=0,Yl(_e,t,1),fe=Vr(Ci)}let be=fe;if(pe&&ve!==!1){const _e=Object.keys(pe),{shapeFlag:Oe}=be;_e.length&&Oe&7&&(x&&_e.some(qg)&&(pe=vS(pe,x)),be=_a(be,pe))}return l.dirs&&(be=_a(be),be.dirs=be.dirs?be.dirs.concat(l.dirs):l.dirs),l.transition&&(be.transition=l.transition),fe=be,Vp(ue),fe}function gS(t){let n;for(let l=0;l<t.length;l++){const p=t[l];if(Us(p)){if(p.type!==Ci||p.children==="v-if"){if(n)return;n=p}}else return}return n}const yS=t=>{let n;for(const l in t)(l==="class"||l==="style"||Kl(l))&&((n||(n={}))[l]=t[l]);return n},vS=(t,n)=>{const l={};for(const p in t)(!qg(p)||!(p.slice(9)in n))&&(l[p]=t[p]);return l};function _S(t,n,l){const{props:p,children:m,component:y}=t,{props:x,children:E,patchFlag:C}=n,k=y.emitsOptions;if(n.dirs||n.transition)return!0;if(l&&C>=0){if(C&1024)return!0;if(C&16)return p?I_(p,x,k):!!x;if(C&8){const D=n.dynamicProps;for(let N=0;N<D.length;N++){const ee=D[N];if(x[ee]!==p[ee]&&!Ad(k,ee))return!0}}}else return(m||E)&&(!E||!E.$stable)?!0:p===x?!1:p?x?I_(p,x,k):!0:!!x;return!1}function I_(t,n,l){const p=Object.keys(n);if(p.length!==Object.keys(t).length)return!0;for(let m=0;m<p.length;m++){const y=p[m];if(n[y]!==t[y]&&!Ad(l,y))return!0}return!1}function ay({vnode:t,parent:n},l){for(;n&&n.subTree===t;)(t=n.vnode).el=l,n=n.parent}const m1=t=>t.__isSuspense,xS={name:"Suspense",__isSuspense:!0,process(t,n,l,p,m,y,x,E,C,k){t==null?wS(n,l,p,m,y,x,E,C,k):ES(t,n,l,p,m,x,E,C,k)},hydrate:SS,create:sy,normalize:TS},bS=xS;function jp(t,n){const l=t.props&&t.props[n];Zt(l)&&l()}function wS(t,n,l,p,m,y,x,E,C){const{p:k,o:{createElement:D}}=C,N=D("div"),ee=t.suspense=sy(t,m,p,n,N,l,y,x,E,C);k(null,ee.pendingBranch=t.ssContent,N,null,p,ee,y,x),ee.deps>0?(jp(t,"onPending"),jp(t,"onFallback"),k(null,t.ssFallback,n,l,p,null,y,x),lc(ee,t.ssFallback)):ee.resolve(!1,!0)}function ES(t,n,l,p,m,y,x,E,{p:C,um:k,o:{createElement:D}}){const N=n.suspense=t.suspense;N.vnode=n,n.el=t.el;const ee=n.ssContent,se=n.ssFallback,{activeBranch:ne,pendingBranch:ve,isInFallback:fe,isHydrating:pe}=N;if(ve)N.pendingBranch=ee,Zo(ee,ve)?(C(ve,ee,N.hiddenContainer,null,m,N,y,x,E),N.deps<=0?N.resolve():fe&&(C(ne,se,l,p,m,null,y,x,E),lc(N,se))):(N.pendingId++,pe?(N.isHydrating=!1,N.activeBranch=ve):k(ve,m,N),N.deps=0,N.effects.length=0,N.hiddenContainer=D("div"),fe?(C(null,ee,N.hiddenContainer,null,m,N,y,x,E),N.deps<=0?N.resolve():(C(ne,se,l,p,m,null,y,x,E),lc(N,se))):ne&&Zo(ee,ne)?(C(ne,ee,l,p,m,N,y,x,E),N.resolve(!0)):(C(null,ee,N.hiddenContainer,null,m,N,y,x,E),N.deps<=0&&N.resolve()));else if(ne&&Zo(ee,ne))C(ne,ee,l,p,m,N,y,x,E),lc(N,ee);else if(jp(n,"onPending"),N.pendingBranch=ee,N.pendingId++,C(null,ee,N.hiddenContainer,null,m,N,y,x,E),N.deps<=0)N.resolve();else{const{timeout:ue,pendingId:be}=N;ue>0?setTimeout(()=>{N.pendingId===be&&N.fallback(se)},ue):ue===0&&N.fallback(se)}}function sy(t,n,l,p,m,y,x,E,C,k,D=!1){const{p:N,m:ee,um:se,n:ne,o:{parentNode:ve,remove:fe}}=k;let pe;const ue=CS(t);ue&&n!=null&&n.pendingBranch&&(pe=n.pendingId,n.deps++);const be=t.props?Jf(t.props.timeout):void 0,_e={vnode:t,parent:n,parentComponent:l,isSVG:x,container:p,hiddenContainer:m,anchor:y,deps:0,pendingId:0,timeout:typeof be=="number"?be:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:D,isUnmounted:!1,effects:[],resolve(Oe=!1,f=!1){const{vnode:ke,activeBranch:Y,pendingBranch:Fe,pendingId:ze,effects:Xe,parentComponent:xe,container:mt}=_e;if(_e.isHydrating)_e.isHydrating=!1;else if(!Oe){const Rt=Y&&Fe.transition&&Fe.transition.mode==="out-in";Rt&&(Y.transition.afterLeave=()=>{ze===_e.pendingId&&ee(Fe,mt,rr,0)});let{anchor:rr}=_e;Y&&(rr=ne(Y),se(Y,xe,_e,!0)),Rt||ee(Fe,mt,rr,0)}lc(_e,Fe),_e.pendingBranch=null,_e.isInFallback=!1;let et=_e.parent,Wt=!1;for(;et;){if(et.pendingBranch){et.effects.push(...Xe),Wt=!0;break}et=et.parent}Wt||oy(Xe),_e.effects=[],ue&&n&&n.pendingBranch&&pe===n.pendingId&&(n.deps--,n.deps===0&&!f&&n.resolve()),jp(ke,"onResolve")},fallback(Oe){if(!_e.pendingBranch)return;const{vnode:f,activeBranch:ke,parentComponent:Y,container:Fe,isSVG:ze}=_e;jp(f,"onFallback");const Xe=ne(ke),xe=()=>{_e.isInFallback&&(N(null,Oe,Fe,Xe,Y,null,ze,E,C),lc(_e,Oe))},mt=Oe.transition&&Oe.transition.mode==="out-in";mt&&(ke.transition.afterLeave=xe),_e.isInFallback=!0,se(ke,Y,null,!0),mt||xe()},move(Oe,f,ke){_e.activeBranch&&ee(_e.activeBranch,Oe,f,ke),_e.container=Oe},next(){return _e.activeBranch&&ne(_e.activeBranch)},registerDep(Oe,f){const ke=!!_e.pendingBranch;ke&&_e.deps++;const Y=Oe.vnode.el;Oe.asyncDep.catch(Fe=>{Yl(Fe,Oe,0)}).then(Fe=>{if(Oe.isUnmounted||_e.isUnmounted||_e.pendingId!==Oe.suspenseId)return;Oe.asyncResolved=!0;const{vnode:ze}=Oe;wg(Oe,Fe,!1),Y&&(ze.el=Y);const Xe=!Y&&Oe.subTree.el;f(Oe,ze,ve(Y||Oe.subTree.el),Y?null:ne(Oe.subTree),_e,x,C),Xe&&fe(Xe),ay(Oe,ze.el),ke&&--_e.deps===0&&_e.resolve()})},unmount(Oe,f){_e.isUnmounted=!0,_e.activeBranch&&se(_e.activeBranch,l,Oe,f),_e.pendingBranch&&se(_e.pendingBranch,l,Oe,f)}};return _e}function SS(t,n,l,p,m,y,x,E,C){const k=n.suspense=sy(n,p,l,t.parentNode,document.createElement("div"),null,m,y,x,E,!0),D=C(t,k.pendingBranch=n.ssContent,l,k,y,x);return k.deps===0&&k.resolve(!1,!0),D}function TS(t){const{shapeFlag:n,children:l}=t,p=n&32;t.ssContent=k_(p?l.default:l),t.ssFallback=p?k_(l.fallback):Vr(Ci)}function k_(t){let n;if(Zt(t)){const l=$l&&t._c;l&&(t._d=!1,Sn()),t=t(),l&&(t._d=!0,n=Ji,$1())}return xt(t)&&(t=gS(t)),t=ho(t),n&&!t.dynamicChildren&&(t.dynamicChildren=n.filter(l=>l!==t)),t}function g1(t,n){n&&n.pendingBranch?xt(t)?n.effects.push(...t):n.effects.push(t):oy(t)}function lc(t,n){t.activeBranch=n;const{vnode:l,parentComponent:p}=t,m=l.el=n.el;p&&p.subTree===l&&(p.vnode.el=m,ay(p,m))}function CS(t){var n;return((n=t.props)==null?void 0:n.suspensible)!=null&&t.props.suspensible!==!1}function AS(t,n){return nh(t,null,n)}function y1(t,n){return nh(t,null,{flush:"post"})}function IS(t,n){return nh(t,null,{flush:"sync"})}const Pf={};function Ul(t,n,l){return nh(t,n,l)}function nh(t,n,{immediate:l,deep:p,flush:m,onTrack:y,onTrigger:x}=Nr){var E;const C=W0()===((E=Un)==null?void 0:E.scope)?Un:null;let k,D=!1,N=!1;if(Gn(t)?(k=()=>t.value,D=Bp(t)):Nl(t)?(k=()=>t,p=!0):xt(t)?(N=!0,D=t.some(_e=>Nl(_e)||Bp(_e)),k=()=>t.map(_e=>{if(Gn(_e))return _e.value;if(Nl(_e))return Ol(_e);if(Zt(_e))return Qa(_e,C,2)})):Zt(t)?n?k=()=>Qa(t,C,2):k=()=>{if(!(C&&C.isUnmounted))return ee&&ee(),go(t,C,3,[se])}:k=Bi,n&&p){const _e=k;k=()=>Ol(_e())}let ee,se=_e=>{ee=ue.onStop=()=>{Qa(_e,C,4)}},ne;if(fc)if(se=Bi,n?l&&go(n,C,3,[k(),N?[]:void 0,se]):k(),m==="sync"){const _e=lx();ne=_e.__watcherHandles||(_e.__watcherHandles=[])}else return Bi;let ve=N?new Array(t.length).fill(Pf):Pf;const fe=()=>{if(ue.active)if(n){const _e=ue.run();(p||D||(N?_e.some((Oe,f)=>pc(Oe,ve[f])):pc(_e,ve)))&&(ee&&ee(),go(n,C,3,[_e,ve===Pf?void 0:N&&ve[0]===Pf?[]:ve,se]),ve=_e)}else ue.run()};fe.allowRecurse=!!n;let pe;m==="sync"?pe=fe:m==="post"?pe=()=>fi(fe,C&&C.suspense):(fe.pre=!0,C&&(fe.id=C.uid),pe=()=>Cd(fe));const ue=new eh(k,pe);n?l?fe():ve=ue.run():m==="post"?fi(ue.run.bind(ue),C&&C.suspense):ue.run();const be=()=>{ue.stop(),C&&C.scope&&Hg(C.scope.effects,ue)};return ne&&ne.push(be),be}function kS(t,n,l){const p=this.proxy,m=tr(t)?t.includes(".")?v1(p,t):()=>p[t]:t.bind(p,p);let y;Zt(n)?y=n:(y=n.handler,l=n);const x=Un;Vs(this);const E=nh(m,y.bind(p),l);return x?Vs(x):Os(),E}function v1(t,n){const l=n.split(".");return()=>{let p=t;for(let m=0;m<l.length&&p;m++)p=p[l[m]];return p}}function Ol(t,n){if(!Ur(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Gn(t))Ol(t.value,n);else if(xt(t))for(let l=0;l<t.length;l++)Ol(t[l],n);else if(Xl(t)||nc(t))t.forEach(l=>{Ol(l,n)});else if(q0(t))for(const l in t)Ol(t[l],n);return t}function _1(t,n){const l=oi;if(l===null)return t;const p=Dd(l)||l.proxy,m=t.dirs||(t.dirs=[]);for(let y=0;y<n.length;y++){let[x,E,C,k=Nr]=n[y];x&&(Zt(x)&&(x={mounted:x,updated:x}),x.deep&&Ol(E),m.push({dir:x,instance:p,value:E,oldValue:void 0,arg:C,modifiers:k}))}return t}function ga(t,n,l,p){const m=t.dirs,y=n&&n.dirs;for(let x=0;x<m.length;x++){const E=m[x];y&&(E.oldValue=y[x].value);let C=E.dir[p];C&&(Ec(),go(C,l,8,[t.el,E,t,n]),Sc())}}function ly(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return oh(()=>{t.isMounted=!0}),Ld(()=>{t.isUnmounting=!0}),t}const Ao=[Function,Array],uy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ao,onEnter:Ao,onAfterEnter:Ao,onEnterCancelled:Ao,onBeforeLeave:Ao,onLeave:Ao,onAfterLeave:Ao,onLeaveCancelled:Ao,onBeforeAppear:Ao,onAppear:Ao,onAfterAppear:Ao,onAppearCancelled:Ao},PS={name:"BaseTransition",props:uy,setup(t,{slots:n}){const l=ns(),p=ly();let m;return()=>{const y=n.default&&Pd(n.default(),!0);if(!y||!y.length)return;let x=y[0];if(y.length>1){for(const ve of y)if(ve.type!==Ci){x=ve;break}}const E=_r(t),{mode:C}=E;if(p.isLeaving)return Hm(x);const k=P_(x);if(!k)return Hm(x);const D=hc(k,E,p,l);Zl(k,D);const N=l.subTree,ee=N&&P_(N);let se=!1;const{getTransitionKey:ne}=k.type;if(ne){const ve=ne();m===void 0?m=ve:ve!==m&&(m=ve,se=!0)}if(ee&&ee.type!==Ci&&(!Zo(k,ee)||se)){const ve=hc(ee,E,p,l);if(Zl(ee,ve),C==="out-in")return p.isLeaving=!0,ve.afterLeave=()=>{p.isLeaving=!1,l.update.active!==!1&&l.update()},Hm(x);C==="in-out"&&k.type!==Ci&&(ve.delayLeave=(fe,pe,ue)=>{const be=b1(p,ee);be[String(ee.key)]=ee,fe._leaveCb=()=>{pe(),fe._leaveCb=void 0,delete D.delayedLeave},D.delayedLeave=ue})}return x}}},x1=PS;function b1(t,n){const{leavingVNodes:l}=t;let p=l.get(n.type);return p||(p=Object.create(null),l.set(n.type,p)),p}function hc(t,n,l,p){const{appear:m,mode:y,persisted:x=!1,onBeforeEnter:E,onEnter:C,onAfterEnter:k,onEnterCancelled:D,onBeforeLeave:N,onLeave:ee,onAfterLeave:se,onLeaveCancelled:ne,onBeforeAppear:ve,onAppear:fe,onAfterAppear:pe,onAppearCancelled:ue}=n,be=String(t.key),_e=b1(l,t),Oe=(Y,Fe)=>{Y&&go(Y,p,9,Fe)},f=(Y,Fe)=>{const ze=Fe[1];Oe(Y,Fe),xt(Y)?Y.every(Xe=>Xe.length<=1)&&ze():Y.length<=1&&ze()},ke={mode:y,persisted:x,beforeEnter(Y){let Fe=E;if(!l.isMounted)if(m)Fe=ve||E;else return;Y._leaveCb&&Y._leaveCb(!0);const ze=_e[be];ze&&Zo(t,ze)&&ze.el._leaveCb&&ze.el._leaveCb(),Oe(Fe,[Y])},enter(Y){let Fe=C,ze=k,Xe=D;if(!l.isMounted)if(m)Fe=fe||C,ze=pe||k,Xe=ue||D;else return;let xe=!1;const mt=Y._enterCb=et=>{xe||(xe=!0,et?Oe(Xe,[Y]):Oe(ze,[Y]),ke.delayedLeave&&ke.delayedLeave(),Y._enterCb=void 0)};Fe?f(Fe,[Y,mt]):mt()},leave(Y,Fe){const ze=String(t.key);if(Y._enterCb&&Y._enterCb(!0),l.isUnmounting)return Fe();Oe(N,[Y]);let Xe=!1;const xe=Y._leaveCb=mt=>{Xe||(Xe=!0,Fe(),mt?Oe(ne,[Y]):Oe(se,[Y]),Y._leaveCb=void 0,_e[ze]===t&&delete _e[ze])};_e[ze]=t,ee?f(ee,[Y,xe]):xe()},clone(Y){return hc(Y,n,l,p)}};return ke}function Hm(t){if(ih(t))return t=_a(t),t.children=null,t}function P_(t){return ih(t)?t.children?t.children[0]:void 0:t}function Zl(t,n){t.shapeFlag&6&&t.component?Zl(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function Pd(t,n=!1,l){let p=[],m=0;for(let y=0;y<t.length;y++){let x=t[y];const E=l==null?x.key:String(l)+String(x.key!=null?x.key:y);x.type===ii?(x.patchFlag&128&&m++,p=p.concat(Pd(x.children,n,E))):(n||x.type!==Ci)&&p.push(E!=null?_a(x,{key:E}):x)}if(m>1)for(let y=0;y<p.length;y++)p[y].patchFlag=-2;return p}function cy(t,n){return Zt(t)?(()=>vr({name:t.name},n,{setup:t}))():t}const Vl=t=>!!t.type.__asyncLoader;function MS(t){Zt(t)&&(t={loader:t});const{loader:n,loadingComponent:l,errorComponent:p,delay:m=200,timeout:y,suspensible:x=!0,onError:E}=t;let C=null,k,D=0;const N=()=>(D++,C=null,ee()),ee=()=>{let se;return C||(se=C=n().catch(ne=>{if(ne=ne instanceof Error?ne:new Error(String(ne)),E)return new Promise((ve,fe)=>{E(ne,()=>ve(N()),()=>fe(ne),D+1)});throw ne}).then(ne=>se!==C&&C?C:(ne&&(ne.__esModule||ne[Symbol.toStringTag]==="Module")&&(ne=ne.default),k=ne,ne)))};return cy({name:"AsyncComponentWrapper",__asyncLoader:ee,get __asyncResolved(){return k},setup(){const se=Un;if(k)return()=>Zm(k,se);const ne=ue=>{C=null,Yl(ue,se,13,!p)};if(x&&se.suspense||fc)return ee().then(ue=>()=>Zm(ue,se)).catch(ue=>(ne(ue),()=>p?Vr(p,{error:ue}):null));const ve=ac(!1),fe=ac(),pe=ac(!!m);return m&&setTimeout(()=>{pe.value=!1},m),y!=null&&setTimeout(()=>{if(!ve.value&&!fe.value){const ue=new Error(`Async component timed out after ${y}ms.`);ne(ue),fe.value=ue}},y),ee().then(()=>{ve.value=!0,se.parent&&ih(se.parent.vnode)&&Cd(se.parent.update)}).catch(ue=>{ne(ue),fe.value=ue}),()=>{if(ve.value&&k)return Zm(k,se);if(fe.value&&p)return Vr(p,{error:fe.value});if(l&&!pe.value)return Vr(l)}}})}function Zm(t,n){const{ref:l,props:p,children:m,ce:y}=n.vnode,x=Vr(t,p,m);return x.ref=l,x.ce=y,delete n.vnode.ce,x}const ih=t=>t.type.__isKeepAlive,zS={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:n}){const l=ns(),p=l.ctx;if(!p.renderer)return()=>{const ue=n.default&&n.default();return ue&&ue.length===1?ue[0]:ue};const m=new Map,y=new Set;let x=null;const E=l.suspense,{renderer:{p:C,m:k,um:D,o:{createElement:N}}}=p,ee=N("div");p.activate=(ue,be,_e,Oe,f)=>{const ke=ue.component;k(ue,be,_e,0,E),C(ke.vnode,ue,be,_e,ke,E,Oe,ue.slotScopeIds,f),fi(()=>{ke.isDeactivated=!1,ke.a&&oc(ke.a);const Y=ue.props&&ue.props.onVnodeMounted;Y&&Ki(Y,ke.parent,ue)},E)},p.deactivate=ue=>{const be=ue.component;k(ue,ee,null,1,E),fi(()=>{be.da&&oc(be.da);const _e=ue.props&&ue.props.onVnodeUnmounted;_e&&Ki(_e,be.parent,ue),be.isDeactivated=!0},E)};function se(ue){Gm(ue),D(ue,l,E,!0)}function ne(ue){m.forEach((be,_e)=>{const Oe=Sg(be.type);Oe&&(!ue||!ue(Oe))&&ve(_e)})}function ve(ue){const be=m.get(ue);!x||!Zo(be,x)?se(be):x&&Gm(x),m.delete(ue),y.delete(ue)}Ul(()=>[t.include,t.exclude],([ue,be])=>{ue&&ne(_e=>Ip(ue,_e)),be&&ne(_e=>!Ip(be,_e))},{flush:"post",deep:!0});let fe=null;const pe=()=>{fe!=null&&m.set(fe,$m(l.subTree))};return oh(pe),zd(pe),Ld(()=>{m.forEach(ue=>{const{subTree:be,suspense:_e}=l,Oe=$m(be);if(ue.type===Oe.type&&ue.key===Oe.key){Gm(Oe);const f=Oe.component.da;f&&fi(f,_e);return}se(ue)})}),()=>{if(fe=null,!n.default)return null;const ue=n.default(),be=ue[0];if(ue.length>1)return x=null,ue;if(!Us(be)||!(be.shapeFlag&4)&&!(be.shapeFlag&128))return x=null,be;let _e=$m(be);const Oe=_e.type,f=Sg(Vl(_e)?_e.type.__asyncResolved||{}:Oe),{include:ke,exclude:Y,max:Fe}=t;if(ke&&(!f||!Ip(ke,f))||Y&&f&&Ip(Y,f))return x=_e,be;const ze=_e.key==null?Oe:_e.key,Xe=m.get(ze);return _e.el&&(_e=_a(_e),be.shapeFlag&128&&(be.ssContent=_e)),fe=ze,Xe?(_e.el=Xe.el,_e.component=Xe.component,_e.transition&&Zl(_e,_e.transition),_e.shapeFlag|=512,y.delete(ze),y.add(ze)):(y.add(ze),Fe&&y.size>parseInt(Fe,10)&&ve(y.values().next().value)),_e.shapeFlag|=256,x=_e,m1(be.type)?be:_e}}},LS=zS;function Ip(t,n){return xt(t)?t.some(l=>Ip(l,n)):tr(t)?t.split(",").includes(n):X2(t)?t.test(n):!1}function w1(t,n){S1(t,"a",n)}function E1(t,n){S1(t,"da",n)}function S1(t,n,l=Un){const p=t.__wdc||(t.__wdc=()=>{let m=l;for(;m;){if(m.isDeactivated)return;m=m.parent}return t()});if(Md(n,p,l),l){let m=l.parent;for(;m&&m.parent;)ih(m.parent.vnode)&&RS(p,n,l,m),m=m.parent}}function RS(t,n,l,p){const m=Md(n,t,p,!0);Rd(()=>{Hg(p[n],m)},l)}function Gm(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function $m(t){return t.shapeFlag&128?t.ssContent:t}function Md(t,n,l=Un,p=!1){if(l){const m=l[t]||(l[t]=[]),y=n.__weh||(n.__weh=(...x)=>{if(l.isUnmounted)return;Ec(),Vs(l);const E=go(n,l,t,x);return Os(),Sc(),E});return p?m.unshift(y):m.push(y),y}}const rs=t=>(n,l=Un)=>(!fc||t==="sp")&&Md(t,(...p)=>n(...p),l),T1=rs("bm"),oh=rs("m"),C1=rs("bu"),zd=rs("u"),Ld=rs("bum"),Rd=rs("um"),A1=rs("sp"),I1=rs("rtg"),k1=rs("rtc");function P1(t,n=Un){Md("ec",t,n)}const py="components",OS="directives";function Ls(t,n){return hy(py,t,!0,n)||t}const M1=Symbol.for("v-ndc");function DS(t){return tr(t)?hy(py,t,!1)||t:t||M1}function BS(t){return hy(OS,t)}function hy(t,n,l=!0,p=!1){const m=oi||Un;if(m){const y=m.type;if(t===py){const E=Sg(y,!1);if(E&&(E===n||E===Vn(n)||E===Jl(Vn(n))))return y}const x=M_(m[t]||y[t],n)||M_(m.appContext[t],n);return!x&&p?y:x}}function M_(t,n){return t&&(t[n]||t[Vn(n)]||t[Jl(Vn(n))])}function z1(t,n,l,p){let m;const y=l&&l[p];if(xt(t)||tr(t)){m=new Array(t.length);for(let x=0,E=t.length;x<E;x++)m[x]=n(t[x],x,void 0,y&&y[x])}else if(typeof t=="number"){m=new Array(t);for(let x=0;x<t;x++)m[x]=n(x+1,x,void 0,y&&y[x])}else if(Ur(t))if(t[Symbol.iterator])m=Array.from(t,(x,E)=>n(x,E,void 0,y&&y[E]));else{const x=Object.keys(t);m=new Array(x.length);for(let E=0,C=x.length;E<C;E++){const k=x[E];m[E]=n(t[k],k,E,y&&y[E])}}else m=[];return l&&(l[p]=m),m}function FS(t,n){for(let l=0;l<n.length;l++){const p=n[l];if(xt(p))for(let m=0;m<p.length;m++)t[p[m].name]=p[m].fn;else p&&(t[p.name]=p.key?(...m)=>{const y=p.fn(...m);return y&&(y.key=p.key),y}:p.fn)}return t}function NS(t,n,l={},p,m){if(oi.isCE||oi.parent&&Vl(oi.parent)&&oi.parent.isCE)return n!=="default"&&(l.name=n),Vr("slot",l,p&&p());let y=t[n];y&&y._c&&(y._d=!1),Sn();const x=y&&L1(y(l)),E=Rs(ii,{key:l.key||x&&x.key||`_${n}`},x||(p?p():[]),x&&t._===1?64:-2);return!m&&E.scopeId&&(E.slotScopeIds=[E.scopeId+"-s"]),y&&y._c&&(y._d=!0),E}function L1(t){return t.some(n=>Us(n)?!(n.type===Ci||n.type===ii&&!L1(n.children)):!0)?t:null}function US(t,n){const l={};for(const p in t)l[n&&/[A-Z]/.test(p)?`on:${p}`:ic(p)]=t[p];return l}const mg=t=>t?ex(t)?Dd(t)||t.proxy:mg(t.parent):null,Pp=vr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>mg(t.parent),$root:t=>mg(t.root),$emit:t=>t.emit,$options:t=>fy(t),$forceUpdate:t=>t.f||(t.f=()=>Cd(t.update)),$nextTick:t=>t.n||(t.n=iy.bind(t.proxy)),$watch:t=>kS.bind(t)}),Wm=(t,n)=>t!==Nr&&!t.__isScriptSetup&&Tr(t,n),gg={get({_:t},n){const{ctx:l,setupState:p,data:m,props:y,accessCache:x,type:E,appContext:C}=t;let k;if(n[0]!=="$"){const se=x[n];if(se!==void 0)switch(se){case 1:return p[n];case 2:return m[n];case 4:return l[n];case 3:return y[n]}else{if(Wm(p,n))return x[n]=1,p[n];if(m!==Nr&&Tr(m,n))return x[n]=2,m[n];if((k=t.propsOptions[0])&&Tr(k,n))return x[n]=3,y[n];if(l!==Nr&&Tr(l,n))return x[n]=4,l[n];yg&&(x[n]=0)}}const D=Pp[n];let N,ee;if(D)return n==="$attrs"&&Qi(t,"get",n),D(t);if((N=E.__cssModules)&&(N=N[n]))return N;if(l!==Nr&&Tr(l,n))return x[n]=4,l[n];if(ee=C.config.globalProperties,Tr(ee,n))return ee[n]},set({_:t},n,l){const{data:p,setupState:m,ctx:y}=t;return Wm(m,n)?(m[n]=l,!0):p!==Nr&&Tr(p,n)?(p[n]=l,!0):Tr(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(y[n]=l,!0)},has({_:{data:t,setupState:n,accessCache:l,ctx:p,appContext:m,propsOptions:y}},x){let E;return!!l[x]||t!==Nr&&Tr(t,x)||Wm(n,x)||(E=y[0])&&Tr(E,x)||Tr(p,x)||Tr(Pp,x)||Tr(m.config.globalProperties,x)},defineProperty(t,n,l){return l.get!=null?t._.accessCache[n]=0:Tr(l,"value")&&this.set(t,n,l.value,null),Reflect.defineProperty(t,n,l)}},VS=vr({},gg,{get(t,n){if(n!==Symbol.unscopables)return gg.get(t,n,t)},has(t,n){return n[0]!=="_"&&!rE(n)}});function jS(){return null}function qS(){return null}function HS(t){}function ZS(t){}function GS(){return null}function $S(){}function WS(t,n){return null}function KS(){return R1().slots}function XS(){return R1().attrs}function JS(t,n,l){const p=ns();if(l&&l.local){const m=ac(t[n]);return Ul(()=>t[n],y=>m.value=y),Ul(m,y=>{y!==t[n]&&p.emit(`update:${n}`,y)}),m}else return{__v_isRef:!0,get value(){return t[n]},set value(m){p.emit(`update:${n}`,m)}}}function R1(){const t=ns();return t.setupContext||(t.setupContext=ix(t))}function qp(t){return xt(t)?t.reduce((n,l)=>(n[l]=null,n),{}):t}function YS(t,n){const l=qp(t);for(const p in n){if(p.startsWith("__skip"))continue;let m=l[p];m?xt(m)||Zt(m)?m=l[p]={type:m,default:n[p]}:m.default=n[p]:m===null&&(m=l[p]={default:n[p]}),m&&n[`__skip_${p}`]&&(m.skipFactory=!0)}return l}function QS(t,n){return!t||!n?t||n:xt(t)&&xt(n)?t.concat(n):vr({},qp(t),qp(n))}function e3(t,n){const l={};for(const p in t)n.includes(p)||Object.defineProperty(l,p,{enumerable:!0,get:()=>t[p]});return l}function t3(t){const n=ns();let l=t();return Os(),Zg(l)&&(l=l.catch(p=>{throw Vs(n),p})),[l,()=>Vs(n)]}let yg=!0;function r3(t){const n=fy(t),l=t.proxy,p=t.ctx;yg=!1,n.beforeCreate&&z_(n.beforeCreate,t,"bc");const{data:m,computed:y,methods:x,watch:E,provide:C,inject:k,created:D,beforeMount:N,mounted:ee,beforeUpdate:se,updated:ne,activated:ve,deactivated:fe,beforeDestroy:pe,beforeUnmount:ue,destroyed:be,unmounted:_e,render:Oe,renderTracked:f,renderTriggered:ke,errorCaptured:Y,serverPrefetch:Fe,expose:ze,inheritAttrs:Xe,components:xe,directives:mt,filters:et}=n;if(k&&n3(k,p,null),x)for(const rr in x){const Ot=x[rr];Zt(Ot)&&(p[rr]=Ot.bind(l))}if(m){const rr=m.call(l,l);Ur(rr)&&(t.data=Ed(rr))}if(yg=!0,y)for(const rr in y){const Ot=y[rr],gn=Zt(Ot)?Ot.bind(l,l):Zt(Ot.get)?Ot.get.bind(l,l):Bi,di=!Zt(Ot)&&Zt(Ot.set)?Ot.set.bind(l):Bi,Kr=ox({get:gn,set:di});Object.defineProperty(p,rr,{enumerable:!0,configurable:!0,get:()=>Kr.value,set:yn=>Kr.value=yn})}if(E)for(const rr in E)O1(E[rr],p,l,rr);if(C){const rr=Zt(C)?C.call(l):C;Reflect.ownKeys(rr).forEach(Ot=>{B1(Ot,rr[Ot])})}D&&z_(D,t,"c");function Rt(rr,Ot){xt(Ot)?Ot.forEach(gn=>rr(gn.bind(l))):Ot&&rr(Ot.bind(l))}if(Rt(T1,N),Rt(oh,ee),Rt(C1,se),Rt(zd,ne),Rt(w1,ve),Rt(E1,fe),Rt(P1,Y),Rt(k1,f),Rt(I1,ke),Rt(Ld,ue),Rt(Rd,_e),Rt(A1,Fe),xt(ze))if(ze.length){const rr=t.exposed||(t.exposed={});ze.forEach(Ot=>{Object.defineProperty(rr,Ot,{get:()=>l[Ot],set:gn=>l[Ot]=gn})})}else t.exposed||(t.exposed={});Oe&&t.render===Bi&&(t.render=Oe),Xe!=null&&(t.inheritAttrs=Xe),xe&&(t.components=xe),mt&&(t.directives=mt)}function n3(t,n,l=Bi){xt(t)&&(t=vg(t));for(const p in t){const m=t[p];let y;Ur(m)?"default"in m?y=Mp(m.from||p,m.default,!0):y=Mp(m.from||p):y=Mp(m),Gn(y)?Object.defineProperty(n,p,{enumerable:!0,configurable:!0,get:()=>y.value,set:x=>y.value=x}):n[p]=y}}function z_(t,n,l){go(xt(t)?t.map(p=>p.bind(n.proxy)):t.bind(n.proxy),n,l)}function O1(t,n,l,p){const m=p.includes(".")?v1(l,p):()=>l[p];if(tr(t)){const y=n[t];Zt(y)&&Ul(m,y)}else if(Zt(t))Ul(m,t.bind(l));else if(Ur(t))if(xt(t))t.forEach(y=>O1(y,n,l,p));else{const y=Zt(t.handler)?t.handler.bind(l):n[t.handler];Zt(y)&&Ul(m,y,t)}}function fy(t){const n=t.type,{mixins:l,extends:p}=n,{mixins:m,optionsCache:y,config:{optionMergeStrategies:x}}=t.appContext,E=y.get(n);let C;return E?C=E:!m.length&&!l&&!p?C=n:(C={},m.length&&m.forEach(k=>ed(C,k,x,!0)),ed(C,n,x)),Ur(n)&&y.set(n,C),C}function ed(t,n,l,p=!1){const{mixins:m,extends:y}=n;y&&ed(t,y,l,!0),m&&m.forEach(x=>ed(t,x,l,!0));for(const x in n)if(!(p&&x==="expose")){const E=i3[x]||l&&l[x];t[x]=E?E(t[x],n[x]):n[x]}return t}const i3={data:L_,props:R_,emits:R_,methods:kp,computed:kp,beforeCreate:Di,created:Di,beforeMount:Di,mounted:Di,beforeUpdate:Di,updated:Di,beforeDestroy:Di,beforeUnmount:Di,destroyed:Di,unmounted:Di,activated:Di,deactivated:Di,errorCaptured:Di,serverPrefetch:Di,components:kp,directives:kp,watch:a3,provide:L_,inject:o3};function L_(t,n){return n?t?function(){return vr(Zt(t)?t.call(this,this):t,Zt(n)?n.call(this,this):n)}:n:t}function o3(t,n){return kp(vg(t),vg(n))}function vg(t){if(xt(t)){const n={};for(let l=0;l<t.length;l++)n[t[l]]=t[l];return n}return t}function Di(t,n){return t?[...new Set([].concat(t,n))]:n}function kp(t,n){return t?vr(Object.create(null),t,n):n}function R_(t,n){return t?xt(t)&&xt(n)?[...new Set([...t,...n])]:vr(Object.create(null),qp(t),qp(n??{})):n}function a3(t,n){if(!t)return n;if(!n)return t;const l=vr(Object.create(null),t);for(const p in n)l[p]=Di(t[p],n[p]);return l}function D1(){return{app:null,config:{isNativeTag:Nf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let s3=0;function l3(t,n){return function(p,m=null){Zt(p)||(p=vr({},p)),m!=null&&!Ur(m)&&(m=null);const y=D1(),x=new Set;let E=!1;const C=y.app={_uid:s3++,_component:p,_props:m,_container:null,_context:y,_instance:null,version:cx,get config(){return y.config},set config(k){},use(k,...D){return x.has(k)||(k&&Zt(k.install)?(x.add(k),k.install(C,...D)):Zt(k)&&(x.add(k),k(C,...D))),C},mixin(k){return y.mixins.includes(k)||y.mixins.push(k),C},component(k,D){return D?(y.components[k]=D,C):y.components[k]},directive(k,D){return D?(y.directives[k]=D,C):y.directives[k]},mount(k,D,N){if(!E){const ee=Vr(p,m);return ee.appContext=y,D&&n?n(ee,k):t(ee,k,N),E=!0,C._container=k,k.__vue_app__=C,Dd(ee.component)||ee.component.proxy}},unmount(){E&&(t(null,C._container),delete C._container.__vue_app__)},provide(k,D){return y.provides[k]=D,C},runWithContext(k){Hp=C;try{return k()}finally{Hp=null}}};return C}}let Hp=null;function B1(t,n){if(Un){let l=Un.provides;const p=Un.parent&&Un.parent.provides;p===l&&(l=Un.provides=Object.create(p)),l[t]=n}}function Mp(t,n,l=!1){const p=Un||oi;if(p||Hp){const m=p?p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:Hp._context.provides;if(m&&t in m)return m[t];if(arguments.length>1)return l&&Zt(n)?n.call(p&&p.proxy):n}}function u3(){return!!(Un||oi||Hp)}function c3(t,n,l,p=!1){const m={},y={};Kf(y,Od,1),t.propsDefaults=Object.create(null),F1(t,n,m,y);for(const x in t.propsOptions[0])x in m||(m[x]=void 0);l?t.props=p?m:s1(m):t.type.props?t.props=m:t.props=y,t.attrs=y}function p3(t,n,l,p){const{props:m,attrs:y,vnode:{patchFlag:x}}=t,E=_r(m),[C]=t.propsOptions;let k=!1;if((p||x>0)&&!(x&16)){if(x&8){const D=t.vnode.dynamicProps;for(let N=0;N<D.length;N++){let ee=D[N];if(Ad(t.emitsOptions,ee))continue;const se=n[ee];if(C)if(Tr(y,ee))se!==y[ee]&&(y[ee]=se,k=!0);else{const ne=Vn(ee);m[ne]=_g(C,E,ne,se,t,!1)}else se!==y[ee]&&(y[ee]=se,k=!0)}}}else{F1(t,n,m,y)&&(k=!0);let D;for(const N in E)(!n||!Tr(n,N)&&((D=fo(N))===N||!Tr(n,D)))&&(C?l&&(l[N]!==void 0||l[D]!==void 0)&&(m[N]=_g(C,E,N,void 0,t,!0)):delete m[N]);if(y!==E)for(const N in y)(!n||!Tr(n,N))&&(delete y[N],k=!0)}k&&ts(t,"set","$attrs")}function F1(t,n,l,p){const[m,y]=t.propsOptions;let x=!1,E;if(n)for(let C in n){if(Bl(C))continue;const k=n[C];let D;m&&Tr(m,D=Vn(C))?!y||!y.includes(D)?l[D]=k:(E||(E={}))[D]=k:Ad(t.emitsOptions,C)||(!(C in p)||k!==p[C])&&(p[C]=k,x=!0)}if(y){const C=_r(l),k=E||Nr;for(let D=0;D<y.length;D++){const N=y[D];l[N]=_g(m,C,N,k[N],t,!Tr(k,N))}}return x}function _g(t,n,l,p,m,y){const x=t[l];if(x!=null){const E=Tr(x,"default");if(E&&p===void 0){const C=x.default;if(x.type!==Function&&!x.skipFactory&&Zt(C)){const{propsDefaults:k}=m;l in k?p=k[l]:(Vs(m),p=k[l]=C.call(null,n),Os())}else p=C}x[0]&&(y&&!E?p=!1:x[1]&&(p===""||p===fo(l))&&(p=!0))}return p}function N1(t,n,l=!1){const p=n.propsCache,m=p.get(t);if(m)return m;const y=t.props,x={},E=[];let C=!1;if(!Zt(t)){const D=N=>{C=!0;const[ee,se]=N1(N,n,!0);vr(x,ee),se&&E.push(...se)};!l&&n.mixins.length&&n.mixins.forEach(D),t.extends&&D(t.extends),t.mixins&&t.mixins.forEach(D)}if(!y&&!C)return Ur(t)&&p.set(t,rc),rc;if(xt(y))for(let D=0;D<y.length;D++){const N=Vn(y[D]);O_(N)&&(x[N]=Nr)}else if(y)for(const D in y){const N=Vn(D);if(O_(N)){const ee=y[D],se=x[N]=xt(ee)||Zt(ee)?{type:ee}:vr({},ee);if(se){const ne=F_(Boolean,se.type),ve=F_(String,se.type);se[0]=ne>-1,se[1]=ve<0||ne<ve,(ne>-1||Tr(se,"default"))&&E.push(N)}}}const k=[x,E];return Ur(t)&&p.set(t,k),k}function O_(t){return t[0]!=="$"}function D_(t){const n=t&&t.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:t===null?"null":""}function B_(t,n){return D_(t)===D_(n)}function F_(t,n){return xt(n)?n.findIndex(l=>B_(l,t)):Zt(n)&&B_(n,t)?0:-1}const U1=t=>t[0]==="_"||t==="$stable",dy=t=>xt(t)?t.map(ho):[ho(t)],h3=(t,n,l)=>{if(n._n)return n;const p=kd((...m)=>dy(n(...m)),l);return p._c=!1,p},V1=(t,n,l)=>{const p=t._ctx;for(const m in t){if(U1(m))continue;const y=t[m];if(Zt(y))n[m]=h3(m,y,p);else if(y!=null){const x=dy(y);n[m]=()=>x}}},j1=(t,n)=>{const l=dy(n);t.slots.default=()=>l},f3=(t,n)=>{if(t.vnode.shapeFlag&32){const l=n._;l?(t.slots=_r(n),Kf(n,"_",l)):V1(n,t.slots={})}else t.slots={},n&&j1(t,n);Kf(t.slots,Od,1)},d3=(t,n,l)=>{const{vnode:p,slots:m}=t;let y=!0,x=Nr;if(p.shapeFlag&32){const E=n._;E?l&&E===1?y=!1:(vr(m,n),!l&&E===1&&delete m._):(y=!n.$stable,V1(n,m)),x=n}else n&&(j1(t,n),x={default:1});if(y)for(const E in m)!U1(E)&&!(E in x)&&delete m[E]};function td(t,n,l,p,m=!1){if(xt(t)){t.forEach((ee,se)=>td(ee,n&&(xt(n)?n[se]:n),l,p,m));return}if(Vl(p)&&!m)return;const y=p.shapeFlag&4?Dd(p.component)||p.component.proxy:p.el,x=m?null:y,{i:E,r:C}=t,k=n&&n.r,D=E.refs===Nr?E.refs={}:E.refs,N=E.setupState;if(k!=null&&k!==C&&(tr(k)?(D[k]=null,Tr(N,k)&&(N[k]=null)):Gn(k)&&(k.value=null)),Zt(C))Qa(C,E,12,[x,D]);else{const ee=tr(C),se=Gn(C);if(ee||se){const ne=()=>{if(t.f){const ve=ee?Tr(N,C)?N[C]:D[C]:C.value;m?xt(ve)&&Hg(ve,y):xt(ve)?ve.includes(y)||ve.push(y):ee?(D[C]=[y],Tr(N,C)&&(N[C]=D[C])):(C.value=[y],t.k&&(D[t.k]=C.value))}else ee?(D[C]=x,Tr(N,C)&&(N[C]=x)):se&&(C.value=x,t.k&&(D[t.k]=x))};x?(ne.id=-1,fi(ne,l)):ne()}}}let Cs=!1;const Mf=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",zf=t=>t.nodeType===8;function m3(t){const{mt:n,p:l,o:{patchProp:p,createText:m,nextSibling:y,parentNode:x,remove:E,insert:C,createComment:k}}=t,D=(pe,ue)=>{if(!ue.hasChildNodes()){l(null,pe,ue),Qf(),ue._vnode=pe;return}Cs=!1,N(ue.firstChild,pe,null,null,null),Qf(),ue._vnode=pe,Cs&&console.error("Hydration completed but contains mismatches.")},N=(pe,ue,be,_e,Oe,f=!1)=>{const ke=zf(pe)&&pe.data==="[",Y=()=>ve(pe,ue,be,_e,Oe,ke),{type:Fe,ref:ze,shapeFlag:Xe,patchFlag:xe}=ue;let mt=pe.nodeType;ue.el=pe,xe===-2&&(f=!1,ue.dynamicChildren=null);let et=null;switch(Fe){case Gl:mt!==3?ue.children===""?(C(ue.el=m(""),x(pe),pe),et=pe):et=Y():(pe.data!==ue.children&&(Cs=!0,pe.data=ue.children),et=y(pe));break;case Ci:mt!==8||ke?et=Y():et=y(pe);break;case jl:if(ke&&(pe=y(pe),mt=pe.nodeType),mt===1||mt===3){et=pe;const Wt=!ue.children.length;for(let Rt=0;Rt<ue.staticCount;Rt++)Wt&&(ue.children+=et.nodeType===1?et.outerHTML:et.data),Rt===ue.staticCount-1&&(ue.anchor=et),et=y(et);return ke?y(et):et}else Y();break;case ii:ke?et=ne(pe,ue,be,_e,Oe,f):et=Y();break;default:if(Xe&1)mt!==1||ue.type.toLowerCase()!==pe.tagName.toLowerCase()?et=Y():et=ee(pe,ue,be,_e,Oe,f);else if(Xe&6){ue.slotScopeIds=Oe;const Wt=x(pe);if(n(ue,Wt,null,be,_e,Mf(Wt),f),et=ke?fe(pe):y(pe),et&&zf(et)&&et.data==="teleport end"&&(et=y(et)),Vl(ue)){let Rt;ke?(Rt=Vr(ii),Rt.anchor=et?et.previousSibling:Wt.lastChild):Rt=pe.nodeType===3?gy(""):Vr("div"),Rt.el=pe,ue.component.subTree=Rt}}else Xe&64?mt!==8?et=Y():et=ue.type.hydrate(pe,ue,be,_e,Oe,f,t,se):Xe&128&&(et=ue.type.hydrate(pe,ue,be,_e,Mf(x(pe)),Oe,f,t,N))}return ze!=null&&td(ze,null,_e,ue),et},ee=(pe,ue,be,_e,Oe,f)=>{f=f||!!ue.dynamicChildren;const{type:ke,props:Y,patchFlag:Fe,shapeFlag:ze,dirs:Xe}=ue,xe=ke==="input"&&Xe||ke==="option";if(xe||Fe!==-1){if(Xe&&ga(ue,null,be,"created"),Y)if(xe||!f||Fe&48)for(const et in Y)(xe&&et.endsWith("value")||Kl(et)&&!Bl(et))&&p(pe,et,null,Y[et],!1,void 0,be);else Y.onClick&&p(pe,"onClick",null,Y.onClick,!1,void 0,be);let mt;if((mt=Y&&Y.onVnodeBeforeMount)&&Ki(mt,be,ue),Xe&&ga(ue,null,be,"beforeMount"),((mt=Y&&Y.onVnodeMounted)||Xe)&&g1(()=>{mt&&Ki(mt,be,ue),Xe&&ga(ue,null,be,"mounted")},_e),ze&16&&!(Y&&(Y.innerHTML||Y.textContent))){let et=se(pe.firstChild,ue,pe,be,_e,Oe,f);for(;et;){Cs=!0;const Wt=et;et=et.nextSibling,E(Wt)}}else ze&8&&pe.textContent!==ue.children&&(Cs=!0,pe.textContent=ue.children)}return pe.nextSibling},se=(pe,ue,be,_e,Oe,f,ke)=>{ke=ke||!!ue.dynamicChildren;const Y=ue.children,Fe=Y.length;for(let ze=0;ze<Fe;ze++){const Xe=ke?Y[ze]:Y[ze]=ho(Y[ze]);if(pe)pe=N(pe,Xe,_e,Oe,f,ke);else{if(Xe.type===Gl&&!Xe.children)continue;Cs=!0,l(null,Xe,be,null,_e,Oe,Mf(be),f)}}return pe},ne=(pe,ue,be,_e,Oe,f)=>{const{slotScopeIds:ke}=ue;ke&&(Oe=Oe?Oe.concat(ke):ke);const Y=x(pe),Fe=se(y(pe),ue,Y,be,_e,Oe,f);return Fe&&zf(Fe)&&Fe.data==="]"?y(ue.anchor=Fe):(Cs=!0,C(ue.anchor=k("]"),Y,Fe),Fe)},ve=(pe,ue,be,_e,Oe,f)=>{if(Cs=!0,ue.el=null,f){const Fe=fe(pe);for(;;){const ze=y(pe);if(ze&&ze!==Fe)E(ze);else break}}const ke=y(pe),Y=x(pe);return E(pe),l(null,ue,Y,ke,be,_e,Mf(Y),Oe),ke},fe=pe=>{let ue=0;for(;pe;)if(pe=y(pe),pe&&zf(pe)&&(pe.data==="["&&ue++,pe.data==="]")){if(ue===0)return y(pe);ue--}return pe};return[D,N]}const fi=g1;function q1(t){return Z1(t)}function H1(t){return Z1(t,m3)}function Z1(t,n){const l=cg();l.__VUE__=!0;const{insert:p,remove:m,patchProp:y,createElement:x,createText:E,createComment:C,setText:k,setElementText:D,parentNode:N,nextSibling:ee,setScopeId:se=Bi,insertStaticContent:ne}=t,ve=(oe,de,Be,$e=null,qe=null,Je=null,Te=!1,Le=null,Re=!!de.dynamicChildren)=>{if(oe===de)return;oe&&!Zo(oe,de)&&($e=Ln(oe),yn(oe,qe,Je,!0),oe=null),de.patchFlag===-2&&(Re=!1,de.dynamicChildren=null);const{type:Ae,ref:Ye,shapeFlag:He}=de;switch(Ae){case Gl:fe(oe,de,Be,$e);break;case Ci:pe(oe,de,Be,$e);break;case jl:oe==null&&ue(de,Be,$e,Te);break;case ii:xe(oe,de,Be,$e,qe,Je,Te,Le,Re);break;default:He&1?Oe(oe,de,Be,$e,qe,Je,Te,Le,Re):He&6?mt(oe,de,Be,$e,qe,Je,Te,Le,Re):(He&64||He&128)&&Ae.process(oe,de,Be,$e,qe,Je,Te,Le,Re,mr)}Ye!=null&&qe&&td(Ye,oe&&oe.ref,Je,de||oe,!de)},fe=(oe,de,Be,$e)=>{if(oe==null)p(de.el=E(de.children),Be,$e);else{const qe=de.el=oe.el;de.children!==oe.children&&k(qe,de.children)}},pe=(oe,de,Be,$e)=>{oe==null?p(de.el=C(de.children||""),Be,$e):de.el=oe.el},ue=(oe,de,Be,$e)=>{[oe.el,oe.anchor]=ne(oe.children,de,Be,$e,oe.el,oe.anchor)},be=({el:oe,anchor:de},Be,$e)=>{let qe;for(;oe&&oe!==de;)qe=ee(oe),p(oe,Be,$e),oe=qe;p(de,Be,$e)},_e=({el:oe,anchor:de})=>{let Be;for(;oe&&oe!==de;)Be=ee(oe),m(oe),oe=Be;m(de)},Oe=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{Te=Te||de.type==="svg",oe==null?f(de,Be,$e,qe,Je,Te,Le,Re):Fe(oe,de,qe,Je,Te,Le,Re)},f=(oe,de,Be,$e,qe,Je,Te,Le)=>{let Re,Ae;const{type:Ye,props:He,shapeFlag:ct,transition:nt,dirs:It}=oe;if(Re=oe.el=x(oe.type,Je,He&&He.is,He),ct&8?D(Re,oe.children):ct&16&&Y(oe.children,Re,null,$e,qe,Je&&Ye!=="foreignObject",Te,Le),It&&ga(oe,null,$e,"created"),ke(Re,oe,oe.scopeId,Te,$e),He){for(const qt in He)qt!=="value"&&!Bl(qt)&&y(Re,qt,null,He[qt],Je,oe.children,$e,qe,nn);"value"in He&&y(Re,"value",null,He.value),(Ae=He.onVnodeBeforeMount)&&Ki(Ae,$e,oe)}It&&ga(oe,null,$e,"beforeMount");const jt=(!qe||qe&&!qe.pendingBranch)&&nt&&!nt.persisted;jt&&nt.beforeEnter(Re),p(Re,de,Be),((Ae=He&&He.onVnodeMounted)||jt||It)&&fi(()=>{Ae&&Ki(Ae,$e,oe),jt&&nt.enter(Re),It&&ga(oe,null,$e,"mounted")},qe)},ke=(oe,de,Be,$e,qe)=>{if(Be&&se(oe,Be),$e)for(let Je=0;Je<$e.length;Je++)se(oe,$e[Je]);if(qe){let Je=qe.subTree;if(de===Je){const Te=qe.vnode;ke(oe,Te,Te.scopeId,Te.slotScopeIds,qe.parent)}}},Y=(oe,de,Be,$e,qe,Je,Te,Le,Re=0)=>{for(let Ae=Re;Ae<oe.length;Ae++){const Ye=oe[Ae]=Le?Ms(oe[Ae]):ho(oe[Ae]);ve(null,Ye,de,Be,$e,qe,Je,Te,Le)}},Fe=(oe,de,Be,$e,qe,Je,Te)=>{const Le=de.el=oe.el;let{patchFlag:Re,dynamicChildren:Ae,dirs:Ye}=de;Re|=oe.patchFlag&16;const He=oe.props||Nr,ct=de.props||Nr;let nt;Be&&kl(Be,!1),(nt=ct.onVnodeBeforeUpdate)&&Ki(nt,Be,de,oe),Ye&&ga(de,oe,Be,"beforeUpdate"),Be&&kl(Be,!0);const It=qe&&de.type!=="foreignObject";if(Ae?ze(oe.dynamicChildren,Ae,Le,Be,$e,It,Je):Te||Ot(oe,de,Le,null,Be,$e,It,Je,!1),Re>0){if(Re&16)Xe(Le,de,He,ct,Be,$e,qe);else if(Re&2&&He.class!==ct.class&&y(Le,"class",null,ct.class,qe),Re&4&&y(Le,"style",He.style,ct.style,qe),Re&8){const jt=de.dynamicProps;for(let qt=0;qt<jt.length;qt++){const dt=jt[qt],Mr=He[dt],zr=ct[dt];(zr!==Mr||dt==="value")&&y(Le,dt,Mr,zr,qe,oe.children,Be,$e,nn)}}Re&1&&oe.children!==de.children&&D(Le,de.children)}else!Te&&Ae==null&&Xe(Le,de,He,ct,Be,$e,qe);((nt=ct.onVnodeUpdated)||Ye)&&fi(()=>{nt&&Ki(nt,Be,de,oe),Ye&&ga(de,oe,Be,"updated")},$e)},ze=(oe,de,Be,$e,qe,Je,Te)=>{for(let Le=0;Le<de.length;Le++){const Re=oe[Le],Ae=de[Le],Ye=Re.el&&(Re.type===ii||!Zo(Re,Ae)||Re.shapeFlag&70)?N(Re.el):Be;ve(Re,Ae,Ye,null,$e,qe,Je,Te,!0)}},Xe=(oe,de,Be,$e,qe,Je,Te)=>{if(Be!==$e){if(Be!==Nr)for(const Le in Be)!Bl(Le)&&!(Le in $e)&&y(oe,Le,Be[Le],null,Te,de.children,qe,Je,nn);for(const Le in $e){if(Bl(Le))continue;const Re=$e[Le],Ae=Be[Le];Re!==Ae&&Le!=="value"&&y(oe,Le,Ae,Re,Te,de.children,qe,Je,nn)}"value"in $e&&y(oe,"value",Be.value,$e.value)}},xe=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{const Ae=de.el=oe?oe.el:E(""),Ye=de.anchor=oe?oe.anchor:E("");let{patchFlag:He,dynamicChildren:ct,slotScopeIds:nt}=de;nt&&(Le=Le?Le.concat(nt):nt),oe==null?(p(Ae,Be,$e),p(Ye,Be,$e),Y(de.children,Be,Ye,qe,Je,Te,Le,Re)):He>0&&He&64&&ct&&oe.dynamicChildren?(ze(oe.dynamicChildren,ct,Be,qe,Je,Te,Le),(de.key!=null||qe&&de===qe.subTree)&&my(oe,de,!0)):Ot(oe,de,Be,Ye,qe,Je,Te,Le,Re)},mt=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{de.slotScopeIds=Le,oe==null?de.shapeFlag&512?qe.ctx.activate(de,Be,$e,Te,Re):et(de,Be,$e,qe,Je,Te,Re):Wt(oe,de,Re)},et=(oe,de,Be,$e,qe,Je,Te)=>{const Le=oe.component=Q1(oe,$e,qe);if(ih(oe)&&(Le.ctx.renderer=mr),tx(Le),Le.asyncDep){if(qe&&qe.registerDep(Le,Rt),!oe.el){const Re=Le.subTree=Vr(Ci);pe(null,Re,de,Be)}return}Rt(Le,oe,de,Be,qe,Je,Te)},Wt=(oe,de,Be)=>{const $e=de.component=oe.component;if(_S(oe,de,Be))if($e.asyncDep&&!$e.asyncResolved){rr($e,de,Be);return}else $e.next=de,hS($e.update),$e.update();else de.el=oe.el,$e.vnode=de},Rt=(oe,de,Be,$e,qe,Je,Te)=>{const Le=()=>{if(oe.isMounted){let{next:Ye,bu:He,u:ct,parent:nt,vnode:It}=oe,jt=Ye,qt;kl(oe,!1),Ye?(Ye.el=It.el,rr(oe,Ye,Te)):Ye=It,He&&oc(He),(qt=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&Ki(qt,nt,Ye,It),kl(oe,!0);const dt=Uf(oe),Mr=oe.subTree;oe.subTree=dt,ve(Mr,dt,N(Mr.el),Ln(Mr),oe,qe,Je),Ye.el=dt.el,jt===null&&ay(oe,dt.el),ct&&fi(ct,qe),(qt=Ye.props&&Ye.props.onVnodeUpdated)&&fi(()=>Ki(qt,nt,Ye,It),qe)}else{let Ye;const{el:He,props:ct}=de,{bm:nt,m:It,parent:jt}=oe,qt=Vl(de);if(kl(oe,!1),nt&&oc(nt),!qt&&(Ye=ct&&ct.onVnodeBeforeMount)&&Ki(Ye,jt,de),kl(oe,!0),He&&no){const dt=()=>{oe.subTree=Uf(oe),no(He,oe.subTree,oe,qe,null)};qt?de.type.__asyncLoader().then(()=>!oe.isUnmounted&&dt()):dt()}else{const dt=oe.subTree=Uf(oe);ve(null,dt,Be,$e,oe,qe,Je),de.el=dt.el}if(It&&fi(It,qe),!qt&&(Ye=ct&&ct.onVnodeMounted)){const dt=de;fi(()=>Ki(Ye,jt,dt),qe)}(de.shapeFlag&256||jt&&Vl(jt.vnode)&&jt.vnode.shapeFlag&256)&&oe.a&&fi(oe.a,qe),oe.isMounted=!0,de=Be=$e=null}},Re=oe.effect=new eh(Le,()=>Cd(Ae),oe.scope),Ae=oe.update=()=>Re.run();Ae.id=oe.uid,kl(oe,!0),Ae()},rr=(oe,de,Be)=>{de.component=oe;const $e=oe.vnode.props;oe.vnode=de,oe.next=null,p3(oe,de.props,$e,Be),d3(oe,de.children,Be),Ec(),A_(),Sc()},Ot=(oe,de,Be,$e,qe,Je,Te,Le,Re=!1)=>{const Ae=oe&&oe.children,Ye=oe?oe.shapeFlag:0,He=de.children,{patchFlag:ct,shapeFlag:nt}=de;if(ct>0){if(ct&128){di(Ae,He,Be,$e,qe,Je,Te,Le,Re);return}else if(ct&256){gn(Ae,He,Be,$e,qe,Je,Te,Le,Re);return}}nt&8?(Ye&16&&nn(Ae,qe,Je),He!==Ae&&D(Be,He)):Ye&16?nt&16?di(Ae,He,Be,$e,qe,Je,Te,Le,Re):nn(Ae,qe,Je,!0):(Ye&8&&D(Be,""),nt&16&&Y(He,Be,$e,qe,Je,Te,Le,Re))},gn=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{oe=oe||rc,de=de||rc;const Ae=oe.length,Ye=de.length,He=Math.min(Ae,Ye);let ct;for(ct=0;ct<He;ct++){const nt=de[ct]=Re?Ms(de[ct]):ho(de[ct]);ve(oe[ct],nt,Be,null,qe,Je,Te,Le,Re)}Ae>Ye?nn(oe,qe,Je,!0,!1,He):Y(de,Be,$e,qe,Je,Te,Le,Re,He)},di=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{let Ae=0;const Ye=de.length;let He=oe.length-1,ct=Ye-1;for(;Ae<=He&&Ae<=ct;){const nt=oe[Ae],It=de[Ae]=Re?Ms(de[Ae]):ho(de[Ae]);if(Zo(nt,It))ve(nt,It,Be,null,qe,Je,Te,Le,Re);else break;Ae++}for(;Ae<=He&&Ae<=ct;){const nt=oe[He],It=de[ct]=Re?Ms(de[ct]):ho(de[ct]);if(Zo(nt,It))ve(nt,It,Be,null,qe,Je,Te,Le,Re);else break;He--,ct--}if(Ae>He){if(Ae<=ct){const nt=ct+1,It=nt<Ye?de[nt].el:$e;for(;Ae<=ct;)ve(null,de[Ae]=Re?Ms(de[Ae]):ho(de[Ae]),Be,It,qe,Je,Te,Le,Re),Ae++}}else if(Ae>ct)for(;Ae<=He;)yn(oe[Ae],qe,Je,!0),Ae++;else{const nt=Ae,It=Ae,jt=new Map;for(Ae=It;Ae<=ct;Ae++){const ur=de[Ae]=Re?Ms(de[Ae]):ho(de[Ae]);ur.key!=null&&jt.set(ur.key,Ae)}let qt,dt=0;const Mr=ct-It+1;let zr=!1,pn=0;const Pi=new Array(Mr);for(Ae=0;Ae<Mr;Ae++)Pi[Ae]=0;for(Ae=nt;Ae<=He;Ae++){const ur=oe[Ae];if(dt>=Mr){yn(ur,qe,Je,!0);continue}let nr;if(ur.key!=null)nr=jt.get(ur.key);else for(qt=It;qt<=ct;qt++)if(Pi[qt-It]===0&&Zo(ur,de[qt])){nr=qt;break}nr===void 0?yn(ur,qe,Je,!0):(Pi[nr-It]=Ae+1,nr>=pn?pn=nr:zr=!0,ve(ur,de[nr],Be,null,qe,Je,Te,Le,Re),dt++)}const Rn=zr?g3(Pi):rc;for(qt=Rn.length-1,Ae=Mr-1;Ae>=0;Ae--){const ur=It+Ae,nr=de[ur],vn=ur+1<Ye?de[ur+1].el:$e;Pi[Ae]===0?ve(null,nr,Be,vn,qe,Je,Te,Le,Re):zr&&(qt<0||Ae!==Rn[qt]?Kr(nr,Be,vn,2):qt--)}}},Kr=(oe,de,Be,$e,qe=null)=>{const{el:Je,type:Te,transition:Le,children:Re,shapeFlag:Ae}=oe;if(Ae&6){Kr(oe.component.subTree,de,Be,$e);return}if(Ae&128){oe.suspense.move(de,Be,$e);return}if(Ae&64){Te.move(oe,de,Be,mr);return}if(Te===ii){p(Je,de,Be);for(let He=0;He<Re.length;He++)Kr(Re[He],de,Be,$e);p(oe.anchor,de,Be);return}if(Te===jl){be(oe,de,Be);return}if($e!==2&&Ae&1&&Le)if($e===0)Le.beforeEnter(Je),p(Je,de,Be),fi(()=>Le.enter(Je),qe);else{const{leave:He,delayLeave:ct,afterLeave:nt}=Le,It=()=>p(Je,de,Be),jt=()=>{He(Je,()=>{It(),nt&&nt()})};ct?ct(Je,It,jt):jt()}else p(Je,de,Be)},yn=(oe,de,Be,$e=!1,qe=!1)=>{const{type:Je,props:Te,ref:Le,children:Re,dynamicChildren:Ae,shapeFlag:Ye,patchFlag:He,dirs:ct}=oe;if(Le!=null&&td(Le,null,Be,oe,!0),Ye&256){de.ctx.deactivate(oe);return}const nt=Ye&1&&ct,It=!Vl(oe);let jt;if(It&&(jt=Te&&Te.onVnodeBeforeUnmount)&&Ki(jt,de,oe),Ye&6)un(oe.component,Be,$e);else{if(Ye&128){oe.suspense.unmount(Be,$e);return}nt&&ga(oe,null,de,"beforeUnmount"),Ye&64?oe.type.remove(oe,de,Be,qe,mr,$e):Ae&&(Je!==ii||He>0&&He&64)?nn(Ae,de,Be,!1,!0):(Je===ii&&He&384||!qe&&Ye&16)&&nn(Re,de,Be),$e&&ki(oe)}(It&&(jt=Te&&Te.onVnodeUnmounted)||nt)&&fi(()=>{jt&&Ki(jt,de,oe),nt&&ga(oe,null,de,"unmounted")},Be)},ki=oe=>{const{type:de,el:Be,anchor:$e,transition:qe}=oe;if(de===ii){Fi(Be,$e);return}if(de===jl){_e(oe);return}const Je=()=>{m(Be),qe&&!qe.persisted&&qe.afterLeave&&qe.afterLeave()};if(oe.shapeFlag&1&&qe&&!qe.persisted){const{leave:Te,delayLeave:Le}=qe,Re=()=>Te(Be,Je);Le?Le(oe.el,Je,Re):Re()}else Je()},Fi=(oe,de)=>{let Be;for(;oe!==de;)Be=ee(oe),m(oe),oe=Be;m(de)},un=(oe,de,Be)=>{const{bum:$e,scope:qe,update:Je,subTree:Te,um:Le}=oe;$e&&oc($e),qe.stop(),Je&&(Je.active=!1,yn(Te,oe,de,Be)),Le&&fi(Le,de),fi(()=>{oe.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},nn=(oe,de,Be,$e=!1,qe=!1,Je=0)=>{for(let Te=Je;Te<oe.length;Te++)yn(oe[Te],de,Be,$e,qe)},Ln=oe=>oe.shapeFlag&6?Ln(oe.component.subTree):oe.shapeFlag&128?oe.suspense.next():ee(oe.anchor||oe.el),ro=(oe,de,Be)=>{oe==null?de._vnode&&yn(de._vnode,null,null,!0):ve(de._vnode||null,oe,de,null,null,null,Be),A_(),Qf(),de._vnode=oe},mr={p:ve,um:yn,m:Kr,r:ki,mt:et,mc:Y,pc:Ot,pbc:ze,n:Ln,o:t};let cn,no;return n&&([cn,no]=n(mr)),{render:ro,hydrate:cn,createApp:l3(ro,cn)}}function kl({effect:t,update:n},l){t.allowRecurse=n.allowRecurse=l}function my(t,n,l=!1){const p=t.children,m=n.children;if(xt(p)&&xt(m))for(let y=0;y<p.length;y++){const x=p[y];let E=m[y];E.shapeFlag&1&&!E.dynamicChildren&&((E.patchFlag<=0||E.patchFlag===32)&&(E=m[y]=Ms(m[y]),E.el=x.el),l||my(x,E)),E.type===Gl&&(E.el=x.el)}}function g3(t){const n=t.slice(),l=[0];let p,m,y,x,E;const C=t.length;for(p=0;p<C;p++){const k=t[p];if(k!==0){if(m=l[l.length-1],t[m]<k){n[p]=m,l.push(p);continue}for(y=0,x=l.length-1;y<x;)E=y+x>>1,t[l[E]]<k?y=E+1:x=E;k<t[l[y]]&&(y>0&&(n[p]=l[y-1]),l[y]=p)}}for(y=l.length,x=l[y-1];y-- >0;)l[y]=x,x=n[x];return l}const y3=t=>t.__isTeleport,zp=t=>t&&(t.disabled||t.disabled===""),N_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,xg=(t,n)=>{const l=t&&t.to;return tr(l)?n?n(l):null:l},v3={__isTeleport:!0,process(t,n,l,p,m,y,x,E,C,k){const{mc:D,pc:N,pbc:ee,o:{insert:se,querySelector:ne,createText:ve,createComment:fe}}=k,pe=zp(n.props);let{shapeFlag:ue,children:be,dynamicChildren:_e}=n;if(t==null){const Oe=n.el=ve(""),f=n.anchor=ve("");se(Oe,l,p),se(f,l,p);const ke=n.target=xg(n.props,ne),Y=n.targetAnchor=ve("");ke&&(se(Y,ke),x=x||N_(ke));const Fe=(ze,Xe)=>{ue&16&&D(be,ze,Xe,m,y,x,E,C)};pe?Fe(l,f):ke&&Fe(ke,Y)}else{n.el=t.el;const Oe=n.anchor=t.anchor,f=n.target=t.target,ke=n.targetAnchor=t.targetAnchor,Y=zp(t.props),Fe=Y?l:f,ze=Y?Oe:ke;if(x=x||N_(f),_e?(ee(t.dynamicChildren,_e,Fe,m,y,x,E),my(t,n,!0)):C||N(t,n,Fe,ze,m,y,x,E,!1),pe)Y||Lf(n,l,Oe,k,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const Xe=n.target=xg(n.props,ne);Xe&&Lf(n,Xe,null,k,0)}else Y&&Lf(n,f,ke,k,1)}G1(n)},remove(t,n,l,p,{um:m,o:{remove:y}},x){const{shapeFlag:E,children:C,anchor:k,targetAnchor:D,target:N,props:ee}=t;if(N&&y(D),(x||!zp(ee))&&(y(k),E&16))for(let se=0;se<C.length;se++){const ne=C[se];m(ne,n,l,!0,!!ne.dynamicChildren)}},move:Lf,hydrate:_3};function Lf(t,n,l,{o:{insert:p},m},y=2){y===0&&p(t.targetAnchor,n,l);const{el:x,anchor:E,shapeFlag:C,children:k,props:D}=t,N=y===2;if(N&&p(x,n,l),(!N||zp(D))&&C&16)for(let ee=0;ee<k.length;ee++)m(k[ee],n,l,2);N&&p(E,n,l)}function _3(t,n,l,p,m,y,{o:{nextSibling:x,parentNode:E,querySelector:C}},k){const D=n.target=xg(n.props,C);if(D){const N=D._lpa||D.firstChild;if(n.shapeFlag&16)if(zp(n.props))n.anchor=k(x(t),n,E(t),l,p,m,y),n.targetAnchor=N;else{n.anchor=x(t);let ee=N;for(;ee;)if(ee=x(ee),ee&&ee.nodeType===8&&ee.data==="teleport anchor"){n.targetAnchor=ee,D._lpa=n.targetAnchor&&x(n.targetAnchor);break}k(N,n,D,l,p,m,y)}G1(n)}return n.anchor&&x(n.anchor)}const x3=v3;function G1(t){const n=t.ctx;if(n&&n.ut){let l=t.children[0].el;for(;l!==t.targetAnchor;)l.nodeType===1&&l.setAttribute("data-v-owner",n.uid),l=l.nextSibling;n.ut()}}const ii=Symbol.for("v-fgt"),Gl=Symbol.for("v-txt"),Ci=Symbol.for("v-cmt"),jl=Symbol.for("v-stc"),Lp=[];let Ji=null;function Sn(t=!1){Lp.push(Ji=t?null:[])}function $1(){Lp.pop(),Ji=Lp[Lp.length-1]||null}let $l=1;function bg(t){$l+=t}function W1(t){return t.dynamicChildren=$l>0?Ji||rc:null,$1(),$l>0&&Ji&&Ji.push(t),t}function Xi(t,n,l,p,m,y){return W1(Ft(t,n,l,p,m,y,!0))}function Rs(t,n,l,p,m){return W1(Vr(t,n,l,p,m,!0))}function Us(t){return t?t.__v_isVNode===!0:!1}function Zo(t,n){return t.type===n.type&&t.key===n.key}function b3(t){}const Od="__vInternal",K1=({key:t})=>t??null,Vf=({ref:t,ref_key:n,ref_for:l})=>(typeof t=="number"&&(t=""+t),t!=null?tr(t)||Gn(t)||Zt(t)?{i:oi,r:t,k:n,f:!!l}:t:null);function Ft(t,n=null,l=null,p=0,m=null,y=t===ii?0:1,x=!1,E=!1){const C={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&K1(n),ref:n&&Vf(n),scopeId:Id,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:p,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:oi};return E?(yy(C,l),y&128&&t.normalize(C)):l&&(C.shapeFlag|=tr(l)?8:16),$l>0&&!x&&Ji&&(C.patchFlag>0||y&6)&&C.patchFlag!==32&&Ji.push(C),C}const Vr=w3;function w3(t,n=null,l=null,p=0,m=null,y=!1){if((!t||t===M1)&&(t=Ci),Us(t)){const E=_a(t,n,!0);return l&&yy(E,l),$l>0&&!y&&Ji&&(E.shapeFlag&6?Ji[Ji.indexOf(t)]=E:Ji.push(E)),E.patchFlag|=-2,E}if(I3(t)&&(t=t.__vccOpts),n){n=X1(n);let{class:E,style:C}=n;E&&!tr(E)&&(n.class=wc(E)),Ur(C)&&(Jg(C)&&!xt(C)&&(C=vr({},C)),n.style=Qp(C))}const x=tr(t)?1:m1(t)?128:y3(t)?64:Ur(t)?4:Zt(t)?2:0;return Ft(t,n,l,p,m,x,y,!0)}function X1(t){return t?Jg(t)||Od in t?vr({},t):t:null}function _a(t,n,l=!1){const{props:p,ref:m,patchFlag:y,children:x}=t,E=n?Y1(p||{},n):p;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:E,key:E&&K1(E),ref:n&&n.ref?l&&m?xt(m)?m.concat(Vf(n)):[m,Vf(n)]:Vf(n):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:x,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==ii?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_a(t.ssContent),ssFallback:t.ssFallback&&_a(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function gy(t=" ",n=0){return Vr(Gl,null,t,n)}function J1(t,n){const l=Vr(jl,null,t);return l.staticCount=n,l}function Ya(t="",n=!1){return n?(Sn(),Rs(Ci,null,t)):Vr(Ci,null,t)}function ho(t){return t==null||typeof t=="boolean"?Vr(Ci):xt(t)?Vr(ii,null,t.slice()):typeof t=="object"?Ms(t):Vr(Gl,null,String(t))}function Ms(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_a(t)}function yy(t,n){let l=0;const{shapeFlag:p}=t;if(n==null)n=null;else if(xt(n))l=16;else if(typeof n=="object")if(p&65){const m=n.default;m&&(m._c&&(m._d=!1),yy(t,m()),m._c&&(m._d=!0));return}else{l=32;const m=n._;!m&&!(Od in n)?n._ctx=oi:m===3&&oi&&(oi.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Zt(n)?(n={default:n,_ctx:oi},l=32):(n=String(n),p&64?(l=16,n=[gy(n)]):l=8);t.children=n,t.shapeFlag|=l}function Y1(...t){const n={};for(let l=0;l<t.length;l++){const p=t[l];for(const m in p)if(m==="class")n.class!==p.class&&(n.class=wc([n.class,p.class]));else if(m==="style")n.style=Qp([n.style,p.style]);else if(Kl(m)){const y=n[m],x=p[m];x&&y!==x&&!(xt(y)&&y.includes(x))&&(n[m]=y?[].concat(y,x):x)}else m!==""&&(n[m]=p[m])}return n}function Ki(t,n,l,p=null){go(t,n,7,[l,p])}const E3=D1();let S3=0;function Q1(t,n,l){const p=t.type,m=(n?n.appContext:t.appContext)||E3,y={uid:S3++,vnode:t,type:p,parent:n,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new $g(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:N1(p,m),emitsOptions:d1(p,m),emit:null,emitted:null,propsDefaults:Nr,inheritAttrs:p.inheritAttrs,ctx:Nr,data:Nr,props:Nr,attrs:Nr,slots:Nr,refs:Nr,setupState:Nr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=n?n.root:y,y.emit=dS.bind(null,y),t.ce&&t.ce(y),y}let Un=null;const ns=()=>Un||oi;let vy,Yu,U_="__VUE_INSTANCE_SETTERS__";(Yu=cg()[U_])||(Yu=cg()[U_]=[]),Yu.push(t=>Un=t),vy=t=>{Yu.length>1?Yu.forEach(n=>n(t)):Yu[0](t)};const Vs=t=>{vy(t),t.scope.on()},Os=()=>{Un&&Un.scope.off(),vy(null)};function ex(t){return t.vnode.shapeFlag&4}let fc=!1;function tx(t,n=!1){fc=n;const{props:l,children:p}=t.vnode,m=ex(t);c3(t,l,m,n),f3(t,p);const y=m?T3(t,n):void 0;return fc=!1,y}function T3(t,n){const l=t.type;t.accessCache=Object.create(null),t.proxy=Yg(new Proxy(t.ctx,gg));const{setup:p}=l;if(p){const m=t.setupContext=p.length>1?ix(t):null;Vs(t),Ec();const y=Qa(p,t,0,[t.props,m]);if(Sc(),Os(),Zg(y)){if(y.then(Os,Os),n)return y.then(x=>{wg(t,x,n)}).catch(x=>{Yl(x,t,0)});t.asyncDep=y}else wg(t,y,n)}else nx(t,n)}function wg(t,n,l){Zt(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ur(n)&&(t.setupState=ry(n)),nx(t,l)}let rd,Eg;function rx(t){rd=t,Eg=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,VS))}}const C3=()=>!rd;function nx(t,n,l){const p=t.type;if(!t.render){if(!n&&rd&&!p.render){const m=p.template||fy(t).template;if(m){const{isCustomElement:y,compilerOptions:x}=t.appContext.config,{delimiters:E,compilerOptions:C}=p,k=vr(vr({isCustomElement:y,delimiters:E},x),C);p.render=rd(m,k)}}t.render=p.render||Bi,Eg&&Eg(t)}Vs(t),Ec(),r3(t),Sc(),Os()}function A3(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(n,l){return Qi(t,"get","$attrs"),n[l]}}))}function ix(t){const n=l=>{t.exposed=l||{}};return{get attrs(){return A3(t)},slots:t.slots,emit:t.emit,expose:n}}function Dd(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ry(Yg(t.exposed)),{get(n,l){if(l in n)return n[l];if(l in Pp)return Pp[l](t)},has(n,l){return l in n||l in Pp}}))}function Sg(t,n=!0){return Zt(t)?t.displayName||t.name:t.name||n&&t.__name}function I3(t){return Zt(t)&&"__vccOpts"in t}const ox=(t,n)=>sS(t,n,fc);function ax(t,n,l){const p=arguments.length;return p===2?Ur(n)&&!xt(n)?Us(n)?Vr(t,null,[n]):Vr(t,n):Vr(t,null,n):(p>3?l=Array.prototype.slice.call(arguments,2):p===3&&Us(l)&&(l=[l]),Vr(t,n,l))}const sx=Symbol.for("v-scx"),lx=()=>Mp(sx);function k3(){}function P3(t,n,l,p){const m=l[p];if(m&&ux(m,t))return m;const y=n();return y.memo=t.slice(),l[p]=y}function ux(t,n){const l=t.memo;if(l.length!=n.length)return!1;for(let p=0;p<l.length;p++)if(pc(l[p],n[p]))return!1;return $l>0&&Ji&&Ji.push(t),!0}const cx="3.3.4",M3={createComponentInstance:Q1,setupComponent:tx,renderComponentRoot:Uf,setCurrentRenderingInstance:Vp,isVNode:Us,normalizeVNode:ho},z3=M3,L3=null,R3=null,O3="http://www.w3.org/2000/svg",Rl=typeof document<"u"?document:null,V_=Rl&&Rl.createElement("template"),D3={insert:(t,n,l)=>{n.insertBefore(t,l||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,l,p)=>{const m=n?Rl.createElementNS(O3,t):Rl.createElement(t,l?{is:l}:void 0);return t==="select"&&p&&p.multiple!=null&&m.setAttribute("multiple",p.multiple),m},createText:t=>Rl.createTextNode(t),createComment:t=>Rl.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rl.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,l,p,m,y){const x=l?l.previousSibling:n.lastChild;if(m&&(m===y||m.nextSibling))for(;n.insertBefore(m.cloneNode(!0),l),!(m===y||!(m=m.nextSibling)););else{V_.innerHTML=p?`<svg>${t}</svg>`:t;const E=V_.content;if(p){const C=E.firstChild;for(;C.firstChild;)E.appendChild(C.firstChild);E.removeChild(C)}n.insertBefore(E,l)}return[x?x.nextSibling:n.firstChild,l?l.previousSibling:n.lastChild]}};function B3(t,n,l){const p=t._vtc;p&&(n=(n?[n,...p]:[...p]).join(" ")),n==null?t.removeAttribute("class"):l?t.setAttribute("class",n):t.className=n}function F3(t,n,l){const p=t.style,m=tr(l);if(l&&!m){if(n&&!tr(n))for(const y in n)l[y]==null&&Tg(p,y,"");for(const y in l)Tg(p,y,l[y])}else{const y=p.display;m?n!==l&&(p.cssText=l):n&&t.removeAttribute("style"),"_vod"in t&&(p.display=y)}}const j_=/\s*!important$/;function Tg(t,n,l){if(xt(l))l.forEach(p=>Tg(t,n,p));else if(l==null&&(l=""),n.startsWith("--"))t.setProperty(n,l);else{const p=N3(t,n);j_.test(l)?t.setProperty(fo(p),l.replace(j_,""),"important"):t[p]=l}}const q_=["Webkit","Moz","ms"],Km={};function N3(t,n){const l=Km[n];if(l)return l;let p=Vn(n);if(p!=="filter"&&p in t)return Km[n]=p;p=Jl(p);for(let m=0;m<q_.length;m++){const y=q_[m]+p;if(y in t)return Km[n]=y}return n}const H_="http://www.w3.org/1999/xlink";function U3(t,n,l,p,m){if(p&&n.startsWith("xlink:"))l==null?t.removeAttributeNS(H_,n.slice(6,n.length)):t.setAttributeNS(H_,n,l);else{const y=dE(n);l==null||y&&!Z0(l)?t.removeAttribute(n):t.setAttribute(n,y?"":l)}}function V3(t,n,l,p,m,y,x){if(n==="innerHTML"||n==="textContent"){p&&x(p,m,y),t[n]=l??"";return}const E=t.tagName;if(n==="value"&&E!=="PROGRESS"&&!E.includes("-")){t._value=l;const k=E==="OPTION"?t.getAttribute("value"):t.value,D=l??"";k!==D&&(t.value=D),l==null&&t.removeAttribute(n);return}let C=!1;if(l===""||l==null){const k=typeof t[n];k==="boolean"?l=Z0(l):l==null&&k==="string"?(l="",C=!0):k==="number"&&(l=0,C=!0)}try{t[n]=l}catch{}C&&t.removeAttribute(n)}function Xa(t,n,l,p){t.addEventListener(n,l,p)}function j3(t,n,l,p){t.removeEventListener(n,l,p)}function q3(t,n,l,p,m=null){const y=t._vei||(t._vei={}),x=y[n];if(p&&x)x.value=p;else{const[E,C]=H3(n);if(p){const k=y[n]=$3(p,m);Xa(t,E,k,C)}else x&&(j3(t,E,x,C),y[n]=void 0)}}const Z_=/(?:Once|Passive|Capture)$/;function H3(t){let n;if(Z_.test(t)){n={};let p;for(;p=t.match(Z_);)t=t.slice(0,t.length-p[0].length),n[p[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fo(t.slice(2)),n]}let Xm=0;const Z3=Promise.resolve(),G3=()=>Xm||(Z3.then(()=>Xm=0),Xm=Date.now());function $3(t,n){const l=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=l.attached)return;go(W3(p,l.value),n,5,[p])};return l.value=t,l.attached=G3(),l}function W3(t,n){if(xt(n)){const l=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{l.call(t),t._stopped=!0},n.map(p=>m=>!m._stopped&&p&&p(m))}else return n}const G_=/^on[a-z]/,K3=(t,n,l,p,m=!1,y,x,E,C)=>{n==="class"?B3(t,p,m):n==="style"?F3(t,l,p):Kl(n)?qg(n)||q3(t,n,l,p,x):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):X3(t,n,p,m))?V3(t,n,p,y,x,E,C):(n==="true-value"?t._trueValue=p:n==="false-value"&&(t._falseValue=p),U3(t,n,p,m))};function X3(t,n,l,p){return p?!!(n==="innerHTML"||n==="textContent"||n in t&&G_.test(n)&&Zt(l)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||G_.test(n)&&tr(l)?!1:n in t}function px(t,n){const l=cy(t);class p extends Bd{constructor(y){super(l,y,n)}}return p.def=l,p}const J3=t=>px(t,Ix),Y3=typeof HTMLElement<"u"?HTMLElement:class{};class Bd extends Y3{constructor(n,l={},p){super(),this._def=n,this._props=l,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&p?p(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,iy(()=>{this._connected||(Ig(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let p=0;p<this.attributes.length;p++)this._setAttr(this.attributes[p].name);new MutationObserver(p=>{for(const m of p)this._setAttr(m.attributeName)}).observe(this,{attributes:!0});const n=(p,m=!1)=>{const{props:y,styles:x}=p;let E;if(y&&!xt(y))for(const C in y){const k=y[C];(k===Number||k&&k.type===Number)&&(C in this._props&&(this._props[C]=Jf(this._props[C])),(E||(E=Object.create(null)))[Vn(C)]=!0)}this._numberProps=E,m&&this._resolveProps(p),this._applyStyles(x),this._update()},l=this._def.__asyncLoader;l?l().then(p=>n(p,!0)):n(this._def)}_resolveProps(n){const{props:l}=n,p=xt(l)?l:Object.keys(l||{});for(const m of Object.keys(this))m[0]!=="_"&&p.includes(m)&&this._setProp(m,this[m],!0,!1);for(const m of p.map(Vn))Object.defineProperty(this,m,{get(){return this._getProp(m)},set(y){this._setProp(m,y)}})}_setAttr(n){let l=this.getAttribute(n);const p=Vn(n);this._numberProps&&this._numberProps[p]&&(l=Jf(l)),this._setProp(p,l,!1)}_getProp(n){return this._props[n]}_setProp(n,l,p=!0,m=!0){l!==this._props[n]&&(this._props[n]=l,m&&this._instance&&this._update(),p&&(l===!0?this.setAttribute(fo(n),""):typeof l=="string"||typeof l=="number"?this.setAttribute(fo(n),l+""):l||this.removeAttribute(fo(n))))}_update(){Ig(this._createVNode(),this.shadowRoot)}_createVNode(){const n=Vr(this._def,vr({},this._props));return this._instance||(n.ce=l=>{this._instance=l,l.isCE=!0;const p=(y,x)=>{this.dispatchEvent(new CustomEvent(y,{detail:x}))};l.emit=(y,...x)=>{p(y,x),fo(y)!==y&&p(fo(y),x)};let m=this;for(;m=m&&(m.parentNode||m.host);)if(m instanceof Bd){l.parent=m._instance,l.provides=m._instance.provides;break}}),n}_applyStyles(n){n&&n.forEach(l=>{const p=document.createElement("style");p.textContent=l,this.shadowRoot.appendChild(p)})}}function Q3(t="$style"){{const n=ns();if(!n)return Nr;const l=n.type.__cssModules;if(!l)return Nr;const p=l[t];return p||Nr}}function eT(t){const n=ns();if(!n)return;const l=n.ut=(m=t(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(y=>Ag(y,m))},p=()=>{const m=t(n.proxy);Cg(n.subTree,m),l(m)};y1(p),oh(()=>{const m=new MutationObserver(p);m.observe(n.subTree.el.parentNode,{childList:!0}),Rd(()=>m.disconnect())})}function Cg(t,n){if(t.shapeFlag&128){const l=t.suspense;t=l.activeBranch,l.pendingBranch&&!l.isHydrating&&l.effects.push(()=>{Cg(l.activeBranch,n)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Ag(t.el,n);else if(t.type===ii)t.children.forEach(l=>Cg(l,n));else if(t.type===jl){let{el:l,anchor:p}=t;for(;l&&(Ag(l,n),l!==p);)l=l.nextSibling}}function Ag(t,n){if(t.nodeType===1){const l=t.style;for(const p in n)l.setProperty(`--${p}`,n[p])}}const As="transition",Ep="animation",Fd=(t,{slots:n})=>ax(x1,fx(t),n);Fd.displayName="Transition";const hx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},tT=Fd.props=vr({},uy,hx),Pl=(t,n=[])=>{xt(t)?t.forEach(l=>l(...n)):t&&t(...n)},$_=t=>t?xt(t)?t.some(n=>n.length>1):t.length>1:!1;function fx(t){const n={};for(const xe in t)xe in hx||(n[xe]=t[xe]);if(t.css===!1)return n;const{name:l="v",type:p,duration:m,enterFromClass:y=`${l}-enter-from`,enterActiveClass:x=`${l}-enter-active`,enterToClass:E=`${l}-enter-to`,appearFromClass:C=y,appearActiveClass:k=x,appearToClass:D=E,leaveFromClass:N=`${l}-leave-from`,leaveActiveClass:ee=`${l}-leave-active`,leaveToClass:se=`${l}-leave-to`}=t,ne=rT(m),ve=ne&&ne[0],fe=ne&&ne[1],{onBeforeEnter:pe,onEnter:ue,onEnterCancelled:be,onLeave:_e,onLeaveCancelled:Oe,onBeforeAppear:f=pe,onAppear:ke=ue,onAppearCancelled:Y=be}=n,Fe=(xe,mt,et)=>{Ps(xe,mt?D:E),Ps(xe,mt?k:x),et&&et()},ze=(xe,mt)=>{xe._isLeaving=!1,Ps(xe,N),Ps(xe,se),Ps(xe,ee),mt&&mt()},Xe=xe=>(mt,et)=>{const Wt=xe?ke:ue,Rt=()=>Fe(mt,xe,et);Pl(Wt,[mt,Rt]),W_(()=>{Ps(mt,xe?C:y),Wa(mt,xe?D:E),$_(Wt)||K_(mt,p,ve,Rt)})};return vr(n,{onBeforeEnter(xe){Pl(pe,[xe]),Wa(xe,y),Wa(xe,x)},onBeforeAppear(xe){Pl(f,[xe]),Wa(xe,C),Wa(xe,k)},onEnter:Xe(!1),onAppear:Xe(!0),onLeave(xe,mt){xe._isLeaving=!0;const et=()=>ze(xe,mt);Wa(xe,N),mx(),Wa(xe,ee),W_(()=>{xe._isLeaving&&(Ps(xe,N),Wa(xe,se),$_(_e)||K_(xe,p,fe,et))}),Pl(_e,[xe,et])},onEnterCancelled(xe){Fe(xe,!1),Pl(be,[xe])},onAppearCancelled(xe){Fe(xe,!0),Pl(Y,[xe])},onLeaveCancelled(xe){ze(xe),Pl(Oe,[xe])}})}function rT(t){if(t==null)return null;if(Ur(t))return[Jm(t.enter),Jm(t.leave)];{const n=Jm(t);return[n,n]}}function Jm(t){return Jf(t)}function Wa(t,n){n.split(/\s+/).forEach(l=>l&&t.classList.add(l)),(t._vtc||(t._vtc=new Set)).add(n)}function Ps(t,n){n.split(/\s+/).forEach(p=>p&&t.classList.remove(p));const{_vtc:l}=t;l&&(l.delete(n),l.size||(t._vtc=void 0))}function W_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nT=0;function K_(t,n,l,p){const m=t._endId=++nT,y=()=>{m===t._endId&&p()};if(l)return setTimeout(y,l);const{type:x,timeout:E,propCount:C}=dx(t,n);if(!x)return p();const k=x+"end";let D=0;const N=()=>{t.removeEventListener(k,ee),y()},ee=se=>{se.target===t&&++D>=C&&N()};setTimeout(()=>{D<C&&N()},E+1),t.addEventListener(k,ee)}function dx(t,n){const l=window.getComputedStyle(t),p=ne=>(l[ne]||"").split(", "),m=p(`${As}Delay`),y=p(`${As}Duration`),x=X_(m,y),E=p(`${Ep}Delay`),C=p(`${Ep}Duration`),k=X_(E,C);let D=null,N=0,ee=0;n===As?x>0&&(D=As,N=x,ee=y.length):n===Ep?k>0&&(D=Ep,N=k,ee=C.length):(N=Math.max(x,k),D=N>0?x>k?As:Ep:null,ee=D?D===As?y.length:C.length:0);const se=D===As&&/\b(transform|all)(,|$)/.test(p(`${As}Property`).toString());return{type:D,timeout:N,propCount:ee,hasTransform:se}}function X_(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((l,p)=>J_(l)+J_(t[p])))}function J_(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function mx(){return document.body.offsetHeight}const gx=new WeakMap,yx=new WeakMap,vx={name:"TransitionGroup",props:vr({},tT,{tag:String,moveClass:String}),setup(t,{slots:n}){const l=ns(),p=ly();let m,y;return zd(()=>{if(!m.length)return;const x=t.moveClass||`${t.name||"v"}-move`;if(!uT(m[0].el,l.vnode.el,x))return;m.forEach(aT),m.forEach(sT);const E=m.filter(lT);mx(),E.forEach(C=>{const k=C.el,D=k.style;Wa(k,x),D.transform=D.webkitTransform=D.transitionDuration="";const N=k._moveCb=ee=>{ee&&ee.target!==k||(!ee||/transform$/.test(ee.propertyName))&&(k.removeEventListener("transitionend",N),k._moveCb=null,Ps(k,x))};k.addEventListener("transitionend",N)})}),()=>{const x=_r(t),E=fx(x);let C=x.tag||ii;m=y,y=n.default?Pd(n.default()):[];for(let k=0;k<y.length;k++){const D=y[k];D.key!=null&&Zl(D,hc(D,E,p,l))}if(m)for(let k=0;k<m.length;k++){const D=m[k];Zl(D,hc(D,E,p,l)),gx.set(D,D.el.getBoundingClientRect())}return Vr(C,null,y)}}},iT=t=>delete t.mode;vx.props;const oT=vx;function aT(t){const n=t.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function sT(t){yx.set(t,t.el.getBoundingClientRect())}function lT(t){const n=gx.get(t),l=yx.get(t),p=n.left-l.left,m=n.top-l.top;if(p||m){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${p}px,${m}px)`,y.transitionDuration="0s",t}}function uT(t,n,l){const p=t.cloneNode();t._vtc&&t._vtc.forEach(x=>{x.split(/\s+/).forEach(E=>E&&p.classList.remove(E))}),l.split(/\s+/).forEach(x=>x&&p.classList.add(x)),p.style.display="none";const m=n.nodeType===1?n:n.parentNode;m.appendChild(p);const{hasTransform:y}=dx(p);return m.removeChild(p),y}const js=t=>{const n=t.props["onUpdate:modelValue"]||!1;return xt(n)?l=>oc(n,l):n};function cT(t){t.target.composing=!0}function Y_(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Zp={created(t,{modifiers:{lazy:n,trim:l,number:p}},m){t._assign=js(m);const y=p||m.props&&m.props.type==="number";Xa(t,n?"change":"input",x=>{if(x.target.composing)return;let E=t.value;l&&(E=E.trim()),y&&(E=Xf(E)),t._assign(E)}),l&&Xa(t,"change",()=>{t.value=t.value.trim()}),n||(Xa(t,"compositionstart",cT),Xa(t,"compositionend",Y_),Xa(t,"change",Y_))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,modifiers:{lazy:l,trim:p,number:m}},y){if(t._assign=js(y),t.composing||document.activeElement===t&&t.type!=="range"&&(l||p&&t.value.trim()===n||(m||t.type==="number")&&Xf(t.value)===n))return;const x=n??"";t.value!==x&&(t.value=x)}},_y={deep:!0,created(t,n,l){t._assign=js(l),Xa(t,"change",()=>{const p=t._modelValue,m=dc(t),y=t.checked,x=t._assign;if(xt(p)){const E=_d(p,m),C=E!==-1;if(y&&!C)x(p.concat(m));else if(!y&&C){const k=[...p];k.splice(E,1),x(k)}}else if(Xl(p)){const E=new Set(p);y?E.add(m):E.delete(m),x(E)}else x(xx(t,y))})},mounted:Q_,beforeUpdate(t,n,l){t._assign=js(l),Q_(t,n,l)}};function Q_(t,{value:n,oldValue:l},p){t._modelValue=n,xt(n)?t.checked=_d(n,p.props.value)>-1:Xl(n)?t.checked=n.has(p.props.value):n!==l&&(t.checked=Fs(n,xx(t,!0)))}const xy={created(t,{value:n},l){t.checked=Fs(n,l.props.value),t._assign=js(l),Xa(t,"change",()=>{t._assign(dc(t))})},beforeUpdate(t,{value:n,oldValue:l},p){t._assign=js(p),n!==l&&(t.checked=Fs(n,p.props.value))}},_x={deep:!0,created(t,{value:n,modifiers:{number:l}},p){const m=Xl(n);Xa(t,"change",()=>{const y=Array.prototype.filter.call(t.options,x=>x.selected).map(x=>l?Xf(dc(x)):dc(x));t._assign(t.multiple?m?new Set(y):y:y[0])}),t._assign=js(p)},mounted(t,{value:n}){e0(t,n)},beforeUpdate(t,n,l){t._assign=js(l)},updated(t,{value:n}){e0(t,n)}};function e0(t,n){const l=t.multiple;if(!(l&&!xt(n)&&!Xl(n))){for(let p=0,m=t.options.length;p<m;p++){const y=t.options[p],x=dc(y);if(l)xt(n)?y.selected=_d(n,x)>-1:y.selected=n.has(x);else if(Fs(dc(y),n)){t.selectedIndex!==p&&(t.selectedIndex=p);return}}!l&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function dc(t){return"_value"in t?t._value:t.value}function xx(t,n){const l=n?"_trueValue":"_falseValue";return l in t?t[l]:n}const bx={created(t,n,l){Rf(t,n,l,null,"created")},mounted(t,n,l){Rf(t,n,l,null,"mounted")},beforeUpdate(t,n,l,p){Rf(t,n,l,p,"beforeUpdate")},updated(t,n,l,p){Rf(t,n,l,p,"updated")}};function wx(t,n){switch(t){case"SELECT":return _x;case"TEXTAREA":return Zp;default:switch(n){case"checkbox":return _y;case"radio":return xy;default:return Zp}}}function Rf(t,n,l,p,m){const x=wx(t.tagName,l.props&&l.props.type)[m];x&&x(t,n,l,p)}function pT(){Zp.getSSRProps=({value:t})=>({value:t}),xy.getSSRProps=({value:t},n)=>{if(n.props&&Fs(n.props.value,t))return{checked:!0}},_y.getSSRProps=({value:t},n)=>{if(xt(t)){if(n.props&&_d(t,n.props.value)>-1)return{checked:!0}}else if(Xl(t)){if(n.props&&t.has(n.props.value))return{checked:!0}}else if(t)return{checked:!0}},bx.getSSRProps=(t,n)=>{if(typeof n.type!="string")return;const l=wx(n.type.toUpperCase(),n.props&&n.props.type);if(l.getSSRProps)return l.getSSRProps(t,n)}}const hT=["ctrl","shift","alt","meta"],fT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>hT.some(l=>t[`${l}Key`]&&!n.includes(l))},Ex=(t,n)=>(l,...p)=>{for(let m=0;m<n.length;m++){const y=fT[n[m]];if(y&&y(l,n))return}return t(l,...p)},dT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mT=(t,n)=>l=>{if(!("key"in l))return;const p=fo(l.key);if(n.some(m=>m===p||dT[m]===p))return t(l)},Sx={beforeMount(t,{value:n},{transition:l}){t._vod=t.style.display==="none"?"":t.style.display,l&&n?l.beforeEnter(t):Sp(t,n)},mounted(t,{value:n},{transition:l}){l&&n&&l.enter(t)},updated(t,{value:n,oldValue:l},{transition:p}){!n!=!l&&(p?n?(p.beforeEnter(t),Sp(t,!0),p.enter(t)):p.leave(t,()=>{Sp(t,!1)}):Sp(t,n))},beforeUnmount(t,{value:n}){Sp(t,n)}};function Sp(t,n){t.style.display=n?t._vod:"none"}function gT(){Sx.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Tx=vr({patchProp:K3},D3);let Rp,t0=!1;function Cx(){return Rp||(Rp=q1(Tx))}function Ax(){return Rp=t0?Rp:H1(Tx),t0=!0,Rp}const Ig=(...t)=>{Cx().render(...t)},Ix=(...t)=>{Ax().hydrate(...t)},kx=(...t)=>{const n=Cx().createApp(...t),{mount:l}=n;return n.mount=p=>{const m=Px(p);if(!m)return;const y=n._component;!Zt(y)&&!y.render&&!y.template&&(y.template=m.innerHTML),m.innerHTML="";const x=l(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),x},n},yT=(...t)=>{const n=Ax().createApp(...t),{mount:l}=n;return n.mount=p=>{const m=Px(p);if(m)return l(m,!0,m instanceof SVGElement)},n};function Px(t){return tr(t)?document.querySelector(t):t}let r0=!1;const vT=()=>{r0||(r0=!0,pT(),gT())},_T=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:x1,BaseTransitionPropsValidators:uy,Comment:Ci,EffectScope:$g,Fragment:ii,KeepAlive:LS,ReactiveEffect:eh,Static:jl,Suspense:bS,Teleport:x3,Text:Gl,Transition:Fd,TransitionGroup:oT,VueElement:Bd,assertNumber:uS,callWithAsyncErrorHandling:go,callWithErrorHandling:Qa,camelize:Vn,capitalize:Jl,cloneVNode:_a,compatUtils:R3,computed:ox,createApp:kx,createBlock:Rs,createCommentVNode:Ya,createElementBlock:Xi,createElementVNode:Ft,createHydrationRenderer:H1,createPropsRestProxy:e3,createRenderer:q1,createSSRApp:yT,createSlots:FS,createStaticVNode:J1,createTextVNode:gy,createVNode:Vr,customRef:tS,defineAsyncComponent:MS,defineComponent:cy,defineCustomElement:px,defineEmits:qS,defineExpose:HS,defineModel:$S,defineOptions:ZS,defineProps:jS,defineSSRCustomElement:J3,defineSlots:GS,get devtools(){return ec},effect:xE,effectScope:gE,getCurrentInstance:ns,getCurrentScope:W0,getTransitionRawChildren:Pd,guardReactiveProps:X1,h:ax,handleError:Yl,hasInjectionContext:u3,hydrate:Ix,initCustomFormatter:k3,initDirectivesForSSR:vT,inject:Mp,isMemoSame:ux,isProxy:Jg,isReactive:Nl,isReadonly:Hl,isRef:Gn,isRuntimeOnly:C3,isShallow:Bp,isVNode:Us,markRaw:Yg,mergeDefaults:YS,mergeModels:QS,mergeProps:Y1,nextTick:iy,normalizeClass:wc,normalizeProps:aE,normalizeStyle:Qp,onActivated:w1,onBeforeMount:T1,onBeforeUnmount:Ld,onBeforeUpdate:C1,onDeactivated:E1,onErrorCaptured:P1,onMounted:oh,onRenderTracked:k1,onRenderTriggered:I1,onScopeDispose:yE,onServerPrefetch:A1,onUnmounted:Rd,onUpdated:zd,openBlock:Sn,popScopeId:rh,provide:B1,proxyRefs:ry,pushScopeId:th,queuePostFlushCb:oy,reactive:Ed,readonly:Xg,ref:ac,registerRuntimeCompiler:rx,render:Ig,renderList:z1,renderSlot:NS,resolveComponent:Ls,resolveDirective:BS,resolveDynamicComponent:DS,resolveFilter:L3,resolveTransitionHooks:hc,setBlockTracking:bg,setDevtoolsHook:f1,setTransitionHooks:Zl,shallowReactive:s1,shallowReadonly:WE,shallowRef:KE,ssrContextKey:sx,ssrUtils:z3,stop:bE,toDisplayString:Io,toHandlerKey:ic,toHandlers:US,toRaw:_r,toRef:oS,toRefs:rS,toValue:YE,transformVNodeArgs:b3,triggerRef:JE,unref:ty,useAttrs:XS,useCssModule:Q3,useCssVars:eT,useModel:JS,useSSRContext:lx,useSlots:KS,useTransitionState:ly,vModelCheckbox:_y,vModelDynamic:bx,vModelRadio:xy,vModelSelect:_x,vModelText:Zp,vShow:Sx,version:cx,warn:lS,watch:Ul,watchEffect:AS,watchPostEffect:y1,watchSyncEffect:IS,withAsyncContext:t3,withCtx:kd,withDefaults:WS,withDirectives:_1,withKeys:mT,withMemo:P3,withModifiers:Ex,withScopeId:mS},Symbol.toStringTag,{value:"Module"}));function by(t){throw t}function Mx(t){}function ln(t,n,l,p){const m=t,y=new SyntaxError(String(m));return y.code=t,y.loc=n,y}const Gp=Symbol(""),Op=Symbol(""),wy=Symbol(""),nd=Symbol(""),zx=Symbol(""),Wl=Symbol(""),Lx=Symbol(""),Rx=Symbol(""),Ey=Symbol(""),Sy=Symbol(""),ah=Symbol(""),Ty=Symbol(""),Ox=Symbol(""),Cy=Symbol(""),id=Symbol(""),Ay=Symbol(""),Iy=Symbol(""),ky=Symbol(""),Py=Symbol(""),Dx=Symbol(""),Bx=Symbol(""),Nd=Symbol(""),od=Symbol(""),My=Symbol(""),zy=Symbol(""),$p=Symbol(""),sh=Symbol(""),Ly=Symbol(""),kg=Symbol(""),xT=Symbol(""),Pg=Symbol(""),ad=Symbol(""),bT=Symbol(""),wT=Symbol(""),Ry=Symbol(""),ET=Symbol(""),ST=Symbol(""),Oy=Symbol(""),Fx=Symbol(""),mc={[Gp]:"Fragment",[Op]:"Teleport",[wy]:"Suspense",[nd]:"KeepAlive",[zx]:"BaseTransition",[Wl]:"openBlock",[Lx]:"createBlock",[Rx]:"createElementBlock",[Ey]:"createVNode",[Sy]:"createElementVNode",[ah]:"createCommentVNode",[Ty]:"createTextVNode",[Ox]:"createStaticVNode",[Cy]:"resolveComponent",[id]:"resolveDynamicComponent",[Ay]:"resolveDirective",[Iy]:"resolveFilter",[ky]:"withDirectives",[Py]:"renderList",[Dx]:"renderSlot",[Bx]:"createSlots",[Nd]:"toDisplayString",[od]:"mergeProps",[My]:"normalizeClass",[zy]:"normalizeStyle",[$p]:"normalizeProps",[sh]:"guardReactiveProps",[Ly]:"toHandlers",[kg]:"camelize",[xT]:"capitalize",[Pg]:"toHandlerKey",[ad]:"setBlockTracking",[bT]:"pushScopeId",[wT]:"popScopeId",[Ry]:"withCtx",[ET]:"unref",[ST]:"isRef",[Oy]:"withMemo",[Fx]:"isMemoSame"};function TT(t){Object.getOwnPropertySymbols(t).forEach(n=>{mc[n]=t[n]})}const vo={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function CT(t,n=vo){return{type:0,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:n}}function Wp(t,n,l,p,m,y,x,E=!1,C=!1,k=!1,D=vo){return t&&(E?(t.helper(Wl),t.helper(vc(t.inSSR,k))):t.helper(yc(t.inSSR,k)),x&&t.helper(ky)),{type:13,tag:n,props:l,children:p,patchFlag:m,dynamicProps:y,directives:x,isBlock:E,disableTracking:C,isComponent:k,loc:D}}function lh(t,n=vo){return{type:17,loc:n,elements:t}}function Po(t,n=vo){return{type:15,loc:n,properties:t}}function Tn(t,n){return{type:16,loc:vo,key:tr(t)?lr(t,!0):t,value:n}}function lr(t,n=!1,l=vo,p=0){return{type:4,loc:l,content:t,isStatic:n,constType:n?3:p}}function Go(t,n=vo){return{type:8,loc:n,children:t}}function Nn(t,n=[],l=vo){return{type:14,loc:l,callee:t,arguments:n}}function gc(t,n=void 0,l=!1,p=!1,m=vo){return{type:18,params:t,returns:n,newline:l,isSlot:p,loc:m}}function Mg(t,n,l,p=!0){return{type:19,test:t,consequent:n,alternate:l,newline:p,loc:vo}}function AT(t,n,l=!1){return{type:20,index:t,value:n,isVNode:l,loc:vo}}function IT(t){return{type:21,body:t,loc:vo}}function yc(t,n){return t||n?Ey:Sy}function vc(t,n){return t||n?Lx:Rx}function Dy(t,{helper:n,removeHelper:l,inSSR:p}){t.isBlock||(t.isBlock=!0,l(yc(p,t.isComponent)),n(Wl),n(vc(p,t.isComponent)))}const Yi=t=>t.type===4&&t.isStatic,tc=(t,n)=>t===n||t===fo(n);function Nx(t){if(tc(t,"Teleport"))return Op;if(tc(t,"Suspense"))return wy;if(tc(t,"KeepAlive"))return nd;if(tc(t,"BaseTransition"))return zx}const kT=/^\d|[^\$\w]/,By=t=>!kT.test(t),PT=/[A-Za-z_$\xA0-\uFFFF]/,MT=/[\.\?\w$\xA0-\uFFFF]/,zT=/\s+[.[]\s*|\s*[.[]\s+/g,LT=t=>{t=t.trim().replace(zT,x=>x.trim());let n=0,l=[],p=0,m=0,y=null;for(let x=0;x<t.length;x++){const E=t.charAt(x);switch(n){case 0:if(E==="[")l.push(n),n=1,p++;else if(E==="(")l.push(n),n=2,m++;else if(!(x===0?PT:MT).test(E))return!1;break;case 1:E==="'"||E==='"'||E==="`"?(l.push(n),n=3,y=E):E==="["?p++:E==="]"&&(--p||(n=l.pop()));break;case 2:if(E==="'"||E==='"'||E==="`")l.push(n),n=3,y=E;else if(E==="(")m++;else if(E===")"){if(x===t.length-1)return!1;--m||(n=l.pop())}break;case 3:E===y&&(n=l.pop(),y=null);break}}return!p&&!m},Ux=LT;function Vx(t,n,l){const m={source:t.source.slice(n,n+l),start:sd(t.start,t.source,n),end:t.end};return l!=null&&(m.end=sd(t.start,t.source,n+l)),m}function sd(t,n,l=n.length){return ld(vr({},t),n,l)}function ld(t,n,l=n.length){let p=0,m=-1;for(let y=0;y<l;y++)n.charCodeAt(y)===10&&(p++,m=y);return t.offset+=l,t.line+=p,t.column=m===-1?t.column+l:l-m,t}function ko(t,n,l=!1){for(let p=0;p<t.props.length;p++){const m=t.props[p];if(m.type===7&&(l||m.exp)&&(tr(n)?m.name===n:n.test(m.name)))return m}}function Ud(t,n,l=!1,p=!1){for(let m=0;m<t.props.length;m++){const y=t.props[m];if(y.type===6){if(l)continue;if(y.name===n&&(y.value||p))return y}else if(y.name==="bind"&&(y.exp||p)&&Dl(y.arg,n))return y}}function Dl(t,n){return!!(t&&Yi(t)&&t.content===n)}function RT(t){return t.props.some(n=>n.type===7&&n.name==="bind"&&(!n.arg||n.arg.type!==4||!n.arg.isStatic))}function Ym(t){return t.type===5||t.type===2}function OT(t){return t.type===7&&t.name==="slot"}function ud(t){return t.type===1&&t.tagType===3}function cd(t){return t.type===1&&t.tagType===2}const DT=new Set([$p,sh]);function jx(t,n=[]){if(t&&!tr(t)&&t.type===14){const l=t.callee;if(!tr(l)&&DT.has(l))return jx(t.arguments[0],n.concat(t))}return[t,n]}function pd(t,n,l){let p,m=t.type===13?t.props:t.arguments[2],y=[],x;if(m&&!tr(m)&&m.type===14){const E=jx(m);m=E[0],y=E[1],x=y[y.length-1]}if(m==null||tr(m))p=Po([n]);else if(m.type===14){const E=m.arguments[0];!tr(E)&&E.type===15?n0(n,E)||E.properties.unshift(n):m.callee===Ly?p=Nn(l.helper(od),[Po([n]),m]):m.arguments.unshift(Po([n])),!p&&(p=m)}else m.type===15?(n0(n,m)||m.properties.unshift(n),p=m):(p=Nn(l.helper(od),[Po([n]),m]),x&&x.callee===sh&&(x=y[y.length-2]));t.type===13?x?x.arguments[0]=p:t.props=p:x?x.arguments[0]=p:t.arguments[2]=p}function n0(t,n){let l=!1;if(t.key.type===4){const p=t.key.content;l=n.properties.some(m=>m.key.type===4&&m.key.content===p)}return l}function Kp(t,n){return`_${n}_${t.replace(/[^\w]/g,(l,p)=>l==="-"?"_":t.charCodeAt(p).toString())}`}function BT(t){return t.type===14&&t.callee===Oy?t.arguments[1].returns:t}function i0(t,n){const l=n.options?n.options.compatConfig:n.compatConfig,p=l&&l[t];return t==="MODE"?p||3:p}function ql(t,n){const l=i0("MODE",n),p=i0(t,n);return l===3?p===!0:p!==!1}function Xp(t,n,l,...p){return ql(t,n)}const FT=/&(gt|lt|amp|apos|quot);/g,NT={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},o0={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Nf,isPreTag:Nf,isCustomElement:Nf,decodeEntities:t=>t.replace(FT,(n,l)=>NT[l]),onError:by,onWarn:Mx,comments:!1};function UT(t,n={}){const l=VT(t,n),p=yo(l);return CT(Fy(l,0,[]),Lo(l,p))}function VT(t,n){const l=vr({},o0);let p;for(p in n)l[p]=n[p]===void 0?o0[p]:n[p];return{options:l,column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,onWarn:l.onWarn}}function Fy(t,n,l){const p=Vd(l),m=p?p.ns:0,y=[];for(;!XT(t,n,l);){const E=t.source;let C;if(n===0||n===1){if(!t.inVPre&&Ti(E,t.options.delimiters[0]))C=WT(t,n);else if(n===0&&E[0]==="<")if(E.length===1)Fr(t,5,1);else if(E[1]==="!")Ti(E,"<!--")?C=qT(t):Ti(E,"<!DOCTYPE")?C=Tp(t):Ti(E,"<![CDATA[")?m!==0?C=jT(t,l):(Fr(t,1),C=Tp(t)):(Fr(t,11),C=Tp(t));else if(E[1]==="/")if(E.length===2)Fr(t,5,2);else if(E[2]===">"){Fr(t,14,2),$n(t,3);continue}else if(/[a-z]/i.test(E[2])){Fr(t,23),zg(t,hd.End,p);continue}else Fr(t,12,2),C=Tp(t);else/[a-z]/i.test(E[1])?(C=HT(t,l),ql("COMPILER_NATIVE_TEMPLATE",t)&&C&&C.tag==="template"&&!C.props.some(k=>k.type===7&&qx(k.name))&&(C=C.children)):E[1]==="?"?(Fr(t,21,1),C=Tp(t)):Fr(t,12,1)}if(C||(C=KT(t,n)),xt(C))for(let k=0;k<C.length;k++)a0(y,C[k]);else a0(y,C)}let x=!1;if(n!==2&&n!==1){const E=t.options.whitespace!=="preserve";for(let C=0;C<y.length;C++){const k=y[C];if(k.type===2)if(t.inPre)k.content=k.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(k.content))E&&(k.content=k.content.replace(/[\t\r\n\f ]+/g," "));else{const D=y[C-1],N=y[C+1];!D||!N||E&&(D.type===3&&N.type===3||D.type===3&&N.type===1||D.type===1&&N.type===3||D.type===1&&N.type===1&&/[\r\n]/.test(k.content))?(x=!0,y[C]=null):k.content=" "}else k.type===3&&!t.options.comments&&(x=!0,y[C]=null)}if(t.inPre&&p&&t.options.isPreTag(p.tag)){const C=y[0];C&&C.type===2&&(C.content=C.content.replace(/^\r?\n/,""))}}return x?y.filter(Boolean):y}function a0(t,n){if(n.type===2){const l=Vd(t);if(l&&l.type===2&&l.loc.end.offset===n.loc.start.offset){l.content+=n.content,l.loc.end=n.loc.end,l.loc.source+=n.loc.source;return}}t.push(n)}function jT(t,n){$n(t,9);const l=Fy(t,3,n);return t.source.length===0?Fr(t,6):$n(t,3),l}function qT(t){const n=yo(t);let l;const p=/--(\!)?>/.exec(t.source);if(!p)l=t.source.slice(4),$n(t,t.source.length),Fr(t,7);else{p.index<=3&&Fr(t,0),p[1]&&Fr(t,10),l=t.source.slice(4,p.index);const m=t.source.slice(0,p.index);let y=1,x=0;for(;(x=m.indexOf("<!--",y))!==-1;)$n(t,x-y+1),x+4<m.length&&Fr(t,16),y=x+1;$n(t,p.index+p[0].length-y+1)}return{type:3,content:l,loc:Lo(t,n)}}function Tp(t){const n=yo(t),l=t.source[1]==="?"?1:2;let p;const m=t.source.indexOf(">");return m===-1?(p=t.source.slice(l),$n(t,t.source.length)):(p=t.source.slice(l,m),$n(t,m+1)),{type:3,content:p,loc:Lo(t,n)}}function HT(t,n){const l=t.inPre,p=t.inVPre,m=Vd(n),y=zg(t,hd.Start,m),x=t.inPre&&!l,E=t.inVPre&&!p;if(y.isSelfClosing||t.options.isVoidTag(y.tag))return x&&(t.inPre=!1),E&&(t.inVPre=!1),y;n.push(y);const C=t.options.getTextMode(y,m),k=Fy(t,C,n);n.pop();{const D=y.props.find(N=>N.type===6&&N.name==="inline-template");if(D&&Xp("COMPILER_INLINE_TEMPLATE",t,D.loc)){const N=Lo(t,y.loc.end);D.value={type:2,content:N.source,loc:N}}}if(y.children=k,Lg(t.source,y.tag))zg(t,hd.End,m);else if(Fr(t,24,0,y.loc.start),t.source.length===0&&y.tag.toLowerCase()==="script"){const D=k[0];D&&Ti(D.loc.source,"<!--")&&Fr(t,8)}return y.loc=Lo(t,y.loc.start),x&&(t.inPre=!1),E&&(t.inVPre=!1),y}var hd=(t=>(t[t.Start=0]="Start",t[t.End=1]="End",t))(hd||{});const qx=eo("if,else,else-if,for,slot");function zg(t,n,l){const p=yo(t),m=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),y=m[1],x=t.options.getNamespace(y,l);$n(t,m[0].length),Jp(t);const E=yo(t),C=t.source;t.options.isPreTag(y)&&(t.inPre=!0);let k=s0(t,n);n===0&&!t.inVPre&&k.some(ee=>ee.type===7&&ee.name==="pre")&&(t.inVPre=!0,vr(t,E),t.source=C,k=s0(t,n).filter(ee=>ee.name!=="v-pre"));let D=!1;if(t.source.length===0?Fr(t,9):(D=Ti(t.source,"/>"),n===1&&D&&Fr(t,4),$n(t,D?2:1)),n===1)return;let N=0;return t.inVPre||(y==="slot"?N=2:y==="template"?k.some(ee=>ee.type===7&&qx(ee.name))&&(N=3):ZT(y,k,t)&&(N=1)),{type:1,ns:x,tag:y,tagType:N,props:k,isSelfClosing:D,children:[],loc:Lo(t,p),codegenNode:void 0}}function ZT(t,n,l){const p=l.options;if(p.isCustomElement(t))return!1;if(t==="component"||/^[A-Z]/.test(t)||Nx(t)||p.isBuiltInComponent&&p.isBuiltInComponent(t)||p.isNativeTag&&!p.isNativeTag(t))return!0;for(let m=0;m<n.length;m++){const y=n[m];if(y.type===6){if(y.name==="is"&&y.value){if(y.value.content.startsWith("vue:"))return!0;if(Xp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}else{if(y.name==="is")return!0;if(y.name==="bind"&&Dl(y.arg,"is")&&Xp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}}function s0(t,n){const l=[],p=new Set;for(;t.source.length>0&&!Ti(t.source,">")&&!Ti(t.source,"/>");){if(Ti(t.source,"/")){Fr(t,22),$n(t,1),Jp(t);continue}n===1&&Fr(t,3);const m=GT(t,p);m.type===6&&m.value&&m.name==="class"&&(m.value.content=m.value.content.replace(/\s+/g," ").trim()),n===0&&l.push(m),/^[^\t\r\n\f />]/.test(t.source)&&Fr(t,15),Jp(t)}return l}function GT(t,n){var l;const p=yo(t),y=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];n.has(y)&&Fr(t,2),n.add(y),y[0]==="="&&Fr(t,19);{const C=/["'<]/g;let k;for(;k=C.exec(y);)Fr(t,17,k.index)}$n(t,y.length);let x;/^[\t\r\n\f ]*=/.test(t.source)&&(Jp(t),$n(t,1),Jp(t),x=$T(t),x||Fr(t,13));const E=Lo(t,p);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(y)){const C=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(y);let k=Ti(y,"."),D=C[1]||(k||Ti(y,":")?"bind":Ti(y,"@")?"on":"slot"),N;if(C[2]){const se=D==="slot",ne=y.lastIndexOf(C[2],y.length-(((l=C[3])==null?void 0:l.length)||0)),ve=Lo(t,l0(t,p,ne),l0(t,p,ne+C[2].length+(se&&C[3]||"").length));let fe=C[2],pe=!0;fe.startsWith("[")?(pe=!1,fe.endsWith("]")?fe=fe.slice(1,fe.length-1):(Fr(t,27),fe=fe.slice(1))):se&&(fe+=C[3]||""),N={type:4,content:fe,isStatic:pe,constType:pe?3:0,loc:ve}}if(x&&x.isQuoted){const se=x.loc;se.start.offset++,se.start.column++,se.end=sd(se.start,x.content),se.source=se.source.slice(1,-1)}const ee=C[3]?C[3].slice(1).split("."):[];return k&&ee.push("prop"),D==="bind"&&N&&ee.includes("sync")&&Xp("COMPILER_V_BIND_SYNC",t,E,N.loc.source)&&(D="model",ee.splice(ee.indexOf("sync"),1)),{type:7,name:D,exp:x&&{type:4,content:x.content,isStatic:!1,constType:0,loc:x.loc},arg:N,modifiers:ee,loc:E}}return!t.inVPre&&Ti(y,"v-")&&Fr(t,26),{type:6,name:y,value:x&&{type:2,content:x.content,loc:x.loc},loc:E}}function $T(t){const n=yo(t);let l;const p=t.source[0],m=p==='"'||p==="'";if(m){$n(t,1);const y=t.source.indexOf(p);y===-1?l=Dp(t,t.source.length,4):(l=Dp(t,y,4),$n(t,1))}else{const y=/^[^\t\r\n\f >]+/.exec(t.source);if(!y)return;const x=/["'<=`]/g;let E;for(;E=x.exec(y[0]);)Fr(t,18,E.index);l=Dp(t,y[0].length,4)}return{content:l,isQuoted:m,loc:Lo(t,n)}}function WT(t,n){const[l,p]=t.options.delimiters,m=t.source.indexOf(p,l.length);if(m===-1){Fr(t,25);return}const y=yo(t);$n(t,l.length);const x=yo(t),E=yo(t),C=m-l.length,k=t.source.slice(0,C),D=Dp(t,C,n),N=D.trim(),ee=D.indexOf(N);ee>0&&ld(x,k,ee);const se=C-(D.length-N.length-ee);return ld(E,k,se),$n(t,p.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:N,loc:Lo(t,x,E)},loc:Lo(t,y)}}function KT(t,n){const l=n===3?["]]>"]:["<",t.options.delimiters[0]];let p=t.source.length;for(let x=0;x<l.length;x++){const E=t.source.indexOf(l[x],1);E!==-1&&p>E&&(p=E)}const m=yo(t);return{type:2,content:Dp(t,p,n),loc:Lo(t,m)}}function Dp(t,n,l){const p=t.source.slice(0,n);return $n(t,n),l===2||l===3||!p.includes("&")?p:t.options.decodeEntities(p,l===4)}function yo(t){const{column:n,line:l,offset:p}=t;return{column:n,line:l,offset:p}}function Lo(t,n,l){return l=l||yo(t),{start:n,end:l,source:t.originalSource.slice(n.offset,l.offset)}}function Vd(t){return t[t.length-1]}function Ti(t,n){return t.startsWith(n)}function $n(t,n){const{source:l}=t;ld(t,l,n),t.source=l.slice(n)}function Jp(t){const n=/^[\t\r\n\f ]+/.exec(t.source);n&&$n(t,n[0].length)}function l0(t,n,l){return sd(n,t.originalSource.slice(n.offset,l),l)}function Fr(t,n,l,p=yo(t)){l&&(p.offset+=l,p.column+=l),t.options.onError(ln(n,{start:p,end:p,source:""}))}function XT(t,n,l){const p=t.source;switch(n){case 0:if(Ti(p,"</")){for(let m=l.length-1;m>=0;--m)if(Lg(p,l[m].tag))return!0}break;case 1:case 2:{const m=Vd(l);if(m&&Lg(p,m.tag))return!0;break}case 3:if(Ti(p,"]]>"))return!0;break}return!p}function Lg(t,n){return Ti(t,"</")&&t.slice(2,2+n.length).toLowerCase()===n.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+n.length]||">")}function JT(t,n){jf(t,n,Hx(t,t.children[0]))}function Hx(t,n){const{children:l}=t;return l.length===1&&n.type===1&&!cd(n)}function jf(t,n,l=!1){const{children:p}=t,m=p.length;let y=0;for(let x=0;x<p.length;x++){const E=p[x];if(E.type===1&&E.tagType===0){const C=l?0:Mo(E,n);if(C>0){if(C>=2){E.codegenNode.patchFlag="-1",E.codegenNode=n.hoist(E.codegenNode),y++;continue}}else{const k=E.codegenNode;if(k.type===13){const D=Wx(k);if((!D||D===512||D===1)&&Gx(E,n)>=2){const N=$x(E);N&&(k.props=n.hoist(N))}k.dynamicProps&&(k.dynamicProps=n.hoist(k.dynamicProps))}}}if(E.type===1){const C=E.tagType===1;C&&n.scopes.vSlot++,jf(E,n),C&&n.scopes.vSlot--}else if(E.type===11)jf(E,n,E.children.length===1);else if(E.type===9)for(let C=0;C<E.branches.length;C++)jf(E.branches[C],n,E.branches[C].children.length===1)}y&&n.transformHoist&&n.transformHoist(p,n,t),y&&y===m&&t.type===1&&t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&xt(t.codegenNode.children)&&(t.codegenNode.children=n.hoist(lh(t.codegenNode.children)))}function Mo(t,n){const{constantCache:l}=n;switch(t.type){case 1:if(t.tagType!==0)return 0;const p=l.get(t);if(p!==void 0)return p;const m=t.codegenNode;if(m.type!==13||m.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject")return 0;if(Wx(m))return l.set(t,0),0;{let E=3;const C=Gx(t,n);if(C===0)return l.set(t,0),0;C<E&&(E=C);for(let k=0;k<t.children.length;k++){const D=Mo(t.children[k],n);if(D===0)return l.set(t,0),0;D<E&&(E=D)}if(E>1)for(let k=0;k<t.props.length;k++){const D=t.props[k];if(D.type===7&&D.name==="bind"&&D.exp){const N=Mo(D.exp,n);if(N===0)return l.set(t,0),0;N<E&&(E=N)}}if(m.isBlock){for(let k=0;k<t.props.length;k++)if(t.props[k].type===7)return l.set(t,0),0;n.removeHelper(Wl),n.removeHelper(vc(n.inSSR,m.isComponent)),m.isBlock=!1,n.helper(yc(n.inSSR,m.isComponent))}return l.set(t,E),E}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Mo(t.content,n);case 4:return t.constType;case 8:let x=3;for(let E=0;E<t.children.length;E++){const C=t.children[E];if(tr(C)||Bs(C))continue;const k=Mo(C,n);if(k===0)return 0;k<x&&(x=k)}return x;default:return 0}}const YT=new Set([My,zy,$p,sh]);function Zx(t,n){if(t.type===14&&!tr(t.callee)&&YT.has(t.callee)){const l=t.arguments[0];if(l.type===4)return Mo(l,n);if(l.type===14)return Zx(l,n)}return 0}function Gx(t,n){let l=3;const p=$x(t);if(p&&p.type===15){const{properties:m}=p;for(let y=0;y<m.length;y++){const{key:x,value:E}=m[y],C=Mo(x,n);if(C===0)return C;C<l&&(l=C);let k;if(E.type===4?k=Mo(E,n):E.type===14?k=Zx(E,n):k=0,k===0)return k;k<l&&(l=k)}}return l}function $x(t){const n=t.codegenNode;if(n.type===13)return n.props}function Wx(t){const n=t.patchFlag;return n?parseInt(n,10):void 0}function QT(t,{filename:n="",prefixIdentifiers:l=!1,hoistStatic:p=!1,cacheHandlers:m=!1,nodeTransforms:y=[],directiveTransforms:x={},transformHoist:E=null,isBuiltInComponent:C=Bi,isCustomElement:k=Bi,expressionPlugins:D=[],scopeId:N=null,slotted:ee=!0,ssr:se=!1,inSSR:ne=!1,ssrCssVars:ve="",bindingMetadata:fe=Nr,inline:pe=!1,isTS:ue=!1,onError:be=by,onWarn:_e=Mx,compatConfig:Oe}){const f=n.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),ke={selfName:f&&Jl(Vn(f[1])),prefixIdentifiers:l,hoistStatic:p,cacheHandlers:m,nodeTransforms:y,directiveTransforms:x,transformHoist:E,isBuiltInComponent:C,isCustomElement:k,expressionPlugins:D,scopeId:N,slotted:ee,ssr:se,inSSR:ne,ssrCssVars:ve,bindingMetadata:fe,inline:pe,isTS:ue,onError:be,onWarn:_e,compatConfig:Oe,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(Y){const Fe=ke.helpers.get(Y)||0;return ke.helpers.set(Y,Fe+1),Y},removeHelper(Y){const Fe=ke.helpers.get(Y);if(Fe){const ze=Fe-1;ze?ke.helpers.set(Y,ze):ke.helpers.delete(Y)}},helperString(Y){return`_${mc[ke.helper(Y)]}`},replaceNode(Y){ke.parent.children[ke.childIndex]=ke.currentNode=Y},removeNode(Y){const Fe=ke.parent.children,ze=Y?Fe.indexOf(Y):ke.currentNode?ke.childIndex:-1;!Y||Y===ke.currentNode?(ke.currentNode=null,ke.onNodeRemoved()):ke.childIndex>ze&&(ke.childIndex--,ke.onNodeRemoved()),ke.parent.children.splice(ze,1)},onNodeRemoved:()=>{},addIdentifiers(Y){},removeIdentifiers(Y){},hoist(Y){tr(Y)&&(Y=lr(Y)),ke.hoists.push(Y);const Fe=lr(`_hoisted_${ke.hoists.length}`,!1,Y.loc,2);return Fe.hoisted=Y,Fe},cache(Y,Fe=!1){return AT(ke.cached++,Y,Fe)}};return ke.filters=new Set,ke}function eC(t,n){const l=QT(t,n);jd(t,l),n.hoistStatic&&JT(t,l),n.ssr||tC(t,l),t.helpers=new Set([...l.helpers.keys()]),t.components=[...l.components],t.directives=[...l.directives],t.imports=l.imports,t.hoists=l.hoists,t.temps=l.temps,t.cached=l.cached,t.filters=[...l.filters]}function tC(t,n){const{helper:l}=n,{children:p}=t;if(p.length===1){const m=p[0];if(Hx(t,m)&&m.codegenNode){const y=m.codegenNode;y.type===13&&Dy(y,n),t.codegenNode=y}else t.codegenNode=m}else if(p.length>1){let m=64;t.codegenNode=Wp(n,l(Gp),void 0,t.children,m+"",void 0,void 0,!0,void 0,!1)}}function rC(t,n){let l=0;const p=()=>{l--};for(;l<t.children.length;l++){const m=t.children[l];tr(m)||(n.parent=t,n.childIndex=l,n.onNodeRemoved=p,jd(m,n))}}function jd(t,n){n.currentNode=t;const{nodeTransforms:l}=n,p=[];for(let y=0;y<l.length;y++){const x=l[y](t,n);if(x&&(xt(x)?p.push(...x):p.push(x)),n.currentNode)t=n.currentNode;else return}switch(t.type){case 3:n.ssr||n.helper(ah);break;case 5:n.ssr||n.helper(Nd);break;case 9:for(let y=0;y<t.branches.length;y++)jd(t.branches[y],n);break;case 10:case 11:case 1:case 0:rC(t,n);break}n.currentNode=t;let m=p.length;for(;m--;)p[m]()}function Kx(t,n){const l=tr(t)?p=>p===t:p=>t.test(p);return(p,m)=>{if(p.type===1){const{props:y}=p;if(p.tagType===3&&y.some(OT))return;const x=[];for(let E=0;E<y.length;E++){const C=y[E];if(C.type===7&&l(C.name)){y.splice(E,1),E--;const k=n(p,C,m);k&&x.push(k)}}return x}}}const qd="/*#__PURE__*/",Xx=t=>`${mc[t]}: _${mc[t]}`;function u0(t,{mode:n="function",prefixIdentifiers:l=n==="module",sourceMap:p=!1,filename:m="template.vue.html",scopeId:y=null,optimizeImports:x=!1,runtimeGlobalName:E="Vue",runtimeModuleName:C="vue",ssrRuntimeModuleName:k="vue/server-renderer",ssr:D=!1,isTS:N=!1,inSSR:ee=!1}){const se={mode:n,prefixIdentifiers:l,sourceMap:p,filename:m,scopeId:y,optimizeImports:x,runtimeGlobalName:E,runtimeModuleName:C,ssrRuntimeModuleName:k,ssr:D,isTS:N,inSSR:ee,source:t.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(ve){return`_${mc[ve]}`},push(ve,fe){se.code+=ve},indent(){ne(++se.indentLevel)},deindent(ve=!1){ve?--se.indentLevel:ne(--se.indentLevel)},newline(){ne(se.indentLevel)}};function ne(ve){se.push(`
`+"  ".repeat(ve))}return se}function nC(t,n={}){const l=u0(t,n);n.onContextCreated&&n.onContextCreated(l);const{mode:p,push:m,prefixIdentifiers:y,indent:x,deindent:E,newline:C,scopeId:k,ssr:D}=l,N=Array.from(t.helpers),ee=N.length>0,se=!y&&p!=="module",ne=!1,ve=ne?u0(t,n):l;iC(t,ve);const fe=D?"ssrRender":"render",ue=(D?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(m(`function ${fe}(${ue}) {`),x(),se&&(m("with (_ctx) {"),x(),ee&&(m(`const { ${N.map(Xx).join(", ")} } = _Vue`),m(`
`),C())),t.components.length&&(Qm(t.components,"component",l),(t.directives.length||t.temps>0)&&C()),t.directives.length&&(Qm(t.directives,"directive",l),t.temps>0&&C()),t.filters&&t.filters.length&&(C(),Qm(t.filters,"filter",l),C()),t.temps>0){m("let ");for(let be=0;be<t.temps;be++)m(`${be>0?", ":""}_temp${be}`)}return(t.components.length||t.directives.length||t.temps)&&(m(`
`),C()),D||m("return "),t.codegenNode?Ai(t.codegenNode,l):m("null"),se&&(E(),m("}")),E(),m("}"),{ast:t,code:l.code,preamble:ne?ve.code:"",map:l.map?l.map.toJSON():void 0}}function iC(t,n){const{ssr:l,prefixIdentifiers:p,push:m,newline:y,runtimeModuleName:x,runtimeGlobalName:E,ssrRuntimeModuleName:C}=n,k=E,D=Array.from(t.helpers);if(D.length>0&&(m(`const _Vue = ${k}
`),t.hoists.length)){const N=[Ey,Sy,ah,Ty,Ox].filter(ee=>D.includes(ee)).map(Xx).join(", ");m(`const { ${N} } = _Vue
`)}oC(t.hoists,n),y(),m("return ")}function Qm(t,n,{helper:l,push:p,newline:m,isTS:y}){const x=l(n==="filter"?Iy:n==="component"?Cy:Ay);for(let E=0;E<t.length;E++){let C=t[E];const k=C.endsWith("__self");k&&(C=C.slice(0,-6)),p(`const ${Kp(C,n)} = ${x}(${JSON.stringify(C)}${k?", true":""})${y?"!":""}`),E<t.length-1&&m()}}function oC(t,n){if(!t.length)return;n.pure=!0;const{push:l,newline:p,helper:m,scopeId:y,mode:x}=n;p();for(let E=0;E<t.length;E++){const C=t[E];C&&(l(`const _hoisted_${E+1} = `),Ai(C,n),p())}n.pure=!1}function Ny(t,n){const l=t.length>3||!1;n.push("["),l&&n.indent(),uh(t,n,l),l&&n.deindent(),n.push("]")}function uh(t,n,l=!1,p=!0){const{push:m,newline:y}=n;for(let x=0;x<t.length;x++){const E=t[x];tr(E)?m(E):xt(E)?Ny(E,n):Ai(E,n),x<t.length-1&&(l?(p&&m(","),y()):p&&m(", "))}}function Ai(t,n){if(tr(t)){n.push(t);return}if(Bs(t)){n.push(n.helper(t));return}switch(t.type){case 1:case 9:case 11:Ai(t.codegenNode,n);break;case 2:aC(t,n);break;case 4:Jx(t,n);break;case 5:sC(t,n);break;case 12:Ai(t.codegenNode,n);break;case 8:Yx(t,n);break;case 3:uC(t,n);break;case 13:cC(t,n);break;case 14:hC(t,n);break;case 15:fC(t,n);break;case 17:dC(t,n);break;case 18:mC(t,n);break;case 19:gC(t,n);break;case 20:yC(t,n);break;case 21:uh(t.body,n,!0,!1);break}}function aC(t,n){n.push(JSON.stringify(t.content),t)}function Jx(t,n){const{content:l,isStatic:p}=t;n.push(p?JSON.stringify(l):l,t)}function sC(t,n){const{push:l,helper:p,pure:m}=n;m&&l(qd),l(`${p(Nd)}(`),Ai(t.content,n),l(")")}function Yx(t,n){for(let l=0;l<t.children.length;l++){const p=t.children[l];tr(p)?n.push(p):Ai(p,n)}}function lC(t,n){const{push:l}=n;if(t.type===8)l("["),Yx(t,n),l("]");else if(t.isStatic){const p=By(t.content)?t.content:JSON.stringify(t.content);l(p,t)}else l(`[${t.content}]`,t)}function uC(t,n){const{push:l,helper:p,pure:m}=n;m&&l(qd),l(`${p(ah)}(${JSON.stringify(t.content)})`,t)}function cC(t,n){const{push:l,helper:p,pure:m}=n,{tag:y,props:x,children:E,patchFlag:C,dynamicProps:k,directives:D,isBlock:N,disableTracking:ee,isComponent:se}=t;D&&l(p(ky)+"("),N&&l(`(${p(Wl)}(${ee?"true":""}), `),m&&l(qd);const ne=N?vc(n.inSSR,se):yc(n.inSSR,se);l(p(ne)+"(",t),uh(pC([y,x,E,C,k]),n),l(")"),N&&l(")"),D&&(l(", "),Ai(D,n),l(")"))}function pC(t){let n=t.length;for(;n--&&t[n]==null;);return t.slice(0,n+1).map(l=>l||"null")}function hC(t,n){const{push:l,helper:p,pure:m}=n,y=tr(t.callee)?t.callee:p(t.callee);m&&l(qd),l(y+"(",t),uh(t.arguments,n),l(")")}function fC(t,n){const{push:l,indent:p,deindent:m,newline:y}=n,{properties:x}=t;if(!x.length){l("{}",t);return}const E=x.length>1||!1;l(E?"{":"{ "),E&&p();for(let C=0;C<x.length;C++){const{key:k,value:D}=x[C];lC(k,n),l(": "),Ai(D,n),C<x.length-1&&(l(","),y())}E&&m(),l(E?"}":" }")}function dC(t,n){Ny(t.elements,n)}function mC(t,n){const{push:l,indent:p,deindent:m}=n,{params:y,returns:x,body:E,newline:C,isSlot:k}=t;k&&l(`_${mc[Ry]}(`),l("(",t),xt(y)?uh(y,n):y&&Ai(y,n),l(") => "),(C||E)&&(l("{"),p()),x?(C&&l("return "),xt(x)?Ny(x,n):Ai(x,n)):E&&Ai(E,n),(C||E)&&(m(),l("}")),k&&(t.isNonScopedSlot&&l(", undefined, true"),l(")"))}function gC(t,n){const{test:l,consequent:p,alternate:m,newline:y}=t,{push:x,indent:E,deindent:C,newline:k}=n;if(l.type===4){const N=!By(l.content);N&&x("("),Jx(l,n),N&&x(")")}else x("("),Ai(l,n),x(")");y&&E(),n.indentLevel++,y||x(" "),x("? "),Ai(p,n),n.indentLevel--,y&&k(),y||x(" "),x(": ");const D=m.type===19;D||n.indentLevel++,Ai(m,n),D||n.indentLevel--,y&&C(!0)}function yC(t,n){const{push:l,helper:p,indent:m,deindent:y,newline:x}=n;l(`_cache[${t.index}] || (`),t.isVNode&&(m(),l(`${p(ad)}(-1),`),x()),l(`_cache[${t.index}] = `),Ai(t.value,n),t.isVNode&&(l(","),x(),l(`${p(ad)}(1),`),x(),l(`_cache[${t.index}]`),y()),l(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const vC=Kx(/^(if|else|else-if)$/,(t,n,l)=>_C(t,n,l,(p,m,y)=>{const x=l.parent.children;let E=x.indexOf(p),C=0;for(;E-->=0;){const k=x[E];k&&k.type===9&&(C+=k.branches.length)}return()=>{if(y)p.codegenNode=p0(m,C,l);else{const k=xC(p.codegenNode);k.alternate=p0(m,C+p.branches.length-1,l)}}}));function _C(t,n,l,p){if(n.name!=="else"&&(!n.exp||!n.exp.content.trim())){const m=n.exp?n.exp.loc:t.loc;l.onError(ln(28,n.loc)),n.exp=lr("true",!1,m)}if(n.name==="if"){const m=c0(t,n),y={type:9,loc:t.loc,branches:[m]};if(l.replaceNode(y),p)return p(y,m,!0)}else{const m=l.parent.children;let y=m.indexOf(t);for(;y-->=-1;){const x=m[y];if(x&&x.type===3){l.removeNode(x);continue}if(x&&x.type===2&&!x.content.trim().length){l.removeNode(x);continue}if(x&&x.type===9){n.name==="else-if"&&x.branches[x.branches.length-1].condition===void 0&&l.onError(ln(30,t.loc)),l.removeNode();const E=c0(t,n);x.branches.push(E);const C=p&&p(x,E,!1);jd(E,l),C&&C(),l.currentNode=null}else l.onError(ln(30,t.loc));break}}}function c0(t,n){const l=t.tagType===3;return{type:10,loc:t.loc,condition:n.name==="else"?void 0:n.exp,children:l&&!ko(t,"for")?t.children:[t],userKey:Ud(t,"key"),isTemplateIf:l}}function p0(t,n,l){return t.condition?Mg(t.condition,h0(t,n,l),Nn(l.helper(ah),['""',"true"])):h0(t,n,l)}function h0(t,n,l){const{helper:p}=l,m=Tn("key",lr(`${n}`,!1,vo,2)),{children:y}=t,x=y[0];if(y.length!==1||x.type!==1)if(y.length===1&&x.type===11){const C=x.codegenNode;return pd(C,m,l),C}else{let C=64;return Wp(l,p(Gp),Po([m]),y,C+"",void 0,void 0,!0,!1,!1,t.loc)}else{const C=x.codegenNode,k=BT(C);return k.type===13&&Dy(k,l),pd(k,m,l),C}}function xC(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const bC=Kx("for",(t,n,l)=>{const{helper:p,removeHelper:m}=l;return wC(t,n,l,y=>{const x=Nn(p(Py),[y.source]),E=ud(t),C=ko(t,"memo"),k=Ud(t,"key"),D=k&&(k.type===6?lr(k.value.content,!0):k.exp),N=k?Tn("key",D):null,ee=y.source.type===4&&y.source.constType>0,se=ee?64:k?128:256;return y.codegenNode=Wp(l,p(Gp),void 0,x,se+"",void 0,void 0,!0,!ee,!1,t.loc),()=>{let ne;const{children:ve}=y,fe=ve.length!==1||ve[0].type!==1,pe=cd(t)?t:E&&t.children.length===1&&cd(t.children[0])?t.children[0]:null;if(pe?(ne=pe.codegenNode,E&&N&&pd(ne,N,l)):fe?ne=Wp(l,p(Gp),N?Po([N]):void 0,t.children,"64",void 0,void 0,!0,void 0,!1):(ne=ve[0].codegenNode,E&&N&&pd(ne,N,l),ne.isBlock!==!ee&&(ne.isBlock?(m(Wl),m(vc(l.inSSR,ne.isComponent))):m(yc(l.inSSR,ne.isComponent))),ne.isBlock=!ee,ne.isBlock?(p(Wl),p(vc(l.inSSR,ne.isComponent))):p(yc(l.inSSR,ne.isComponent))),C){const ue=gc(Rg(y.parseResult,[lr("_cached")]));ue.body=IT([Go(["const _memo = (",C.exp,")"]),Go(["if (_cached",...D?[" && _cached.key === ",D]:[],` && ${l.helperString(Fx)}(_cached, _memo)) return _cached`]),Go(["const _item = ",ne]),lr("_item.memo = _memo"),lr("return _item")]),x.arguments.push(ue,lr("_cache"),lr(String(l.cached++)))}else x.arguments.push(gc(Rg(y.parseResult),ne,!0))}})});function wC(t,n,l,p){if(!n.exp){l.onError(ln(31,n.loc));return}const m=Qx(n.exp);if(!m){l.onError(ln(32,n.loc));return}const{addIdentifiers:y,removeIdentifiers:x,scopes:E}=l,{source:C,value:k,key:D,index:N}=m,ee={type:11,loc:n.loc,source:C,valueAlias:k,keyAlias:D,objectIndexAlias:N,parseResult:m,children:ud(t)?t.children:[t]};l.replaceNode(ee),E.vFor++;const se=p&&p(ee);return()=>{E.vFor--,se&&se()}}const EC=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,f0=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,SC=/^\(|\)$/g;function Qx(t,n){const l=t.loc,p=t.content,m=p.match(EC);if(!m)return;const[,y,x]=m,E={source:Of(l,x.trim(),p.indexOf(x,y.length)),value:void 0,key:void 0,index:void 0};let C=y.trim().replace(SC,"").trim();const k=y.indexOf(C),D=C.match(f0);if(D){C=C.replace(f0,"").trim();const N=D[1].trim();let ee;if(N&&(ee=p.indexOf(N,k+C.length),E.key=Of(l,N,ee)),D[2]){const se=D[2].trim();se&&(E.index=Of(l,se,p.indexOf(se,E.key?ee+N.length:k+C.length)))}}return C&&(E.value=Of(l,C,k)),E}function Of(t,n,l){return lr(n,!1,Vx(t,l,n.length))}function Rg({value:t,key:n,index:l},p=[]){return TC([t,n,l,...p])}function TC(t){let n=t.length;for(;n--&&!t[n];);return t.slice(0,n+1).map((l,p)=>l||lr("_".repeat(p+1),!1))}const d0=lr("undefined",!1),CC=(t,n)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const l=ko(t,"slot");if(l)return l.exp,n.scopes.vSlot++,()=>{n.scopes.vSlot--}}},AC=(t,n,l)=>gc(t,n,!1,!0,n.length?n[0].loc:l);function IC(t,n,l=AC){n.helper(Ry);const{children:p,loc:m}=t,y=[],x=[];let E=n.scopes.vSlot>0||n.scopes.vFor>0;const C=ko(t,"slot",!0);if(C){const{arg:fe,exp:pe}=C;fe&&!Yi(fe)&&(E=!0),y.push(Tn(fe||lr("default",!0),l(pe,p,m)))}let k=!1,D=!1;const N=[],ee=new Set;let se=0;for(let fe=0;fe<p.length;fe++){const pe=p[fe];let ue;if(!ud(pe)||!(ue=ko(pe,"slot",!0))){pe.type!==3&&N.push(pe);continue}if(C){n.onError(ln(37,ue.loc));break}k=!0;const{children:be,loc:_e}=pe,{arg:Oe=lr("default",!0),exp:f,loc:ke}=ue;let Y;Yi(Oe)?Y=Oe?Oe.content:"default":E=!0;const Fe=l(f,be,_e);let ze,Xe,xe;if(ze=ko(pe,"if"))E=!0,x.push(Mg(ze.exp,Df(Oe,Fe,se++),d0));else if(Xe=ko(pe,/^else(-if)?$/,!0)){let mt=fe,et;for(;mt--&&(et=p[mt],et.type===3););if(et&&ud(et)&&ko(et,"if")){p.splice(fe,1),fe--;let Wt=x[x.length-1];for(;Wt.alternate.type===19;)Wt=Wt.alternate;Wt.alternate=Xe.exp?Mg(Xe.exp,Df(Oe,Fe,se++),d0):Df(Oe,Fe,se++)}else n.onError(ln(30,Xe.loc))}else if(xe=ko(pe,"for")){E=!0;const mt=xe.parseResult||Qx(xe.exp);mt?x.push(Nn(n.helper(Py),[mt.source,gc(Rg(mt),Df(Oe,Fe),!0)])):n.onError(ln(32,xe.loc))}else{if(Y){if(ee.has(Y)){n.onError(ln(38,ke));continue}ee.add(Y),Y==="default"&&(D=!0)}y.push(Tn(Oe,Fe))}}if(!C){const fe=(pe,ue)=>{const be=l(pe,ue,m);return n.compatConfig&&(be.isNonScopedSlot=!0),Tn("default",be)};k?N.length&&N.some(pe=>eb(pe))&&(D?n.onError(ln(39,N[0].loc)):y.push(fe(void 0,N))):y.push(fe(void 0,p))}const ne=E?2:qf(t.children)?3:1;let ve=Po(y.concat(Tn("_",lr(ne+"",!1))),m);return x.length&&(ve=Nn(n.helper(Bx),[ve,lh(x)])),{slots:ve,hasDynamicSlots:E}}function Df(t,n,l){const p=[Tn("name",t),Tn("fn",n)];return l!=null&&p.push(Tn("key",lr(String(l),!0))),Po(p)}function qf(t){for(let n=0;n<t.length;n++){const l=t[n];switch(l.type){case 1:if(l.tagType===2||qf(l.children))return!0;break;case 9:if(qf(l.branches))return!0;break;case 10:case 11:if(qf(l.children))return!0;break}}return!1}function eb(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():eb(t.content)}const tb=new WeakMap,kC=(t,n)=>function(){if(t=n.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:p,props:m}=t,y=t.tagType===1;let x=y?PC(t,n):`"${p}"`;const E=Ur(x)&&x.callee===id;let C,k,D,N=0,ee,se,ne,ve=E||x===Op||x===wy||!y&&(p==="svg"||p==="foreignObject");if(m.length>0){const fe=rb(t,n,void 0,y,E);C=fe.props,N=fe.patchFlag,se=fe.dynamicPropNames;const pe=fe.directives;ne=pe&&pe.length?lh(pe.map(ue=>zC(ue,n))):void 0,fe.shouldUseBlock&&(ve=!0)}if(t.children.length>0)if(x===nd&&(ve=!0,N|=1024),y&&x!==Op&&x!==nd){const{slots:pe,hasDynamicSlots:ue}=IC(t,n);k=pe,ue&&(N|=1024)}else if(t.children.length===1&&x!==Op){const pe=t.children[0],ue=pe.type,be=ue===5||ue===8;be&&Mo(pe,n)===0&&(N|=1),be||ue===2?k=pe:k=t.children}else k=t.children;N!==0&&(D=String(N),se&&se.length&&(ee=LC(se))),t.codegenNode=Wp(n,x,C,k,D,ee,ne,!!ve,!1,y,t.loc)};function PC(t,n,l=!1){let{tag:p}=t;const m=Og(p),y=Ud(t,"is");if(y)if(m||ql("COMPILER_IS_ON_ELEMENT",n)){const C=y.type===6?y.value&&lr(y.value.content,!0):y.exp;if(C)return Nn(n.helper(id),[C])}else y.type===6&&y.value.content.startsWith("vue:")&&(p=y.value.content.slice(4));const x=!m&&ko(t,"is");if(x&&x.exp)return Nn(n.helper(id),[x.exp]);const E=Nx(p)||n.isBuiltInComponent(p);return E?(l||n.helper(E),E):(n.helper(Cy),n.components.add(p),Kp(p,"component"))}function rb(t,n,l=t.props,p,m,y=!1){const{tag:x,loc:E,children:C}=t;let k=[];const D=[],N=[],ee=C.length>0;let se=!1,ne=0,ve=!1,fe=!1,pe=!1,ue=!1,be=!1,_e=!1;const Oe=[],f=Fe=>{k.length&&(D.push(Po(m0(k),E)),k=[]),Fe&&D.push(Fe)},ke=({key:Fe,value:ze})=>{if(Yi(Fe)){const Xe=Fe.content,xe=Kl(Xe);if(xe&&(!p||m)&&Xe.toLowerCase()!=="onclick"&&Xe!=="onUpdate:modelValue"&&!Bl(Xe)&&(ue=!0),xe&&Bl(Xe)&&(_e=!0),ze.type===20||(ze.type===4||ze.type===8)&&Mo(ze,n)>0)return;Xe==="ref"?ve=!0:Xe==="class"?fe=!0:Xe==="style"?pe=!0:Xe!=="key"&&!Oe.includes(Xe)&&Oe.push(Xe),p&&(Xe==="class"||Xe==="style")&&!Oe.includes(Xe)&&Oe.push(Xe)}else be=!0};for(let Fe=0;Fe<l.length;Fe++){const ze=l[Fe];if(ze.type===6){const{loc:Xe,name:xe,value:mt}=ze;let et=!0;if(xe==="ref"&&(ve=!0,n.scopes.vFor>0&&k.push(Tn(lr("ref_for",!0),lr("true")))),xe==="is"&&(Og(x)||mt&&mt.content.startsWith("vue:")||ql("COMPILER_IS_ON_ELEMENT",n)))continue;k.push(Tn(lr(xe,!0,Vx(Xe,0,xe.length)),lr(mt?mt.content:"",et,mt?mt.loc:Xe)))}else{const{name:Xe,arg:xe,exp:mt,loc:et}=ze,Wt=Xe==="bind",Rt=Xe==="on";if(Xe==="slot"){p||n.onError(ln(40,et));continue}if(Xe==="once"||Xe==="memo"||Xe==="is"||Wt&&Dl(xe,"is")&&(Og(x)||ql("COMPILER_IS_ON_ELEMENT",n))||Rt&&y)continue;if((Wt&&Dl(xe,"key")||Rt&&ee&&Dl(xe,"vue:before-update"))&&(se=!0),Wt&&Dl(xe,"ref")&&n.scopes.vFor>0&&k.push(Tn(lr("ref_for",!0),lr("true"))),!xe&&(Wt||Rt)){if(be=!0,mt)if(Wt){if(f(),ql("COMPILER_V_BIND_OBJECT_ORDER",n)){D.unshift(mt);continue}D.push(mt)}else f({type:14,loc:et,callee:n.helper(Ly),arguments:p?[mt]:[mt,"true"]});else n.onError(ln(Wt?34:35,et));continue}const rr=n.directiveTransforms[Xe];if(rr){const{props:Ot,needRuntime:gn}=rr(ze,t,n);!y&&Ot.forEach(ke),Rt&&xe&&!Yi(xe)?f(Po(Ot,E)):k.push(...Ot),gn&&(N.push(ze),Bs(gn)&&tb.set(ze,gn))}else Y2(Xe)||(N.push(ze),ee&&(se=!0))}}let Y;if(D.length?(f(),D.length>1?Y=Nn(n.helper(od),D,E):Y=D[0]):k.length&&(Y=Po(m0(k),E)),be?ne|=16:(fe&&!p&&(ne|=2),pe&&!p&&(ne|=4),Oe.length&&(ne|=8),ue&&(ne|=32)),!se&&(ne===0||ne===32)&&(ve||_e||N.length>0)&&(ne|=512),!n.inSSR&&Y)switch(Y.type){case 15:let Fe=-1,ze=-1,Xe=!1;for(let et=0;et<Y.properties.length;et++){const Wt=Y.properties[et].key;Yi(Wt)?Wt.content==="class"?Fe=et:Wt.content==="style"&&(ze=et):Wt.isHandlerKey||(Xe=!0)}const xe=Y.properties[Fe],mt=Y.properties[ze];Xe?Y=Nn(n.helper($p),[Y]):(xe&&!Yi(xe.value)&&(xe.value=Nn(n.helper(My),[xe.value])),mt&&(pe||mt.value.type===4&&mt.value.content.trim()[0]==="["||mt.value.type===17)&&(mt.value=Nn(n.helper(zy),[mt.value])));break;case 14:break;default:Y=Nn(n.helper($p),[Nn(n.helper(sh),[Y])]);break}return{props:Y,directives:N,patchFlag:ne,dynamicPropNames:Oe,shouldUseBlock:se}}function m0(t){const n=new Map,l=[];for(let p=0;p<t.length;p++){const m=t[p];if(m.key.type===8||!m.key.isStatic){l.push(m);continue}const y=m.key.content,x=n.get(y);x?(y==="style"||y==="class"||Kl(y))&&MC(x,m):(n.set(y,m),l.push(m))}return l}function MC(t,n){t.value.type===17?t.value.elements.push(n.value):t.value=lh([t.value,n.value],t.loc)}function zC(t,n){const l=[],p=tb.get(t);p?l.push(n.helperString(p)):(n.helper(Ay),n.directives.add(t.name),l.push(Kp(t.name,"directive")));const{loc:m}=t;if(t.exp&&l.push(t.exp),t.arg&&(t.exp||l.push("void 0"),l.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||l.push("void 0"),l.push("void 0"));const y=lr("true",!1,m);l.push(Po(t.modifiers.map(x=>Tn(x,y)),m))}return lh(l,t.loc)}function LC(t){let n="[";for(let l=0,p=t.length;l<p;l++)n+=JSON.stringify(t[l]),l<p-1&&(n+=", ");return n+"]"}function Og(t){return t==="component"||t==="Component"}const RC=(t,n)=>{if(cd(t)){const{children:l,loc:p}=t,{slotName:m,slotProps:y}=OC(t,n),x=[n.prefixIdentifiers?"_ctx.$slots":"$slots",m,"{}","undefined","true"];let E=2;y&&(x[2]=y,E=3),l.length&&(x[3]=gc([],l,!1,!1,p),E=4),n.scopeId&&!n.slotted&&(E=5),x.splice(E),t.codegenNode=Nn(n.helper(Dx),x,p)}};function OC(t,n){let l='"default"',p;const m=[];for(let y=0;y<t.props.length;y++){const x=t.props[y];x.type===6?x.value&&(x.name==="name"?l=JSON.stringify(x.value.content):(x.name=Vn(x.name),m.push(x))):x.name==="bind"&&Dl(x.arg,"name")?x.exp&&(l=x.exp):(x.name==="bind"&&x.arg&&Yi(x.arg)&&(x.arg.content=Vn(x.arg.content)),m.push(x))}if(m.length>0){const{props:y,directives:x}=rb(t,n,m,!1,!1);p=y,x.length&&n.onError(ln(36,x[0].loc))}return{slotName:l,slotProps:p}}const DC=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,nb=(t,n,l,p)=>{const{loc:m,modifiers:y,arg:x}=t;!t.exp&&!y.length&&l.onError(ln(35,m));let E;if(x.type===4)if(x.isStatic){let N=x.content;N.startsWith("vue:")&&(N=`vnode-${N.slice(4)}`);const ee=n.tagType!==0||N.startsWith("vnode")||!/[A-Z]/.test(N)?ic(Vn(N)):`on:${N}`;E=lr(ee,!0,x.loc)}else E=Go([`${l.helperString(Pg)}(`,x,")"]);else E=x,E.children.unshift(`${l.helperString(Pg)}(`),E.children.push(")");let C=t.exp;C&&!C.content.trim()&&(C=void 0);let k=l.cacheHandlers&&!C&&!l.inVOnce;if(C){const N=Ux(C.content),ee=!(N||DC.test(C.content)),se=C.content.includes(";");(ee||k&&N)&&(C=Go([`${ee?"$event":"(...args)"} => ${se?"{":"("}`,C,se?"}":")"]))}let D={props:[Tn(E,C||lr("() => {}",!1,m))]};return p&&(D=p(D)),k&&(D.props[0].value=l.cache(D.props[0].value)),D.props.forEach(N=>N.key.isHandlerKey=!0),D},BC=(t,n,l)=>{const{exp:p,modifiers:m,loc:y}=t,x=t.arg;return x.type!==4?(x.children.unshift("("),x.children.push(') || ""')):x.isStatic||(x.content=`${x.content} || ""`),m.includes("camel")&&(x.type===4?x.isStatic?x.content=Vn(x.content):x.content=`${l.helperString(kg)}(${x.content})`:(x.children.unshift(`${l.helperString(kg)}(`),x.children.push(")"))),l.inSSR||(m.includes("prop")&&g0(x,"."),m.includes("attr")&&g0(x,"^")),!p||p.type===4&&!p.content.trim()?(l.onError(ln(34,y)),{props:[Tn(x,lr("",!0,y))]}):{props:[Tn(x,p)]}},g0=(t,n)=>{t.type===4?t.isStatic?t.content=n+t.content:t.content=`\`${n}\${${t.content}}\``:(t.children.unshift(`'${n}' + (`),t.children.push(")"))},FC=(t,n)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const l=t.children;let p,m=!1;for(let y=0;y<l.length;y++){const x=l[y];if(Ym(x)){m=!0;for(let E=y+1;E<l.length;E++){const C=l[E];if(Ym(C))p||(p=l[y]=Go([x],x.loc)),p.children.push(" + ",C),l.splice(E,1),E--;else{p=void 0;break}}}}if(!(!m||l.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(y=>y.type===7&&!n.directiveTransforms[y.name])&&t.tag!=="template")))for(let y=0;y<l.length;y++){const x=l[y];if(Ym(x)||x.type===8){const E=[];(x.type!==2||x.content!==" ")&&E.push(x),!n.ssr&&Mo(x,n)===0&&E.push("1"),l[y]={type:12,content:x,loc:x.loc,codegenNode:Nn(n.helper(Ty),E)}}}}},y0=new WeakSet,NC=(t,n)=>{if(t.type===1&&ko(t,"once",!0))return y0.has(t)||n.inVOnce||n.inSSR?void 0:(y0.add(t),n.inVOnce=!0,n.helper(ad),()=>{n.inVOnce=!1;const l=n.currentNode;l.codegenNode&&(l.codegenNode=n.cache(l.codegenNode,!0))})},ib=(t,n,l)=>{const{exp:p,arg:m}=t;if(!p)return l.onError(ln(41,t.loc)),Bf();const y=p.loc.source,x=p.type===4?p.content:y,E=l.bindingMetadata[y];if(E==="props"||E==="props-aliased")return l.onError(ln(44,p.loc)),Bf();const C=!1;if(!x.trim()||!Ux(x)&&!C)return l.onError(ln(42,p.loc)),Bf();const k=m||lr("modelValue",!0),D=m?Yi(m)?`onUpdate:${Vn(m.content)}`:Go(['"onUpdate:" + ',m]):"onUpdate:modelValue";let N;const ee=l.isTS?"($event: any)":"$event";N=Go([`${ee} => ((`,p,") = $event)"]);const se=[Tn(k,t.exp),Tn(D,N)];if(t.modifiers.length&&n.tagType===1){const ne=t.modifiers.map(fe=>(By(fe)?fe:JSON.stringify(fe))+": true").join(", "),ve=m?Yi(m)?`${m.content}Modifiers`:Go([m,' + "Modifiers"']):"modelModifiers";se.push(Tn(ve,lr(`{ ${ne} }`,!1,t.loc,2)))}return Bf(se)};function Bf(t=[]){return{props:t}}const UC=/[\w).+\-_$\]]/,VC=(t,n)=>{ql("COMPILER_FILTER",n)&&(t.type===5&&fd(t.content,n),t.type===1&&t.props.forEach(l=>{l.type===7&&l.name!=="for"&&l.exp&&fd(l.exp,n)}))};function fd(t,n){if(t.type===4)v0(t,n);else for(let l=0;l<t.children.length;l++){const p=t.children[l];typeof p=="object"&&(p.type===4?v0(p,n):p.type===8?fd(t,n):p.type===5&&fd(p.content,n))}}function v0(t,n){const l=t.content;let p=!1,m=!1,y=!1,x=!1,E=0,C=0,k=0,D=0,N,ee,se,ne,ve=[];for(se=0;se<l.length;se++)if(ee=N,N=l.charCodeAt(se),p)N===39&&ee!==92&&(p=!1);else if(m)N===34&&ee!==92&&(m=!1);else if(y)N===96&&ee!==92&&(y=!1);else if(x)N===47&&ee!==92&&(x=!1);else if(N===124&&l.charCodeAt(se+1)!==124&&l.charCodeAt(se-1)!==124&&!E&&!C&&!k)ne===void 0?(D=se+1,ne=l.slice(0,se).trim()):fe();else{switch(N){case 34:m=!0;break;case 39:p=!0;break;case 96:y=!0;break;case 40:k++;break;case 41:k--;break;case 91:C++;break;case 93:C--;break;case 123:E++;break;case 125:E--;break}if(N===47){let pe=se-1,ue;for(;pe>=0&&(ue=l.charAt(pe),ue===" ");pe--);(!ue||!UC.test(ue))&&(x=!0)}}ne===void 0?ne=l.slice(0,se).trim():D!==0&&fe();function fe(){ve.push(l.slice(D,se).trim()),D=se+1}if(ve.length){for(se=0;se<ve.length;se++)ne=jC(ne,ve[se],n);t.content=ne}}function jC(t,n,l){l.helper(Iy);const p=n.indexOf("(");if(p<0)return l.filters.add(n),`${Kp(n,"filter")}(${t})`;{const m=n.slice(0,p),y=n.slice(p+1);return l.filters.add(m),`${Kp(m,"filter")}(${t}${y!==")"?","+y:y}`}}const _0=new WeakSet,qC=(t,n)=>{if(t.type===1){const l=ko(t,"memo");return!l||_0.has(t)?void 0:(_0.add(t),()=>{const p=t.codegenNode||n.currentNode.codegenNode;p&&p.type===13&&(t.tagType!==1&&Dy(p,n),t.codegenNode=Nn(n.helper(Oy),[l.exp,gc(void 0,p),"_cache",String(n.cached++)]))})}};function HC(t){return[[NC,vC,qC,bC,VC,RC,kC,CC,FC],{on:nb,bind:BC,model:ib}]}function ZC(t,n={}){const l=n.onError||by,p=n.mode==="module";n.prefixIdentifiers===!0?l(ln(47)):p&&l(ln(48));const m=!1;n.cacheHandlers&&l(ln(49)),n.scopeId&&!p&&l(ln(50));const y=tr(t)?UT(t,n):t,[x,E]=HC();return eC(y,vr({},n,{prefixIdentifiers:m,nodeTransforms:[...x,...n.nodeTransforms||[]],directiveTransforms:vr({},E,n.directiveTransforms||{})})),nC(y,vr({},n,{prefixIdentifiers:m}))}const GC=()=>({props:[]}),ob=Symbol(""),ab=Symbol(""),sb=Symbol(""),lb=Symbol(""),Dg=Symbol(""),ub=Symbol(""),cb=Symbol(""),pb=Symbol(""),hb=Symbol(""),fb=Symbol("");TT({[ob]:"vModelRadio",[ab]:"vModelCheckbox",[sb]:"vModelText",[lb]:"vModelSelect",[Dg]:"vModelDynamic",[ub]:"withModifiers",[cb]:"withKeys",[pb]:"vShow",[hb]:"Transition",[fb]:"TransitionGroup"});let Qu;function $C(t,n=!1){return Qu||(Qu=document.createElement("div")),n?(Qu.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,Qu.children[0].getAttribute("foo")):(Qu.innerHTML=t,Qu.textContent)}const WC=eo("style,iframe,script,noscript",!0),KC={isVoidTag:hE,isNativeTag:t=>cE(t)||pE(t),isPreTag:t=>t==="pre",decodeEntities:$C,isBuiltInComponent:t=>{if(tc(t,"Transition"))return hb;if(tc(t,"TransitionGroup"))return fb},getNamespace(t,n){let l=n?n.ns:0;if(n&&l===2)if(n.tag==="annotation-xml"){if(t==="svg")return 1;n.props.some(p=>p.type===6&&p.name==="encoding"&&p.value!=null&&(p.value.content==="text/html"||p.value.content==="application/xhtml+xml"))&&(l=0)}else/^m(?:[ions]|text)$/.test(n.tag)&&t!=="mglyph"&&t!=="malignmark"&&(l=0);else n&&l===1&&(n.tag==="foreignObject"||n.tag==="desc"||n.tag==="title")&&(l=0);if(l===0){if(t==="svg")return 1;if(t==="math")return 2}return l},getTextMode({tag:t,ns:n}){if(n===0){if(t==="textarea"||t==="title")return 1;if(WC(t))return 2}return 0}},XC=t=>{t.type===1&&t.props.forEach((n,l)=>{n.type===6&&n.name==="style"&&n.value&&(t.props[l]={type:7,name:"bind",arg:lr("style",!0,n.loc),exp:JC(n.value.content,n.loc),modifiers:[],loc:n.loc})})},JC=(t,n)=>{const l=H0(t);return lr(JSON.stringify(l),!1,n,3)};function Ds(t,n){return ln(t,n)}const YC=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ds(53,m)),n.children.length&&(l.onError(Ds(54,m)),n.children.length=0),{props:[Tn(lr("innerHTML",!0,m),p||lr("",!0))]}},QC=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ds(55,m)),n.children.length&&(l.onError(Ds(56,m)),n.children.length=0),{props:[Tn(lr("textContent",!0),p?Mo(p,l)>0?p:Nn(l.helperString(Nd),[p],m):lr("",!0))]}},e5=(t,n,l)=>{const p=ib(t,n,l);if(!p.props.length||n.tagType===1)return p;t.arg&&l.onError(Ds(58,t.arg.loc));const{tag:m}=n,y=l.isCustomElement(m);if(m==="input"||m==="textarea"||m==="select"||y){let x=sb,E=!1;if(m==="input"||y){const C=Ud(n,"type");if(C){if(C.type===7)x=Dg;else if(C.value)switch(C.value.content){case"radio":x=ob;break;case"checkbox":x=ab;break;case"file":E=!0,l.onError(Ds(59,t.loc));break}}else RT(n)&&(x=Dg)}else m==="select"&&(x=lb);E||(p.needRuntime=l.helper(x))}else l.onError(Ds(57,t.loc));return p.props=p.props.filter(x=>!(x.key.type===4&&x.key.content==="modelValue")),p},t5=eo("passive,once,capture"),r5=eo("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),n5=eo("left,right"),db=eo("onkeyup,onkeydown,onkeypress",!0),i5=(t,n,l,p)=>{const m=[],y=[],x=[];for(let E=0;E<n.length;E++){const C=n[E];C==="native"&&Xp("COMPILER_V_ON_NATIVE",l)||t5(C)?x.push(C):n5(C)?Yi(t)?db(t.content)?m.push(C):y.push(C):(m.push(C),y.push(C)):r5(C)?y.push(C):m.push(C)}return{keyModifiers:m,nonKeyModifiers:y,eventOptionModifiers:x}},x0=(t,n)=>Yi(t)&&t.content.toLowerCase()==="onclick"?lr(n,!0):t.type!==4?Go(["(",t,`) === "onClick" ? "${n}" : (`,t,")"]):t,o5=(t,n,l)=>nb(t,n,l,p=>{const{modifiers:m}=t;if(!m.length)return p;let{key:y,value:x}=p.props[0];const{keyModifiers:E,nonKeyModifiers:C,eventOptionModifiers:k}=i5(y,m,l,t.loc);if(C.includes("right")&&(y=x0(y,"onContextmenu")),C.includes("middle")&&(y=x0(y,"onMouseup")),C.length&&(x=Nn(l.helper(ub),[x,JSON.stringify(C)])),E.length&&(!Yi(y)||db(y.content))&&(x=Nn(l.helper(cb),[x,JSON.stringify(E)])),k.length){const D=k.map(Jl).join("");y=Yi(y)?lr(`${y.content}${D}`,!0):Go(["(",y,`) + "${D}"`])}return{props:[Tn(y,x)]}}),a5=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ds(61,m)),{props:[],needRuntime:l.helper(pb)}},s5=(t,n)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&n.removeNode()},l5=[XC],u5={cloak:GC,html:YC,text:QC,model:e5,on:o5,show:a5};function c5(t,n={}){return ZC(t,vr({},KC,n,{nodeTransforms:[s5,...l5,...n.nodeTransforms||[]],directiveTransforms:vr({},u5,n.directiveTransforms||{}),transformHoist:null}))}const b0=Object.create(null);function p5(t,n){if(!tr(t))if(t.nodeType)t=t.innerHTML;else return Bi;const l=t,p=b0[l];if(p)return p;if(t[0]==="#"){const E=document.querySelector(t);t=E?E.innerHTML:""}const m=vr({hoistStatic:!0,onError:void 0,onWarn:Bi},n);!m.isCustomElement&&typeof customElements<"u"&&(m.isCustomElement=E=>!!customElements.get(E));const{code:y}=c5(t,m),x=new Function("Vue",y)(_T);return x._rc=!0,b0[l]=x}rx(p5);var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f5(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var l=function p(){if(this instanceof p){var m=[null];m.push.apply(m,arguments);var y=Function.bind.apply(n,m);return new y}return n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(t).forEach(function(p){var m=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(l,p,m.get?m:{enumerable:!0,get:function(){return t[p]}})}),l}var d5={exports:{}};(function(t,n){(function(l,p){t.exports=p()})(mo,function(){function l(fe,pe){pe===void 0&&(pe={});var ue=pe.insertAt;if(!(!fe||typeof document>"u")){var be=document.head||document.getElementsByTagName("head")[0],_e=document.createElement("style");_e.type="text/css",ue==="top"&&be.firstChild?be.insertBefore(_e,be.firstChild):be.appendChild(_e),_e.styleSheet?_e.styleSheet.cssText=fe:_e.appendChild(document.createTextNode(fe))}}var p=`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`;l(p);var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof mo<"u"?mo:typeof self<"u"?self:{},y={},x={get exports(){return y},set exports(fe){y=fe}};(function(fe,pe){(function(ue,be){fe.exports=be()})(m,function(){var ue,be,_e;function Oe(f,ke){if(!ue)ue=ke;else if(!be)be=ke;else{var Y="var sharedChunk = {}; ("+ue+")(sharedChunk); ("+be+")(sharedChunk);",Fe={};ue(Fe),_e=ke(Fe),typeof window<"u"&&(_e.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}}return Oe(["exports"],function(f){function ke(e,r){return e(r={exports:{}},r.exports),r.exports}var Y=Fe;function Fe(e,r,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}Fe.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Fe.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Fe.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Fe.prototype.solveCurveX=function(e,r){var i,u,h,d,v;for(r===void 0&&(r=1e-6),h=e,v=0;v<8;v++){if(d=this.sampleCurveX(h)-e,Math.abs(d)<r)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=d/w}if((h=e)<(i=0))return i;if(h>(u=1))return u;for(;i<u;){if(d=this.sampleCurveX(h),Math.abs(d-e)<r)return h;e>d?i=h:u=h,h=.5*(u-i)+i}return h},Fe.prototype.solve=function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))};var ze=Xe;function Xe(e,r){this.x=e,this.y=r}Xe.prototype={clone:function(){return new Xe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,i=e.y-this.y;return r*r+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),i=Math.sin(e),u=i*this.x+r*this.y;return this.x=r*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,r){var i=Math.cos(e),u=Math.sin(e),h=r.y+u*(this.x-r.x)+i*(this.y-r.y);return this.x=r.x+i*(this.x-r.x)-u*(this.y-r.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Xe.convert=function(e){return e instanceof Xe?e:Array.isArray(e)?new Xe(e[0],e[1]):e};var xe=typeof self<"u"?self:{},mt=Math.pow(2,53)-1;function et(e,r,i,u){var h=new Y(e,r,i,u);return function(d){return h.solve(d)}}var Wt=et(.25,.1,.25,1);function Rt(e,r,i){return Math.min(i,Math.max(r,e))}function rr(e,r,i){var u=i-r,h=((e-r)%u+u)%u+r;return h===r?i:h}function Ot(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,d=i;h<d.length;h+=1){var v=d[h];for(var w in v)e[w]=v[w]}return e}var gn=1;function di(){return gn++}function Kr(){return function e(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function yn(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function ki(e,r){e.forEach(function(i){r[i]&&(r[i]=r[i].bind(r))})}function Fi(e,r){return e.indexOf(r,e.length-r.length)!==-1}function un(e,r,i){var u={};for(var h in e)u[h]=r.call(i||this,e[h],h,e);return u}function nn(e,r,i){var u={};for(var h in e)r.call(i||this,e[h],h,e)&&(u[h]=e[h]);return u}function Ln(e){return Array.isArray(e)?e.map(Ln):typeof e=="object"&&e?un(e,Ln):e}var ro={};function mr(e){ro[e]||(typeof console<"u"&&console.warn(e),ro[e]=!0)}function cn(e,r,i){return(i.y-e.y)*(r.x-e.x)>(r.y-e.y)*(i.x-e.x)}function no(e){for(var r=0,i=0,u=e.length,h=u-1,d=void 0,v=void 0;i<u;h=i++)r+=((v=e[h]).x-(d=e[i]).x)*(d.y+v.y);return r}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function de(e){var r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,h,d,v){var w=d||v;return r[h]=!w||w.toLowerCase(),""}),r["max-age"]){var i=parseInt(r["max-age"],10);isNaN(i)?delete r["max-age"]:r["max-age"]=i}return r}var Be=null;function $e(e){if(Be==null){var r=e.navigator?e.navigator.userAgent:null;Be=!!e.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Be}function qe(e){try{var r=xe[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Je,Te,Le,Re,Ae=xe.performance&&xe.performance.now?xe.performance.now.bind(xe.performance):Date.now.bind(Date),Ye=xe.requestAnimationFrame||xe.mozRequestAnimationFrame||xe.webkitRequestAnimationFrame||xe.msRequestAnimationFrame,He=xe.cancelAnimationFrame||xe.mozCancelAnimationFrame||xe.webkitCancelAnimationFrame||xe.msCancelAnimationFrame,ct={now:Ae,frame:function(e){var r=Ye(e);return{cancel:function(){return He(r)}}},getImageData:function(e,r){r===void 0&&(r=0);var i=xe.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-r,-r,e.width+2*r,e.height+2*r)},resolveURL:function(e){return Je||(Je=xe.document.createElement("a")),Je.href=e,Je.href},hardwareConcurrency:xe.navigator&&xe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return xe.devicePixelRatio},get prefersReducedMotion(){return!!xe.matchMedia&&(Te==null&&(Te=xe.matchMedia("(prefers-reduced-motion: reduce)")),Te.matches)}},nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},It={supported:!1,testSupport:function(e){!jt&&Re&&(qt?dt(e):Le=e)}},jt=!1,qt=!1;function dt(e){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Re),e.isContextLost())return;It.supported=!0}catch{}e.deleteTexture(r),jt=!0}xe.document&&((Re=xe.document.createElement("img")).onload=function(){Le&&dt(Le),Le=null,qt=!0},Re.onerror=function(){jt=!0,Le=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Mr="01",zr=function(e,r){this._transformRequestFn=e,this._customAccessToken=r,this._createSkuToken()};function pn(e){return e.indexOf("mapbox:")===0}zr.prototype._createSkuToken=function(){var e=function(){for(var r="",i=0;i<10;i++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Mr,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},zr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},zr.prototype.transformRequest=function(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}},zr.prototype.normalizeStyleURL=function(e,r){if(!pn(e))return e;var i=nr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},zr.prototype.normalizeGlyphsURL=function(e,r){if(!pn(e))return e;var i=nr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},zr.prototype.normalizeSourceURL=function(e,r){if(!pn(e))return e;var i=nr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||r)},zr.prototype.normalizeSpriteURL=function(e,r,i,u){var h=nr(e);return pn(e)?(h.path="/styles/v1"+h.path+"/sprite"+r+i,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=""+r+i,vn(h))},zr.prototype.normalizeTileURL=function(e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!pn(e))return e;var i=nr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ct.devicePixelRatio>=2||r===512?"@2x":"")+(It.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(h){for(var d=0,v=h;d<v.length;d+=1){var w=v[d].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(i.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},zr.prototype.canonicalizeTileURL=function(e,r){var i=nr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var h=i.params;return r&&(h=h.filter(function(d){return!d.match(/^access_token=/)})),h.length&&(u+="?"+h.join("&")),u},zr.prototype.canonicalizeTileset=function(e,r){for(var i=!!r&&pn(r),u=[],h=0,d=e.tiles||[];h<d.length;h+=1){var v=d[h];Rn(v)?u.push(this.canonicalizeTileURL(v,i)):u.push(v)}return u},zr.prototype._makeAPIURL=function(e,r){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=nr(nt.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!nt.REQUIRE_ACCESS_TOKEN)return vn(e);if(!(r=r||nt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+r),vn(e)};var Pi=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Rn(e){return Pi.test(e)}var ur=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nr(e){var r=e.match(ur);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function vn(e){var r=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+r}function jn(e){if(!e)return null;var r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(xe.atob(r[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var _n=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};_n.prototype.getStorageKey=function(e){var r,i=jn(nt.ACCESS_TOKEN);return r=i&&i.u?xe.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,h){return String.fromCharCode(+("0x"+h))})):nt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},_n.prototype.fetchEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=xe.localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));var h=xe.localStorage.getItem(i);h&&(this.anonId=h)}catch{mr("Unable to read from LocalStorage")}},_n.prototype.saveEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{xe.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&xe.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{mr("Unable to write to LocalStorage")}},_n.prototype.processRequests=function(e){},_n.prototype.postEvent=function(e,r,i,u){var h=this;if(nt.EVENTS_URL){var d=nr(nt.EVENTS_URL);d.params.push("access_token="+(u||nt.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Mr,userId:this.anonId},w=r?Ot(v,r):v,T={url:vn(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=Xr(T,function(A){h.pendingRequest=null,i(A),h.saveEventData(),h.processRequests(u)})}},_n.prototype.queueRequest=function(e,r){this.queue.push(e),this.processRequests(r)};var ai,_o,mi=function(e){function r(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(i,u,h,d){this.skuToken=h;var v=!(!d&&!nt.ACCESS_TOKEN),w=Array.isArray(i)&&i.some(function(T){return pn(T)||Rn(T)});nt.EVENTS_URL&&v&&w&&this.queueRequest({id:u,timestamp:Date.now()},d)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),d=h.id,v=h.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),yn(this.anonId)||(this.anonId=Kr()),this.postEvent(v,{skuToken:this.skuToken},function(w){w||d&&(u.success[d]=!0)},i))}},r}(_n),Ql=new(function(e){function r(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(i,u){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return pn(h)||Rn(h)})&&this.queueRequest(Date.now(),u)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=jn(nt.ACCESS_TOKEN),d=h?h.u:nt.ACCESS_TOKEN,v=d!==this.eventData.tokenU;yn(this.anonId)||(this.anonId=Kr(),v=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),A=new Date(w),P=(w-this.eventData.lastSuccess)/864e5;v=v||P>=1||P<-1||T.getDate()!==A.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(M){M||(u.eventData.lastSuccess=w,u.eventData.tokenU=d)},i)}},r}(_n)),eu=Ql.postTurnstileEvent.bind(Ql),Gs=new mi,$s=Gs.postMapLoadEvent.bind(Gs),is=500,tu=50;function os(){xe.caches&&!ai&&(ai=xe.caches.open("mapbox-tiles"))}function Ws(e){var r=e.indexOf("?");return r<0?e:e.slice(0,r)}var ba,Ks=1/0;function Xs(){return ba==null&&(ba=xe.OffscreenCanvas&&new xe.OffscreenCanvas(1,1).getContext("2d")&&typeof xe.createImageBitmap=="function"),ba}var ru={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ru);var nu=function(e){function r(i,u,h){u===401&&Rn(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=h,this.name=this.constructor.name,this.message=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),wa=oe()?function(){return self.worker&&self.worker.referrer}:function(){return(xe.location.protocol==="blob:"?xe.parent:xe).location.href},Ro,Oo,as=function(e,r){if(!(/^file:/.test(i=e.url)||/^file:/.test(wa())&&!/^\w+:/.test(i))){if(xe.fetch&&xe.Request&&xe.AbortController&&xe.Request.prototype.hasOwnProperty("signal"))return function(u,h){var d,v=new xe.AbortController,w=new xe.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:wa(),signal:v.signal}),T=!1,A=!1,P=(d=w.url).indexOf("sku=")>0&&Rn(d);u.type==="json"&&w.headers.set("Accept","application/json");var M=function(F,G,$){if(!A){if(F&&F.message!=="SecurityError"&&mr(F),G&&$)return O(G);var ie=Date.now();xe.fetch(w).then(function(Q){if(Q.ok){var he=P?Q.clone():null;return O(Q,he,ie)}return h(new nu(Q.statusText,Q.status,u.url))}).catch(function(Q){Q.code!==20&&h(new Error(Q.message))})}},O=function(F,G,$){(u.type==="arrayBuffer"?F.arrayBuffer():u.type==="json"?F.json():F.text()).then(function(ie){A||(G&&$&&function(Q,he,ye){if(os(),ai){var we={status:he.status,statusText:he.statusText,headers:new xe.Headers};he.headers.forEach(function(De,Ge){return we.headers.set(Ge,De)});var Se=de(he.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&we.headers.set("Expires",new Date(ye+1e3*Se["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-ye<42e4||function(De,Ge){if(_o===void 0)try{new Response(new ReadableStream),_o=!0}catch{_o=!1}_o?Ge(De.body):De.blob().then(Ge)}(he,function(De){var Ge=new xe.Response(De,we);os(),ai&&ai.then(function(Qe){return Qe.put(Ws(Q.url),Ge)}).catch(function(Qe){return mr(Qe.message)})}))}}(w,G,$),T=!0,h(null,ie,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(function(ie){A||h(new Error(ie.message))})};return P?function(F,G){if(os(),!ai)return G(null);var $=Ws(F.url);ai.then(function(ie){ie.match($).then(function(Q){var he=function(ye){if(!ye)return!1;var we=new Date(ye.headers.get("Expires")||0),Se=de(ye.headers.get("Cache-Control")||"");return we>Date.now()&&!Se["no-cache"]}(Q);ie.delete($),he&&ie.put($,Q.clone()),G(null,Q,he)}).catch(G)}).catch(G)}(w,M):M(null,null),{cancel:function(){A=!0,T||v.abort()}}}(e,r);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var i;return function(u,h){var d=new xe.XMLHttpRequest;for(var v in d.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(d.responseType="arraybuffer"),u.headers)d.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=u.credentials==="include",d.onerror=function(){h(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var w=d.response;if(u.type==="json")try{w=JSON.parse(d.response)}catch(T){return h(T)}h(null,w,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else h(new nu(d.statusText,d.status,u.url))},d.send(u.body),{cancel:function(){return d.abort()}}}(e,r)},Js=function(e,r){return as(Ot(e,{type:"arrayBuffer"}),r)},Xr=function(e,r){return as(Ot(e,{method:"POST"}),r)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ro=[],Oo=0;var R=function(e,r){if(It.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Oo>=nt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ro.push(i),i}Oo++;var u=!1,h=function(){if(!u)for(u=!0,Oo--;Ro.length&&Oo<nt.MAX_PARALLEL_IMAGE_REQUESTS;){var v=Ro.shift();v.cancelled||(v.cancel=R(v.requestParameters,v.callback).cancel)}},d=Js(e,function(v,w,T,A){h(),v?r(v):w&&(Xs()?function(P,M){var O=new xe.Blob([new Uint8Array(P)],{type:"image/png"});xe.createImageBitmap(O).then(function(F){M(null,F)}).catch(function(F){M(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,r):function(P,M,O,F){var G=new xe.Image,$=xe.URL;G.onload=function(){M(null,G),$.revokeObjectURL(G.src),G.onload=null,xe.requestAnimationFrame(function(){G.src=z})},G.onerror=function(){return M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ie=new xe.Blob([new Uint8Array(P)],{type:"image/png"});G.cacheControl=O,G.expires=F,G.src=P.byteLength?$.createObjectURL(ie):z}(w,r,T,A))});return{cancel:function(){d.cancel(),h()}}};function B(e,r,i){i[e]&&i[e].indexOf(r)!==-1||(i[e]=i[e]||[],i[e].push(r))}function H(e,r,i){if(i&&i[e]){var u=i[e].indexOf(r);u!==-1&&i[e].splice(u,1)}}var K=function(e,r){r===void 0&&(r={}),Ot(this,r),this.type=e},ae=function(e){function r(i,u){u===void 0&&(u={}),e.call(this,"error",Ot({error:i},u))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(K),ce=function(){};ce.prototype.on=function(e,r){return this._listeners=this._listeners||{},B(e,r,this._listeners),this},ce.prototype.off=function(e,r){return H(e,r,this._listeners),H(e,r,this._oneTimeListeners),this},ce.prototype.once=function(e,r){return this._oneTimeListeners=this._oneTimeListeners||{},B(e,r,this._oneTimeListeners),this},ce.prototype.fire=function(e,r){typeof e=="string"&&(e=new K(e,r||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,h=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<h.length;u+=1)h[u].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var w=v[d];H(i,w,this._oneTimeListeners),w.call(this,e)}var T=this._eventedParent;T&&(Ot(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof ae&&console.error(e.error);return this},ce.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ce.prototype.setEventedParent=function(e,r){return this._eventedParent=e,this._eventedParentData=r,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},J=function(e,r,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)};function ge(e){var r=e.value;return r?[new J(e.key,r,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,d=i;h<d.length;h+=1){var v=d[h];for(var w in v)e[w]=v[w]}return e}function Ze(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pe(e){if(Array.isArray(e))return e.map(Pe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var r={};for(var i in e)r[i]=Pe(e[i]);return r}return Ze(e)}var Ve=function(e){function r(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Error),gt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var i=0,u=r;i<u.length;i+=1){var h=u[i];this.bindings[h[0]]=h[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var ht={kind:"null"},Me={kind:"number"},lt={kind:"string"},tt={kind:"boolean"},it={kind:"color"},Vt={kind:"object"},at={kind:"value"},Jt={kind:"collator"},wr={kind:"formatted"},Gt={kind:"resolvedImage"};function cr(e,r){return{kind:"array",itemType:e,N:r}}function Qt(e){if(e.kind==="array"){var r=Qt(e.itemType);return typeof e.N=="number"?"array<"+r+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+r+">"}return e.kind}var Kn=[ht,Me,lt,tt,it,wr,Vt,cr(at),Gt];function fr(e,r){if(r.kind==="error")return null;if(e.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!fr(e.itemType,r.itemType))&&(typeof e.N!="number"||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if(e.kind==="value"){for(var i=0,u=Kn;i<u.length;i+=1)if(!fr(u[i],r))return null}}return"Expected "+Qt(e)+" but found "+Qt(r)+" instead."}function Jr(e,r){return r.some(function(i){return i.kind===e.kind})}function xr(e,r){return r.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Xt=ke(function(e,r){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return u(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function d(w){return(T=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:T>1?1:T;var T}function v(w,T,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?w+(T-w)*A*6:2*A<1?T:3*A<2?w+(T-w)*(2/3-A)*6:w}try{r.parseCSSColor=function(w){var T,A=w.replace(/ /g,"").toLowerCase();if(A in i)return i[A].slice();if(A[0]==="#")return A.length===4?(T=parseInt(A.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:A.length===7&&(T=parseInt(A.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var P=A.indexOf("("),M=A.indexOf(")");if(P!==-1&&M+1===A.length){var O=A.substr(0,P),F=A.substr(P+1,M-(P+1)).split(","),G=1;switch(O){case"rgba":if(F.length!==4)return null;G=d(F.pop());case"rgb":return F.length!==3?null:[h(F[0]),h(F[1]),h(F[2]),G];case"hsla":if(F.length!==4)return null;G=d(F.pop());case"hsl":if(F.length!==3)return null;var $=(parseFloat(F[0])%360+360)%360/360,ie=d(F[1]),Q=d(F[2]),he=Q<=.5?Q*(ie+1):Q+ie-Q*ie,ye=2*Q-he;return[u(255*v(ye,he,$+1/3)),u(255*v(ye,he,$)),u(255*v(ye,he,$-1/3)),G];default:return null}}return null}}catch{}}).parseCSSColor,pr=function(e,r,i,u){u===void 0&&(u=1),this.r=e,this.g=r,this.b=i,this.a=u};pr.parse=function(e){if(e){if(e instanceof pr)return e;if(typeof e=="string"){var r=Xt(e);if(r)return new pr(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},pr.prototype.toString=function(){var e=this.toArray(),r=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(r)+","+Math.round(i)+","+u+")"},pr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},pr.black=new pr(0,0,0,1),pr.white=new pr(1,1,1,1),pr.transparent=new pr(0,0,0,0),pr.red=new pr(1,0,0,1);var si=function(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};si.prototype.compare=function(e,r){return this.collator.compare(e,r)},si.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ys=function(e,r,i,u,h){this.text=e,this.image=r,this.scale=i,this.fontStack=u,this.textColor=h},Cn=function(e){this.sections=e};Cn.fromString=function(e){return new Cn([new Ys(e,null,null,null,null)])},Cn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Cn.factory=function(e){return e instanceof Cn?e:Cn.fromString(e)},Cn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Cn.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(h)}}return e};var li=function(e){this.name=e.name,this.available=e.available};function Ac(e,r,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,r,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,r,i,u]:[e,r,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Qs(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof pr||e instanceof si||e instanceof Cn||e instanceof li)return!0;if(Array.isArray(e)){for(var r=0,i=e;r<i.length;r+=1)if(!Qs(i[r]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!Qs(e[u]))return!1;return!0}return!1}function Yr(e){if(e===null)return ht;if(typeof e=="string")return lt;if(typeof e=="boolean")return tt;if(typeof e=="number")return Me;if(e instanceof pr)return it;if(e instanceof si)return Jt;if(e instanceof Cn)return wr;if(e instanceof li)return Gt;if(Array.isArray(e)){for(var r,i=e.length,u=0,h=e;u<h.length;u+=1){var d=Yr(h[u]);if(r){if(r===d)continue;r=at;break}r=d}return cr(r||at,i)}return Vt}function el(e){var r=typeof e;return e===null?"":r==="string"||r==="number"||r==="boolean"?String(e):e instanceof pr||e instanceof Cn||e instanceof li?e.toString():JSON.stringify(e)}li.prototype.toString=function(){return this.name},li.fromString=function(e){return e?new li({name:e,available:!1}):null},li.prototype.serialize=function(){return["image",this.name]};var Xn=function(e,r){this.type=e,this.value=r};Xn.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Qs(e[1]))return r.error("invalid value");var i=e[1],u=Yr(i),h=r.expectedType;return u.kind!=="array"||u.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(u=h),new Xn(u,i)},Xn.prototype.evaluate=function(){return this.value},Xn.prototype.eachChild=function(){},Xn.prototype.outputDefined=function(){return!0},Xn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pr?["rgba"].concat(this.value.toArray()):this.value instanceof Cn?this.value.serialize():this.value};var An=function(e){this.name="ExpressionEvaluationError",this.message=e};An.prototype.toJSON=function(){return this.message};var Ni={string:lt,number:Me,boolean:tt,object:Vt},Lr=function(e,r){this.type=e,this.args=r};Lr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i,u=1,h=e[0];if(h==="array"){var d,v;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in Ni)||w==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);d=Ni[w],u++}else d=at;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);v=e[2],u++}i=cr(d,v)}else i=Ni[h];for(var T=[];u<e.length;u++){var A=r.parse(e[u],u,at);if(!A)return null;T.push(A)}return new Lr(i,T)},Lr.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var i=this.args[r].evaluate(e);if(!fr(this.type,Yr(i)))return i;if(r===this.args.length-1)throw new An("Expected value to be of type "+Qt(this.type)+", but found "+Qt(Yr(i))+" instead.")}return null},Lr.prototype.eachChild=function(e){this.args.forEach(e)},Lr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Lr.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(function(h){return h.serialize()}))};var io=function(e){this.type=wr,this.sections=e};io.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");for(var u=[],h=!1,d=1;d<=e.length-1;++d){var v=e[d];if(h&&typeof v=="object"&&!Array.isArray(v)){h=!1;var w=null;if(v["font-scale"]&&!(w=r.parse(v["font-scale"],1,Me)))return null;var T=null;if(v["text-font"]&&!(T=r.parse(v["text-font"],1,cr(lt))))return null;var A=null;if(v["text-color"]&&!(A=r.parse(v["text-color"],1,it)))return null;var P=u[u.length-1];P.scale=w,P.font=T,P.textColor=A}else{var M=r.parse(e[d],1,at);if(!M)return null;var O=M.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,u.push({content:M,scale:null,font:null,textColor:null})}}return new io(u)},io.prototype.evaluate=function(e){return new Cn(this.sections.map(function(r){var i=r.content.evaluate(e);return Yr(i)===Gt?new Ys("",i,null,null,null):new Ys(el(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))},io.prototype.eachChild=function(e){for(var r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},io.prototype.outputDefined=function(){return!1},io.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e.push(u.content.serialize());var h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),e.push(h)}return e};var Mi=function(e){this.type=Gt,this.input=e};Mi.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var i=r.parse(e[1],1,lt);return i?new Mi(i):r.error("No image name provided.")},Mi.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=li.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i},Mi.prototype.eachChild=function(e){e(this.input)},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){return["image",this.input.serialize()]};var fh={"to-boolean":tt,"to-color":it,"to-number":Me,"to-string":lt},Ui=function(e,r){this.type=e,this.args=r};Ui.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var u=fh[i],h=[],d=1;d<e.length;d++){var v=r.parse(e[d],d,at);if(!v)return null;h.push(v)}return new Ui(u,h)},Ui.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var r,i,u=0,h=this.args;u<h.length;u+=1){if(i=null,(r=h[u].evaluate(e))instanceof pr)return r;if(typeof r=="string"){var d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&!(i=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":Ac(r[0],r[1],r[2],r[3])))return new pr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new An(i||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var v=null,w=0,T=this.args;w<T.length;w+=1){if((v=T[w].evaluate(e))===null)return 0;var A=Number(v);if(!isNaN(A))return A}throw new An("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Cn.fromString(el(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?li.fromString(el(this.args[0].evaluate(e))):el(this.args[0].evaluate(e))},Ui.prototype.eachChild=function(e){this.args.forEach(e)},Ui.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ui.prototype.serialize=function(){if(this.type.kind==="formatted")return new io([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Mi(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var Yd=["Unknown","Point","LineString","Polygon"],Do=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Do.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Do.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Yd[this.feature.type]:this.feature.type:null},Do.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Do.prototype.canonicalID=function(){return this.canonical},Do.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Do.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=pr.parse(e)),r};var On=function(e,r,i,u){this.name=e,this.type=r,this._evaluate=i,this.args=u};On.prototype.evaluate=function(e){return this._evaluate(e,this.args)},On.prototype.eachChild=function(e){this.args.forEach(e)},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},On.parse=function(e,r){var i,u=e[0],h=On.definitions[u];if(!h)return r.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=v.filter(function(Et){var st=Et[0];return!Array.isArray(st)||st.length===e.length-1}),T=null,A=0,P=w;A<P.length;A+=1){var M=P[A],O=M[0],F=M[1];T=new Xo(r.registry,r.path,null,r.scope);for(var G=[],$=!1,ie=1;ie<e.length;ie++){var Q=e[ie],he=Array.isArray(O)?O[ie-1]:O.type,ye=T.parse(Q,1+G.length,he);if(!ye){$=!0;break}G.push(ye)}if(!$)if(Array.isArray(O)&&O.length!==G.length)T.error("Expected "+O.length+" arguments, but found "+G.length+" instead.");else{for(var we=0;we<G.length;we++){var Se=Array.isArray(O)?O[we]:O.type,De=G[we];T.concat(we+1).checkSubtype(Se,De.type)}if(T.errors.length===0)return new On(u,d,F,G)}}if(w.length===1)(i=r.errors).push.apply(i,T.errors);else{for(var Ge=(w.length?w:v).map(function(Et){var st;return st=Et[0],Array.isArray(st)?"("+st.map(Qt).join(", ")+")":"("+Qt(st.type)+"...)"}).join(" | "),Qe=[],_t=1;_t<e.length;_t++){var ot=r.parse(e[_t],1+Qe.length);if(!ot)return null;Qe.push(Qt(ot.type))}r.error("Expected arguments of type "+Ge+", but found ("+Qe.join(", ")+") instead.")}return null},On.register=function(e,r){for(var i in On.definitions=r,r)e[i]=On};var xo=function(e,r,i){this.type=Jt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r};function Jn(e,r){e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1])}function Ea(e,r){return!(e[0]<=r[0]||e[2]>=r[2]||e[1]<=r[1]||e[3]>=r[3])}function Qd(e,r){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,r.z);return[Math.round(i*h*8192),Math.round(u*h*8192)]}function em(e,r,i){return r[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-r[0])*(e[1]-r[1])/(i[1]-r[1])+r[0]}function Ic(e,r){for(var i,u,h,d,v,w,T,A=!1,P=0,M=r.length;P<M;P++)for(var O=r[P],F=0,G=O.length;F<G-1;F++){if((d=(i=e)[0]-(u=O[F])[0])*(T=i[1]-(h=O[F+1])[1])-(w=i[0]-h[0])*(v=i[1]-u[1])==0&&d*w<=0&&v*T<=0)return!1;em(e,O[F],O[F+1])&&(A=!A)}return A}function tm(e,r){for(var i=0;i<r.length;i++)if(Ic(e,r[i]))return!0;return!1}function dh(e,r,i,u){var h=u[0]-i[0],d=u[1]-i[1],v=(e[0]-i[0])*d-h*(e[1]-i[1]),w=(r[0]-i[0])*d-h*(r[1]-i[1]);return v>0&&w<0||v<0&&w>0}function rm(e,r,i){for(var u=0,h=i;u<h.length;u+=1)for(var d=h[u],v=0;v<d.length-1;++v)if((M=[(P=d[v+1])[0]-(A=d[v])[0],P[1]-A[1]])[0]*(O=[(T=r)[0]-(w=e)[0],T[1]-w[1]])[1]-M[1]*O[0]!=0&&dh(w,T,A,P)&&dh(A,P,w,T))return!0;var w,T,A,P,M,O;return!1}function mh(e,r){for(var i=0;i<e.length;++i)if(!Ic(e[i],r))return!1;for(var u=0;u<e.length-1;++u)if(rm(e[u],e[u+1],r))return!1;return!0}function gh(e,r){for(var i=0;i<r.length;i++)if(mh(e,r[i]))return!0;return!1}function ss(e,r,i){for(var u=[],h=0;h<e.length;h++){for(var d=[],v=0;v<e[h].length;v++){var w=Qd(e[h][v],i);Jn(r,w),d.push(w)}u.push(d)}return u}function kc(e,r,i){for(var u=[],h=0;h<e.length;h++){var d=ss(e[h],r,i);u.push(d)}return u}function tl(e,r,i,u){if(e[0]<i[0]||e[0]>i[2]){var h=.5*u,d=e[0]-i[0]>h?-u:i[0]-e[0]>h?u:0;d===0&&(d=e[0]-i[2]>h?-u:i[2]-e[0]>h?u:0),e[0]+=d}Jn(r,e)}function yh(e,r,i,u){for(var h=8192*Math.pow(2,u.z),d=[8192*u.x,8192*u.y],v=[],w=0,T=e;w<T.length;w+=1)for(var A=0,P=T[w];A<P.length;A+=1){var M=P[A],O=[M.x+d[0],M.y+d[1]];tl(O,r,i,h),v.push(O)}return v}function iu(e,r,i,u){for(var h,d=8192*Math.pow(2,u.z),v=[8192*u.x,8192*u.y],w=[],T=0,A=e;T<A.length;T+=1){for(var P=[],M=0,O=A[T];M<O.length;M+=1){var F=O[M],G=[F.x+v[0],F.y+v[1]];Jn(r,G),P.push(G)}w.push(P)}if(r[2]-r[0]<=d/2){(h=r)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var $=0,ie=w;$<ie.length;$+=1)for(var Q=0,he=ie[$];Q<he.length;Q+=1)tl(he[Q],r,i,d)}return w}xo.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");var u=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,tt);if(!u)return null;var h=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,tt);if(!h)return null;var d=null;return i.locale&&!(d=r.parse(i.locale,1,lt))?null:new xo(u,h,d)},xo.prototype.evaluate=function(e){return new si(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},xo.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Vi=function(e,r){this.type=tt,this.geojson=e,this.geometries=r};function $o(e){if(e instanceof On&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Vi)return!1;var r=!0;return e.eachChild(function(i){r&&!$o(i)&&(r=!1)}),r}function Wo(e){if(e instanceof On&&e.name==="feature-state")return!1;var r=!0;return e.eachChild(function(i){r&&!Wo(i)&&(r=!1)}),r}function Sa(e,r){if(e instanceof On&&r.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!Sa(u,r)&&(i=!1)}),i}Vi.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Qs(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var h=i.features[u].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Vi(i,i.features[u].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Vi(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Vi(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vi.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=ss(i.coordinates,h,d),w=yh(r.geometry(),u,h,d);if(!Ea(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!Ic(A[T],v))return!1}if(i.type==="MultiPolygon"){var P=kc(i.coordinates,h,d),M=yh(r.geometry(),u,h,d);if(!Ea(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!tm(F[O],P))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=ss(i.coordinates,h,d),w=iu(r.geometry(),u,h,d);if(!Ea(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!mh(A[T],v))return!1}if(i.type==="MultiPolygon"){var P=kc(i.coordinates,h,d),M=iu(r.geometry(),u,h,d);if(!Ea(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!gh(F[O],P))return!1}return!0}(e,this.geometries)}return!1},Vi.prototype.eachChild=function(){},Vi.prototype.outputDefined=function(){return!0},Vi.prototype.serialize=function(){return["within",this.geojson]};var Ko=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};Ko.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var i=e[1];return r.scope.has(i)?new Ko(i,r.scope.get(i)):r.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Ko.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Ko.prototype.eachChild=function(){},Ko.prototype.outputDefined=function(){return!1},Ko.prototype.serialize=function(){return["var",this.name]};var Xo=function(e,r,i,u,h){r===void 0&&(r=[]),u===void 0&&(u=new gt),h===void 0&&(h=[]),this.registry=e,this.path=r,this.key=r.map(function(d){return"["+d+"]"}).join(""),this.scope=u,this.errors=h,this.expectedType=i};function ou(e,r){for(var i,u=e.length-1,h=0,d=u,v=0;h<=d;)if((i=e[v=Math.floor((h+d)/2)])<=r){if(v===u||r<e[v+1])return v;h=v+1}else{if(!(i>r))throw new An("Input is not a number.");d=v-1}return 0}Xo.prototype.parse=function(e,r,i,u,h){return h===void 0&&(h={}),r?this.concat(r,i,u)._parse(e,h):this._parse(e,h)},Xo.prototype._parse=function(e,r){function i(A,P,M){return M==="assert"?new Lr(P,[A]):M==="coerce"?new Ui(P,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[u];if(h){var d=h.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,w=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||w.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(v,w))return null}else d=i(d,v,r.typeAnnotation||"coerce");else d=i(d,v,r.typeAnnotation||"assert")}if(!(d instanceof Xn)&&d.type.kind!=="resolvedImage"&&function A(P){if(P instanceof Ko)return A(P.boundExpression);if(P instanceof On&&P.name==="error"||P instanceof xo||P instanceof Vi)return!1;var M=P instanceof Ui||P instanceof Lr,O=!0;return P.eachChild(function(F){O=M?O&&A(F):O&&F instanceof Xn}),!!O&&$o(P)&&Sa(P,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var T=new Do;try{d=new Xn(d.type,d.evaluate(T))}catch(A){return this.error(A.message),null}}return d}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Xo.prototype.concat=function(e,r,i){var u=typeof e=="number"?this.path.concat(e):this.path,h=i?this.scope.concat(i):this.scope;return new Xo(this.registry,u,r||null,h,this.errors)},Xo.prototype.error=function(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];var h=""+this.key+i.map(function(d){return"["+d+"]"}).join("");this.errors.push(new Ve(h,e))},Xo.prototype.checkSubtype=function(e,r){var i=fr(e,r);return i&&this.error(i),i};var gi=function(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var u=0,h=i;u<h.length;u+=1){var d=h[u],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function on(e,r,i){return e*(1-i)+r*i}gi.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=[],h=null;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],w=e[d+1],T=d,A=d+1;if(typeof v!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=v)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var P=r.parse(w,A,h);if(!P)return null;h=h||P.type,u.push([v,P])}return new gi(h,i,u)},gi.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;return u>=r[h-1]?i[h-1].evaluate(e):i[ou(r,u)].evaluate(e)},gi.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},gi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},gi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var ls=Object.freeze({__proto__:null,number:on,color:function(e,r,i){return new pr(on(e.r,r.r,i),on(e.g,r.g,i),on(e.b,r.b,i),on(e.a,r.a,i))},array:function(e,r,i){return e.map(function(u,h){return on(u,r[h],i)})}}),vh=6/29*3*(6/29),nm=Math.PI/180,im=180/Math.PI;function Pc(e){return e>.008856451679035631?Math.pow(e,1/3):e/vh+4/29}function Mc(e){return e>6/29?e*e*e:vh*(e-4/29)}function zc(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Lc(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _h(e){var r=Lc(e.r),i=Lc(e.g),u=Lc(e.b),h=Pc((.4124564*r+.3575761*i+.1804375*u)/.95047),d=Pc((.2126729*r+.7151522*i+.072175*u)/1);return{l:116*d-16,a:500*(h-d),b:200*(d-Pc((.0193339*r+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function xh(e){var r=(e.l+16)/116,i=isNaN(e.a)?r:r+e.a/500,u=isNaN(e.b)?r:r-e.b/200;return r=1*Mc(r),i=.95047*Mc(i),u=1.08883*Mc(u),new pr(zc(3.2404542*i-1.5371385*r-.4985314*u),zc(-.969266*i+1.8760108*r+.041556*u),zc(.0556434*i-.2040259*r+1.0572252*u),e.alpha)}function om(e,r,i){var u=r-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var rl={forward:_h,reverse:xh,interpolate:function(e,r,i){return{l:on(e.l,r.l,i),a:on(e.a,r.a,i),b:on(e.b,r.b,i),alpha:on(e.alpha,r.alpha,i)}}},nl={forward:function(e){var r=_h(e),i=r.l,u=r.a,h=r.b,d=Math.atan2(h,u)*im;return{h:d<0?d+360:d,c:Math.sqrt(u*u+h*h),l:i,alpha:e.a}},reverse:function(e){var r=e.h*nm,i=e.c;return xh({l:e.l,a:Math.cos(r)*i,b:Math.sin(r)*i,alpha:e.alpha})},interpolate:function(e,r,i){return{h:om(e.h,r.h,i),c:on(e.c,r.c,i),l:on(e.l,r.l,i),alpha:on(e.alpha,r.alpha,i)}}},bh=Object.freeze({__proto__:null,lab:rl,hcl:nl}),Dn=function(e,r,i,u,h){this.type=e,this.operator=r,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var d=0,v=h;d<v.length;d+=1){var w=v[d],T=w[1];this.labels.push(w[0]),this.outputs.push(T)}};function Rc(e,r,i,u){var h=u-i,d=e-i;return h===0?0:r===1?d/h:(Math.pow(r,d)-1)/(Math.pow(r,h)-1)}Dn.interpolationFactor=function(e,r,i,u){var h=0;if(e.name==="exponential")h=Rc(r,e.base,i,u);else if(e.name==="linear")h=Rc(r,1,i,u);else if(e.name==="cubic-bezier"){var d=e.controlPoints;h=new Y(d[0],d[1],d[2],d[3]).solve(Rc(r,1,i,u))}return h},Dn.parse=function(e,r){var i=e[0],u=e[1],h=e[2],d=e.slice(3);if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var v=u[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:v}}else{if(u[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(u[0]),1,0);var w=u.slice(1);if(w.length!==4||w.some(function(ie){return typeof ie!="number"||ie<0||ie>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(h=r.parse(h,2,Me)))return null;var T=[],A=null;i==="interpolate-hcl"||i==="interpolate-lab"?A=it:r.expectedType&&r.expectedType.kind!=="value"&&(A=r.expectedType);for(var P=0;P<d.length;P+=2){var M=d[P],O=d[P+1],F=P+3,G=P+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(T.length&&T[T.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);var $=r.parse(O,G,A);if(!$)return null;A=A||$.type,T.push([M,$])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Dn(A,i,u,h,T):r.error("Type "+Qt(A)+" is not interpolatable.")},Dn.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;if(u>=r[h-1])return i[h-1].evaluate(e);var d=ou(r,u),v=Dn.interpolationFactor(this.interpolation,u,r[d],r[d+1]),w=i[d].evaluate(e),T=i[d+1].evaluate(e);return this.operator==="interpolate"?ls[this.type.kind.toLowerCase()](w,T,v):this.operator==="interpolate-hcl"?nl.reverse(nl.interpolate(nl.forward(w),nl.forward(T),v)):rl.reverse(rl.interpolate(rl.forward(w),rl.forward(T),v))},Dn.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},Dn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Dn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r};var Jo=function(e,r){this.type=e,this.args=r};Jo.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var i=null,u=r.expectedType;u&&u.kind!=="value"&&(i=u);for(var h=[],d=0,v=e.slice(1);d<v.length;d+=1){var w=r.parse(v[d],1+h.length,i,void 0,{typeAnnotation:"omit"});if(!w)return null;i=i||w.type,h.push(w)}var T=u&&h.some(function(A){return fr(u,A.type)});return new Jo(T?at:i,h)},Jo.prototype.evaluate=function(e){for(var r,i=null,u=0,h=0,d=this.args;h<d.length&&(u++,(i=d[h].evaluate(e))&&i instanceof li&&!i.available&&(r||(r=i.name),i=null,u===this.args.length&&(i=r)),i===null);h+=1);return i},Jo.prototype.eachChild=function(e){this.args.forEach(e)},Jo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Jo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Yo=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};Yo.prototype.evaluate=function(e){return this.result.evaluate(e)},Yo.prototype.eachChild=function(e){for(var r=0,i=this.bindings;r<i.length;r+=1)e(i[r][1]);e(this.result)},Yo.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var h=e[u];if(typeof h!="string")return r.error("Expected string, but found "+typeof h+" instead.",u);if(/[^a-zA-Z0-9_]/.test(h))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);var d=r.parse(e[u+1],u+1);if(!d)return null;i.push([h,d])}var v=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return v?new Yo(i,v):null},Yo.prototype.outputDefined=function(){return this.result.outputDefined()},Yo.prototype.serialize=function(){for(var e=["let"],r=0,i=this.bindings;r<i.length;r+=1){var u=i[r];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var Ta=function(e,r,i){this.type=e,this.index=r,this.input=i};Ta.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,Me),u=r.parse(e[2],2,cr(r.expectedType||at));return i&&u?new Ta(u.type.itemType,i,u):null},Ta.prototype.evaluate=function(e){var r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new An("Array index out of bounds: "+r+" < 0.");if(r>=i.length)throw new An("Array index out of bounds: "+r+" > "+(i.length-1)+".");if(r!==Math.floor(r))throw new An("Array index must be an integer, but found "+r+" instead.");return i[r]},Ta.prototype.eachChild=function(e){e(this.index),e(this.input)},Ta.prototype.outputDefined=function(){return!1},Ta.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ca=function(e,r){this.type=tt,this.needle=e,this.haystack=r};Ca.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);return i&&u?Jr(i.type,[tt,lt,Me,ht,at])?new Ca(i,u):r.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(i.type)+" instead"):null},Ca.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!xr(r,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Yr(r))+" instead.");if(!xr(i,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+Qt(Yr(i))+" instead.");return i.indexOf(r)>=0},Ca.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Ca.prototype.outputDefined=function(){return!0},Ca.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Qo=function(e,r,i){this.type=Me,this.needle=e,this.haystack=r,this.fromIndex=i};Qo.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);if(!i||!u)return null;if(!Jr(i.type,[tt,lt,Me,ht,at]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+Qt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new Qo(i,u,h):null}return new Qo(i,u)},Qo.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!xr(r,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+Qt(Yr(r))+" instead.");if(!xr(i,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+Qt(Yr(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(r,u)}return i.indexOf(r)},Qo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Qo.prototype.outputDefined=function(){return!1},Qo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Aa=function(e,r,i,u,h,d){this.inputType=e,this.type=r,this.input=i,this.cases=u,this.outputs=h,this.otherwise=d};Aa.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return r.error("Expected an even number of arguments.");var i,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(var h={},d=[],v=2;v<e.length-1;v+=2){var w=e[v],T=e[v+1];Array.isArray(w)||(w=[w]);var A=r.concat(v);if(w.length===0)return A.error("Expected at least one branch label.");for(var P=0,M=w;P<M.length;P+=1){var O=M[P];if(typeof O!="number"&&typeof O!="string")return A.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof O=="number"&&Math.floor(O)!==O)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,Yr(O)))return null}else i=Yr(O);if(h[String(O)]!==void 0)return A.error("Branch labels must be unique.");h[String(O)]=d.length}var F=r.parse(T,v,u);if(!F)return null;u=u||F.type,d.push(F)}var G=r.parse(e[1],1,at);if(!G)return null;var $=r.parse(e[e.length-1],e.length-1,u);return $?G.type.kind!=="value"&&r.concat(1).checkSubtype(i,G.type)?null:new Aa(i,u,G,h,d,$):null},Aa.prototype.evaluate=function(e){var r=this.input.evaluate(e);return(Yr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)},Aa.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Aa.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Aa.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],i=[],u={},h=0,d=Object.keys(this.cases).sort();h<d.length;h+=1){var v=d[h];(M=u[this.cases[v]])===void 0?(u[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[M][1].push(v)}for(var w=function(F){return e.inputType.kind==="number"?Number(F):F},T=0,A=i;T<A.length;T+=1){var P=A[T],M=P[0],O=P[1];r.push(O.length===1?w(O[0]):O.map(w)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var Ia=function(e,r,i){this.type=e,this.branches=r,this.otherwise=i};Ia.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var u=[],h=1;h<e.length-1;h+=2){var d=r.parse(e[h],h,tt);if(!d)return null;var v=r.parse(e[h+1],h+1,i);if(!v)return null;u.push([d,v]),i=i||v.type}var w=r.parse(e[e.length-1],e.length-1,i);return w?new Ia(i,u,w):null},Ia.prototype.evaluate=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];if(u[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},Ia.prototype.eachChild=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];e(u[0]),e(h)}e(this.otherwise)},Ia.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ia.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var ea=function(e,r,i,u){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=u};function wh(e,r){return e==="=="||e==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Eh(e,r,i,u){return u.compare(r,i)===0}function Er(e,r,i){var u=e!=="=="&&e!=="!=";return function(){function h(d,v,w){this.type=tt,this.lhs=d,this.rhs=v,this.collator=w,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return h.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var w=d[0],T=v.parse(d[1],1,at);if(!T)return null;if(!wh(w,T.type))return v.concat(1).error('"'+w+`" comparisons are not supported for type '`+Qt(T.type)+"'.");var A=v.parse(d[2],2,at);if(!A)return null;if(!wh(w,A.type))return v.concat(2).error('"'+w+`" comparisons are not supported for type '`+Qt(A.type)+"'.");if(T.type.kind!==A.type.kind&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot compare types '"+Qt(T.type)+"' and '"+Qt(A.type)+"'.");u&&(T.type.kind==="value"&&A.type.kind!=="value"?T=new Lr(A.type,[T]):T.type.kind!=="value"&&A.type.kind==="value"&&(A=new Lr(T.type,[A])));var P=null;if(d.length===4){if(T.type.kind!=="string"&&A.type.kind!=="string"&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(P=v.parse(d[3],3,Jt)))return null}return new h(T,A,P)},h.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),w=this.rhs.evaluate(d);if(u&&this.hasUntypedArgument){var T=Yr(v),A=Yr(w);if(T.kind!==A.kind||T.kind!=="string"&&T.kind!=="number")throw new An('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var P=Yr(v),M=Yr(w);if(P.kind!=="string"||M.kind!=="string")return r(d,v,w)}return this.collator?i(d,v,w,this.collator.evaluate(d)):r(d,v,w)},h.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},h}()}ea.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,Me);if(!i||!u)return null;if(!Jr(i.type,[cr(at),lt,at]))return r.error("Expected first argument to be of type array or string, but found "+Qt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new ea(i.type,i,u,h):null}return new ea(i.type,i,u)},ea.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!xr(r,["string","array"]))throw new An("Expected first argument to be of type array or string, but found "+Qt(Yr(r))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return r.slice(i,u)}return r.slice(i)},ea.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},ea.prototype.outputDefined=function(){return!1},ea.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var am=Er("==",function(e,r,i){return r===i},Eh),au=Er("!=",function(e,r,i){return r!==i},function(e,r,i,u){return!Eh(0,r,i,u)}),Sh=Er("<",function(e,r,i){return r<i},function(e,r,i,u){return u.compare(r,i)<0}),Th=Er(">",function(e,r,i){return r>i},function(e,r,i,u){return u.compare(r,i)>0}),Ch=Er("<=",function(e,r,i){return r<=i},function(e,r,i,u){return u.compare(r,i)<=0}),Ah=Er(">=",function(e,r,i){return r>=i},function(e,r,i,u){return u.compare(r,i)>=0}),ka=function(e,r,i,u,h){this.type=lt,this.number=e,this.locale=r,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=h};ka.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");var h=null;if(u.locale&&!(h=r.parse(u.locale,1,lt)))return null;var d=null;if(u.currency&&!(d=r.parse(u.currency,1,lt)))return null;var v=null;if(u["min-fraction-digits"]&&!(v=r.parse(u["min-fraction-digits"],1,Me)))return null;var w=null;return u["max-fraction-digits"]&&!(w=r.parse(u["max-fraction-digits"],1,Me))?null:new ka(i,h,d,v,w)},ka.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ka.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var ta=function(e){this.type=Me,this.input=e};ta.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+Qt(i.type)+" instead."):new ta(i):null},ta.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new An("Expected value to be of type string or array, but found "+Qt(Yr(r))+" instead.")},ta.prototype.eachChild=function(e){e(this.input)},ta.prototype.outputDefined=function(){return!1},ta.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Pa={"==":am,"!=":au,">":Th,"<":Sh,">=":Ah,"<=":Ch,array:Lr,at:Ta,boolean:Lr,case:Ia,coalesce:Jo,collator:xo,format:io,image:Mi,in:Ca,"index-of":Qo,interpolate:Dn,"interpolate-hcl":Dn,"interpolate-lab":Dn,length:ta,let:Yo,literal:Xn,match:Aa,number:Lr,"number-format":ka,object:Lr,slice:ea,step:gi,string:Lr,"to-boolean":Ui,"to-color":Ui,"to-number":Ui,"to-string":Ui,var:Ko,within:Vi};function Ih(e,r){var i=r[0],u=r[1],h=r[2],d=r[3];i=i.evaluate(e),u=u.evaluate(e),h=h.evaluate(e);var v=d?d.evaluate(e):1,w=Ac(i,u,h,v);if(w)throw new An(w);return new pr(i/255*v,u/255*v,h/255*v,v)}function kh(e,r){return e in r}function Oc(e,r){var i=r[e];return i===void 0?null:i}function Ma(e){return{type:e}}function Ph(e){return{result:"success",value:e}}function za(e){return{result:"error",value:e}}function La(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Mh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function il(e){return!!e.expression&&e.expression.interpolated}function Ar(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function su(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function sm(e){return e}function us(e,r,i){return e!==void 0?e:r!==void 0?r:i!==void 0?i:void 0}function zh(e,r,i,u,h){return us(typeof i===h?u[i]:void 0,e.default,r.default)}function lm(e,r,i){if(Ar(i)!=="number")return us(e.default,r.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var h=ou(e.stops.map(function(d){return d[0]}),i);return e.stops[h][1]}function Lh(e,r,i){var u=e.base!==void 0?e.base:1;if(Ar(i)!=="number")return us(e.default,r.default);var h=e.stops.length;if(h===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[h-1][0])return e.stops[h-1][1];var d=ou(e.stops.map(function(M){return M[0]}),i),v=function(M,O,F,G){var $=G-F,ie=M-F;return $===0?0:O===1?ie/$:(Math.pow(O,ie)-1)/(Math.pow(O,$)-1)}(i,u,e.stops[d][0],e.stops[d+1][0]),w=e.stops[d][1],T=e.stops[d+1][1],A=ls[r.type]||sm;if(e.colorSpace&&e.colorSpace!=="rgb"){var P=bh[e.colorSpace];A=function(M,O){return P.reverse(P.interpolate(P.forward(M),P.forward(O),v))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var M=arguments,O=[],F=arguments.length;F--;)O[F]=M[F];var G=w.evaluate.apply(void 0,O),$=T.evaluate.apply(void 0,O);if(G!==void 0&&$!==void 0)return A(G,$,v)}}:A(w,T,v)}function lu(e,r,i){return r.type==="color"?i=pr.parse(i):r.type==="formatted"?i=Cn.fromString(i.toString()):r.type==="resolvedImage"?i=li.fromString(i.toString()):Ar(i)===r.type||r.type==="enum"&&r.values[i]||(i=void 0),us(i,e.default,r.default)}On.register(Pa,{error:[{kind:"error"},[lt],function(e,r){throw new An(r[0].evaluate(e))}],typeof:[lt,[at],function(e,r){return Qt(Yr(r[0].evaluate(e)))}],"to-rgba":[cr(Me,4),[it],function(e,r){return r[0].evaluate(e).toArray()}],rgb:[it,[Me,Me,Me],Ih],rgba:[it,[Me,Me,Me,Me],Ih],has:{type:tt,overloads:[[[lt],function(e,r){return kh(r[0].evaluate(e),e.properties())}],[[lt,Vt],function(e,r){var i=r[1];return kh(r[0].evaluate(e),i.evaluate(e))}]]},get:{type:at,overloads:[[[lt],function(e,r){return Oc(r[0].evaluate(e),e.properties())}],[[lt,Vt],function(e,r){var i=r[1];return Oc(r[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[at,[lt],function(e,r){return Oc(r[0].evaluate(e),e.featureState||{})}],properties:[Vt,[],function(e){return e.properties()}],"geometry-type":[lt,[],function(e){return e.geometryType()}],id:[at,[],function(e){return e.id()}],zoom:[Me,[],function(e){return e.globals.zoom}],"heatmap-density":[Me,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Me,[],function(e){return e.globals.lineProgress||0}],accumulated:[at,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Me,Ma(Me),function(e,r){for(var i=0,u=0,h=r;u<h.length;u+=1)i+=h[u].evaluate(e);return i}],"*":[Me,Ma(Me),function(e,r){for(var i=1,u=0,h=r;u<h.length;u+=1)i*=h[u].evaluate(e);return i}],"-":{type:Me,overloads:[[[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)-i.evaluate(e)}],[[Me],function(e,r){return-r[0].evaluate(e)}]]},"/":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)/i.evaluate(e)}],"%":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)%i.evaluate(e)}],ln2:[Me,[],function(){return Math.LN2}],pi:[Me,[],function(){return Math.PI}],e:[Me,[],function(){return Math.E}],"^":[Me,[Me,Me],function(e,r){var i=r[1];return Math.pow(r[0].evaluate(e),i.evaluate(e))}],sqrt:[Me,[Me],function(e,r){return Math.sqrt(r[0].evaluate(e))}],log10:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN10}],ln:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))}],log2:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN2}],sin:[Me,[Me],function(e,r){return Math.sin(r[0].evaluate(e))}],cos:[Me,[Me],function(e,r){return Math.cos(r[0].evaluate(e))}],tan:[Me,[Me],function(e,r){return Math.tan(r[0].evaluate(e))}],asin:[Me,[Me],function(e,r){return Math.asin(r[0].evaluate(e))}],acos:[Me,[Me],function(e,r){return Math.acos(r[0].evaluate(e))}],atan:[Me,[Me],function(e,r){return Math.atan(r[0].evaluate(e))}],min:[Me,Ma(Me),function(e,r){return Math.min.apply(Math,r.map(function(i){return i.evaluate(e)}))}],max:[Me,Ma(Me),function(e,r){return Math.max.apply(Math,r.map(function(i){return i.evaluate(e)}))}],abs:[Me,[Me],function(e,r){return Math.abs(r[0].evaluate(e))}],round:[Me,[Me],function(e,r){var i=r[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Me,[Me],function(e,r){return Math.floor(r[0].evaluate(e))}],ceil:[Me,[Me],function(e,r){return Math.ceil(r[0].evaluate(e))}],"filter-==":[tt,[lt,at],function(e,r){var i=r[0],u=r[1];return e.properties()[i.value]===u.value}],"filter-id-==":[tt,[at],function(e,r){var i=r[0];return e.id()===i.value}],"filter-type-==":[tt,[lt],function(e,r){var i=r[0];return e.geometryType()===i.value}],"filter-<":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h<d}],"filter-id-<":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<h}],"filter->":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h>d}],"filter-id->":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>h}],"filter-<=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<=h}],"filter->=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>=h}],"filter-has":[tt,[at],function(e,r){return r[0].value in e.properties()}],"filter-has-id":[tt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[tt,[cr(lt)],function(e,r){return r[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[tt,[cr(at)],function(e,r){return r[0].value.indexOf(e.id())>=0}],"filter-in-small":[tt,[lt,cr(at)],function(e,r){var i=r[0];return r[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[tt,[lt,cr(at)],function(e,r){var i=r[0],u=r[1];return function(h,d,v,w){for(;v<=w;){var T=v+w>>1;if(d[T]===h)return!0;d[T]>h?w=T-1:v=T+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)&&i.evaluate(e)}],[Ma(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)||i.evaluate(e)}],[Ma(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[tt,[tt],function(e,r){return!r[0].evaluate(e)}],"is-supported-script":[tt,[lt],function(e,r){var i=e.globals&&e.globals.isSupportedScript;return!i||i(r[0].evaluate(e))}],upcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toUpperCase()}],downcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toLowerCase()}],concat:[lt,Ma(at),function(e,r){return r.map(function(i){return el(i.evaluate(e))}).join("")}],"resolved-locale":[lt,[Jt],function(e,r){return r[0].evaluate(e).resolvedLocale()}]});var cs=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Do,this._defaultValue=r?function(i){return i.type==="color"&&su(i.default)?new pr(0,0,0,0):i.type==="color"?pr.parse(i.default)||null:i.default===void 0?null:i.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function ol(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Pa}function uu(e,r){var i=new Xo(Pa,[],r?function(h){var d={color:it,string:lt,number:Me,enum:lt,boolean:tt,formatted:wr,resolvedImage:Gt};return h.type==="array"?cr(d[h.value]||at,h.length):d[h.type]}(r):void 0),u=i.parse(e,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Ph(new cs(u,r)):za(i.errors)}cs.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},cs.prototype.evaluate=function(e,r,i,u,h,d){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new An("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}};var al=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Wo(r.expression)};al.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,d)},al.prototype.evaluate=function(e,r,i,u,h,d){return this._styleExpression.evaluate(e,r,i,u,h,d)};var ps=function(e,r,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Wo(r.expression),this.interpolationType=u};function Rh(e,r){if((e=uu(e,r)).result==="error")return e;var i=e.value.expression,u=$o(i);if(!u&&!La(r))return za([new Ve("","data expressions not supported")]);var h=Sa(i,["zoom"]);if(!h&&!Mh(r))return za([new Ve("","zoom expressions not supported")]);var d=function v(w){var T=null;if(w instanceof Yo)T=v(w.result);else if(w instanceof Jo)for(var A=0,P=w.args;A<P.length&&!(T=v(P[A]));A+=1);else(w instanceof gi||w instanceof Dn)&&w.input instanceof On&&w.input.name==="zoom"&&(T=w);return T instanceof Ve||w.eachChild(function(M){var O=v(M);O instanceof Ve?T=O:!T&&O?T=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&O&&T!==O&&(T=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return d||h?d instanceof Ve?za([d]):d instanceof Dn&&!il(r)?za([new Ve("",'"interpolate" expressions cannot be used with this property')]):Ph(d?new ps(u?"camera":"composite",e.value,d.labels,d instanceof Dn?d.interpolation:void 0):new al(u?"constant":"source",e.value)):za([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ps.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,d)},ps.prototype.evaluate=function(e,r,i,u,h,d){return this._styleExpression.evaluate(e,r,i,u,h,d)},ps.prototype.interpolationFactor=function(e,r,i){return this.interpolationType?Dn.interpolationFactor(this.interpolationType,e,r,i):0};var hs=function(e,r){this._parameters=e,this._specification=r,Ue(this,function i(u,h){var d,v,w,T=h.type==="color",A=u.stops&&typeof u.stops[0][0]=="object",P=A||!(A||u.property!==void 0),M=u.type||(il(h)?"exponential":"interval");if(T&&((u=Ue({},u)).stops&&(u.stops=u.stops.map(function(ot){return[ot[0],pr.parse(ot[1])]})),u.default=pr.parse(u.default?u.default:h.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!bh[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(M==="exponential")d=Lh;else if(M==="interval")d=lm;else if(M==="categorical"){d=zh,v=Object.create(null);for(var O=0,F=u.stops;O<F.length;O+=1){var G=F[O];v[G[0]]=G[1]}w=typeof u.stops[0][0]}else{if(M!=="identity")throw new Error('Unknown function type "'+M+'"');d=lu}if(A){for(var $={},ie=[],Q=0;Q<u.stops.length;Q++){var he=u.stops[Q],ye=he[0].zoom;$[ye]===void 0&&($[ye]={zoom:ye,type:u.type,property:u.property,default:u.default,stops:[]},ie.push(ye)),$[ye].stops.push([he[0].value,he[1]])}for(var we=[],Se=0,De=ie;Se<De.length;Se+=1){var Ge=De[Se];we.push([$[Ge].zoom,i($[Ge],h)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Dn.interpolationFactor.bind(void 0,Qe),zoomStops:we.map(function(ot){return ot[0]}),evaluate:function(ot,Et){var st=ot.zoom;return Lh({stops:we,base:u.base},h,st).evaluate(st,Et)}}}if(P){var _t=M==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:_t,interpolationFactor:Dn.interpolationFactor.bind(void 0,_t),zoomStops:u.stops.map(function(ot){return ot[0]}),evaluate:function(ot){return d(u,h,ot.zoom,v,w)}}}return{kind:"source",evaluate:function(ot,Et){var st=Et&&Et.properties?Et.properties[u.property]:void 0;return st===void 0?us(u.default,h.default):d(u,h,st,v,w)}}}(this._parameters,this._specification))};function oo(e){var r=e.key,i=e.value,u=e.valueSpec||{},h=e.objectElementValidators||{},d=e.style,v=e.styleSpec,w=[],T=Ar(i);if(T!=="object")return[new J(r,i,"object expected, "+T+" found")];for(var A in i){var P=A.split(".")[0],M=u[P]||u["*"],O=void 0;if(h[P])O=h[P];else if(u[P])O=Yt;else if(h["*"])O=h["*"];else{if(!u["*"]){w.push(new J(r,i[A],'unknown property "'+A+'"'));continue}O=Yt}w=w.concat(O({key:(r&&r+".")+A,value:i[A],valueSpec:M,style:d,styleSpec:v,object:i,objectKey:A},i))}for(var F in u)h[F]||u[F].required&&u[F].default===void 0&&i[F]===void 0&&w.push(new J(r,i,'missing required property "'+F+'"'));return w}function Oh(e){var r=e.value,i=e.valueSpec,u=e.style,h=e.styleSpec,d=e.key,v=e.arrayElementValidator||Yt;if(Ar(r)!=="array")return[new J(d,r,"array expected, "+Ar(r)+" found")];if(i.length&&r.length!==i.length)return[new J(d,r,"array length "+i.length+" expected, length "+r.length+" found")];if(i["min-length"]&&r.length<i["min-length"])return[new J(d,r,"array length at least "+i["min-length"]+" expected, length "+r.length+" found")];var w={type:i.value,values:i.values};h.$version<7&&(w.function=i.function),Ar(i.value)==="object"&&(w=i.value);for(var T=[],A=0;A<r.length;A++)T=T.concat(v({array:r,arrayIndex:A,value:r[A],valueSpec:w,style:u,styleSpec:h,key:d+"["+A+"]"}));return T}function Dh(e){var r=e.key,i=e.value,u=e.valueSpec,h=Ar(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new J(r,i,"number expected, "+h+" found")]:"minimum"in u&&i<u.minimum?[new J(r,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new J(r,i,i+" is greater than the maximum value "+u.maximum)]:[]}function Bh(e){var r,i,u,h=e.valueSpec,d=Ze(e.value.type),v={},w=d!=="categorical"&&e.value.property===void 0,T=!w,A=Ar(e.value.stops)==="array"&&Ar(e.value.stops[0])==="array"&&Ar(e.value.stops[0][0])==="object",P=oo({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(F){if(d==="identity")return[new J(F.key,F.value,'identity function may not have a "stops" property')];var G=[],$=F.value;return G=G.concat(Oh({key:F.key,value:$,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:M})),Ar($)==="array"&&$.length===0&&G.push(new J(F.key,$,"array must have at least one stop")),G},default:function(F){return Yt({key:F.key,value:F.value,valueSpec:h,style:F.style,styleSpec:F.styleSpec})}}});return d==="identity"&&w&&P.push(new J(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||P.push(new J(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!il(e.valueSpec)&&P.push(new J(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!La(e.valueSpec)?P.push(new J(e.key,e.value,"property functions not supported")):w&&!Mh(e.valueSpec)&&P.push(new J(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!A||e.value.property!==void 0||P.push(new J(e.key,e.value,'"property" property is required')),P;function M(F){var G=[],$=F.value,ie=F.key;if(Ar($)!=="array")return[new J(ie,$,"array expected, "+Ar($)+" found")];if($.length!==2)return[new J(ie,$,"array length 2 expected, length "+$.length+" found")];if(A){if(Ar($[0])!=="object")return[new J(ie,$,"object expected, "+Ar($[0])+" found")];if($[0].zoom===void 0)return[new J(ie,$,"object stop key must have zoom")];if($[0].value===void 0)return[new J(ie,$,"object stop key must have value")];if(u&&u>Ze($[0].zoom))return[new J(ie,$[0].zoom,"stop zoom values must appear in ascending order")];Ze($[0].zoom)!==u&&(u=Ze($[0].zoom),i=void 0,v={}),G=G.concat(oo({key:ie+"[0]",value:$[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Dh,value:O}}))}else G=G.concat(O({key:ie+"[0]",value:$[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},$));return ol(Pe($[1]))?G.concat([new J(ie+"[1]",$[1],"expressions are not allowed in function stops.")]):G.concat(Yt({key:ie+"[1]",value:$[1],valueSpec:h,style:F.style,styleSpec:F.styleSpec}))}function O(F,G){var $=Ar(F.value),ie=Ze(F.value),Q=F.value!==null?F.value:G;if(r){if($!==r)return[new J(F.key,Q,$+" stop domain type must match previous stop domain type "+r)]}else r=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new J(F.key,Q,"stop domain value must be a number, string, or boolean")];if($!=="number"&&d!=="categorical"){var he="number expected, "+$+" found";return La(h)&&d===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new J(F.key,Q,he)]}return d!=="categorical"||$!=="number"||isFinite(ie)&&Math.floor(ie)===ie?d!=="categorical"&&$==="number"&&i!==void 0&&ie<i?[new J(F.key,Q,"stop domain values must appear in ascending order")]:(i=ie,d==="categorical"&&ie in v?[new J(F.key,Q,"stop domain values must be unique")]:(v[ie]=!0,[])):[new J(F.key,Q,"integer expected, found "+ie)]}}function Ra(e){var r=(e.expressionContext==="property"?Rh:uu)(Pe(e.value),e.valueSpec);if(r.result==="error")return r.value.map(function(u){return new J(""+e.key+u.key,e.value,u.message)});var i=r.value.expression||r.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new J(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Wo(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Wo(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Sa(i,["zoom","feature-state"]))return[new J(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!$o(i))return[new J(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sl(e){var r=e.key,i=e.value,u=e.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(Ze(i))===-1&&h.push(new J(r,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(Ze(i))===-1&&h.push(new J(r,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),h}function cu(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var r=0,i=e.slice(1);r<i.length;r+=1){var u=i[r];if(!cu(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}hs.deserialize=function(e){return new hs(e._parameters,e._specification)},hs.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Dc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pu(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};cu(e)||(e=hu(e));var r=uu(e,Dc);if(r.result==="error")throw new Error(r.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,h){return r.value.evaluate(i,u,{},h)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var h=1;h<u.length;h++)if(i(u[h]))return!0;return!1}(e)}}function um(e,r){return e<r?-1:e>r?1:0}function hu(e){if(!e)return!0;var r,i=e[0];return e.length<=1?i!=="any":i==="=="?Bc(e[1],e[2],"=="):i==="!="?fu(Bc(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Bc(e[1],e[2],i):i==="any"?(r=e.slice(1),["any"].concat(r.map(hu))):i==="all"?["all"].concat(e.slice(1).map(hu)):i==="none"?["all"].concat(e.slice(1).map(hu).map(fu)):i==="in"?Fh(e[1],e.slice(2)):i==="!in"?fu(Fh(e[1],e.slice(2))):i==="has"?Nh(e[1]):i==="!has"?fu(Nh(e[1])):i!=="within"||e}function Bc(e,r,i){switch(e){case"$type":return["filter-type-"+i,r];case"$id":return["filter-id-"+i,r];default:return["filter-"+i,e,r]}}function Fh(e,r){if(r.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(i){return typeof i!=typeof r[0]})?["filter-in-large",e,["literal",r.sort(um)]]:["filter-in-small",e,["literal",r]]}}function Nh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function fu(e){return["!",e]}function Fc(e){return cu(Pe(e.value))?Ra(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(i){var u=i.value,h=i.key;if(Ar(u)!=="array")return[new J(h,u,"array expected, "+Ar(u)+" found")];var d,v=i.styleSpec,w=[];if(u.length<1)return[new J(h,u,"filter array must have at least 1 element")];switch(w=w.concat(sl({key:h+"[0]",value:u[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ze(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Ze(u[1])==="$type"&&w.push(new J(h,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&w.push(new J(h,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(d=Ar(u[1]))!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+d+" found"));for(var T=2;T<u.length;T++)d=Ar(u[T]),Ze(u[1])==="$type"?w=w.concat(sl({key:h+"["+T+"]",value:u[T],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&w.push(new J(h+"["+T+"]",u[T],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)w=w.concat(r({key:h+"["+A+"]",value:u[A],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Ar(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+d+" found"));break;case"within":d=Ar(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="object"&&w.push(new J(h+"[1]",u[1],"object expected, "+d+" found"))}return w}(e)}function Nc(e,r){var i=e.key,u=e.style,h=e.styleSpec,d=e.value,v=e.objectKey,w=h[r+"_"+e.layerType];if(!w)return[];var T=v.match(/^(.*)-transition$/);if(r==="paint"&&T&&w[T[1]]&&w[T[1]].transition)return Yt({key:i,value:d,valueSpec:h.transition,style:u,styleSpec:h});var A,P=e.valueSpec||w[v];if(!P)return[new J(i,d,'unknown property "'+v+'"')];if(Ar(d)==="string"&&La(P)&&!P.tokens&&(A=/^{([^}]+)}$/.exec(d)))return[new J(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var M=[];return e.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&M.push(new J(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&su(Pe(d))&&Ze(d.type)==="identity"&&M.push(new J(i,d,'"text-font" does not support identity functions'))),M.concat(Yt({key:e.key,value:d,valueSpec:P,style:u,styleSpec:h,expressionContext:"property",propertyType:r,propertyKey:v}))}function Uc(e){return Nc(e,"paint")}function ll(e){return Nc(e,"layout")}function Uh(e){var r=[],i=e.value,u=e.key,h=e.style,d=e.styleSpec;i.type||i.ref||r.push(new J(u,i,'either "type" or "ref" is required'));var v,w=Ze(i.type),T=Ze(i.ref);if(i.id)for(var A=Ze(i.id),P=0;P<e.arrayIndex;P++){var M=h.layers[P];Ze(M.id)===A&&r.push(new J(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+M.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(G){G in i&&r.push(new J(u,i[G],'"'+G+'" is prohibited for ref layers'))}),h.layers.forEach(function(G){Ze(G.id)===T&&(v=G)}),v?v.ref?r.push(new J(u,i.ref,"ref cannot reference another ref layer")):w=Ze(v.type):r.push(new J(u,i.ref,'ref layer "'+T+'" not found'));else if(w!=="background")if(i.source){var O=h.sources&&h.sources[i.source],F=O&&Ze(O.type);O?F==="vector"&&w==="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a raster source')):F==="raster"&&w!=="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a vector source')):F!=="vector"||i["source-layer"]?F==="raster-dem"&&w!=="hillshade"?r.push(new J(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!i.paint||!i.paint["line-gradient"]||F==="geojson"&&O.lineMetrics||r.push(new J(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new J(u,i,'layer "'+i.id+'" must specify a "source-layer"')):r.push(new J(u,i.source,'source "'+i.source+'" not found'))}else r.push(new J(u,i,'missing required property "source"'));return r=r.concat(oo({key:u,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Yt({key:u+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Fc,layout:function(G){return oo({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function($){return ll(Ue({layerType:w},$))}}})},paint:function(G){return oo({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function($){return Uc(Ue({layerType:w},$))}}})}}}))}function Oa(e){var r=e.value,i=e.key,u=Ar(r);return u!=="string"?[new J(i,r,"string expected, "+u+" found")]:[]}var Rr={promoteId:function(e){var r=e.key,i=e.value;if(Ar(i)==="string")return Oa({key:r,value:i});var u=[];for(var h in i)u.push.apply(u,Oa({key:r+"."+h,value:i[h]}));return u}};function du(e){var r=e.value,i=e.key,u=e.styleSpec,h=e.style;if(!r.type)return[new J(i,r,'"type" is required')];var d,v=Ze(r.type);switch(v){case"vector":case"raster":case"raster-dem":return oo({key:i,value:r,valueSpec:u["source_"+v.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Rr});case"geojson":if(d=oo({key:i,value:r,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Rr}),r.cluster)for(var w in r.clusterProperties){var T=r.clusterProperties[w],A=T[0],P=typeof A=="string"?[A,["accumulated"],["get",w]]:A;d.push.apply(d,Ra({key:i+"."+w+".map",value:T[1],expressionContext:"cluster-map"})),d.push.apply(d,Ra({key:i+"."+w+".reduce",value:P,expressionContext:"cluster-reduce"}))}return d;case"video":return oo({key:i,value:r,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return oo({key:i,value:r,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new J(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sl({key:i+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:u})}}function Da(e){var r=e.value,i=e.styleSpec,u=i.light,h=e.style,d=[],v=Ar(r);if(r===void 0)return d;if(v!=="object")return d.concat([new J("light",r,"object expected, "+v+" found")]);for(var w in r){var T=w.match(/^(.*)-transition$/);d=d.concat(T&&u[T[1]]&&u[T[1]].transition?Yt({key:w,value:r[w],valueSpec:i.transition,style:h,styleSpec:i}):u[w]?Yt({key:w,value:r[w],valueSpec:u[w],style:h,styleSpec:i}):[new J(w,r[w],'unknown property "'+w+'"')])}return d}var ra={"*":function(){return[]},array:Oh,boolean:function(e){var r=e.value,i=e.key,u=Ar(r);return u!=="boolean"?[new J(i,r,"boolean expected, "+u+" found")]:[]},number:Dh,color:function(e){var r=e.key,i=e.value,u=Ar(i);return u!=="string"?[new J(r,i,"color expected, "+u+" found")]:Xt(i)===null?[new J(r,i,'color expected, "'+i+'" found')]:[]},constants:ge,enum:sl,filter:Fc,function:Bh,layer:Uh,object:oo,source:du,light:Da,string:Oa,formatted:function(e){return Oa(e).length===0?[]:Ra(e)},resolvedImage:function(e){return Oa(e).length===0?[]:Ra(e)}};function Yt(e){var r=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&su(Ze(r))?Bh(e):i.expression&&ol(Pe(r))?Ra(e):i.type&&ra[i.type]?ra[i.type](e):oo(Ue({},e,{valueSpec:i.type?u[i.type]:i}))}function Ir(e){var r=e.value,i=e.key,u=Oa(e);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{range}" token'))),u}function zi(e,r){r===void 0&&(r=V);var i=[];return i=i.concat(Yt({key:"",value:e,valueSpec:r.$root,styleSpec:r,style:e,objectElementValidators:{glyphs:Ir,"*":function(){return[]}}})),e.constants&&(i=i.concat(ge({key:"constants",value:e.constants,style:e,styleSpec:r}))),ul(i)}function ul(e){return[].concat(e).sort(function(r,i){return r.line-i.line})}function fs(e){return function(){for(var r=arguments,i=[],u=arguments.length;u--;)i[u]=r[u];return ul(e.apply(this,i))}}zi.source=fs(du),zi.light=fs(Da),zi.layer=fs(Uh),zi.filter=fs(Fc),zi.paintProperty=fs(Uc),zi.layoutProperty=fs(ll);var cl=zi,cm=cl.light,pm=cl.paintProperty,pl=cl.layoutProperty;function hl(e,r){var i=!1;if(r&&r.length)for(var u=0,h=r;u<h.length;u+=1)e.fire(new ae(new Error(h[u].message))),i=!0;return i}var Bo=hn;function hn(e,r,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(r=h[1])+2*(i=h[2]);for(var d=0;d<this.d*this.d;d++){var v=h[3+d],w=h[3+d+1];u.push(v===w?null:h.subarray(v,w))}var T=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],T),this.bboxes=h.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*i;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=i,this.scale=r/e,this.uid=0;var P=i/r*e;this.min=-P,this.max=e+P}hn.prototype.insert=function(e,r,i,u,h){this._forEachCell(r,i,u,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(h)},hn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hn.prototype._insertCell=function(e,r,i,u,h,d){this.cells[h].push(d)},hn.prototype.query=function(e,r,i,u,h){var d=this.min,v=this.max;if(e<=d&&r<=d&&v<=i&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,r,i,u,this._queryCell,w,{},h),w},hn.prototype._queryCell=function(e,r,i,u,h,d,v,w){var T=this.cells[h];if(T!==null)for(var A=this.keys,P=this.bboxes,M=0;M<T.length;M++){var O=T[M];if(v[O]===void 0){var F=4*O;(w?w(P[F+0],P[F+1],P[F+2],P[F+3]):e<=P[F+2]&&r<=P[F+3]&&i>=P[F+0]&&u>=P[F+1])?(v[O]=!0,d.push(A[O])):v[O]=!1}}},hn.prototype._forEachCell=function(e,r,i,u,h,d,v,w){for(var T=this._convertToCellCoord(e),A=this._convertToCellCoord(r),P=this._convertToCellCoord(i),M=this._convertToCellCoord(u),O=T;O<=P;O++)for(var F=A;F<=M;F++){var G=this.d*F+O;if((!w||w(this._convertFromCellCoord(O),this._convertFromCellCoord(F),this._convertFromCellCoord(O+1),this._convertFromCellCoord(F+1)))&&h.call(this,e,r,i,u,G,d,v,w))return}},hn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},hn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},hn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,r=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var h=new Int32Array(r+i+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var d=r,v=0;v<e.length;v++){var w=e[v];h[3+v]=d,h.set(w,d),d+=w.length}return h[3+e.length]=d,h.set(this.keys,d),h[3+e.length+1]=d+=this.keys.length,h.set(this.bboxes,d),d+=this.bboxes.length,h.buffer};var fl=xe.ImageData,Vh=xe.ImageBitmap,an={};function ft(e,r,i){i===void 0&&(i={}),Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),an[e]={klass:r,omit:i.omit||[],shallow:i.shallow||[]}}for(var yi in ft("Object",Object),Bo.serialize=function(e,r){var i=e.toArrayBuffer();return r&&r.push(i),{buffer:i}},Bo.deserialize=function(e){return new Bo(e.buffer)},ft("Grid",Bo),ft("Color",pr),ft("Error",Error),ft("ResolvedImage",li),ft("StylePropertyFunction",hs),ft("StyleExpression",cs,{omit:["_evaluator"]}),ft("ZoomDependentExpression",ps),ft("ZoomConstantExpression",al),ft("CompoundExpression",On,{omit:["_evaluate"]}),Pa)Pa[yi]._classRegistryKey||ft("Expression_"+yi,Pa[yi]);function mu(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function ds(e){return Vh&&e instanceof Vh}function ao(e,r){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(mu(e)||ds(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return r&&r.push(i.buffer),i}if(e instanceof fl)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],h=0,d=e;h<d.length;h+=1)u.push(ao(d[h],r));return u}if(typeof e=="object"){var v=e.constructor,w=v._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var T=v.serialize?v.serialize(e,r):{};if(!v.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(an[w].omit.indexOf(A)>=0)){var P=e[A];T[A]=an[w].shallow.indexOf(A)>=0?P:ao(P,r)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(T.$name=w),T}throw new Error("can't serialize object of type "+typeof e)}function vi(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||mu(e)||ds(e)||ArrayBuffer.isView(e)||e instanceof fl)return e;if(Array.isArray(e))return e.map(vi);if(typeof e=="object"){var r=e.$name||"Object",i=an[r].klass;if(!i)throw new Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),h=0,d=Object.keys(e);h<d.length;h+=1){var v=d[h];if(v!=="$name"){var w=e[v];u[v]=an[r].shallow.indexOf(v)>=0?w:vi(w)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Vc=function(){this.first=!0};Vc.prototype.update=function(e,r){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function jc(e){for(var r=0,i=e;r<i.length;r+=1)if(gu(i[r].charCodeAt(0)))return!0;return!1}function gu(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function qc(e){return!(gu(e)||function(r){return!!(rt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||rt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||rt["Letterlike Symbols"](r)||rt["Number Forms"](r)||rt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||rt["Control Pictures"](r)&&r!==9251||rt["Optical Character Recognition"](r)||rt["Enclosed Alphanumerics"](r)||rt["Geometric Shapes"](r)||rt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||rt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||rt["CJK Symbols and Punctuation"](r)||rt.Katakana(r)||rt["Private Use Area"](r)||rt["CJK Compatibility Forms"](r)||rt["Small Form Variants"](r)||rt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(e))}function ji(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function _i(e,r){return!(!r&&ji(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function yu(e){for(var r=0,i=e;r<i.length;r+=1)if(ji(i[r].charCodeAt(0)))return!0;return!1}var vu=null,xi="unavailable",Fo=null,jh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(xi="error"),vu&&vu(e)};function dl(){Hc.fire(new K("pluginStateChange",{pluginStatus:xi,pluginURL:Fo}))}var Hc=new ce,Zc=function(){return xi},so=function(){if(xi!=="deferred"||!Fo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xi="loading",dl(),Fo&&Js({url:Fo},function(e){e?jh(e):(xi="loaded",dl())})},Li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xi==="loaded"||Li.applyArabicShaping!=null},isLoading:function(){return xi==="loading"},setState:function(e){xi=e.pluginStatus,Fo=e.pluginURL},isParsed:function(){return Li.applyArabicShaping!=null&&Li.processBidirectionalText!=null&&Li.processStyledBidirectionalText!=null},getPluginURL:function(){return Fo}},$t=function(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vc,this.transition={})};$t.prototype.isSupportedScript=function(e){return function(r,i){for(var u=0,h=r;u<h.length;u+=1)if(!_i(h[u].charCodeAt(0),i))return!1;return!0}(e,Li.isLoaded())},$t.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},$t.prototype.getCrossfadeParameters=function(){var e=this.zoom,r=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*r}};var bo=function(e,r){this.property=e,this.value=r,this.expression=function(i,u){if(su(i))return new hs(i,u);if(ol(i)){var h=Rh(i,u);if(h.result==="error")throw new Error(h.value.map(function(v){return v.key+": "+v.message}).join(", "));return h.value}var d=i;return typeof i=="string"&&u.type==="color"&&(d=pr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(r===void 0?e.specification.default:r,e.specification)};bo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},bo.prototype.possiblyEvaluate=function(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)};var qi=function(e){this.property=e,this.value=new bo(e,void 0)};qi.prototype.transitioned=function(e,r){return new Ba(this.property,this.value,r,Ot({},e.transition,this.transition),e.now)},qi.prototype.untransitioned=function(){return new Ba(this.property,this.value,null,{},0)};var Bn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Bn.prototype.getValue=function(e){return Ln(this._values[e].value.value)},Bn.prototype.setValue=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new qi(this._values[e].property)),this._values[e].value=new bo(this._values[e].property,r===null?void 0:Ln(r))},Bn.prototype.getTransition=function(e){return Ln(this._values[e].transition)},Bn.prototype.setTransition=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new qi(this._values[e].property)),this._values[e].transition=Ln(r)||void 0},Bn.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h);var d=this.getTransition(u);d!==void 0&&(e[u+"-transition"]=d)}return e},Bn.prototype.transitioned=function(e,r){for(var i=new na(this._properties),u=0,h=Object.keys(this._values);u<h.length;u+=1){var d=h[u];i._values[d]=this._values[d].transitioned(e,r._values[d])}return i},Bn.prototype.untransitioned=function(){for(var e=new na(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r];e._values[u]=this._values[u].untransitioned()}return e};var Ba=function(e,r,i,u,h){this.property=e,this.value=r,this.begin=h+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};Ba.prototype.possiblyEvaluate=function(e,r,i){var u=e.now||0,h=this.value.possiblyEvaluate(e,r,i),d=this.prior;if(d){if(u>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(u<this.begin)return d.possiblyEvaluate(e,r,i);var v=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,r,i),h,function(w){if(w<=0)return 0;if(w>=1)return 1;var T=w*w,A=T*w;return 4*(w<.5?A:3*(w-T)+A-.75)}(v))}return h};var na=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};na.prototype.possiblyEvaluate=function(e,r,i){for(var u=new ml(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u},na.prototype.hasTransition=function(){for(var e=0,r=Object.keys(this._values);e<r.length;e+=1)if(this._values[r[e]].prior)return!0;return!1};var lo=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};lo.prototype.getValue=function(e){return Ln(this._values[e].value)},lo.prototype.setValue=function(e,r){this._values[e]=new bo(this._values[e].property,r===null?void 0:Ln(r))},lo.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h)}return e},lo.prototype.possiblyEvaluate=function(e,r,i){for(var u=new ml(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u};var Yn=function(e,r,i){this.property=e,this.value=r,this.parameters=i};Yn.prototype.isConstant=function(){return this.value.kind==="constant"},Yn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Yn.prototype.evaluate=function(e,r,i,u){return this.property.evaluate(this.value,this.parameters,e,r,i,u)};var ml=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ml.prototype.get=function(e){return this._values[e]};var bt=function(e){this.specification=e};bt.prototype.possiblyEvaluate=function(e,r){return e.expression.evaluate(r)},bt.prototype.interpolate=function(e,r,i){var u=ls[this.specification.type];return u?u(e,r,i):e};var yt=function(e,r){this.specification=e,this.overrides=r};yt.prototype.possiblyEvaluate=function(e,r,i,u){return new Yn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,u)}:e.expression,r)},yt.prototype.interpolate=function(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Yn(this,{kind:"constant",value:void 0},e.parameters);var u=ls[this.specification.type];return u?new Yn(this,{kind:"constant",value:u(e.value.value,r.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,r,i,u,h,d){return e.kind==="constant"?e.value:e.evaluate(r,i,u,h,d)};var _u=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u,h,d){if(i.value===void 0)return new Yn(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var v=i.expression.evaluate(u,null,{},h,d),w=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(w,w,w,u);return new Yn(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){var A=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new Yn(this,{kind:"constant",value:A},u)}return new Yn(this,i.expression,u)},r.prototype.evaluate=function(i,u,h,d,v,w){if(i.kind==="source"){var T=i.evaluate(u,h,d,v,w);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},h,d),i.evaluate({zoom:Math.floor(u.zoom)},h,d),i.evaluate({zoom:Math.floor(u.zoom)+1},h,d),u):i.value},r.prototype._calculate=function(i,u,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:h,to:u}},r.prototype.interpolate=function(i){return i},r}(yt),Qn=function(e){this.specification=e};Qn.prototype.possiblyEvaluate=function(e,r,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(r,null,{},i,u);return this._calculate(h,h,h,r)}return this._calculate(e.expression.evaluate(new $t(Math.floor(r.zoom-1),r)),e.expression.evaluate(new $t(Math.floor(r.zoom),r)),e.expression.evaluate(new $t(Math.floor(r.zoom+1),r)),r)}},Qn.prototype._calculate=function(e,r,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:i,to:r}},Qn.prototype.interpolate=function(e){return e};var uo=function(e){this.specification=e};uo.prototype.possiblyEvaluate=function(e,r,i,u){return!!e.expression.evaluate(r,null,{},i,u)},uo.prototype.interpolate=function(){return!1};var Fn=function(e){for(var r in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[r];i.specification.overridable&&this.overridableProperties.push(r);var u=this.defaultPropertyValues[r]=new bo(i,void 0),h=this.defaultTransitionablePropertyValues[r]=new qi(i);this.defaultTransitioningPropertyValues[r]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=u.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",bt),ft("CrossFadedDataDrivenProperty",_u),ft("CrossFadedProperty",Qn),ft("ColorRampProperty",uo);var wo=function(e){function r(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new lo(u.layout)),u.paint)){for(var h in this._transitionablePaint=new Bn(u.paint),i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ml(u.paint)}}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},r.prototype.setLayoutProperty=function(i,u,h){h===void 0&&(h={}),u!=null&&this._validate(pl,"layers."+this.id+".layout."+i,i,u,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},r.prototype.getPaintProperty=function(i){return Fi(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},r.prototype.setPaintProperty=function(i,u,h){if(h===void 0&&(h={}),u!=null&&this._validate(pm,"layers."+this.id+".paint."+i,i,u,h))return!1;if(Fi(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",w=d.value.isDataDriven(),T=d.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var A=this._transitionablePaint._values[i].value;return A.isDataDriven()||w||v||this._handleOverridablePaintPropertyUpdate(i,T,A)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!1},r.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},r.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),nn(i,function(u,h){return!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length)})},r.prototype._validate=function(i,u,h,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&hl(this,i.call(cl,{key:u,layerType:this.type,objectKey:h,value:d,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof Yn&&La(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},r}(ce),Gc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},xu=function(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},dr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function In(e,r){r===void 0&&(r=1);var i=0,u=0;return{members:e.map(function(h){var d=Gc[h.type].BYTES_PER_ELEMENT,v=i=qh(i,Math.max(r,d)),w=h.components||1;return u=Math.max(u,d),i+=d*w,{name:h.name,type:h.type,components:w,offset:v}}),size:qh(i,Math.max(u,r)),alignment:r}}function qh(e,r){return Math.ceil(e/r)*r}dr.serialize=function(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},dr.deserialize=function(e){var r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},dr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},dr.prototype.clear=function(){this.length=0},dr.prototype.resize=function(e){this.reserve(e),this.length=e},dr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},dr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Fa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.int16[d+0]=u,this.int16[d+1]=h,i},r}(dr);Fa.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",Fa);var $c=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=4*i;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=d,this.int16[w+3]=v,i},r}(dr);$c.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",$c);var No=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=d,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(dr);No.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",No);var bi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=4*i,P=8*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.uint8[P+4]=d,this.uint8[P+5]=v,this.uint8[P+6]=w,this.uint8[P+7]=T,i},r}(dr);bi.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",bi);var ms=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.float32[d+0]=u,this.float32[d+1]=h,i},r}(dr);ms.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",ms);var Eo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,P,M){var O=this.length;return this.resize(O+1),this.emplace(O,i,u,h,d,v,w,T,A,P,M)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,P,M,O){var F=10*i;return this.uint16[F+0]=u,this.uint16[F+1]=h,this.uint16[F+2]=d,this.uint16[F+3]=v,this.uint16[F+4]=w,this.uint16[F+5]=T,this.uint16[F+6]=A,this.uint16[F+7]=P,this.uint16[F+8]=M,this.uint16[F+9]=O,i},r}(dr);Eo.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",Eo);var bu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,P,M,O,F){var G=this.length;return this.resize(G+1),this.emplace(G,i,u,h,d,v,w,T,A,P,M,O,F)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,P,M,O,F,G){var $=12*i;return this.int16[$+0]=u,this.int16[$+1]=h,this.int16[$+2]=d,this.int16[$+3]=v,this.uint16[$+4]=w,this.uint16[$+5]=T,this.uint16[$+6]=A,this.uint16[$+7]=P,this.int16[$+8]=M,this.int16[$+9]=O,this.int16[$+10]=F,this.int16[$+11]=G,i},r}(dr);bu.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",bu);var gs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.float32[v+0]=u,this.float32[v+1]=h,this.float32[v+2]=d,i},r}(dr);gs.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",gs);var gl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},r}(dr);gl.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",gl);var Wc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,P){var M=this.length;return this.resize(M+1),this.emplace(M,i,u,h,d,v,w,T,A,P)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,P,M){var O=10*i,F=5*i;return this.int16[O+0]=u,this.int16[O+1]=h,this.int16[O+2]=d,this.int16[O+3]=v,this.int16[O+4]=w,this.int16[O+5]=T,this.uint32[F+3]=A,this.uint16[O+8]=P,this.uint16[O+9]=M,i},r}(dr);Wc.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",Wc);var ys=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=d,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(dr);ys.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",ys);var Na=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v){var w=this.length;return this.resize(w+1),this.emplace(w,i,u,h,d,v)},r.prototype.emplace=function(i,u,h,d,v,w){var T=4*i,A=8*i;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=d,this.int16[A+6]=v,this.int16[A+7]=w,i},r}(dr);Na.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Na);var Kc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=12*i,T=3*i;return this.uint8[w+0]=u,this.uint8[w+1]=h,this.float32[T+1]=d,this.float32[T+2]=v,i},r}(dr);Kc.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Kc);var ia=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.uint16[v+0]=u,this.uint16[v+1]=h,this.uint16[v+2]=d,i},r}(dr);ia.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",ia);var oa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he,ye){var we=24*i,Se=12*i,De=48*i;return this.int16[we+0]=u,this.int16[we+1]=h,this.uint16[we+2]=d,this.uint16[we+3]=v,this.uint32[Se+2]=w,this.uint32[Se+3]=T,this.uint32[Se+4]=A,this.uint16[we+10]=P,this.uint16[we+11]=M,this.uint16[we+12]=O,this.float32[Se+7]=F,this.float32[Se+8]=G,this.uint8[De+36]=$,this.uint8[De+37]=ie,this.uint8[De+38]=Q,this.uint32[Se+10]=he,this.int16[we+22]=ye,i},r}(dr);oa.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",oa);var wu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Ut){var kt=this.length;return this.resize(kt+1),this.emplace(kt,i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Ut)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,P,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Ut,kt){var vt=34*i,Ht=17*i;return this.int16[vt+0]=u,this.int16[vt+1]=h,this.int16[vt+2]=d,this.int16[vt+3]=v,this.int16[vt+4]=w,this.int16[vt+5]=T,this.int16[vt+6]=A,this.int16[vt+7]=P,this.uint16[vt+8]=M,this.uint16[vt+9]=O,this.uint16[vt+10]=F,this.uint16[vt+11]=G,this.uint16[vt+12]=$,this.uint16[vt+13]=ie,this.uint16[vt+14]=Q,this.uint16[vt+15]=he,this.uint16[vt+16]=ye,this.uint16[vt+17]=we,this.uint16[vt+18]=Se,this.uint16[vt+19]=De,this.uint16[vt+20]=Ge,this.uint16[vt+21]=Qe,this.uint16[vt+22]=_t,this.uint32[Ht+12]=ot,this.float32[Ht+13]=Et,this.float32[Ht+14]=st,this.float32[Ht+15]=Ut,this.float32[Ht+16]=kt,i},r}(dr);wu.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",wu);var aa=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},r}(dr);aa.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",aa);var Hi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.int16[v+0]=u,this.int16[v+1]=h,this.int16[v+2]=d,i},r}(dr);Hi.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Hi);var Xc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=4*i;return this.uint32[2*i+0]=u,this.uint16[v+2]=h,this.uint16[v+3]=d,i},r}(dr);Xc.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Xc);var yl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.uint16[d+0]=u,this.uint16[d+1]=h,i},r}(dr);yl.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",yl);var Jc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},r}(dr);Jc.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",Jc);var Eu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=4*i;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=d,this.float32[w+3]=v,i},r}(dr);Eu.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",Eu);var o=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new ze(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,i),r}(xu);o.prototype.size=20;var s=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new o(this,i)},r}(Wc);ft("CollisionBoxArray",s);var a=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,i),r}(xu);a.prototype.size=48;var c=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new a(this,i)},r}(oa);ft("PlacedSymbolArray",c);var g=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,i),r}(xu);g.prototype.size=68;var _=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new g(this,i)},r}(wu);ft("SymbolInstanceArray",_);var b=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getoffsetX=function(i){return this.float32[1*i+0]},r}(aa);ft("GlyphOffsetArray",b);var S=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getx=function(i){return this.int16[3*i+0]},r.prototype.gety=function(i){return this.int16[3*i+1]},r.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},r}(Hi);ft("SymbolLineVertexArray",S);var I=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,i),r}(xu);I.prototype.size=8;var L=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new I(this,i)},r}(Xc);ft("FeatureIndexArray",L);var U=In([{name:"a_pos",components:2,type:"Int16"}],4).members,j=function(e){e===void 0&&(e=[]),this.segments=e};function q(e,r){return 256*(e=Rt(Math.floor(e),0,255))+Rt(Math.floor(r),0,255)}j.prototype.prepareSegment=function(e,r,i,u){var h=this.segments[this.segments.length-1];return e>j.MAX_VERTEX_ARRAY_LENGTH&&mr("Max vertices per segment is "+j.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>j.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==u)&&(h={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(h.sortKey=u),this.segments.push(h)),h},j.prototype.get=function(){return this.segments},j.prototype.destroy=function(){for(var e=0,r=this.segments;e<r.length;e+=1){var i=r[e];for(var u in i.vaos)i.vaos[u].destroy()}},j.simpleSegment=function(e,r,i,u){return new j([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},j.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",j);var X=In([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),W=ke(function(e){e.exports=function(r,i){var u,h,d,v,w,T,A,P;for(h=r.length-(u=3&r.length),d=i,w=3432918353,T=461845907,P=0;P<h;)A=255&r.charCodeAt(P)|(255&r.charCodeAt(++P))<<8|(255&r.charCodeAt(++P))<<16|(255&r.charCodeAt(++P))<<24,++P,d=27492+(65535&(v=5*(65535&(d=(d^=A=(65535&(A=(A=(65535&A)*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&r.charCodeAt(P+2))<<16;case 2:A^=(255&r.charCodeAt(P+1))<<8;case 1:d^=A=(65535&(A=(A=(65535&(A^=255&r.charCodeAt(P)))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return d^=r.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),re=ke(function(e){e.exports=function(r,i){for(var u,h=r.length,d=i^h,v=0;h>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(v)|(255&r.charCodeAt(++v))<<8|(255&r.charCodeAt(++v))<<16|(255&r.charCodeAt(++v))<<24))+((1540483477*(u>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:d^=(255&r.charCodeAt(v+2))<<16;case 2:d^=(255&r.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&r.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),Z=W,te=re;Z.murmur3=W,Z.murmur2=te;var le=function(){this.ids=[],this.positions=[],this.indexed=!1};le.prototype.add=function(e,r,i,u){this.ids.push(Ce(e)),this.positions.push(r,i,u)},le.prototype.getPositions=function(e){for(var r=Ce(e),i=0,u=this.ids.length-1;i<u;){var h=i+u>>1;this.ids[h]>=r?u=h:i=h+1}for(var d=[];this.ids[i]===r;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},le.serialize=function(e,r){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function h(d,v,w,T){for(;w<T;){for(var A=d[w+T>>1],P=w-1,M=T+1;;){do P++;while(d[P]<A);do M--;while(d[M]>A);if(P>=M)break;Ee(d,P,M),Ee(v,3*P,3*M),Ee(v,3*P+1,3*M+1),Ee(v,3*P+2,3*M+2)}M-w<T-M?(h(d,v,w,M),w=M+1):(h(d,v,M+1,T),T=M)}}(i,u,0,i.length-1),r&&r.push(i.buffer,u.buffer),{ids:i,positions:u}},le.deserialize=function(e){var r=new le;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r};var me=Math.pow(2,53)-1;function Ce(e){var r=+e;return!isNaN(r)&&r<=me?r:Z(String(e))}function Ee(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}ft("FeaturePositionMap",le);var Ie=function(e,r){this.gl=e.gl,this.location=r},Ne=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},r}(Ie),Ke=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},r}(Ie),We=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},r}(Ie),ut=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},r}(Ie),wt=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},r}(Ie),Ct=function(e){function r(i,u){e.call(this,i,u),this.current=pr.transparent}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},r}(Ie),Tt=new Float32Array(16),ir=function(e){function r(i,u){e.call(this,i,u),this.current=Tt}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},r}(Ie);function pt(e){return[q(255*e.r,255*e.g),q(255*e.b,255*e.a)]}var Lt=function(e,r,i){this.value=e,this.uniformNames=r.map(function(u){return"u_"+u}),this.type=i};Lt.prototype.setUniform=function(e,r,i){e.set(i.constantOr(this.value))},Lt.prototype.getBinding=function(e,r,i){return this.type==="color"?new Ct(e,r):new Ke(e,r)};var Nt=function(e,r){this.uniformNames=r.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Nt.prototype.setConstantPatternPositions=function(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr},Nt.prototype.setUniform=function(e,r,i,u){var h=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Nt.prototype.getBinding=function(e,r,i){return i.substr(0,9)==="u_pattern"?new wt(e,r):new Ke(e,r)};var zt=function(e,r,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(function(h){return{name:"a_"+h,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};zt.prototype.populatePaintArray=function(e,r,i,u,h){var d=this.paintVertexArray.length,v=this.expression.evaluate(new $t(0),r,{},u,[],h);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},zt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,r,h)},zt.prototype._setPaintValue=function(e,r,i){if(this.type==="color")for(var u=pt(i),h=e;h<r;h++)this.paintVertexArray.emplace(h,u[0],u[1]);else{for(var d=e;d<r;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Mt=function(e,r,i,u,h,d){this.expression=e,this.uniformNames=r.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Mt.prototype.populatePaintArray=function(e,r,i,u,h){var d=this.expression.evaluate(new $t(this.zoom),r,{},u,[],h),v=this.expression.evaluate(new $t(this.zoom+1),r,{},u,[],h),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,d,v)},Mt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:this.zoom},i,u),d=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,r,h,d)},Mt.prototype._setPaintValue=function(e,r,i,u){if(this.type==="color")for(var h=pt(i),d=pt(u),v=e;v<r;v++)this.paintVertexArray.emplace(v,h[0],h[1],d[0],d[1]);else{for(var w=e;w<r;w++)this.paintVertexArray.emplace(w,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Mt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Mt.prototype.setUniform=function(e,r){var i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,u=Rt(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Mt.prototype.getBinding=function(e,r,i){return new Ke(e,r)};var Bt=function(e,r,i,u,h,d){this.expression=e,this.type=r,this.useIntegerZoom=i,this.zoom=u,this.layerId=d,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Bt.prototype.populatePaintArray=function(e,r,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],i)},Bt.prototype.updatePaintArray=function(e,r,i,u,h){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],h)},Bt.prototype._setPaintValues=function(e,r,i,u){if(u&&i){var h=u[i.min],d=u[i.mid],v=u[i.max];if(h&&d&&v)for(var w=e;w<r;w++)this.zoomInPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],d.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Bt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,X.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,X.members,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Pt=function(e,r,i){this.binders={},this._buffers=[];var u=[];for(var h in e.paint._values)if(i(h)){var d=e.paint.get(h);if(d instanceof Yn&&La(d.property.specification)){var v=xn(h,e.type),w=d.value,T=d.property.specification.type,A=d.property.useIntegerZoom,P=d.property.specification["property-type"],M=P==="cross-faded"||P==="cross-faded-data-driven";if(w.kind==="constant")this.binders[h]=M?new Nt(w.value,v):new Lt(w.value,v,T),u.push("/u_"+h);else if(w.kind==="source"||M){var O=Zr(h,T,"source");this.binders[h]=M?new Bt(w,T,A,r,O,e.id):new zt(w,v,T,O),u.push("/a_"+h)}else{var F=Zr(h,T,"composite");this.binders[h]=new Mt(w,v,T,A,r,F),u.push("/z_"+h)}}}this.cacheKey=u.sort().join("")};Pt.prototype.getMaxValue=function(e){var r=this.binders[e];return r instanceof zt||r instanceof Mt?r.maxValue:0},Pt.prototype.populatePaintArrays=function(e,r,i,u,h){for(var d in this.binders){var v=this.binders[d];(v instanceof zt||v instanceof Mt||v instanceof Bt)&&v.populatePaintArray(e,r,i,u,h)}},Pt.prototype.setConstantPatternPositions=function(e,r){for(var i in this.binders){var u=this.binders[i];u instanceof Nt&&u.setConstantPatternPositions(e,r)}},Pt.prototype.updatePaintArrays=function(e,r,i,u,h){var d=!1;for(var v in e)for(var w=0,T=r.getPositions(v);w<T.length;w+=1){var A=T[w],P=i.feature(A.index);for(var M in this.binders){var O=this.binders[M];if((O instanceof zt||O instanceof Mt||O instanceof Bt)&&O.expression.isStateDependent===!0){var F=u.paint.get(M);O.expression=F.value,O.updatePaintArray(A.start,A.end,P,e[v],h),d=!0}}}return d},Pt.prototype.defines=function(){var e=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Lt||i instanceof Nt)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Pt.prototype.getBinderAttributes=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof zt||i instanceof Mt)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Bt)for(var h=0;h<X.members.length;h++)e.push(X.members[h].name)}return e},Pt.prototype.getBinderUniforms=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Lt||i instanceof Nt||i instanceof Mt)for(var u=0,h=i.uniformNames;u<h.length;u+=1)e.push(h[u])}return e},Pt.prototype.getPaintVertexBuffers=function(){return this._buffers},Pt.prototype.getUniforms=function(e,r){var i=[];for(var u in this.binders){var h=this.binders[u];if(h instanceof Lt||h instanceof Nt||h instanceof Mt)for(var d=0,v=h.uniformNames;d<v.length;d+=1){var w=v[d];if(r[w]){var T=h.getBinding(e,r[w],w);i.push({name:w,property:u,binding:T})}}}return i},Pt.prototype.setUniforms=function(e,r,i,u){for(var h=0,d=r;h<d.length;h+=1){var v=d[h],w=v.name,T=v.property;this.binders[T].setUniform(v.binding,u,i.get(T),w)}},Pt.prototype.updatePaintBuffers=function(e){for(var r in this._buffers=[],this.binders){var i=this.binders[r];if(e&&i instanceof Bt){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof zt||i instanceof Mt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Pt.prototype.upload=function(e){for(var r in this.binders){var i=this.binders[r];(i instanceof zt||i instanceof Mt||i instanceof Bt)&&i.upload(e)}this.updatePaintBuffers()},Pt.prototype.destroy=function(){for(var e in this.binders){var r=this.binders[e];(r instanceof zt||r instanceof Mt||r instanceof Bt)&&r.destroy()}};var At=function(e,r,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,h=e;u<h.length;u+=1){var d=h[u];this.programConfigurations[d.id]=new Pt(d,r,i)}this.needsUpload=!1,this._featureMap=new le,this._bufferOffset=0};function xn(e,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(r+"-","").replace(/-/g,"_")]}function Zr(e,r,i){var u={color:{source:ms,composite:Eu},number:{source:aa,composite:ms}},h=function(d){return{"line-pattern":{source:Eo,composite:Eo},"fill-pattern":{source:Eo,composite:Eo},"fill-extrusion-pattern":{source:Eo,composite:Eo}}[d]}(e);return h&&h[i]||u[r][i]}At.prototype.populatePaintArrays=function(e,r,i,u,h,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,r,u,h,d);r.id!==void 0&&this._featureMap.add(r.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},At.prototype.updatePaintArrays=function(e,r,i,u){for(var h=0,d=i;h<d.length;h+=1){var v=d[h];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,r,v,u)||this.needsUpload}},At.prototype.get=function(e){return this.programConfigurations[e]},At.prototype.upload=function(e){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}},At.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Lt),ft("CrossFadedConstantBinder",Nt),ft("SourceExpressionBinder",zt),ft("CrossFadedCompositeBinder",Bt),ft("CompositeExpressionBinder",Mt),ft("ProgramConfiguration",Pt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",At);var qn=Math.pow(2,14)-1,kn=-qn-1;function qr(e){for(var r=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var h=i[u],d=0;d<h.length;d++){var v=h[d],w=Math.round(v.x*r),T=Math.round(v.y*r);v.x=Rt(w,kn,qn),v.y=Rt(T,kn,qn),(w<v.x||w>v.x+1||T<v.y||T>v.y+1)&&mr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Qr(e,r){return{type:e.type,id:e.id,properties:e.properties,geometry:r?qr(e):[]}}function wi(e,r,i,u,h){e.emplaceBack(2*r+(u+1)/2,2*i+(h+1)/2)}var ei=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Fa,this.indexArray=new ia,this.segments=new j,this.programConfigurations=new At(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function sa(e,r){for(var i=0;i<e.length;i++)if(So(r,e[i]))return!0;for(var u=0;u<r.length;u++)if(So(e,r[u]))return!0;return!!vl(e,r)}function ui(e,r,i){return!!So(e,r)||!!la(r,e,i)}function co(e,r){if(e.length===1)return _l(r,e[0]);for(var i=0;i<r.length;i++)for(var u=r[i],h=0;h<u.length;h++)if(So(e,u[h]))return!0;for(var d=0;d<e.length;d++)if(_l(r,e[d]))return!0;for(var v=0;v<r.length;v++)if(vl(e,r[v]))return!0;return!1}function Zi(e,r,i){if(e.length>1){if(vl(e,r))return!0;for(var u=0;u<r.length;u++)if(la(r[u],e,i))return!0}for(var h=0;h<e.length;h++)if(la(e[h],r,i))return!0;return!1}function vl(e,r){if(e.length===0||r.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],h=e[i+1],d=0;d<r.length-1;d++)if(vs(u,h,r[d],r[d+1]))return!0;return!1}function vs(e,r,i,u){return cn(e,i,u)!==cn(r,i,u)&&cn(e,r,i)!==cn(e,r,u)}function la(e,r,i){var u=i*i;if(r.length===1)return e.distSqr(r[0])<u;for(var h=1;h<r.length;h++)if(_s(e,r[h-1],r[h])<u)return!0;return!1}function _s(e,r,i){var u=r.distSqr(i);if(u===0)return e.distSqr(r);var h=((e.x-r.x)*(i.x-r.x)+(e.y-r.y)*(i.y-r.y))/u;return e.distSqr(h<0?r:h>1?i:i.sub(r)._mult(h)._add(r))}function _l(e,r){for(var i,u,h,d=!1,v=0;v<e.length;v++)for(var w=0,T=(i=e[v]).length-1;w<i.length;T=w++)(u=i[w]).y>r.y!=(h=i[T]).y>r.y&&r.x<(h.x-u.x)*(r.y-u.y)/(h.y-u.y)+u.x&&(d=!d);return d}function So(e,r){for(var i=!1,u=0,h=e.length-1;u<e.length;h=u++){var d=e[u],v=e[h];d.y>r.y!=v.y>r.y&&r.x<(v.x-d.x)*(r.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function xl(e,r,i){var u=i[0],h=i[2];if(e.x<u.x&&r.x<u.x||e.x>h.x&&r.x>h.x||e.y<u.y&&r.y<u.y||e.y>h.y&&r.y>h.y)return!1;var d=cn(e,r,i[0]);return d!==cn(e,r,i[1])||d!==cn(e,r,i[2])||d!==cn(e,r,i[3])}function To(e,r,i){var u=r.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(r.id).getMaxValue(e)}function bn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Uo(e,r,i,u,h){if(!r[0]&&!r[1])return e;var d=ze.convert(r)._mult(h);i==="viewport"&&d._rotate(-u);for(var v=[],w=0;w<e.length;w++)v.push(e[w].sub(d));return v}ei.prototype.populate=function(e,r,i){var u=this.layers[0],h=[],d=null;u.type==="circle"&&(d=u.layout.get("circle-sort-key"));for(var v=0,w=e;v<w.length;v+=1){var T=w[v],A=T.feature,P=T.id,M=T.index,O=T.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,G=Qr(A,F);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),G,i)){var $=d?d.evaluate(G,{},i):void 0,ie={id:P,properties:A.properties,type:A.type,sourceLayerIndex:O,index:M,geometry:F?G.geometry:qr(A),patterns:{},sortKey:$};h.push(ie)}}d&&h.sort(function(Qe,_t){return Qe.sortKey-_t.sortKey});for(var Q=0,he=h;Q<he.length;Q+=1){var ye=he[Q],we=ye.geometry,Se=ye.index,De=ye.sourceLayerIndex,Ge=e[Se].feature;this.addFeature(ye,we,Se,i),r.featureIndex.insert(Ge,we,Se,De,this.index)}},ei.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},ei.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ei.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ei.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,U),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ei.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ei.prototype.addFeature=function(e,r,i,u){for(var h=0,d=r;h<d.length;h+=1)for(var v=0,w=d[h];v<w.length;v+=1){var T=w[v],A=T.x,P=T.y;if(!(A<0||A>=8192||P<0||P>=8192)){var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=M.vertexLength;wi(this.layoutVertexArray,A,P,-1,-1),wi(this.layoutVertexArray,A,P,1,-1),wi(this.layoutVertexArray,A,P,1,1),wi(this.layoutVertexArray,A,P,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),M.vertexLength+=4,M.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},ft("CircleBucket",ei,{omit:["layers"]});var ua=new Fn({"circle-sort-key":new yt(V.layout_circle["circle-sort-key"])}),Ua={paint:new Fn({"circle-radius":new yt(V.paint_circle["circle-radius"]),"circle-color":new yt(V.paint_circle["circle-color"]),"circle-blur":new yt(V.paint_circle["circle-blur"]),"circle-opacity":new yt(V.paint_circle["circle-opacity"]),"circle-translate":new bt(V.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(V.paint_circle["circle-stroke-opacity"])}),layout:ua},hr=typeof Float32Array<"u"?Float32Array:Array;function Ri(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ci(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3],w=r[4],T=r[5],A=r[6],P=r[7],M=r[8],O=r[9],F=r[10],G=r[11],$=r[12],ie=r[13],Q=r[14],he=r[15],ye=i[0],we=i[1],Se=i[2],De=i[3];return e[0]=ye*u+we*w+Se*M+De*$,e[1]=ye*h+we*T+Se*O+De*ie,e[2]=ye*d+we*A+Se*F+De*Q,e[3]=ye*v+we*P+Se*G+De*he,e[4]=(ye=i[4])*u+(we=i[5])*w+(Se=i[6])*M+(De=i[7])*$,e[5]=ye*h+we*T+Se*O+De*ie,e[6]=ye*d+we*A+Se*F+De*Q,e[7]=ye*v+we*P+Se*G+De*he,e[8]=(ye=i[8])*u+(we=i[9])*w+(Se=i[10])*M+(De=i[11])*$,e[9]=ye*h+we*T+Se*O+De*ie,e[10]=ye*d+we*A+Se*F+De*Q,e[11]=ye*v+we*P+Se*G+De*he,e[12]=(ye=i[12])*u+(we=i[13])*w+(Se=i[14])*M+(De=i[15])*$,e[13]=ye*h+we*T+Se*O+De*ie,e[14]=ye*d+we*A+Se*F+De*Q,e[15]=ye*v+we*P+Se*G+De*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,r=0,i=arguments.length;i--;)r+=e[i]*e[i];return Math.sqrt(r)});var Va,hm=ci;function Su(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3];return e[0]=i[0]*u+i[4]*h+i[8]*d+i[12]*v,e[1]=i[1]*u+i[5]*h+i[9]*d+i[13]*v,e[2]=i[2]*u+i[6]*h+i[10]*d+i[14]*v,e[3]=i[3]*u+i[7]*h+i[11]*d+i[15]*v,e}Va=new hr(3),hr!=Float32Array&&(Va[0]=0,Va[1]=0,Va[2]=0),function(){var e=new hr(4);hr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var fm=(function(){var e=new hr(2);hr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function r(i){e.call(this,i,Ua)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new ei(i)},r.prototype.queryRadius=function(i){var u=i;return To("circle-radius",this,u)+To("circle-stroke-width",this,u)+bn(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T,A){for(var P=Uo(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),M=this.paint.get("circle-radius").evaluate(u,h)+this.paint.get("circle-stroke-width").evaluate(u,h),O=this.paint.get("circle-pitch-alignment")==="map",F=O?P:function(Ge,Qe){return Ge.map(function(_t){return bl(_t,Qe)})}(P,A),G=O?M*T:M,$=0,ie=d;$<ie.length;$+=1)for(var Q=0,he=ie[$];Q<he.length;Q+=1){var ye=he[Q],we=O?ye:bl(ye,A),Se=G,De=Su([],[ye.x,ye.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Se*=De[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Se*=w.cameraToCenterDistance/De[3]),ui(F,we,Se))return!0}return!1},r}(wo));function bl(e,r){var i=Su([],[e.x,e.y,0,1],r);return new ze(i[0]/i[3],i[1]/i[3])}var Hh=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(ei);function xs(e,r,i,u){var h=r.width,d=r.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==h*d*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(h*d*i);return e.width=h,e.height=d,e.data=u,e}function Tu(e,r,i){var u=r.width,h=r.height;if(u!==e.width||h!==e.height){var d=xs({},{width:u,height:h},i);dm(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,h)},i),e.width=u,e.height=h,e.data=d.data}}function dm(e,r,i,u,h,d){if(h.width===0||h.height===0)return r;if(h.width>e.width||h.height>e.height||i.x>e.width-h.width||i.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>r.width||h.height>r.height||u.x>r.width-h.width||u.y>r.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,w=r.data,T=0;T<h.height;T++)for(var A=((i.y+T)*e.width+i.x)*d,P=((u.y+T)*r.width+u.x)*d,M=0;M<h.width*d;M++)w[P+M]=v[A+M];return r}ft("HeatmapBucket",Hh,{omit:["layers"]});var wl=function(e,r){xs(this,e,1,r)};wl.prototype.resize=function(e){Tu(this,e,1)},wl.prototype.clone=function(){return new wl({width:this.width,height:this.height},new Uint8Array(this.data))},wl.copy=function(e,r,i,u,h){dm(e,r,i,u,h,1)};var Ei=function(e,r){xs(this,e,4,r)};Ei.prototype.resize=function(e){Tu(this,e,4)},Ei.prototype.replace=function(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Ei.prototype.clone=function(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))},Ei.copy=function(e,r,i,u,h){dm(e,r,i,u,h,4)},ft("AlphaImage",wl),ft("RGBAImage",Ei);var gw={paint:new Fn({"heatmap-radius":new yt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uo(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(V.paint_heatmap["heatmap-opacity"])})};function Yy(e){var r={},i=e.resolution||256,u=e.clips?e.clips.length:1,h=e.image||new Ei({width:i,height:u}),d=function(G,$,ie){r[e.evaluationKey]=ie;var Q=e.expression.evaluate(r);h.data[G+$+0]=Math.floor(255*Q.r/Q.a),h.data[G+$+1]=Math.floor(255*Q.g/Q.a),h.data[G+$+2]=Math.floor(255*Q.b/Q.a),h.data[G+$+3]=Math.floor(255*Q.a)};if(e.clips)for(var v=0,w=0;v<u;++v,w+=4*i)for(var T=0,A=0;T<i;T++,A+=4){var P=T/(i-1),M=e.clips[v];d(w,A,M.start*(1-P)+M.end*P)}else for(var O=0,F=0;O<i;O++,F+=4)d(0,F,O/(i-1));return h}var yw=function(e){function r(i){e.call(this,i,gw),this._updateColorRamp()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new Hh(i)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=Yy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(wo),vw={paint:new Fn({"hillshade-illumination-direction":new bt(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(V.paint_hillshade["hillshade-accent-color"])})},_w=function(e){function r(i){e.call(this,i,vw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(wo),xw=In([{name:"a_pos",components:2,type:"Int16"}],4).members,mm=Zh,bw=Zh;function Zh(e,r,i){i=i||2;var u,h,d,v,w,T,A,P=r&&r.length,M=P?r[0]*i:e.length,O=Qy(e,0,M,i,!0),F=[];if(!O||O.next===O.prev)return F;if(P&&(O=function($,ie,Q,he){var ye,we,Se,De=[];for(ye=0,we=ie.length;ye<we;ye++)(Se=Qy($,ie[ye]*he,ye<we-1?ie[ye+1]*he:$.length,he,!1))===Se.next&&(Se.steiner=!0),De.push(kw(Se));for(De.sort(Cw),ye=0;ye<De.length;ye++)Aw(De[ye],Q),Q=bs(Q,Q.next);return Q}(e,r,O,i)),e.length>80*i){u=d=e[0],h=v=e[1];for(var G=i;G<M;G+=i)(w=e[G])<u&&(u=w),(T=e[G+1])<h&&(h=T),w>d&&(d=w),T>v&&(v=T);A=(A=Math.max(d-u,v-h))!==0?1/A:0}return Yc(O,F,i,u,h,A),F}function Qy(e,r,i,u,h){var d,v;if(h===vm(e,r,i,u)>0)for(d=r;d<i;d+=u)v=rv(d,e[d],e[d+1],v);else for(d=i-u;d>=r;d-=u)v=rv(d,e[d],e[d+1],v);return v&&Gh(v,v.next)&&(ep(v),v=v.next),v}function bs(e,r){if(!e)return e;r||(r=e);var i,u=e;do if(i=!1,u.steiner||!Gh(u,u.next)&&fn(u.prev,u,u.next)!==0)u=u.next;else{if(ep(u),(u=r=u.prev)===u.next)break;i=!0}while(i||u!==r);return r}function Yc(e,r,i,u,h,d,v){if(e){!v&&d&&function(P,M,O,F){var G=P;do G.z===null&&(G.z=gm(G.x,G.y,M,O,F)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==P);G.prevZ.nextZ=null,G.prevZ=null,function($){var ie,Q,he,ye,we,Se,De,Ge,Qe=1;do{for(Q=$,$=null,we=null,Se=0;Q;){for(Se++,he=Q,De=0,ie=0;ie<Qe&&(De++,he=he.nextZ);ie++);for(Ge=Qe;De>0||Ge>0&&he;)De!==0&&(Ge===0||!he||Q.z<=he.z)?(ye=Q,Q=Q.nextZ,De--):(ye=he,he=he.nextZ,Ge--),we?we.nextZ=ye:$=ye,ye.prevZ=we,we=ye;Q=he}we.nextZ=null,Qe*=2}while(Se>1)}(G)}(e,u,h,d);for(var w,T,A=e;e.prev!==e.next;)if(w=e.prev,T=e.next,d?Ew(e,u,h,d):ww(e))r.push(w.i/i),r.push(e.i/i),r.push(T.i/i),ep(e),e=T.next,A=T.next;else if((e=T)===A){v?v===1?Yc(e=Sw(bs(e),r,i),r,i,u,h,d,2):v===2&&Tw(e,r,i,u,h,d):Yc(bs(e),r,i,u,h,d,1);break}}}function ww(e){var r=e.prev,i=e,u=e.next;if(fn(r,i,u)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(Cu(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&fn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function Ew(e,r,i,u){var h=e.prev,d=e,v=e.next;if(fn(h,d,v)>=0)return!1;for(var w=h.x>d.x?h.x>v.x?h.x:v.x:d.x>v.x?d.x:v.x,T=h.y>d.y?h.y>v.y?h.y:v.y:d.y>v.y?d.y:v.y,A=gm(h.x<d.x?h.x<v.x?h.x:v.x:d.x<v.x?d.x:v.x,h.y<d.y?h.y<v.y?h.y:v.y:d.y<v.y?d.y:v.y,r,i,u),P=gm(w,T,r,i,u),M=e.prevZ,O=e.nextZ;M&&M.z>=A&&O&&O.z<=P;){if(M!==e.prev&&M!==e.next&&Cu(h.x,h.y,d.x,d.y,v.x,v.y,M.x,M.y)&&fn(M.prev,M,M.next)>=0||(M=M.prevZ,O!==e.prev&&O!==e.next&&Cu(h.x,h.y,d.x,d.y,v.x,v.y,O.x,O.y)&&fn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;M&&M.z>=A;){if(M!==e.prev&&M!==e.next&&Cu(h.x,h.y,d.x,d.y,v.x,v.y,M.x,M.y)&&fn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;O&&O.z<=P;){if(O!==e.prev&&O!==e.next&&Cu(h.x,h.y,d.x,d.y,v.x,v.y,O.x,O.y)&&fn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function Sw(e,r,i){var u=e;do{var h=u.prev,d=u.next.next;!Gh(h,d)&&ev(h,u,u.next,d)&&Qc(h,d)&&Qc(d,h)&&(r.push(h.i/i),r.push(u.i/i),r.push(d.i/i),ep(u),ep(u.next),u=e=d),u=u.next}while(u!==e);return bs(u)}function Tw(e,r,i,u,h,d){var v=e;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&Pw(v,w)){var T=tv(v,w);return v=bs(v,v.next),T=bs(T,T.next),Yc(v,r,i,u,h,d),void Yc(T,r,i,u,h,d)}w=w.next}v=v.next}while(v!==e)}function Cw(e,r){return e.x-r.x}function Aw(e,r){if(r=function(u,h){var d,v=h,w=u.x,T=u.y,A=-1/0;do{if(T<=v.y&&T>=v.next.y&&v.next.y!==v.y){var P=v.x+(T-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(P<=w&&P>A){if(A=P,P===w){if(T===v.y)return v;if(T===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(w===A)return d;var M,O=d,F=d.x,G=d.y,$=1/0;v=d;do w>=v.x&&v.x>=F&&w!==v.x&&Cu(T<G?w:A,T,F,G,T<G?A:w,T,v.x,v.y)&&(M=Math.abs(T-v.y)/(w-v.x),Qc(v,u)&&(M<$||M===$&&(v.x>d.x||v.x===d.x&&Iw(d,v)))&&(d=v,$=M)),v=v.next;while(v!==O);return d}(e,r)){var i=tv(r,e);bs(r,r.next),bs(i,i.next)}}function Iw(e,r){return fn(e.prev,e,r.prev)<0&&fn(r.next,e,e.next)<0}function gm(e,r,i,u,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*h)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function kw(e){var r=e,i=e;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==e);return i}function Cu(e,r,i,u,h,d,v,w){return(h-v)*(r-w)-(e-v)*(d-w)>=0&&(e-v)*(u-w)-(i-v)*(r-w)>=0&&(i-v)*(d-w)-(h-v)*(u-w)>=0}function Pw(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(i,u){var h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==u.i&&h.next.i!==u.i&&ev(h,h.next,i,u))return!0;h=h.next}while(h!==i);return!1}(e,r)&&(Qc(e,r)&&Qc(r,e)&&function(i,u){var h=i,d=!1,v=(i.x+u.x)/2,w=(i.y+u.y)/2;do h.y>w!=h.next.y>w&&h.next.y!==h.y&&v<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(d=!d),h=h.next;while(h!==i);return d}(e,r)&&(fn(e.prev,e,r.prev)||fn(e,r.prev,r))||Gh(e,r)&&fn(e.prev,e,e.next)>0&&fn(r.prev,r,r.next)>0)}function fn(e,r,i){return(r.y-e.y)*(i.x-r.x)-(r.x-e.x)*(i.y-r.y)}function Gh(e,r){return e.x===r.x&&e.y===r.y}function ev(e,r,i,u){var h=Wh(fn(e,r,i)),d=Wh(fn(e,r,u)),v=Wh(fn(i,u,e)),w=Wh(fn(i,u,r));return h!==d&&v!==w||!(h!==0||!$h(e,i,r))||!(d!==0||!$h(e,u,r))||!(v!==0||!$h(i,e,u))||!(w!==0||!$h(i,r,u))}function $h(e,r,i){return r.x<=Math.max(e.x,i.x)&&r.x>=Math.min(e.x,i.x)&&r.y<=Math.max(e.y,i.y)&&r.y>=Math.min(e.y,i.y)}function Wh(e){return e>0?1:e<0?-1:0}function Qc(e,r){return fn(e.prev,e,e.next)<0?fn(e,r,e.next)>=0&&fn(e,e.prev,r)>=0:fn(e,r,e.prev)<0||fn(e,e.next,r)<0}function tv(e,r){var i=new ym(e.i,e.x,e.y),u=new ym(r.i,r.x,r.y),h=e.next,d=r.prev;return e.next=r,r.prev=e,i.next=h,h.prev=i,u.next=i,i.prev=u,d.next=u,u.prev=d,u}function rv(e,r,i,u){var h=new ym(e,r,i);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function ep(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ym(e,r,i){this.i=e,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vm(e,r,i,u){for(var h=0,d=r,v=i-u;d<i;d+=u)h+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return h}function Mw(e,r,i,u,h){(function d(v,w,T,A,P){for(;A>T;){if(A-T>600){var M=A-T+1,O=w-T+1,F=Math.log(M),G=.5*Math.exp(2*F/3),$=.5*Math.sqrt(F*G*(M-G)/M)*(O-M/2<0?-1:1);d(v,w,Math.max(T,Math.floor(w-O*G/M+$)),Math.min(A,Math.floor(w+(M-O)*G/M+$)),P)}var ie=v[w],Q=T,he=A;for(tp(v,T,w),P(v[A],ie)>0&&tp(v,T,A);Q<he;){for(tp(v,Q,he),Q++,he--;P(v[Q],ie)<0;)Q++;for(;P(v[he],ie)>0;)he--}P(v[T],ie)===0?tp(v,T,he):tp(v,++he,A),he<=w&&(T=he+1),w<=he&&(A=he-1)}})(e,r,i||0,u||e.length-1,h||zw)}function tp(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}function zw(e,r){return e<r?-1:e>r?1:0}function _m(e,r){var i=e.length;if(i<=1)return[e];for(var u,h,d=[],v=0;v<i;v++){var w=no(e[v]);w!==0&&(e[v].area=Math.abs(w),h===void 0&&(h=w<0),h===w<0?(u&&d.push(u),u=[e[v]]):u.push(e[v]))}if(u&&d.push(u),r>1)for(var T=0;T<d.length;T++)d[T].length<=r||(Mw(d[T],r,1,d[T].length-1,Lw),d[T]=d[T].slice(0,r));return d}function Lw(e,r){return r.area-e.area}function xm(e,r,i){for(var u=i.patternDependencies,h=!1,d=0,v=r;d<v.length;d+=1){var w=v[d].paint.get(e+"-pattern");w.isConstant()||(h=!0);var T=w.constantOr(null);T&&(h=!0,u[T.to]=!0,u[T.from]=!0)}return h}function bm(e,r,i,u,h){for(var d=h.patternDependencies,v=0,w=r;v<w.length;v+=1){var T=w[v],A=T.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var P=A.evaluate({zoom:u-1},i,{},h.availableImages),M=A.evaluate({zoom:u},i,{},h.availableImages),O=A.evaluate({zoom:u+1},i,{},h.availableImages);M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,d[P=P&&P.name?P.name:P]=!0,d[M]=!0,d[O]=!0,i.patterns[T.id]={min:P,mid:M,max:O}}}return i}Zh.deviation=function(e,r,i,u){var h=r&&r.length,d=Math.abs(vm(e,0,h?r[0]*i:e.length,i));if(h)for(var v=0,w=r.length;v<w;v++)d-=Math.abs(vm(e,r[v]*i,v<w-1?r[v+1]*i:e.length,i));var T=0;for(v=0;v<u.length;v+=3){var A=u[v]*i,P=u[v+1]*i,M=u[v+2]*i;T+=Math.abs((e[A]-e[M])*(e[P+1]-e[A+1])-(e[A]-e[P])*(e[M+1]-e[A+1]))}return d===0&&T===0?0:Math.abs((T-d)/d)},Zh.flatten=function(e){for(var r=e[0][0].length,i={vertices:[],holes:[],dimensions:r},u=0,h=0;h<e.length;h++){for(var d=0;d<e[h].length;d++)for(var v=0;v<r;v++)i.vertices.push(e[h][d][v]);h>0&&i.holes.push(u+=e[h-1].length)}return i},mm.default=bw;var Vo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Fa,this.indexArray=new ia,this.indexArray2=new yl,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.segments2=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};Vo.prototype.populate=function(e,r,i){this.hasPattern=xm("fill",this.layers,r);for(var u=this.layers[0].layout.get("fill-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var w=v[d],T=w.feature,A=w.id,P=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Qr(T,O);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),F,i)){var G=u?u.evaluate(F,{},i,r.availableImages):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:P,geometry:O?F.geometry:qr(T),patterns:{},sortKey:G};h.push($)}}u&&h.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=bm("fill",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},Vo.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Vo.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},Vo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Vo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},Vo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Vo.prototype.addFeature=function(e,r,i,u,h){for(var d=0,v=_m(r,500);d<v.length;d+=1){for(var w=v[d],T=0,A=0,P=w;A<P.length;A+=1)T+=P[A].length;for(var M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=M.vertexLength,F=[],G=[],$=0,ie=w;$<ie.length;$+=1){var Q=ie[$];if(Q.length!==0){Q!==w[0]&&G.push(F.length/2);var he=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ye=he.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ye+Q.length-1,ye),F.push(Q[0].x),F.push(Q[0].y);for(var we=1;we<Q.length;we++)this.layoutVertexArray.emplaceBack(Q[we].x,Q[we].y),this.indexArray2.emplaceBack(ye+we-1,ye+we),F.push(Q[we].x),F.push(Q[we].y);he.vertexLength+=Q.length,he.primitiveLength+=Q.length}}for(var Se=mm(F,G),De=0;De<Se.length;De+=3)this.indexArray.emplaceBack(O+Se[De],O+Se[De+1],O+Se[De+2]);M.vertexLength+=T,M.primitiveLength+=Se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillBucket",Vo,{omit:["layers","patternFeatures"]});var Rw=new Fn({"fill-sort-key":new yt(V.layout_fill["fill-sort-key"])}),Ow={paint:new Fn({"fill-antialias":new bt(V.paint_fill["fill-antialias"]),"fill-opacity":new yt(V.paint_fill["fill-opacity"]),"fill-color":new yt(V.paint_fill["fill-color"]),"fill-outline-color":new yt(V.paint_fill["fill-outline-color"]),"fill-translate":new bt(V.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new _u(V.paint_fill["fill-pattern"])}),layout:Rw},Dw=function(e){function r(i){e.call(this,i,Ow)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(i){return new Vo(i)},r.prototype.queryRadius=function(){return bn(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T){return co(Uo(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),d)},r.prototype.isTileClipped=function(){return!0},r}(wo),Bw=In([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,nv=Au;function Au(e,r,i,u,h){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=h,e.readFields(Fw,this,r)}function Fw(e,r,i){e==1?r.id=i.readVarint():e==2?function(u,h){for(var d=u.readVarint()+u.pos;u.pos<d;){var v=h._keys[u.readVarint()],w=h._values[u.readVarint()];h.properties[v]=w}}(i,r):e==3?r.type=i.readVarint():e==4&&(r._geometry=i.pos)}function Nw(e){for(var r,i,u=0,h=0,d=e.length,v=d-1;h<d;v=h++)u+=((i=e[v]).x-(r=e[h]).x)*(r.y+i.y);return u}Au.types=["Unknown","Point","LineString","Polygon"],Au.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,i=e.readVarint()+e.pos,u=1,h=0,d=0,v=0,w=[];e.pos<i;){if(h<=0){var T=e.readVarint();u=7&T,h=T>>3}if(h--,u===1||u===2)d+=e.readSVarint(),v+=e.readSVarint(),u===1&&(r&&w.push(r),r=[]),r.push(new ze(d,v));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&w.push(r),w},Au.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var r=e.readVarint()+e.pos,i=1,u=0,h=0,d=0,v=1/0,w=-1/0,T=1/0,A=-1/0;e.pos<r;){if(u<=0){var P=e.readVarint();i=7&P,u=P>>3}if(u--,i===1||i===2)(h+=e.readSVarint())<v&&(v=h),h>w&&(w=h),(d+=e.readSVarint())<T&&(T=d),d>A&&(A=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,T,w,A]},Au.prototype.toGeoJSON=function(e,r,i){var u,h,d=this.extent*Math.pow(2,i),v=this.extent*e,w=this.extent*r,T=this.loadGeometry(),A=Au.types[this.type];function P(F){for(var G=0;G<F.length;G++){var $=F[G];F[G]=[360*($.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+w)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(u=0;u<T.length;u++)M[u]=T[u][0];P(T=M);break;case 2:for(u=0;u<T.length;u++)P(T[u]);break;case 3:for(T=function(F){var G=F.length;if(G<=1)return[F];for(var $,ie,Q=[],he=0;he<G;he++){var ye=Nw(F[he]);ye!==0&&(ie===void 0&&(ie=ye<0),ie===ye<0?($&&Q.push($),$=[F[he]]):$.push(F[he]))}return $&&Q.push($),Q}(T),u=0;u<T.length;u++)for(h=0;h<T[u].length;h++)P(T[u][h])}T.length===1?T=T[0]:A="Multi"+A;var O={type:"Feature",geometry:{type:A,coordinates:T},properties:this.properties};return"id"in this&&(O.id=this.id),O};var iv=ov;function ov(e,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Uw,this,r),this.length=this._features.length}function Uw(e,r,i){e===15?r.version=i.readVarint():e===1?r.name=i.readString():e===5?r.extent=i.readVarint():e===2?r._features.push(i.pos):e===3?r._keys.push(i.readString()):e===4&&r._values.push(function(u){for(var h=null,d=u.readVarint()+u.pos;u.pos<d;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(i))}function Vw(e,r,i){if(e===3){var u=new iv(i,i.readVarint()+i.pos);u.length&&(r[u.name]=u)}}ov.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var r=this._pbf.readVarint()+this._pbf.pos;return new nv(this._pbf,r,this.extent,this._keys,this._values)};var Iu={VectorTile:function(e,r){this.layers=e.readFields(Vw,{},r)},VectorTileFeature:nv,VectorTileLayer:iv},jw=Iu.VectorTileFeature.types,wm=Math.pow(2,13);function rp(e,r,i,u,h,d,v,w){e.emplaceBack(r,i,2*Math.floor(u*wm)+v,h*wm*2,d*wm*2,Math.round(w))}var jo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new No,this.indexArray=new ia,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function qw(e,r){return e.x===r.x&&(e.x<0||e.x>8192)||e.y===r.y&&(e.y<0||e.y>8192)}jo.prototype.populate=function(e,r,i){this.features=[],this.hasPattern=xm("fill-extrusion",this.layers,r);for(var u=0,h=e;u<h.length;u+=1){var d=h[u],v=d.feature,w=d.id,T=d.index,A=d.sourceLayerIndex,P=this.layers[0]._featureFilter.needGeometry,M=Qr(v,P);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),M,i)){var O={id:w,sourceLayerIndex:A,index:T,geometry:P?M.geometry:qr(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(bm("fill-extrusion",this.layers,O,this.zoom,r)):this.addFeature(O,O.geometry,T,i,{}),r.featureIndex.insert(v,O.geometry,T,A,this.index,!0)}}},jo.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.features;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},jo.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},jo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jo.prototype.addFeature=function(e,r,i,u,h){for(var d=0,v=_m(r,500);d<v.length;d+=1){for(var w=v[d],T=0,A=0,P=w;A<P.length;A+=1)T+=P[A].length;for(var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),O=0,F=w;O<F.length;O+=1){var G=F[O];if(G.length!==0&&!((Ht=G).every(function(Dt){return Dt.x<0})||Ht.every(function(Dt){return Dt.x>8192})||Ht.every(function(Dt){return Dt.y<0})||Ht.every(function(Dt){return Dt.y>8192})))for(var $=0,ie=0;ie<G.length;ie++){var Q=G[ie];if(ie>=1){var he=G[ie-1];if(!qw(Q,he)){M.vertexLength+4>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ye=Q.sub(he)._perp()._unit(),we=he.dist(Q);$+we>32768&&($=0),rp(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,0,$),rp(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,1,$),rp(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,0,$+=we),rp(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,1,$);var Se=M.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+T>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),jw[e.type]==="Polygon"){for(var De=[],Ge=[],Qe=M.vertexLength,_t=0,ot=w;_t<ot.length;_t+=1){var Et=ot[_t];if(Et.length!==0){Et!==w[0]&&Ge.push(De.length/2);for(var st=0;st<Et.length;st++){var Ut=Et[st];rp(this.layoutVertexArray,Ut.x,Ut.y,0,0,1,1,0),De.push(Ut.x),De.push(Ut.y)}}}for(var kt=mm(De,Ge),vt=0;vt<kt.length;vt+=3)this.indexArray.emplaceBack(Qe+kt[vt],Qe+kt[vt+2],Qe+kt[vt+1]);M.primitiveLength+=kt.length/3,M.vertexLength+=T}}var Ht;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillExtrusionBucket",jo,{omit:["layers","features"]});var Hw={paint:new Fn({"fill-extrusion-opacity":new bt(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _u(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Zw=function(e){function r(i){e.call(this,i,Hw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new jo(i)},r.prototype.queryRadius=function(){return bn(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T,A){var P=Uo(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),M=this.paint.get("fill-extrusion-height").evaluate(u,h),O=this.paint.get("fill-extrusion-base").evaluate(u,h),F=function($,ie,Q,he){for(var ye=[],we=0,Se=$;we<Se.length;we+=1){var De=Se[we],Ge=[De.x,De.y,0,1];Su(Ge,Ge,ie),ye.push(new ze(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return ye}(P,A),G=function($,ie,Q,he){for(var ye=[],we=[],Se=he[8]*ie,De=he[9]*ie,Ge=he[10]*ie,Qe=he[11]*ie,_t=he[8]*Q,ot=he[9]*Q,Et=he[10]*Q,st=he[11]*Q,Ut=0,kt=$;Ut<kt.length;Ut+=1){for(var vt=[],Ht=[],Dt=0,er=kt[Ut];Dt<er.length;Dt+=1){var St=er[Dt],ar=St.x,Dr=St.y,Gr=he[0]*ar+he[4]*Dr+he[12],Hr=he[1]*ar+he[5]*Dr+he[13],Br=he[2]*ar+he[6]*Dr+he[14],$r=he[3]*ar+he[7]*Dr+he[15],wn=Br+Ge,En=$r+Qe,ri=Gr+_t,Mn=Hr+ot,ni=Br+Et,en=$r+st,zn=new ze((Gr+Se)/En,(Hr+De)/En);zn.z=wn/En,vt.push(zn);var Kt=new ze(ri/en,Mn/en);Kt.z=ni/en,Ht.push(Kt)}ye.push(vt),we.push(Ht)}return[ye,we]}(d,O,M,A);return function($,ie,Q){var he=1/0;co(Q,ie)&&(he=av(Q,ie[0]));for(var ye=0;ye<ie.length;ye++)for(var we=ie[ye],Se=$[ye],De=0;De<we.length-1;De++){var Ge=we[De],Qe=[Ge,we[De+1],Se[De+1],Se[De],Ge];sa(Q,Qe)&&(he=Math.min(he,av(Q,Qe)))}return he!==1/0&&he}(G[0],G[1],F)},r}(wo);function np(e,r){return e.x*r.x+e.y*r.y}function av(e,r){if(e.length===1){for(var i,u=0,h=r[u++];!i||h.equals(i);)if(!(i=r[u++]))return 1/0;for(;u<r.length;u++){var d=r[u],v=e[0],w=i.sub(h),T=d.sub(h),A=v.sub(h),P=np(w,w),M=np(w,T),O=np(T,T),F=np(A,w),G=np(A,T),$=P*O-M*M,ie=(O*F-M*G)/$,Q=(P*G-M*F)/$,he=h.z*(1-ie-Q)+i.z*ie+d.z*Q;if(isFinite(he))return he}return 1/0}for(var ye=1/0,we=0,Se=r;we<Se.length;we+=1)ye=Math.min(ye,Se[we].z);return ye}var Gw=In([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,$w=In([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ww=Iu.VectorTileFeature.types,Kw=Math.cos(Math.PI/180*37.5),sv=Math.pow(2,14)/.5,pi=function(e){var r=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){r.gradients[i.id]={}}),this.layoutVertexArray=new bi,this.layoutVertexArray2=new ms,this.indexArray=new ia,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};pi.prototype.populate=function(e,r,i){this.hasPattern=xm("line",this.layers,r);for(var u=this.layers[0].layout.get("line-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var w=v[d],T=w.feature,A=w.id,P=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Qr(T,O);if(this.layers[0]._featureFilter.filter(new $t(this.zoom),F,i)){var G=u?u.evaluate(F,{},i):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:P,geometry:O?F.geometry:qr(T),patterns:{},sortKey:G};h.push($)}}u&&h.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=bm("line",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},pi.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},pi.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},pi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pi.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,$w)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},pi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pi.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},pi.prototype.addFeature=function(e,r,i,u,h){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),w=d.get("line-cap"),T=d.get("line-miter-limit"),A=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var P=0,M=r;P<M.length;P+=1)this.addLine(M[P],e,v,w,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},pi.prototype.addLine=function(e,r,i,u,h,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=Ww[r.type]==="Polygon",T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var A=0;A<T-1&&e[A].equals(e[A+1]);)A++;if(!(T<(w?3:2))){i==="bevel"&&(h=1.05);var P,M=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),F=void 0,G=void 0,$=void 0,ie=void 0;this.e1=this.e2=-1,w&&(ie=e[A].sub(P=e[T-2])._unit()._perp());for(var Q=A;Q<T;Q++)if(!(G=Q===T-1?w?e[A+1]:void 0:e[Q+1])||!e[Q].equals(G)){ie&&($=ie),P&&(F=P),P=e[Q],ie=G?G.sub(P)._unit()._perp():$;var he=($=$||ie).add(ie);he.x===0&&he.y===0||he._unit();var ye=$.x*ie.x+$.y*ie.y,we=he.x*ie.x+he.y*ie.y,Se=we!==0?1/we:1/0,De=2*Math.sqrt(2-2*we),Ge=we<Kw&&F&&G,Qe=$.x*ie.y-$.y*ie.x>0;if(Ge&&Q>A){var _t=P.dist(F);if(_t>2*M){var ot=P.sub(P.sub(F)._mult(M/_t)._round());this.updateDistance(F,ot),this.addCurrentVertex(ot,$,0,0,O),F=ot}}var Et=F&&G,st=Et?i:w?"butt":u;if(Et&&st==="round"&&(Se<d?st="miter":Se<=2&&(st="fakeround")),st==="miter"&&Se>h&&(st="bevel"),st==="bevel"&&(Se>2&&(st="flipbevel"),Se<h&&(st="miter")),F&&this.updateDistance(F,P),st==="miter")he._mult(Se),this.addCurrentVertex(P,he,0,0,O);else if(st==="flipbevel"){if(Se>100)he=ie.mult(-1);else{var Ut=Se*$.add(ie).mag()/$.sub(ie).mag();he._perp()._mult(Ut*(Qe?-1:1))}this.addCurrentVertex(P,he,0,0,O),this.addCurrentVertex(P,he.mult(-1),0,0,O)}else if(st==="bevel"||st==="fakeround"){var kt=-Math.sqrt(Se*Se-1),vt=Qe?kt:0,Ht=Qe?0:kt;if(F&&this.addCurrentVertex(P,$,vt,Ht,O),st==="fakeround")for(var Dt=Math.round(180*De/Math.PI/20),er=1;er<Dt;er++){var St=er/Dt;if(St!==.5){var ar=St-.5;St+=St*ar*(St-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*ar*ar+(.848013+ye*(.215638*ye-1.06021)))}var Dr=ie.sub($)._mult(St)._add($)._unit()._mult(Qe?-1:1);this.addHalfVertex(P,Dr.x,Dr.y,!1,Qe,0,O)}G&&this.addCurrentVertex(P,ie,-vt,-Ht,O)}else if(st==="butt")this.addCurrentVertex(P,he,0,0,O);else if(st==="square"){var Gr=F?1:-1;this.addCurrentVertex(P,he,Gr,Gr,O)}else st==="round"&&(F&&(this.addCurrentVertex(P,$,0,0,O),this.addCurrentVertex(P,$,1,1,O,!0)),G&&(this.addCurrentVertex(P,ie,-1,-1,O,!0),this.addCurrentVertex(P,ie,0,0,O)));if(Ge&&Q<T-1){var Hr=P.dist(G);if(Hr>2*M){var Br=P.add(G.sub(P)._mult(M/Hr)._round());this.updateDistance(P,Br),this.addCurrentVertex(Br,ie,0,0,O),P=Br}}}}},pi.prototype.addCurrentVertex=function(e,r,i,u,h,d){d===void 0&&(d=!1);var v=r.y*u-r.x,w=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,d,!1,i,h),this.addHalfVertex(e,v,w,d,!0,-u,h),this.distance>sv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,r,i,u,h,d))},pi.prototype.addHalfVertex=function(e,r,i,u,h,d,v){var w=.5*(this.lineClips?this.scaledDistance*(sv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(h?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),v.primitiveLength++),h?this.e2=T:this.e1=T},pi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},pi.prototype.updateDistance=function(e,r){this.distance+=e.dist(r),this.updateScaledDistance()},ft("LineBucket",pi,{omit:["layers","patternFeatures"]});var Xw=new Fn({"line-cap":new bt(V.layout_line["line-cap"]),"line-join":new yt(V.layout_line["line-join"]),"line-miter-limit":new bt(V.layout_line["line-miter-limit"]),"line-round-limit":new bt(V.layout_line["line-round-limit"]),"line-sort-key":new yt(V.layout_line["line-sort-key"])}),lv={paint:new Fn({"line-opacity":new yt(V.paint_line["line-opacity"]),"line-color":new yt(V.paint_line["line-color"]),"line-translate":new bt(V.paint_line["line-translate"]),"line-translate-anchor":new bt(V.paint_line["line-translate-anchor"]),"line-width":new yt(V.paint_line["line-width"]),"line-gap-width":new yt(V.paint_line["line-gap-width"]),"line-offset":new yt(V.paint_line["line-offset"]),"line-blur":new yt(V.paint_line["line-blur"]),"line-dasharray":new Qn(V.paint_line["line-dasharray"]),"line-pattern":new _u(V.paint_line["line-pattern"]),"line-gradient":new uo(V.paint_line["line-gradient"])}),layout:Xw},uv=new(function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u){return u=new $t(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},r.prototype.evaluate=function(i,u,h,d){return u=Ot({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,h,d)},r}(yt))(lv.paint.properties["line-width"].specification);uv.useIntegerZoom=!0;var Jw=function(e){function r(i){e.call(this,i,lv),this.gradientVersion=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof gi,this.gradientVersion=(this.gradientVersion+1)%mt)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=uv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},r.prototype.createBucket=function(i){return new pi(i)},r.prototype.queryRadius=function(i){var u=i,h=cv(To("line-width",this,u),To("line-gap-width",this,u)),d=To("line-offset",this,u);return h/2+Math.abs(d)+bn(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T){var A=Uo(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),P=T/2*cv(this.paint.get("line-width").evaluate(u,h),this.paint.get("line-gap-width").evaluate(u,h)),M=this.paint.get("line-offset").evaluate(u,h);return M&&(d=function(O,F){for(var G=[],$=new ze(0,0),ie=0;ie<O.length;ie++){for(var Q=O[ie],he=[],ye=0;ye<Q.length;ye++){var we=Q[ye],Se=Q[ye+1],De=ye===0?$:we.sub(Q[ye-1])._unit()._perp(),Ge=ye===Q.length-1?$:Se.sub(we)._unit()._perp(),Qe=De._add(Ge)._unit();Qe._mult(1/(Qe.x*Ge.x+Qe.y*Ge.y)),he.push(Qe._mult(F)._add(we))}G.push(he)}return G}(d,M*T)),function(O,F,G){for(var $=0;$<F.length;$++){var ie=F[$];if(O.length>=3){for(var Q=0;Q<ie.length;Q++)if(So(O,ie[Q]))return!0}if(Zi(O,ie,G))return!0}return!1}(A,d,P)},r.prototype.isTileClipped=function(){return!0},r}(wo);function cv(e,r){return r>0?r+2*e:e}var Yw=In([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qw=In([{name:"a_projected_pos",components:3,type:"Float32"}],4),e2=(In([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),In([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pv=(In([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),In([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),t2=In([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function r2(e,r,i){return e.sections.forEach(function(u){u.text=function(h,d,v){var w=d.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?h=h.toLocaleUpperCase():w==="lowercase"&&(h=h.toLocaleLowerCase()),Li.applyArabicShaping&&(h=Li.applyArabicShaping(h)),h}(u.text,r,i)}),e}In([{name:"triangle",components:3,type:"Uint16"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),In([{type:"Float32",name:"offsetX"}]),In([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ip={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},hv=function(e,r,i,u,h){var d,v,w=8*h-u-1,T=(1<<w)-1,A=T>>1,P=-7,M=i?h-1:0,O=i?-1:1,F=e[r+M];for(M+=O,d=F&(1<<-P)-1,F>>=-P,P+=w;P>0;d=256*d+e[r+M],M+=O,P-=8);for(v=d&(1<<-P)-1,d>>=-P,P+=u;P>0;v=256*v+e[r+M],M+=O,P-=8);if(d===0)d=1-A;else{if(d===T)return v?NaN:1/0*(F?-1:1);v+=Math.pow(2,u),d-=A}return(F?-1:1)*v*Math.pow(2,d-u)},fv=function(e,r,i,u,h,d){var v,w,T,A=8*d-h-1,P=(1<<A)-1,M=P>>1,O=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=u?0:d-1,G=u?1:-1,$=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,v=P):(v=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-v))<1&&(v--,T*=2),(r+=v+M>=1?O/T:O*Math.pow(2,1-M))*T>=2&&(v++,T/=2),v+M>=P?(w=0,v=P):v+M>=1?(w=(r*T-1)*Math.pow(2,h),v+=M):(w=r*Math.pow(2,M-1)*Math.pow(2,h),v=0));h>=8;e[i+F]=255&w,F+=G,w/=256,h-=8);for(v=v<<h|w,A+=h;A>0;e[i+F]=255&v,F+=G,v/=256,A-=8);e[i+F-G]|=128*$},Kh=kr;function kr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}kr.Varint=0,kr.Fixed64=1,kr.Bytes=2,kr.Fixed32=5;var dv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ja(e){return e.type===kr.Bytes?e.readVarint()+e.pos:e.pos+1}function ku(e,r,i){return i?4294967296*r+(e>>>0):4294967296*(r>>>0)+(e>>>0)}function mv(e,r,i){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(u);for(var h=i.pos-1;h>=e;h--)i.buf[h+u]=i.buf[h]}function n2(e,r){for(var i=0;i<e.length;i++)r.writeVarint(e[i])}function i2(e,r){for(var i=0;i<e.length;i++)r.writeSVarint(e[i])}function o2(e,r){for(var i=0;i<e.length;i++)r.writeFloat(e[i])}function a2(e,r){for(var i=0;i<e.length;i++)r.writeDouble(e[i])}function s2(e,r){for(var i=0;i<e.length;i++)r.writeBoolean(e[i])}function l2(e,r){for(var i=0;i<e.length;i++)r.writeFixed32(e[i])}function u2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed32(e[i])}function c2(e,r){for(var i=0;i<e.length;i++)r.writeFixed64(e[i])}function p2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed64(e[i])}function Xh(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+16777216*e[r+3]}function Pu(e,r,i){e[i]=r,e[i+1]=r>>>8,e[i+2]=r>>>16,e[i+3]=r>>>24}function gv(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function h2(e,r,i){e===1&&i.readMessage(f2,r)}function f2(e,r,i){if(e===3){var u=i.readMessage(d2,{}),h=u.width,d=u.height,v=u.left,w=u.top,T=u.advance;r.push({id:u.id,bitmap:new wl({width:h+6,height:d+6},u.bitmap),metrics:{width:h,height:d,left:v,top:w,advance:T}})}}function d2(e,r,i){e===1?r.id=i.readVarint():e===2?r.bitmap=i.readBytes():e===3?r.width=i.readVarint():e===4?r.height=i.readVarint():e===5?r.left=i.readSVarint():e===6?r.top=i.readSVarint():e===7&&(r.advance=i.readVarint())}function yv(e){for(var r=0,i=0,u=0,h=e;u<h.length;u+=1){var d=h[u];r+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function($,ie){return ie.h-$.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),i),h:1/0}],w=0,T=0,A=0,P=e;A<P.length;A+=1)for(var M=P[A],O=v.length-1;O>=0;O--){var F=v[O];if(!(M.w>F.w||M.h>F.h)){if(M.x=F.x,M.y=F.y,T=Math.max(T,M.y+M.h),w=Math.max(w,M.x+M.w),M.w===F.w&&M.h===F.h){var G=v.pop();O<v.length&&(v[O]=G)}else M.h===F.h?(F.x+=M.w,F.w-=M.w):M.w===F.w?(F.y+=M.h,F.h-=M.h):(v.push({x:F.x+M.w,y:F.y,w:F.w-M.w,h:M.h}),F.y+=M.h,F.h-=M.h);break}}return{w,h:T,fill:r/(w*T)||0}}kr.prototype={destroy:function(){this.buf=null},readFields:function(e,r,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),h=u>>3,d=this.pos;this.type=7&u,e(h,r,this),this.pos===d&&this.skip(u)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=Xh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=gv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Xh(this.buf,this.pos)+4294967296*Xh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Xh(this.buf,this.pos)+4294967296*gv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=hv(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=hv(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r,i,u=this.buf;return r=127&(i=u[this.pos++]),i<128?r:(r|=(127&(i=u[this.pos++]))<<7,i<128?r:(r|=(127&(i=u[this.pos++]))<<14,i<128?r:(r|=(127&(i=u[this.pos++]))<<21,i<128?r:function(h,d,v){var w,T,A=v.buf;if(w=(112&(T=A[v.pos++]))>>4,T<128||(w|=(127&(T=A[v.pos++]))<<3,T<128)||(w|=(127&(T=A[v.pos++]))<<10,T<128)||(w|=(127&(T=A[v.pos++]))<<17,T<128)||(w|=(127&(T=A[v.pos++]))<<24,T<128)||(w|=(1&(T=A[v.pos++]))<<31,T<128))return ku(h,w,d);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&dv?function(i,u,h){return dv.decode(i.subarray(u,h))}(this.buf,r,e):function(i,u,h){for(var d="",v=u;v<h;){var w,T,A,P=i[v],M=null,O=P>239?4:P>223?3:P>191?2:1;if(v+O>h)break;O===1?P<128&&(M=P):O===2?(192&(w=i[v+1]))==128&&(M=(31&P)<<6|63&w)<=127&&(M=null):O===3?(T=i[v+2],(192&(w=i[v+1]))==128&&(192&T)==128&&((M=(15&P)<<12|(63&w)<<6|63&T)<=2047||M>=55296&&M<=57343)&&(M=null)):O===4&&(T=i[v+2],A=i[v+3],(192&(w=i[v+1]))==128&&(192&T)==128&&(192&A)==128&&((M=(15&P)<<18|(63&w)<<12|(63&T)<<6|63&A)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,O=1):M>65535&&(M-=65536,d+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),d+=String.fromCharCode(M),v+=O}return d}(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==kr.Bytes)return e.push(this.readVarint(r));var i=ja(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==kr.Bytes)return e.push(this.readSVarint());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==kr.Bytes)return e.push(this.readBoolean());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==kr.Bytes)return e.push(this.readFloat());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==kr.Bytes)return e.push(this.readDouble());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==kr.Bytes)return e.push(this.readFixed32());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==kr.Bytes)return e.push(this.readSFixed32());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==kr.Bytes)return e.push(this.readFixed64());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==kr.Bytes)return e.push(this.readSFixed64());var r=ja(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===kr.Varint)for(;this.buf[this.pos++]>127;);else if(r===kr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===kr.Fixed32)this.pos+=4;else{if(r!==kr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Pu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Pu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Pu(this.buf,-1&e,this.pos),Pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Pu(this.buf,-1&e,this.pos),Pu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(r,i){var u,h;if(r>=0?(u=r%4294967296|0,h=r/4294967296|0):(h=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,h=h+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,w){w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,w.buf[w.pos]=127&(d>>>=7)}(u,0,i),function(d,v){var w=(7&d)<<4;v.buf[v.pos++]|=w|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(h,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var r=this.pos;this.pos=function(u,h,d){for(var v,w,T=0;T<h.length;T++){if((v=h.charCodeAt(T))>55295&&v<57344){if(!w){v>56319||T+1===h.length?(u[d++]=239,u[d++]=191,u[d++]=189):w=v;continue}if(v<56320){u[d++]=239,u[d++]=191,u[d++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(u[d++]=239,u[d++]=191,u[d++]=189,w=null);v<128?u[d++]=v:(v<2048?u[d++]=v>>6|192:(v<65536?u[d++]=v>>12|224:(u[d++]=v>>18|240,u[d++]=v>>12&63|128),u[d++]=v>>6&63|128),u[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-r;i>=128&&mv(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),fv(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),fv(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,r){this.pos++;var i=this.pos;e(r,this);var u=this.pos-i;u>=128&&mv(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,r,i){this.writeTag(e,kr.Bytes),this.writeRawMessage(r,i)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,n2,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,i2,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,s2,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,o2,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,a2,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,l2,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,u2,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,c2,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,p2,r)},writeBytesField:function(e,r){this.writeTag(e,kr.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,kr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,kr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,kr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,kr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,kr.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,kr.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,kr.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,kr.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,kr.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,!!r)}};var Jh=function(e,r){var i=r.pixelRatio,u=r.version,h=r.stretchX,d=r.stretchY,v=r.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=d,this.content=v,this.version=u},op={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};op.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},op.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},op.tlbr.get=function(){return this.tl.concat(this.br)},op.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Jh.prototype,op);var ap=function(e,r){var i={},u={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,i,h),this.addImages(r,u,h);var d=yv(h),v=new Ei({width:d.w||1,height:d.h||1});for(var w in e){var T=e[w],A=i[w].paddedRect;Ei.copy(T.data,v,{x:0,y:0},{x:A.x+1,y:A.y+1},T.data)}for(var P in r){var M=r[P],O=u[P].paddedRect,F=O.x+1,G=O.y+1,$=M.data.width,ie=M.data.height;Ei.copy(M.data,v,{x:0,y:0},{x:F,y:G},M.data),Ei.copy(M.data,v,{x:0,y:ie-1},{x:F,y:G-1},{width:$,height:1}),Ei.copy(M.data,v,{x:0,y:0},{x:F,y:G+ie},{width:$,height:1}),Ei.copy(M.data,v,{x:$-1,y:0},{x:F-1,y:G},{width:1,height:ie}),Ei.copy(M.data,v,{x:0,y:0},{x:F+$,y:G},{width:1,height:ie})}this.image=v,this.iconPositions=i,this.patternPositions=u};ap.prototype.addImages=function(e,r,i){for(var u in e){var h=e[u],d={x:0,y:0,w:h.data.width+2,h:h.data.height+2};i.push(d),r[u]=new Jh(d,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},ap.prototype.patchUpdatedImages=function(e,r){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),r)},ap.prototype.patchUpdatedImage=function(e,r,i){if(e&&r&&e.version!==r.version){e.version=r.version;var u=e.tl;i.update(r.data,void 0,{x:u[0],y:u[1]})}},ft("ImagePosition",Jh),ft("ImageAtlas",ap);var Gi={horizontal:1,vertical:2,horizontalOnly:3},Mu=function(){this.scale=1,this.fontStack="",this.imageName=null};Mu.forText=function(e,r){var i=new Mu;return i.scale=e||1,i.fontStack=r,i},Mu.forImage=function(e){var r=new Mu;return r.imageName=e,r};var ti=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Yh(e,r,i,u,h,d,v,w,T,A,P,M,O,F,G,$){var ie,Q=ti.fromFeature(e,h);M===Gi.vertical&&Q.verticalizePunctuation();var he=Li.processBidirectionalText,ye=Li.processStyledBidirectionalText;if(he&&Q.sections.length===1){ie=[];for(var we=0,Se=he(Q.toString(),Em(Q,A,d,r,u,F,G));we<Se.length;we+=1){var De=Se[we],Ge=new ti;Ge.text=De,Ge.sections=Q.sections;for(var Qe=0;Qe<De.length;Qe++)Ge.sectionIndex.push(0);ie.push(Ge)}}else if(ye){ie=[];for(var _t=0,ot=ye(Q.text,Q.sectionIndex,Em(Q,A,d,r,u,F,G));_t<ot.length;_t+=1){var Et=ot[_t],st=new ti;st.text=Et[0],st.sectionIndex=Et[1],st.sections=Q.sections,ie.push(st)}}else ie=function(vt,Ht){for(var Dt=[],er=vt.text,St=0,ar=0,Dr=Ht;ar<Dr.length;ar+=1){var Gr=Dr[ar];Dt.push(vt.substring(St,Gr)),St=Gr}return St<er.length&&Dt.push(vt.substring(St,er.length)),Dt}(Q,Em(Q,A,d,r,u,F,G));var Ut=[],kt={positionedLines:Ut,text:Q.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(vt,Ht,Dt,er,St,ar,Dr,Gr,Hr,Br,$r,wn){for(var En=0,ri=-17,Mn=0,ni=0,en=Gr==="right"?1:Gr==="left"?0:.5,zn=0,Kt=0,Sr=St;Kt<Sr.length;Kt+=1){var gr=Sr[Kt];gr.trim();var or=gr.getMaxScale(),hi=24*(or-1),Hn={positionedGlyphs:[],lineOffset:0};vt.positionedLines[zn]=Hn;var Pr=Hn.positionedGlyphs,sn=0;if(gr.length()){for(var Zn=0;Zn<gr.length();Zn++){var sr=gr.getSection(Zn),ca=gr.getSectionIndex(Zn),$i=gr.getCharCode(Zn),pa=0,tn=null,ha=null,Co=null,Nu=24,Cl=!(Hr===Gi.horizontal||!$r&&!gu($i)||$r&&(Qh[$i]||(Ga=$i,rt.Arabic(Ga)||rt["Arabic Supplement"](Ga)||rt["Arabic Extended-A"](Ga)||rt["Arabic Presentation Forms-A"](Ga)||rt["Arabic Presentation Forms-B"](Ga))));if(sr.imageName){var Uu=er[sr.imageName];if(!Uu)continue;Co=sr.imageName,vt.iconsInText=vt.iconsInText||!0,ha=Uu.paddedRect;var Za=Uu.displaySize;sr.scale=24*sr.scale/wn,pa=hi+(24-Za[1]*sr.scale),Nu=(tn={width:Za[0],height:Za[1],left:1,top:-3,advance:Cl?Za[1]:Za[0]}).advance;var Vu=Cl?Za[0]*sr.scale-24*or:Za[1]*sr.scale-24*or;Vu>0&&Vu>sn&&(sn=Vu)}else{var uf=Dt[sr.fontStack],ju=uf&&uf[$i];if(ju&&ju.rect)ha=ju.rect,tn=ju.metrics;else{var up=Ht[sr.fontStack],cf=up&&up[$i];if(!cf)continue;tn=cf.metrics}pa=24*(or-sr.scale)}Cl?(vt.verticalizable=!0,Pr.push({glyph:$i,imageName:Co,x:En,y:ri+pa,vertical:Cl,scale:sr.scale,fontStack:sr.fontStack,sectionIndex:ca,metrics:tn,rect:ha}),En+=Nu*sr.scale+Br):(Pr.push({glyph:$i,imageName:Co,x:En,y:ri+pa,vertical:Cl,scale:sr.scale,fontStack:sr.fontStack,sectionIndex:ca,metrics:tn,rect:ha}),En+=tn.advance*sr.scale+Br)}Pr.length!==0&&(Mn=Math.max(En-Br,Mn),g2(Pr,0,Pr.length-1,en,sn)),En=0;var pf=ar*or+sn;Hn.lineOffset=Math.max(sn,hi),ri+=pf,ni=Math.max(pf,ni),++zn}else ri+=ar,++zn}var Ga,cp=ri- -17,qu=Sm(Dr),Es=qu.horizontalAlign,Hu=qu.verticalAlign;(function(hf,ff,pp,hp,df,fp,dp,mp,mf){var Zu,gf=(ff-pp)*df;Zu=fp!==dp?-mp*hp- -17:(-hp*mf+.5)*dp;for(var Gu=0,gp=hf;Gu<gp.length;Gu+=1)for(var Al=0,yp=gp[Gu].positionedGlyphs;Al<yp.length;Al+=1){var $u=yp[Al];$u.x+=gf,$u.y+=Zu}})(vt.positionedLines,en,Es,Hu,Mn,ni,ar,cp,St.length),vt.top+=-Hu*cp,vt.bottom=vt.top+cp,vt.left+=-Es*Mn,vt.right=vt.left+Mn}(kt,r,i,u,ie,v,w,T,M,A,O,$),!function(vt){for(var Ht=0,Dt=vt;Ht<Dt.length;Ht+=1)if(Dt[Ht].positionedGlyphs.length!==0)return!1;return!0}(Ut)&&kt}ti.fromFeature=function(e,r){for(var i=new ti,u=0;u<e.sections.length;u++){var h=e.sections[u];h.image?i.addImageSection(h):i.addTextSection(h,r)}return i},ti.prototype.length=function(){return this.text.length},ti.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ti.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},ti.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ti.prototype.verticalizePunctuation=function(){this.text=function(e){for(var r="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,h=e.charCodeAt(i-1)||null;r+=u&&qc(u)&&!ip[e[i+1]]||h&&qc(h)&&!ip[e[i-1]]||!ip[e[i]]?e[i]:ip[e[i]]}return r}(this.text)},ti.prototype.trim=function(){for(var e=0,r=0;r<this.text.length&&Qh[this.text.charCodeAt(r)];r++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Qh[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},ti.prototype.substring=function(e,r){var i=new ti;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i},ti.prototype.toString=function(){return this.text},ti.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(r,i){return Math.max(r,e.sections[i].scale)},0)},ti.prototype.addTextSection=function(e,r){this.text+=e.text,this.sections.push(Mu.forText(e.scale,e.fontStack||r));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},ti.prototype.addImageSection=function(e){var r=e.image?e.image.name:"";if(r.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Mu.forImage(r)),this.sectionIndex.push(this.sections.length-1)):mr("Reached maximum number of images 6401")}else mr("Can't add FormattedSection with an empty image.")},ti.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Oi={};function vv(e,r,i,u,h,d){if(r.imageName){var v=u[r.imageName];return v?v.displaySize[0]*r.scale*24/d+h:0}var w=i[r.fontStack],T=w&&w[e];return T?T.metrics.advance*r.scale+h:0}function _v(e,r,i,u){var h=Math.pow(e-r,2);return u?e<r?h/2:2*h:h+Math.abs(i)*i}function m2(e,r,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function xv(e,r,i,u,h,d){for(var v=null,w=_v(r,i,h,d),T=0,A=u;T<A.length;T+=1){var P=A[T],M=_v(r-P.x,i,h,d)+P.badness;M<=w&&(v=P,w=M)}return{index:e,x:r,priorBreak:v,badness:w}}function Em(e,r,i,u,h,d,v){if(d!=="point")return[];if(!e)return[];for(var w,T=[],A=function(ie,Q,he,ye,we,Se){for(var De=0,Ge=0;Ge<ie.length();Ge++){var Qe=ie.getSection(Ge);De+=vv(ie.getCharCode(Ge),Qe,ye,we,Q,Se)}return De/Math.max(1,Math.ceil(De/he))}(e,r,i,u,h,v),P=e.text.indexOf("")>=0,M=0,O=0;O<e.length();O++){var F=e.getSection(O),G=e.getCharCode(O);if(Qh[G]||(M+=vv(G,F,u,h,r,v)),O<e.length()-1){var $=!((w=G)<11904||!(rt["Bopomofo Extended"](w)||rt.Bopomofo(w)||rt["CJK Compatibility Forms"](w)||rt["CJK Compatibility Ideographs"](w)||rt["CJK Compatibility"](w)||rt["CJK Radicals Supplement"](w)||rt["CJK Strokes"](w)||rt["CJK Symbols and Punctuation"](w)||rt["CJK Unified Ideographs Extension A"](w)||rt["CJK Unified Ideographs"](w)||rt["Enclosed CJK Letters and Months"](w)||rt["Halfwidth and Fullwidth Forms"](w)||rt.Hiragana(w)||rt["Ideographic Description Characters"](w)||rt["Kangxi Radicals"](w)||rt["Katakana Phonetic Extensions"](w)||rt.Katakana(w)||rt["Vertical Forms"](w)||rt["Yi Radicals"](w)||rt["Yi Syllables"](w)));(Oi[G]||$||F.imageName)&&T.push(xv(O+1,M,A,T,m2(G,e.getCharCode(O+1),$&&P),!1))}}return function ie(Q){return Q?ie(Q.priorBreak).concat(Q.index):[]}(xv(e.length(),M,A,T,0,!0))}function Sm(e){var r=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:r,verticalAlign:i}}function g2(e,r,i,u,h){if(u||h)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*u,w=r;w<=i;w++)e[w].x-=v,e[w].y+=h}function bv(e,r,i,u,h,d){var v,w=e.image;if(w.content){var T=w.content,A=w.pixelRatio||1;v=[T[0]/A,T[1]/A,w.displaySize[0]-T[2]/A,w.displaySize[1]-T[3]/A]}var P,M,O,F,G=r.left*d,$=r.right*d;i==="width"||i==="both"?(F=h[0]+G-u[3],M=h[0]+$+u[1]):M=(F=h[0]+(G+$-w.displaySize[0])/2)+w.displaySize[0];var ie=r.top*d,Q=r.bottom*d;return i==="height"||i==="both"?(P=h[1]+ie-u[0],O=h[1]+Q+u[2]):O=(P=h[1]+(ie+Q-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:P,right:M,bottom:O,left:F,collisionPadding:v}}Oi[10]=!0,Oi[32]=!0,Oi[38]=!0,Oi[40]=!0,Oi[41]=!0,Oi[43]=!0,Oi[45]=!0,Oi[47]=!0,Oi[173]=!0,Oi[183]=!0,Oi[8203]=!0,Oi[8208]=!0,Oi[8211]=!0,Oi[8231]=!0;var zu=function(e){function r(i,u,h,d){e.call(this,i,u),this.angle=h,d!==void 0&&(this.segment=d)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(ze);function Tm(e,r){var i=r.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new $t(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,h=i.interpolationType,d=0;d<u.length&&u[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<u.length&&u[v]<e+1;)v++;v=Math.min(u.length-1,v);var w=u[d],T=u[v];return i.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:T,minSize:i.evaluate(new $t(w)),maxSize:i.evaluate(new $t(T)),interpolationType:h}}function wv(e,r,i){var u=r.uSize,h=i.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?on(h/128,i.upperSize/128,r.uSizeT):u}function Ev(e,r){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,d=h?Rt(Dn.interpolationFactor(h,r,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=on(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:u}}ft("Anchor",zu);var y2=Object.freeze({__proto__:null,getSizeData:Tm,evaluateSizeForFeature:wv,evaluateSizeForZoom:Ev,SIZE_PACK_FACTOR:128});function Sv(e,r,i,u,h){if(r.segment===void 0)return!0;for(var d=r,v=r.segment+1,w=0;w>-i/2;){if(--v<0)return!1;w-=e[v].dist(d),d=e[v]}w+=e[v].dist(e[v+1]),v++;for(var T=[],A=0;w<i/2;){var P=e[v],M=e[v+1];if(!M)return!1;var O=e[v-1].angleTo(P)-P.angleTo(M);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:O}),A+=O;w-T[0].distance>u;)A-=T.shift().angleDelta;if(A>h)return!1;v++,w+=P.dist(M)}return!0}function Tv(e){for(var r=0,i=0;i<e.length-1;i++)r+=e[i].dist(e[i+1]);return r}function Cv(e,r,i){return e?.6*r*i:0}function Av(e,r){return Math.max(e?e.right-e.left:0,r?r.right-r.left:0)}function v2(e,r,i,u,h,d){for(var v=Cv(i,h,d),w=Av(i,u)*d,T=0,A=Tv(e)/2,P=0;P<e.length-1;P++){var M=e[P],O=e[P+1],F=M.dist(O);if(T+F>A){var G=(A-T)/F,$=on(M.x,O.x,G),ie=on(M.y,O.y,G),Q=new zu($,ie,O.angleTo(M),P);return Q._round(),!v||Sv(e,Q,w,v,r)?Q:void 0}T+=F}}function _2(e,r,i,u,h,d,v,w,T){var A=Cv(u,d,v),P=Av(u,h),M=P*v,O=e[0].x===0||e[0].x===T||e[0].y===0||e[0].y===T;return r-M<r/4&&(r=M+r/4),function F(G,$,ie,Q,he,ye,we,Se,De){for(var Ge=ye/2,Qe=Tv(G),_t=0,ot=$-ie,Et=[],st=0;st<G.length-1;st++){for(var Ut=G[st],kt=G[st+1],vt=Ut.dist(kt),Ht=kt.angleTo(Ut);ot+ie<_t+vt;){var Dt=((ot+=ie)-_t)/vt,er=on(Ut.x,kt.x,Dt),St=on(Ut.y,kt.y,Dt);if(er>=0&&er<De&&St>=0&&St<De&&ot-Ge>=0&&ot+Ge<=Qe){var ar=new zu(er,St,Ht,st);ar._round(),Q&&!Sv(G,ar,ye,Q,he)||Et.push(ar)}}_t+=vt}return Se||Et.length||we||(Et=F(G,_t/2,ie,Q,he,ye,we,!0,De)),Et}(e,O?r/2*w%r:(P/2+2*d)*v*w%r,r,A,i,M,O,!1,T)}function Iv(e,r,i,u,h){for(var d=[],v=0;v<e.length;v++)for(var w=e[v],T=void 0,A=0;A<w.length-1;A++){var P=w[A],M=w[A+1];P.x<r&&M.x<r||(P.x<r?P=new ze(r,P.y+(r-P.x)/(M.x-P.x)*(M.y-P.y))._round():M.x<r&&(M=new ze(r,P.y+(r-P.x)/(M.x-P.x)*(M.y-P.y))._round()),P.y<i&&M.y<i||(P.y<i?P=new ze(P.x+(i-P.y)/(M.y-P.y)*(M.x-P.x),i)._round():M.y<i&&(M=new ze(P.x+(i-P.y)/(M.y-P.y)*(M.x-P.x),i)._round()),P.x>=u&&M.x>=u||(P.x>=u?P=new ze(u,P.y+(u-P.x)/(M.x-P.x)*(M.y-P.y))._round():M.x>=u&&(M=new ze(u,P.y+(u-P.x)/(M.x-P.x)*(M.y-P.y))._round()),P.y>=h&&M.y>=h||(P.y>=h?P=new ze(P.x+(h-P.y)/(M.y-P.y)*(M.x-P.x),h)._round():M.y>=h&&(M=new ze(P.x+(h-P.y)/(M.y-P.y)*(M.x-P.x),h)._round()),T&&P.equals(T[T.length-1])||d.push(T=[P]),T.push(M)))))}return d}function kv(e,r,i,u){var h=[],d=e.image,v=d.pixelRatio,w=d.paddedRect.w-2,T=d.paddedRect.h-2,A=e.right-e.left,P=e.bottom-e.top,M=d.stretchX||[[0,w]],O=d.stretchY||[[0,T]],F=function(er,St){return er+St[1]-St[0]},G=M.reduce(F,0),$=O.reduce(F,0),ie=w-G,Q=T-$,he=0,ye=G,we=0,Se=$,De=0,Ge=ie,Qe=0,_t=Q;if(d.content&&u){var ot=d.content;he=ef(M,0,ot[0]),we=ef(O,0,ot[1]),ye=ef(M,ot[0],ot[2]),Se=ef(O,ot[1],ot[3]),De=ot[0]-he,Qe=ot[1]-we,Ge=ot[2]-ot[0]-ye,_t=ot[3]-ot[1]-Se}var Et=function(er,St,ar,Dr){var Gr=tf(er.stretch-he,ye,A,e.left),Hr=rf(er.fixed-De,Ge,er.stretch,G),Br=tf(St.stretch-we,Se,P,e.top),$r=rf(St.fixed-Qe,_t,St.stretch,$),wn=tf(ar.stretch-he,ye,A,e.left),En=rf(ar.fixed-De,Ge,ar.stretch,G),ri=tf(Dr.stretch-we,Se,P,e.top),Mn=rf(Dr.fixed-Qe,_t,Dr.stretch,$),ni=new ze(Gr,Br),en=new ze(wn,Br),zn=new ze(wn,ri),Kt=new ze(Gr,ri),Sr=new ze(Hr/v,$r/v),gr=new ze(En/v,Mn/v),or=r*Math.PI/180;if(or){var hi=Math.sin(or),Hn=Math.cos(or),Pr=[Hn,-hi,hi,Hn];ni._matMult(Pr),en._matMult(Pr),Kt._matMult(Pr),zn._matMult(Pr)}var sn=er.stretch+er.fixed,Zn=St.stretch+St.fixed;return{tl:ni,tr:en,bl:Kt,br:zn,tex:{x:d.paddedRect.x+1+sn,y:d.paddedRect.y+1+Zn,w:ar.stretch+ar.fixed-sn,h:Dr.stretch+Dr.fixed-Zn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Sr,pixelOffsetBR:gr,minFontScaleX:Ge/v/A,minFontScaleY:_t/v/P,isSDF:i}};if(u&&(d.stretchX||d.stretchY))for(var st=Pv(M,ie,G),Ut=Pv(O,Q,$),kt=0;kt<st.length-1;kt++)for(var vt=st[kt],Ht=st[kt+1],Dt=0;Dt<Ut.length-1;Dt++)h.push(Et(vt,Ut[Dt],Ht,Ut[Dt+1]));else h.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return h}function ef(e,r,i){for(var u=0,h=0,d=e;h<d.length;h+=1){var v=d[h];u+=Math.max(r,Math.min(i,v[1]))-Math.max(r,Math.min(i,v[0]))}return u}function Pv(e,r,i){for(var u=[{fixed:-1,stretch:0}],h=0,d=e;h<d.length;h+=1){var v=d[h],w=v[0],T=v[1],A=u[u.length-1];u.push({fixed:w-A.stretch,stretch:A.stretch}),u.push({fixed:w-A.stretch,stretch:A.stretch+(T-w)})}return u.push({fixed:r+1,stretch:i}),u}function tf(e,r,i,u){return e/r*i+u}function rf(e,r,i,u){return e-r*i/u}var nf=function(e,r,i,u,h,d,v,w,T,A){if(this.boxStartIndex=e.length,T){var P=d.top,M=d.bottom,O=d.collisionPadding;O&&(P-=O[1],M+=O[3]);var F=M-P;F>0&&(F=Math.max(10,F),this.circleDiameter=F)}else{var G=d.top*v-w,$=d.bottom*v+w,ie=d.left*v-w,Q=d.right*v+w,he=d.collisionPadding;if(he&&(ie-=he[0]*v,G-=he[1]*v,Q+=he[2]*v,$+=he[3]*v),A){var ye=new ze(ie,G),we=new ze(Q,G),Se=new ze(ie,$),De=new ze(Q,$),Ge=A*Math.PI/180;ye._rotate(Ge),we._rotate(Ge),Se._rotate(Ge),De._rotate(Ge),ie=Math.min(ye.x,we.x,Se.x,De.x),Q=Math.max(ye.x,we.x,Se.x,De.x),G=Math.min(ye.y,we.y,Se.y,De.y),$=Math.max(ye.y,we.y,Se.y,De.y)}e.emplaceBack(r.x,r.y,ie,G,Q,$,i,u,h)}this.boxEndIndex=e.length},Lu=function(e,r){if(e===void 0&&(e=[]),r===void 0&&(r=x2),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function x2(e,r){return e<r?-1:e>r?1:0}function b2(e,r,i){r===void 0&&(r=1),i===void 0&&(i=!1);for(var u=1/0,h=1/0,d=-1/0,v=-1/0,w=e[0],T=0;T<w.length;T++){var A=w[T];(!T||A.x<u)&&(u=A.x),(!T||A.y<h)&&(h=A.y),(!T||A.x>d)&&(d=A.x),(!T||A.y>v)&&(v=A.y)}var P=Math.min(d-u,v-h),M=P/2,O=new Lu([],w2);if(P===0)return new ze(u,h);for(var F=u;F<d;F+=P)for(var G=h;G<v;G+=P)O.push(new Ru(F+M,G+M,M,e));for(var $=function(he){for(var ye=0,we=0,Se=0,De=he[0],Ge=0,Qe=De.length,_t=Qe-1;Ge<Qe;_t=Ge++){var ot=De[Ge],Et=De[_t],st=ot.x*Et.y-Et.x*ot.y;we+=(ot.x+Et.x)*st,Se+=(ot.y+Et.y)*st,ye+=3*st}return new Ru(we/ye,Se/ye,0,he)}(e),ie=O.length;O.length;){var Q=O.pop();(Q.d>$.d||!$.d)&&($=Q,i&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,ie)),Q.max-$.d<=r||(O.push(new Ru(Q.p.x-(M=Q.h/2),Q.p.y-M,M,e)),O.push(new Ru(Q.p.x+M,Q.p.y-M,M,e)),O.push(new Ru(Q.p.x-M,Q.p.y+M,M,e)),O.push(new Ru(Q.p.x+M,Q.p.y+M,M,e)),ie+=4)}return i&&(console.log("num probes: "+ie),console.log("best distance: "+$.d)),$.p}function w2(e,r){return r.max-e.max}function Ru(e,r,i,u){this.p=new ze(e,r),this.h=i,this.d=function(h,d){for(var v=!1,w=1/0,T=0;T<d.length;T++)for(var A=d[T],P=0,M=A.length,O=M-1;P<M;O=P++){var F=A[P],G=A[O];F.y>h.y!=G.y>h.y&&h.x<(G.x-F.x)*(h.y-F.y)/(G.y-F.y)+F.x&&(v=!v),w=Math.min(w,_s(h,F,G))}return(v?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}Lu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Lu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}},Lu.prototype.peek=function(){return this.data[0]},Lu.prototype._up=function(e){for(var r=this.data,i=this.compare,u=r[e];e>0;){var h=e-1>>1,d=r[h];if(i(u,d)>=0)break;r[e]=d,e=h}r[e]=u},Lu.prototype._down=function(e){for(var r=this.data,i=this.compare,u=this.length>>1,h=r[e];e<u;){var d=1+(e<<1),v=r[d],w=d+1;if(w<this.length&&i(r[w],v)<0&&(d=w,v=r[w]),i(v,h)>=0)break;r[e]=v,e=d}r[e]=h};var Cm=Number.POSITIVE_INFINITY;function Mv(e,r){return r[1]!==Cm?function(i,u,h){var d=0,v=0;switch(u=Math.abs(u),h=Math.abs(h),i){case"top-right":case"top-left":case"top":v=h-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-h}switch(i){case"top-right":case"bottom-right":case"right":d=-u;break;case"top-left":case"bottom-left":case"left":d=u}return[d,v]}(e,r[0],r[1]):function(i,u){var h=0,d=0;u<0&&(u=0);var v=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-u;break;case"top":d=u-7}switch(i){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=u;break;case"right":h=-u}return[h,d]}(e,r[0])}function Am(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function zv(e,r,i,u,h,d,v,w,T,A,P,M,O,F,G){var $=function(we,Se,De,Ge,Qe,_t,ot,Et){for(var st=Ge.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Ut=[],kt=0,vt=Se.positionedLines;kt<vt.length;kt+=1)for(var Ht=vt[kt],Dt=0,er=Ht.positionedGlyphs;Dt<er.length;Dt+=1){var St=er[Dt];if(St.rect){var ar=St.rect||{},Dr=4,Gr=!0,Hr=1,Br=0,$r=(Qe||Et)&&St.vertical,wn=St.metrics.advance*St.scale/2;if(Et&&Se.verticalizable&&(Br=Ht.lineOffset/2-(St.imageName?-(24-St.metrics.width*St.scale)/2:24*(St.scale-1))),St.imageName){var En=ot[St.imageName];Gr=En.sdf,Dr=1/(Hr=En.pixelRatio)}var ri=Qe?[St.x+wn,St.y]:[0,0],Mn=Qe?[0,0]:[St.x+wn+De[0],St.y+De[1]-Br],ni=[0,0];$r&&(ni=Mn,Mn=[0,0]);var en=(St.metrics.left-Dr)*St.scale-wn+Mn[0],zn=(-St.metrics.top-Dr)*St.scale+Mn[1],Kt=en+ar.w*St.scale/Hr,Sr=zn+ar.h*St.scale/Hr,gr=new ze(en,zn),or=new ze(Kt,zn),hi=new ze(en,Sr),Hn=new ze(Kt,Sr);if($r){var Pr=new ze(-wn,wn- -17),sn=-Math.PI/2,Zn=12-wn,sr=new ze(22-Zn,-(St.imageName?Zn:0)),ca=new(Function.prototype.bind.apply(ze,[null].concat(ni)));gr._rotateAround(sn,Pr)._add(sr)._add(ca),or._rotateAround(sn,Pr)._add(sr)._add(ca),hi._rotateAround(sn,Pr)._add(sr)._add(ca),Hn._rotateAround(sn,Pr)._add(sr)._add(ca)}if(st){var $i=Math.sin(st),pa=Math.cos(st),tn=[pa,-$i,$i,pa];gr._matMult(tn),or._matMult(tn),hi._matMult(tn),Hn._matMult(tn)}var ha=new ze(0,0),Co=new ze(0,0);Ut.push({tl:gr,tr:or,bl:hi,br:Hn,tex:ar,writingMode:Se.writingMode,glyphOffset:ri,sectionIndex:St.sectionIndex,isSDF:Gr,pixelOffsetTL:ha,pixelOffsetBR:Co,minFontScaleX:0,minFontScaleY:0})}}return Ut}(0,i,w,h,d,v,u,e.allowVerticalPlacement),ie=e.textSizeData,Q=null;ie.kind==="source"?(Q=[128*h.layout.get("text-size").evaluate(v,{})])[0]>32640&&mr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ie.kind==="composite"&&((Q=[128*F.compositeTextSizes[0].evaluate(v,{},G),128*F.compositeTextSizes[1].evaluate(v,{},G)])[0]>32640||Q[1]>32640)&&mr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,$,Q,w,d,v,A,r,T.lineStartIndex,T.lineLength,O,G);for(var he=0,ye=P;he<ye.length;he+=1)M[ye[he]]=e.text.placedSymbolArray.length-1;return 4*$.length}function Lv(e){for(var r in e)return e[r];return null}function E2(e,r,i,u){var h=e.compareText;if(r in h){for(var d=h[r],v=d.length-1;v>=0;v--)if(u.dist(d[v])<i)return!0}else h[r]=[];return h[r].push(u),!1}var S2=Iu.VectorTileFeature.types,T2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function of(e,r,i,u,h,d,v,w,T,A,P,M,O){var F=w?Math.min(32640,Math.round(w[0])):0,G=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(r,i,Math.round(32*u),Math.round(32*h),d,v,(F<<1)+(T?1:0),G,16*A,16*P,256*M,256*O)}function Im(e,r,i){e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i)}function C2(e){for(var r=0,i=e.sections;r<i.length;r+=1)if(yu(i[r].text))return!0;return!1}var Ou=function(e){this.layoutVertexArray=new bu,this.indexArray=new ia,this.programConfigurations=e,this.segments=new j,this.dynamicLayoutVertexArray=new gs,this.opacityVertexArray=new gl,this.placedSymbolArray=new c};Ou.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ou.prototype.upload=function(e,r,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yw.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Qw.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,T2,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},Ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",Ou);var sp=function(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new j,this.collisionVertexArray=new Kc};sp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,e2.members,!0)},sp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",sp);var br=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ri([]),this.placementViewportMatrix=Ri([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tm(this.zoom,r["text-size"]),this.iconSizeData=Tm(this.zoom,r["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),h=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Gi[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};br.prototype.createArrays=function(){this.text=new Ou(new At(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ou(new At(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new b,this.lineVertexArray=new S,this.symbolInstances=new _},br.prototype.calculateGlyphDependencies=function(e,r,i,u,h){for(var d=0;d<e.length;d++)if(r[e.charCodeAt(d)]=!0,(i||u)&&h){var v=ip[e.charAt(d)];v&&(r[v.charCodeAt(0)]=!0)}},br.prototype.populate=function(e,r,i){var u=this.layers[0],h=u.layout,d=h.get("text-font"),v=h.get("text-field"),w=h.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof Cn&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),A=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,P=h.get("symbol-sort-key");if(this.features=[],T||A){for(var M=r.iconDependencies,O=r.glyphDependencies,F=r.availableImages,G=new $t(this.zoom),$=0,ie=e;$<ie.length;$+=1){var Q=ie[$],he=Q.feature,ye=Q.id,we=Q.index,Se=Q.sourceLayerIndex,De=u._featureFilter.needGeometry,Ge=Qr(he,De);if(u._featureFilter.filter(G,Ge,i)){De||(Ge.geometry=qr(he));var Qe=void 0;if(T){var _t=u.getValueAndResolveTokens("text-field",Ge,i,F),ot=Cn.factory(_t);C2(ot)&&(this.hasRTLText=!0),(!this.hasRTLText||Zc()==="unavailable"||this.hasRTLText&&Li.isParsed())&&(Qe=r2(ot,u,Ge))}var Et=void 0;if(A){var st=u.getValueAndResolveTokens("icon-image",Ge,i,F);Et=st instanceof li?st:li.fromString(st)}if(Qe||Et){var Ut=this.sortFeaturesByKey?P.evaluate(Ge,{},i):void 0;if(this.features.push({id:ye,text:Qe,icon:Et,index:we,sourceLayerIndex:Se,geometry:Ge.geometry,properties:he.properties,type:S2[he.type],sortKey:Ut}),Et&&(M[Et.name]=!0),Qe){var kt=d.evaluate(Ge,{},i).join(","),vt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Gi.vertical)>=0;for(var Ht=0,Dt=Qe.sections;Ht<Dt.length;Ht+=1){var er=Dt[Ht];if(er.image)M[er.image.name]=!0;else{var St=jc(Qe.toString()),ar=er.fontStack||kt,Dr=O[ar]=O[ar]||{};this.calculateGlyphDependencies(er.text,Dr,vt,this.allowVerticalPlacement,St)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(Gr){var Hr={},Br={},$r=[],wn=0;function En(Pr){$r.push(Gr[Pr]),wn++}function ri(Pr,sn,Zn){var sr=Br[Pr];return delete Br[Pr],Br[sn]=sr,$r[sr].geometry[0].pop(),$r[sr].geometry[0]=$r[sr].geometry[0].concat(Zn[0]),sr}function Mn(Pr,sn,Zn){var sr=Hr[sn];return delete Hr[sn],Hr[Pr]=sr,$r[sr].geometry[0].shift(),$r[sr].geometry[0]=Zn[0].concat($r[sr].geometry[0]),sr}function ni(Pr,sn,Zn){var sr=Zn?sn[0][sn[0].length-1]:sn[0][0];return Pr+":"+sr.x+":"+sr.y}for(var en=0;en<Gr.length;en++){var zn=Gr[en],Kt=zn.geometry,Sr=zn.text?zn.text.toString():null;if(Sr){var gr=ni(Sr,Kt),or=ni(Sr,Kt,!0);if(gr in Br&&or in Hr&&Br[gr]!==Hr[or]){var hi=Mn(gr,or,Kt),Hn=ri(gr,or,$r[hi].geometry);delete Hr[gr],delete Br[or],Br[ni(Sr,$r[Hn].geometry,!0)]=Hn,$r[hi].geometry=null}else gr in Br?ri(gr,or,Kt):or in Hr?Mn(gr,or,Kt):(En(en),Hr[gr]=wn-1,Br[or]=wn-1)}else En(en)}return $r.filter(function(Pr){return Pr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Gr,Hr){return Gr.sortKey-Hr.sortKey})}},br.prototype.update=function(e,r,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,i))},br.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},br.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},br.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},br.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},br.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},br.prototype.addToLineVertexArray=function(e,r){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(r[e.segment+1]),h=e.dist(r[e.segment]),d={},v=e.segment+1;v<r.length;v++)d[v]={x:r[v].x,y:r[v].y,tileUnitDistanceFromAnchor:u},v<r.length-1&&(u+=r[v+1].dist(r[v]));for(var w=e.segment||0;w>=0;w--)d[w]={x:r[w].x,y:r[w].y,tileUnitDistanceFromAnchor:h},w>0&&(h+=r[w-1].dist(r[w]));for(var T=0;T<r.length;T++){var A=d[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},br.prototype.addSymbols=function(e,r,i,u,h,d,v,w,T,A,P,M){for(var O=e.indexArray,F=e.layoutVertexArray,G=e.segments.prepareSegment(4*r.length,F,O,this.canOverlap?d.sortKey:void 0),$=this.glyphOffsetArray.length,ie=G.vertexLength,Q=this.allowVerticalPlacement&&v===Gi.vertical?Math.PI/2:0,he=d.text&&d.text.sections,ye=0;ye<r.length;ye++){var we=r[ye],Se=we.tl,De=we.tr,Ge=we.bl,Qe=we.br,_t=we.tex,ot=we.pixelOffsetTL,Et=we.pixelOffsetBR,st=we.minFontScaleX,Ut=we.minFontScaleY,kt=we.glyphOffset,vt=we.isSDF,Ht=we.sectionIndex,Dt=G.vertexLength,er=kt[1];of(F,w.x,w.y,Se.x,er+Se.y,_t.x,_t.y,i,vt,ot.x,ot.y,st,Ut),of(F,w.x,w.y,De.x,er+De.y,_t.x+_t.w,_t.y,i,vt,Et.x,ot.y,st,Ut),of(F,w.x,w.y,Ge.x,er+Ge.y,_t.x,_t.y+_t.h,i,vt,ot.x,Et.y,st,Ut),of(F,w.x,w.y,Qe.x,er+Qe.y,_t.x+_t.w,_t.y+_t.h,i,vt,Et.x,Et.y,st,Ut),Im(e.dynamicLayoutVertexArray,w,Q),O.emplaceBack(Dt,Dt+1,Dt+2),O.emplaceBack(Dt+1,Dt+2,Dt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kt[0]),ye!==r.length-1&&Ht===r[ye+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,d,d.index,{},M,he&&he[Ht])}e.placedSymbolArray.emplaceBack(w.x,w.y,$,this.glyphOffsetArray.length-$,ie,T,A,w.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],v,0,!1,0,P)},br.prototype._addCollisionDebugVertex=function(e,r,i,u,h,d){return r.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,h,Math.round(d.x),Math.round(d.y))},br.prototype.addCollisionDebugVertices=function(e,r,i,u,h,d,v){var w=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),T=w.vertexLength,A=h.layoutVertexArray,P=h.collisionVertexArray,M=v.anchorX,O=v.anchorY;this._addCollisionDebugVertex(A,P,d,M,O,new ze(e,r)),this._addCollisionDebugVertex(A,P,d,M,O,new ze(i,r)),this._addCollisionDebugVertex(A,P,d,M,O,new ze(i,u)),this._addCollisionDebugVertex(A,P,d,M,O,new ze(e,u)),w.vertexLength+=4;var F=h.indexArray;F.emplaceBack(T,T+1),F.emplaceBack(T+1,T+2),F.emplaceBack(T+2,T+3),F.emplaceBack(T+3,T),w.primitiveLength+=4},br.prototype.addDebugCollisionBoxes=function(e,r,i,u){for(var h=e;h<r;h++){var d=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,u?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},br.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sp(ys,pv.members,yl),this.iconCollisionBox=new sp(ys,pv.members,yl);for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},br.prototype._deserializeCollisionBoxesForSymbol=function(e,r,i,u,h,d,v,w,T){for(var A={},P=r;P<i;P++){var M=e.get(P);A.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},A.textFeatureIndex=M.featureIndex;break}for(var O=u;O<h;O++){var F=e.get(O);A.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},A.verticalTextFeatureIndex=F.featureIndex;break}for(var G=d;G<v;G++){var $=e.get(G);A.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},A.iconFeatureIndex=$.featureIndex;break}for(var ie=w;ie<T;ie++){var Q=e.get(ie);A.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},A.verticalIconFeatureIndex=Q.featureIndex;break}return A},br.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},br.prototype.hasTextData=function(){return this.text.segments.get().length>0},br.prototype.hasIconData=function(){return this.icon.segments.get().length>0},br.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},br.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},br.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},br.prototype.addIndicesForPlacedSymbol=function(e,r){for(var i=e.placedSymbolArray.get(r),u=i.vertexStartIndex+4*i.numGlyphs,h=i.vertexStartIndex;h<u;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},br.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(e),i=Math.cos(e),u=[],h=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var w=this.symbolInstances.get(v);u.push(0|Math.round(r*w.anchorX+i*w.anchorY)),h.push(w.featureIndex)}return d.sort(function(T,A){return u[T]-u[A]||h[A]-h[T]}),d},br.prototype.addToSortKeyRanges=function(e,r){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})},br.prototype.sortFeatures=function(e){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var h=this.symbolInstances.get(u[i]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(d,v,w){d>=0&&w.indexOf(d)===v&&r.addIndicesForPlacedSymbol(r.text,d)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",br,{omit:["layers","collisionBoxArray","features","compareText"]}),br.MAX_GLYPHS=65535,br.addDynamicAttributes=Im;var A2=new Fn({"symbol-placement":new bt(V.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(V.layout_symbol["icon-size"]),"icon-text-fit":new bt(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(V.layout_symbol["icon-image"]),"icon-rotate":new yt(V.layout_symbol["icon-rotate"]),"icon-padding":new bt(V.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(V.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(V.layout_symbol["icon-offset"]),"icon-anchor":new yt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(V.layout_symbol["text-rotation-alignment"]),"text-field":new yt(V.layout_symbol["text-field"]),"text-font":new yt(V.layout_symbol["text-font"]),"text-size":new yt(V.layout_symbol["text-size"]),"text-max-width":new yt(V.layout_symbol["text-max-width"]),"text-line-height":new bt(V.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(V.layout_symbol["text-letter-spacing"]),"text-justify":new yt(V.layout_symbol["text-justify"]),"text-radial-offset":new yt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(V.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(V.layout_symbol["text-anchor"]),"text-max-angle":new bt(V.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(V.layout_symbol["text-writing-mode"]),"text-rotate":new yt(V.layout_symbol["text-rotate"]),"text-padding":new bt(V.layout_symbol["text-padding"]),"text-keep-upright":new bt(V.layout_symbol["text-keep-upright"]),"text-transform":new yt(V.layout_symbol["text-transform"]),"text-offset":new yt(V.layout_symbol["text-offset"]),"text-allow-overlap":new bt(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(V.layout_symbol["text-ignore-placement"]),"text-optional":new bt(V.layout_symbol["text-optional"])}),km={paint:new Fn({"icon-opacity":new yt(V.paint_symbol["icon-opacity"]),"icon-color":new yt(V.paint_symbol["icon-color"]),"icon-halo-color":new yt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(V.paint_symbol["text-opacity"]),"text-color":new yt(V.paint_symbol["text-color"],{runtimeType:it,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(V.paint_symbol["text-halo-color"]),"text-halo-width":new yt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(V.paint_symbol["text-halo-blur"]),"text-translate":new bt(V.paint_symbol["text-translate"]),"text-translate-anchor":new bt(V.paint_symbol["text-translate-anchor"])}),layout:A2},Du=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ht,this.defaultValue=e};Du.prototype.evaluate=function(e){if(e.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Du.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Du.prototype.outputDefined=function(){return!1},Du.prototype.serialize=function(){return null},ft("FormatSectionOverride",Du,{omit:["defaultValue"]});var I2=function(e){function r(i){e.call(this,i,km)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var d=[],v=0,w=h;v<w.length;v+=1){var T=w[v];d.indexOf(T)<0&&d.push(T)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(i,u,h,d){var v=this.layout.get(i).evaluate(u,{},h,d),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||ol(w.value)||!v?v:function(T,A){return A.replace(/{([^{}]+)}/g,function(P,M){return M in T?String(T[M]):""})}(u.properties,v)},r.prototype.createBucket=function(i){return new br(i)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var i=0,u=km.paint.overridableProperties;i<u.length;i+=1){var h=u[i];if(r.hasPaintOverride(this.layout,h)){var d,v=this.paint.get(h),w=new Du(v),T=new cs(w,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new al("source",T):new ps("composite",T,v.value.zoomStops,v.value._interpolationType),this.paint._values[h]=new Yn(v.property,d,v.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&r.hasPaintOverride(this.layout,i)},r.hasPaintOverride=function(i,u){var h=i.get("text-field"),d=km.paint.properties[u],v=!1,w=function(P){for(var M=0,O=P;M<O.length;M+=1)if(d.overrides&&d.overrides.hasOverride(O[M]))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Cn)w(h.value.value.sections);else if(h.value.kind==="source"){var T=function(P){v||(P instanceof Xn&&Yr(P.value)===wr?w(P.value.sections):P instanceof io?w(P.sections):P.eachChild(T))},A=h.value;A._styleExpression&&T(A._styleExpression.expression)}return v},r}(wo),k2={paint:new Fn({"background-color":new bt(V.paint_background["background-color"]),"background-pattern":new Qn(V.paint_background["background-pattern"]),"background-opacity":new bt(V.paint_background["background-opacity"])})},P2=function(e){function r(i){e.call(this,i,k2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(wo),M2={paint:new Fn({"raster-opacity":new bt(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(V.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(V.paint_raster["raster-saturation"]),"raster-contrast":new bt(V.paint_raster["raster-contrast"]),"raster-resampling":new bt(V.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(V.paint_raster["raster-fade-duration"])})},z2=function(e){function r(i){e.call(this,i,M2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(wo),L2=function(e){function r(i){e.call(this,i,{}),this.implementation=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},r.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},r}(wo),R2={circle:fm,heatmap:yw,hillshade:_w,fill:Dw,"fill-extrusion":Zw,line:Jw,symbol:I2,background:P2,raster:z2},Rv=xe.HTMLImageElement,Ov=xe.HTMLCanvasElement,Dv=xe.HTMLVideoElement,Bv=xe.ImageData,af=xe.ImageBitmap,El=function(e,r,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,u)};El.prototype.update=function(e,r,i){var u=e.width,h=e.height,d=!(this.size&&this.size[0]===u&&this.size[1]===h||i),v=this.context,w=v.gl;if(this.useMipmap=!!(r&&r.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!r||r.premultiply!==!1)),d)this.size=[u,h],e instanceof Rv||e instanceof Ov||e instanceof Dv||e instanceof Bv||af&&e instanceof af?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,u,h,0,this.format,w.UNSIGNED_BYTE,e.data);else{var T=i||{x:0,y:0},A=T.x,P=T.y;e instanceof Rv||e instanceof Ov||e instanceof Dv||e instanceof Bv||af&&e instanceof af?w.texSubImage2D(w.TEXTURE_2D,0,A,P,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,A,P,u,h,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},El.prototype.bind=function(e,r,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),r!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrap=r)},El.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},El.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Pm=function(e){var r=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};Pm.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Pm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Bu=function(e,r,i){this.target=e,this.parent=r,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ki(["receive","process"],this),this.invoker=new Pm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?e:xe};function Fv(e,r,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}Bu.prototype.send=function(e,r,i,u,h){var d=this;h===void 0&&(h=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var w=$e(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:ao(r,w)},w),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:d.mapId})}}},Bu.prototype.receive=function(e){var r=e.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else oe()||r.mustQueue?(this.tasks[i]=r,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,r)},Bu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(e,r)}},Bu.prototype.processTask=function(e,r){var i=this;if(r.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(r.error?u(vi(r.error)):u(null,vi(r.data)))}else{var h=!1,d=$e(this.globalScope)?void 0:[],v=r.hasCallback?function(P,M){h=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:P?ao(P):null,data:ao(M,d)},d)}:function(P){h=!0},w=null,T=vi(r.data);if(this.parent[r.type])w=this.parent[r.type](r.sourceMapId,T,v);else if(this.parent.getWorkerSource){var A=r.type.split(".");w=this.parent.getWorkerSource(r.sourceMapId,A[0],T.source)[A[1]](T,v)}else v(new Error("Could not find function "+r.type));!h&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},Bu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var dn=function(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};dn.prototype.setNorthEast=function(e){return this._ne=e instanceof Or?new Or(e.lng,e.lat):Or.convert(e),this},dn.prototype.setSouthWest=function(e){return this._sw=e instanceof Or?new Or(e.lng,e.lat):Or.convert(e),this},dn.prototype.extend=function(e){var r,i,u=this._sw,h=this._ne;if(e instanceof Or)r=e,i=e;else{if(!(e instanceof dn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(dn.convert(e)):this.extend(Or.convert(e)):this;if(i=e._ne,!(r=e._sw)||!i)return this}return u||h?(u.lng=Math.min(r.lng,u.lng),u.lat=Math.min(r.lat,u.lat),h.lng=Math.max(i.lng,h.lng),h.lat=Math.max(i.lat,h.lat)):(this._sw=new Or(r.lng,r.lat),this._ne=new Or(i.lng,i.lat)),this},dn.prototype.getCenter=function(){return new Or((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},dn.prototype.getSouthWest=function(){return this._sw},dn.prototype.getNorthEast=function(){return this._ne},dn.prototype.getNorthWest=function(){return new Or(this.getWest(),this.getNorth())},dn.prototype.getSouthEast=function(){return new Or(this.getEast(),this.getSouth())},dn.prototype.getWest=function(){return this._sw.lng},dn.prototype.getSouth=function(){return this._sw.lat},dn.prototype.getEast=function(){return this._ne.lng},dn.prototype.getNorth=function(){return this._ne.lat},dn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},dn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},dn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},dn.prototype.contains=function(e){var r=Or.convert(e),i=r.lng,u=r.lat,h=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h},dn.convert=function(e){return!e||e instanceof dn?e:new dn(e)};var Or=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid LngLat object: ("+e+", "+r+")");if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Or.prototype.wrap=function(){return new Or(rr(this.lng,-180,180),this.lat)},Or.prototype.toArray=function(){return[this.lng,this.lat]},Or.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Or.prototype.distanceTo=function(e){var r=Math.PI/180,i=this.lat*r,u=e.lat*r,h=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(h,1))},Or.prototype.toBounds=function(e){e===void 0&&(e=0);var r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new dn(new Or(this.lng-i,this.lat-r),new Or(this.lng+i,this.lat+r))},Or.convert=function(e){if(e instanceof Or)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Or(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Or(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nv=2*Math.PI*63710088e-1;function Uv(e){return Nv*Math.cos(e*Math.PI/180)}function Vv(e){return(180+e)/360}function jv(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qv(e,r){return e/Uv(r)}function Mm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var Sl=function(e,r,i){i===void 0&&(i=0),this.x=+e,this.y=+r,this.z=+i};Sl.fromLngLat=function(e,r){r===void 0&&(r=0);var i=Or.convert(e);return new Sl(Vv(i.lng),jv(i.lat),qv(r,i.lat))},Sl.prototype.toLngLat=function(){return new Or(360*this.x-180,Mm(this.y))},Sl.prototype.toAltitude=function(){return this.z*Uv(Mm(this.y))},Sl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Nv*(e=Mm(this.y),1/Math.cos(e*Math.PI/180));var e};var Tl=function(e,r,i){this.z=e,this.x=r,this.y=i,this.key=lp(0,e,e,r,i)};Tl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Tl.prototype.url=function(e,r){var i,u,h,d,v,w=(u=this.y,h=this.z,d=Fv(256*(i=this.x),256*(u=Math.pow(2,h)-u-1),h),v=Fv(256*(i+1),256*(u+1),h),d[0]+","+d[1]+","+v[0]+","+v[1]),T=function(A,P,M){for(var O,F="",G=A;G>0;G--)F+=(P&(O=1<<G-1)?1:0)+(M&O?2:0);return F}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",w)},Tl.prototype.getTilePoint=function(e){var r=Math.pow(2,this.z);return new ze(8192*(e.x*r-this.x),8192*(e.y*r-this.y))},Tl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Hv=function(e,r){this.wrap=e,this.canonical=r,this.key=lp(e,r.z,r.z,r.x,r.y)},mn=function(e,r,i,u,h){this.overscaledZ=e,this.wrap=r,this.canonical=new Tl(i,+u,+h),this.key=lp(r,e,i,u,h)};function lp(e,r,i,u,h){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*h+u).toString(36)+i.toString(36)+r.toString(36)}mn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},mn.prototype.scaledTo=function(e){var r=this.canonical.z-e;return e>this.canonical.z?new mn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new mn(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)},mn.prototype.calculateScaledKey=function(e,r){var i=this.canonical.z-e;return e>this.canonical.z?lp(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):lp(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)},mn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r},mn.prototype.children=function(e){if(this.overscaledZ>=e)return[new mn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new mn(r,this.wrap,r,i,u),new mn(r,this.wrap,r,i+1,u),new mn(r,this.wrap,r,i,u+1),new mn(r,this.wrap,r,i+1,u+1)]},mn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},mn.prototype.wrapped=function(){return new mn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},mn.prototype.unwrapTo=function(e){return new mn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},mn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},mn.prototype.toUnwrapped=function(){return new Hv(this.wrap,this.canonical)},mn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},mn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Sl(e.x-this.wrap,e.y))},ft("CanonicalTileID",Tl),ft("OverscaledTileID",mn,{omit:["posMatrix"]});var qa=function(e,r,i){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return mr('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var u=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=i||"mapbox";for(var h=0;h<u;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(u,h)]=this.data[this._idx(u-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,u)]=this.data[this._idx(h,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};qa.prototype.get=function(e,r){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},qa.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},qa.prototype._idx=function(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)},qa.prototype._unpackMapbox=function(e,r,i){return(256*e*256+256*r+i)/10-1e4},qa.prototype._unpackTerrarium=function(e,r,i){return 256*e+r+i/256-32768},qa.prototype.getPixels=function(){return new Ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},qa.prototype.backfillBorder=function(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=r*this.dim,h=r*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(r){case-1:u=h-1;break;case 1:h=u+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var w=-r*this.dim,T=-i*this.dim,A=d;A<v;A++)for(var P=u;P<h;P++)this.data[this._idx(P,A)]=e.data[this._idx(P+w,A+T)]},ft("DEMData",qa);var sf=function(e){this._stringToNumber={},this._numberToString=[];for(var r=0;r<e.length;r++){var i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}};sf.prototype.encode=function(e){return this._stringToNumber[e]},sf.prototype.decode=function(e){return this._numberToString[e]};var lf=function(e,r,i,u,h){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=i,e._y=u,this.properties=e.properties,this.id=h},zm={geometry:{configurable:!0}};zm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zm.geometry.set=function(e){this._geometry=e},lf.prototype.toJSON=function(){var e={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e},Object.defineProperties(lf.prototype,zm);var Fu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Fu.prototype.updateState=function(e,r,i){var u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Ot(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==u&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var d in this.deletedStates[e][u]={},this.state[e][u])i[d]||(this.deletedStates[e][u][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][v]===null&&delete this.deletedStates[e][u][v]},Fu.prototype.removeFeatureState=function(e,r,i){if(this.deletedStates[e]!==null){var u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},Fu.prototype.getState=function(e,r){var i=String(r),u=Ot({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][r];if(h===null)return{};for(var d in h)delete u[d]}return u},Fu.prototype.initializeTileState=function(e,r){e.setFeatureState(this.state,r)},Fu.prototype.coalesceChanges=function(e,r){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var h={};for(var d in this.stateChanges[u])this.state[u][d]||(this.state[u][d]={}),Ot(this.state[u][d],this.stateChanges[u][d]),h[d]=this.state[u][d];i[u]=h}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var w={};if(this.deletedStates[v]===null)for(var T in this.state[v])w[T]={},this.state[v][T]={};else for(var A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else for(var P=0,M=Object.keys(this.deletedStates[v][A]);P<M.length;P+=1)delete this.state[v][A][M[P]];w[A]=this.state[v][A]}i[v]=i[v]||{},Ot(i[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var O in e)e[O].setFeatureState(i,r)};var Ha=function(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Bo(8192,16,0),this.grid3D=new Bo(8192,16,0),this.featureIndexArray=new L,this.promoteId=r};function Zv(e,r,i,u,h){return un(e,function(d,v){var w=r instanceof ml?r.get(v):null;return w&&w.evaluate?w.evaluate(i,u,h):w})}function Gv(e){for(var r=1/0,i=1/0,u=-1/0,h=-1/0,d=0,v=e;d<v.length;d+=1){var w=v[d];r=Math.min(r,w.x),i=Math.min(i,w.y),u=Math.max(u,w.x),h=Math.max(h,w.y)}return{minX:r,minY:i,maxX:u,maxY:h}}function O2(e,r){return r-e}Ha.prototype.insert=function(e,r,i,u,h,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,h);for(var w=d?this.grid3D:this.grid,T=0;T<r.length;T++){for(var A=r[T],P=[1/0,1/0,-1/0,-1/0],M=0;M<A.length;M++){var O=A[M];P[0]=Math.min(P[0],O.x),P[1]=Math.min(P[1],O.y),P[2]=Math.max(P[2],O.x),P[3]=Math.max(P[3],O.y)}P[0]<8192&&P[1]<8192&&P[2]>=0&&P[3]>=0&&w.insert(v,P[0],P[1],P[2],P[3])}},Ha.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Iu.VectorTile(new Kh(this.rawTileData)).layers,this.sourceLayerCoder=new sf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ha.prototype.query=function(e,r,i,u){var h=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,w=pu(d.filter),T=e.queryGeometry,A=e.queryPadding*v,P=Gv(T),M=this.grid.query(P.minX-A,P.minY-A,P.maxX+A,P.maxY+A),O=Gv(e.cameraQueryGeometry),F=this.grid3D.query(O.minX-A,O.minY-A,O.maxX+A,O.maxY+A,function(we,Se,De,Ge){return function(Qe,_t,ot,Et,st){for(var Ut=0,kt=Qe;Ut<kt.length;Ut+=1){var vt=kt[Ut];if(_t<=vt.x&&ot<=vt.y&&Et>=vt.x&&st>=vt.y)return!0}var Ht=[new ze(_t,ot),new ze(_t,st),new ze(Et,st),new ze(Et,ot)];if(Qe.length>2){for(var Dt=0,er=Ht;Dt<er.length;Dt+=1)if(So(Qe,er[Dt]))return!0}for(var St=0;St<Qe.length-1;St++)if(xl(Qe[St],Qe[St+1],Ht))return!0;return!1}(e.cameraQueryGeometry,we-A,Se-A,De+A,Ge+A)}),G=0,$=F;G<$.length;G+=1)M.push($[G]);M.sort(O2);for(var ie,Q={},he=function(we){var Se=M[we];if(Se!==ie){ie=Se;var De=h.featureIndexArray.get(Se),Ge=null;h.loadMatchingFeature(Q,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,w,d.layers,d.availableImages,r,i,u,function(Qe,_t,ot){return Ge||(Ge=qr(Qe)),_t.queryIntersectsFeature(T,Qe,ot,Ge,h.z,e.transform,v,e.pixelPosMatrix)})}},ye=0;ye<M.length;ye++)he(ye);return Q},Ha.prototype.loadMatchingFeature=function(e,r,i,u,h,d,v,w,T,A,P){var M=this.bucketLayerIDs[r];if(!d||function(Qe,_t){for(var ot=0;ot<Qe.length;ot++)if(_t.indexOf(Qe[ot])>=0)return!0;return!1}(d,M)){var O=this.sourceLayerCoder.decode(i),F=this.vtLayers[O].feature(u);if(h.needGeometry){var G=Qr(F,!0);if(!h.filter(new $t(this.tileID.overscaledZ),G,this.tileID.canonical))return}else if(!h.filter(new $t(this.tileID.overscaledZ),F))return;for(var $=this.getId(F,O),ie=0;ie<M.length;ie++){var Q=M[ie];if(!(d&&d.indexOf(Q)<0)){var he=w[Q];if(he){var ye={};$!==void 0&&A&&(ye=A.getState(he.sourceLayer||"_geojsonTileLayer",$));var we=Ot({},T[Q]);we.paint=Zv(we.paint,he.paint,F,ye,v),we.layout=Zv(we.layout,he.layout,F,ye,v);var Se=!P||P(F,he,ye);if(Se){var De=new lf(F,this.z,this.x,this.y,$);De.layer=we;var Ge=e[Q];Ge===void 0&&(Ge=e[Q]=[]),Ge.push({featureIndex:u,feature:De,intersectionZ:Se})}}}}}},Ha.prototype.lookupSymbolFeatures=function(e,r,i,u,h,d,v,w){var T={};this.loadVTLayers();for(var A=pu(h),P=0,M=e;P<M.length;P+=1)this.loadMatchingFeature(T,i,u,M[P],A,d,v,w,r);return T},Ha.prototype.hasLayer=function(e){for(var r=0,i=this.bucketLayerIDs;r<i.length;r+=1)for(var u=0,h=i[r];u<h.length;u+=1)if(e===h[u])return!0;return!1},Ha.prototype.getId=function(e,r){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",Ha,{omit:["rawTileData","sourceLayerCoder"]});var Pn=function(e,r){this.tileID=e,this.uid=di(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Pn.prototype.registerFadeDuration=function(e){var r=e+this.timeAdded;r<ct.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},Pn.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Pn.prototype.loadVectorData=function(e,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,P){var M={};if(!P)return M;for(var O=function(){var $=G[F],ie=$.layerIds.map(function(ye){return P.getLayer(ye)}).filter(Boolean);if(ie.length!==0){$.layers=ie,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(ye){return ie.filter(function(we){return we.id===ye})[0]}));for(var Q=0,he=ie;Q<he.length;Q+=1)M[he[Q].id]=$}},F=0,G=A;F<G.length;F+=1)O();return M}(e.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[u];if(h instanceof br){if(this.hasSymbolBuckets=!0,!i)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof br&&v.hasRTLText){this.hasRTLText=!0,Li.isLoading()||Li.isLoaded()||Zc()!=="deferred"||so();break}}for(var w in this.queryPadding=0,this.buckets){var T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(w).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Pn.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Pn.prototype.getBucket=function(e){return this.buckets[e.id]},Pn.prototype.upload=function(e){for(var r in this.buckets){var i=this.buckets[r];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new El(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new El(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Pn.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Pn.prototype.queryRenderedFeatures=function(e,r,i,u,h,d,v,w,T,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:h,scale:d,tileSize:this.tileSize,pixelPosMatrix:A,transform:w,params:v,queryPadding:this.queryPadding*T},e,r,i):{}},Pn.prototype.querySourceFeatures=function(e,r){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),h=r?r.sourceLayer:"",d=u._geojsonTileLayer||u[h];if(d)for(var v=pu(r&&r.filter),w=this.tileID.canonical,T=w.z,A=w.x,P=w.y,M={z:T,x:A,y:P},O=0;O<d.length;O++){var F=d.feature(O);if(v.needGeometry){var G=Qr(F,!0);if(!v.filter(new $t(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!v.filter(new $t(this.tileID.overscaledZ),F))continue;var $=i.getId(F,h),ie=new lf(F,T,A,P,$);ie.tile=M,e.push(ie)}}},Pn.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Pn.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Pn.prototype.setExpiryData=function(e){var r=this.expirationTime;if(e.cacheControl){var i=de(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),h=!1;if(this.expirationTime>u)h=!1;else if(r)if(this.expirationTime<r)h=!0;else{var d=this.expirationTime-r;d?this.expirationTime=u+Math.max(d,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Pn.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Pn.prototype.setFeatureState=function(e,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(r.style.hasLayer(u)){var h=this.buckets[u],d=h.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],w=e[d];if(v&&w&&Object.keys(w).length!==0){h.update(w,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=r&&r.style&&r.style.getLayer(u);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(h)))}}}},Pn.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Pn.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ct.now()},Pn.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Pn.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ct.now()+e},Pn.prototype.setDependencies=function(e,r){for(var i={},u=0,h=r;u<h.length;u+=1)i[h[u]]=!0;this.dependencies[e]=i},Pn.prototype.hasDependency=function(e,r){for(var i=0,u=e;i<u.length;i+=1){var h=this.dependencies[u[i]];if(h){for(var d=0,v=r;d<v.length;d+=1)if(h[v[d]])return!0}}return!1};var ws=xe.performance,$v=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},ws.mark(this._marks.start)};$v.prototype.finish=function(){ws.mark(this._marks.end);var e=ws.getEntriesByName(this._marks.measure);return e.length===0&&(ws.measure(this._marks.measure,this._marks.start,this._marks.end),e=ws.getEntriesByName(this._marks.measure),ws.clearMarks(this._marks.start),ws.clearMarks(this._marks.end),ws.clearMeasures(this._marks.measure)),e},f.Actor=Bu,f.AlphaImage=wl,f.CanonicalTileID=Tl,f.CollisionBoxArray=s,f.Color=pr,f.DEMData=qa,f.DataConstantProperty=bt,f.DictionaryCoder=sf,f.EXTENT=8192,f.ErrorEvent=ae,f.EvaluationParameters=$t,f.Event=K,f.Evented=ce,f.FeatureIndex=Ha,f.FillBucket=Vo,f.FillExtrusionBucket=jo,f.ImageAtlas=ap,f.ImagePosition=Jh,f.LineBucket=pi,f.LngLat=Or,f.LngLatBounds=dn,f.MercatorCoordinate=Sl,f.ONE_EM=24,f.OverscaledTileID=mn,f.Point=ze,f.Point$1=ze,f.Properties=Fn,f.Protobuf=Kh,f.RGBAImage=Ei,f.RequestManager=zr,f.RequestPerformance=$v,f.ResourceType=ru,f.SegmentVector=j,f.SourceFeatureState=Fu,f.StructArrayLayout1ui2=Jc,f.StructArrayLayout2f1f2i16=Na,f.StructArrayLayout2i4=Fa,f.StructArrayLayout3ui6=ia,f.StructArrayLayout4i8=$c,f.SymbolBucket=br,f.Texture=El,f.Tile=Pn,f.Transitionable=Bn,f.Uniform1f=Ke,f.Uniform1i=Ne,f.Uniform2f=We,f.Uniform3f=ut,f.Uniform4f=wt,f.UniformColor=Ct,f.UniformMatrix4f=ir,f.UnwrappedTileID=Hv,f.ValidationError=J,f.WritingMode=Gi,f.ZoomHistory=Vc,f.add=function(e,r,i){return e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e},f.addDynamicAttributes=Im,f.asyncAll=function(e,r,i){if(!e.length)return i(null,[]);var u=e.length,h=new Array(e.length),d=null;e.forEach(function(v,w){r(v,function(T,A){T&&(d=T),h[w]=A,--u==0&&i(d,h)})})},f.bezier=et,f.bindAll=ki,f.browser=ct,f.cacheEntryPossiblyAdded=function(e){++Ks>tu&&(e.getActor().send("enforceCacheSizeLimit",is),Ks=0)},f.clamp=Rt,f.clearTileCache=function(e){var r=xe.caches.delete("mapbox-tiles");e&&r.catch(e).then(function(){return e()})},f.clipLine=Iv,f.clone=function(e){var r=new hr(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.clone$1=Ln,f.clone$2=function(e){var r=new hr(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},f.collisionCircleLayout=t2,f.config=nt,f.create=function(){var e=new hr(16);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},f.create$1=function(){var e=new hr(9);return hr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},f.create$2=function(){var e=new hr(4);return hr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},f.createCommonjsModule=ke,f.createExpression=uu,f.createLayout=In,f.createStyleLayer=function(e){return e.type==="custom"?new L2(e):new R2[e.type](e)},f.cross=function(e,r,i){var u=r[0],h=r[1],d=r[2],v=i[0],w=i[1],T=i[2];return e[0]=h*T-d*w,e[1]=d*v-u*T,e[2]=u*w-h*v,e},f.deepEqual=function e(r,i){if(Array.isArray(r)){if(!Array.isArray(i)||r.length!==i.length)return!1;for(var u=0;u<r.length;u++)if(!e(r[u],i[u]))return!1;return!0}if(typeof r=="object"&&r!==null&&i!==null){if(typeof i!="object"||Object.keys(r).length!==Object.keys(i).length)return!1;for(var h in r)if(!e(r[h],i[h]))return!1;return!0}return r===i},f.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},f.dot$1=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},f.ease=Wt,f.emitValidationErrors=hl,f.endsWith=Fi,f.enforceCacheSizeLimit=function(e){os(),ai&&ai.then(function(r){r.keys().then(function(i){for(var u=0;u<i.length-e;u++)r.delete(i[u])})})},f.evaluateSizeForFeature=wv,f.evaluateSizeForZoom=Ev,f.evaluateVariableOffset=Mv,f.evented=Hc,f.extend=Ot,f.featureFilter=pu,f.filterObject=nn,f.fromRotation=function(e,r){var i=Math.sin(r),u=Math.cos(r);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.getAnchorAlignment=Sm,f.getAnchorJustification=Am,f.getArrayBuffer=Js,f.getImage=R,f.getJSON=function(e,r){return as(Ot(e,{type:"json"}),r)},f.getRTLTextPluginStatus=Zc,f.getReferrer=wa,f.getVideo=function(e,r){var i,u,h=xe.document.createElement("video");h.muted=!0,h.onloadstart=function(){r(null,h)};for(var d=0;d<e.length;d++){var v=xe.document.createElement("source");i=e[d],u=void 0,(u=xe.document.createElement("a")).href=i,(u.protocol!==xe.document.location.protocol||u.host!==xe.document.location.host)&&(h.crossOrigin="Anonymous"),v.src=e[d],h.appendChild(v)}return{cancel:function(){}}},f.identity=Ri,f.invert=function(e,r){var i=r[0],u=r[1],h=r[2],d=r[3],v=r[4],w=r[5],T=r[6],A=r[7],P=r[8],M=r[9],O=r[10],F=r[11],G=r[12],$=r[13],ie=r[14],Q=r[15],he=i*w-u*v,ye=i*T-h*v,we=i*A-d*v,Se=u*T-h*w,De=u*A-d*w,Ge=h*A-d*T,Qe=P*$-M*G,_t=P*ie-O*G,ot=P*Q-F*G,Et=M*ie-O*$,st=M*Q-F*$,Ut=O*Q-F*ie,kt=he*Ut-ye*st+we*Et+Se*ot-De*_t+Ge*Qe;return kt?(e[0]=(w*Ut-T*st+A*Et)*(kt=1/kt),e[1]=(h*st-u*Ut-d*Et)*kt,e[2]=($*Ge-ie*De+Q*Se)*kt,e[3]=(O*De-M*Ge-F*Se)*kt,e[4]=(T*ot-v*Ut-A*_t)*kt,e[5]=(i*Ut-h*ot+d*_t)*kt,e[6]=(ie*we-G*Ge-Q*ye)*kt,e[7]=(P*Ge-O*we+F*ye)*kt,e[8]=(v*st-w*ot+A*Qe)*kt,e[9]=(u*ot-i*st-d*Qe)*kt,e[10]=(G*De-$*we+Q*he)*kt,e[11]=(M*we-P*De-F*he)*kt,e[12]=(w*_t-v*Et-T*Qe)*kt,e[13]=(i*Et-u*_t+h*Qe)*kt,e[14]=($*ye-G*Se-ie*he)*kt,e[15]=(P*Se-M*ye+O*he)*kt,e):null},f.isChar=rt,f.isMapboxURL=pn,f.keysDifference=function(e,r){var i=[];for(var u in e)u in r||i.push(u);return i},f.makeRequest=as,f.mapObject=un,f.mercatorXfromLng=Vv,f.mercatorYfromLat=jv,f.mercatorZfromAltitude=qv,f.mul=hm,f.multiply=ci,f.mvt=Iu,f.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},f.normalize=function(e,r){var i=r[0],u=r[1],h=r[2],d=i*i+u*u+h*h;return d>0&&(d=1/Math.sqrt(d)),e[0]=r[0]*d,e[1]=r[1]*d,e[2]=r[2]*d,e},f.number=on,f.offscreenCanvasSupported=Xs,f.ortho=function(e,r,i,u,h,d,v){var w=1/(r-i),T=1/(u-h),A=1/(d-v);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(r+i)*w,e[13]=(h+u)*T,e[14]=(v+d)*A,e[15]=1,e},f.parseGlyphPBF=function(e){return new Kh(e).readFields(h2,[])},f.pbf=Kh,f.performSymbolLayout=function(e,r,i,u,h,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,A={};if(e.textSizeData.kind==="composite"){var P=e.textSizeData,M=P.maxZoom;A.compositeTextSizes=[T["text-size"].possiblyEvaluate(new $t(P.minZoom),v),T["text-size"].possiblyEvaluate(new $t(M),v)]}if(e.iconSizeData.kind==="composite"){var O=e.iconSizeData,F=O.maxZoom;A.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new $t(O.minZoom),v),T["icon-size"].possiblyEvaluate(new $t(F),v)]}A.layoutTextSize=T["text-size"].possiblyEvaluate(new $t(e.zoom+1),v),A.layoutIconSize=T["icon-size"].possiblyEvaluate(new $t(e.zoom+1),v),A.textMaxSize=T["text-size"].possiblyEvaluate(new $t(18));for(var G=24*w.get("text-line-height"),$=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",ie=w.get("text-keep-upright"),Q=w.get("text-size"),he=function(){var Se=we[ye],De=w.get("text-font").evaluate(Se,{},v).join(","),Ge=Q.evaluate(Se,{},v),Qe=A.layoutTextSize.evaluate(Se,{},v),_t=A.layoutIconSize.evaluate(Se,{},v),ot={horizontal:{},vertical:void 0},Et=Se.text,st=[0,0];if(Et){var Ut=Et.toString(),kt=24*w.get("text-letter-spacing").evaluate(Se,{},v),vt=function(Kt){for(var Sr=0,gr=Kt;Sr<gr.length;Sr+=1)if(or=gr[Sr].charCodeAt(0),rt.Arabic(or)||rt["Arabic Supplement"](or)||rt["Arabic Extended-A"](or)||rt["Arabic Presentation Forms-A"](or)||rt["Arabic Presentation Forms-B"](or))return!1;var or;return!0}(Ut)?kt:0,Ht=w.get("text-anchor").evaluate(Se,{},v),Dt=w.get("text-variable-anchor");if(!Dt){var er=w.get("text-radial-offset").evaluate(Se,{},v);st=er?Mv(Ht,[24*er,Cm]):w.get("text-offset").evaluate(Se,{},v).map(function(Kt){return 24*Kt})}var St=$?"center":w.get("text-justify").evaluate(Se,{},v),ar=w.get("symbol-placement"),Dr=ar==="point"?24*w.get("text-max-width").evaluate(Se,{},v):0,Gr=function(){e.allowVerticalPlacement&&jc(Ut)&&(ot.vertical=Yh(Et,r,i,h,De,Dr,G,Ht,"left",vt,st,Gi.vertical,!0,ar,Qe,Ge))};if(!$&&Dt){for(var Hr=St==="auto"?Dt.map(function(Kt){return Am(Kt)}):[St],Br=!1,$r=0;$r<Hr.length;$r++){var wn=Hr[$r];if(!ot.horizontal[wn])if(Br)ot.horizontal[wn]=ot.horizontal[0];else{var En=Yh(Et,r,i,h,De,Dr,G,"center",wn,vt,st,Gi.horizontal,!1,ar,Qe,Ge);En&&(ot.horizontal[wn]=En,Br=En.positionedLines.length===1)}}Gr()}else{St==="auto"&&(St=Am(Ht));var ri=Yh(Et,r,i,h,De,Dr,G,Ht,St,vt,st,Gi.horizontal,!1,ar,Qe,Ge);ri&&(ot.horizontal[St]=ri),Gr(),jc(Ut)&&$&&ie&&(ot.vertical=Yh(Et,r,i,h,De,Dr,G,Ht,St,vt,st,Gi.vertical,!1,ar,Qe,Ge))}}var Mn=void 0,ni=!1;if(Se.icon&&Se.icon.name){var en=u[Se.icon.name];en&&(Mn=function(Kt,Sr,gr){var or=Sm(gr),hi=Sr[0]-Kt.displaySize[0]*or.horizontalAlign,Hn=Sr[1]-Kt.displaySize[1]*or.verticalAlign;return{image:Kt,top:Hn,bottom:Hn+Kt.displaySize[1],left:hi,right:hi+Kt.displaySize[0]}}(h[Se.icon.name],w.get("icon-offset").evaluate(Se,{},v),w.get("icon-anchor").evaluate(Se,{},v)),ni=en.sdf,e.sdfIcons===void 0?e.sdfIcons=en.sdf:e.sdfIcons!==en.sdf&&mr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(en.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var zn=Lv(ot.horizontal)||ot.vertical;e.iconsInText=!!zn&&zn.iconsInText,(zn||Mn)&&function(Kt,Sr,gr,or,hi,Hn,Pr,sn,Zn,sr,ca){var $i=Hn.textMaxSize.evaluate(Sr,{});$i===void 0&&($i=Pr);var pa,tn=Kt.layers[0].layout,ha=tn.get("icon-offset").evaluate(Sr,{},ca),Co=Lv(gr.horizontal),Nu=Pr/24,Cl=Kt.tilePixelRatio*Nu,Uu=Kt.tilePixelRatio*$i/24,Za=Kt.tilePixelRatio*sn,Vu=Kt.tilePixelRatio*tn.get("symbol-spacing"),uf=tn.get("text-padding")*Kt.tilePixelRatio,ju=tn.get("icon-padding")*Kt.tilePixelRatio,up=tn.get("text-max-angle")/180*Math.PI,cf=tn.get("text-rotation-alignment")==="map"&&tn.get("symbol-placement")!=="point",pf=tn.get("icon-rotation-alignment")==="map"&&tn.get("symbol-placement")!=="point",Ga=tn.get("symbol-placement"),cp=Vu/2,qu=tn.get("icon-text-fit");or&&qu!=="none"&&(Kt.allowVerticalPlacement&&gr.vertical&&(pa=bv(or,gr.vertical,qu,tn.get("icon-text-fit-padding"),ha,Nu)),Co&&(or=bv(or,Co,qu,tn.get("icon-text-fit-padding"),ha,Nu)));var Es=function(D2,vp){vp.x<0||vp.x>=8192||vp.y<0||vp.y>=8192||function(rn,qo,B2,Ss,Dm,Xv,yf,fa,vf,_p,_f,xf,Bm,Jv,xp,Yv,Qv,e_,t_,r_,Wi,bf,n_,da,F2){var i_,Il,Wu,Ku,Xu,Ju=rn.addToLineVertexArray(qo,B2),o_=0,a_=0,s_=0,l_=0,Fm=-1,Nm=-1,$a={},u_=Z(""),Um=0,Vm=0;if(fa._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Um=(i_=fa.layout.get("text-offset").evaluate(Wi,{},da).map(function(wp){return 24*wp}))[0],Vm=i_[1]):(Um=24*fa.layout.get("text-radial-offset").evaluate(Wi,{},da),Vm=Cm),rn.allowVerticalPlacement&&Ss.vertical){var c_=fa.layout.get("text-rotate").evaluate(Wi,{},da)+90;Ku=new nf(vf,qo,_p,_f,xf,Ss.vertical,Bm,Jv,xp,c_),yf&&(Xu=new nf(vf,qo,_p,_f,xf,yf,Qv,e_,xp,c_))}if(Dm){var jm=fa.layout.get("icon-rotate").evaluate(Wi,{}),p_=fa.layout.get("icon-text-fit")!=="none",h_=kv(Dm,jm,n_,p_),qm=yf?kv(yf,jm,n_,p_):void 0;Wu=new nf(vf,qo,_p,_f,xf,Dm,Qv,e_,!1,jm),o_=4*h_.length;var f_=rn.iconSizeData,bp=null;f_.kind==="source"?(bp=[128*fa.layout.get("icon-size").evaluate(Wi,{})])[0]>32640&&mr(rn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):f_.kind==="composite"&&((bp=[128*bf.compositeIconSizes[0].evaluate(Wi,{},da),128*bf.compositeIconSizes[1].evaluate(Wi,{},da)])[0]>32640||bp[1]>32640)&&mr(rn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),rn.addSymbols(rn.icon,h_,bp,r_,t_,Wi,!1,qo,Ju.lineStartIndex,Ju.lineLength,-1,da),Fm=rn.icon.placedSymbolArray.length-1,qm&&(a_=4*qm.length,rn.addSymbols(rn.icon,qm,bp,r_,t_,Wi,Gi.vertical,qo,Ju.lineStartIndex,Ju.lineLength,-1,da),Nm=rn.icon.placedSymbolArray.length-1)}for(var d_ in Ss.horizontal){var wf=Ss.horizontal[d_];if(!Il){u_=Z(wf.text);var N2=fa.layout.get("text-rotate").evaluate(Wi,{},da);Il=new nf(vf,qo,_p,_f,xf,wf,Bm,Jv,xp,N2)}var m_=wf.positionedLines.length===1;if(s_+=zv(rn,qo,wf,Xv,fa,xp,Wi,Yv,Ju,Ss.vertical?Gi.horizontal:Gi.horizontalOnly,m_?Object.keys(Ss.horizontal):[d_],$a,Fm,bf,da),m_)break}Ss.vertical&&(l_+=zv(rn,qo,Ss.vertical,Xv,fa,xp,Wi,Yv,Ju,Gi.vertical,["vertical"],$a,Nm,bf,da));var U2=Il?Il.boxStartIndex:rn.collisionBoxArray.length,V2=Il?Il.boxEndIndex:rn.collisionBoxArray.length,j2=Ku?Ku.boxStartIndex:rn.collisionBoxArray.length,q2=Ku?Ku.boxEndIndex:rn.collisionBoxArray.length,H2=Wu?Wu.boxStartIndex:rn.collisionBoxArray.length,Z2=Wu?Wu.boxEndIndex:rn.collisionBoxArray.length,G2=Xu?Xu.boxStartIndex:rn.collisionBoxArray.length,$2=Xu?Xu.boxEndIndex:rn.collisionBoxArray.length,ma=-1,Ef=function(wp,y_){return wp&&wp.circleDiameter?Math.max(wp.circleDiameter,y_):y_};ma=Ef(Il,ma),ma=Ef(Ku,ma),ma=Ef(Wu,ma);var g_=(ma=Ef(Xu,ma))>-1?1:0;g_&&(ma*=F2/24),rn.glyphOffsetArray.length>=br.MAX_GLYPHS&&mr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Wi.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,Wi.sortKey),rn.symbolInstances.emplaceBack(qo.x,qo.y,$a.right>=0?$a.right:-1,$a.center>=0?$a.center:-1,$a.left>=0?$a.left:-1,$a.vertical||-1,Fm,Nm,u_,U2,V2,j2,q2,H2,Z2,G2,$2,_p,s_,l_,o_,a_,g_,0,Bm,Um,Vm,ma)}(Kt,vp,D2,gr,or,hi,pa,Kt.layers[0],Kt.collisionBoxArray,Sr.index,Sr.sourceLayerIndex,Kt.index,Cl,uf,cf,Zn,Za,ju,pf,ha,Sr,Hn,sr,ca,Pr)};if(Ga==="line")for(var Hu=0,hf=Iv(Sr.geometry,0,0,8192,8192);Hu<hf.length;Hu+=1)for(var ff=hf[Hu],pp=0,hp=_2(ff,Vu,up,gr.vertical||Co,or,24,Uu,Kt.overscaling,8192);pp<hp.length;pp+=1){var df=hp[pp];Co&&E2(Kt,Co.text,cp,df)||Es(ff,df)}else if(Ga==="line-center")for(var fp=0,dp=Sr.geometry;fp<dp.length;fp+=1){var mp=dp[fp];if(mp.length>1){var mf=v2(mp,up,gr.vertical||Co,or,24,Uu);mf&&Es(mp,mf)}}else if(Sr.type==="Polygon")for(var Zu=0,gf=_m(Sr.geometry,0);Zu<gf.length;Zu+=1){var Gu=gf[Zu],gp=b2(Gu,16);Es(Gu[0],new zu(gp.x,gp.y,0))}else if(Sr.type==="LineString")for(var Al=0,yp=Sr.geometry;Al<yp.length;Al+=1){var $u=yp[Al];Es($u,new zu($u[0].x,$u[0].y,0))}else if(Sr.type==="Point")for(var Lm=0,Wv=Sr.geometry;Lm<Wv.length;Lm+=1)for(var Rm=0,Kv=Wv[Lm];Rm<Kv.length;Rm+=1){var Om=Kv[Rm];Es([Om],new zu(Om.x,Om.y,0))}}(e,Se,ot,Mn,u,A,Qe,_t,st,ni,v)},ye=0,we=e.features;ye<we.length;ye+=1)he();d&&e.generateCollisionDebugBuffers()},f.perspective=function(e,r,i,u,h){var d,v=1/Math.tan(r/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+u)*(d=1/(u-h)),e[14]=2*h*u*d):(e[10]=-1,e[14]=-2*u),e},f.pick=function(e,r){for(var i={},u=0;u<r.length;u++){var h=r[u];h in e&&(i[h]=e[h])}return i},f.plugin=Li,f.polygonIntersectsPolygon=sa,f.postMapLoadEvent=$s,f.postTurnstileEvent=eu,f.potpack=yv,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=ft,f.registerForPluginStateChange=function(e){return e({pluginStatus:xi,pluginURL:Fo}),Hc.on("pluginStateChange",e),e},f.renderColorRamp=Yy,f.rotate=function(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3],w=Math.sin(i),T=Math.cos(i);return e[0]=u*T+d*w,e[1]=h*T+v*w,e[2]=u*-w+d*T,e[3]=h*-w+v*T,e},f.rotateX=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),d=r[4],v=r[5],w=r[6],T=r[7],A=r[8],P=r[9],M=r[10],O=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=d*h+A*u,e[5]=v*h+P*u,e[6]=w*h+M*u,e[7]=T*h+O*u,e[8]=A*h-d*u,e[9]=P*h-v*u,e[10]=M*h-w*u,e[11]=O*h-T*u,e},f.rotateZ=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),d=r[0],v=r[1],w=r[2],T=r[3],A=r[4],P=r[5],M=r[6],O=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=d*h+A*u,e[1]=v*h+P*u,e[2]=w*h+M*u,e[3]=T*h+O*u,e[4]=A*h-d*u,e[5]=P*h-v*u,e[6]=M*h-w*u,e[7]=O*h-T*u,e},f.scale=function(e,r,i){var u=i[0],h=i[1],d=i[2];return e[0]=r[0]*u,e[1]=r[1]*u,e[2]=r[2]*u,e[3]=r[3]*u,e[4]=r[4]*h,e[5]=r[5]*h,e[6]=r[6]*h,e[7]=r[7]*h,e[8]=r[8]*d,e[9]=r[9]*d,e[10]=r[10]*d,e[11]=r[11]*d,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.scale$1=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e},f.scale$2=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e},f.setCacheLimits=function(e,r){is=e,tu=r},f.setRTLTextPlugin=function(e,r,i){if(i===void 0&&(i=!1),xi==="deferred"||xi==="loading"||xi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Fo=ct.resolveURL(e),xi="deferred",vu=r,dl(),i||so()},f.sphericalToCartesian=function(e){var r=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(u),y:r*Math.sin(i)*Math.sin(u),z:r*Math.cos(u)}},f.sqrLen=function(e){var r=e[0],i=e[1];return r*r+i*i},f.styleSpec=V,f.sub=function(e,r,i){return e[0]=r[0]-i[0],e[1]=r[1]-i[1],e[2]=r[2]-i[2],e},f.symbolSize=y2,f.transformMat3=function(e,r,i){var u=r[0],h=r[1],d=r[2];return e[0]=u*i[0]+h*i[3]+d*i[6],e[1]=u*i[1]+h*i[4]+d*i[7],e[2]=u*i[2]+h*i[5]+d*i[8],e},f.transformMat4=Su,f.translate=function(e,r,i){var u,h,d,v,w,T,A,P,M,O,F,G,$=i[0],ie=i[1],Q=i[2];return r===e?(e[12]=r[0]*$+r[4]*ie+r[8]*Q+r[12],e[13]=r[1]*$+r[5]*ie+r[9]*Q+r[13],e[14]=r[2]*$+r[6]*ie+r[10]*Q+r[14],e[15]=r[3]*$+r[7]*ie+r[11]*Q+r[15]):(h=r[1],d=r[2],v=r[3],w=r[4],T=r[5],A=r[6],P=r[7],M=r[8],O=r[9],F=r[10],G=r[11],e[0]=u=r[0],e[1]=h,e[2]=d,e[3]=v,e[4]=w,e[5]=T,e[6]=A,e[7]=P,e[8]=M,e[9]=O,e[10]=F,e[11]=G,e[12]=u*$+w*ie+M*Q+r[12],e[13]=h*$+T*ie+O*Q+r[13],e[14]=d*$+A*ie+F*Q+r[14],e[15]=v*$+P*ie+G*Q+r[15]),e},f.triggerPluginCompletionEvent=jh,f.uniqueId=di,f.validateCustomStyleLayer=function(e){var r=[],i=e.id;return i===void 0&&r.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&r.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&r.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),r},f.validateLight=cm,f.validateStyle=cl,f.values=function(e){var r=[];for(var i in e)r.push(e[i]);return r},f.vectorTile=Iu,f.version="1.13.3",f.warnOnce=mr,f.webpSupported=It,f.window=xe,f.wrap=rr}),Oe(["./shared"],function(f){function ke(z){var R=typeof z;if(R==="number"||R==="boolean"||R==="string"||z==null)return JSON.stringify(z);if(Array.isArray(z)){for(var B="[",H=0,K=z;H<K.length;H+=1)B+=ke(K[H])+",";return B+"]"}for(var ae=Object.keys(z).sort(),ce="{",V=0;V<ae.length;V++)ce+=JSON.stringify(ae[V])+":"+ke(z[ae[V]])+",";return ce+"}"}function Y(z){for(var R="",B=0,H=f.refProperties;B<H.length;B+=1)R+="/"+ke(z[H[B]]);return R}var Fe=function(z){this.keyCache={},z&&this.replace(z)};Fe.prototype.replace=function(z){this._layerConfigs={},this._layers={},this.update(z,[])},Fe.prototype.update=function(z,R){for(var B=this,H=0,K=z;H<K.length;H+=1){var ae=K[H];this._layerConfigs[ae.id]=ae;var ce=this._layers[ae.id]=f.createStyleLayer(ae);ce._featureFilter=f.featureFilter(ce.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(var V=0,J=R;V<J.length;V+=1){var ge=J[V];delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge]}this.familiesBySource={};for(var Ue=0,Ze=function(tt,it){for(var Vt={},at=0;at<tt.length;at++){var Jt=it&&it[tt[at].id]||Y(tt[at]);it&&(it[tt[at].id]=Jt);var wr=Vt[Jt];wr||(wr=Vt[Jt]=[]),wr.push(tt[at])}var Gt=[];for(var cr in Vt)Gt.push(Vt[cr]);return Gt}(f.values(this._layerConfigs),this.keyCache);Ue<Ze.length;Ue+=1){var Pe=Ze[Ue].map(function(tt){return B._layers[tt.id]}),Ve=Pe[0];if(Ve.visibility!=="none"){var gt=Ve.source||"",ht=this.familiesBySource[gt];ht||(ht=this.familiesBySource[gt]={});var Me=Ve.sourceLayer||"_geojsonTileLayer",lt=ht[Me];lt||(lt=ht[Me]=[]),lt.push(Pe)}}};var ze=function(z){var R={},B=[];for(var H in z){var K=z[H],ae=R[H]={};for(var ce in K){var V=K[+ce];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var J={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};B.push(J),ae[ce]={rect:J,metrics:V.metrics}}}}var ge=f.potpack(B),Ue=new f.AlphaImage({width:ge.w||1,height:ge.h||1});for(var Ze in z){var Pe=z[Ze];for(var Ve in Pe){var gt=Pe[+Ve];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var ht=R[Ze][Ve].rect;f.AlphaImage.copy(gt.bitmap,Ue,{x:0,y:0},{x:ht.x+1,y:ht.y+1},gt.bitmap)}}}this.image=Ue,this.positions=R};f.register("GlyphAtlas",ze);var Xe=function(z){this.tileID=new f.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId};function xe(z,R,B){for(var H=new f.EvaluationParameters(R),K=0,ae=z;K<ae.length;K+=1)ae[K].recalculate(H,B)}function mt(z,R){var B=f.getArrayBuffer(z.request,function(H,K,ae,ce){H?R(H):K&&R(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(K)),rawData:K,cacheControl:ae,expires:ce})});return function(){B.cancel(),R()}}Xe.prototype.parse=function(z,R,B,H,K){var ae=this;this.status="parsing",this.data=z,this.collisionBoxArray=new f.CollisionBoxArray;var ce=new f.DictionaryCoder(Object.keys(z.layers).sort()),V=new f.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var J,ge,Ue,Ze,Pe={},Ve={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:B},gt=R.familiesBySource[this.source];for(var ht in gt){var Me=z.layers[ht];if(Me){Me.version===1&&f.warnOnce('Vector tile source "'+this.source+'" layer "'+ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var lt=ce.encode(ht),tt=[],it=0;it<Me.length;it++){var Vt=Me.feature(it),at=V.getId(Vt,ht);tt.push({feature:Vt,id:at,index:it,sourceLayerIndex:lt})}for(var Jt=0,wr=gt[ht];Jt<wr.length;Jt+=1){var Gt=wr[Jt],cr=Gt[0];cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||cr.visibility!=="none"&&(xe(Gt,this.zoom,B),(Pe[cr.id]=cr.createBucket({index:V.bucketLayerIDs.length,layers:Gt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lt,sourceID:this.source})).populate(tt,Ve,this.tileID.canonical),V.bucketLayerIDs.push(Gt.map(function(xr){return xr.id})))}}}var Qt=f.mapObject(Ve.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(Qt).length?H.send("getGlyphs",{uid:this.uid,stacks:Qt},function(xr,Xt){J||(J=xr,ge=Xt,Jr.call(ae))}):ge={};var Kn=Object.keys(Ve.iconDependencies);Kn.length?H.send("getImages",{icons:Kn,source:this.source,tileID:this.tileID,type:"icons"},function(xr,Xt){J||(J=xr,Ue=Xt,Jr.call(ae))}):Ue={};var fr=Object.keys(Ve.patternDependencies);function Jr(){if(J)return K(J);if(ge&&Ue&&Ze){var xr=new ze(ge),Xt=new f.ImageAtlas(Ue,Ze);for(var pr in Pe){var si=Pe[pr];si instanceof f.SymbolBucket?(xe(si.layers,this.zoom,B),f.performSymbolLayout(si,ge,xr.positions,Ue,Xt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):si.hasPattern&&(si instanceof f.LineBucket||si instanceof f.FillBucket||si instanceof f.FillExtrusionBucket)&&(xe(si.layers,this.zoom,B),si.addFeatures(Ve,this.tileID.canonical,Xt.patternPositions))}this.status="done",K(null,{buckets:f.values(Pe).filter(function(Ys){return!Ys.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:Xt,glyphMap:this.returnDependencies?ge:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?xr.positions:null})}}fr.length?H.send("getImages",{icons:fr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,Xt){J||(J=xr,Ze=Xt,Jr.call(ae))}):Ze={},Jr.call(this)};var et=function(z,R,B,H){this.actor=z,this.layerIndex=R,this.availableImages=B,this.loadVectorData=H||mt,this.loading={},this.loaded={}};et.prototype.loadTile=function(z,R){var B=this,H=z.uid;this.loading||(this.loading={});var K=!!(z&&z.request&&z.request.collectResourceTiming)&&new f.RequestPerformance(z.request),ae=this.loading[H]=new Xe(z);ae.abort=this.loadVectorData(z,function(ce,V){if(delete B.loading[H],ce||!V)return ae.status="done",B.loaded[H]=ae,R(ce);var J=V.rawData,ge={};V.expires&&(ge.expires=V.expires),V.cacheControl&&(ge.cacheControl=V.cacheControl);var Ue={};if(K){var Ze=K.finish();Ze&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Ze)))}ae.vectorTile=V.vectorTile,ae.parse(V.vectorTile,B.layerIndex,B.availableImages,B.actor,function(Pe,Ve){if(Pe||!Ve)return R(Pe);R(null,f.extend({rawTileData:J.slice(0)},Ve,ge,Ue))}),B.loaded=B.loaded||{},B.loaded[H]=ae})},et.prototype.reloadTile=function(z,R){var B=this,H=this.loaded,K=z.uid,ae=this;if(H&&H[K]){var ce=H[K];ce.showCollisionBoxes=z.showCollisionBoxes;var V=function(J,ge){var Ue=ce.reloadCallback;Ue&&(delete ce.reloadCallback,ce.parse(ce.vectorTile,ae.layerIndex,B.availableImages,ae.actor,Ue)),R(J,ge)};ce.status==="parsing"?ce.reloadCallback=V:ce.status==="done"&&(ce.vectorTile?ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},et.prototype.abortTile=function(z,R){var B=this.loading,H=z.uid;B&&B[H]&&B[H].abort&&(B[H].abort(),delete B[H]),R()},et.prototype.removeTile=function(z,R){var B=this.loaded,H=z.uid;B&&B[H]&&delete B[H],R()};var Wt=f.window.ImageBitmap,Rt=function(){this.loaded={}};function rr(z,R){if(z.length!==0){Ot(z[0],R);for(var B=1;B<z.length;B++)Ot(z[B],!R)}}function Ot(z,R){for(var B=0,H=0,K=0,ae=z.length,ce=ae-1;K<ae;ce=K++){var V=(z[K][0]-z[ce][0])*(z[ce][1]+z[K][1]),J=B+V;H+=Math.abs(B)>=Math.abs(V)?B-J+V:V-J+B,B=J}B+H>=0!=!!R&&z.reverse()}Rt.prototype.loadTile=function(z,R){var B=z.uid,H=z.encoding,K=z.rawImageData,ae=Wt&&K instanceof Wt?this.getImageData(K):K,ce=new f.DEMData(B,ae,H);this.loaded=this.loaded||{},this.loaded[B]=ce,R(null,ce)},Rt.prototype.getImageData=function(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);var R=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:R.width,height:R.height},R.data)},Rt.prototype.removeTile=function(z){var R=this.loaded,B=z.uid;R&&R[B]&&delete R[B]};var gn=f.vectorTile.VectorTileFeature.prototype.toGeoJSON,di=function(z){this._feature=z,this.extent=f.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))};di.prototype.loadGeometry=function(){if(this._feature.type===1){for(var z=[],R=0,B=this._feature.geometry;R<B.length;R+=1){var H=B[R];z.push([new f.Point$1(H[0],H[1])])}return z}for(var K=[],ae=0,ce=this._feature.geometry;ae<ce.length;ae+=1){for(var V=[],J=0,ge=ce[ae];J<ge.length;J+=1){var Ue=ge[J];V.push(new f.Point$1(Ue[0],Ue[1]))}K.push(V)}return K},di.prototype.toGeoJSON=function(z,R,B){return gn.call(this,z,R,B)};var Kr=function(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=z.length,this._features=z};Kr.prototype.feature=function(z){return new di(this._features[z])};var yn=f.vectorTile.VectorTileFeature,ki=Fi;function Fi(z,R){this.options=R||{},this.features=z,this.length=z.length}function un(z,R){this.id=typeof z.id=="number"?z.id:void 0,this.type=z.type,this.rawGeometry=z.type===1?[z.geometry]:z.geometry,this.properties=z.tags,this.extent=R||4096}Fi.prototype.feature=function(z){return new un(this.features[z],this.options.extent)},un.prototype.loadGeometry=function(){var z=this.rawGeometry;this.geometry=[];for(var R=0;R<z.length;R++){for(var B=z[R],H=[],K=0;K<B.length;K++)H.push(new f.Point$1(B[K][0],B[K][1]));this.geometry.push(H)}return this.geometry},un.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var z=this.geometry,R=1/0,B=-1/0,H=1/0,K=-1/0,ae=0;ae<z.length;ae++)for(var ce=z[ae],V=0;V<ce.length;V++){var J=ce[V];R=Math.min(R,J.x),B=Math.max(B,J.x),H=Math.min(H,J.y),K=Math.max(K,J.y)}return[R,H,B,K]},un.prototype.toGeoJSON=yn.prototype.toGeoJSON;var nn=ro,Ln=ki;function ro(z){var R=new f.pbf;return function(B,H){for(var K in B.layers)H.writeMessage(3,mr,B.layers[K])}(z,R),R.finish()}function mr(z,R){var B;R.writeVarintField(15,z.version||1),R.writeStringField(1,z.name||""),R.writeVarintField(5,z.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<z.length;B++)H.feature=z.feature(B),R.writeMessage(2,cn,H);var K=H.keys;for(B=0;B<K.length;B++)R.writeStringField(3,K[B]);var ae=H.values;for(B=0;B<ae.length;B++)R.writeMessage(4,$e,ae[B])}function cn(z,R){var B=z.feature;B.id!==void 0&&R.writeVarintField(1,B.id),R.writeMessage(2,no,z),R.writeVarintField(3,B.type),R.writeMessage(4,Be,B)}function no(z,R){var B=z.feature,H=z.keys,K=z.values,ae=z.keycache,ce=z.valuecache;for(var V in B.properties){var J=ae[V];J===void 0&&(H.push(V),ae[V]=J=H.length-1),R.writeVarint(J);var ge=B.properties[V],Ue=typeof ge;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(ge=JSON.stringify(ge));var Ze=Ue+":"+ge,Pe=ce[Ze];Pe===void 0&&(K.push(ge),ce[Ze]=Pe=K.length-1),R.writeVarint(Pe)}}function oe(z,R){return(R<<3)+(7&z)}function de(z){return z<<1^z>>31}function Be(z,R){for(var B=z.loadGeometry(),H=z.type,K=0,ae=0,ce=B.length,V=0;V<ce;V++){var J=B[V],ge=1;H===1&&(ge=J.length),R.writeVarint(oe(1,ge));for(var Ue=H===3?J.length-1:J.length,Ze=0;Ze<Ue;Ze++){Ze===1&&H!==1&&R.writeVarint(oe(2,Ue-1));var Pe=J[Ze].x-K,Ve=J[Ze].y-ae;R.writeVarint(de(Pe)),R.writeVarint(de(Ve)),K+=Pe,ae+=Ve}H===3&&R.writeVarint(oe(7,1))}}function $e(z,R){var B=typeof z;B==="string"?R.writeStringField(1,z):B==="boolean"?R.writeBooleanField(7,z):B==="number"&&(z%1!=0?R.writeDoubleField(3,z):z<0?R.writeSVarintField(6,z):R.writeVarintField(5,z))}function qe(z,R,B,H){Je(z,B,H),Je(R,2*B,2*H),Je(R,2*B+1,2*H+1)}function Je(z,R,B){var H=z[R];z[R]=z[B],z[B]=H}function Te(z,R,B,H){var K=z-B,ae=R-H;return K*K+ae*ae}nn.fromVectorTileJs=ro,nn.fromGeojsonVt=function(z,R){R=R||{};var B={};for(var H in z)B[H]=new ki(z[H].features,R),B[H].name=H,B[H].version=R.version,B[H].extent=R.extent;return ro({layers:B})},nn.GeoJSONWrapper=Ln;var Le=function(z){return z[0]},Re=function(z){return z[1]},Ae=function(z,R,B,H,K){R===void 0&&(R=Le),B===void 0&&(B=Re),H===void 0&&(H=64),K===void 0&&(K=Float64Array),this.nodeSize=H,this.points=z;for(var ae=z.length<65536?Uint16Array:Uint32Array,ce=this.ids=new ae(z.length),V=this.coords=new K(2*z.length),J=0;J<z.length;J++)ce[J]=J,V[2*J]=R(z[J]),V[2*J+1]=B(z[J]);(function ge(Ue,Ze,Pe,Ve,gt,ht){if(!(gt-Ve<=Pe)){var Me=Ve+gt>>1;(function lt(tt,it,Vt,at,Jt,wr){for(;Jt>at;){if(Jt-at>600){var Gt=Jt-at+1,cr=Vt-at+1,Qt=Math.log(Gt),Kn=.5*Math.exp(2*Qt/3),fr=.5*Math.sqrt(Qt*Kn*(Gt-Kn)/Gt)*(cr-Gt/2<0?-1:1);lt(tt,it,Vt,Math.max(at,Math.floor(Vt-cr*Kn/Gt+fr)),Math.min(Jt,Math.floor(Vt+(Gt-cr)*Kn/Gt+fr)),wr)}var Jr=it[2*Vt+wr],xr=at,Xt=Jt;for(qe(tt,it,at,Vt),it[2*Jt+wr]>Jr&&qe(tt,it,at,Jt);xr<Xt;){for(qe(tt,it,xr,Xt),xr++,Xt--;it[2*xr+wr]<Jr;)xr++;for(;it[2*Xt+wr]>Jr;)Xt--}it[2*at+wr]===Jr?qe(tt,it,at,Xt):qe(tt,it,++Xt,Jt),Xt<=Vt&&(at=Xt+1),Vt<=Xt&&(Jt=Xt-1)}})(Ue,Ze,Me,Ve,gt,ht%2),ge(Ue,Ze,Pe,Ve,Me-1,ht+1),ge(Ue,Ze,Pe,Me+1,gt,ht+1)}})(ce,V,H,0,ce.length-1,0)};Ae.prototype.range=function(z,R,B,H){return function(K,ae,ce,V,J,ge,Ue){for(var Ze,Pe,Ve=[0,K.length-1,0],gt=[];Ve.length;){var ht=Ve.pop(),Me=Ve.pop(),lt=Ve.pop();if(Me-lt<=Ue)for(var tt=lt;tt<=Me;tt++)Pe=ae[2*tt+1],(Ze=ae[2*tt])>=ce&&Ze<=J&&Pe>=V&&Pe<=ge&&gt.push(K[tt]);else{var it=Math.floor((lt+Me)/2);Pe=ae[2*it+1],(Ze=ae[2*it])>=ce&&Ze<=J&&Pe>=V&&Pe<=ge&&gt.push(K[it]);var Vt=(ht+1)%2;(ht===0?ce<=Ze:V<=Pe)&&(Ve.push(lt),Ve.push(it-1),Ve.push(Vt)),(ht===0?J>=Ze:ge>=Pe)&&(Ve.push(it+1),Ve.push(Me),Ve.push(Vt))}}return gt}(this.ids,this.coords,z,R,B,H,this.nodeSize)},Ae.prototype.within=function(z,R,B){return function(H,K,ae,ce,V,J){for(var ge=[0,H.length-1,0],Ue=[],Ze=V*V;ge.length;){var Pe=ge.pop(),Ve=ge.pop(),gt=ge.pop();if(Ve-gt<=J)for(var ht=gt;ht<=Ve;ht++)Te(K[2*ht],K[2*ht+1],ae,ce)<=Ze&&Ue.push(H[ht]);else{var Me=Math.floor((gt+Ve)/2),lt=K[2*Me],tt=K[2*Me+1];Te(lt,tt,ae,ce)<=Ze&&Ue.push(H[Me]);var it=(Pe+1)%2;(Pe===0?ae-V<=lt:ce-V<=tt)&&(ge.push(gt),ge.push(Me-1),ge.push(it)),(Pe===0?ae+V>=lt:ce+V>=tt)&&(ge.push(Me+1),ge.push(Ve),ge.push(it))}}return Ue}(this.ids,this.coords,z,R,B,this.nodeSize)};var Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(z){return z}},He=function(z){this.options=Mr(Object.create(Ye),z),this.trees=new Array(this.options.maxZoom+1)};function ct(z,R,B,H,K){return{x:z,y:R,zoom:1/0,id:B,parentId:-1,numPoints:H,properties:K}}function nt(z,R){var B=z.geometry.coordinates,H=B[1];return{x:qt(B[0]),y:dt(H),zoom:1/0,index:R,parentId:-1}}function It(z){return{type:"Feature",id:z.id,properties:jt(z),geometry:{type:"Point",coordinates:[(H=z.x,360*(H-.5)),(R=z.y,B=(180-360*R)*Math.PI/180,360*Math.atan(Math.exp(B))/Math.PI-90)]}};var R,B,H}function jt(z){var R=z.numPoints,B=R>=1e4?Math.round(R/1e3)+"k":R>=1e3?Math.round(R/100)/10+"k":R;return Mr(Mr({},z.properties),{cluster:!0,cluster_id:z.id,point_count:R,point_count_abbreviated:B})}function qt(z){return z/360+.5}function dt(z){var R=Math.sin(z*Math.PI/180),B=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return B<0?0:B>1?1:B}function Mr(z,R){for(var B in R)z[B]=R[B];return z}function zr(z){return z.x}function pn(z){return z.y}function Pi(z,R,B,H,K,ae){var ce=K-B,V=ae-H;if(ce!==0||V!==0){var J=((z-B)*ce+(R-H)*V)/(ce*ce+V*V);J>1?(B=K,H=ae):J>0&&(B+=ce*J,H+=V*J)}return(ce=z-B)*ce+(V=R-H)*V}function Rn(z,R,B,H){var K={id:z===void 0?null:z,type:R,geometry:B,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var ce=ae.geometry,V=ae.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")ur(ae,ce);else if(V==="Polygon"||V==="MultiLineString")for(var J=0;J<ce.length;J++)ur(ae,ce[J]);else if(V==="MultiPolygon")for(J=0;J<ce.length;J++)for(var ge=0;ge<ce[J].length;ge++)ur(ae,ce[J][ge])}(K),K}function ur(z,R){for(var B=0;B<R.length;B+=3)z.minX=Math.min(z.minX,R[B]),z.minY=Math.min(z.minY,R[B+1]),z.maxX=Math.max(z.maxX,R[B]),z.maxY=Math.max(z.maxY,R[B+1])}function nr(z,R,B,H){if(R.geometry){var K=R.geometry.coordinates,ae=R.geometry.type,ce=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),V=[],J=R.id;if(B.promoteId?J=R.properties[B.promoteId]:B.generateId&&(J=H||0),ae==="Point")vn(K,V);else if(ae==="MultiPoint")for(var ge=0;ge<K.length;ge++)vn(K[ge],V);else if(ae==="LineString")jn(K,V,ce,!1);else if(ae==="MultiLineString"){if(B.lineMetrics){for(ge=0;ge<K.length;ge++)jn(K[ge],V=[],ce,!1),z.push(Rn(J,"LineString",V,R.properties));return}_n(K,V,ce,!1)}else if(ae==="Polygon")_n(K,V,ce,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ge=0;ge<R.geometry.geometries.length;ge++)nr(z,{id:J,geometry:R.geometry.geometries[ge],properties:R.properties},B,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ge=0;ge<K.length;ge++){var Ue=[];_n(K[ge],Ue,ce,!0),V.push(Ue)}}z.push(Rn(J,ae,V,R.properties))}}function vn(z,R){R.push(ai(z[0])),R.push(_o(z[1])),R.push(0)}function jn(z,R,B,H){for(var K,ae,ce=0,V=0;V<z.length;V++){var J=ai(z[V][0]),ge=_o(z[V][1]);R.push(J),R.push(ge),R.push(0),V>0&&(ce+=H?(K*ge-J*ae)/2:Math.sqrt(Math.pow(J-K,2)+Math.pow(ge-ae,2))),K=J,ae=ge}var Ue=R.length-3;R[2]=1,function Ze(Pe,Ve,gt,ht){for(var Me,lt=ht,tt=gt-Ve>>1,it=gt-Ve,Vt=Pe[Ve],at=Pe[Ve+1],Jt=Pe[gt],wr=Pe[gt+1],Gt=Ve+3;Gt<gt;Gt+=3){var cr=Pi(Pe[Gt],Pe[Gt+1],Vt,at,Jt,wr);if(cr>lt)Me=Gt,lt=cr;else if(cr===lt){var Qt=Math.abs(Gt-tt);Qt<it&&(Me=Gt,it=Qt)}}lt>ht&&(Me-Ve>3&&Ze(Pe,Ve,Me,ht),Pe[Me+2]=lt,gt-Me>3&&Ze(Pe,Me,gt,ht))}(R,0,Ue,B),R[Ue+2]=1,R.size=Math.abs(ce),R.start=0,R.end=R.size}function _n(z,R,B,H){for(var K=0;K<z.length;K++){var ae=[];jn(z[K],ae,B,H),R.push(ae)}}function ai(z){return z/360+.5}function _o(z){var R=Math.sin(z*Math.PI/180),B=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return B<0?0:B>1?1:B}function mi(z,R,B,H,K,ae,ce,V){if(H/=R,ae>=(B/=R)&&ce<H)return z;if(ce<B||ae>=H)return null;for(var J=[],ge=0;ge<z.length;ge++){var Ue=z[ge],Ze=Ue.geometry,Pe=Ue.type,Ve=K===0?Ue.minX:Ue.minY,gt=K===0?Ue.maxX:Ue.maxY;if(Ve>=B&&gt<H)J.push(Ue);else if(!(gt<B||Ve>=H)){var ht=[];if(Pe==="Point"||Pe==="MultiPoint")Ql(Ze,ht,B,H,K);else if(Pe==="LineString")eu(Ze,ht,B,H,K,!1,V.lineMetrics);else if(Pe==="MultiLineString")$s(Ze,ht,B,H,K,!1);else if(Pe==="Polygon")$s(Ze,ht,B,H,K,!0);else if(Pe==="MultiPolygon")for(var Me=0;Me<Ze.length;Me++){var lt=[];$s(Ze[Me],lt,B,H,K,!0),lt.length&&ht.push(lt)}if(ht.length){if(V.lineMetrics&&Pe==="LineString"){for(Me=0;Me<ht.length;Me++)J.push(Rn(Ue.id,Pe,ht[Me],Ue.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(ht.length===1?(Pe="LineString",ht=ht[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=ht.length===3?"Point":"MultiPoint"),J.push(Rn(Ue.id,Pe,ht,Ue.tags))}}}return J.length?J:null}function Ql(z,R,B,H,K){for(var ae=0;ae<z.length;ae+=3){var ce=z[ae+K];ce>=B&&ce<=H&&(R.push(z[ae]),R.push(z[ae+1]),R.push(z[ae+2]))}}function eu(z,R,B,H,K,ae,ce){for(var V,J,ge=Gs(z),Ue=K===0?tu:os,Ze=z.start,Pe=0;Pe<z.length-3;Pe+=3){var Ve=z[Pe],gt=z[Pe+1],ht=z[Pe+2],Me=z[Pe+3],lt=z[Pe+4],tt=K===0?Ve:gt,it=K===0?Me:lt,Vt=!1;ce&&(V=Math.sqrt(Math.pow(Ve-Me,2)+Math.pow(gt-lt,2))),tt<B?it>B&&(J=Ue(ge,Ve,gt,Me,lt,B),ce&&(ge.start=Ze+V*J)):tt>H?it<H&&(J=Ue(ge,Ve,gt,Me,lt,H),ce&&(ge.start=Ze+V*J)):is(ge,Ve,gt,ht),it<B&&tt>=B&&(J=Ue(ge,Ve,gt,Me,lt,B),Vt=!0),it>H&&tt<=H&&(J=Ue(ge,Ve,gt,Me,lt,H),Vt=!0),!ae&&Vt&&(ce&&(ge.end=Ze+V*J),R.push(ge),ge=Gs(z)),ce&&(Ze+=V)}var at=z.length-3;Ve=z[at],gt=z[at+1],ht=z[at+2],(tt=K===0?Ve:gt)>=B&&tt<=H&&is(ge,Ve,gt,ht),at=ge.length-3,ae&&at>=3&&(ge[at]!==ge[0]||ge[at+1]!==ge[1])&&is(ge,ge[0],ge[1],ge[2]),ge.length&&R.push(ge)}function Gs(z){var R=[];return R.size=z.size,R.start=z.start,R.end=z.end,R}function $s(z,R,B,H,K,ae){for(var ce=0;ce<z.length;ce++)eu(z[ce],R,B,H,K,ae,!1)}function is(z,R,B,H){z.push(R),z.push(B),z.push(H)}function tu(z,R,B,H,K,ae){var ce=(ae-R)/(H-R);return z.push(ae),z.push(B+(K-B)*ce),z.push(1),ce}function os(z,R,B,H,K,ae){var ce=(ae-B)/(K-B);return z.push(R+(H-R)*ce),z.push(ae),z.push(1),ce}function Ws(z,R){for(var B=[],H=0;H<z.length;H++){var K,ae=z[H],ce=ae.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")K=ba(ae.geometry,R);else if(ce==="MultiLineString"||ce==="Polygon"){K=[];for(var V=0;V<ae.geometry.length;V++)K.push(ba(ae.geometry[V],R))}else if(ce==="MultiPolygon")for(K=[],V=0;V<ae.geometry.length;V++){for(var J=[],ge=0;ge<ae.geometry[V].length;ge++)J.push(ba(ae.geometry[V][ge],R));K.push(J)}B.push(Rn(ae.id,ce,K,ae.tags))}return B}function ba(z,R){var B=[];B.size=z.size,z.start!==void 0&&(B.start=z.start,B.end=z.end);for(var H=0;H<z.length;H+=3)B.push(z[H]+R,z[H+1],z[H+2]);return B}function Ks(z,R){if(z.transformed)return z;var B,H,K,ae=1<<z.z,ce=z.x,V=z.y;for(B=0;B<z.features.length;B++){var J=z.features[B],ge=J.geometry,Ue=J.type;if(J.geometry=[],Ue===1)for(H=0;H<ge.length;H+=2)J.geometry.push(Xs(ge[H],ge[H+1],R,ae,ce,V));else for(H=0;H<ge.length;H++){var Ze=[];for(K=0;K<ge[H].length;K+=2)Ze.push(Xs(ge[H][K],ge[H][K+1],R,ae,ce,V));J.geometry.push(Ze)}}return z.transformed=!0,z}function Xs(z,R,B,H,K,ae){return[Math.round(B*(z*H-K)),Math.round(B*(R*H-ae))]}function ru(z,R,B,H,K){for(var ae=R===K.maxZoom?0:K.tolerance/((1<<R)*K.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:H,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<z.length;V++){ce.numFeatures++,nu(ce,z[V],ae,K);var J=z[V].minX,ge=z[V].minY,Ue=z[V].maxX,Ze=z[V].maxY;J<ce.minX&&(ce.minX=J),ge<ce.minY&&(ce.minY=ge),Ue>ce.maxX&&(ce.maxX=Ue),Ze>ce.maxY&&(ce.maxY=Ze)}return ce}function nu(z,R,B,H){var K=R.geometry,ae=R.type,ce=[];if(ae==="Point"||ae==="MultiPoint")for(var V=0;V<K.length;V+=3)ce.push(K[V]),ce.push(K[V+1]),z.numPoints++,z.numSimplified++;else if(ae==="LineString")wa(ce,K,z,B,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(V=0;V<K.length;V++)wa(ce,K[V],z,B,ae==="Polygon",V===0);else if(ae==="MultiPolygon")for(var J=0;J<K.length;J++){var ge=K[J];for(V=0;V<ge.length;V++)wa(ce,ge[V],z,B,!0,V===0)}if(ce.length){var Ue=R.tags||null;if(ae==="LineString"&&H.lineMetrics){for(var Ze in Ue={},R.tags)Ue[Ze]=R.tags[Ze];Ue.mapbox_clip_start=K.start/K.size,Ue.mapbox_clip_end=K.end/K.size}var Pe={geometry:ce,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ue};R.id!==null&&(Pe.id=R.id),z.features.push(Pe)}}function wa(z,R,B,H,K,ae){var ce=H*H;if(H>0&&R.size<(K?ce:H))B.numPoints+=R.length/3;else{for(var V=[],J=0;J<R.length;J+=3)(H===0||R[J+2]>ce)&&(B.numSimplified++,V.push(R[J]),V.push(R[J+1])),B.numPoints++;K&&function(ge,Ue){for(var Ze=0,Pe=0,Ve=ge.length,gt=Ve-2;Pe<Ve;gt=Pe,Pe+=2)Ze+=(ge[Pe]-ge[gt])*(ge[Pe+1]+ge[gt+1]);if(Ze>0===Ue)for(Pe=0,Ve=ge.length;Pe<Ve/2;Pe+=2){var ht=ge[Pe],Me=ge[Pe+1];ge[Pe]=ge[Ve-2-Pe],ge[Pe+1]=ge[Ve-1-Pe],ge[Ve-2-Pe]=ht,ge[Ve-1-Pe]=Me}}(V,ae),z.push(V)}}function Ro(z,R){var B=(R=this.options=function(K,ae){for(var ce in ae)K[ce]=ae[ce];return K}(Object.create(this.options),R)).debug;if(B&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(K,ae){var ce=[];if(K.type==="FeatureCollection")for(var V=0;V<K.features.length;V++)nr(ce,K.features[V],ae,V);else nr(ce,K.type==="Feature"?K:{geometry:K},ae);return ce}(z,R);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(H=function(K,ae){var ce=ae.buffer/ae.extent,V=K,J=mi(K,1,-1-ce,ce,0,-1,2,ae),ge=mi(K,1,1-ce,2+ce,0,-1,2,ae);return(J||ge)&&(V=mi(K,1,-ce,1+ce,0,-1,2,ae)||[],J&&(V=Ws(J,1).concat(V)),ge&&(V=V.concat(Ws(ge,-1)))),V}(H,R)).length&&this.splitTile(H,0,0,0),B&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Oo(z,R,B){return 32*((1<<z)*B+R)+z}function as(z,R){var B=z.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);var H=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!H)return R(null,null);var K=new Kr(H.features),ae=nn(K);ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),R(null,{vectorTile:K,rawData:ae.buffer})}He.prototype.load=function(z){var R=this.options,B=R.log,H=R.minZoom,K=R.maxZoom,ae=R.nodeSize;B&&console.time("total time");var ce="prepare "+z.length+" points";B&&console.time(ce),this.points=z;for(var V=[],J=0;J<z.length;J++)z[J].geometry&&V.push(nt(z[J],J));this.trees[K+1]=new Ae(V,zr,pn,ae,Float32Array),B&&console.timeEnd(ce);for(var ge=K;ge>=H;ge--){var Ue=+Date.now();V=this._cluster(V,ge),this.trees[ge]=new Ae(V,zr,pn,ae,Float32Array),B&&console.log("z%d: %d clusters in %dms",ge,V.length,+Date.now()-Ue)}return B&&console.timeEnd("total time"),this},He.prototype.getClusters=function(z,R){var B=((z[0]+180)%360+360)%360-180,H=Math.max(-90,Math.min(90,z[1])),K=z[2]===180?180:((z[2]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)B=-180,K=180;else if(B>K){var ce=this.getClusters([B,H,180,ae],R),V=this.getClusters([-180,H,K,ae],R);return ce.concat(V)}for(var J=this.trees[this._limitZoom(R)],ge=[],Ue=0,Ze=J.range(qt(B),dt(ae),qt(K),dt(H));Ue<Ze.length;Ue+=1){var Pe=J.points[Ze[Ue]];ge.push(Pe.numPoints?It(Pe):this.points[Pe.index])}return ge},He.prototype.getChildren=function(z){var R=this._getOriginId(z),B=this._getOriginZoom(z),H="No cluster with the specified id.",K=this.trees[B];if(!K)throw new Error(H);var ae=K.points[R];if(!ae)throw new Error(H);for(var ce=this.options.radius/(this.options.extent*Math.pow(2,B-1)),V=[],J=0,ge=K.within(ae.x,ae.y,ce);J<ge.length;J+=1){var Ue=K.points[ge[J]];Ue.parentId===z&&V.push(Ue.numPoints?It(Ue):this.points[Ue.index])}if(V.length===0)throw new Error(H);return V},He.prototype.getLeaves=function(z,R,B){var H=[];return this._appendLeaves(H,z,R=R||10,B=B||0,0),H},He.prototype.getTile=function(z,R,B){var H=this.trees[this._limitZoom(z)],K=Math.pow(2,z),ae=this.options,ce=ae.radius/ae.extent,V=(B-ce)/K,J=(B+1+ce)/K,ge={features:[]};return this._addTileFeatures(H.range((R-ce)/K,V,(R+1+ce)/K,J),H.points,R,B,K,ge),R===0&&this._addTileFeatures(H.range(1-ce/K,V,1,J),H.points,K,B,K,ge),R===K-1&&this._addTileFeatures(H.range(0,V,ce/K,J),H.points,-1,B,K,ge),ge.features.length?ge:null},He.prototype.getClusterExpansionZoom=function(z){for(var R=this._getOriginZoom(z)-1;R<=this.options.maxZoom;){var B=this.getChildren(z);if(R++,B.length!==1)break;z=B[0].properties.cluster_id}return R},He.prototype._appendLeaves=function(z,R,B,H,K){for(var ae=0,ce=this.getChildren(R);ae<ce.length;ae+=1){var V=ce[ae],J=V.properties;if(J&&J.cluster?K+J.point_count<=H?K+=J.point_count:K=this._appendLeaves(z,J.cluster_id,B,H,K):K<H?K++:z.push(V),z.length===B)break}return K},He.prototype._addTileFeatures=function(z,R,B,H,K,ae){for(var ce=0,V=z;ce<V.length;ce+=1){var J=R[V[ce]],ge=J.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(J.x*K-B)),Math.round(this.options.extent*(J.y*K-H))]],tags:ge?jt(J):this.points[J.index].properties},Ze=void 0;ge?Ze=J.id:this.options.generateId?Ze=J.index:this.points[J.index].id&&(Ze=this.points[J.index].id),Ze!==void 0&&(Ue.id=Ze),ae.features.push(Ue)}},He.prototype._limitZoom=function(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))},He.prototype._cluster=function(z,R){for(var B=[],H=this.options,K=H.reduce,ae=H.minPoints,ce=H.radius/(H.extent*Math.pow(2,R)),V=0;V<z.length;V++){var J=z[V];if(!(J.zoom<=R)){J.zoom=R;for(var ge=this.trees[R+1],Ue=ge.within(J.x,J.y,ce),Ze=J.numPoints||1,Pe=Ze,Ve=0,gt=Ue;Ve<gt.length;Ve+=1){var ht=ge.points[gt[Ve]];ht.zoom>R&&(Pe+=ht.numPoints||1)}if(Pe>=ae){for(var Me=J.x*Ze,lt=J.y*Ze,tt=K&&Ze>1?this._map(J,!0):null,it=(V<<5)+(R+1)+this.points.length,Vt=0,at=Ue;Vt<at.length;Vt+=1){var Jt=ge.points[at[Vt]];if(!(Jt.zoom<=R)){Jt.zoom=R;var wr=Jt.numPoints||1;Me+=Jt.x*wr,lt+=Jt.y*wr,Jt.parentId=it,K&&(tt||(tt=this._map(J,!0)),K(tt,this._map(Jt)))}}J.parentId=it,B.push(ct(Me/Pe,lt/Pe,it,Pe,tt))}else if(B.push(J),Pe>1)for(var Gt=0,cr=Ue;Gt<cr.length;Gt+=1){var Qt=ge.points[cr[Gt]];Qt.zoom<=R||(Qt.zoom=R,B.push(Qt))}}}return B},He.prototype._getOriginId=function(z){return z-this.points.length>>5},He.prototype._getOriginZoom=function(z){return(z-this.points.length)%32},He.prototype._map=function(z,R){if(z.numPoints)return R?Mr({},z.properties):z.properties;var B=this.points[z.index].properties,H=this.options.map(B);return R&&H===B?Mr({},H):H},Ro.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ro.prototype.splitTile=function(z,R,B,H,K,ae,ce){for(var V=[z,R,B,H],J=this.options,ge=J.debug;V.length;){H=V.pop(),B=V.pop(),R=V.pop(),z=V.pop();var Ue=1<<R,Ze=Oo(R,B,H),Pe=this.tiles[Ze];if(!Pe&&(ge>1&&console.time("creation"),Pe=this.tiles[Ze]=ru(z,R,B,H,J),this.tileCoords.push({z:R,x:B,y:H}),ge)){ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,B,H,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var Ve="z"+R;this.stats[Ve]=(this.stats[Ve]||0)+1,this.total++}if(Pe.source=z,K){if(R===J.maxZoom||R===K)continue;var gt=1<<K-R;if(B!==Math.floor(ae/gt)||H!==Math.floor(ce/gt))continue}else if(R===J.indexMaxZoom||Pe.numPoints<=J.indexMaxPoints)continue;if(Pe.source=null,z.length!==0){ge>1&&console.time("clipping");var ht,Me,lt,tt,it,Vt,at=.5*J.buffer/J.extent,Jt=.5-at,wr=.5+at,Gt=1+at;ht=Me=lt=tt=null,it=mi(z,Ue,B-at,B+wr,0,Pe.minX,Pe.maxX,J),Vt=mi(z,Ue,B+Jt,B+Gt,0,Pe.minX,Pe.maxX,J),z=null,it&&(ht=mi(it,Ue,H-at,H+wr,1,Pe.minY,Pe.maxY,J),Me=mi(it,Ue,H+Jt,H+Gt,1,Pe.minY,Pe.maxY,J),it=null),Vt&&(lt=mi(Vt,Ue,H-at,H+wr,1,Pe.minY,Pe.maxY,J),tt=mi(Vt,Ue,H+Jt,H+Gt,1,Pe.minY,Pe.maxY,J),Vt=null),ge>1&&console.timeEnd("clipping"),V.push(ht||[],R+1,2*B,2*H),V.push(Me||[],R+1,2*B,2*H+1),V.push(lt||[],R+1,2*B+1,2*H),V.push(tt||[],R+1,2*B+1,2*H+1)}}},Ro.prototype.getTile=function(z,R,B){var H=this.options,K=H.extent,ae=H.debug;if(z<0||z>24)return null;var ce=1<<z,V=Oo(z,R=(R%ce+ce)%ce,B);if(this.tiles[V])return Ks(this.tiles[V],K);ae>1&&console.log("drilling down to z%d-%d-%d",z,R,B);for(var J,ge=z,Ue=R,Ze=B;!J&&ge>0;)ge--,Ue=Math.floor(Ue/2),Ze=Math.floor(Ze/2),J=this.tiles[Oo(ge,Ue,Ze)];return J&&J.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ge,Ue,Ze),ae>1&&console.time("drilling down"),this.splitTile(J.source,ge,Ue,Ze,z,R,B),ae>1&&console.timeEnd("drilling down"),this.tiles[V]?Ks(this.tiles[V],K):null):null};var Js=function(z){function R(B,H,K,ae){z.call(this,B,H,K,as),ae&&(this.loadGeoJSON=ae)}return z&&(R.__proto__=z),(R.prototype=Object.create(z&&z.prototype)).constructor=R,R.prototype.loadData=function(B,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=H,this._pendingLoadDataParams=B,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},R.prototype._loadData=function(){var B=this;if(this._pendingCallback&&this._pendingLoadDataParams){var H=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ae=!!(K&&K.request&&K.request.collectResourceTiming)&&new f.RequestPerformance(K.request);this.loadGeoJSON(K,function(ce,V){if(ce||!V)return H(ce);if(typeof V!="object")return H(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));(function Pe(Ve,gt){var ht,Me=Ve&&Ve.type;if(Me==="FeatureCollection")for(ht=0;ht<Ve.features.length;ht++)Pe(Ve.features[ht],gt);else if(Me==="GeometryCollection")for(ht=0;ht<Ve.geometries.length;ht++)Pe(Ve.geometries[ht],gt);else if(Me==="Feature")Pe(Ve.geometry,gt);else if(Me==="Polygon")rr(Ve.coordinates,gt);else if(Me==="MultiPolygon")for(ht=0;ht<Ve.coordinates.length;ht++)rr(Ve.coordinates[ht],gt);return Ve})(V,!0);try{if(K.filter){var J=f.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));var ge=V.features.filter(function(Pe){return J.value.evaluate({zoom:0},Pe)});V={type:"FeatureCollection",features:ge}}B._geoJSONIndex=K.cluster?new He(function(Pe){var Ve=Pe.superclusterOptions,gt=Pe.clusterProperties;if(!gt||!Ve)return Ve;for(var ht={},Me={},lt={accumulated:null,zoom:0},tt={properties:null},it=Object.keys(gt),Vt=0,at=it;Vt<at.length;Vt+=1){var Jt=at[Vt],wr=gt[Jt],Gt=wr[0],cr=f.createExpression(wr[1]),Qt=f.createExpression(typeof Gt=="string"?[Gt,["accumulated"],["get",Jt]]:Gt);ht[Jt]=cr.value,Me[Jt]=Qt.value}return Ve.map=function(Kn){tt.properties=Kn;for(var fr={},Jr=0,xr=it;Jr<xr.length;Jr+=1){var Xt=xr[Jr];fr[Xt]=ht[Xt].evaluate(lt,tt)}return fr},Ve.reduce=function(Kn,fr){tt.properties=fr;for(var Jr=0,xr=it;Jr<xr.length;Jr+=1){var Xt=xr[Jr];lt.accumulated=Kn[Xt],Kn[Xt]=Me[Xt].evaluate(lt,tt)}},Ve}(K)).load(V.features):function(Pe,Ve){return new Ro(Pe,Ve)}(V,K.geojsonVtOptions)}catch(Pe){return H(Pe)}B.loaded={};var Ue={};if(ae){var Ze=ae.finish();Ze&&(Ue.resourceTiming={},Ue.resourceTiming[K.source]=JSON.parse(JSON.stringify(Ze)))}H(null,Ue)})}},R.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},R.prototype.reloadTile=function(B,H){var K=this.loaded;return K&&K[B.uid]?z.prototype.reloadTile.call(this,B,H):this.loadTile(B,H)},R.prototype.loadGeoJSON=function(B,H){if(B.request)f.getJSON(B.request,H);else{if(typeof B.data!="string")return H(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."));try{return H(null,JSON.parse(B.data))}catch{return H(new Error("Input data given to '"+B.source+"' is not a valid GeoJSON object."))}}},R.prototype.removeSource=function(B,H){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),H()},R.prototype.getClusterExpansionZoom=function(B,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(K){H(K)}},R.prototype.getClusterChildren=function(B,H){try{H(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(K){H(K)}},R.prototype.getClusterLeaves=function(B,H){try{H(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(K){H(K)}},R}(et),Xr=function(z){var R=this;this.self=z,this.actor=new f.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:et,geojson:Js},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(B,H){if(R.workerSourceTypes[B])throw new Error('Worker source with name "'+B+'" already registered.');R.workerSourceTypes[B]=H},this.self.registerRTLTextPlugin=function(B){if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=B.applyArabicShaping,f.plugin.processBidirectionalText=B.processBidirectionalText,f.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}};return Xr.prototype.setReferrer=function(z,R){this.referrer=R},Xr.prototype.setImages=function(z,R,B){for(var H in this.availableImages[z]=R,this.workerSources[z]){var K=this.workerSources[z][H];for(var ae in K)K[ae].availableImages=R}B()},Xr.prototype.setLayers=function(z,R,B){this.getLayerIndex(z).replace(R),B()},Xr.prototype.updateLayers=function(z,R,B){this.getLayerIndex(z).update(R.layers,R.removedIds),B()},Xr.prototype.loadTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).loadTile(R,B)},Xr.prototype.loadDEMTile=function(z,R,B){this.getDEMWorkerSource(z,R.source).loadTile(R,B)},Xr.prototype.reloadTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).reloadTile(R,B)},Xr.prototype.abortTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).abortTile(R,B)},Xr.prototype.removeTile=function(z,R,B){this.getWorkerSource(z,R.type,R.source).removeTile(R,B)},Xr.prototype.removeDEMTile=function(z,R){this.getDEMWorkerSource(z,R.source).removeTile(R)},Xr.prototype.removeSource=function(z,R,B){if(this.workerSources[z]&&this.workerSources[z][R.type]&&this.workerSources[z][R.type][R.source]){var H=this.workerSources[z][R.type][R.source];delete this.workerSources[z][R.type][R.source],H.removeSource!==void 0?H.removeSource(R,B):B()}},Xr.prototype.loadWorkerSource=function(z,R,B){try{this.self.importScripts(R.url),B()}catch(H){B(H.toString())}},Xr.prototype.syncRTLPluginState=function(z,R,B){try{f.plugin.setState(R);var H=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&H!=null){this.self.importScripts(H);var K=f.plugin.isParsed();B(K?void 0:new Error("RTL Text Plugin failed to import scripts from "+H),K)}}catch(ae){B(ae.toString())}},Xr.prototype.getAvailableImages=function(z){var R=this.availableImages[z];return R||(R=[]),R},Xr.prototype.getLayerIndex=function(z){var R=this.layerIndexes[z];return R||(R=this.layerIndexes[z]=new Fe),R},Xr.prototype.getWorkerSource=function(z,R,B){var H=this;return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][R]||(this.workerSources[z][R]={}),this.workerSources[z][R][B]||(this.workerSources[z][R][B]=new this.workerSourceTypes[R]({send:function(K,ae,ce){H.actor.send(K,ae,ce,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][R][B]},Xr.prototype.getDEMWorkerSource=function(z,R){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][R]||(this.demWorkerSources[z][R]=new Rt),this.demWorkerSources[z][R]},Xr.prototype.enforceCacheSizeLimit=function(z,R){f.enforceCacheSizeLimit(R)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Xr(self)),Xr}),Oe(["./shared"],function(f){var ke=f.createCommonjsModule(function(o){function s(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,I=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(I);try{S=new Worker(L),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(L),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var I=S.getImageData(0,0,1,1);return I&&I.width===b.width}()?(c[_=g&&g.failIfMajorPerformanceCaveat]===void 0&&(c[_]=function(b){var S=function(L){var U=document.createElement("canvas"),j=Object.create(s.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=L,U.probablySupportsContext?U.probablySupportsContext("webgl",j)||U.probablySupportsContext("experimental-webgl",j):U.supportsContext?U.supportsContext("webgl",j)||U.supportsContext("experimental-webgl",j):U.getContext("webgl",j)||U.getContext("experimental-webgl",j)}(b);if(!S)return!1;var I=S.createShader(S.VERTEX_SHADER);return!(!I||S.isContextLost())&&(S.shaderSource(I,"void main() {}"),S.compileShader(I),S.getShaderParameter(I,S.COMPILE_STATUS)===!0)}(_)),c[_]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Y={create:function(o,s,a){var c=f.window.document.createElement(o);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(o,s){return f.window.document.createElementNS(o,s)}},Fe=f.window.document&&f.window.document.documentElement.style;function ze(o){if(!Fe)return o[0];for(var s=0;s<o.length;s++)if(o[s]in Fe)return o[s];return o[0]}var Xe,xe=ze(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Y.disableDrag=function(){Fe&&xe&&(Xe=Fe[xe],Fe[xe]="none")},Y.enableDrag=function(){Fe&&xe&&(Fe[xe]=Xe)};var mt=ze(["transform","WebkitTransform"]);Y.setTransform=function(o,s){o.style[mt]=s};var et=!1;try{var Wt=Object.defineProperty({},"passive",{get:function(){et=!0}});f.window.addEventListener("test",Wt,Wt),f.window.removeEventListener("test",Wt,Wt)}catch{et=!1}Y.addEventListener=function(o,s,a,c){c===void 0&&(c={}),o.addEventListener(s,a,"passive"in c&&et?c:c.capture)},Y.removeEventListener=function(o,s,a,c){c===void 0&&(c={}),o.removeEventListener(s,a,"passive"in c&&et?c:c.capture)};var Rt=function(o){o.preventDefault(),o.stopPropagation(),f.window.removeEventListener("click",Rt,!0)};function rr(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}Y.suppressClick=function(){f.window.addEventListener("click",Rt,!0),f.window.setTimeout(function(){f.window.removeEventListener("click",Rt,!0)},0)},Y.mousePos=function(o,s){var a=o.getBoundingClientRect();return new f.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},Y.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),c=[],g=0;g<s.length;g++)c.push(new f.Point(s[g].clientX-a.left-o.clientLeft,s[g].clientY-a.top-o.clientTop));return c},Y.mouseButton=function(o){return f.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},Y.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var Ot=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,g=this.requestors;c<g.length;c+=1){var _=g[c];this._notify(_.ids,_.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),g=!1),this._validateContent(c.content,c)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),g=!1),g},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var g=0,_=0,b=a;_<b.length;_+=1){var S=b[_];if(S[0]<g||S[1]<S[0]||c<S[1])return!1;g=S[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var g=!0;if(!this.isLoaded())for(var _=0,b=a;_<b.length;_+=1)this.images[b[_]]||(g=!1);this.isLoaded()||g?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var g={},_=0,b=a;_<b.length;_+=1){var S=b[_];this.images[S]||this.fire(new f.Event("styleimagemissing",{id:S}));var I=this.images[S];I?g[S]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:f.warnOnce('Image "'+S+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,g)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],g=this.getImage(a);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{var _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new f.ImagePosition(_,g);this.patterns[a]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var g=f.potpack(a),_=g.w,b=g.h,S=this.atlasImage;for(var I in S.resize({width:_||1,height:b||1}),this.patterns){var L=this.patterns[I].bin,U=L.x+1,j=L.y+1,q=this.images[I].data,X=q.width,W=q.height;f.RGBAImage.copy(q,S,{x:0,y:0},{x:U,y:j},{width:X,height:W}),f.RGBAImage.copy(q,S,{x:0,y:W-1},{x:U,y:j-1},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:U,y:j+W},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:X-1,y:0},{x:U-1,y:j},{width:1,height:W}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:U+X,y:j},{width:1,height:W})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,g=a;c<g.length;c+=1){var _=g[c];if(!this.callbackDispatchedThisFrame[_]){this.callbackDispatchedThisFrame[_]=!0;var b=this.images[_];rr(b)&&this.updateImage(_,b)}}},s}(f.Evented),gn=yn,di=yn,Kr=1e20;function yn(o,s,a,c,g,_){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=g||"sans-serif",this.fontWeight=_||"normal",this.radius=a||8;var b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=b,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.d=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Int16Array(b),this.middle=Math.round(b/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ki(o,s,a,c,g,_,b){for(var S=0;S<s;S++){for(var I=0;I<a;I++)c[I]=o[I*s+S];for(Fi(c,g,_,b,a),I=0;I<a;I++)o[I*s+S]=g[I]}for(I=0;I<a;I++){for(S=0;S<s;S++)c[S]=o[I*s+S];for(Fi(c,g,_,b,s),S=0;S<s;S++)o[I*s+S]=Math.sqrt(g[S])}}function Fi(o,s,a,c,g){a[0]=0,c[0]=-Kr,c[1]=+Kr;for(var _=1,b=0;_<g;_++){for(var S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);S<=c[b];)b--,S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);a[++b]=_,c[b]=S,c[b+1]=+Kr}for(_=0,b=0;_<g;_++){for(;c[b+1]<_;)b++;s[_]=(_-a[b])*(_-a[b])+o[a[b]]}}yn.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var g=s.data[4*c+3]/255;this.gridOuter[c]=g===1?0:g===0?Kr:Math.pow(Math.max(0,.5-g),2),this.gridInner[c]=g===1?Kr:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(ki(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ki(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},gn.default=di;var un=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};un.prototype.setURL=function(o){this.url=o},un.prototype.getGlyphs=function(o,s){var a=this,c=[];for(var g in o)for(var _=0,b=o[g];_<b.length;_+=1)c.push({stack:g,id:b[_]});f.asyncAll(c,function(S,I){var L=S.stack,U=S.id,j=a.entries[L];j||(j=a.entries[L]={glyphs:{},requests:{},ranges:{}});var q=j.glyphs[U];if(q===void 0){if(q=a._tinySDF(j,L,U))return j.glyphs[U]=q,void I(null,{stack:L,id:U,glyph:q});var X=Math.floor(U/256);if(256*X>65535)I(new Error("glyphs > 65535 not supported"));else if(j.ranges[X])I(null,{stack:L,id:U,glyph:q});else{var W=j.requests[X];W||(W=j.requests[X]=[],un.loadGlyphRange(L,X,a.url,a.requestManager,function(re,Z){if(Z){for(var te in Z)a._doesCharSupportLocalGlyph(+te)||(j.glyphs[+te]=Z[+te]);j.ranges[X]=!0}for(var le=0,me=W;le<me.length;le+=1)(0,me[le])(re,Z);delete j.requests[X]})),W.push(function(re,Z){re?I(re):Z&&I(null,{stack:L,id:U,glyph:Z[U]||null})})}}else I(null,{stack:L,id:U,glyph:q})},function(S,I){if(S)s(S);else if(I){for(var L={},U=0,j=I;U<j.length;U+=1){var q=j[U],X=q.stack,W=q.id,re=q.glyph;(L[X]||(L[X]={}))[W]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics}}s(null,L)}})},un.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(f.isChar["CJK Unified Ideographs"](o)||f.isChar["Hangul Syllables"](o)||f.isChar.Hiragana(o)||f.isChar.Katakana(o))},un.prototype._tinySDF=function(o,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var g=o.tinySDF;if(!g){var _="400";/bold/i.test(s)?_="900":/medium/i.test(s)?_="500":/light/i.test(s)&&(_="200"),g=o.tinySDF=new un.TinySDF(24,3,8,.25,c,_)}return{id:a,bitmap:new f.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},un.loadGlyphRange=function(o,s,a,c,g){var _=256*s,b=_+255,S=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",_+"-"+b),f.ResourceType.Glyphs);f.getArrayBuffer(S,function(I,L){if(I)g(I);else if(L){for(var U={},j=0,q=f.parseGlyphPBF(L);j<q.length;j+=1){var X=q[j];U[X.id]=X}g(null,U)}})},un.TinySDF=gn;var nn=function(){this.specification=f.styleSpec.light.position};nn.prototype.possiblyEvaluate=function(o,s){return f.sphericalToCartesian(o.expression.evaluate(s))},nn.prototype.interpolate=function(o,s,a){return{x:f.number(o.x,s.x,a),y:f.number(o.y,s.y,a),z:f.number(o.z,s.z,a)}};var Ln=new f.Properties({anchor:new f.DataConstantProperty(f.styleSpec.light.anchor),position:new nn,color:new f.DataConstantProperty(f.styleSpec.light.color),intensity:new f.DataConstantProperty(f.styleSpec.light.intensity)}),ro=function(o){function s(a){o.call(this),this._transitionable=new f.Transitionable(Ln),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(f.validateLight,a,c))for(var g in a){var _=a[g];f.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,g){return(!g||g.validate!==!1)&&f.emitValidationErrors(this,a.call(f.validateStyle,f.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:f.styleSpec})))},s}(f.Evented),mr=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};mr.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},mr.prototype.getDashRanges=function(o,s,a){var c=[],g=o.length%2==1?-o[o.length-1]*a:0,_=o[0]*a,b=!0;c.push({left:g,right:_,isDash:b,zeroLength:o[0]===0});for(var S=o[0],I=1;I<o.length;I++){var L=o[I];c.push({left:g=S*a,right:_=(S+=L)*a,isDash:b=!b,zeroLength:L===0})}return c},mr.prototype.addRoundDash=function(o,s,a){for(var c=s/2,g=-a;g<=a;g++)for(var _=this.width*(this.nextRow+a+g),b=0,S=o[b],I=0;I<this.width;I++){I/S.right>1&&(S=o[++b]);var L=Math.abs(I-S.left),U=Math.abs(I-S.right),j=Math.min(L,U),q=void 0,X=g/a*(c+1);if(S.isDash){var W=c-Math.abs(X);q=Math.sqrt(j*j+W*W)}else q=c-Math.sqrt(j*j+X*X);this.data[_+I]=Math.max(0,Math.min(255,q+128))}},mr.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],c=o[s+1];a.zeroLength?o.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,o.splice(s,1))}var g=o[0],_=o[o.length-1];g.isDash===_.isDash&&(g.left=_.left-this.width,_.right=g.right+this.width);for(var b=this.width*this.nextRow,S=0,I=o[S],L=0;L<this.width;L++){L/I.right>1&&(I=o[++S]);var U=Math.abs(L-I.left),j=Math.abs(L-I.right),q=Math.min(U,j);this.data[b+L]=Math.max(0,Math.min(255,(I.isDash?q:-q)+128))}},mr.prototype.addDash=function(o,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return f.warnOnce("LineAtlas out of space"),null;for(var g=0,_=0;_<o.length;_++)g+=o[_];if(g!==0){var b=this.width/g,S=this.getDashRanges(o,this.width,b);s?this.addRoundDash(S,b,a):this.addRegularDash(S)}var I={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:g};return this.nextRow+=c,this.dirty=!0,I},mr.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var cn=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f.uniqueId();for(var c=this.workerPool.acquire(this.id),g=0;g<c.length;g++){var _=new o.Actor(c[g],a,this.id);_.name="Worker "+g,this.actors.push(_)}};function no(o,s,a){var c=function(g,_){if(g)return a(g);if(_){var b=f.pick(f.extend(_,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(b.vectorLayers=_.vector_layers,b.vectorLayerIds=b.vectorLayers.map(function(S){return S.id})),b.tiles=s.canonicalizeTileset(b,o.url),a(null,b)}};return o.url?f.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),f.ResourceType.Source),c):f.browser.frame(function(){return c(null,o)})}cn.prototype.broadcast=function(o,s,a){f.asyncAll(this.actors,function(c,g){c.send(o,s,g)},a=a||function(){})},cn.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},cn.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},cn.Actor=f.Actor;var oe=function(o,s,a){this.bounds=f.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};oe.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},oe.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*s),g=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*s),_=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<g&&o.y>=c&&o.y<_};var de=function(o){function s(a,c,g,_){if(o.call(this),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(c,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=no(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles,a.map._requestManager._customAccessToken),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,f.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(S,I){return delete a.request,a.aborted?c(null):S&&S.status!==404?c(S):(I&&I.resourceTiming&&(a.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&a.setExpiryData(I),a.loadVectorData(I,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",_,b.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",_,b.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Be=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},c),f.extend(this,f.pick(c,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=no(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var g=this,_=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=f.getImage(this.map._requestManager.transformRequest(_,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){g.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=g.map.painter.context,L=I.gl;a.texture=g.map.painter.getTileTexture(S.width),a.texture?a.texture.update(S,{useMipmap:!0}):(a.texture=new f.Texture(I,S,L.RGBA,{useMipmap:!0}),a.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),a.state="loaded",f.cacheEntryPossiblyAdded(g.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(f.Evented),$e=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function _(b,S){b&&(a.state="errored",c(b)),S&&(a.dem=S,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=f.getImage(this.map._requestManager.transformRequest(g,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){this.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=f.window.ImageBitmap&&S instanceof f.window.ImageBitmap&&f.offscreenCanvasSupported()?S:f.browser.getImageData(S,1),L={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:I,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",L,_.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,g=Math.pow(2,c.z),_=(c.x-1+g)%g,b=c.x===0?a.wrap-1:a.wrap,S=(c.x+1+g)%g,I=c.x+1===g?a.wrap+1:a.wrap,L={};return L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<g&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y+1).key]={backfilled:!1}),L},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Be),qe=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(_),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var b=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new f.ErrorEvent(c));else{var g={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(g.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new f.Event("data",g))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)c.fire(new f.ErrorEvent(g));else{var _={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new f.Event("data",_))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,g,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:g},_),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var g=f.extend({},this.workerOptions),_=this._data;typeof _=="string"?(g.request=this.map._requestManager.transformRequest(f.browser.resolveURL(_),f.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(_),this.actor.send(this.type+".loadData",g,function(b,S){c._removed||S&&S.abandoned||(c._loaded=!0,S&&S.resourceTiming&&S.resourceTiming[c.id]&&(c._resourceTiming=S.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:g.source},null),a(b))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var g=this,_=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(_,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(b,S){return delete a.request,a.unloadVectorData(),a.aborted?c(null):b?c(b):(a.loadVectorData(S,g.map.painter,_==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return f.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Je=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Te=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,c){var g=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),function(_,b){g._loaded=!0,_?g.fire(new f.ErrorEvent(_)):b&&(g.image=b,a&&(g.coordinates=a),c&&c(),g._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var g=a.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(b){for(var S=1/0,I=1/0,L=-1/0,U=-1/0,j=0,q=b;j<q.length;j+=1){var X=q[j];S=Math.min(S,X.x),I=Math.min(I,X.y),L=Math.max(L,X.x),U=Math.max(U,X.y)}var W=Math.max(L-S,U-I),re=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),Z=Math.pow(2,re);return new f.CanonicalTileID(re,Math.floor((S+L)/2*Z),Math.floor((I+U)/2*Z))}(g),this.minzoom=this.maxzoom=this.tileID.z;var _=g.map(function(b){return c.tileID.getTilePoint(b)._round()});return this._boundsArray=new f.StructArrayLayout4i8,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Le=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.roundZoom=!0,this.type="video",this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var g=0,_=c.urls;g<_.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(_[g],f.ResourceType.Source).url);f.getVideo(this.urls,function(b,S){a._loaded=!0,b?a.fire(new f.ErrorEvent(b)):S&&(a.video=S,a.video.loop=!0,a.video.setAttribute("playsinline",""),a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Te),Re=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(b){return!Array.isArray(b)||b.length!==2||b.some(function(S){return typeof S!="number"})})||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,g=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(c,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var g=c[a];if(isNaN(g)||g<=0)return!0}return!1},s}(Te),Ae={vector:de,raster:Be,"raster-dem":$e,geojson:qe,video:Le,image:Te,canvas:Re};function Ye(o,s){var a=f.identity([]);return f.translate(a,a,[1,1,0]),f.scale(a,a,[.5*o.width,.5*o.height,1]),f.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function He(o,s,a,c,g,_){var b=function(re,Z,te){if(re)for(var le=0,me=re;le<me.length;le+=1){var Ce=Z[me[le]];if(Ce&&Ce.source===te&&Ce.type==="fill-extrusion")return!0}else for(var Ee in Z){var Ie=Z[Ee];if(Ie.source===te&&Ie.type==="fill-extrusion")return!0}return!1}(g&&g.layers,s,o.id),S=_.maxPitchScaleFactor(),I=o.tilesIn(c,S,b);I.sort(ct);for(var L=[],U=0,j=I;U<j.length;U+=1){var q=j[U];L.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,a,o._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,_,S,Ye(o.transform,q.tileID))})}var X=function(re){for(var Z={},te={},le=0,me=re;le<me.length;le+=1){var Ce=me[le],Ee=Ce.queryResults,Ie=Ce.wrappedTileID,Ne=te[Ie]=te[Ie]||{};for(var Ke in Ee)for(var We=Ee[Ke],ut=Ne[Ke]=Ne[Ke]||{},wt=Z[Ke]=Z[Ke]||[],Ct=0,Tt=We;Ct<Tt.length;Ct+=1){var ir=Tt[Ct];ut[ir.featureIndex]||(ut[ir.featureIndex]=!0,wt.push(ir))}}return Z}(L);for(var W in X)X[W].forEach(function(re){var Z=re.feature,te=o.getFeatureState(Z.layer["source-layer"],Z.id);Z.source=Z.layer.source,Z.layer["source-layer"]&&(Z.sourceLayer=Z.layer["source-layer"]),Z.state=te});return X}function ct(o,s){var a=o.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var nt=function(o,s){this.max=o,this.onRemove=s,this.reset()};nt.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},nt.prototype.add=function(o,s,a){var c=this,g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var _={value:s,timeout:void 0};if(a!==void 0&&(_.timeout=setTimeout(function(){c.remove(o,_)},a)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},nt.prototype.has=function(o){return o.wrapped().key in this.data},nt.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},nt.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},nt.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},nt.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},nt.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),g=this.data[a][c];return this.data[a].splice(c,1),g.timeout&&clearTimeout(g.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(g.value),this.order.splice(this.order.indexOf(a),1),this},nt.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},nt.prototype.filter=function(o){var s=[];for(var a in this.data)for(var c=0,g=this.data[a];c<g.length;c+=1){var _=g[c];o(_.value)||s.push(_)}for(var b=0,S=s;b<S.length;b+=1){var I=S[b];this.remove(I.value.tileID,I)}};var It=function(o,s,a){this.context=o;var c=o.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};It.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},It.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},It.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},qt=function(o,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=o;var g=o.gl;this.buffer=g.createBuffer(),o.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};qt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},qt.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},qt.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&o.enableVertexAttribArray(c)}},qt.prototype.setVertexAttribPointers=function(o,s,a){for(var c=0;c<this.attributes.length;c++){var g=this.attributes[c],_=s.attributes[g.name];_!==void 0&&o.vertexAttribPointer(_,g.components,o[jt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(a||0))}},qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dt=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};dt.prototype.get=function(){return this.current},dt.prototype.set=function(o){},dt.prototype.getDefault=function(){return this.default},dt.prototype.setDefault=function(){this.set(this.default)};var Mr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),zr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(dt),pn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(dt),Pi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),Rn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(dt),ur=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(dt),nr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(dt),vn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(dt),jn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(dt),_n=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),ai=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(dt),_o=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(dt),mi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(dt),Ql=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),eu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),Gs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(dt),$s=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(dt),is=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(dt),tu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(dt),os=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(dt),Ws=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(dt),ba=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),Ks=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),Xs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),ru=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(dt),nu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(dt),wa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(dt),Ro=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(dt),Oo=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(dt),as=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Js=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Xr=function(o){function s(a,c){o.call(this,a),this.context=a,this.parent=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(dt),z=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Xr),R=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Xr),B=function(o,s,a,c){this.context=o,this.width=s,this.height=a;var g=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new z(o,g),c&&(this.depthAttachment=new R(o,g))};B.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var H=function(o,s,a){this.func=o,this.mask=s,this.range=a};H.ReadOnly=!1,H.ReadWrite=!0,H.disabled=new H(519,H.ReadOnly,[0,1]);var K=function(o,s,a,c,g,_){this.test=o,this.ref=s,this.mask=a,this.fail=c,this.depthFail=g,this.pass=_};K.disabled=new K({func:519,mask:0},0,0,7680,7680,7680);var ae=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};ae.disabled=new ae(ae.Replace=[1,0],f.Color.transparent,[!1,!1,!1,!1]),ae.unblended=new ae(ae.Replace,f.Color.transparent,[!0,!0,!0,!0]),ae.alphaBlended=new ae([1,771],f.Color.transparent,[!0,!0,!0,!0]);var ce=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};ce.disabled=new ce(!1,1029,2305),ce.backCCW=new ce(!0,1029,2305);var V=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Mr(this),this.clearDepth=new zr(this),this.clearStencil=new pn(this),this.colorMask=new Pi(this),this.depthMask=new Rn(this),this.stencilMask=new ur(this),this.stencilFunc=new nr(this),this.stencilOp=new vn(this),this.stencilTest=new jn(this),this.depthRange=new _n(this),this.depthTest=new ai(this),this.depthFunc=new _o(this),this.blend=new mi(this),this.blendFunc=new Ql(this),this.blendColor=new eu(this),this.blendEquation=new Gs(this),this.cullFace=new $s(this),this.cullFaceSide=new is(this),this.frontFace=new tu(this),this.program=new os(this),this.activeTexture=new Ws(this),this.viewport=new ba(this),this.bindFramebuffer=new Ks(this),this.bindRenderbuffer=new Xs(this),this.bindTexture=new ru(this),this.bindVertexBuffer=new nu(this),this.bindElementBuffer=new wa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ro(this),this.pixelStoreUnpack=new Oo(this),this.pixelStoreUnpackPremultiplyAlpha=new as(this),this.pixelStoreUnpackFlipY=new Js(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(o,s){return new It(this,o,s)},V.prototype.createVertexBuffer=function(o,s,a){return new qt(this,o,s,a)},V.prototype.createRenderbuffer=function(o,s,a){var c=this.gl,g=c.createRenderbuffer();return this.bindRenderbuffer.set(g),c.renderbufferStorage(c.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),g},V.prototype.createFramebuffer=function(o,s,a){return new B(this,o,s,a)},V.prototype.clear=function(o){var s=o.color,a=o.depth,c=this.gl,g=0;s&&(g|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(g|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(g)},V.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},V.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(o){f.deepEqual(o.blendFunction,ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var J=function(o){function s(a,c,g){var _=this;o.call(this),this.id=a,this.dispatcher=g,this.on("data",function(b){b.dataType==="source"&&b.sourceDataType==="metadata"&&(_._sourceLoaded=!0),_._sourceLoaded&&!_._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(_.reload(),_.transform&&_.update(_.transform))}),this.on("error",function(){_._sourceErrored=!0}),this._source=function(b,S,I,L){var U=new Ae[S.type](b,S,I,L);if(U.id!==b)throw new Error("Expected Source id to be "+b+" instead of "+U.id);return f.bindAll(["load","abort","unload","serialize","prepare"],U),U}(a,c,g,this),this._tiles={},this._cache=new nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new f.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[c];g.upload(a),g.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return f.values(this._tiles).map(function(a){return a.tileID}).sort(ge).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,g=[];for(var _ in this._tiles)this._isIdRenderable(_,a)&&g.push(this._tiles[_]);return a?g.sort(function(b,S){var I=b.tileID,L=S.tileID,U=new f.Point(I.canonical.x,I.canonical.y)._rotate(c.transform.angle),j=new f.Point(L.canonical.x,L.canonical.y)._rotate(c.transform.angle);return I.overscaledZ-L.overscaledZ||j.y-U.y||j.x-U.x}).map(function(b){return b.tileID.key}):g.map(function(b){return b.tileID}).sort(ge).map(function(b){return b.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,a,c)))},s.prototype._tileLoaded=function(a,c,g,_){if(_)return a.state="errored",void(_.status!==404?this._source.fire(new f.ErrorEvent(_,{tile:a})):this.update(this.transform));a.timeAdded=f.browser.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new f.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),g=0;g<c.length;g++){var _=c[g];if(a.neighboringTiles&&a.neighboringTiles[_]){var b=this.getTileByID(_);S(a,b),S(b,a)}}function S(I,L){I.needsHillshadePrepare=!0;var U=L.tileID.canonical.x-I.tileID.canonical.x,j=L.tileID.canonical.y-I.tileID.canonical.y,q=Math.pow(2,I.tileID.canonical.z),X=L.tileID.key;U===0&&j===0||Math.abs(j)>1||(Math.abs(U)>1&&(Math.abs(U+q)===1?U+=q:Math.abs(U-q)===1&&(U-=q)),L.dem&&I.dem&&(I.dem.backfillBorder(L.dem,U,j),I.neighboringTiles&&I.neighboringTiles[X]&&(I.neighboringTiles[X].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,g,_){for(var b in this._tiles){var S=this._tiles[b];if(!(_[b]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>g)){for(var I=S.tileID;S&&S.tileID.overscaledZ>c+1;){var L=S.tileID.scaledTo(S.tileID.overscaledZ-1);(S=this._tiles[L.key])&&S.hasData()&&(I=L)}for(var U=I;U.overscaledZ>c;)if(a[(U=U.scaledTo(U.overscaledZ-1)).key]){_[I.key]=I;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=c?g:null}for(var _=a.overscaledZ-1;_>=c;_--){var b=a.scaledTo(_),S=this._getLoadedTile(b);if(S)return S}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(c*g*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var g={};for(var _ in this._tiles){var b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),g[b.tileID.key]=b}for(var S in this._tiles=g,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new f.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(g=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ne){return c._source.hasTile(Ne)}))):g=[];var _=a.coveringZoomLevel(this._source),b=Math.max(_-s.maxOverzooming,this._source.minzoom),S=Math.max(_+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(g,_);if(Ue(this._source.type)){for(var L={},U={},j=0,q=Object.keys(I);j<q.length;j+=1){var X=q[j],W=I[X],re=this._tiles[X];if(re&&!(re.fadeEndTime&&re.fadeEndTime<=f.browser.now())){var Z=this.findLoadedParent(W,b);Z&&(this._addTile(Z.tileID),L[Z.tileID.key]=Z.tileID),U[X]=W}}for(var te in this._retainLoadedChildren(U,_,S,I),L)I[te]||(this._coveredTiles[te]=!0,I[te]=L[te])}for(var le in I)this._tiles[le].clearFadeHold();for(var me=0,Ce=f.keysDifference(this._tiles,I);me<Ce.length;me+=1){var Ee=Ce[me],Ie=this._tiles[Ee];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var g={},_={},b=Math.max(c-s.maxOverzooming,this._source.minzoom),S=Math.max(c+s.maxUnderzooming,this._source.minzoom),I={},L=0,U=a;L<U.length;L+=1){var j=U[L],q=this._addTile(j);g[j.key]=j,q.hasData()||c<this._source.maxzoom&&(I[j.key]=j)}this._retainLoadedChildren(I,c,S,g);for(var X=0,W=a;X<W.length;X+=1){var re=W[X],Z=this._tiles[re.key];if(!Z.hasData()){if(c+1>this._source.maxzoom){var te=re.children(this._source.maxzoom)[0],le=this.getTile(te);if(le&&le.hasData()){g[te.key]=te;continue}}else{var me=re.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}for(var Ce=Z.wasRequested(),Ee=re.overscaledZ-1;Ee>=b;--Ee){var Ie=re.scaledTo(Ee);if(_[Ie.key]||(_[Ie.key]=!0,!(Z=this.getTile(Ie))&&Ce&&(Z=this._addTile(Ie)),Z&&(g[Ie.key]=Ie,Ce=Z.wasRequested(),Z.hasData())))break}}}return g},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],g=void 0,_=this._tiles[a].tileID;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}c.push(_.key);var b=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(b))break;_=b}for(var S=0,I=c;S<I.length;S+=1)this._loadedParentTiles[I[S]]=g}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var g=!!c;return g||(c=new f.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,g||this._source.fire(new f.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var g=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var _=c.getExpiryTimeout();_&&(this._timers[a]=setTimeout(function(){g._reloadTile(a,"expired"),delete g._timers[a]},_))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,g){var _=this,b=[],S=this.transform;if(!S)return b;for(var I=g?S.getCameraQueryGeometry(a):a,L=a.map(function(Ee){return S.pointCoordinate(Ee)}),U=I.map(function(Ee){return S.pointCoordinate(Ee)}),j=this.getIds(),q=1/0,X=1/0,W=-1/0,re=-1/0,Z=0,te=U;Z<te.length;Z+=1){var le=te[Z];q=Math.min(q,le.x),X=Math.min(X,le.y),W=Math.max(W,le.x),re=Math.max(re,le.y)}for(var me=function(Ee){var Ie=_._tiles[j[Ee]];if(!Ie.holdingForFade()){var Ne=Ie.tileID,Ke=Math.pow(2,S.zoom-Ie.tileID.overscaledZ),We=c*Ie.queryPadding*f.EXTENT/Ie.tileSize/Ke,ut=[Ne.getTilePoint(new f.MercatorCoordinate(q,X)),Ne.getTilePoint(new f.MercatorCoordinate(W,re))];if(ut[0].x-We<f.EXTENT&&ut[0].y-We<f.EXTENT&&ut[1].x+We>=0&&ut[1].y+We>=0){var wt=L.map(function(Tt){return Ne.getTilePoint(Tt)}),Ct=U.map(function(Tt){return Ne.getTilePoint(Tt)});b.push({tile:Ie,tileID:Ne,queryGeometry:wt,cameraQueryGeometry:Ct,scale:Ke})}}},Ce=0;Ce<j.length;Ce++)me(Ce);return b},s.prototype.getVisibleCoordinates=function(a){for(var c=this,g=this.getRenderableIds(a).map(function(I){return c._tiles[I].tileID}),_=0,b=g;_<b.length;_+=1){var S=b[_];S.posMatrix=this.transform.calculatePosMatrix(S.toUnwrapped())}return g},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=f.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,g){this._state.updateState(a=a||"_geojsonTileLayer",c,g)},s.prototype.removeFeatureState=function(a,c,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,g)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,g){var _=this._tiles[a];_&&_.setDependencies(c,g)},s.prototype.reloadTilesForDependencies=function(a,c){for(var g in this._tiles)this._tiles[g].hasDependency(a,c)&&this._reloadTile(g,"reloading");this._cache.filter(function(_){return!_.hasDependency(a,c)})},s}(f.Evented);function ge(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||c-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function Ue(o){return o==="raster"||o==="image"||o==="video"}function Ze(){return new f.window.Worker(Eu.workerUrl)}J.maxOverzooming=10,J.maxUnderzooming=3;var Pe="mapboxgl_preloaded_worker_pool",Ve=function(){this.active={}};Ve.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new Ze);return this.active[o]=!0,this.workers.slice()},Ve.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ve.prototype.isPreloaded=function(){return!!this.active[Pe]},Ve.prototype.numActive=function(){return Object.keys(this.active).length};var gt,ht=Math.floor(f.browser.hardwareConcurrency/2);function Me(){return gt||(gt=new Ve),gt}function lt(o,s){var a={};for(var c in o)c!=="ref"&&(a[c]=o[c]);return f.refProperties.forEach(function(g){g in s&&(a[g]=s[g])}),a}function tt(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var c=0;c<o.length;c++)"ref"in o[c]&&(o[c]=lt(o[c],s[o[c].ref]));return o}Ve.workerCount=Math.max(Math.min(ht,6),1);var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(o,s,a){a.push({command:it.addSource,args:[o,s[o]]})}function at(o,s,a){s.push({command:it.removeSource,args:[o]}),a[o]=!0}function Jt(o,s,a,c){at(o,a,c),Vt(o,s,a)}function wr(o,s,a){var c;for(c in o[a])if(o[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;return!0}function Gt(o,s,a,c,g,_){var b;for(b in s=s||{},o=o||{})o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}));for(b in s)s.hasOwnProperty(b)&&!o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}))}function cr(o){return o.id}function Qt(o,s){return o[s.id]=s,o}var Kn=function(o,s){this.reset(o,s)};Kn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=f.clamp(o,0,1);for(var s=1,a=this._distances[s],c=o*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var g=s-1,_=this._distances[g],b=a-_,S=b>0?(c-_)/b:0;return this.points[g].mult(1-S).add(this.points[s].mult(S))};var fr=function(o,s,a){var c=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var _=0;_<this.xCellCount*this.yCellCount;_++)c.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Jr(o,s,a,c,g){var _=f.create();return s?(f.scale(_,_,[1/g,1/g,1]),a||f.rotateZ(_,_,c.angle)):f.multiply(_,c.labelPlaneMatrix,o),_}function xr(o,s,a,c,g){if(s){var _=f.clone(o);return f.scale(_,_,[g,g,1]),a||f.rotateZ(_,_,-c.angle),_}return c.glCoordMatrix}function Xt(o,s){var a=[o.x,o.y,0,1];An(a,a,s);var c=a[3];return{point:new f.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function pr(o,s){return .5+o/s*.5}function si(o,s){var a=o[0]/o[3],c=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function Ys(o,s,a,c,g,_,b,S){var I=c?o.textSizeData:o.iconSizeData,L=f.evaluateSizeForZoom(I,a.transform.zoom),U=[256/a.width*2+1,256/a.height*2+1],j=c?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;j.clear();for(var q=o.lineVertexArray,X=c?o.text.placedSymbolArray:o.icon.placedSymbolArray,W=a.transform.width/a.transform.height,re=!1,Z=0;Z<X.length;Z++){var te=X.get(Z);if(te.hidden||te.writingMode===f.WritingMode.vertical&&!re)Xn(te.numGlyphs,j);else{re=!1;var le=[te.anchorX,te.anchorY,0,1];if(f.transformMat4(le,le,s),si(le,U)){var me=pr(a.transform.cameraToCenterDistance,le[3]),Ce=f.evaluateSizeForFeature(I,L,te),Ee=b?Ce/me:Ce*me,Ie=new f.Point(te.anchorX,te.anchorY),Ne=Xt(Ie,g).point,Ke={},We=Ac(te,Ee,!1,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,Ke,W);re=We.useVertical,(We.notEnoughRoom||re||We.needsFlipping&&Ac(te,Ee,!0,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,Ke,W).notEnoughRoom)&&Xn(te.numGlyphs,j)}else Xn(te.numGlyphs,j)}}c?o.text.dynamicLayoutVertexBuffer.updateData(j):o.icon.dynamicLayoutVertexBuffer.updateData(j)}function Cn(o,s,a,c,g,_,b,S,I,L,U){var j=S.glyphStartIndex+S.numGlyphs,q=S.lineStartIndex,X=S.lineStartIndex+S.lineLength,W=s.getoffsetX(S.glyphStartIndex),re=s.getoffsetX(j-1),Z=Yr(o*W,a,c,g,_,b,S.segment,q,X,I,L,U);if(!Z)return null;var te=Yr(o*re,a,c,g,_,b,S.segment,q,X,I,L,U);return te?{first:Z,last:te}:null}function li(o,s,a,c){return o===f.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(o===f.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function Ac(o,s,a,c,g,_,b,S,I,L,U,j,q,X){var W,re=s/24,Z=o.lineOffsetX*re,te=o.lineOffsetY*re;if(o.numGlyphs>1){var le=o.glyphStartIndex+o.numGlyphs,me=o.lineStartIndex,Ce=o.lineStartIndex+o.lineLength,Ee=Cn(re,S,Z,te,a,U,j,o,I,_,q);if(!Ee)return{notEnoughRoom:!0};var Ie=Xt(Ee.first.point,b).point,Ne=Xt(Ee.last.point,b).point;if(c&&!a){var Ke=li(o.writingMode,Ie,Ne,X);if(Ke)return Ke}W=[Ee.first];for(var We=o.glyphStartIndex+1;We<le-1;We++)W.push(Yr(re*S.getoffsetX(We),Z,te,a,U,j,o.segment,me,Ce,I,_,q));W.push(Ee.last)}else{if(c&&!a){var ut=Xt(j,g).point,wt=o.lineStartIndex+o.segment+1,Ct=new f.Point(I.getx(wt),I.gety(wt)),Tt=Xt(Ct,g),ir=Tt.signedDistanceFromCamera>0?Tt.point:Qs(j,Ct,ut,1,g),pt=li(o.writingMode,ut,ir,X);if(pt)return pt}var Lt=Yr(re*S.getoffsetX(o.glyphStartIndex),Z,te,a,U,j,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,I,_,q);if(!Lt)return{notEnoughRoom:!0};W=[Lt]}for(var Nt=0,zt=W;Nt<zt.length;Nt+=1){var Mt=zt[Nt];f.addDynamicAttributes(L,Mt.point,Mt.angle)}return{}}function Qs(o,s,a,c,g){var _=Xt(o.add(o.sub(s)._unit()),g).point,b=a.sub(_);return a.add(b._mult(c/b.mag()))}function Yr(o,s,a,c,g,_,b,S,I,L,U,j){var q=c?o-s:o+s,X=q>0?1:-1,W=0;c&&(X*=-1,W=Math.PI),X<0&&(W+=Math.PI);for(var re=X>0?S+b:S+b+1,Z=g,te=g,le=0,me=0,Ce=Math.abs(q),Ee=[];le+me<=Ce;){if((re+=X)<S||re>=I)return null;if(te=Z,Ee.push(Z),(Z=j[re])===void 0){var Ie=new f.Point(L.getx(re),L.gety(re)),Ne=Xt(Ie,U);if(Ne.signedDistanceFromCamera>0)Z=j[re]=Ne.point;else{var Ke=re-X;Z=Qs(le===0?_:new f.Point(L.getx(Ke),L.gety(Ke)),Ie,te,Ce-le+1,U)}}le+=me,me=te.dist(Z)}var We=(Ce-le)/me,ut=Z.sub(te),wt=ut.mult(We)._add(te);wt._add(ut._unit()._perp()._mult(a*X));var Ct=W+Math.atan2(Z.y-te.y,Z.x-te.x);return Ee.push(wt),{point:wt,angle:Ct,path:Ee}}fr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},fr.prototype.insert=function(o,s,a,c,g){this._forEachCell(s,a,c,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(g)},fr.prototype.insertCircle=function(o,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(c)},fr.prototype._insertBoxCell=function(o,s,a,c,g,_){this.boxCells[g].push(_)},fr.prototype._insertCircleCell=function(o,s,a,c,g,_){this.circleCells[g].push(_)},fr.prototype._query=function(o,s,a,c,g,_){if(a<0||o>this.width||c<0||s>this.height)return!g&&[];var b=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=c){if(g)return!0;for(var S=0;S<this.boxKeys.length;S++)b.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(var I=0;I<this.circleKeys.length;I++){var L=this.circles[3*I],U=this.circles[3*I+1],j=this.circles[3*I+2];b.push({key:this.circleKeys[I],x1:L-j,y1:U-j,x2:L+j,y2:U+j})}return _?b.filter(_):b}return this._forEachCell(o,s,a,c,this._queryCell,b,{hitTest:g,seenUids:{box:{},circle:{}}},_),g?b.length>0:b},fr.prototype._queryCircle=function(o,s,a,c,g){var _=o-a,b=o+a,S=s-a,I=s+a;if(b<0||_>this.width||I<0||S>this.height)return!c&&[];var L=[];return this._forEachCell(_,S,b,I,this._queryCellCircle,L,{hitTest:c,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},g),c?L.length>0:L},fr.prototype.query=function(o,s,a,c,g){return this._query(o,s,a,c,!1,g)},fr.prototype.hitTest=function(o,s,a,c,g){return this._query(o,s,a,c,!0,g)},fr.prototype.hitTestCircle=function(o,s,a,c){return this._queryCircle(o,s,a,!0,c)},fr.prototype._queryCell=function(o,s,a,c,g,_,b,S){var I=b.seenUids,L=this.boxCells[g];if(L!==null)for(var U=this.bboxes,j=0,q=L;j<q.length;j+=1){var X=q[j];if(!I.box[X]){I.box[X]=!0;var W=4*X;if(o<=U[W+2]&&s<=U[W+3]&&a>=U[W+0]&&c>=U[W+1]&&(!S||S(this.boxKeys[X]))){if(b.hitTest)return _.push(!0),!0;_.push({key:this.boxKeys[X],x1:U[W],y1:U[W+1],x2:U[W+2],y2:U[W+3]})}}}var re=this.circleCells[g];if(re!==null)for(var Z=this.circles,te=0,le=re;te<le.length;te+=1){var me=le[te];if(!I.circle[me]){I.circle[me]=!0;var Ce=3*me;if(this._circleAndRectCollide(Z[Ce],Z[Ce+1],Z[Ce+2],o,s,a,c)&&(!S||S(this.circleKeys[me]))){if(b.hitTest)return _.push(!0),!0;var Ee=Z[Ce],Ie=Z[Ce+1],Ne=Z[Ce+2];_.push({key:this.circleKeys[me],x1:Ee-Ne,y1:Ie-Ne,x2:Ee+Ne,y2:Ie+Ne})}}}},fr.prototype._queryCellCircle=function(o,s,a,c,g,_,b,S){var I=b.circle,L=b.seenUids,U=this.boxCells[g];if(U!==null)for(var j=this.bboxes,q=0,X=U;q<X.length;q+=1){var W=X[q];if(!L.box[W]){L.box[W]=!0;var re=4*W;if(this._circleAndRectCollide(I.x,I.y,I.radius,j[re+0],j[re+1],j[re+2],j[re+3])&&(!S||S(this.boxKeys[W])))return _.push(!0),!0}}var Z=this.circleCells[g];if(Z!==null)for(var te=this.circles,le=0,me=Z;le<me.length;le+=1){var Ce=me[le];if(!L.circle[Ce]){L.circle[Ce]=!0;var Ee=3*Ce;if(this._circlesCollide(te[Ee],te[Ee+1],te[Ee+2],I.x,I.y,I.radius)&&(!S||S(this.circleKeys[Ce])))return _.push(!0),!0}}},fr.prototype._forEachCell=function(o,s,a,c,g,_,b,S){for(var I=this._convertToXCellCoord(o),L=this._convertToYCellCoord(s),U=this._convertToXCellCoord(a),j=this._convertToYCellCoord(c),q=I;q<=U;q++)for(var X=L;X<=j;X++)if(g.call(this,o,s,a,c,this.xCellCount*X+q,_,b,S))return},fr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},fr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},fr.prototype._circlesCollide=function(o,s,a,c,g,_){var b=c-o,S=g-s,I=a+_;return I*I>b*b+S*S},fr.prototype._circleAndRectCollide=function(o,s,a,c,g,_,b){var S=(_-c)/2,I=Math.abs(o-(c+S));if(I>S+a)return!1;var L=(b-g)/2,U=Math.abs(s-(g+L));if(U>L+a)return!1;if(I<=S||U<=L)return!0;var j=I-S,q=U-L;return j*j+q*q<=a*a};var el=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xn(o,s){for(var a=0;a<o;a++){var c=s.length;s.resize(c+4),s.float32.set(el,3*c)}}function An(o,s,a){var c=s[0],g=s[1];return o[0]=a[0]*c+a[4]*g+a[12],o[1]=a[1]*c+a[5]*g+a[13],o[3]=a[3]*c+a[7]*g+a[15],o}var Ni=function(o,s,a){s===void 0&&(s=new fr(o.width+200,o.height+200,25)),a===void 0&&(a=new fr(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Lr(o,s,a){return s*(f.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Ni.prototype.placeCollisionBox=function(o,s,a,c,g){var _=this.projectAndGetPerspectiveRatio(c,o.anchorPointX,o.anchorPointY),b=a*_.perspectiveRatio,S=o.x1*b+_.point.x,I=o.y1*b+_.point.y,L=o.x2*b+_.point.x,U=o.y2*b+_.point.y;return!this.isInsideGrid(S,I,L,U)||!s&&this.grid.hitTest(S,I,L,U,g)?{box:[],offscreen:!1}:{box:[S,I,L,U],offscreen:this.isOffscreen(S,I,L,U)}},Ni.prototype.placeCollisionCircles=function(o,s,a,c,g,_,b,S,I,L,U,j,q){var X=[],W=new f.Point(s.anchorX,s.anchorY),re=Xt(W,_),Z=pr(this.transform.cameraToCenterDistance,re.signedDistanceFromCamera),te=(L?g/Z:g*Z)/f.ONE_EM,le=Xt(W,b).point,me=Cn(te,c,s.lineOffsetX*te,s.lineOffsetY*te,!1,le,W,s,a,b,{}),Ce=!1,Ee=!1,Ie=!0;if(me){for(var Ne=.5*j*Z+q,Ke=new f.Point(-100,-100),We=new f.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Kn,wt=me.first,Ct=me.last,Tt=[],ir=wt.path.length-1;ir>=1;ir--)Tt.push(wt.path[ir]);for(var pt=1;pt<Ct.path.length;pt++)Tt.push(Ct.path[pt]);var Lt=2.5*Ne;if(S){var Nt=Tt.map(function(Zi){return Xt(Zi,S)});Tt=Nt.some(function(Zi){return Zi.signedDistanceFromCamera<=0})?[]:Nt.map(function(Zi){return Zi.point})}var zt=[];if(Tt.length>0){for(var Mt=Tt[0].clone(),Bt=Tt[0].clone(),Pt=1;Pt<Tt.length;Pt++)Mt.x=Math.min(Mt.x,Tt[Pt].x),Mt.y=Math.min(Mt.y,Tt[Pt].y),Bt.x=Math.max(Bt.x,Tt[Pt].x),Bt.y=Math.max(Bt.y,Tt[Pt].y);zt=Mt.x>=Ke.x&&Bt.x<=We.x&&Mt.y>=Ke.y&&Bt.y<=We.y?[Tt]:Bt.x<Ke.x||Mt.x>We.x||Bt.y<Ke.y||Mt.y>We.y?[]:f.clipLine([Tt],Ke.x,Ke.y,We.x,We.y)}for(var At=0,xn=zt;At<xn.length;At+=1){var Zr;ut.reset(xn[At],.25*Ne),Zr=ut.length<=.5*Ne?1:Math.ceil(ut.paddedLength/Lt)+1;for(var qn=0;qn<Zr;qn++){var kn=qn/Math.max(Zr-1,1),qr=ut.lerp(kn),Qr=qr.x+100,wi=qr.y+100;X.push(Qr,wi,Ne,0);var ei=Qr-Ne,sa=wi-Ne,ui=Qr+Ne,co=wi+Ne;if(Ie=Ie&&this.isOffscreen(ei,sa,ui,co),Ee=Ee||this.isInsideGrid(ei,sa,ui,co),!o&&this.grid.hitTestCircle(Qr,wi,Ne,U)&&(Ce=!0,!I))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!I&&Ce||!Ee?[]:X,offscreen:Ie,collisionDetected:Ce}},Ni.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,g=-1/0,_=-1/0,b=0,S=o;b<S.length;b+=1){var I=S[b],L=new f.Point(I.x+100,I.y+100);a=Math.min(a,L.x),c=Math.min(c,L.y),g=Math.max(g,L.x),_=Math.max(_,L.y),s.push(L)}for(var U={},j={},q=0,X=this.grid.query(a,c,g,_).concat(this.ignoredGrid.query(a,c,g,_));q<X.length;q+=1){var W=X[q],re=W.key;if(U[re.bucketInstanceId]===void 0&&(U[re.bucketInstanceId]={}),!U[re.bucketInstanceId][re.featureIndex]){var Z=[new f.Point(W.x1,W.y1),new f.Point(W.x2,W.y1),new f.Point(W.x2,W.y2),new f.Point(W.x1,W.y2)];f.polygonIntersectsPolygon(s,Z)&&(U[re.bucketInstanceId][re.featureIndex]=!0,j[re.bucketInstanceId]===void 0&&(j[re.bucketInstanceId]=[]),j[re.bucketInstanceId].push(re.featureIndex))}}return j},Ni.prototype.insertCollisionBox=function(o,s,a,c,g){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:g},o[0],o[1],o[2],o[3])},Ni.prototype.insertCollisionCircles=function(o,s,a,c,g){for(var _=s?this.ignoredGrid:this.grid,b={bucketInstanceId:a,featureIndex:c,collisionGroupID:g},S=0;S<o.length;S+=4)_.insertCircle(b,o[S],o[S+1],o[S+2])},Ni.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var c=[s,a,0,1];return An(c,c,o),{point:new f.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},Ni.prototype.isOffscreen=function(o,s,a,c){return a<100||o>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},Ni.prototype.isInsideGrid=function(o,s,a,c){return a>=0&&o<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},Ni.prototype.getViewportMatrix=function(){var o=f.identity([]);return f.translate(o,o,[-100,-100,0]),o};var io=function(o,s,a,c){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):c&&a?1:0,this.placed=a};io.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Mi=function(o,s,a,c,g){this.text=new io(o?o.text:null,s,a,g),this.icon=new io(o?o.icon:null,s,c,g)};Mi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fh=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},Ui=function(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]},Yd=function(o,s,a,c,g){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=g},Do=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function On(o,s,a,c,g){var _=f.getAnchorAlignment(o),b=-(_.horizontalAlign-.5)*s,S=-(_.verticalAlign-.5)*a,I=f.evaluateVariableOffset(o,c);return new f.Point(b+I[0]*g,S+I[1]*g)}function xo(o,s,a,c,g,_){var b=o.x1,S=o.x2,I=o.y1,L=o.y2,U=o.anchorPointX,j=o.anchorPointY,q=new f.Point(s,a);return c&&q._rotate(g?_:-_),{x1:b+q.x,y1:I+q.y,x2:S+q.x,y2:L+q.y,anchorPointX:U,anchorPointY:j}}Do.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var Jn=function(o,s,a,c){this.transform=o.clone(),this.collisionIndex=new Ni(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Do(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function Ea(o,s,a,c,g){o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0)}Jn.prototype.getBucketParts=function(o,s,a,c){var g=a.getBucket(s),_=a.latestFeatureIndex;if(g&&_&&s.id===g.layerIds[0]){var b=a.collisionBoxArray,S=g.layers[0].layout,I=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),L=a.tileSize/f.EXTENT,U=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),j=S.get("text-pitch-alignment")==="map",q=S.get("text-rotation-alignment")==="map",X=Lr(a,1,this.transform.zoom),W=Jr(U,j,q,this.transform,X),re=null;if(j){var Z=xr(U,j,q,this.transform,X);re=f.multiply([],this.transform.labelPlaneMatrix,Z)}this.retainedQueryData[g.bucketInstanceId]=new Yd(g.bucketInstanceId,_,g.sourceLayerIndex,g.index,a.tileID);var te={bucket:g,layout:S,posMatrix:U,textLabelPlaneMatrix:W,labelToScreenMatrix:re,scale:I,textPixelRatio:L,holdingForFade:a.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(c)for(var le=0,me=g.sortKeyRanges;le<me.length;le+=1){var Ce=me[le];o.push({sortKey:Ce.sortKey,symbolInstanceStart:Ce.symbolInstanceStart,symbolInstanceEnd:Ce.symbolInstanceEnd,parameters:te})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:te})}},Jn.prototype.attemptAnchorPlacement=function(o,s,a,c,g,_,b,S,I,L,U,j,q,X,W){var re,Z=[j.textOffset0,j.textOffset1],te=On(o,a,c,Z,g),le=this.collisionIndex.placeCollisionBox(xo(s,te.x,te.y,_,b,this.transform.angle),U,S,I,L.predicate);if(!W||this.collisionIndex.placeCollisionBox(xo(W,te.x,te.y,_,b,this.transform.angle),U,S,I,L.predicate).box.length!==0)return le.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(re=this.prevPlacement.variableOffsets[j.crossTileID].anchor),this.variableOffsets[j.crossTileID]={textOffset:Z,width:a,height:c,anchor:o,textBoxScale:g,prevAnchor:re},this.markUsedJustification(q,o,j,X),q.allowVerticalPlacement&&(this.markUsedOrientation(q,X,j),this.placedOrientations[j.crossTileID]=X),{shift:te,placedGlyphBoxes:le}):void 0},Jn.prototype.placeLayerBucketPart=function(o,s,a){var c=this,g=o.parameters,_=g.bucket,b=g.layout,S=g.posMatrix,I=g.textLabelPlaneMatrix,L=g.labelToScreenMatrix,U=g.textPixelRatio,j=g.holdingForFade,q=g.collisionBoxArray,X=g.partiallyEvaluatedTextSize,W=g.collisionGroup,re=b.get("text-optional"),Z=b.get("icon-optional"),te=b.get("text-allow-overlap"),le=b.get("icon-allow-overlap"),me=b.get("text-rotation-alignment")==="map",Ce=b.get("text-pitch-alignment")==="map",Ee=b.get("icon-text-fit")!=="none",Ie=b.get("symbol-z-order")==="viewport-y",Ne=te&&(le||!_.hasIconData()||Z),Ke=le&&(te||!_.hasTextData()||re);!_.collisionArrays&&q&&_.deserializeCollisionBoxes(q);var We=function(pt,Lt){if(!s[pt.crossTileID])if(j)c.placements[pt.crossTileID]=new fh(!1,!1,!1);else{var Nt,zt=!1,Mt=!1,Bt=!0,Pt=null,At={box:null,offscreen:null},xn={box:null,offscreen:null},Zr=null,qn=null,kn=0,qr=0,Qr=0;Lt.textFeatureIndex?kn=Lt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(kn=pt.featureIndex),Lt.verticalTextFeatureIndex&&(qr=Lt.verticalTextFeatureIndex);var wi=Lt.textBox;if(wi){var ei=function(hr){var Ri=f.WritingMode.horizontal;if(_.allowVerticalPlacement&&!hr&&c.prevPlacement){var ci=c.prevPlacement.placedOrientations[pt.crossTileID];ci&&(c.placedOrientations[pt.crossTileID]=ci,c.markUsedOrientation(_,Ri=ci,pt))}return Ri},sa=function(hr,Ri){if(_.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Lt.verticalTextBox)for(var ci=0,Va=_.writingModes;ci<Va.length&&(Va[ci]===f.WritingMode.vertical?(At=Ri(),xn=At):At=hr(),!(At&&At.box&&At.box.length));ci+=1);else At=hr()};if(b.get("text-variable-anchor")){var ui=b.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[pt.crossTileID]){var co=c.prevPlacement.variableOffsets[pt.crossTileID];ui.indexOf(co.anchor)>0&&(ui=ui.filter(function(hr){return hr!==co.anchor})).unshift(co.anchor)}var Zi=function(hr,Ri,ci){for(var Va=hr.x2-hr.x1,hm=hr.y2-hr.y1,Su=pt.textBoxScale,fm=Ee&&!le?Ri:null,bl={box:[],offscreen:!1},Hh=te?2*ui.length:ui.length,xs=0;xs<Hh;++xs){var Tu=c.attemptAnchorPlacement(ui[xs%ui.length],hr,Va,hm,Su,me,Ce,U,S,W,xs>=ui.length,pt,_,ci,fm);if(Tu&&(bl=Tu.placedGlyphBoxes)&&bl.box&&bl.box.length){zt=!0,Pt=Tu.shift;break}}return bl};sa(function(){return Zi(wi,Lt.iconBox,f.WritingMode.horizontal)},function(){var hr=Lt.verticalTextBox;return _.allowVerticalPlacement&&!(At&&At.box&&At.box.length)&&pt.numVerticalGlyphVertices>0&&hr?Zi(hr,Lt.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),At&&(zt=At.box,Bt=At.offscreen);var vl=ei(At&&At.box);if(!zt&&c.prevPlacement){var vs=c.prevPlacement.variableOffsets[pt.crossTileID];vs&&(c.variableOffsets[pt.crossTileID]=vs,c.markUsedJustification(_,vs.anchor,pt,vl))}}else{var la=function(hr,Ri){var ci=c.collisionIndex.placeCollisionBox(hr,te,U,S,W.predicate);return ci&&ci.box&&ci.box.length&&(c.markUsedOrientation(_,Ri,pt),c.placedOrientations[pt.crossTileID]=Ri),ci};sa(function(){return la(wi,f.WritingMode.horizontal)},function(){var hr=Lt.verticalTextBox;return _.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&hr?la(hr,f.WritingMode.vertical):{box:null,offscreen:null}}),ei(At&&At.box&&At.box.length)}}if(zt=(Nt=At)&&Nt.box&&Nt.box.length>0,Bt=Nt&&Nt.offscreen,pt.useRuntimeCollisionCircles){var _s=_.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),_l=f.evaluateSizeForFeature(_.textSizeData,X,_s),So=b.get("text-padding");Zr=c.collisionIndex.placeCollisionCircles(te,_s,_.lineVertexArray,_.glyphOffsetArray,_l,S,I,L,a,Ce,W.predicate,pt.collisionCircleDiameter,So),zt=te||Zr.circles.length>0&&!Zr.collisionDetected,Bt=Bt&&Zr.offscreen}if(Lt.iconFeatureIndex&&(Qr=Lt.iconFeatureIndex),Lt.iconBox){var xl=function(hr){var Ri=Ee&&Pt?xo(hr,Pt.x,Pt.y,me,Ce,c.transform.angle):hr;return c.collisionIndex.placeCollisionBox(Ri,le,U,S,W.predicate)};Mt=xn&&xn.box&&xn.box.length&&Lt.verticalIconBox?(qn=xl(Lt.verticalIconBox)).box.length>0:(qn=xl(Lt.iconBox)).box.length>0,Bt=Bt&&qn.offscreen}var To=re||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,bn=Z||pt.numIconVertices===0;if(To||bn?bn?To||(Mt=Mt&&zt):zt=Mt&&zt:Mt=zt=Mt&&zt,zt&&Nt&&Nt.box&&c.collisionIndex.insertCollisionBox(Nt.box,b.get("text-ignore-placement"),_.bucketInstanceId,xn&&xn.box&&qr?qr:kn,W.ID),Mt&&qn&&c.collisionIndex.insertCollisionBox(qn.box,b.get("icon-ignore-placement"),_.bucketInstanceId,Qr,W.ID),Zr&&(zt&&c.collisionIndex.insertCollisionCircles(Zr.circles,b.get("text-ignore-placement"),_.bucketInstanceId,kn,W.ID),a)){var Uo=_.bucketInstanceId,ua=c.collisionCircleArrays[Uo];ua===void 0&&(ua=c.collisionCircleArrays[Uo]=new Ui);for(var Ua=0;Ua<Zr.circles.length;Ua+=4)ua.circles.push(Zr.circles[Ua+0]),ua.circles.push(Zr.circles[Ua+1]),ua.circles.push(Zr.circles[Ua+2]),ua.circles.push(Zr.collisionDetected?1:0)}c.placements[pt.crossTileID]=new fh(zt||Ne,Mt||Ke,Bt||_.justReloaded),s[pt.crossTileID]=!0}};if(Ie)for(var ut=_.getSortedSymbolIndexes(this.transform.angle),wt=ut.length-1;wt>=0;--wt){var Ct=ut[wt];We(_.symbolInstances.get(Ct),_.collisionArrays[Ct])}else for(var Tt=o.symbolInstanceStart;Tt<o.symbolInstanceEnd;Tt++)We(_.symbolInstances.get(Tt),_.collisionArrays[Tt]);if(a&&_.bucketInstanceId in this.collisionCircleArrays){var ir=this.collisionCircleArrays[_.bucketInstanceId];f.invert(ir.invProjMatrix,S),ir.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1},Jn.prototype.markUsedJustification=function(o,s,a,c){var g;g=c===f.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(s)];for(var _=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];_<b.length;_+=1){var S=b[_];S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=g>=0&&S!==g?0:a.crossTileID)}},Jn.prototype.markUsedOrientation=function(o,s,a){for(var c=s===f.WritingMode.horizontal||s===f.WritingMode.horizontalOnly?s:0,g=s===f.WritingMode.vertical?s:0,_=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];_<b.length;_+=1)o.text.placedSymbolArray.get(b[_]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=g)},Jn.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(o):1,g=s?s.opacities:{},_=s?s.variableOffsets:{},b=s?s.placedOrientations:{};for(var S in this.placements){var I=this.placements[S],L=g[S];L?(this.opacities[S]=new Mi(L,c,I.text,I.icon),a=a||I.text!==L.text.placed||I.icon!==L.icon.placed):(this.opacities[S]=new Mi(null,c,I.text,I.icon,I.skipFade),a=a||I.text||I.icon)}for(var U in g){var j=g[U];if(!this.opacities[U]){var q=new Mi(j,c,!1,!1);q.isHidden()||(this.opacities[U]=q,a=a||j.text.placed||j.icon.placed)}}for(var X in _)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=_[X]);for(var W in b)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=b[W]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},Jn.prototype.updateLayerOpacities=function(o,s){for(var a={},c=0,g=s;c<g.length;c+=1){var _=g[c],b=_.getBucket(o);b&&_.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,a,_.collisionBoxArray)}},Jn.prototype.updateBucketOpacities=function(o,s,a){var c=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var g=o.layers[0].layout,_=new Mi(null,0,!1,!1,!0),b=g.get("text-allow-overlap"),S=g.get("icon-allow-overlap"),I=g.get("text-variable-anchor"),L=g.get("text-rotation-alignment")==="map",U=g.get("text-pitch-alignment")==="map",j=g.get("icon-text-fit")!=="none",q=new Mi(null,0,b&&(S||!o.hasIconData()||g.get("icon-optional")),S&&(b||!o.hasTextData()||g.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var X=function(te,le,me){for(var Ce=0;Ce<le/4;Ce++)te.opacityVertexArray.emplaceBack(me)},W=function(te){var le=o.symbolInstances.get(te),me=le.numHorizontalGlyphVertices,Ce=le.numVerticalGlyphVertices,Ee=le.crossTileID,Ie=c.opacities[Ee];s[Ee]?Ie=_:Ie||(c.opacities[Ee]=Ie=q),s[Ee]=!0;var Ne=le.numIconVertices>0,Ke=c.placedOrientations[le.crossTileID],We=Ke===f.WritingMode.vertical,ut=Ke===f.WritingMode.horizontal||Ke===f.WritingMode.horizontalOnly;if(me>0||Ce>0){var wt=gh(Ie.text);X(o.text,me,We?ss:wt),X(o.text,Ce,ut?ss:wt);var Ct=Ie.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(function(At){At>=0&&(o.text.placedSymbolArray.get(At).hidden=Ct||We?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=Ct||ut?1:0);var Tt=c.variableOffsets[le.crossTileID];Tt&&c.markUsedJustification(o,Tt.anchor,le,Ke);var ir=c.placedOrientations[le.crossTileID];ir&&(c.markUsedJustification(o,"left",le,ir),c.markUsedOrientation(o,ir,le))}if(Ne){var pt=gh(Ie.icon),Lt=!(j&&le.verticalPlacedIconSymbolIndex&&We);le.placedIconSymbolIndex>=0&&(X(o.icon,le.numIconVertices,Lt?pt:ss),o.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(X(o.icon,le.numVerticalIconVertices,Lt?ss:pt),o.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Nt=o.collisionArrays[te];if(Nt){var zt=new f.Point(0,0);if(Nt.textBox||Nt.verticalTextBox){var Mt=!0;if(I){var Bt=c.variableOffsets[Ee];Bt?(zt=On(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),L&&zt._rotate(U?c.transform.angle:-c.transform.angle)):Mt=!1}Nt.textBox&&Ea(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!Mt||We,zt.x,zt.y),Nt.verticalTextBox&&Ea(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!Mt||ut,zt.x,zt.y)}var Pt=!!(!ut&&Nt.verticalIconBox);Nt.iconBox&&Ea(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Pt,j?zt.x:0,j?zt.y:0),Nt.verticalIconBox&&Ea(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Pt,j?zt.x:0,j?zt.y:0)}}},re=0;re<o.symbolInstances.length;re++)W(re);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var Z=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Z.invProjMatrix,o.placementViewportMatrix=Z.viewportMatrix,o.collisionCircleArray=Z.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Jn.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Jn.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},Jn.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},Jn.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},Jn.prototype.setStale=function(){this.stale=!0};var Qd=Math.pow(2,25),em=Math.pow(2,24),Ic=Math.pow(2,17),tm=Math.pow(2,16),dh=Math.pow(2,9),rm=Math.pow(2,8),mh=Math.pow(2,1);function gh(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*Qd+s*em+a*Ic+s*tm+a*dh+s*rm+a*mh+s}var ss=0,kc=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};kc.prototype.continuePlacement=function(o,s,a,c,g){for(var _=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(_,c,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort(function(b,S){return b.sortKey-S.sortKey}));this._currentPartIndex<_.length;)if(s.placeLayerBucketPart(_[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,g())return!0;return!1};var tl=function(o,s,a,c,g,_,b){this.placement=new Jn(o,g,_,b),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};tl.prototype.isDone=function(){return this._done},tl.prototype.continuePlacement=function(o,s,a){for(var c=this,g=f.browser.now(),_=function(){var I=f.browser.now()-g;return!c._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var b=s[o[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=S)&&(!b.maxzoom||b.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new kc(b)),this._inProgressLayer.continuePlacement(a[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},tl.prototype.commit=function(o){return this.placement.commit(o),this.placement};var yh=512/f.EXTENT/2,iu=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var g=s.get(c),_=g.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,o)})}};iu.prototype.getScaledCoordinates=function(o,s){var a=yh/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*f.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*f.EXTENT+o.anchorY)*a)}},iu.prototype.findMatches=function(o,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),g=0;g<o.length;g++){var _=o.get(g);if(!_.crossTileID){var b=this.indexedSymbolInstances[_.key];if(b)for(var S=this.getScaledCoordinates(_,s),I=0,L=b;I<L.length;I+=1){var U=L[I];if(Math.abs(U.coord.x-S.x)<=c&&Math.abs(U.coord.y-S.y)<=c&&!a[U.crossTileID]){a[U.crossTileID]=!0,_.crossTileID=U.crossTileID;break}}}}};var Vi=function(){this.maxCrossTileID=0};Vi.prototype.generate=function(){return++this.maxCrossTileID};var $o=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};$o.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],g={};for(var _ in c){var b=c[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),g[b.tileID.key]=b}this.indexes[a]=g}this.lng=o},$o.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var g=this.usedCrossTileIDs[o.overscaledZ];for(var _ in this.indexes){var b=this.indexes[_];if(Number(_)>o.overscaledZ)for(var S in b){var I=b[S];I.tileID.isChildOf(o)&&I.findMatches(s.symbolInstances,o,g)}else{var L=b[o.scaledTo(Number(_)).key];L&&L.findMatches(s.symbolInstances,o,g)}}for(var U=0;U<s.symbolInstances.length;U++){var j=s.symbolInstances.get(U);j.crossTileID||(j.crossTileID=a.generate(),g[j.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new iu(o,s.symbolInstances,s.bucketInstanceId),!0},$o.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var c=0,g=s.indexedSymbolInstances[a];c<g.length;c+=1)delete this.usedCrossTileIDs[o][g[c].crossTileID]},$o.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var g in c)o[c[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[g]),delete c[g],s=!0)}return s};var Wo=function(){this.layerIndexes={},this.crossTileIDs=new Vi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wo.prototype.addLayer=function(o,s,a){var c=this.layerIndexes[o.id];c===void 0&&(c=this.layerIndexes[o.id]=new $o);var g=!1,_={};c.handleWrapJump(a);for(var b=0,S=s;b<S.length;b+=1){var I=S[b],L=I.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(I.tileID,L,this.crossTileIDs)&&(g=!0),_[L.bucketInstanceId]=!0)}return c.removeStaleBuckets(_)&&(g=!0),g},Wo.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var Sa=function(o,s){return f.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},Ko=f.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Xo=f.pick(it,["setCenter","setZoom","setBearing","setPitch"]),ou=function(){var o={},s=f.styleSpec.$version;for(var a in f.styleSpec.$root){var c,g=f.styleSpec.$root[a];g.required&&(c=a==="version"?s:g.type==="array"?[]:{})!=null&&(o[a]=c)}return o}(),gi=function(o){function s(a,c){var g=this;c===void 0&&(c={}),o.call(this),this.map=a,this.dispatcher=new cn(Me(),this),this.imageManager=new Ot,this.imageManager.setEventedParent(this),this.glyphManager=new un(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new mr(256,512),this.crossTileSymbolIndex=new Wo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());var _=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(b){_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},function(S,I){if(f.triggerPluginCompletionEvent(S),I&&I.every(function(U){return U}))for(var L in _.sourceCaches)_.sourceCaches[L].reload()})}),this.on("data",function(b){if(b.dataType==="source"&&b.sourceDataType==="metadata"){var S=g.sourceCaches[b.sourceId];if(S){var I=S.getSource();if(I&&I.vectorLayerIds)for(var L in g._layers){var U=g._layers[L];U.source===I.id&&g._validateLayer(U)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"}));var _=typeof c.validate=="boolean"?c.validate:!f.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var b=this.map._requestManager.transformRequest(a,f.ResourceType.Style);this._request=f.getJSON(b,function(S,I){g._request=null,S?g.fire(new f.ErrorEvent(S)):I&&g._load(I,_)})},s.prototype.loadJSON=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.browser.frame(function(){g._request=null,g._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(ou,!1)},s.prototype._load=function(a,c){if(!c||!Sa(this,f.validateStyle(a))){for(var g in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(g,a.sources[g],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var _=tt(this.stylesheet.layers);this._order=_.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var b=0,S=_;b<S.length;b+=1){var I=S[b];(I=f.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ro(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(g,_,b){var S,I,L,U=f.browser.devicePixelRatio>1?"@2x":"",j=f.getJSON(_.transformRequest(_.normalizeSpriteURL(g,U,".json"),f.ResourceType.SpriteJSON),function(W,re){j=null,L||(L=W,S=re,X())}),q=f.getImage(_.transformRequest(_.normalizeSpriteURL(g,U,".png"),f.ResourceType.SpriteImage),function(W,re){q=null,L||(L=W,I=re,X())});function X(){if(L)b(L);else if(S&&I){var W=f.browser.getImageData(I),re={};for(var Z in S){var te=S[Z],le=te.width,me=te.height,Ce=te.x,Ee=te.y,Ie=te.sdf,Ne=te.pixelRatio,Ke=te.stretchX,We=te.stretchY,ut=te.content,wt=new f.RGBAImage({width:le,height:me});f.RGBAImage.copy(W,wt,{x:Ce,y:Ee},{x:0,y:0},{width:le,height:me}),re[Z]={data:wt,pixelRatio:Ne,sdf:Ie,stretchX:Ke,stretchY:We,content:ut}}b(null,re)}}return{cancel:function(){j&&(j.cancel(),j=null),q&&(q.cancel(),q=null)}}}(a,this.map._requestManager,function(g,_){if(c._spriteRequest=null,g)c.fire(new f.ErrorEvent(g));else if(_)for(var b in _)c.imageManager.addImage(b,_[b]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new f.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var g=a.sourceLayer;if(g){var _=c.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new f.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+_.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],g=0,_=a;g<_.length;g+=1){var b=this._layers[_[g]];b.type!=="custom"&&c.push(b.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);for(var b in(g.length||_.length)&&this._updateWorkerLayers(g,_),this._updatedSources){var S=this._updatedSources[b];S==="reload"?this._reloadSource(b):S==="clear"&&this._clearSource(b)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var L={};for(var U in this.sourceCaches){var j=this.sourceCaches[U];L[U]=j.used,j.used=!1}for(var q=0,X=this._order;q<X.length;q+=1){var W=this._layers[X[q]];W.recalculate(a,this._availableImages),!W.isHidden(a.zoom)&&W.source&&(this.sourceCaches[W.source].used=!0)}for(var re in L){var Z=this.sourceCaches[re];L[re]!==Z.used&&Z.fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:re}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new f.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),Sa(this,f.validateStyle(a)))return!1;(a=f.clone$1(a)).layers=tt(a.layers);var g=function(b,S){if(!b)return[{command:it.setStyle,args:[S]}];var I=[];try{if(!f.deepEqual(b.version,S.version))return[{command:it.setStyle,args:[S]}];f.deepEqual(b.center,S.center)||I.push({command:it.setCenter,args:[S.center]}),f.deepEqual(b.zoom,S.zoom)||I.push({command:it.setZoom,args:[S.zoom]}),f.deepEqual(b.bearing,S.bearing)||I.push({command:it.setBearing,args:[S.bearing]}),f.deepEqual(b.pitch,S.pitch)||I.push({command:it.setPitch,args:[S.pitch]}),f.deepEqual(b.sprite,S.sprite)||I.push({command:it.setSprite,args:[S.sprite]}),f.deepEqual(b.glyphs,S.glyphs)||I.push({command:it.setGlyphs,args:[S.glyphs]}),f.deepEqual(b.transition,S.transition)||I.push({command:it.setTransition,args:[S.transition]}),f.deepEqual(b.light,S.light)||I.push({command:it.setLight,args:[S.light]});var L={},U=[];(function(q,X,W,re){var Z;for(Z in X=X||{},q=q||{})q.hasOwnProperty(Z)&&(X.hasOwnProperty(Z)||at(Z,W,re));for(Z in X)X.hasOwnProperty(Z)&&(q.hasOwnProperty(Z)?f.deepEqual(q[Z],X[Z])||(q[Z].type==="geojson"&&X[Z].type==="geojson"&&wr(q,X,Z)?W.push({command:it.setGeoJSONSourceData,args:[Z,X[Z].data]}):Jt(Z,X,W,re)):Vt(Z,X,W))})(b.sources,S.sources,U,L);var j=[];b.layers&&b.layers.forEach(function(q){L[q.source]?I.push({command:it.removeLayer,args:[q.id]}):j.push(q)}),I=I.concat(U),function(q,X,W){X=X||[];var re,Z,te,le,me,Ce,Ee,Ie=(q=q||[]).map(cr),Ne=X.map(cr),Ke=q.reduce(Qt,{}),We=X.reduce(Qt,{}),ut=Ie.slice(),wt=Object.create(null);for(re=0,Z=0;re<Ie.length;re++)We.hasOwnProperty(te=Ie[re])?Z++:(W.push({command:it.removeLayer,args:[te]}),ut.splice(ut.indexOf(te,Z),1));for(re=0,Z=0;re<Ne.length;re++)ut[ut.length-1-re]!==(te=Ne[Ne.length-1-re])&&(Ke.hasOwnProperty(te)?(W.push({command:it.removeLayer,args:[te]}),ut.splice(ut.lastIndexOf(te,ut.length-Z),1)):Z++,W.push({command:it.addLayer,args:[We[te],Ce=ut[ut.length-re]]}),ut.splice(ut.length-re,0,te),wt[te]=!0);for(re=0;re<Ne.length;re++)if(le=Ke[te=Ne[re]],me=We[te],!wt[te]&&!f.deepEqual(le,me))if(f.deepEqual(le.source,me.source)&&f.deepEqual(le["source-layer"],me["source-layer"])&&f.deepEqual(le.type,me.type)){for(Ee in Gt(le.layout,me.layout,W,te,null,it.setLayoutProperty),Gt(le.paint,me.paint,W,te,null,it.setPaintProperty),f.deepEqual(le.filter,me.filter)||W.push({command:it.setFilter,args:[te,me.filter]}),f.deepEqual(le.minzoom,me.minzoom)&&f.deepEqual(le.maxzoom,me.maxzoom)||W.push({command:it.setLayerZoomRange,args:[te,me.minzoom,me.maxzoom]}),le)le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Gt(le[Ee],me[Ee],W,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||W.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}));for(Ee in me)me.hasOwnProperty(Ee)&&!le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Gt(le[Ee],me[Ee],W,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||W.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}))}else W.push({command:it.removeLayer,args:[te]}),Ce=ut[ut.lastIndexOf(te)+1],W.push({command:it.addLayer,args:[me,Ce]})}(j,S.layers,I)}catch(q){console.warn("Unable to compute style diff:",q),I=[{command:it.setStyle,args:[S]}]}return I}(this.serialize(),a).filter(function(b){return!(b.command in Xo)});if(g.length===0)return!1;var _=g.filter(function(b){return!(b.command in Ko)});if(_.length>0)throw new Error("Unimplemented: "+_.map(function(b){return b.command}).join(", ")+".");return g.forEach(function(b){b.command!=="setTransition"&&c[b.command].apply(c,b.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new f.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new f.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,g){var _=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(f.validateStyle.source,"sources."+a,c,null,g))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var b=this.sourceCaches[a]=new J(a,c,this.dispatcher);b.style=this,b.setEventedParent(this,function(){return{isSourceLoaded:_.loaded(),source:b.serialize(),sourceId:a}}),b.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new f.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var g=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],g.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=a.id;if(this.getLayer(_))this.fire(new f.ErrorEvent(new Error('Layer with id "'+_+'" already exists on this map')));else{var b;if(a.type==="custom"){if(Sa(this,f.validateCustomStyleLayer(a)))return;b=f.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(_,a.source),a=f.clone$1(a),a=f.extend(a,{source:_})),this._validate(f.validateStyle.layer,"layers."+_,a,{arrayIndex:-1},g))return;b=f.createStyleLayer(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize()}var S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(S,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){var I=this._removedLayers[_];delete this._removedLayers[_],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var g=this._order.indexOf(a);this._order.splice(g,1);var _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,g){this._checkLoaded();var _=this.getLayer(a);_?_.minzoom===c&&_.maxzoom===g||(c!=null&&(_.minzoom=c),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=this.getLayer(a);if(_){if(!f.deepEqual(_.filter,c))return c==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(f.validateStyle.filter,"layers."+_.id+".filter",c,null,g)||(_.filter=f.clone$1(c),this._updateLayer(_)))}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return f.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getLayoutProperty(c),g)||(b.setLayoutProperty(c,g,_),this._updateLayer(b)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var g=this.getLayer(a);if(g)return g.getLayoutProperty(c);this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getPaintProperty(c),g)||(b.setPaintProperty(c,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=a.sourceLayer,b=this.sourceCaches[g];if(b!==void 0){var S=b.getSource().type;S==="geojson"&&_?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||_?(a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,a.id,c)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=this.sourceCaches[g];if(_!==void 0){var b=_.getSource().type,S=b==="vector"?a.sourceLayer:void 0;b!=="vector"||S?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(S,a.id,c):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,g=a.sourceLayer,_=this.sourceCaches[c];if(_!==void 0){if(_.getSource().type!=="vector"||g)return a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,g=function(Ke){return c._layers[Ke].type==="fill-extrusion"},_={},b=[],S=this._order.length-1;S>=0;S--){var I=this._order[S];if(g(I)){_[I]=S;for(var L=0,U=a;L<U.length;L+=1){var j=U[L][I];if(j)for(var q=0,X=j;q<X.length;q+=1)b.push(X[q])}}}b.sort(function(Ke,We){return We.intersectionZ-Ke.intersectionZ});for(var W=[],re=this._order.length-1;re>=0;re--){var Z=this._order[re];if(g(Z))for(var te=b.length-1;te>=0;te--){var le=b[te].feature;if(_[le.layer.id]<re)break;W.push(le),b.pop()}else for(var me=0,Ce=a;me<Ce.length;me+=1){var Ee=Ce[me][Z];if(Ee)for(var Ie=0,Ne=Ee;Ie<Ne.length;Ie+=1)W.push(Ne[Ie].feature)}}return W},s.prototype.queryRenderedFeatures=function(a,c,g){c&&c.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var _={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var b=0,S=c.layers;b<S.length;b+=1){var I=S[b],L=this._layers[I];if(!L)return this.fire(new f.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];_[L.source]=!0}}var U=[];for(var j in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!_[j]||U.push(He(this.sourceCaches[j],this._layers,this._serializedLayers,a,c,g));return this.placement&&U.push(function(q,X,W,re,Z,te,le){for(var me={},Ce=te.queryRenderedSymbols(re),Ee=[],Ie=0,Ne=Object.keys(Ce).map(Number);Ie<Ne.length;Ie+=1)Ee.push(le[Ne[Ie]]);Ee.sort(ct);for(var Ke=function(){var Tt=ut[We],ir=Tt.featureIndex.lookupSymbolFeatures(Ce[Tt.bucketInstanceId],X,Tt.bucketIndex,Tt.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,q);for(var pt in ir){var Lt=me[pt]=me[pt]||[],Nt=ir[pt];Nt.sort(function(Bt,Pt){var At=Tt.featureSortOrder;if(At){var xn=At.indexOf(Bt.featureIndex);return At.indexOf(Pt.featureIndex)-xn}return Pt.featureIndex-Bt.featureIndex});for(var zt=0,Mt=Nt;zt<Mt.length;zt+=1)Lt.push(Mt[zt])}},We=0,ut=Ee;We<ut.length;We+=1)Ke();var wt=function(Tt){me[Tt].forEach(function(ir){var pt=ir.feature,Lt=W[q[Tt].source].getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=Lt})};for(var Ct in me)wt(Ct);return me}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(U)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var g=this.sourceCaches[a];return g?function(_,b){for(var S=_.getRenderableIds().map(function(X){return _.getTileByID(X)}),I=[],L={},U=0;U<S.length;U++){var j=S[U],q=j.tileID.canonical.key;L[q]||(L[q]=!0,j.querySourceFeatures(I,b))}return I}(g,c):[]},s.prototype.addSourceType=function(a,c,g){return s.getSourceType(a)?g(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},g):g(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var g=this.light.getLight(),_=!1;for(var b in a)if(!f.deepEqual(a[b],g[b])){_=!0;break}if(_){var S={now:f.browser.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(S)}},s.prototype._validate=function(a,c,g,_,b){return b===void 0&&(b={}),(!b||b.validate!==!1)&&Sa(this,a.call(f.validateStyle,f.extend({key:c,style:this.serialize(),value:g,styleSpec:f.styleSpec},_)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,g,_,b){b===void 0&&(b=!1);for(var S=!1,I=!1,L={},U=0,j=this._order;U<j.length;U+=1){var q=this._layers[j[U]];if(q.type==="symbol"){if(!L[q.source]){var X=this.sourceCaches[q.source];L[q.source]=X.getRenderableIds(!0).map(function(le){return X.getTileByID(le)}).sort(function(le,me){return me.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(me.tileID)?-1:1)})}var W=this.crossTileSymbolIndex.addLayer(q,L[q.source],a.center.lng);S=S||W}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.browser.now(),a.zoom))&&(this.pauseablePlacement=new tl(a,this._order,b,c,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.browser.now()),I=!0),S&&this.pauseablePlacement.placement.setStale()),I||S)for(var re=0,Z=this._order;re<Z.length;re+=1){var te=this._layers[Z[re]];te.type==="symbol"&&this.placement.updateLayerOpacities(te,L[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,g){this.imageManager.getImages(c.icons,g),this._updateTilesForChangedImages();var _=this.sourceCaches[c.source];_&&_.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,g){this.glyphManager.getGlyphs(c.stacks,g)},s.prototype.getResource=function(a,c,g){return f.makeRequest(c,g)},s}(f.Evented);gi.getSourceType=function(o){return Ae[o]},gi.setSourceType=function(o,s){Ae[o]=s},gi.registerForPluginStateChange=f.registerForPluginStateChange;var on=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),ls=Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),vh=Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),nm=Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),im=Er(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Pc=Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mc=Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),zc=Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Lc=Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),_h=Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),xh=Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),om=Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),rl=Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),nl=Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),bh=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Dn=Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Rc=Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Jo=Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Yo=Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ta=Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ca=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Qo=Er(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Aa=Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ia=Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ea=Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),wh=Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Eh=Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Er(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),g=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(g):g,S={};return{fragmentSource:o=o.replace(a,function(I,L,U,j,q){return S[q]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
varying `+U+" "+j+" "+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`}),vertexSource:s=s.replace(a,function(I,L,U,j,q){var X=j==="float"?"vec2":"vec4",W=q.match(/color/)?"color":X;return S[q]?L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+U+" "+X+" a_"+q+`;
varying `+U+" "+j+" "+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = a_"+q+`;
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = unpack_mix_"+W+"(a_"+q+", u_"+q+`_t);
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+U+" "+X+" a_"+q+`;
#else
uniform `+U+" "+j+" u_"+q+`;
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = a_"+q+`;
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+U+" "+j+" "+q+" = unpack_mix_"+W+"(a_"+q+", u_"+q+`_t);
#else
    `+U+" "+j+" "+q+" = u_"+q+`;
#endif
`}),staticAttributes:c,staticUniforms:b}}var am=Object.freeze({__proto__:null,prelude:ls,background:vh,backgroundPattern:nm,circle:im,clippingMask:Pc,heatmap:Mc,heatmapTexture:zc,collisionBox:Lc,collisionCircle:_h,debug:xh,fill:om,fillOutline:rl,fillOutlinePattern:nl,fillPattern:bh,fillExtrusion:Dn,fillExtrusionPattern:Rc,hillshadePrepare:Jo,hillshade:Yo,line:Ta,lineGradient:Ca,linePattern:Qo,lineSDF:Aa,raster:Ia,symbolIcon:ea,symbolSDF:wh,symbolTextAndIcon:Eh}),au=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Sh(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var c=o[a].split(" ");s.push(c.pop())}return s}au.prototype.bind=function(o,s,a,c,g,_,b,S){this.context=o;for(var I=this.boundPaintVertexBuffers.length!==c.length,L=0;!I&&L<c.length;L++)this.boundPaintVertexBuffers[L]!==c[L]&&(I=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!I&&this.boundIndexBuffer===g&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===b&&this.boundDynamicVertexBuffer2===S?(o.bindVertexArrayOES.set(this.vao),b&&b.bind(),g&&g.dynamicDraw&&g.bind(),S&&S.bind()):this.freshBind(s,a,c,g,_,b,S)},au.prototype.freshBind=function(o,s,a,c,g,_,b){var S,I=o.numAttributes,L=this.context,U=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=b;else{S=L.currentNumAttributes||0;for(var j=I;j<S;j++)U.disableVertexAttribArray(j)}s.enableAttributes(U,o);for(var q=0,X=a;q<X.length;q+=1)X[q].enableAttributes(U,o);_&&_.enableAttributes(U,o),b&&b.enableAttributes(U,o),s.bind(),s.setVertexAttribPointers(U,o,g);for(var W=0,re=a;W<re.length;W+=1){var Z=re[W];Z.bind(),Z.setVertexAttribPointers(U,o,g)}_&&(_.bind(),_.setVertexAttribPointers(U,o,g)),c&&c.bind(),b&&(b.bind(),b.setVertexAttribPointers(U,o,g)),L.currentNumAttributes=I},au.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Th=function(o,s,a,c,g,_){var b=o.gl;this.program=b.createProgram();for(var S=Sh(a.staticAttributes),I=c?c.getBinderAttributes():[],L=S.concat(I),U=a.staticUniforms?Sh(a.staticUniforms):[],j=c?c.getBinderUniforms():[],q=[],X=0,W=U.concat(j);X<W.length;X+=1){var re=W[X];q.indexOf(re)<0&&q.push(re)}var Z=c?c.defines():[];_&&Z.push("#define OVERDRAW_INSPECTOR;");var te=Z.concat(ls.fragmentSource,a.fragmentSource).join(`
`),le=Z.concat(ls.vertexSource,a.vertexSource).join(`
`),me=b.createShader(b.FRAGMENT_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(me,te),b.compileShader(me),b.attachShader(this.program,me);var Ce=b.createShader(b.VERTEX_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(Ce,le),b.compileShader(Ce),b.attachShader(this.program,Ce),this.attributes={};var Ee={};this.numAttributes=L.length;for(var Ie=0;Ie<this.numAttributes;Ie++)L[Ie]&&(b.bindAttribLocation(this.program,Ie,L[Ie]),this.attributes[L[Ie]]=Ie);b.linkProgram(this.program),b.deleteShader(Ce),b.deleteShader(me);for(var Ne=0;Ne<q.length;Ne++){var Ke=q[Ne];if(Ke&&!Ee[Ke]){var We=b.getUniformLocation(this.program,Ke);We&&(Ee[Ke]=We)}}this.fixedUniforms=g(o,Ee),this.binderUniforms=c?c.getUniforms(o,Ee):[]}}};function Ch(o,s,a){var c=1/Lr(a,1,s.transform.tileZoom),g=Math.pow(2,a.tileID.overscaledZ),_=a.tileSize*Math.pow(2,s.transform.tileZoom)/g,b=_*(a.tileID.canonical.x+a.tileID.wrap*g),S=_*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[b>>16,S>>16],u_pixel_coord_lower:[65535&b,65535&S]}}Th.prototype.draw=function(o,s,a,c,g,_,b,S,I,L,U,j,q,X,W,re){var Z,te=o.gl;if(!this.failedToCreate){for(var le in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(c),o.setColorMode(g),o.setCullFace(_),this.fixedUniforms)this.fixedUniforms[le].set(b[le]);X&&X.setUniforms(o,this.binderUniforms,j,{zoom:q});for(var me=(Z={},Z[te.LINES]=2,Z[te.TRIANGLES]=3,Z[te.LINE_STRIP]=1,Z)[s],Ce=0,Ee=U.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce],Ne=Ie.vaos||(Ie.vaos={});(Ne[S]||(Ne[S]=new au)).bind(o,this,I,X?X.getPaintVertexBuffers():[],L,Ie.vertexOffset,W,re),te.drawElements(s,Ie.primitiveLength*me,te.UNSIGNED_SHORT,Ie.primitiveOffset*me*2)}}};var Ah=function(o,s,a,c){var g=s.style.light,_=g.properties.get("position"),b=[_.x,_.y,_.z],S=f.create$1();g.properties.get("anchor")==="viewport"&&f.fromRotation(S,-s.transform.angle),f.transformMat3(b,b,S);var I=g.properties.get("color");return{u_matrix:o,u_lightpos:b,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:c}},ka=function(o,s,a,c,g,_,b){return f.extend(Ah(o,s,a,c),Ch(_,s,b),{u_height_factor:-Math.pow(2,g.overscaledZ)/b.tileSize/8})},ta=function(o){return{u_matrix:o}},Pa=function(o,s,a,c){return f.extend(ta(o),Ch(a,s,c))},Ih=function(o,s){return{u_matrix:o,u_world:s}},kh=function(o,s,a,c,g){return f.extend(Pa(o,s,a,c),{u_world:g})},Oc=function(o,s,a,c){var g,_,b=o.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var S=Lr(a,1,b.zoom);g=!0,_=[S,S]}else g=!1,_=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:f.browser.devicePixelRatio,u_extrude_scale:_}},Ma=function(o,s,a){var c=Lr(a,1,s.zoom),g=Math.pow(2,s.zoom-a.tileID.overscaledZ),_=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*g),s.pixelsToGLUnits[1]/(c*g)],u_overscale_factor:_}},Ph=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},za=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},La=function(o){return{u_matrix:o}},Mh=function(o,s,a,c){return{u_matrix:o,u_extrude_scale:Lr(s,1,a),u_intensity:c}},il=function(o,s,a){var c=o.transform;return{u_matrix:zh(o,s,a),u_ratio:1/Lr(s,1,c.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ar=function(o,s,a,c){return f.extend(il(o,s,a),{u_image:0,u_image_height:c})},su=function(o,s,a,c){var g=o.transform,_=us(s,g);return{u_matrix:zh(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Lr(s,1,g.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_image:0,u_scale:[_,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},sm=function(o,s,a,c,g){var _=o.lineAtlas,b=us(s,o.transform),S=a.layout.get("line-cap")==="round",I=_.getDash(c.from,S),L=_.getDash(c.to,S),U=I.width*g.fromScale,j=L.width*g.toScale;return f.extend(il(o,s,a),{u_patternscale_a:[b/U,-I.height/2],u_patternscale_b:[b/j,-L.height/2],u_sdfgamma:_.width/(256*Math.min(U,j)*f.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:L.y,u_mix:g.t})};function us(o,s){return 1/Lr(o,1,s.tileZoom)}function zh(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var lm=function(o,s,a,c,g){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(b=g.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Lh(g.paint.get("raster-hue-rotate"))};var _,b};function Lh(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var lu,cs=function(o,s,a,c,g,_,b,S,I,L){var U=g.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:U.width/U.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:b,u_coord_matrix:S,u_is_text:+I,u_pitch_with_map:+c,u_texsize:L,u_texture:0}},ol=function(o,s,a,c,g,_,b,S,I,L,U){var j=g.transform;return f.extend(cs(o,s,a,c,g,_,b,S,I,L),{u_gamma_scale:c?Math.cos(j._pitch)*j.cameraToCenterDistance:1,u_device_pixel_ratio:f.browser.devicePixelRatio,u_is_halo:+U})},uu=function(o,s,a,c,g,_,b,S,I,L){return f.extend(ol(o,s,a,c,g,_,b,S,!0,I,!0),{u_texsize_icon:L,u_texture_icon:1})},al=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},ps=function(o,s,a,c,g,_){return f.extend(function(b,S,I,L){var U=I.imageManager.getPattern(b.from.toString()),j=I.imageManager.getPattern(b.to.toString()),q=I.imageManager.getPixelSize(),X=q.width,W=q.height,re=Math.pow(2,L.tileID.overscaledZ),Z=L.tileSize*Math.pow(2,I.transform.tileZoom)/re,te=Z*(L.tileID.canonical.x+L.tileID.wrap*re),le=Z*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:j.tl,u_pattern_br_b:j.br,u_texsize:[X,W],u_mix:S.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:j.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Lr(L,1,I.transform.tileZoom),u_pixel_coord_upper:[te>>16,le>>16],u_pixel_coord_lower:[65535&te,65535&le]}}(c,_,a,g),{u_matrix:o,u_opacity:s})},Rh={fillExtrusion:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new f.Uniform1f(o,s.u_height_factor),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new f.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new f.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new f.UniformColor(o,s.u_color),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_overlay:new f.Uniform1i(o,s.u_overlay),u_overlay_scale:new f.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new f.Uniform1f(o,s.u_extrude_scale),u_intensity:new f.Uniform1f(o,s.u_intensity),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_color_ramp:new f.Uniform1i(o,s.u_color_ramp),u_opacity:new f.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_latrange:new f.Uniform2f(o,s.u_latrange),u_light:new f.Uniform2f(o,s.u_light),u_shadow:new f.UniformColor(o,s.u_shadow),u_highlight:new f.UniformColor(o,s.u_highlight),u_accent:new f.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_dimension:new f.Uniform2f(o,s.u_dimension),u_zoom:new f.Uniform1f(o,s.u_zoom),u_unpack:new f.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_image:new f.Uniform1i(o,s.u_image),u_image_height:new f.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_texsize:new f.Uniform2f(o,s.u_texsize),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_image:new f.Uniform1i(o,s.u_image),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new f.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new f.Uniform1f(o,s.u_sdfgamma),u_image:new f.Uniform1i(o,s.u_image),u_tex_y_a:new f.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new f.Uniform1f(o,s.u_tex_y_b),u_mix:new f.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new f.Uniform2f(o,s.u_tl_parent),u_scale_parent:new f.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new f.Uniform1f(o,s.u_buffer_scale),u_fade_t:new f.Uniform1f(o,s.u_fade_t),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image0:new f.Uniform1i(o,s.u_image0),u_image1:new f.Uniform1i(o,s.u_image1),u_brightness_low:new f.Uniform1f(o,s.u_brightness_low),u_brightness_high:new f.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new f.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new f.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new f.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texsize_icon:new f.Uniform2f(o,s.u_texsize_icon),u_texture:new f.Uniform1i(o,s.u_texture),u_texture_icon:new f.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_color:new f.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image:new f.Uniform1i(o,s.u_image),u_pattern_tl_a:new f.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(o,s.u_pattern_br_b),u_texsize:new f.Uniform2f(o,s.u_texsize),u_mix:new f.Uniform1f(o,s.u_mix),u_pattern_size_a:new f.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new f.Uniform1f(o,s.u_scale_a),u_scale_b:new f.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(o,s.u_tile_units_to_pixels)}}};function hs(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=o.useProgram("collisionBox"),U=[],j=0,q=0,X=0;X<c.length;X++){var W=c[X],re=s.getTile(W),Z=re.getBucket(a);if(Z){var te=W.posMatrix;g[0]===0&&g[1]===0||(te=o.translatePosMatrix(W.posMatrix,re,g,_));var le=b?Z.textCollisionBox:Z.iconCollisionBox,me=Z.collisionCircleArray;if(me.length>0){var Ce=f.create(),Ee=te;f.mul(Ce,Z.placementInvProjMatrix,o.transform.glCoordMatrix),f.mul(Ce,Ce,Z.placementViewportMatrix),U.push({circleArray:me,circleOffset:q,transform:Ee,invTransform:Ce}),q=j+=me.length/4}le&&L.draw(S,I.LINES,H.disabled,K.disabled,o.colorModeForRenderPass(),ce.disabled,Ma(te,o.transform,re),a.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,null,o.transform.zoom,null,null,le.collisionVertexBuffer)}}if(b&&U.length){var Ie=o.useProgram("collisionCircle"),Ne=new f.StructArrayLayout2f1f2i16;Ne.resize(4*j),Ne._trim();for(var Ke=0,We=0,ut=U;We<ut.length;We+=1)for(var wt=ut[We],Ct=0;Ct<wt.circleArray.length/4;Ct++){var Tt=4*Ct,ir=wt.circleArray[Tt+0],pt=wt.circleArray[Tt+1],Lt=wt.circleArray[Tt+2],Nt=wt.circleArray[Tt+3];Ne.emplace(Ke++,ir,pt,Lt,Nt,0),Ne.emplace(Ke++,ir,pt,Lt,Nt,1),Ne.emplace(Ke++,ir,pt,Lt,Nt,2),Ne.emplace(Ke++,ir,pt,Lt,Nt,3)}(!lu||lu.length<2*j)&&(lu=function(Zr){var qn=2*Zr,kn=new f.StructArrayLayout3ui6;kn.resize(qn),kn._trim();for(var qr=0;qr<qn;qr++){var Qr=6*qr;kn.uint16[Qr+0]=4*qr+0,kn.uint16[Qr+1]=4*qr+1,kn.uint16[Qr+2]=4*qr+2,kn.uint16[Qr+3]=4*qr+2,kn.uint16[Qr+4]=4*qr+3,kn.uint16[Qr+5]=4*qr+0}return kn}(j));for(var zt=S.createIndexBuffer(lu,!0),Mt=S.createVertexBuffer(Ne,f.collisionCircleLayout.members,!0),Bt=0,Pt=U;Bt<Pt.length;Bt+=1){var At=Pt[Bt],xn=Ph(At.transform,At.invTransform,o.transform);Ie.draw(S,I.TRIANGLES,H.disabled,K.disabled,o.colorModeForRenderPass(),ce.disabled,xn,a.id,Mt,zt,f.SegmentVector.simpleSegment(0,2*At.circleOffset,At.circleArray.length,At.circleArray.length/2),null,o.transform.zoom,null,null,null)}Mt.destroy(),zt.destroy()}}var oo=f.identity(new Float32Array(16));function Oh(o,s,a,c,g,_){var b=f.getAnchorAlignment(o),S=-(b.horizontalAlign-.5)*s,I=-(b.verticalAlign-.5)*a,L=f.evaluateVariableOffset(o,c);return new f.Point((S/g+L[0])*_,(I/g+L[1])*_)}function Dh(o,s,a,c,g,_,b,S,I,L,U){var j=o.text.placedSymbolArray,q=o.text.dynamicLayoutVertexArray,X=o.icon.dynamicLayoutVertexArray,W={};q.clear();for(var re=0;re<j.length;re++){var Z=j.get(re),te=Z.hidden||!Z.crossTileID||o.allowVerticalPlacement&&!Z.placedOrientation?null:c[Z.crossTileID];if(te){var le=new f.Point(Z.anchorX,Z.anchorY),me=Xt(le,a?S:b),Ce=pr(_.cameraToCenterDistance,me.signedDistanceFromCamera),Ee=g.evaluateSizeForFeature(o.textSizeData,L,Z)*Ce/f.ONE_EM;a&&(Ee*=o.tilePixelRatio/I);for(var Ie=Oh(te.anchor,te.width,te.height,te.textOffset,te.textBoxScale,Ee),Ne=a?Xt(le.add(Ie),b).point:me.point.add(s?Ie.rotate(-_.angle):Ie),Ke=o.allowVerticalPlacement&&Z.placedOrientation===f.WritingMode.vertical?Math.PI/2:0,We=0;We<Z.numGlyphs;We++)f.addDynamicAttributes(q,Ne,Ke);U&&Z.associatedIconIndex>=0&&(W[Z.associatedIconIndex]={shiftedAnchor:Ne,angle:Ke})}else Xn(Z.numGlyphs,q)}if(U){X.clear();for(var ut=o.icon.placedSymbolArray,wt=0;wt<ut.length;wt++){var Ct=ut.get(wt);if(Ct.hidden)Xn(Ct.numGlyphs,X);else{var Tt=W[wt];if(Tt)for(var ir=0;ir<Ct.numGlyphs;ir++)f.addDynamicAttributes(X,Tt.shiftedAnchor,Tt.angle);else Xn(Ct.numGlyphs,X)}}o.icon.dynamicLayoutVertexBuffer.updateData(X)}o.text.dynamicLayoutVertexBuffer.updateData(q)}function Bh(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function Ra(o,s,a,c,g,_,b,S,I,L,U,j){for(var q=o.context,X=q.gl,W=o.transform,re=S==="map",Z=I==="map",te=re&&a.layout.get("symbol-placement")!=="point",le=re&&!Z&&!te,me=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=!1,Ee=o.depthModeForSublayer(0,H.ReadOnly),Ie=a.layout.get("text-variable-anchor"),Ne=[],Ke=0,We=c;Ke<We.length;Ke+=1){var ut=We[Ke],wt=s.getTile(ut),Ct=wt.getBucket(a);if(Ct){var Tt=g?Ct.text:Ct.icon;if(Tt&&Tt.segments.get().length){var ir=Tt.programConfigurations.get(a.id),pt=g||Ct.sdfIcons,Lt=g?Ct.textSizeData:Ct.iconSizeData,Nt=Z||W.pitch!==0,zt=o.useProgram(Bh(pt,g,Ct),ir),Mt=f.evaluateSizeForZoom(Lt,W.zoom),Bt=void 0,Pt=[0,0],At=void 0,xn=void 0,Zr=null,qn=void 0;if(g)At=wt.glyphAtlasTexture,xn=X.LINEAR,Bt=wt.glyphAtlasTexture.size,Ct.iconsInText&&(Pt=wt.imageAtlasTexture.size,Zr=wt.imageAtlasTexture,qn=Nt||o.options.rotating||o.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?X.LINEAR:X.NEAREST);else{var kn=a.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;At=wt.imageAtlasTexture,xn=pt||o.options.rotating||o.options.zooming||kn||Nt?X.LINEAR:X.NEAREST,Bt=wt.imageAtlasTexture.size}var qr=Lr(wt,1,o.transform.zoom),Qr=Jr(ut.posMatrix,Z,re,o.transform,qr),wi=xr(ut.posMatrix,Z,re,o.transform,qr),ei=Ie&&Ct.hasTextData(),sa=a.layout.get("icon-text-fit")!=="none"&&ei&&Ct.hasIconData();te&&Ys(Ct,ut.posMatrix,o,g,Qr,wi,Z,L);var ui=o.translatePosMatrix(ut.posMatrix,wt,_,b),co=te||g&&Ie||sa?oo:Qr,Zi=o.translatePosMatrix(wi,wt,_,b,!0),vl=pt&&a.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vs={program:zt,buffers:Tt,uniformValues:pt?Ct.iconsInText?uu(Lt.kind,Mt,le,Z,o,ui,co,Zi,Bt,Pt):ol(Lt.kind,Mt,le,Z,o,ui,co,Zi,g,Bt,!0):cs(Lt.kind,Mt,le,Z,o,ui,co,Zi,g,Bt),atlasTexture:At,atlasTextureIcon:Zr,atlasInterpolation:xn,atlasInterpolationIcon:qn,isSDF:pt,hasHalo:vl};if(me&&Ct.canOverlap){Ce=!0;for(var la=0,_s=Tt.segments.get();la<_s.length;la+=1){var _l=_s[la];Ne.push({segments:new f.SegmentVector([_l]),sortKey:_l.sortKey,state:vs})}}else Ne.push({segments:Tt.segments,sortKey:0,state:vs})}}}Ce&&Ne.sort(function(ua,Ua){return ua.sortKey-Ua.sortKey});for(var So=0,xl=Ne;So<xl.length;So+=1){var To=xl[So],bn=To.state;if(q.activeTexture.set(X.TEXTURE0),bn.atlasTexture.bind(bn.atlasInterpolation,X.CLAMP_TO_EDGE),bn.atlasTextureIcon&&(q.activeTexture.set(X.TEXTURE1),bn.atlasTextureIcon&&bn.atlasTextureIcon.bind(bn.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),bn.isSDF){var Uo=bn.uniformValues;bn.hasHalo&&(Uo.u_is_halo=1,sl(bn.buffers,To.segments,a,o,bn.program,Ee,U,j,Uo)),Uo.u_is_halo=0}sl(bn.buffers,To.segments,a,o,bn.program,Ee,U,j,bn.uniformValues)}}function sl(o,s,a,c,g,_,b,S,I){var L=c.context;g.draw(L,L.gl.TRIANGLES,_,b,S,ce.disabled,I,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,c.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function cu(o,s,a,c,g,_,b){var S,I,L,U,j,q=o.context.gl,X=a.paint.get("fill-pattern"),W=X&&X.constantOr(1),re=a.getCrossfadeParameters();b?(I=W&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",S=q.LINES):(I=W?"fillPattern":"fill",S=q.TRIANGLES);for(var Z=0,te=c;Z<te.length;Z+=1){var le=te[Z],me=s.getTile(le);if(!W||me.patternsLoaded()){var Ce=me.getBucket(a);if(Ce){var Ee=Ce.programConfigurations.get(a.id),Ie=o.useProgram(I,Ee);W&&(o.context.activeTexture.set(q.TEXTURE0),me.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ee.updatePaintBuffers(re));var Ne=X.constantOr(null);if(Ne&&me.imageAtlas){var Ke=me.imageAtlas,We=Ke.patternPositions[Ne.to.toString()],ut=Ke.patternPositions[Ne.from.toString()];We&&ut&&Ee.setConstantPatternPositions(We,ut)}var wt=o.translatePosMatrix(le.posMatrix,me,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(b){U=Ce.indexBuffer2,j=Ce.segments2;var Ct=[q.drawingBufferWidth,q.drawingBufferHeight];L=I==="fillOutlinePattern"&&W?kh(wt,o,re,me,Ct):Ih(wt,Ct)}else U=Ce.indexBuffer,j=Ce.segments,L=W?Pa(wt,o,re,me):ta(wt);Ie.draw(o.context,S,g,o.stencilModeForClipping(le),_,ce.disabled,L,a.id,Ce.layoutVertexBuffer,U,j,a.paint,o.transform.zoom,Ee)}}}}function Dc(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=a.paint.get("fill-extrusion-pattern"),U=L.constantOr(1),j=a.getCrossfadeParameters(),q=a.paint.get("fill-extrusion-opacity"),X=0,W=c;X<W.length;X+=1){var re=W[X],Z=s.getTile(re),te=Z.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me=o.useProgram(U?"fillExtrusionPattern":"fillExtrusion",le);U&&(o.context.activeTexture.set(I.TEXTURE0),Z.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),le.updatePaintBuffers(j));var Ce=L.constantOr(null);if(Ce&&Z.imageAtlas){var Ee=Z.imageAtlas,Ie=Ee.patternPositions[Ce.to.toString()],Ne=Ee.patternPositions[Ce.from.toString()];Ie&&Ne&&le.setConstantPatternPositions(Ie,Ne)}var Ke=o.translatePosMatrix(re.posMatrix,Z,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),We=a.paint.get("fill-extrusion-vertical-gradient"),ut=U?ka(Ke,o,We,q,re,j,Z):Ah(Ke,o,We,q);me.draw(S,S.gl.TRIANGLES,g,_,b,ce.backCCW,ut,a.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,a.paint,o.transform.zoom,le)}}}function pu(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.fbo;if(I){var L=o.useProgram("hillshade");b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get());var U=function(j,q,X){var W=X.paint.get("hillshade-shadow-color"),re=X.paint.get("hillshade-highlight-color"),Z=X.paint.get("hillshade-accent-color"),te=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=j.transform.angle);var le,me,Ce,Ee=!j.options.moving;return{u_matrix:j.transform.calculatePosMatrix(q.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(le=q.tileID,me=Math.pow(2,le.canonical.z),Ce=le.canonical.y,[new f.MercatorCoordinate(0,Ce/me).toLngLat().lat,new f.MercatorCoordinate(0,(Ce+1)/me).toLngLat().lat]),u_light:[X.paint.get("hillshade-exaggeration"),te],u_shadow:W,u_highlight:re,u_accent:Z}}(o,s,a);L.draw(b,S.TRIANGLES,c,g,_,ce.disabled,U,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function um(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.dem;if(I&&I.data){var L=I.dim,U=I.stride,j=I.getPixels();if(b.activeTexture.set(S.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(U),s.demTexture){var q=s.demTexture;q.update(j,{premultiply:!1}),q.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else s.demTexture=new f.Texture(b,j,S.RGBA,{premultiply:!1}),s.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);b.activeTexture.set(S.TEXTURE0);var X=s.fbo;if(!X){var W=new f.Texture(b,{width:L,height:L,data:null},S.RGBA);W.bind(S.LINEAR,S.CLAMP_TO_EDGE),(X=s.fbo=b.createFramebuffer(L,L,!0)).colorAttachment.set(W.texture)}b.bindFramebuffer.set(X.framebuffer),b.viewport.set([0,0,L,L]),o.useProgram("hillshadePrepare").draw(b,S.TRIANGLES,c,g,_,ce.disabled,function(re,Z){var te=Z.stride,le=f.create();return f.ortho(le,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(le,le,[0,-f.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[te,te],u_zoom:re.overscaledZ,u_unpack:Z.getUnpackVector()}}(s.tileID,I),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function hu(o,s,a,c,g){var _=c.paint.get("raster-fade-duration");if(_>0){var b=f.browser.now(),S=(b-o.timeAdded)/_,I=s?(b-s.timeAdded)/_:-1,L=a.getSource(),U=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),j=!s||Math.abs(s.tileID.overscaledZ-U)>Math.abs(o.tileID.overscaledZ-U),q=j&&o.refreshedUponExpiration?1:f.clamp(j?S:1-I,0,1);return o.refreshedUponExpiration&&S>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}var Bc=new f.Color(1,0,0,1),Fh=new f.Color(0,1,0,1),Nh=new f.Color(0,0,1,1),fu=new f.Color(1,0,1,1),Fc=new f.Color(0,1,1,1);function Nc(o,s,a,c){ll(o,0,s+a/2,o.transform.width,a,c)}function Uc(o,s,a,c){ll(o,s-a/2,0,a,o.transform.height,c)}function ll(o,s,a,c,g,_){var b=o.context,S=b.gl;S.enable(S.SCISSOR_TEST),S.scissor(s*f.browser.devicePixelRatio,a*f.browser.devicePixelRatio,c*f.browser.devicePixelRatio,g*f.browser.devicePixelRatio),b.clear({color:_}),S.disable(S.SCISSOR_TEST)}function Uh(o,s,a){var c=o.context,g=c.gl,_=a.posMatrix,b=o.useProgram("debug"),S=H.disabled,I=K.disabled,L=o.colorModeForRenderPass();c.activeTexture.set(g.TEXTURE0),o.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),b.draw(c,g.LINE_STRIP,S,I,L,ce.disabled,za(_,f.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var U=s.getTileByID(a.key).latestRawTileData,j=Math.floor((U&&U.byteLength||0)/1024),q=s.getTile(a).tileSize,X=512/Math.min(q,512)*(a.overscaledZ/o.transform.zoom)*.5,W=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(W+=" => "+a.overscaledZ),function(re,Z){re.initDebugOverlayCanvas();var te=re.debugOverlayCanvas,le=re.context.gl,me=re.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,te.width,te.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(Z,5,5),me.strokeText(Z,5,5),re.debugOverlayTexture.update(te),re.debugOverlayTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE)}(o,W+" "+j+"kb"),b.draw(c,g.TRIANGLES,S,I,ae.alphaBlended,ce.disabled,za(_,f.Color.transparent,X),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var Oa={symbol:function(o,s,a,c,g){if(o.renderPass==="translucent"){var _=K.disabled,b=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(S,I,L,U,j,q,X){for(var W=I.transform,re=j==="map",Z=q==="map",te=0,le=S;te<le.length;te+=1){var me=le[te],Ce=U.getTile(me),Ee=Ce.getBucket(L);if(Ee&&Ee.text&&Ee.text.segments.get().length){var Ie=f.evaluateSizeForZoom(Ee.textSizeData,W.zoom),Ne=Lr(Ce,1,I.transform.zoom),Ke=Jr(me.posMatrix,Z,re,I.transform,Ne),We=L.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ie){var ut=Math.pow(2,W.zoom-Ce.tileID.overscaledZ);Dh(Ee,re,Z,X,f.symbolSize,W,Ke,me.posMatrix,ut,Ie,We)}}}}(c,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),g),a.paint.get("icon-opacity").constantOr(1)!==0&&Ra(o,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),_,b),a.paint.get("text-opacity").constantOr(1)!==0&&Ra(o,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),_,b),s.map.showCollisionBoxes&&(hs(o,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),hs(o,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("circle-opacity"),_=a.paint.get("circle-stroke-width"),b=a.paint.get("circle-stroke-opacity"),S=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||_.constantOr(1)!==0&&b.constantOr(1)!==0){for(var I=o.context,L=I.gl,U=o.depthModeForSublayer(0,H.ReadOnly),j=K.disabled,q=o.colorModeForRenderPass(),X=[],W=0;W<c.length;W++){var re=c[W],Z=s.getTile(re),te=Z.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me={programConfiguration:le,program:o.useProgram("circle",le),layoutVertexBuffer:te.layoutVertexBuffer,indexBuffer:te.indexBuffer,uniformValues:Oc(o,re,Z,a)};if(S)for(var Ce=0,Ee=te.segments.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce];X.push({segments:new f.SegmentVector([Ie]),sortKey:Ie.sortKey,state:me})}else X.push({segments:te.segments,sortKey:0,state:me})}}S&&X.sort(function(wt,Ct){return wt.sortKey-Ct.sortKey});for(var Ne=0,Ke=X;Ne<Ke.length;Ne+=1){var We=Ke[Ne],ut=We.state;ut.program.draw(I,L.TRIANGLES,U,j,q,ce.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,We.segments,a.paint,o.transform.zoom,ut.programConfiguration)}}}},heatmap:function(o,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var g=o.context,_=g.gl,b=K.disabled,S=new ae([_.ONE,_.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(X,W,re){var Z=X.gl;X.activeTexture.set(Z.TEXTURE1),X.viewport.set([0,0,W.width/4,W.height/4]);var te=re.heatmapFbo;if(te)Z.bindTexture(Z.TEXTURE_2D,te.colorAttachment.get()),X.bindFramebuffer.set(te.framebuffer);else{var le=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,le),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),te=re.heatmapFbo=X.createFramebuffer(W.width/4,W.height/4,!1),function(me,Ce,Ee,Ie){var Ne=me.gl;Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Ce.width/4,Ce.height/4,0,Ne.RGBA,me.extRenderToTextureHalfFloat?me.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Ee)}(X,W,le,te)}})(g,o,a),g.clear({color:f.Color.transparent});for(var I=0;I<c.length;I++){var L=c[I];if(!s.hasRenderableParent(L)){var U=s.getTile(L),j=U.getBucket(a);if(j){var q=j.programConfigurations.get(a.id);o.useProgram("heatmap",q).draw(g,_.TRIANGLES,H.disabled,b,S,ce.disabled,Mh(L.posMatrix,U,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,a.paint,o.transform.zoom,q)}}}g.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(X,W){var re=X.context,Z=re.gl,te=W.heatmapFbo;if(te){re.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,te.colorAttachment.get()),re.activeTexture.set(Z.TEXTURE1);var le=W.colorRampTexture;le||(le=W.colorRampTexture=new f.Texture(re,W.colorRamp,Z.RGBA)),le.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(re,Z.TRIANGLES,H.disabled,K.disabled,X.colorModeForRenderPass(),ce.disabled,function(me,Ce,Ee,Ie){var Ne=f.create();f.ortho(Ne,0,me.width,me.height,0,0,1);var Ke=me.context.gl;return{u_matrix:Ne,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}}(X,W),W.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,W.paint,X.transform.zoom)}}(o,a))},line:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("line-opacity"),_=a.paint.get("line-width");if(g.constantOr(1)!==0&&_.constantOr(1)!==0)for(var b=o.depthModeForSublayer(0,H.ReadOnly),S=o.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),L=a.paint.get("line-pattern"),U=L.constantOr(1),j=a.paint.get("line-gradient"),q=a.getCrossfadeParameters(),X=U?"linePattern":I?"lineSDF":j?"lineGradient":"line",W=o.context,re=W.gl,Z=!0,te=0,le=c;te<le.length;te+=1){var me=le[te],Ce=s.getTile(me);if(!U||Ce.patternsLoaded()){var Ee=Ce.getBucket(a);if(Ee){var Ie=Ee.programConfigurations.get(a.id),Ne=o.context.program.get(),Ke=o.useProgram(X,Ie),We=Z||Ke.program!==Ne,ut=L.constantOr(null);if(ut&&Ce.imageAtlas){var wt=Ce.imageAtlas,Ct=wt.patternPositions[ut.to.toString()],Tt=wt.patternPositions[ut.from.toString()];Ct&&Tt&&Ie.setConstantPatternPositions(Ct,Tt)}var ir=U?su(o,Ce,a,q):I?sm(o,Ce,a,I,q):j?Ar(o,Ce,a,Ee.lineClipsArray.length):il(o,Ce,a);if(U)W.activeTexture.set(re.TEXTURE0),Ce.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),Ie.updatePaintBuffers(q);else if(I&&(We||o.lineAtlas.dirty))W.activeTexture.set(re.TEXTURE0),o.lineAtlas.bind(W);else if(j){var pt=Ee.gradients[a.id],Lt=pt.texture;if(a.gradientVersion!==pt.version){var Nt=256;if(a.stepInterpolant){var zt=s.getSource().maxzoom,Mt=me.canonical.z===zt?Math.ceil(1<<o.transform.maxZoom-me.canonical.z):1;Nt=f.clamp(f.nextPowerOfTwo(Ee.maxLineLength/f.EXTENT*1024*Mt),256,W.maxTextureSize)}pt.gradient=f.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Nt,image:pt.gradient||void 0,clips:Ee.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new f.Texture(W,pt.gradient,re.RGBA),pt.version=a.gradientVersion,Lt=pt.texture}W.activeTexture.set(re.TEXTURE0),Lt.bind(a.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}Ke.draw(W,re.TRIANGLES,b,o.stencilModeForClipping(me),S,ce.disabled,ir,a.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,a.paint,o.transform.zoom,Ie,Ee.layoutVertexBuffer2),Z=!1}}}}},fill:function(o,s,a,c){var g=a.paint.get("fill-color"),_=a.paint.get("fill-opacity");if(_.constantOr(1)!==0){var b=o.colorModeForRenderPass(),S=a.paint.get("fill-pattern"),I=o.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(f.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===I){var L=o.depthModeForSublayer(1,o.renderPass==="opaque"?H.ReadWrite:H.ReadOnly);cu(o,s,a,c,L,b,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var U=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,H.ReadOnly);cu(o,s,a,c,U,b,!0)}}},"fill-extrusion":function(o,s,a,c){var g=a.paint.get("fill-extrusion-opacity");if(g!==0&&o.renderPass==="translucent"){var _=new H(o.context.gl.LEQUAL,H.ReadWrite,o.depthRangeFor3D);if(g!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Dc(o,s,a,c,_,K.disabled,ae.disabled),Dc(o,s,a,c,_,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var b=o.colorModeForRenderPass();Dc(o,s,a,c,_,K.disabled,b)}}},hillshade:function(o,s,a,c){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var g=o.context,_=o.depthModeForSublayer(0,H.ReadOnly),b=o.colorModeForRenderPass(),S=o.renderPass==="translucent"?o.stencilConfigForOverlap(c):[{},c],I=S[0],L=0,U=S[1];L<U.length;L+=1){var j=U[L],q=s.getTile(j);q.needsHillshadePrepare&&o.renderPass==="offscreen"?um(o,q,a,_,K.disabled,b):o.renderPass==="translucent"&&pu(o,q,a,_,I[j.overscaledZ],b)}g.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,c){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var g=o.context,_=g.gl,b=s.getSource(),S=o.useProgram("raster"),I=o.colorModeForRenderPass(),L=b instanceof Te?[{},c]:o.stencilConfigForOverlap(c),U=L[0],j=L[1],q=j[j.length-1].overscaledZ,X=!o.options.moving,W=0,re=j;W<re.length;W+=1){var Z=re[W],te=o.depthModeForSublayer(Z.overscaledZ-q,a.paint.get("raster-opacity")===1?H.ReadWrite:H.ReadOnly,_.LESS),le=s.getTile(Z),me=o.transform.calculatePosMatrix(Z.toUnwrapped(),X);le.registerFadeDuration(a.paint.get("raster-fade-duration"));var Ce=s.findLoadedParent(Z,0),Ee=hu(le,Ce,s,a,o.transform),Ie=void 0,Ne=void 0,Ke=a.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;g.activeTexture.set(_.TEXTURE0),le.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(_.TEXTURE1),Ce?(Ce.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,Ce.tileID.overscaledZ-le.tileID.overscaledZ),Ne=[le.tileID.canonical.x*Ie%1,le.tileID.canonical.y*Ie%1]):le.texture.bind(Ke,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);var We=lm(me,Ne||[0,0],Ie||1,Ee,a);b instanceof Te?S.draw(g,_.TRIANGLES,te,K.disabled,I,ce.disabled,We,a.id,b.boundsBuffer,o.quadTriangleIndexBuffer,b.boundsSegments):S.draw(g,_.TRIANGLES,te,U[Z.overscaledZ],I,ce.disabled,We,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var c=a.paint.get("background-color"),g=a.paint.get("background-opacity");if(g!==0){var _=o.context,b=_.gl,S=o.transform,I=S.tileSize,L=a.paint.get("background-pattern");if(!o.isPatternMissing(L)){var U=!L&&c.a===1&&g===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===U){var j=K.disabled,q=o.depthModeForSublayer(0,U==="opaque"?H.ReadWrite:H.ReadOnly),X=o.colorModeForRenderPass(),W=o.useProgram(L?"backgroundPattern":"background"),re=S.coveringTiles({tileSize:I});L&&(_.activeTexture.set(b.TEXTURE0),o.imageManager.bind(o.context));for(var Z=a.getCrossfadeParameters(),te=0,le=re;te<le.length;te+=1){var me=le[te],Ce=o.transform.calculatePosMatrix(me.toUnwrapped()),Ee=L?ps(Ce,g,o,L,{tileID:me,tileSize:I},Z):al(Ce,g,c);W.draw(_,b.TRIANGLES,q,j,X,ce.disabled,Ee,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var c=0;c<a.length;c++)Uh(o,s,a[c])},custom:function(o,s,a){var c=o.context,g=a.implementation;if(o.renderPass==="offscreen"){var _=g.prerender;_&&(o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),_.call(g,c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),c.setStencilMode(K.disabled);var b=g.renderingMode==="3d"?new H(o.context.gl.LEQUAL,H.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,H.ReadOnly);c.setDepthMode(b),g.render(c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState(),c.bindFramebuffer.set(null)}}},Rr=function(o,s){this.context=new V(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wo,this.gpuTimers={}};Rr.prototype.resize=function(o,s){if(this.width=o*f.browser.devicePixelRatio,this.height=s*f.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},Rr.prototype.setup=function(){var o=this.context,s=new f.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(f.EXTENT,0),s.emplaceBack(0,f.EXTENT),s.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,on.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);var a=new f.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(f.EXTENT,0),a.emplaceBack(0,f.EXTENT),a.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=o.createVertexBuffer(a,on.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);var c=new f.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(f.EXTENT,0,f.EXTENT,0),c.emplaceBack(0,f.EXTENT,0,f.EXTENT),c.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(c,Je.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);var g=new f.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(g,on.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);var _=new f.StructArrayLayout1ui2;_.emplaceBack(0),_.emplaceBack(1),_.emplaceBack(3),_.emplaceBack(2),_.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(_);var b=new f.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(b),this.emptyTexture=new f.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var S=this.context.gl;this.stencilClearMode=new K({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)},Rr.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=f.create();f.ortho(a,0,this.width,this.height,0,0,1),f.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,H.disabled,this.stencilClearMode,ae.disabled,ce.disabled,La(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Rr.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ae.disabled),a.setDepthMode(H.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var _=0,b=s;_<b.length;_+=1){var S=b[_],I=this._tileClippingMaskIDs[S.key]=this.nextStencilID++;g.draw(a,c.TRIANGLES,H.disabled,new K({func:c.ALWAYS,mask:0},I,255,c.KEEP,c.KEEP,c.REPLACE),ae.disabled,ce.disabled,La(S.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Rr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new K({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},Rr.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new K({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},Rr.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,c=o.sort(function(I,L){return L.overscaledZ-I.overscaledZ}),g=c[c.length-1].overscaledZ,_=c[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();for(var b={},S=0;S<_;S++)b[S+g]=new K({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=_,[b,c]}return[(s={},s[g]=K.disabled,s),c]},Rr.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ae([o.CONSTANT_COLOR,o.ONE],new f.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ae.unblended:ae.alphaBlended},Rr.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return H.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new H(a||this.context.gl.LEQUAL,s,[c,c])},Rr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Rr.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(f.browser.now()),this.imageManager.beginFrame();var c=this.style._order,g=this.style.sourceCaches;for(var _ in g){var b=g[_];b.used&&b.prepare(this.context)}var S,I,L={},U={},j={};for(var q in g){var X=g[q];L[q]=X.getVisibleCoordinates(),U[q]=L[q].slice().reverse(),j[q]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var W=0;W<c.length;W++)if(this.style._layers[c[W]].is3D()){this.opaquePassCutoff=W;break}this.renderPass="offscreen";for(var re=0,Z=c;re<Z.length;re+=1){var te=this.style._layers[Z[re]];if(te.hasOffscreenPass()&&!te.isHidden(this.transform.zoom)){var le=U[te.source];(te.type==="custom"||le.length)&&this.renderLayer(this,g[te.source],te,le)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var me=this.style._layers[c[this.currentLayer]],Ce=g[me.source],Ee=L[me.source];this._renderTileClippingMasks(me,Ee),this.renderLayer(this,Ce,me,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ie=this.style._layers[c[this.currentLayer]],Ne=g[Ie.source],Ke=(Ie.type==="symbol"?j:U)[Ie.source];this._renderTileClippingMasks(Ie,L[Ie.source]),this.renderLayer(this,Ne,Ie,Ke)}this.options.showTileBoundaries&&(f.values(this.style._layers).forEach(function(We){We.source&&!We.isHidden(a.transform.zoom)&&(We.source!==(I&&I.id)&&(I=a.style.sourceCaches[We.source]),(!S||S.getSource().maxzoom<I.getSource().maxzoom)&&(S=I))}),S&&Oa.debug(this,S,S.getVisibleCoordinates())),this.options.showPadding&&function(We){var ut=We.transform.padding;Nc(We,We.transform.height-(ut.top||0),3,Bc),Nc(We,ut.bottom||0,3,Fh),Uc(We,ut.left||0,3,Nh),Uc(We,We.transform.width-(ut.right||0),3,fu);var wt=We.transform.centerPoint;(function(Ct,Tt,ir,pt){ll(Ct,Tt-1,ir-10,2,20,pt),ll(Ct,Tt-10,ir-1,20,2,pt)})(We,wt.x,We.transform.height-wt.y,Fc)}(this),this.context.setDefault()},Rr.prototype.renderLayer=function(o,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),Oa[a.type](o,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Rr.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Rr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Rr.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Rr.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var c=o[a],g=this.context.extTimerQuery,_=g.getQueryObjectEXT(c.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(c.query),s[a]=_}return s},Rr.prototype.translatePosMatrix=function(o,s,a,c,g){if(!a[0]&&!a[1])return o;var _=g?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(_){var b=Math.sin(_),S=Math.cos(_);a=[a[0]*S-a[1]*b,a[0]*b+a[1]*S]}var I=[g?a[0]:Lr(s,a[0],this.transform.zoom),g?a[1]:Lr(s,a[1],this.transform.zoom),0],L=new Float32Array(16);return f.translate(L,o,I),L},Rr.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},Rr.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},Rr.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},Rr.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new Th(this.context,o,am[o],s,Rh[o],this._showOverdrawInspector)),this.cache[a]},Rr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Rr.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Rr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Rr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var du=function(o,s){this.points=o,this.planes=s};du.fromInvProjectionMatrix=function(o,s,a){var c=Math.pow(2,a),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(b){return f.transformMat4([],b,o)}).map(function(b){return f.scale$1([],b,1/b[3]/s*c)}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(b){var S=f.sub([],g[b[0]],g[b[1]]),I=f.sub([],g[b[2]],g[b[1]]),L=f.normalize([],f.cross([],S,I)),U=-f.dot(L,g[b[1]]);return L.concat(U)});return new du(g,_)};var Da=function(o,s){this.min=o,this.max=s,this.center=f.scale$2([],f.add([],this.min,this.max),.5)};Da.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=f.clone$2(this.min),c=f.clone$2(this.max),g=0;g<s.length;g++)a[g]=s[g]?this.min[g]:this.center[g],c[g]=s[g]?this.center[g]:this.max[g];return c[2]=this.max[2],new Da(a,c)},Da.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},Da.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},Da.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<o.planes.length;c++){for(var g=o.planes[c],_=0,b=0;b<s.length;b++)_+=f.dot$1(g,s[b])>=0;if(_===0)return 0;_!==s.length&&(a=!1)}if(a)return 2;for(var S=0;S<3;S++){for(var I=Number.MAX_VALUE,L=-Number.MAX_VALUE,U=0;U<o.points.length;U++){var j=o.points[U][S]-this.min[S];I=Math.min(I,j),L=Math.max(L,j)}if(L<0||I>this.max[S]-this.min[S])return 0}return 1};var ra=function(o,s,a,c){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=c};ra.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=f.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=f.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=f.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=f.number(o.right,s.right,a)),this},ra.prototype.getCenter=function(o,s){var a=f.clamp((this.left+o-this.right)/2,0,o),c=f.clamp((this.top+s-this.bottom)/2,0,s);return new f.Point(a,c)},ra.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},ra.prototype.clone=function(){return new ra(this.top,this.bottom,this.left,this.right)},ra.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Yt=function(o,s,a,c,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ra,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ir={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Yt.prototype.clone=function(){var o=new Yt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},Ir.minZoom.get=function(){return this._minZoom},Ir.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},Ir.maxZoom.get=function(){return this._maxZoom},Ir.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},Ir.minPitch.get=function(){return this._minPitch},Ir.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},Ir.maxPitch.get=function(){return this._maxPitch},Ir.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},Ir.renderWorldCopies.get=function(){return this._renderWorldCopies},Ir.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},Ir.worldSize.get=function(){return this.tileSize*this.scale},Ir.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ir.size.get=function(){return new f.Point(this.width,this.height)},Ir.bearing.get=function(){return-this.angle/Math.PI*180},Ir.bearing.set=function(o){var s=-f.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=f.create$2(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ir.pitch.get=function(){return this._pitch/Math.PI*180},Ir.pitch.set=function(o){var s=f.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Ir.fov.get=function(){return this._fov/Math.PI*180},Ir.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},Ir.zoom.get=function(){return this._zoom},Ir.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Ir.center.get=function(){return this._center},Ir.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},Ir.padding.get=function(){return this._edgeInsets.toJSON()},Ir.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},Ir.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Yt.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},Yt.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},Yt.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},Yt.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new f.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new f.Point(0,0)),c=this.pointCoordinate(new f.Point(this.width,0)),g=this.pointCoordinate(new f.Point(this.width,this.height)),_=this.pointCoordinate(new f.Point(0,this.height)),b=Math.floor(Math.min(a.x,c.x,g.x,_.x)),S=Math.floor(Math.max(a.x,c.x,g.x,_.x)),I=b-1;I<=S+1;I++)I!==0&&s.push(new f.UnwrappedTileID(I,o));return s},Yt.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var c=f.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,s),_=[g*c.x,g*c.y,0],b=du.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),S=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(S=s);var I=function(We){return{aabb:new Da([We*g,0,0],[(We+1)*g,g,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}},L=[],U=[],j=s,q=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var X=1;X<=3;X++)L.push(I(-X)),L.push(I(X));for(L.push(I(0));L.length>0;){var W=L.pop(),re=W.x,Z=W.y,te=W.fullyVisible;if(!te){var le=W.aabb.intersects(b);if(le===0)continue;te=le===2}var me=W.aabb.distanceX(_),Ce=W.aabb.distanceY(_),Ee=Math.max(Math.abs(me),Math.abs(Ce));if(W.zoom===j||Ee>3+(1<<j-W.zoom)-2&&W.zoom>=S)U.push({tileID:new f.OverscaledTileID(W.zoom===j?q:W.zoom,W.wrap,W.zoom,re,Z),distanceSq:f.sqrLen([_[0]-.5-re,_[1]-.5-Z])});else for(var Ie=0;Ie<4;Ie++){var Ne=(re<<1)+Ie%2,Ke=(Z<<1)+(Ie>>1);L.push({aabb:W.aabb.quadrant(Ie),zoom:W.zoom+1,x:Ne,y:Ke,wrap:W.wrap,fullyVisible:te})}}return U.sort(function(We,ut){return We.distanceSq-ut.distanceSq}).map(function(We){return We.tileID})},Yt.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},Ir.unmodified.get=function(){return this._unmodified},Yt.prototype.zoomScale=function(o){return Math.pow(2,o)},Yt.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},Yt.prototype.project=function(o){var s=f.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.Point(f.mercatorXfromLng(o.lng)*this.worldSize,f.mercatorYfromLat(s)*this.worldSize)},Yt.prototype.unproject=function(o){return new f.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},Ir.point.get=function(){return this.project(this.center)},Yt.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(o),_=new f.MercatorCoordinate(g.x-(a.x-c.x),g.y-(a.y-c.y));this.center=this.coordinateLocation(_),this._renderWorldCopies&&(this.center=this.center.wrap())},Yt.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},Yt.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},Yt.prototype.locationCoordinate=function(o){return f.MercatorCoordinate.fromLngLat(o)},Yt.prototype.coordinateLocation=function(o){return o.toLngLat()},Yt.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];f.transformMat4(s,s,this.pixelMatrixInverse),f.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],g=a[3],_=s[1]/c,b=a[1]/g,S=s[2]/c,I=a[2]/g,L=(0-S)/(I-S);return new f.MercatorCoordinate(f.number(s[0]/c,a[0]/g,L)/this.worldSize,f.number(_,b,L)/this.worldSize)},Yt.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix),new f.Point(s[0]/s[3],s[1]/s[3])},Yt.prototype.getBounds=function(){return new f.LngLatBounds().extend(this.pointLocation(new f.Point(0,0))).extend(this.pointLocation(new f.Point(this.width,0))).extend(this.pointLocation(new f.Point(this.width,this.height))).extend(this.pointLocation(new f.Point(0,this.height)))},Yt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Yt.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Yt.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var g=o.canonical,_=this.worldSize/this.zoomScale(g.z),b=g.x+Math.pow(2,g.z)*o.wrap,S=f.identity(new Float64Array(16));return f.translate(S,S,[b*_,g.y*_,0]),f.scale(S,S,[_/f.EXTENT,_/f.EXTENT,1]),f.multiply(S,s?this.alignedProjMatrix:this.projMatrix,S),c[a]=new Float32Array(S),c[a]},Yt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Yt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,c,g=-90,_=90,b=-180,S=180,I=this.size,L=this._unmodified;if(this.latRange){var U=this.latRange;g=f.mercatorYfromLat(U[1])*this.worldSize,o=(_=f.mercatorYfromLat(U[0])*this.worldSize)-g<I.y?I.y/(_-g):0}if(this.lngRange){var j=this.lngRange;b=f.mercatorXfromLng(j[0])*this.worldSize,s=(S=f.mercatorXfromLng(j[1])*this.worldSize)-b<I.x?I.x/(S-b):0}var q=this.point,X=Math.max(s||0,o||0);if(X)return this.center=this.unproject(new f.Point(s?(S+b)/2:q.x,o?(_+g)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=L,void(this._constraining=!1);if(this.latRange){var W=q.y,re=I.y/2;W-re<g&&(c=g+re),W+re>_&&(c=_-re)}if(this.lngRange){var Z=q.x,te=I.x/2;Z-te<b&&(a=b+te),Z+te>S&&(a=S-te)}a===void 0&&c===void 0||(this.center=this.unproject(new f.Point(a!==void 0?a:q.x,c!==void 0?c:q.y))),this._unmodified=L,this._constraining=!1}},Yt.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-s-a,.01,Math.PI-.01)),g=this.point,_=g.x,b=g.y,S=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),I=this.height/50,L=new Float64Array(16);f.perspective(L,this._fov,this.width/this.height,I,S),L[8]=2*-o.x/this.width,L[9]=2*o.y/this.height,f.scale(L,L,[1,-1,1]),f.translate(L,L,[0,0,-this.cameraToCenterDistance]),f.rotateX(L,L,this._pitch),f.rotateZ(L,L,this.angle),f.translate(L,L,[-_,-b,0]),this.mercatorMatrix=f.scale([],L,[this.worldSize,this.worldSize,this.worldSize]),f.scale(L,L,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=L,this.invProjMatrix=f.invert([],this.projMatrix);var U=this.width%2/2,j=this.height%2/2,q=Math.cos(this.angle),X=Math.sin(this.angle),W=_-Math.round(_)+q*U+X*j,re=b-Math.round(b)+q*j+X*U,Z=new Float64Array(L);if(f.translate(Z,Z,[W>.5?W-1:W,re>.5?re-1:re,0]),this.alignedProjMatrix=Z,L=f.create(),f.scale(L,L,[this.width/2,-this.height/2,1]),f.translate(L,L,[1,-1,0]),this.labelPlaneMatrix=L,L=f.create(),f.scale(L,L,[1,-1,1]),f.translate(L,L,[-1,-1,0]),f.scale(L,L,[2/this.width,2/this.height,1]),this.glCoordMatrix=L,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(L=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=L,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new f.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Yt.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.Point(0,o))},Yt.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,c=s.y,g=s.x,_=s.y,b=0,S=o;b<S.length;b+=1){var I=S[b];a=Math.min(a,I.x),c=Math.min(c,I.y),g=Math.max(g,I.x),_=Math.max(_,I.y)}return[new f.Point(a,c),new f.Point(g,c),new f.Point(g,_),new f.Point(a,_),new f.Point(a,c)]},Object.defineProperties(Yt.prototype,Ir);var zi=function(o){var s,a,c,g;this._hashName=o&&encodeURIComponent(o),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,g=function(){c=null,a&&(s(),c=setTimeout(g,300),a=!1)},function(){return a=!0,c||g(),c})};zi.prototype.addTo=function(o){return this._map=o,f.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},zi.prototype.remove=function(){return f.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},zi.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,c),_=Math.round(s.lng*g)/g,b=Math.round(s.lat*g)/g,S=this._map.getBearing(),I=this._map.getPitch(),L="";if(L+=o?"/"+_+"/"+b+"/"+a:a+"/"+b+"/"+_,(S||I)&&(L+="/"+Math.round(10*S)/10),I&&(L+="/"+Math.round(I)),this._hashName){var U=this._hashName,j=!1,q=f.window.location.hash.slice(1).split("&").map(function(X){var W=X.split("=")[0];return W===U?(j=!0,W+"="+L):X}).filter(function(X){return X});return j||q.push(U+"="+L),"#"+q.join("&")}return"#"+L},zi.prototype._getCurrentHash=function(){var o,s=this,a=f.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(o=c)}),(o&&o[1]||"").split("/")):a.split("/")},zi.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},zi.prototype._updateHashUnthrottled=function(){var o=f.window.location.href.replace(/(#.+)?$/,this.getHashString());try{f.window.history.replaceState(f.window.history.state,null,o)}catch{}};var ul={linearity:.3,easing:f.bezier(0,0,.3,1)},fs=f.extend({deceleration:2500,maxSpeed:1400},ul),cl=f.extend({deceleration:20,maxSpeed:1400},ul),cm=f.extend({deceleration:1e3,maxSpeed:360},ul),pm=f.extend({deceleration:1e3,maxSpeed:90},ul),pl=function(o){this._map=o,this.clear()};function hl(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function Bo(o,s,a){var c=a.maxSpeed,g=a.linearity,_=a.deceleration,b=f.clamp(o*g/(s/1e3),-c,c),S=Math.abs(b)/(_*g);return{easing:a.easing,duration:1e3*S,amount:b*(S/2)}}pl.prototype.clear=function(){this._inertiaBuffer=[]},pl.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.browser.now(),settings:o})},pl.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=f.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},pl.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new f.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var g=c[a].settings;s.zoom+=g.zoomDelta||0,s.bearing+=g.bearingDelta||0,s.pitch+=g.pitchDelta||0,g.panDelta&&s.pan._add(g.panDelta),g.around&&(s.around=g.around),g.pinchAround&&(s.pinchAround=g.pinchAround)}var _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(s.pan.mag()){var S=Bo(s.pan.mag(),_,f.extend({},fs,o||{}));b.offset=s.pan.mult(S.amount/s.pan.mag()),b.center=this._map.transform.center,hl(b,S)}if(s.zoom){var I=Bo(s.zoom,_,cl);b.zoom=this._map.transform.zoom+I.amount,hl(b,I)}if(s.bearing){var L=Bo(s.bearing,_,cm);b.bearing=this._map.transform.bearing+f.clamp(L.amount,-179,179),hl(b,L)}if(s.pitch){var U=Bo(s.pitch,_,pm);b.pitch=this._map.transform.pitch+U.amount,hl(b,U)}if(b.zoom||b.bearing){var j=s.pinchAround===void 0?s.around:s.pinchAround;b.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),f.extend(b,{noMoveStart:!0})}};var hn=function(o){function s(c,g,_,b){b===void 0&&(b={});var S=Y.mousePos(g.getCanvasContainer(),_),I=g.unproject(S);o.call(this,c,f.extend({point:S,lngLat:I,originalEvent:_},b)),this._defaultPrevented=!1,this.target=g}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),fl=function(o){function s(c,g,_){var b=c==="touchend"?_.changedTouches:_.touches,S=Y.touchPos(g.getCanvasContainer(),b),I=S.map(function(j){return g.unproject(j)}),L=S.reduce(function(j,q,X,W){return j.add(q.div(W.length))},new f.Point(0,0)),U=g.unproject(L);o.call(this,c,{points:S,point:L,lngLats:I,lngLat:U,originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),Vh=function(o){function s(c,g,_){o.call(this,c,{originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),an=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};an.prototype.reset=function(){delete this._mousedownPos},an.prototype.wheel=function(o){return this._firePreventable(new Vh(o.type,this._map,o))},an.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new hn(o.type,this._map,o))},an.prototype.mouseup=function(o){this._map.fire(new hn(o.type,this._map,o))},an.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new hn(o.type,this._map,o))},an.prototype.dblclick=function(o){return this._firePreventable(new hn(o.type,this._map,o))},an.prototype.mouseover=function(o){this._map.fire(new hn(o.type,this._map,o))},an.prototype.mouseout=function(o){this._map.fire(new hn(o.type,this._map,o))},an.prototype.touchstart=function(o){return this._firePreventable(new fl(o.type,this._map,o))},an.prototype.touchmove=function(o){this._map.fire(new fl(o.type,this._map,o))},an.prototype.touchend=function(o){this._map.fire(new fl(o.type,this._map,o))},an.prototype.touchcancel=function(o){this._map.fire(new fl(o.type,this._map,o))},an.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},an.prototype.isEnabled=function(){return!0},an.prototype.isActive=function(){return!1},an.prototype.enable=function(){},an.prototype.disable=function(){};var ft=function(o){this._map=o};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(o){this._map.fire(new hn(o.type,this._map,o))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new hn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var yi=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function mu(o,s){for(var a={},c=0;c<o.length;c++)a[o[c].identifier]=s[c];return a}yi.prototype.isEnabled=function(){return!!this._enabled},yi.prototype.isActive=function(){return!!this._active},yi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},yi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yi.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(Y.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},yi.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=Y.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var g=Math.min(c.x,a.x),_=Math.max(c.x,a.x),b=Math.min(c.y,a.y),S=Math.max(c.y,a.y);Y.setTransform(this._box,"translate("+g+"px,"+b+"px)"),this._box.style.width=_-g+"px",this._box.style.height=S-b+"px"}}},yi.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var c=this._startPos,g=s;if(this.reset(),Y.suppressClick(),c.x!==g.x||c.y!==g.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(_){return _.fitScreenCoordinates(c,g,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},yi.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},yi.prototype.blur=function(){this.reset()},yi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos},yi.prototype._fireEvent=function(o,s){return this._map.fire(new f.Event(o,{originalEvent:s}))};var ds=function(o){this.reset(),this.numTouches=o.numTouches};ds.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ds.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var g=new f.Point(0,0),_=0,b=c;_<b.length;_+=1)g._add(b[_]);return g.div(c.length)}(s),this.touches=mu(a,s)))},ds.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var c=mu(a,s);for(var g in this.touches){var _=c[g];(!_||_.dist(this.touches[g])>30)&&(this.aborted=!0)}}},ds.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var ao=function(o){this.singleTap=new ds(o),this.numTaps=o.numTaps,this.reset()};ao.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ao.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},ao.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},ao.prototype.touchend=function(o,s,a){var c=this.singleTap.touchend(o,s,a);if(c){var g=o.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(c)<30;if(g&&_||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var vi=function(){this._zoomIn=new ao({numTouches:1,numTaps:2}),this._zoomOut=new ao({numTouches:2,numTaps:1}),this.reset()};vi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vi.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},vi.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},vi.prototype.touchend=function(o,s,a){var c=this,g=this._zoomIn.touchend(o,s,a),_=this._zoomOut.touchend(o,s,a);return g?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(g)},{originalEvent:o})}}):_?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(_)},{originalEvent:o})}}):void 0},vi.prototype.touchcancel=function(){this.reset()},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var Vc={0:1,2:2},rt=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(o,s){return!1},rt.prototype._move=function(o,s){return{}},rt.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=Y.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},rt.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(c,g){var _=Vc[g];return c.buttons===void 0||(c.buttons&_)!==_}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},rt.prototype.mouseupWindow=function(o){this._lastPoint&&Y.mouseButton(o)===this._eventButton&&(this._moved&&Y.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var jc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,c){o.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}(rt),gu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=.8*(c.x-a.x);if(g)return this._active=!0,{bearingDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),qc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=-.5*(c.y-a.y);if(g)return this._active=!0,{pitchDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),ji=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};ji.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new f.Point(0,0)},ji.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},ji.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},ji.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},ji.prototype.touchcancel=function(){this.reset()},ji.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var c=mu(a,s),g=new f.Point(0,0),_=new f.Point(0,0),b=0;for(var S in c){var I=c[S],L=this._touches[S];L&&(g._add(I),_._add(I.sub(L)),b++,c[S]=I)}if(this._touches=c,!(b<this._minTouches)&&_.mag()){var U=_.div(b);if(this._sum._add(U),!(this._sum.mag()<this._clickTolerance))return{around:g.div(b),panDelta:U}}},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var _i=function(){this.reset()};function yu(o,s,a){for(var c=0;c<o.length;c++)if(o[c].identifier===a)return s[c]}function vu(o,s){return Math.log(o/s)/Math.LN2}_i.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},_i.prototype._start=function(o){},_i.prototype._move=function(o,s,a){return{}},_i.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},_i.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var c=this._firstTwoTouches,g=c[1],_=yu(a,s,c[0]),b=yu(a,s,g);if(_&&b){var S=this._aroundCenter?null:_.add(b).div(2);return this._move([_,b],S,o)}}},_i.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,g=c[1],_=yu(a,s,c[0]),b=yu(a,s,g);_&&b||(this._active&&Y.suppressClick(),this.reset())}},_i.prototype.touchcancel=function(){this.reset()},_i.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},_i.prototype.disable=function(){this._enabled=!1,this.reset()},_i.prototype.isEnabled=function(){return this._enabled},_i.prototype.isActive=function(){return this._active};var xi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(vu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vu(this._distance,g),pinchAround:c}},s}(_i);function Fo(o,s){return 180*o.angleWith(s)/Math.PI}var jh=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fo(this._vector,g),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,g=Fo(a,this._startVector);return Math.abs(g)<c},s}(_i);function dl(o){return Math.abs(o.y)>Math.abs(o.x)}var Hc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,dl(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,g){var _=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,b,g.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,g){if(this._valid!==void 0)return this._valid;var _=a.mag()>=2,b=c.mag()>=2;if(_||b){if(!_||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var S=a.y>0==c.y>0;return dl(a)&&dl(c)&&S}},s}(_i),Zc={panStep:100,bearingStep:15,pitchStep:10},so=function(){var o=Zc;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function Li(o){return o*(2-o)}so.prototype.blur=function(){this.reset()},so.prototype.reset=function(){this._active=!1},so.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,c=0,g=0,_=0,b=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?c=-1:(o.preventDefault(),_=-1);break;case 39:o.shiftKey?c=1:(o.preventDefault(),_=1);break;case 38:o.shiftKey?g=1:(o.preventDefault(),b=-1);break;case 40:o.shiftKey?g=-1:(o.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(c=0,g=0),{cameraAnimation:function(S){var I=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Li,zoom:a?Math.round(I)+a*(o.shiftKey?2:1):I,bearing:S.getBearing()+c*s._bearingStep,pitch:S.getPitch()+g*s._pitchStep,offset:[-_*s._panStep,-b*s._panStep],center:S.getCenter()},{originalEvent:o})}}}},so.prototype.enable=function(){this._enabled=!0},so.prototype.disable=function(){this._enabled=!1,this.reset()},so.prototype.isEnabled=function(){return this._enabled},so.prototype.isActive=function(){return this._active},so.prototype.disableRotation=function(){this._rotationDisabled=!0},so.prototype.enableRotation=function(){this._rotationDisabled=!1};var $t=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,f.bindAll(["_onTimeout"],this)};$t.prototype.setZoomRate=function(o){this._defaultZoomRate=o},$t.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},$t.prototype.isEnabled=function(){return!!this._enabled},$t.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},$t.prototype.isZooming=function(){return!!this._zooming},$t.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},$t.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$t.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=f.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},$t.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},$t.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=Y.mousePos(this._el,o);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},$t.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var g=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(g*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var _,b=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,S=this._startZoom,I=this._easing,L=!1;if(this._type==="wheel"&&S&&I){var U=Math.min((f.browser.now()-this._lastWheelEventTime)/200,1),j=I(U);_=f.number(S,b,j),U<1?this._frameId||(this._frameId=!0):L=!0}else _=b,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:_-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},$t.prototype._smoothOutEasing=function(o){var s=f.ease;if(this._prevEase){var a=this._prevEase,c=(f.browser.now()-a.start)/a.duration,g=a.easing(c+.01)-a.easing(c),_=.27/Math.sqrt(g*g+1e-4)*.01,b=Math.sqrt(.0729-_*_);s=f.bezier(_,b,.25,1)}return this._prevEase={start:f.browser.now(),duration:o,easing:s},s},$t.prototype.blur=function(){this.reset()},$t.prototype.reset=function(){this._active=!1};var bo=function(o,s){this._clickZoom=o,this._tapZoom=s};bo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},bo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},bo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},bo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var qi=function(){this.reset()};qi.prototype.reset=function(){this._active=!1},qi.prototype.blur=function(){this.reset()},qi.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Bn=function(){this._tap=new ao({numTouches:1,numTaps:1}),this.reset()};Bn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Bn.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},Bn.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],g=c.y-this._swipePoint.y;return this._swipePoint=c,o.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(o,s,a)},Bn.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},Bn.prototype.touchcancel=function(){this.reset()},Bn.prototype.enable=function(){this._enabled=!0},Bn.prototype.disable=function(){this._enabled=!1,this.reset()},Bn.prototype.isEnabled=function(){return this._enabled},Bn.prototype.isActive=function(){return this._active};var Ba=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};Ba.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ba.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ba.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ba.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var na=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};na.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},na.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},na.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},na.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var lo=function(o,s,a,c){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};lo.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},lo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},lo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},lo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},lo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},lo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Yn=function(o){return o.zoom||o.drag||o.pitch||o.rotate},ml=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(f.Event);function bt(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yt=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new pl(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),f.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[f.window,"blur",void 0]];for(var c=0,g=this._listeners;c<g.length;c+=1){var _=g[c],b=_[0];Y.addEventListener(b,_[1],b===f.window.document?this.handleWindowEvent:this.handleEvent,_[2])}};yt.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],c=a[0];Y.removeEventListener(c,a[1],c===f.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},yt.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new an(s,o));var c=s.boxZoom=new yi(s,o);this._add("boxZoom",c);var g=new vi,_=new qi;s.doubleClickZoom=new bo(_,g),this._add("tapZoom",g),this._add("clickZoom",_);var b=new Bn;this._add("tapDragZoom",b);var S=s.touchPitch=new Hc;this._add("touchPitch",S);var I=new gu(o),L=new qc(o);s.dragRotate=new na(o,I,L),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);var U=new jc(o),j=new ji(o);s.dragPan=new Ba(a,U,j),this._add("mousePan",U),this._add("touchPan",j,["touchZoom","touchRotate"]);var q=new jh,X=new xi;s.touchZoomRotate=new lo(a,X,q,b),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]);var W=s.scrollZoom=new $t(s,this);this._add("scrollZoom",W,["mousePan"]);var re=s.keyboard=new so;this._add("keyboard",re),this._add("blockableMapEvent",new ft(s));for(var Z=0,te=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Z<te.length;Z+=1){var le=te[Z];o.interactive&&o[le]&&s[le].enable(o[le])}},yt.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},yt.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yt.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return!!Yn(this._eventsInProgress)||this.isZooming()},yt.prototype._blockedByActive=function(o,s,a){for(var c in o)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yt.prototype._getMapTouches=function(o){for(var s=[],a=0,c=o;a<c.length;a+=1){var g=c[a];this._el.contains(g.target)&&s.push(g)}return s},yt.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,c={needsRenderFrame:!1},g={},_={},b=o.touches?this._getMapTouches(o.touches):void 0,S=b?Y.touchPos(this._el,b):Y.mousePos(this._el,o),I=0,L=this._handlers;I<L.length;I+=1){var U=L[I],j=U.handlerName,q=U.handler,X=U.allowed;if(q.isEnabled()){var W=void 0;this._blockedByActive(_,X,j)?q.reset():q[s||o.type]&&(W=q[s||o.type](o,S,b),this.mergeHandlerResult(c,g,W,j,a),W&&W.needsRenderFrame&&this._triggerRenderFrame()),(W||q.isActive())&&(_[j]=q)}}var re={};for(var Z in this._previousActiveHandlers)_[Z]||(re[Z]=a);this._previousActiveHandlers=_,(Object.keys(re).length||bt(c))&&(this._changes.push([c,g,re]),this._triggerRenderFrame()),(Object.keys(_).length||bt(c))&&this._map._stop(!0),this._updatingCamera=!1;var te=c.cameraAnimation;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},yt.prototype.mergeHandlerResult=function(o,s,a,c,g){if(a){f.extend(o,a);var _={handlerName:c,originalEvent:a.originalEvent||g};a.zoomDelta!==void 0&&(s.zoom=_),a.panDelta!==void 0&&(s.drag=_),a.pitchDelta!==void 0&&(s.pitch=_),a.bearingDelta!==void 0&&(s.rotate=_)}},yt.prototype._applyChanges=function(){for(var o={},s={},a={},c=0,g=this._changes;c<g.length;c+=1){var _=g[c],b=_[0],S=_[1],I=_[2];b.panDelta&&(o.panDelta=(o.panDelta||new f.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),f.extend(s,S),f.extend(a,I)}this._updateMapTransform(o,s,a),this._changes=[]},yt.prototype._updateMapTransform=function(o,s,a){var c=this._map,g=c.transform;if(!bt(o))return this._fireEvents(s,a,!0);var _=o.panDelta,b=o.zoomDelta,S=o.bearingDelta,I=o.pitchDelta,L=o.around,U=o.pinchAround;U!==void 0&&(L=U),c._stop(!0),L=L||c.transform.centerPoint;var j=g.pointLocation(_?L.sub(_):L);S&&(g.bearing+=S),I&&(g.pitch+=I),b&&(g.zoom+=b),g.setLocationAtPoint(j,L),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},yt.prototype._fireEvents=function(o,s,a){var c=this,g=Yn(this._eventsInProgress),_=Yn(o),b={};for(var S in o)this._eventsInProgress[S]||(b[S+"start"]=o[S].originalEvent),this._eventsInProgress[S]=o[S];for(var I in!g&&_&&this._fireEvent("movestart",_.originalEvent),b)this._fireEvent(I,b[I]);for(var L in _&&this._fireEvent("move",_.originalEvent),o)this._fireEvent(L,o[L].originalEvent);var U,j={};for(var q in this._eventsInProgress){var X=this._eventsInProgress[q],W=X.handlerName,re=X.originalEvent;this._handlersById[W].isActive()||(delete this._eventsInProgress[q],j[q+"end"]=U=s[W]||re)}for(var Z in j)this._fireEvent(Z,j[Z]);var te=Yn(this._eventsInProgress);if(a&&(g||_)&&!te){this._updatingCamera=!0;var le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=function(Ce){return Ce!==0&&-c._bearingSnap<Ce&&Ce<c._bearingSnap};le?(me(le.bearing||this._map.getBearing())&&(le.bearing=0),this._map.easeTo(le,{originalEvent:U})):(this._map.fire(new f.Event("moveend",{originalEvent:U})),me(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(o,s){this._map.fire(new f.Event(o,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new ml("renderFrame",{timeStamp:s})),o._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var _u=function(o){function s(a,c){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,g){return a=f.Point.convert(a).mult(-1),this.panTo(this.transform.center,f.extend({offset:a},c),g)},s.prototype.panTo=function(a,c,g){return this.easeTo(f.extend({center:a},c),g)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,g){return this.easeTo(f.extend({zoom:a},c),g)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,g){return this.easeTo(f.extend({bearing:a},c),g)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,f.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=f.LngLatBounds.convert(a);var g=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,c)},s.prototype._cameraForBoxAndBearing=function(a,c,g,_){var b={top:0,bottom:0,right:0,left:0};if(typeof(_=f.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){var S=_.padding;_.padding={top:S,bottom:S,right:S,left:S}}_.padding=f.extend(b,_.padding);var I=this.transform,L=I.padding,U=I.project(f.LngLat.convert(a)),j=I.project(f.LngLat.convert(c)),q=U.rotate(-g*Math.PI/180),X=j.rotate(-g*Math.PI/180),W=new f.Point(Math.max(q.x,X.x),Math.max(q.y,X.y)),re=new f.Point(Math.min(q.x,X.x),Math.min(q.y,X.y)),Z=W.sub(re),te=(I.width-(L.left+L.right+_.padding.left+_.padding.right))/Z.x,le=(I.height-(L.top+L.bottom+_.padding.top+_.padding.bottom))/Z.y;if(!(le<0||te<0)){var me=Math.min(I.scaleZoom(I.scale*Math.min(te,le)),_.maxZoom),Ce=typeof _.offset.x=="number"?new f.Point(_.offset.x,_.offset.y):f.Point.convert(_.offset),Ee=new f.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(g*Math.PI/180),Ie=Ce.add(Ee).mult(I.scale/I.zoomScale(me));return{center:I.unproject(U.add(j).div(2).sub(Ie)),zoom:me,bearing:g}}f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,g){return this._fitInternal(this.cameraForBounds(a,c),c,g)},s.prototype.fitScreenCoordinates=function(a,c,g,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.Point.convert(a)),this.transform.pointLocation(f.Point.convert(c)),g,_),_,b)},s.prototype._fitInternal=function(a,c,g){return a?(delete(c=f.extend(a,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this},s.prototype.jumpTo=function(a,c){this.stop();var g=this.transform,_=!1,b=!1,S=!1;return"zoom"in a&&g.zoom!==+a.zoom&&(_=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=f.LngLat.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(b=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(S=!0,g.pitch=+a.pitch),a.padding==null||g.isPaddingEqual(a.padding)||(g.padding=a.padding),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),_&&this.fire(new f.Event("zoomstart",c)).fire(new f.Event("zoom",c)).fire(new f.Event("zoomend",c)),b&&this.fire(new f.Event("rotatestart",c)).fire(new f.Event("rotate",c)).fire(new f.Event("rotateend",c)),S&&this.fire(new f.Event("pitchstart",c)).fire(new f.Event("pitch",c)).fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))},s.prototype.easeTo=function(a,c){var g=this;this._stop(!1,a.easeId),((a=f.extend({offset:[0,0],duration:500,easing:f.ease},a)).animate===!1||!a.essential&&f.browser.prefersReducedMotion)&&(a.duration=0);var _=this.transform,b=this.getZoom(),S=this.getBearing(),I=this.getPitch(),L=this.getPadding(),U="zoom"in a?+a.zoom:b,j="bearing"in a?this._normalizeBearing(a.bearing,S):S,q="pitch"in a?+a.pitch:I,X="padding"in a?a.padding:_.padding,W=f.Point.convert(a.offset),re=_.centerPoint.add(W),Z=_.pointLocation(re),te=f.LngLat.convert(a.center||Z);this._normalizeCenter(te);var le,me,Ce=_.project(Z),Ee=_.project(te).sub(Ce),Ie=_.zoomScale(U-b);a.around&&(le=f.LngLat.convert(a.around),me=_.locationPoint(le));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||U!==b,this._rotating=this._rotating||S!==j,this._pitching=this._pitching||q!==I,this._padding=!_.isPaddingEqual(X),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ne),this._ease(function(Ke){if(g._zooming&&(_.zoom=f.number(b,U,Ke)),g._rotating&&(_.bearing=f.number(S,j,Ke)),g._pitching&&(_.pitch=f.number(I,q,Ke)),g._padding&&(_.interpolatePadding(L,X,Ke),re=_.centerPoint.add(W)),le)_.setLocationAtPoint(le,me);else{var We=_.zoomScale(_.zoom-b),ut=U>b?Math.min(2,Ie):Math.max(.5,Ie),wt=Math.pow(ut,1-Ke),Ct=_.unproject(Ce.add(Ee.mult(Ke*wt)).mult(We));_.setLocationAtPoint(_.renderWorldCopies?Ct.wrap():Ct,re)}g._fireMoveEvents(c)},function(Ke){g._afterEase(c,Ke)},a),this},s.prototype._prepareEase=function(a,c,g){g===void 0&&(g={}),this._moving=!0,c||g.moving||this.fire(new f.Event("movestart",a)),this._zooming&&!g.zooming&&this.fire(new f.Event("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new f.Event("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new f.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new f.Event("move",a)),this._zooming&&this.fire(new f.Event("zoom",a)),this._rotating&&this.fire(new f.Event("rotate",a)),this._pitching&&this.fire(new f.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new f.Event("zoomend",a)),_&&this.fire(new f.Event("rotateend",a)),b&&this.fire(new f.Event("pitchend",a)),this.fire(new f.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var g=this;if(!a.essential&&f.browser.prefersReducedMotion){var _=f.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_,c)}this.stop(),a=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},a);var b=this.transform,S=this.getZoom(),I=this.getBearing(),L=this.getPitch(),U=this.getPadding(),j="zoom"in a?f.clamp(+a.zoom,b.minZoom,b.maxZoom):S,q="bearing"in a?this._normalizeBearing(a.bearing,I):I,X="pitch"in a?+a.pitch:L,W="padding"in a?a.padding:b.padding,re=b.zoomScale(j-S),Z=f.Point.convert(a.offset),te=b.centerPoint.add(Z),le=b.pointLocation(te),me=f.LngLat.convert(a.center||le);this._normalizeCenter(me);var Ce=b.project(le),Ee=b.project(me).sub(Ce),Ie=a.curve,Ne=Math.max(b.width,b.height),Ke=Ne/re,We=Ee.mag();if("minZoom"in a){var ut=f.clamp(Math.min(a.minZoom,S,j),b.minZoom,b.maxZoom),wt=Ne/b.zoomScale(ut-S);Ie=Math.sqrt(wt/We*2)}var Ct=Ie*Ie;function Tt(Pt){var At=(Ke*Ke-Ne*Ne+(Pt?-1:1)*Ct*Ct*We*We)/(2*(Pt?Ke:Ne)*Ct*We);return Math.log(Math.sqrt(At*At+1)-At)}function ir(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function pt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}var Lt=Tt(0),Nt=function(Pt){return pt(Lt)/pt(Lt+Ie*Pt)},zt=function(Pt){return Ne*((pt(Lt)*(ir(At=Lt+Ie*Pt)/pt(At))-ir(Lt))/Ct)/We;var At},Mt=(Tt(1)-Lt)/Ie;if(Math.abs(We)<1e-6||!isFinite(Mt)){if(Math.abs(Ne-Ke)<1e-6)return this.easeTo(a,c);var Bt=Ke<Ne?-1:1;Mt=Math.abs(Math.log(Ke/Ne))/Ie,zt=function(){return 0},Nt=function(Pt){return Math.exp(Bt*Ie*Pt)}}return a.duration="duration"in a?+a.duration:1e3*Mt/("screenSpeed"in a?+a.screenSpeed/Ie:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=I!==q,this._pitching=X!==L,this._padding=!b.isPaddingEqual(W),this._prepareEase(c,!1),this._ease(function(Pt){var At=Pt*Mt,xn=1/Nt(At);b.zoom=Pt===1?j:S+b.scaleZoom(xn),g._rotating&&(b.bearing=f.number(I,q,Pt)),g._pitching&&(b.pitch=f.number(L,X,Pt)),g._padding&&(b.interpolatePadding(U,W,Pt),te=b.centerPoint.add(Z));var Zr=Pt===1?me:b.unproject(Ce.add(Ee.mult(zt(At))).mult(xn));b.setLocationAtPoint(b.renderWorldCopies?Zr.wrap():Zr,te),g._fireMoveEvents(c)},function(){return g._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}if(!a){var _=this.handlers;_&&_.stop(!1)}return this},s.prototype._ease=function(a,c,g){g.animate===!1||g.duration===0?(a(1),c()):(this._easeStart=f.browser.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((f.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=f.wrap(a,-180,180);var g=Math.abs(a-c);return Math.abs(a-360-c)<g&&(a-=360),Math.abs(a+360-c)<g&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var g=a.lng-c.center.lng;a.lng+=g>180?-360:g<-180?360:0}},s}(f.Evented),Qn=function(o){o===void 0&&(o={}),this.options=o,f.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Qn.prototype.getDefaultPosition=function(){return"bottom-right"},Qn.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qn.prototype.onRemove=function(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qn.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},Qn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Qn.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(c,g,_){return g.value&&(c+=g.key+"="+g.value+(_<s.length-1?"&":"")),c},"?");o.href=f.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},Qn.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Qn.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(S){return typeof S!="string"?"":S})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var g=a[c];if(g.used){var _=g.getSource();_.attribution&&o.indexOf(_.attribution)<0&&o.push(_.attribution)}}o.sort(function(S,I){return S.length-I.length});var b=(o=o.filter(function(S,I){for(var L=I+1;L<o.length;L++)if(o[L].indexOf(S)>=0)return!1;return!0})).join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var uo=function(){f.bindAll(["_updateLogo"],this),f.bindAll(["_updateCompact"],this)};uo.prototype.onAdd=function(o){this._map=o,this._container=Y.create("div","mapboxgl-ctrl");var s=Y.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},uo.prototype.onRemove=function(){Y.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},uo.prototype.getDefaultPosition=function(){return"bottom-left"},uo.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},uo.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},uo.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Fn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Fn.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},Fn.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var g=c[a];if(g.id===o)return void(g.cancelled=!0)}},Fn.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var g=c[a];if(!g.cancelled&&(g.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Fn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Gc=f.window.HTMLImageElement,xu=f.window.HTMLElement,dr=f.window.ImageBitmap,In={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qh=function(o){function s(c){var g=this;if((c=f.extend({},In,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var _=new Yt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(o.call(this,_,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},wo,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new f.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=f.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof xu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),f.window!==void 0&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1),f.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,c),this._hash=c.hash&&new zi(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,f.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Qn({customAttribution:c.customAttribution})),this.addControl(new uo,c.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(b){g._update(b.dataType==="style"),g.fire(new f.Event(b.dataType+"data",b))}),this.on("dataloading",function(b){g.fire(new f.Event(b.dataType+"dataloading",b))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,g){if(g===void 0&&(g=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var _=c.onAdd(this);this._controls.push(c);var b=this._controlPositions[g];return g.indexOf("bottom")!==-1?b.insertBefore(_,b.firstChild):b.appendChild(_),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(c);return g>-1&&this._controls.splice(g,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var g=this._containerDimensions(),_=g[0],b=g[1];if(_===this.transform.width&&b===this.transform.height)return this;this._resizeCanvas(_,b),this.transform.resize(_,b),this.painter.resize(_,b);var S=!this._moving;return S&&this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),this.fire(new f.Event("resize",c)),S&&this.fire(new f.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(f.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(f.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(f.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,g,_){var b,S=this;if(c==="mouseenter"||c==="mouseover"){var I=!1;return{layer:g,listener:_,delegates:{mousemove:function(U){var j=S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[];j.length?I||(I=!0,_.call(S,new hn(c,S,U.originalEvent,{features:j}))):I=!1},mouseout:function(){I=!1}}}}if(c==="mouseleave"||c==="mouseout"){var L=!1;return{layer:g,listener:_,delegates:{mousemove:function(U){(S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[]).length?L=!0:L&&(L=!1,_.call(S,new hn(c,S,U.originalEvent)))},mouseout:function(U){L&&(L=!1,_.call(S,new hn(c,S,U.originalEvent)))}}}}return{layer:g,listener:_,delegates:(b={},b[c]=function(U){var j=S.getLayer(g)?S.queryRenderedFeatures(U.point,{layers:[g]}):[];j.length&&(U.features=j,_.call(S,U),delete U.features)},b)}},s.prototype.on=function(c,g,_){if(_===void 0)return o.prototype.on.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(b),b.delegates)this.on(S,b.delegates[S]);return this},s.prototype.once=function(c,g,_){if(_===void 0)return o.prototype.once.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in b.delegates)this.once(S,b.delegates[S]);return this},s.prototype.off=function(c,g,_){var b=this;return _===void 0?o.prototype.off.call(this,c,g):(this._delegatedListeners&&this._delegatedListeners[c]&&function(S){for(var I=S[c],L=0;L<I.length;L++){var U=I[L];if(U.layer===g&&U.listener===_){for(var j in U.delegates)b.off(j,U.delegates[j]);return I.splice(L,1),b}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,g){if(!this.style)return[];var _;if(g!==void 0||c===void 0||c instanceof f.Point||Array.isArray(c)||(g=c,c=void 0),g=g||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof f.Point||typeof c[0]=="number")_=[f.Point.convert(c)];else{var b=f.Point.convert(c[0]),S=f.Point.convert(c[1]);_=[b,new f.Point(S.x,b.y),S,new f.Point(b.x,S.y),b]}return this.style.queryRenderedFeatures(_,g,this.transform)},s.prototype.querySourceFeatures=function(c,g){return this.style.querySourceFeatures(c,g)},s.prototype.setStyle=function(c,g){return(g=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(c,g))},s.prototype._getUIString=function(c){var g=this._locale[c];if(g==null)throw new Error("Missing UI string '"+c+"'");return g},s.prototype._updateStyle=function(c,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new gi(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new gi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,g){var _=this;if(typeof c=="string"){var b=this._requestManager.normalizeStyleURL(c),S=this._requestManager.transformRequest(b,f.ResourceType.Style);f.getJSON(S,function(I,L){I?_.fire(new f.ErrorEvent(I)):L&&_._updateDiff(L,g)})}else typeof c=="object"&&this._updateDiff(c,g)},s.prototype._updateDiff=function(c,g){try{this.style.setState(c)&&this._update(!0)}catch(_){f.warnOnce("Unable to perform style diff: "+(_.message||_.error||_)+".  Rebuilding the style from scratch."),this._updateStyle(c,g)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,g){return this._lazyInitEmptyStyle(),this.style.addSource(c,g),this._update(!0)},s.prototype.isSourceLoaded=function(c){var g=this.style&&this.style.sourceCaches[c];if(g!==void 0)return g.loaded();this.fire(new f.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var g in c){var _=c[g]._tiles;for(var b in _){var S=_[b];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,g,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,g,_)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,g,_){_===void 0&&(_={});var b=_.pixelRatio;b===void 0&&(b=1);var S=_.sdf;S===void 0&&(S=!1);var I=_.stretchX,L=_.stretchY,U=_.content;if(this._lazyInitEmptyStyle(),g instanceof Gc||dr&&g instanceof dr){var j=f.browser.getImageData(g);this.style.addImage(c,{data:new f.RGBAImage({width:j.width,height:j.height},j.data),pixelRatio:b,stretchX:I,stretchY:L,content:U,sdf:S,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var q=g;this.style.addImage(c,{data:new f.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:b,stretchX:I,stretchY:L,content:U,sdf:S,version:0,userImage:q}),q.onAdd&&q.onAdd(this,c)}},s.prototype.updateImage=function(c,g){var _=this.style.getImage(c);if(!_)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var b=g instanceof Gc||dr&&g instanceof dr?f.browser.getImageData(g):g,S=b.width,I=b.height,L=b.data;return S===void 0||I===void 0?this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):S!==_.data.width||I!==_.data.height?this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(_.data.replace(L,!(g instanceof Gc||dr&&g instanceof dr)),void this.style.updateImage(c,_))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,g){f.getImage(this._requestManager.transformRequest(c,f.ResourceType.Image),g)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,g){return this._lazyInitEmptyStyle(),this.style.addLayer(c,g),this._update(!0)},s.prototype.moveLayer=function(c,g){return this.style.moveLayer(c,g),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,g,_){return this.style.setLayerZoomRange(c,g,_),this._update(!0)},s.prototype.setFilter=function(c,g,_){return _===void 0&&(_={}),this.style.setFilter(c,g,_),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setPaintProperty(c,g,_,b),this._update(!0)},s.prototype.getPaintProperty=function(c,g){return this.style.getPaintProperty(c,g)},s.prototype.setLayoutProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setLayoutProperty(c,g,_,b),this._update(!0)},s.prototype.getLayoutProperty=function(c,g){return this.style.getLayoutProperty(c,g)},s.prototype.setLight=function(c,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(c,g),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,g){return this.style.setFeatureState(c,g),this._update()},s.prototype.removeFeatureState=function(c,g){return this.style.removeFeatureState(c,g),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,g=0;return this._container&&(c=this._container.clientWidth||400,g=this._container.clientHeight||300),[c,g]},s.prototype._detectMissingCSS=function(){f.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&f.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=Y.create("div","mapboxgl-canvas-container",c);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=Y.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var _=this._containerDimensions();this._resizeCanvas(_[0],_[1]);var b=this._controlContainer=Y.create("div","mapboxgl-control-container",c),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){S[I]=Y.create("div","mapboxgl-ctrl-"+I,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,g){var _=f.browser.devicePixelRatio||1;this._canvas.width=_*c,this._canvas.height=_*g,this._canvas.style.width=c+"px",this._canvas.style.height=g+"px"},s.prototype._setupPainter=function(){var c=f.extend({},ke.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);g?(this.painter=new Rr(g,this.transform),f.webpSupported.testSupport(g)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var g,_=this,b=0,S=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=S.createQueryEXT(),S.beginQueryEXT(S.TIME_ELAPSED_EXT,g),b=f.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var L=this.transform.zoom,U=f.browser.now();this.style.zoomHistory.update(L,U);var j=new f.EvaluationParameters(L,{now:U,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=j.crossFadingFactor();q===1&&q===this._crossFadingFactor||(I=!0,this._crossFadingFactor=q),this.style.update(j)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=f.browser.now()-b;S.endQueryEXT(S.TIME_ELAPSED_EXT,g),setTimeout(function(){var Z=S.getQueryObjectEXT(g,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(g),_.fire(new f.Event("gpu-timing-frame",{cpuTime:X,gpuTime:Z}))},50)}if(this.listens("gpu-timing-layer")){var W=this.painter.collectGpuTimers();setTimeout(function(){var Z=_.painter.queryGpuTimers(W);_.fire(new f.Event("gpu-timing-layer",{layerTimes:Z}))},50)}var re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new f.Event("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,g=this._controls;c<g.length;c+=1)g[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),f.window!==void 0&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("orientationchange",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1));var _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),Fa(this._canvasContainer),Fa(this._controlContainer),Fa(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new f.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=f.browser.frame(function(g){c._frame=null,c._render(g)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,g){f.setCacheLimits(c,g)},a.version.get=function(){return f.version},Object.defineProperties(s.prototype,a),s}(_u);function Fa(o){o.parentNode&&o.parentNode.removeChild(o)}var $c={showCompass:!0,showZoom:!0,visualizePitch:!1},No=function(o){var s=this;this.options=f.extend({},$c,o),this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=Y.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};No.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},No.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},No.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bi(this._map,this._compass,this.options.visualizePitch)),this._container},No.prototype.onRemove=function(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},No.prototype._createButton=function(o,s){var a=Y.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},No.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var bi=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new gu({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new qc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Y.addEventListener(s,"mousedown",this.mousedown),Y.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(s,"touchmove",this.touchmove),Y.addEventListener(s,"touchend",this.touchend),Y.addEventListener(s,"touchcancel",this.reset)};function ms(o,s,a){if(o=new f.LngLat(o.lng,o.lat),s){var c=new f.LngLat(o.lng-360,o.lat),g=new f.LngLat(o.lng+360,o.lat),_=a.locationPoint(o).distSqr(s);a.locationPoint(c).distSqr(s)<_?o=c:a.locationPoint(g).distSqr(s)<_&&(o=g)}for(;Math.abs(o.lng-a.center.lng)>180;){var b=a.locationPoint(o);if(b.x>=0&&b.y>=0&&b.x<=a.width&&b.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}bi.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),Y.disableDrag()},bi.prototype.move=function(o,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(o,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(o,s);g&&g.pitchDelta&&a.setPitch(a.getPitch()+g.pitchDelta)}},bi.prototype.off=function(){var o=this.element;Y.removeEventListener(o,"mousedown",this.mousedown),Y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(o,"touchmove",this.touchmove),Y.removeEventListener(o,"touchend",this.touchend),Y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},bi.prototype.offTemp=function(){Y.enableDrag(),Y.removeEventListener(f.window,"mousemove",this.mousemove),Y.removeEventListener(f.window,"mouseup",this.mouseup)},bi.prototype.mousedown=function(o){this.down(f.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),Y.mousePos(this.element,o)),Y.addEventListener(f.window,"mousemove",this.mousemove),Y.addEventListener(f.window,"mouseup",this.mouseup)},bi.prototype.mousemove=function(o){this.move(o,Y.mousePos(this.element,o))},bi.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},bi.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},bi.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},bi.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},bi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Eo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bu(o,s,a){var c=o.classList;for(var g in Eo)c.remove("mapboxgl-"+a+"-anchor-"+g);c.add("mapboxgl-"+a+"-anchor-"+s)}var gs,gl=function(o){function s(a,c){if(o.call(this),(a instanceof f.window.HTMLElement||c)&&(a=f.extend({element:a},c)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=f.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div"),this._element.setAttribute("aria-label","Map marker");var g=Y.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var _=Y.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");var b=Y.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");var S=Y.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var I=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<L.length;I+=1){var U=L[I],j=Y.createNS("http://www.w3.org/2000/svg","ellipse");j.setAttributeNS(null,"opacity","0.04"),j.setAttributeNS(null,"cx","10.5"),j.setAttributeNS(null,"cy","5.80029008"),j.setAttributeNS(null,"rx",U.rx),j.setAttributeNS(null,"ry",U.ry),S.appendChild(j)}var q=Y.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);var X=Y.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(X);var W=Y.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");var re=Y.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(re);var Z=Y.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");var te=Y.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");var le=Y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");var me=Y.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),te.appendChild(le),te.appendChild(me),b.appendChild(S),b.appendChild(q),b.appendChild(W),b.appendChild(Z),b.appendChild(te),g.appendChild(b),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=f.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),bu(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,g=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&g!==32&&g!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ms(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),Y.setTransform(this._element,Eo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=f.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new f.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(f.Evented),Wc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ys=0,Na=!1,Kc=function(o){function s(a){o.call(this),this.options=f.extend({},Wc,a),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,gs!==void 0?c(gs):f.window.navigator.permissions!==void 0?f.window.navigator.permissions.query({name:"geolocation"}).then(function(g){c(gs=g.state!=="denied")}):c(gs=!!f.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ys=0,Na=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),g=a.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),b=f.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(g),b,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),g=this._map.unproject([1,a]),_=c.distanceTo(g),b=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=b+"px",this._circleElement.style.height=b+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Na)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=Y.create("button","mapboxgl-ctrl-geolocate",this._container),Y.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var _=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new gl(this._dotElement),this._circleElement=Y.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new gl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(b){b.geolocateSource||c._watchState!=="ACTIVE_LOCK"||b.originalEvent&&b.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new f.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ys--,Na=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ys>1?(a={maximumAge:6e5,timeout:0},Na=!0):(a=this.options.positionOptions,Na=!1),this._geolocationWatchID=f.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else f.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(f.Evented),ia={maxWidth:100,unit:"metric"},oa=function(o){this.options=f.extend({},ia,o),f.bindAll(["_onMove","setUnit"],this)};function wu(o,s,a){var c=a&&a.maxWidth||100,g=o._container.clientHeight/2,_=o.unproject([0,g]),b=o.unproject([c,g]),S=_.distanceTo(b);if(a&&a.unit==="imperial"){var I=3.2808*S;I>5280?aa(s,c,I/5280,o._getUIString("ScaleControl.Miles")):aa(s,c,I,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?aa(s,c,S/1852,o._getUIString("ScaleControl.NauticalMiles")):S>=1e3?aa(s,c,S/1e3,o._getUIString("ScaleControl.Kilometers")):aa(s,c,S,o._getUIString("ScaleControl.Meters"))}function aa(o,s,a,c){var g,_,b,S=(g=a,(_=Math.pow(10,(""+Math.floor(g)).length-1))*(b=(b=g/_)>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(I){var L=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*L)/L}(b)));o.style.width=s*(S/a)+"px",o.innerHTML=S+"&nbsp;"+c}oa.prototype.getDefaultPosition=function(){return"bottom-left"},oa.prototype._onMove=function(){wu(this._map,this._container,this.options)},oa.prototype.onAdd=function(o){return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},oa.prototype.onRemove=function(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},oa.prototype.setUnit=function(o){this.options.unit=o,wu(this._map,this._container,this.options)};var Hi=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof f.window.HTMLElement?this._container=o.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in f.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in f.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in f.window.document&&(this._fullscreenchange="MSFullscreenChange")};Hi.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hi.prototype.onRemove=function(){Y.remove(this._controlContainer),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hi.prototype._checkFullscreenSupport=function(){return!!(f.window.document.fullscreenEnabled||f.window.document.mozFullScreenEnabled||f.window.document.msFullscreenEnabled||f.window.document.webkitFullscreenEnabled)},Hi.prototype._setupUI=function(){var o=this._fullscreenButton=Y.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hi.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Hi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Hi.prototype._isFullscreen=function(){return this._fullscreen},Hi.prototype._changeIcon=function(){(f.window.document.fullscreenElement||f.window.document.mozFullScreenElement||f.window.document.webkitFullscreenElement||f.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Hi.prototype._onClickFullscreen=function(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.mozCancelFullScreen?f.window.document.mozCancelFullScreen():f.window.document.msExitFullscreen?f.window.document.msExitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},yl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Jc=function(o){function s(a){o.call(this),this.options=f.extend(Object.create(Xc),a),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(f.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,g=f.window.document.createDocumentFragment(),_=f.window.document.createElement("body");for(_.innerHTML=a;c=_.firstChild;)g.appendChild(c);return this.setDOMContent(g)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Y.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Y.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Y.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(j){return c._container.classList.add(j)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ms(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var g=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),_=this.options.anchor,b=function j(q){if(q){if(typeof q=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(q,2)));return{center:new f.Point(0,0),top:new f.Point(0,q),"top-left":new f.Point(X,X),"top-right":new f.Point(-X,X),bottom:new f.Point(0,-q),"bottom-left":new f.Point(X,-X),"bottom-right":new f.Point(-X,-X),left:new f.Point(q,0),right:new f.Point(-q,0)}}if(q instanceof f.Point||Array.isArray(q)){var W=f.Point.convert(q);return{center:W,top:W,"top-left":W,"top-right":W,bottom:W,"bottom-left":W,"bottom-right":W,left:W,right:W}}return{center:f.Point.convert(q.center||[0,0]),top:f.Point.convert(q.top||[0,0]),"top-left":f.Point.convert(q["top-left"]||[0,0]),"top-right":f.Point.convert(q["top-right"]||[0,0]),bottom:f.Point.convert(q.bottom||[0,0]),"bottom-left":f.Point.convert(q["bottom-left"]||[0,0]),"bottom-right":f.Point.convert(q["bottom-right"]||[0,0]),left:f.Point.convert(q.left||[0,0]),right:f.Point.convert(q.right||[0,0])}}return j(new f.Point(0,0))}(this.options.offset);if(!_){var S,I=this._container.offsetWidth,L=this._container.offsetHeight;S=g.y+b.bottom.y<L?["top"]:g.y>this._map.transform.height-L?["bottom"]:[],g.x<I/2?S.push("left"):g.x>this._map.transform.width-I/2&&S.push("right"),_=S.length===0?"bottom":S.join("-")}var U=g.add(b[_]).round();Y.setTransform(this._container,Eo[_]+" translate("+U.x+"px,"+U.y+"px)"),bu(this._container,_,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(yl);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(f.Evented),Eu={version:f.version,supported:ke,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:qh,NavigationControl:No,GeolocateControl:Kc,AttributionControl:Qn,ScaleControl:oa,FullscreenControl:Hi,Popup:Jc,Marker:gl,Style:gi,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.Point,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,config:f.config,prewarm:function(){Me().acquire(Pe)},clearPrewarmedResources:function(){var o=gt;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Pe),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(o){f.config.ACCESS_TOKEN=o},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(o){f.config.API_URL=o},get workerCount(){return Ve.workerCount},set workerCount(o){Ve.workerCount=o},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){f.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){f.clearTileCache(o)},workerUrl:""};return Eu}),_e})})(x);var E=y;function C(fe){if(typeof fe=="string"){var pe=fe;if(fe=document.getElementById(fe),!fe)throw new Error("No element with id "+pe)}return fe}function k(fe){if(!/^#([0-9a-f]{3}){1,2}$/i.test(fe)&&!/^[a-z]+$/i.test(fe))throw new Error("Invalid color")}function D(fe,pe){var ue=41,be=27,_e=2,Oe=new fe.Marker()._element.querySelector("svg");Oe.removeAttribute("display"),Oe.setAttribute("xmlns","http://www.w3.org/2000/svg"),Oe.setAttribute("height",ue),Oe.setAttribute("width",be),Oe.setAttribute("viewBox","0 0 "+be+" "+ue),k(pe),Oe.querySelector("*[fill='#3FB1CE']").setAttribute("fill",pe);var f=Oe.querySelectorAll("circle"),ke=f[f.length-1];if(f.length==1){var Y=ke.cloneNode();Y.setAttribute("fill","#000000"),Y.setAttribute("opacity",.25),ke.parentNode.insertBefore(Y,ke)}ke.setAttribute("r",4.5);var Fe=new Image(be*_e,ue*_e);return Fe.src="data:image/svg+xml;utf8,"+encodeURIComponent(Oe.outerHTML),Fe}var N={},ee=function(pe,ue,be,_e){var Oe=this;!ve.library&&typeof window<"u"&&(ve.library=window.mapboxgl||window.maplibregl||null);var f=ve.library;if(!f)throw new Error("No mapping library found");var ke,Y={},Fe={},ze=[],Xe=0;pe=C(pe),pe.id&&(N[pe.id]=this);function xe(Te,Le,Re){var Ae=new XMLHttpRequest;Ae.open("GET",Le,!0),Ae.setRequestHeader("Content-Type","application/json"),Ae.onload=function(){Ae.status===200?Re(JSON.parse(Ae.responseText)):rr(Te,Ae.statusText)},Ae.send()}function mt(Te){ke.loaded()?Te():ke.on("load",Te)}function et(Te){return typeof Te=="number"?Te:new Date(Te).getTime()/1e3}function Wt(Te,Le,Re){for(var Ae=0;Ae<Le.length;Ae++){var Ye=Le[Ae],He=et(Ye.time);He&&(Fe[He]||(Fe[He]=[]),Fe[He].push(Ye),Je.extend(ki(Ye)))}for(var ct in Fe)Object.prototype.hasOwnProperty.call(Fe,ct)&&ze.push(parseInt(ct));ze.sort(),no(Te,Fe[ze[Xe]],Re),mt(function(){setTimeout(function(){Rt(Te,Re)},100)})}function Rt(Te,Le){Xe++,di(Te,Fe[ze[Xe]],Le),Xe<ze.length-1&&setTimeout(function(){Rt(Te,Le)},100)}function rr(Te,Le){Te.textContent=Le}function Ot(Te,Le,Re,Ae){try{Ae(Te,Le,Re)}catch(Ye){throw rr(Te,Ye.message),Ye}}function gn(Te,Le,Re,Ae){typeof Le=="string"?xe(Te,Le,function(Ye){Ot(Te,Ye,Re,Ae)}):typeof Le=="function"?Le(function(Ye){Ot(Te,Ye,Re,Ae)},function(Ye){rr(Te,Ye)}):Ot(Te,Le,Re,Ae)}function di(Te,Le,Re){Be(function(){Re.trail&&(un(Le,Re.trail),ke.getSource("trails").setData(nn(Le))),ke.getSource("objects").setData(yn(Le,Re))})}var Kr=new window.Map;function yn(Te,Le){for(var Re={type:"FeatureCollection",features:[]},Ae=0;Ae<Te.length;Ae++){var Ye=Te[Ae],He=Object.assign({},Ye),ct=void 0;if(_e==="point"){if(He.icon||(He.icon=Le.defaultIcon||"mapkick"),He.mapkickIconSize=He.icon==="mapkick"?.5:1,He.mapkickIconAnchor=He.icon==="mapkick"?"bottom":"center",He.mapkickIconOffset=He.icon==="mapkick"?[0,10]:[0,0],He.icon==="mapkick"){var nt=He.color||qe.color||"#f84d4d",It=Kr.get(nt);It===void 0&&(It=Kr.size,k(nt),Kr.set(nt,It)),He.icon="mapkick-"+It}var jt=ki(Ye);if(!jt[1])throw new Error("missing latitude (index: "+Ae+")");if(!jt[0])throw new Error("missing longitude (index: "+Ae+")");ct={type:"Point",coordinates:jt}}else{if(ct=Ye.geometry,!ct)throw new Error("missing geometry (index: "+Ae+")");delete He.geometry,He.mapkickColor=He.color||qe.color||"#0090ff"}Re.features.push({type:"Feature",id:Ae,geometry:ct,properties:He})}return Re}function ki(Te){return[Te.longitude||Te.lng||Te.lon,Te.latitude||Te.lat]}function Fi(Te){return Te.id}function un(Te,Le){for(var Re=0;Re<Te.length;Re++){var Ae=Te[Re],Ye=Fi(Ae);Y[Ye]||(Y[Ye]=[]),Y[Ye].push(ki(Ae)),Le&&Le.len&&Y[Ye].length>Le.len&&Y[Ye].shift()}}function nn(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.length;Re++){var Ae=Te[Re];Le.features.push({type:"Feature",geometry:{type:"LineString",coordinates:Y[Fi(Ae)]}})}return Le}function Ln(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.features.length;Re++){var Ae=Te.features[Re],Ye=void 0,He=new f.LngLatBounds;if(cn(He,Ae.geometry),!He.isEmpty()){var ct=He.getCenter();Ye=[ct.lng,ct.lat]}Ye&&Le.features.push({type:"Feature",id:Re,geometry:{type:"Point",coordinates:Ye},properties:Ae.properties})}return Le}function ro(Te){for(var Le=Te.getStyle().layers,Re,Ae=Le.length-1;Ae>=0;Ae--){var Ye=Le[Ae];if(!(Ye.metadata&&Ye.metadata["mapbox:featureComponent"]==="place-labels"))break;Re=Ye.id}return Re}function mr(Te,Le){var Re={};if(ke.addSource(Te,{type:"geojson",data:Le}),_e==="point")ke.addLayer({id:Te+"-text",source:Te,type:"symbol",layout:{"text-field":"{label}","text-size":11,"text-anchor":"top","text-offset":[0,1]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}}),ke.addLayer({id:Te,source:Te,type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-size":{type:"identity",property:"mapkickIconSize"},"icon-anchor":{type:"identity",property:"mapkickIconAnchor"},"icon-offset":{type:"identity",property:"mapkickIconOffset"}}});else{var Ae=ro(ke),Ye=Te+"-outline";ke.addLayer({id:Ye,source:Te,type:"line",paint:{"line-color":{type:"identity",property:"mapkickColor"},"line-opacity":.7,"line-width":1}},Ae),ke.addLayer({id:Te,source:Te,type:"fill",paint:{"fill-color":{type:"identity",property:"mapkickColor"},"fill-opacity":.3}},Ye);for(var He=Te+"-text",ct=Ln(Le),nt=0;nt<ct.features.length;nt++){var It=ct.features[nt];Re[It.id]=It.geometry.coordinates}ke.addSource(He,{type:"geojson",data:ct}),ke.addLayer({id:Te+"-text",source:He,type:"symbol",layout:{"text-field":"{label}","text-size":11},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}})}var jt=!("hover"in $e)||$e.hover,qt={closeButton:!1,closeOnClick:!1};jt||(qt.anchor="bottom");var dt=new f.Popup(qt),Mr=function(ur,nr){var vn=window.getComputedStyle(nr.getElement()),jn=new DOMMatrixReadOnly(vn.transform),_n=5,ai=5,_o=jn.m42,mi=jn.m41;(_o<_n||mi<_n)&&ur.panBy([Math.min(mi-_n-ai,0),Math.min(_o-_n-ai,0)])},zr=function(ur){var nr=Pi(ur),vn=nr.properties.tooltip;if(vn){_e==="point"&&nr.properties.icon.startsWith("mapkick-")?dt.options.offset={top:[0,14],"top-left":[0,14],"top-right":[0,14],bottom:[0,-44],"bottom-left":[0,-44],"bottom-right":[0,-44],left:[14,0],right:[-14,0]}:dt.options.offset=14;var jn;_e==="point"?jn=nr.geometry.coordinates:jn=Re[nr.id],dt.setLngLat(jn),$e.html?dt.setHTML(vn):dt.setText(vn),dt.addTo(ke),dt._container.offsetWidth%2!==0&&(dt._container.style.width=dt._container.offsetWidth+1+"px"),_e!=="area"&&Mr(ke,dt)}},pn=function(ur){return ur.geometry.coordinates[1]},Pi=function(ur){for(var nr=ur.features,vn=nr[0],jn=1;jn<nr.length;jn++){var _n=nr[jn];pn(_n)<pn(vn)&&(vn=_n)}return vn};if(!jt){var Rn=null;ke.on("click",Te,function(ur){var nr=Pi(ur).id;nr!==Rn&&(zr(ur),Rn=nr,ur.mapkickPopupOpened=!0)}),ke.on("click",function(ur){ur.mapkickPopupOpened||(dt.remove(),Rn=null)})}ke.on("mouseenter",Te,function(ur){var nr=Pi(ur).properties.tooltip;nr&&(ke.getCanvas().style.cursor="pointer",jt&&zr(ur))}),ke.on("mouseleave",Te,function(){ke.getCanvas().style.cursor="",jt&&dt.remove()})}function cn(Te,Le){if(Le.type==="Point")Te.extend(Le.coordinates);else if(Le.type==="Polygon")for(var Re=Le.coordinates[0],Ae=0;Ae<Re.length;Ae++)Te.extend(Re[Ae]);else if(Le.type==="MultiPolygon")for(var Ye=Le.coordinates,He=0;He<Ye.length;He++)for(var ct=Ye[He][0],nt=0;nt<ct.length;nt++)Te.extend(ct[nt])}var no=function(Te,Le,Re){var Ae=yn(Le,Re);Re=Re||{};for(var Ye=0;Ye<Ae.features.length;Ye++)cn(Je,Ae.features[Ye].geometry);Te.textContent="";var He=Re.style;if(!He){var ct=!("accessToken"in f)||/^1\.1[45]/.test(f.version);if(ct)throw new Error("style required for MapLibre");He="mapbox://styles/mapbox/streets-v12"}var nt=Re.zoom,It=Re.center;It||(Je.isEmpty()?(It=[0,0],nt||(nt=1)):It=Je.getCenter());var jt={container:Te,style:He,dragRotate:!1,touchZoomRotate:!1,center:It,zoom:nt||15};Re.style||(jt.projection="mercator"),Re.accessToken&&(jt.accessToken=Re.accessToken),ke=new f.Map(jt),Re.controls&&ke.addControl(new f.NavigationControl({showCompass:!1})),Re.zoom||(ke.style.stylesheet||(ke.style.stylesheet={}),Je.isEmpty()||ke.fitBounds(Je,{padding:40,animate:!1,maxZoom:15})),Oe.map=ke,mt(function(){Re.trail&&(un(Le),ke.addSource("trails",{type:"geojson",data:nn([])}),ke.addLayer({id:"trails",source:"trails",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}}));var qt=Kr.size;function dt(){if(qt!==0){qt--;return}mr("objects",Ae),oe=!0;for(var Mr;Mr=de.shift();)Mr()}Kr.forEach(function(Mr,zr){var pn=D(f,zr);pn.addEventListener("load",function(){ke.addImage("mapkick-"+Mr+"-15",pn),dt()})}),dt()})},oe=!1,de=[];function Be(Te){oe?Te():de.push(Te)}be=be||{},be=Object.assign({},ve.options,be);var $e=be.tooltips||{},qe=be.markers||{},Je=new f.LngLatBounds;be.replay?gn(pe,ue,be,Wt):(gn(pe,ue,be,no),be.refresh&&(this.intervalId=setInterval(function(){gn(pe,ue,be,di)},be.refresh*1e3)))};ee.prototype.getMapObject=function(){return this.map},ee.prototype.destroy=function(){this.stopRefresh(),this.map&&(this.map.remove(),this.map=null)},ee.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};var se=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"point")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ne=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"area")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ve={Map:se,AreaMap:ne,maps:N,options:{},library:null};return ve.use=function(fe){ve.library=fe},typeof window<"u"&&!window.Mapkick&&(window.Mapkick=ve,setTimeout(function(){window.dispatchEvent(new Event("mapkick:load"))},0)),ve.use(E),ve})})(d5);const Zs=(t,n)=>{const l=t.__vccOpts||t;for(const[p,m]of n)l[p]=m;return l},m5={},g5={class:"modal-mask"},y5={class:"modal-wrapper"},v5={class:"modal-container"};function _5(t,n){return Sn(),Rs(Fd,{name:"modal"},{default:kd(()=>[Ft("div",g5,[Ft("div",y5,[Ft("div",v5,[Ft("button",{class:"btn btn-light m-1 btn-lg",onClick:n[0]||(n[0]=l=>t.$emit("show-houses"))},"See Izumo houses"),Ft("button",{class:"btn btn-info m-1 btn-lg",onClick:n[1]||(n[1]=l=>t.$emit("add-house"))},"Add my house")])])])]),_:1})}const x5=Zs(m5,[["render",_5]]);const b5={components:{Modal:x5},data(){return{access_token:this.$mapboxApiKey,map:{},showModal:!1}},mounted(){this.createMap()},methods:{showHouses(){this.$emit("show-houses")},addHouse(){this.$emit("add-house")},async createMap(){try{this.map=jg(this.access_token,"globe",this.flyended);const t={center:[132.7445942,35.3665752],zoom:12.5,bearing:90,pitch:80},n=this;document.getElementById("fly").addEventListener("click",()=>{n.map.flyTo({...t,duration:5e3,essential:!0}),event.target.style.display="none"})}catch(t){console.log("map error",t)}},flyended(){console.log("ended!");const t=this;setTimeout(()=>{t.showModal=!0},2e3)}}},w5=t=>(th("data-v-54ee804b"),t=t(),rh(),t),E5={class:"main"},S5=w5(()=>Ft("div",{class:"map-wrapper"},[Ft("div",{id:"map"}),Ft("button",{class:"btn btn-lg mt-5 ml-5 text-white border border-light glow-on-hover",id:"fly",style:{"background-color":"transparent"}},"Let's go Izumo!")],-1));function T5(t,n,l,p,m,y){const x=Ls("Modal");return Sn(),Xi("div",E5,[S5,m.showModal?(Sn(),Rs(x,{key:0,onClose:n[0]||(n[0]=E=>m.showModal=!1),onShowHouses:y.showHouses,onAddHouse:y.addHouse},null,8,["onShowHouses","onAddHouse"])):Ya("",!0)])}const C5=Zs(b5,[["render",T5],["__scopeId","data-v-54ee804b"]]);function mb(t,n){return function(){return t.apply(n,arguments)}}const{toString:A5}=Object.prototype,{getPrototypeOf:Uy}=Object,Hd=(t=>n=>{const l=A5.call(n);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),xa=t=>(t=t.toLowerCase(),n=>Hd(n)===t),Zd=t=>n=>typeof n===t,{isArray:Tc}=Array,Yp=Zd("undefined");function I5(t){return t!==null&&!Yp(t)&&t.constructor!==null&&!Yp(t.constructor)&&zo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const gb=xa("ArrayBuffer");function k5(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&gb(t.buffer),n}const P5=Zd("string"),zo=Zd("function"),yb=Zd("number"),Gd=t=>t!==null&&typeof t=="object",M5=t=>t===!0||t===!1,Hf=t=>{if(Hd(t)!=="object")return!1;const n=Uy(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z5=xa("Date"),L5=xa("File"),R5=xa("Blob"),O5=xa("FileList"),D5=t=>Gd(t)&&zo(t.pipe),B5=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||zo(t.append)&&((n=Hd(t))==="formdata"||n==="object"&&zo(t.toString)&&t.toString()==="[object FormData]"))},F5=xa("URLSearchParams"),N5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ch(t,n,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let p,m;if(typeof t!="object"&&(t=[t]),Tc(t))for(p=0,m=t.length;p<m;p++)n.call(null,t[p],p,t);else{const y=l?Object.getOwnPropertyNames(t):Object.keys(t),x=y.length;let E;for(p=0;p<x;p++)E=y[p],n.call(null,t[E],E,t)}}function vb(t,n){n=n.toLowerCase();const l=Object.keys(t);let p=l.length,m;for(;p-- >0;)if(m=l[p],n===m.toLowerCase())return m;return null}const _b=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),xb=t=>!Yp(t)&&t!==_b;function Bg(){const{caseless:t}=xb(this)&&this||{},n={},l=(p,m)=>{const y=t&&vb(n,m)||m;Hf(n[y])&&Hf(p)?n[y]=Bg(n[y],p):Hf(p)?n[y]=Bg({},p):Tc(p)?n[y]=p.slice():n[y]=p};for(let p=0,m=arguments.length;p<m;p++)arguments[p]&&ch(arguments[p],l);return n}const U5=(t,n,l,{allOwnKeys:p}={})=>(ch(n,(m,y)=>{l&&zo(m)?t[y]=mb(m,l):t[y]=m},{allOwnKeys:p}),t),V5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),j5=(t,n,l,p)=>{t.prototype=Object.create(n.prototype,p),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),l&&Object.assign(t.prototype,l)},q5=(t,n,l,p)=>{let m,y,x;const E={};if(n=n||{},t==null)return n;do{for(m=Object.getOwnPropertyNames(t),y=m.length;y-- >0;)x=m[y],(!p||p(x,t,n))&&!E[x]&&(n[x]=t[x],E[x]=!0);t=l!==!1&&Uy(t)}while(t&&(!l||l(t,n))&&t!==Object.prototype);return n},H5=(t,n,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=n.length;const p=t.indexOf(n,l);return p!==-1&&p===l},Z5=t=>{if(!t)return null;if(Tc(t))return t;let n=t.length;if(!yb(n))return null;const l=new Array(n);for(;n-- >0;)l[n]=t[n];return l},G5=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Uy(Uint8Array)),$5=(t,n)=>{const p=(t&&t[Symbol.iterator]).call(t);let m;for(;(m=p.next())&&!m.done;){const y=m.value;n.call(t,y[0],y[1])}},W5=(t,n)=>{let l;const p=[];for(;(l=t.exec(n))!==null;)p.push(l);return p},K5=xa("HTMLFormElement"),X5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,p,m){return p.toUpperCase()+m}),w0=(({hasOwnProperty:t})=>(n,l)=>t.call(n,l))(Object.prototype),J5=xa("RegExp"),bb=(t,n)=>{const l=Object.getOwnPropertyDescriptors(t),p={};ch(l,(m,y)=>{n(m,y,t)!==!1&&(p[y]=m)}),Object.defineProperties(t,p)},Y5=t=>{bb(t,(n,l)=>{if(zo(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const p=t[l];if(zo(p)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Q5=(t,n)=>{const l={},p=m=>{m.forEach(y=>{l[y]=!0})};return Tc(t)?p(t):p(String(t).split(n)),l},eA=()=>{},tA=(t,n)=>(t=+t,Number.isFinite(t)?t:n),eg="abcdefghijklmnopqrstuvwxyz",E0="0123456789",wb={DIGIT:E0,ALPHA:eg,ALPHA_DIGIT:eg+eg.toUpperCase()+E0},rA=(t=16,n=wb.ALPHA_DIGIT)=>{let l="";const{length:p}=n;for(;t--;)l+=n[Math.random()*p|0];return l};function nA(t){return!!(t&&zo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const iA=t=>{const n=new Array(10),l=(p,m)=>{if(Gd(p)){if(n.indexOf(p)>=0)return;if(!("toJSON"in p)){n[m]=p;const y=Tc(p)?[]:{};return ch(p,(x,E)=>{const C=l(x,m+1);!Yp(C)&&(y[E]=C)}),n[m]=void 0,y}}return p};return l(t,0)},oA=xa("AsyncFunction"),aA=t=>t&&(Gd(t)||zo(t))&&zo(t.then)&&zo(t.catch),je={isArray:Tc,isArrayBuffer:gb,isBuffer:I5,isFormData:B5,isArrayBufferView:k5,isString:P5,isNumber:yb,isBoolean:M5,isObject:Gd,isPlainObject:Hf,isUndefined:Yp,isDate:z5,isFile:L5,isBlob:R5,isRegExp:J5,isFunction:zo,isStream:D5,isURLSearchParams:F5,isTypedArray:G5,isFileList:O5,forEach:ch,merge:Bg,extend:U5,trim:N5,stripBOM:V5,inherits:j5,toFlatObject:q5,kindOf:Hd,kindOfTest:xa,endsWith:H5,toArray:Z5,forEachEntry:$5,matchAll:W5,isHTMLForm:K5,hasOwnProperty:w0,hasOwnProp:w0,reduceDescriptors:bb,freezeMethods:Y5,toObjectSet:Q5,toCamelCase:X5,noop:eA,toFiniteNumber:tA,findKey:vb,global:_b,isContextDefined:xb,ALPHABET:wb,generateString:rA,isSpecCompliantForm:nA,toJSONObject:iA,isAsyncFn:oA,isThenable:aA};function Cr(t,n,l,p,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),l&&(this.config=l),p&&(this.request=p),m&&(this.response=m)}je.inherits(Cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Eb=Cr.prototype,Sb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Sb[t]={value:t}});Object.defineProperties(Cr,Sb);Object.defineProperty(Eb,"isAxiosError",{value:!0});Cr.from=(t,n,l,p,m,y)=>{const x=Object.create(Eb);return je.toFlatObject(t,x,function(C){return C!==Error.prototype},E=>E!=="isAxiosError"),Cr.call(x,t.message,n,l,p,m),x.cause=t,x.name=t.name,y&&Object.assign(x,y),x};const sA=null;function Fg(t){return je.isPlainObject(t)||je.isArray(t)}function Tb(t){return je.endsWith(t,"[]")?t.slice(0,-2):t}function S0(t,n,l){return t?t.concat(n).map(function(m,y){return m=Tb(m),!l&&y?"["+m+"]":m}).join(l?".":""):n}function lA(t){return je.isArray(t)&&!t.some(Fg)}const uA=je.toFlatObject(je,{},null,function(n){return/^is[A-Z]/.test(n)});function $d(t,n,l){if(!je.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,l=je.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ve,fe){return!je.isUndefined(fe[ve])});const p=l.metaTokens,m=l.visitor||D,y=l.dots,x=l.indexes,C=(l.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(n);if(!je.isFunction(m))throw new TypeError("visitor must be a function");function k(ne){if(ne===null)return"";if(je.isDate(ne))return ne.toISOString();if(!C&&je.isBlob(ne))throw new Cr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(ne)||je.isTypedArray(ne)?C&&typeof Blob=="function"?new Blob([ne]):Buffer.from(ne):ne}function D(ne,ve,fe){let pe=ne;if(ne&&!fe&&typeof ne=="object"){if(je.endsWith(ve,"{}"))ve=p?ve:ve.slice(0,-2),ne=JSON.stringify(ne);else if(je.isArray(ne)&&lA(ne)||(je.isFileList(ne)||je.endsWith(ve,"[]"))&&(pe=je.toArray(ne)))return ve=Tb(ve),pe.forEach(function(be,_e){!(je.isUndefined(be)||be===null)&&n.append(x===!0?S0([ve],_e,y):x===null?ve:ve+"[]",k(be))}),!1}return Fg(ne)?!0:(n.append(S0(fe,ve,y),k(ne)),!1)}const N=[],ee=Object.assign(uA,{defaultVisitor:D,convertValue:k,isVisitable:Fg});function se(ne,ve){if(!je.isUndefined(ne)){if(N.indexOf(ne)!==-1)throw Error("Circular reference detected in "+ve.join("."));N.push(ne),je.forEach(ne,function(pe,ue){(!(je.isUndefined(pe)||pe===null)&&m.call(n,pe,je.isString(ue)?ue.trim():ue,ve,ee))===!0&&se(pe,ve?ve.concat(ue):[ue])}),N.pop()}}if(!je.isObject(t))throw new TypeError("data must be an object");return se(t),n}function T0(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(p){return n[p]})}function Vy(t,n){this._pairs=[],t&&$d(t,this,n)}const Cb=Vy.prototype;Cb.append=function(n,l){this._pairs.push([n,l])};Cb.toString=function(n){const l=n?function(p){return n.call(this,p,T0)}:T0;return this._pairs.map(function(m){return l(m[0])+"="+l(m[1])},"").join("&")};function cA(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ab(t,n,l){if(!n)return t;const p=l&&l.encode||cA,m=l&&l.serialize;let y;if(m?y=m(n,l):y=je.isURLSearchParams(n)?n.toString():new Vy(n,l).toString(p),y){const x=t.indexOf("#");x!==-1&&(t=t.slice(0,x)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class pA{constructor(){this.handlers=[]}use(n,l,p){return this.handlers.push({fulfilled:n,rejected:l,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){je.forEach(this.handlers,function(p){p!==null&&n(p)})}}const C0=pA,Ib={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hA=typeof URLSearchParams<"u"?URLSearchParams:Vy,fA=typeof FormData<"u"?FormData:null,dA=typeof Blob<"u"?Blob:null,mA=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),gA=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),va={isBrowser:!0,classes:{URLSearchParams:hA,FormData:fA,Blob:dA},isStandardBrowserEnv:mA,isStandardBrowserWebWorkerEnv:gA,protocols:["http","https","file","blob","url","data"]};function yA(t,n){return $d(t,new va.classes.URLSearchParams,Object.assign({visitor:function(l,p,m,y){return va.isNode&&je.isBuffer(l)?(this.append(p,l.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},n))}function vA(t){return je.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function _A(t){const n={},l=Object.keys(t);let p;const m=l.length;let y;for(p=0;p<m;p++)y=l[p],n[y]=t[y];return n}function kb(t){function n(l,p,m,y){let x=l[y++];const E=Number.isFinite(+x),C=y>=l.length;return x=!x&&je.isArray(m)?m.length:x,C?(je.hasOwnProp(m,x)?m[x]=[m[x],p]:m[x]=p,!E):((!m[x]||!je.isObject(m[x]))&&(m[x]=[]),n(l,p,m[x],y)&&je.isArray(m[x])&&(m[x]=_A(m[x])),!E)}if(je.isFormData(t)&&je.isFunction(t.entries)){const l={};return je.forEachEntry(t,(p,m)=>{n(vA(p),m,l,0)}),l}return null}const xA={"Content-Type":void 0};function bA(t,n,l){if(je.isString(t))try{return(n||JSON.parse)(t),je.trim(t)}catch(p){if(p.name!=="SyntaxError")throw p}return(l||JSON.stringify)(t)}const Wd={transitional:Ib,adapter:["xhr","http"],transformRequest:[function(n,l){const p=l.getContentType()||"",m=p.indexOf("application/json")>-1,y=je.isObject(n);if(y&&je.isHTMLForm(n)&&(n=new FormData(n)),je.isFormData(n))return m&&m?JSON.stringify(kb(n)):n;if(je.isArrayBuffer(n)||je.isBuffer(n)||je.isStream(n)||je.isFile(n)||je.isBlob(n))return n;if(je.isArrayBufferView(n))return n.buffer;if(je.isURLSearchParams(n))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let E;if(y){if(p.indexOf("application/x-www-form-urlencoded")>-1)return yA(n,this.formSerializer).toString();if((E=je.isFileList(n))||p.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return $d(E?{"files[]":n}:n,C&&new C,this.formSerializer)}}return y||m?(l.setContentType("application/json",!1),bA(n)):n}],transformResponse:[function(n){const l=this.transitional||Wd.transitional,p=l&&l.forcedJSONParsing,m=this.responseType==="json";if(n&&je.isString(n)&&(p&&!this.responseType||m)){const x=!(l&&l.silentJSONParsing)&&m;try{return JSON.parse(n)}catch(E){if(x)throw E.name==="SyntaxError"?Cr.from(E,Cr.ERR_BAD_RESPONSE,this,null,this.response):E}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:va.classes.FormData,Blob:va.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};je.forEach(["delete","get","head"],function(n){Wd.headers[n]={}});je.forEach(["post","put","patch"],function(n){Wd.headers[n]=je.merge(xA)});const jy=Wd,wA=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),EA=t=>{const n={};let l,p,m;return t&&t.split(`
`).forEach(function(x){m=x.indexOf(":"),l=x.substring(0,m).trim().toLowerCase(),p=x.substring(m+1).trim(),!(!l||n[l]&&wA[l])&&(l==="set-cookie"?n[l]?n[l].push(p):n[l]=[p]:n[l]=n[l]?n[l]+", "+p:p)}),n},A0=Symbol("internals");function Cp(t){return t&&String(t).trim().toLowerCase()}function Zf(t){return t===!1||t==null?t:je.isArray(t)?t.map(Zf):String(t)}function SA(t){const n=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=l.exec(t);)n[p[1]]=p[2];return n}const TA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tg(t,n,l,p,m){if(je.isFunction(p))return p.call(this,n,l);if(m&&(n=l),!!je.isString(n)){if(je.isString(p))return n.indexOf(p)!==-1;if(je.isRegExp(p))return p.test(n)}}function CA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,l,p)=>l.toUpperCase()+p)}function AA(t,n){const l=je.toCamelCase(" "+n);["get","set","has"].forEach(p=>{Object.defineProperty(t,p+l,{value:function(m,y,x){return this[p].call(this,n,m,y,x)},configurable:!0})})}class Kd{constructor(n){n&&this.set(n)}set(n,l,p){const m=this;function y(E,C,k){const D=Cp(C);if(!D)throw new Error("header name must be a non-empty string");const N=je.findKey(m,D);(!N||m[N]===void 0||k===!0||k===void 0&&m[N]!==!1)&&(m[N||C]=Zf(E))}const x=(E,C)=>je.forEach(E,(k,D)=>y(k,D,C));return je.isPlainObject(n)||n instanceof this.constructor?x(n,l):je.isString(n)&&(n=n.trim())&&!TA(n)?x(EA(n),l):n!=null&&y(l,n,p),this}get(n,l){if(n=Cp(n),n){const p=je.findKey(this,n);if(p){const m=this[p];if(!l)return m;if(l===!0)return SA(m);if(je.isFunction(l))return l.call(this,m,p);if(je.isRegExp(l))return l.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,l){if(n=Cp(n),n){const p=je.findKey(this,n);return!!(p&&this[p]!==void 0&&(!l||tg(this,this[p],p,l)))}return!1}delete(n,l){const p=this;let m=!1;function y(x){if(x=Cp(x),x){const E=je.findKey(p,x);E&&(!l||tg(p,p[E],E,l))&&(delete p[E],m=!0)}}return je.isArray(n)?n.forEach(y):y(n),m}clear(n){const l=Object.keys(this);let p=l.length,m=!1;for(;p--;){const y=l[p];(!n||tg(this,this[y],y,n,!0))&&(delete this[y],m=!0)}return m}normalize(n){const l=this,p={};return je.forEach(this,(m,y)=>{const x=je.findKey(p,y);if(x){l[x]=Zf(m),delete l[y];return}const E=n?CA(y):String(y).trim();E!==y&&delete l[y],l[E]=Zf(m),p[E]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const l=Object.create(null);return je.forEach(this,(p,m)=>{p!=null&&p!==!1&&(l[m]=n&&je.isArray(p)?p.join(", "):p)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,l])=>n+": "+l).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...l){const p=new this(n);return l.forEach(m=>p.set(m)),p}static accessor(n){const p=(this[A0]=this[A0]={accessors:{}}).accessors,m=this.prototype;function y(x){const E=Cp(x);p[E]||(AA(m,x),p[E]=!0)}return je.isArray(n)?n.forEach(y):y(n),this}}Kd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.freezeMethods(Kd.prototype);je.freezeMethods(Kd);const es=Kd;function rg(t,n){const l=this||jy,p=n||l,m=es.from(p.headers);let y=p.data;return je.forEach(t,function(E){y=E.call(l,y,m.normalize(),n?n.status:void 0)}),m.normalize(),y}function Pb(t){return!!(t&&t.__CANCEL__)}function ph(t,n,l){Cr.call(this,t??"canceled",Cr.ERR_CANCELED,n,l),this.name="CanceledError"}je.inherits(ph,Cr,{__CANCEL__:!0});function IA(t,n,l){const p=l.config.validateStatus;!l.status||!p||p(l.status)?t(l):n(new Cr("Request failed with status code "+l.status,[Cr.ERR_BAD_REQUEST,Cr.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}const kA=va.isStandardBrowserEnv?function(){return{write:function(l,p,m,y,x,E){const C=[];C.push(l+"="+encodeURIComponent(p)),je.isNumber(m)&&C.push("expires="+new Date(m).toGMTString()),je.isString(y)&&C.push("path="+y),je.isString(x)&&C.push("domain="+x),E===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(l){const p=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function PA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MA(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}function Mb(t,n){return t&&!PA(n)?MA(t,n):n}const zA=va.isStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a");let p;function m(y){let x=y;return n&&(l.setAttribute("href",x),x=l.href),l.setAttribute("href",x),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return p=m(window.location.href),function(x){const E=je.isString(x)?m(x):x;return E.protocol===p.protocol&&E.host===p.host}}():function(){return function(){return!0}}();function LA(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function RA(t,n){t=t||10;const l=new Array(t),p=new Array(t);let m=0,y=0,x;return n=n!==void 0?n:1e3,function(C){const k=Date.now(),D=p[y];x||(x=k),l[m]=C,p[m]=k;let N=y,ee=0;for(;N!==m;)ee+=l[N++],N=N%t;if(m=(m+1)%t,m===y&&(y=(y+1)%t),k-x<n)return;const se=D&&k-D;return se?Math.round(ee*1e3/se):void 0}}function I0(t,n){let l=0;const p=RA(50,250);return m=>{const y=m.loaded,x=m.lengthComputable?m.total:void 0,E=y-l,C=p(E),k=y<=x;l=y;const D={loaded:y,total:x,progress:x?y/x:void 0,bytes:E,rate:C||void 0,estimated:C&&x&&k?(x-y)/C:void 0,event:m};D[n?"download":"upload"]=!0,t(D)}}const OA=typeof XMLHttpRequest<"u",DA=OA&&function(t){return new Promise(function(l,p){let m=t.data;const y=es.from(t.headers).normalize(),x=t.responseType;let E;function C(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}je.isFormData(m)&&(va.isStandardBrowserEnv||va.isStandardBrowserWebWorkerEnv?y.setContentType(!1):y.setContentType("multipart/form-data;",!1));let k=new XMLHttpRequest;if(t.auth){const se=t.auth.username||"",ne=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.set("Authorization","Basic "+btoa(se+":"+ne))}const D=Mb(t.baseURL,t.url);k.open(t.method.toUpperCase(),Ab(D,t.params,t.paramsSerializer),!0),k.timeout=t.timeout;function N(){if(!k)return;const se=es.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ve={data:!x||x==="text"||x==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:se,config:t,request:k};IA(function(pe){l(pe),C()},function(pe){p(pe),C()},ve),k=null}if("onloadend"in k?k.onloadend=N:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(N)},k.onabort=function(){k&&(p(new Cr("Request aborted",Cr.ECONNABORTED,t,k)),k=null)},k.onerror=function(){p(new Cr("Network Error",Cr.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let ne=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const ve=t.transitional||Ib;t.timeoutErrorMessage&&(ne=t.timeoutErrorMessage),p(new Cr(ne,ve.clarifyTimeoutError?Cr.ETIMEDOUT:Cr.ECONNABORTED,t,k)),k=null},va.isStandardBrowserEnv){const se=(t.withCredentials||zA(D))&&t.xsrfCookieName&&kA.read(t.xsrfCookieName);se&&y.set(t.xsrfHeaderName,se)}m===void 0&&y.setContentType(null),"setRequestHeader"in k&&je.forEach(y.toJSON(),function(ne,ve){k.setRequestHeader(ve,ne)}),je.isUndefined(t.withCredentials)||(k.withCredentials=!!t.withCredentials),x&&x!=="json"&&(k.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&k.addEventListener("progress",I0(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",I0(t.onUploadProgress)),(t.cancelToken||t.signal)&&(E=se=>{k&&(p(!se||se.type?new ph(null,t,k):se),k.abort(),k=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E)));const ee=LA(D);if(ee&&va.protocols.indexOf(ee)===-1){p(new Cr("Unsupported protocol "+ee+":",Cr.ERR_BAD_REQUEST,t));return}k.send(m||null)})},Gf={http:sA,xhr:DA};je.forEach(Gf,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const BA={getAdapter:t=>{t=je.isArray(t)?t:[t];const{length:n}=t;let l,p;for(let m=0;m<n&&(l=t[m],!(p=je.isString(l)?Gf[l.toLowerCase()]:l));m++);if(!p)throw p===!1?new Cr(`Adapter ${l} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(je.hasOwnProp(Gf,l)?`Adapter '${l}' is not available in the build`:`Unknown adapter '${l}'`);if(!je.isFunction(p))throw new TypeError("adapter is not a function");return p},adapters:Gf};function ng(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ph(null,t)}function k0(t){return ng(t),t.headers=es.from(t.headers),t.data=rg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),BA.getAdapter(t.adapter||jy.adapter)(t).then(function(p){return ng(t),p.data=rg.call(t,t.transformResponse,p),p.headers=es.from(p.headers),p},function(p){return Pb(p)||(ng(t),p&&p.response&&(p.response.data=rg.call(t,t.transformResponse,p.response),p.response.headers=es.from(p.response.headers))),Promise.reject(p)})}const P0=t=>t instanceof es?t.toJSON():t;function _c(t,n){n=n||{};const l={};function p(k,D,N){return je.isPlainObject(k)&&je.isPlainObject(D)?je.merge.call({caseless:N},k,D):je.isPlainObject(D)?je.merge({},D):je.isArray(D)?D.slice():D}function m(k,D,N){if(je.isUndefined(D)){if(!je.isUndefined(k))return p(void 0,k,N)}else return p(k,D,N)}function y(k,D){if(!je.isUndefined(D))return p(void 0,D)}function x(k,D){if(je.isUndefined(D)){if(!je.isUndefined(k))return p(void 0,k)}else return p(void 0,D)}function E(k,D,N){if(N in n)return p(k,D);if(N in t)return p(void 0,k)}const C={url:y,method:y,data:y,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:E,headers:(k,D)=>m(P0(k),P0(D),!0)};return je.forEach(Object.keys(Object.assign({},t,n)),function(D){const N=C[D]||m,ee=N(t[D],n[D],D);je.isUndefined(ee)&&N!==E||(l[D]=ee)}),l}const zb="1.4.0",qy={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{qy[t]=function(p){return typeof p===t||"a"+(n<1?"n ":" ")+t}});const M0={};qy.transitional=function(n,l,p){function m(y,x){return"[Axios v"+zb+"] Transitional option '"+y+"'"+x+(p?". "+p:"")}return(y,x,E)=>{if(n===!1)throw new Cr(m(x," has been removed"+(l?" in "+l:"")),Cr.ERR_DEPRECATED);return l&&!M0[x]&&(M0[x]=!0,console.warn(m(x," has been deprecated since v"+l+" and will be removed in the near future"))),n?n(y,x,E):!0}};function FA(t,n,l){if(typeof t!="object")throw new Cr("options must be an object",Cr.ERR_BAD_OPTION_VALUE);const p=Object.keys(t);let m=p.length;for(;m-- >0;){const y=p[m],x=n[y];if(x){const E=t[y],C=E===void 0||x(E,y,t);if(C!==!0)throw new Cr("option "+y+" must be "+C,Cr.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new Cr("Unknown option "+y,Cr.ERR_BAD_OPTION)}}const Ng={assertOptions:FA,validators:qy},Is=Ng.validators;class dd{constructor(n){this.defaults=n,this.interceptors={request:new C0,response:new C0}}request(n,l){typeof n=="string"?(l=l||{},l.url=n):l=n||{},l=_c(this.defaults,l);const{transitional:p,paramsSerializer:m,headers:y}=l;p!==void 0&&Ng.assertOptions(p,{silentJSONParsing:Is.transitional(Is.boolean),forcedJSONParsing:Is.transitional(Is.boolean),clarifyTimeoutError:Is.transitional(Is.boolean)},!1),m!=null&&(je.isFunction(m)?l.paramsSerializer={serialize:m}:Ng.assertOptions(m,{encode:Is.function,serialize:Is.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let x;x=y&&je.merge(y.common,y[l.method]),x&&je.forEach(["delete","get","head","post","put","patch","common"],ne=>{delete y[ne]}),l.headers=es.concat(x,y);const E=[];let C=!0;this.interceptors.request.forEach(function(ve){typeof ve.runWhen=="function"&&ve.runWhen(l)===!1||(C=C&&ve.synchronous,E.unshift(ve.fulfilled,ve.rejected))});const k=[];this.interceptors.response.forEach(function(ve){k.push(ve.fulfilled,ve.rejected)});let D,N=0,ee;if(!C){const ne=[k0.bind(this),void 0];for(ne.unshift.apply(ne,E),ne.push.apply(ne,k),ee=ne.length,D=Promise.resolve(l);N<ee;)D=D.then(ne[N++],ne[N++]);return D}ee=E.length;let se=l;for(N=0;N<ee;){const ne=E[N++],ve=E[N++];try{se=ne(se)}catch(fe){ve.call(this,fe);break}}try{D=k0.call(this,se)}catch(ne){return Promise.reject(ne)}for(N=0,ee=k.length;N<ee;)D=D.then(k[N++],k[N++]);return D}getUri(n){n=_c(this.defaults,n);const l=Mb(n.baseURL,n.url);return Ab(l,n.params,n.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(n){dd.prototype[n]=function(l,p){return this.request(_c(p||{},{method:n,url:l,data:(p||{}).data}))}});je.forEach(["post","put","patch"],function(n){function l(p){return function(y,x,E){return this.request(_c(E||{},{method:n,headers:p?{"Content-Type":"multipart/form-data"}:{},url:y,data:x}))}}dd.prototype[n]=l(),dd.prototype[n+"Form"]=l(!0)});const $f=dd;class Hy{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(y){l=y});const p=this;this.promise.then(m=>{if(!p._listeners)return;let y=p._listeners.length;for(;y-- >0;)p._listeners[y](m);p._listeners=null}),this.promise.then=m=>{let y;const x=new Promise(E=>{p.subscribe(E),y=E}).then(m);return x.cancel=function(){p.unsubscribe(y)},x},n(function(y,x,E){p.reason||(p.reason=new ph(y,x,E),l(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const l=this._listeners.indexOf(n);l!==-1&&this._listeners.splice(l,1)}static source(){let n;return{token:new Hy(function(m){n=m}),cancel:n}}}const NA=Hy;function UA(t){return function(l){return t.apply(null,l)}}function VA(t){return je.isObject(t)&&t.isAxiosError===!0}const Ug={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ug).forEach(([t,n])=>{Ug[n]=t});const jA=Ug;function Lb(t){const n=new $f(t),l=mb($f.prototype.request,n);return je.extend(l,$f.prototype,n,{allOwnKeys:!0}),je.extend(l,n,null,{allOwnKeys:!0}),l.create=function(m){return Lb(_c(t,m))},l}const Wn=Lb(jy);Wn.Axios=$f;Wn.CanceledError=ph;Wn.CancelToken=NA;Wn.isCancel=Pb;Wn.VERSION=zb;Wn.toFormData=$d;Wn.AxiosError=Cr;Wn.Cancel=Wn.CanceledError;Wn.all=function(n){return Promise.all(n)};Wn.spread=UA;Wn.isAxiosError=VA;Wn.mergeConfig=_c;Wn.AxiosHeaders=es;Wn.formToJSON=t=>kb(je.isHTMLForm(t)?new FormData(t):t);Wn.HttpStatusCode=jA;Wn.default=Wn;const Ja=Wn;const qA={data(){return{houses:[],access_token:this.$mapboxApiKey,map:{},features:[]}},mounted(){this.createMap()},computed:{renderedHouses(){return this.houses.filter(t=>t.fake_latitude!=null)}},methods:{createdAt(t){return t.created_at.slice(0,10)},async createMap(){try{this.map=jg(this.access_token,"streets"),Ja.get("/properties",{headers:{"Content-Type":"application/json"}}).then(t=>{console.log("response",t.data);let n=JSON.parse(JSON.stringify(t.data));this.houses=n.sort((l,p)=>p.rating-l.rating),this.drawHouses(JSON.parse(JSON.stringify(t.data)))})}catch(t){console.log("map error",t)}},drawHouses(t){const n=[];t.forEach(l=>{if(console.log(l),l.fake_longitude){l.longitude,l.latitude;const p=[l.fake_longitude,l.fake_latitude],m=this.createGeoJSONCircle(p,.5);n.push(m)}}),this.showMarkers("circles",n)},showMarkers(t,n){const l=this;this.map.on("load",function(){l.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n}});const p=t==="circles"?{id:t,type:"fill",source:t,paint:{"fill-color":"blue","fill-opacity":.6}}:{id:t,type:"circle",source:t,paint:{"circle-radius":3,"circle-color":"red"}};l.map.addLayer(p)})},createGeoJSONCircle(t,n,l){l||(l=64);for(var p={latitude:t[1],longitude:t[0]},m=n,y=[],x=m/(111.32*Math.cos(p.latitude*Math.PI/180)),E=m/110.574,C,k,D,N=0;N<l;N++)C=N/l*(2*Math.PI),k=x*Math.cos(C),D=E*Math.sin(C),y.push([p.longitude+k,p.latitude+D]);return y.push(y[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[y]}}}}},HA=t=>(th("data-v-ca150f83"),t=t(),rh(),t),ZA={class:"main"},GA={class:"sidebar p-1"},$A={class:"list-group"},WA={class:"list-group-item list-group-item-action flex-column align-items-start"},KA={class:"d-flex w-100 justify-content-between align-items-center"},XA={class:"mb-1"},JA={class:"badge badge-secondary ml-1"},YA={class:"d-flex w-100 justify-content-between align-items-center"},QA={class:"text-nowrap"},eI={class:"text-nowrap ml-1"},tI=HA(()=>Ft("div",{class:"map-wrapper"},[Ft("div",{id:"map"})],-1));function rI(t,n,l,p,m,y){return Sn(),Xi("div",ZA,[Ft("div",GA,[Ft("div",null,[Ft("button",{class:"btn btn-block btn-primary my-1",onClick:n[0]||(n[0]=x=>t.$emit("add-house"))},"Add my house")]),Ft("div",$A,[(Sn(!0),Xi(ii,null,z1(y.renderedHouses,x=>(Sn(),Xi("a",WA,[Ft("div",KA,[Ft("h5",XA,Io(x.title),1),Ft("h4",JA,Io(x.rating),1)]),Ft("div",YA,[Ft("small",QA,"Updated: "+Io(y.createdAt(x)),1),Ft("small",eI,Io(x.price)+" ",1)])]))),256))])]),tI])}const nI=Zs(qA,[["render",rI],["__scopeId","data-v-ca150f83"]]);var Cc=oI,iI=Object.prototype.hasOwnProperty;function oI(){for(var t={},n=0;n<arguments.length;n++){var l=arguments[n];for(var p in l)iI.call(l,p)&&(t[p]=l[p])}return t}var Rb={exports:{}};(function(t,n){(function(){var l={};t.exports=l,l.simpleFilter=function(p,m){return m.filter(function(y){return l.test(p,y)})},l.test=function(p,m){return l.match(p,m)!==null},l.match=function(p,m,y){y=y||{};var x=0,E=[],C=m.length,k=0,D=0,N=y.pre||"",ee=y.post||"",se=y.caseSensitive&&m||m.toLowerCase(),ne;p=y.caseSensitive&&p||p.toLowerCase();for(var ve=0;ve<C;ve++)ne=m[ve],se[ve]===p[x]?(ne=N+ne+ee,x+=1,D+=1+D):D=0,k+=D,E[E.length]=ne;return x===p.length?(k=se===p?1/0:k,{rendered:E.join(""),score:k}):null},l.filter=function(p,m,y){return!m||m.length===0?[]:typeof p!="string"?m:(y=y||{},m.reduce(function(x,E,C,k){var D=E;y.extract&&(D=y.extract(E));var N=l.match(p,D,y);return N!=null&&(x[x.length]={string:N.rendered,score:N.score,index:C,original:E}),x},[]).sort(function(x,E){var C=E.score-x.score;return C||x.index-E.index}))}})()})(Rb);var aI=Rb.exports,to=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};to.prototype.show=function(){this.element.style.display="block"};to.prototype.hide=function(){this.element.style.display="none"};to.prototype.add=function(t){this.items.push(t)};to.prototype.clear=function(){this.items=[],this.active=0};to.prototype.isEmpty=function(){return!this.items.length};to.prototype.isVisible=function(){return this.element.style.display==="block"};to.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};to.prototype.drawItem=function(t,n){var l=document.createElement("li"),p=document.createElement("a");n&&(l.className+=" active"),p.innerHTML=t.string,l.appendChild(p),this.element.appendChild(l),l.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),l.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))};to.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};to.prototype.move=function(t){this.active=t,this.draw()};to.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};to.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};to.prototype.drawError=function(t){var n=document.createElement("li");n.innerHTML=t,this.element.appendChild(n),this.show()};var sI=to,lI=Cc,uI=aI,cI=sI,Ii=function(t,n,l){return l=l||{},this.options=lI({minLength:2,limit:5,filter:!0,hideOnBlur:!0},l),this.el=t,this.data=n||[],this.list=new cI(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(p){this.handleKeyUp(p.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(p){this.handleKeyDown(p)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(p){this.handlePaste(p)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ii.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};Ii.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ii.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ii.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var n=this;setTimeout(function(){n.handleInputChange(t.target.value)},100)}};Ii.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(n){for(var l=0;l<n.length&&(this.list.add(n[l]),l!==this.options.limit-1);l++);this.list.draw()}.bind(this))};Ii.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ii.prototype.update=function(t){this.data=t,this.handleKeyUp()};Ii.prototype.clear=function(){this.data=[],this.list.clear()};Ii.prototype.normalize=function(t){return t=t.toLowerCase(),t};Ii.prototype.match=function(t,n){return t.indexOf(n)>-1};Ii.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),this.el.dispatchEvent(n)}else this.el.fireEvent("onchange")};Ii.prototype.getCandidates=function(t){var n={pre:"<strong>",post:"</strong>",extract:function(p){return this.getItemValue(p)}.bind(this)},l;this.options.filter?(l=uI.filter(this.query,this.data,n),l=l.map(function(p){return{original:p.original,string:this.render(p.original,p.string)}}.bind(this))):l=this.data.map(function(p){var m=this.render(p);return{original:p,string:m}}.bind(this)),t(l)};Ii.prototype.getItemValue=function(t){return t};Ii.prototype.render=function(t,n){if(n)return n;for(var l=t.original?this.getItemValue(t.original):this.getItemValue(t),p=this.normalize(l),m=p.lastIndexOf(this.query);m>-1;){var y=m+this.query.length;l=l.slice(0,m)+"<strong>"+l.slice(m,y)+"</strong>"+l.slice(y),m=p.slice(0,m).lastIndexOf(this.query)}return l};Ii.prototype.renderError=function(t){this.list.drawError(t)};var pI=Ii,Ob=pI,hI=Ob;typeof window<"u"&&(window.Suggestions=Ob);var fI="Expected a function",z0=0/0,dI="[object Symbol]",mI=/^\s+|\s+$/g,gI=/^[-+]0x[0-9a-f]+$/i,yI=/^0b[01]+$/i,vI=/^0o[0-7]+$/i,_I=parseInt,xI=typeof mo=="object"&&mo&&mo.Object===Object&&mo,bI=typeof self=="object"&&self&&self.Object===Object&&self,wI=xI||bI||Function("return this")(),EI=Object.prototype,SI=EI.toString,TI=Math.max,CI=Math.min,ig=function(){return wI.Date.now()};function AI(t,n,l){var p,m,y,x,E,C,k=0,D=!1,N=!1,ee=!0;if(typeof t!="function")throw new TypeError(fI);n=L0(n)||0,Vg(l)&&(D=!!l.leading,N="maxWait"in l,y=N?TI(L0(l.maxWait)||0,n):y,ee="trailing"in l?!!l.trailing:ee);function se(f){var ke=p,Y=m;return p=m=void 0,k=f,x=t.apply(Y,ke),x}function ne(f){return k=f,E=setTimeout(pe,n),D?se(f):x}function ve(f){var ke=f-C,Y=f-k,Fe=n-ke;return N?CI(Fe,y-Y):Fe}function fe(f){var ke=f-C,Y=f-k;return C===void 0||ke>=n||ke<0||N&&Y>=y}function pe(){var f=ig();if(fe(f))return ue(f);E=setTimeout(pe,ve(f))}function ue(f){return E=void 0,ee&&p?se(f):(p=m=void 0,x)}function be(){E!==void 0&&clearTimeout(E),k=0,p=C=m=E=void 0}function _e(){return E===void 0?x:ue(ig())}function Oe(){var f=ig(),ke=fe(f);if(p=arguments,m=this,C=f,ke){if(E===void 0)return ne(C);if(N)return E=setTimeout(pe,n),se(C)}return E===void 0&&(E=setTimeout(pe,n)),x}return Oe.cancel=be,Oe.flush=_e,Oe}function Vg(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function II(t){return!!t&&typeof t=="object"}function kI(t){return typeof t=="symbol"||II(t)&&SI.call(t)==dI}function L0(t){if(typeof t=="number")return t;if(kI(t))return z0;if(Vg(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Vg(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(mI,"");var l=yI.test(t);return l||vI.test(t)?_I(t.slice(2),l?2:8):gI.test(t)?z0:+t}var PI=AI,Zy={exports:{}},uc=typeof Reflect=="object"?Reflect:null,R0=uc&&typeof uc.apply=="function"?uc.apply:function(n,l,p){return Function.prototype.apply.call(n,l,p)},Wf;uc&&typeof uc.ownKeys=="function"?Wf=uc.ownKeys:Object.getOwnPropertySymbols?Wf=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Wf=function(n){return Object.getOwnPropertyNames(n)};function MI(t){console&&console.warn&&console.warn(t)}var Db=Number.isNaN||function(n){return n!==n};function jr(){jr.init.call(this)}Zy.exports=jr;Zy.exports.once=OI;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var O0=10;function Xd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return O0},set:function(t){if(typeof t!="number"||t<0||Db(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");O0=t}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||Db(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function Bb(t){return t._maxListeners===void 0?jr.defaultMaxListeners:t._maxListeners}jr.prototype.getMaxListeners=function(){return Bb(this)};jr.prototype.emit=function(n){for(var l=[],p=1;p<arguments.length;p++)l.push(arguments[p]);var m=n==="error",y=this._events;if(y!==void 0)m=m&&y.error===void 0;else if(!m)return!1;if(m){var x;if(l.length>0&&(x=l[0]),x instanceof Error)throw x;var E=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw E.context=x,E}var C=y[n];if(C===void 0)return!1;if(typeof C=="function")R0(C,this,l);else for(var k=C.length,D=jb(C,k),p=0;p<k;++p)R0(D[p],this,l);return!0};function Fb(t,n,l,p){var m,y,x;if(Xd(l),y=t._events,y===void 0?(y=t._events=Object.create(null),t._eventsCount=0):(y.newListener!==void 0&&(t.emit("newListener",n,l.listener?l.listener:l),y=t._events),x=y[n]),x===void 0)x=y[n]=l,++t._eventsCount;else if(typeof x=="function"?x=y[n]=p?[l,x]:[x,l]:p?x.unshift(l):x.push(l),m=Bb(t),m>0&&x.length>m&&!x.warned){x.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=t,E.type=n,E.count=x.length,MI(E)}return t}jr.prototype.addListener=function(n,l){return Fb(this,n,l,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(n,l){return Fb(this,n,l,!0)};function zI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nb(t,n,l){var p={fired:!1,wrapFn:void 0,target:t,type:n,listener:l},m=zI.bind(p);return m.listener=l,p.wrapFn=m,m}jr.prototype.once=function(n,l){return Xd(l),this.on(n,Nb(this,n,l)),this};jr.prototype.prependOnceListener=function(n,l){return Xd(l),this.prependListener(n,Nb(this,n,l)),this};jr.prototype.removeListener=function(n,l){var p,m,y,x,E;if(Xd(l),m=this._events,m===void 0)return this;if(p=m[n],p===void 0)return this;if(p===l||p.listener===l)--this._eventsCount===0?this._events=Object.create(null):(delete m[n],m.removeListener&&this.emit("removeListener",n,p.listener||l));else if(typeof p!="function"){for(y=-1,x=p.length-1;x>=0;x--)if(p[x]===l||p[x].listener===l){E=p[x].listener,y=x;break}if(y<0)return this;y===0?p.shift():LI(p,y),p.length===1&&(m[n]=p[0]),m.removeListener!==void 0&&this.emit("removeListener",n,E||l)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(n){var l,p,m;if(p=this._events,p===void 0)return this;if(p.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):p[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete p[n]),this;if(arguments.length===0){var y=Object.keys(p),x;for(m=0;m<y.length;++m)x=y[m],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(l=p[n],typeof l=="function")this.removeListener(n,l);else if(l!==void 0)for(m=l.length-1;m>=0;m--)this.removeListener(n,l[m]);return this};function Ub(t,n,l){var p=t._events;if(p===void 0)return[];var m=p[n];return m===void 0?[]:typeof m=="function"?l?[m.listener||m]:[m]:l?RI(m):jb(m,m.length)}jr.prototype.listeners=function(n){return Ub(this,n,!0)};jr.prototype.rawListeners=function(n){return Ub(this,n,!1)};jr.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):Vb.call(t,n)};jr.prototype.listenerCount=Vb;function Vb(t){var n=this._events;if(n!==void 0){var l=n[t];if(typeof l=="function")return 1;if(l!==void 0)return l.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?Wf(this._events):[]};function jb(t,n){for(var l=new Array(n),p=0;p<n;++p)l[p]=t[p];return l}function LI(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function RI(t){for(var n=new Array(t.length),l=0;l<n.length;++l)n[l]=t[l].listener||t[l];return n}function OI(t,n){return new Promise(function(l,p){function m(x){t.removeListener(n,y),p(x)}function y(){typeof t.removeListener=="function"&&t.removeListener("error",m),l([].slice.call(arguments))}qb(t,n,y,{once:!0}),n!=="error"&&DI(t,m,{once:!0})})}function DI(t,n,l){typeof t.on=="function"&&qb(t,"error",n,l)}function qb(t,n,l,p){if(typeof t.on=="function")p.once?t.once(n,l):t.on(n,l);else if(typeof t.addEventListener=="function")t.addEventListener(n,function m(y){p.once&&t.removeEventListener(n,m),l(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var BI=Zy.exports,FI={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function NI(t){var n=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n?{key:n[1],value:n[2]}:null}function UI(t){var n=t.match(/<?([^>]*)>(.*)/);if(!n)return null;var l=n[1],p=n[2].split(";"),m=null,y=p.reduce(function(x,E){var C=NI(E);return C?C.key==="rel"?(m||(m=C.value),x):(x[C.key]=C.value,x):x},{});return m?{url:l,rel:m,params:y}:null}function VI(t){return t?t.split(/,\s*</).reduce(function(n,l){var p=UI(l);if(!p)return n;var m=p.rel.split(/\s+/);return m.forEach(function(y){n[y]||(n[y]={url:p.url,params:p.params})}),n},{}):{}}var jI=VI,qI=jI;function Gy(t,n){this.request=t,this.headers=n.headers,this.rawBody=n.body,this.statusCode=n.statusCode;try{this.body=JSON.parse(n.body||"{}")}catch{this.body=n.body}this.links=qI(this.headers.link)}Gy.prototype.hasNextPage=function(){return!!this.links.next};Gy.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var HI=Gy,Jd={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},D0=Jd;function ZI(t){var n=t.type||D0.ERROR_HTTP,l;if(t.body)try{l=JSON.parse(t.body)}catch{l=t.body}else l=null;var p=t.message||null;p||(typeof l=="string"?p=l:l&&typeof l.message=="string"?p=l.message:n===D0.ERROR_REQUEST_ABORTED&&(p="Request aborted")),this.message=p,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=l}var GI=ZI;function $I(t){var n=t.indexOf(":"),l=t.substring(0,n).trim().toLowerCase(),p=t.substring(n+1).trim();return{name:l,value:p}}function WI(t){var n={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(l){var p=$I(l);n[p.name]=p.value}),n}var KI=WI,XI=HI,B0=GI,og=Jd,JI=KI,md={};function YI(t){var n=md[t.id];n&&(n.abort(),delete md[t.id])}function QI(t,n){return new XI(t,{body:n.response,headers:JI(n.getAllResponseHeaders()),statusCode:n.status})}function F0(t){var n=t.total,l=t.loaded,p=100*l/n;return{total:n,transferred:l,percent:p}}function Hb(t,n){return new Promise(function(l,p){n.onprogress=function(x){t.emitter.emit(og.EVENT_PROGRESS_DOWNLOAD,F0(x))};var m=t.file;m&&(n.upload.onprogress=function(x){t.emitter.emit(og.EVENT_PROGRESS_UPLOAD,F0(x))}),n.onerror=function(x){p(x)},n.onabort=function(){var x=new B0({request:t,type:og.ERROR_REQUEST_ABORTED});p(x)},n.onload=function(){if(delete md[t.id],n.status<200||n.status>=400){var x=new B0({request:t,body:n.response,statusCode:n.status});p(x);return}l(n)};var y=t.body;typeof y=="string"?n.send(y):y?n.send(JSON.stringify(y)):m?n.send(m):n.send(),md[t.id]=n}).then(function(l){return QI(t,l)})}function Zb(t,n){var l=t.url(n),p=new window.XMLHttpRequest;return p.open(t.method,l),Object.keys(t.headers).forEach(function(m){p.setRequestHeader(m,t.headers[m])}),p}function ek(t){return Promise.resolve().then(function(){var n=Zb(t,t.client.accessToken);return Hb(t,n)})}var tk={browserAbort:YI,sendRequestXhr:Hb,browserSend:ek,createRequestXhr:Zb},gd={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */gd.exports;(function(t,n){(function(l){var p=n,m=t&&t.exports==p&&t,y=typeof mo=="object"&&mo;(y.global===y||y.window===y)&&(l=y);var x=function(ne){this.message=ne};x.prototype=new Error,x.prototype.name="InvalidCharacterError";var E=function(ne){throw new x(ne)},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=/[\t\n\f\r ]/g,D=function(ne){ne=String(ne).replace(k,"");var ve=ne.length;ve%4==0&&(ne=ne.replace(/==?$/,""),ve=ne.length),(ve%4==1||/[^+a-zA-Z0-9/]/.test(ne))&&E("Invalid character: the string to be decoded is not correctly encoded.");for(var fe=0,pe,ue,be="",_e=-1;++_e<ve;)ue=C.indexOf(ne.charAt(_e)),pe=fe%4?pe*64+ue:ue,fe++%4&&(be+=String.fromCharCode(255&pe>>(-2*fe&6)));return be},N=function(ne){ne=String(ne),/[^\0-\xFF]/.test(ne)&&E("The string to be encoded contains characters outside of the Latin1 range.");for(var ve=ne.length%3,fe="",pe=-1,ue,be,_e,Oe,f=ne.length-ve;++pe<f;)ue=ne.charCodeAt(pe)<<16,be=ne.charCodeAt(++pe)<<8,_e=ne.charCodeAt(++pe),Oe=ue+be+_e,fe+=C.charAt(Oe>>18&63)+C.charAt(Oe>>12&63)+C.charAt(Oe>>6&63)+C.charAt(Oe&63);return ve==2?(ue=ne.charCodeAt(pe)<<8,be=ne.charCodeAt(++pe),Oe=ue+be,fe+=C.charAt(Oe>>10)+C.charAt(Oe>>4&63)+C.charAt(Oe<<2&63)+"="):ve==1&&(Oe=ne.charCodeAt(pe),fe+=C.charAt(Oe>>2)+C.charAt(Oe<<4&63)+"=="),fe},ee={encode:N,decode:D,version:"0.1.0"};if(p&&!p.nodeType)if(m)m.exports=ee;else for(var se in ee)ee.hasOwnProperty(se)&&(p[se]=ee[se]);else l.base64=ee})(mo)})(gd,gd.exports);var rk=gd.exports,nk=rk,ag={};function ik(t){if(ag[t])return ag[t];var n=t.split("."),l=n[0],p=n[1];if(!p)throw new Error("Invalid token");var m=ok(p),y={usage:l,user:m.u};return Ml(m,"a")&&(y.authorization=m.a),Ml(m,"exp")&&(y.expires=m.exp*1e3),Ml(m,"iat")&&(y.created=m.iat*1e3),Ml(m,"scopes")&&(y.scopes=m.scopes),Ml(m,"client")&&(y.client=m.client),Ml(m,"ll")&&(y.lastLogin=m.ll),Ml(m,"iu")&&(y.impersonator=m.iu),ag[t]=y,y}function ok(t){try{return JSON.parse(nk.decode(t))}catch{throw new Error("Invalid token")}}function Ml(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var Gb=ik,$b={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,l="~";function p(){}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(l=!1));function m(C,k,D){this.fn=C,this.context=k,this.once=D||!1}function y(C,k,D,N,ee){if(typeof D!="function")throw new TypeError("The listener must be a function");var se=new m(D,N||C,ee),ne=l?l+k:k;return C._events[ne]?C._events[ne].fn?C._events[ne]=[C._events[ne],se]:C._events[ne].push(se):(C._events[ne]=se,C._eventsCount++),C}function x(C,k){--C._eventsCount===0?C._events=new p:delete C._events[k]}function E(){this._events=new p,this._eventsCount=0}E.prototype.eventNames=function(){var k=[],D,N;if(this._eventsCount===0)return k;for(N in D=this._events)n.call(D,N)&&k.push(l?N.slice(1):N);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(D)):k},E.prototype.listeners=function(k){var D=l?l+k:k,N=this._events[D];if(!N)return[];if(N.fn)return[N.fn];for(var ee=0,se=N.length,ne=new Array(se);ee<se;ee++)ne[ee]=N[ee].fn;return ne},E.prototype.listenerCount=function(k){var D=l?l+k:k,N=this._events[D];return N?N.fn?1:N.length:0},E.prototype.emit=function(k,D,N,ee,se,ne){var ve=l?l+k:k;if(!this._events[ve])return!1;var fe=this._events[ve],pe=arguments.length,ue,be;if(fe.fn){switch(fe.once&&this.removeListener(k,fe.fn,void 0,!0),pe){case 1:return fe.fn.call(fe.context),!0;case 2:return fe.fn.call(fe.context,D),!0;case 3:return fe.fn.call(fe.context,D,N),!0;case 4:return fe.fn.call(fe.context,D,N,ee),!0;case 5:return fe.fn.call(fe.context,D,N,ee,se),!0;case 6:return fe.fn.call(fe.context,D,N,ee,se,ne),!0}for(be=1,ue=new Array(pe-1);be<pe;be++)ue[be-1]=arguments[be];fe.fn.apply(fe.context,ue)}else{var _e=fe.length,Oe;for(be=0;be<_e;be++)switch(fe[be].once&&this.removeListener(k,fe[be].fn,void 0,!0),pe){case 1:fe[be].fn.call(fe[be].context);break;case 2:fe[be].fn.call(fe[be].context,D);break;case 3:fe[be].fn.call(fe[be].context,D,N);break;case 4:fe[be].fn.call(fe[be].context,D,N,ee);break;default:if(!ue)for(Oe=1,ue=new Array(pe-1);Oe<pe;Oe++)ue[Oe-1]=arguments[Oe];fe[be].fn.apply(fe[be].context,ue)}}return!0},E.prototype.on=function(k,D,N){return y(this,k,D,N,!1)},E.prototype.once=function(k,D,N){return y(this,k,D,N,!0)},E.prototype.removeListener=function(k,D,N,ee){var se=l?l+k:k;if(!this._events[se])return this;if(!D)return x(this,se),this;var ne=this._events[se];if(ne.fn)ne.fn===D&&(!ee||ne.once)&&(!N||ne.context===N)&&x(this,se);else{for(var ve=0,fe=[],pe=ne.length;ve<pe;ve++)(ne[ve].fn!==D||ee&&!ne[ve].once||N&&ne[ve].context!==N)&&fe.push(ne[ve]);fe.length?this._events[se]=fe.length===1?fe[0]:fe:x(this,se)}return this},E.prototype.removeAllListeners=function(k){var D;return k?(D=l?l+k:k,this._events[D]&&x(this,D)):(this._events=new p,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=l,E.EventEmitter=E,t.exports=E})($b);var ak=$b.exports;function sk(t){return t.map(encodeURIComponent).join(",")}function Wb(t){return Array.isArray(t)?sk(t):encodeURIComponent(String(t))}function Kb(t,n,l){if(l===!1||l===null)return t;var p=/\?/.test(t)?"&":"?",m=encodeURIComponent(n);return l!==void 0&&l!==""&&l!==!0&&(m+="="+Wb(l)),""+t+p+m}function lk(t,n){if(!n)return t;var l=t;return Object.keys(n).forEach(function(p){var m=n[p];m!==void 0&&(Array.isArray(m)&&(m=m.filter(function(y){return y!=null}).join(",")),l=Kb(l,p,m))}),l}function uk(t,n){if(!n||t.slice(0,4)==="http")return t;var l=t[0]==="/"?"":"/";return""+n.replace(/\/$/,"")+l+t}function ck(t,n){return n?t.replace(/\/:([a-zA-Z0-9]+)/g,function(l,p){var m=n[p];if(m===void 0)throw new Error("Unspecified route parameter "+p);var y=Wb(m);return"/"+y}):t}var pk={appendQueryObject:lk,appendQueryParam:Kb,prependOrigin:uk,interpolateRouteParams:ck},hk=Gb,$y=Cc,fk=ak,Ff=pk,N0=Jd,dk=1;function qs(t,n){if(!t)throw new Error("MapiRequest requires a client");if(!n||!n.path||!n.method)throw new Error("MapiRequest requires an options object with path and method properties");var l={};n.body&&(l["content-type"]="application/json");var p=$y(l,n.headers),m=Object.keys(p).reduce(function(y,x){return y[x.toLowerCase()]=p[x],y},{});this.id=dk++,this._options=n,this.emitter=new fk,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=n.path,this.method=n.method,this.origin=n.origin||t.origin,this.query=n.query||{},this.params=n.params||{},this.body=n.body||null,this.file=n.file||null,this.encoding=n.encoding||"utf8",this.sendFileAs=n.sendFileAs||null,this.headers=m}qs.prototype.url=function(n){var l=Ff.prependOrigin(this.path,this.origin);l=Ff.appendQueryObject(l,this.query);var p=this.params,m=n??this.client.accessToken;if(m){l=Ff.appendQueryParam(l,"access_token",m);var y=hk(m).user;p=$y({ownerId:y},p)}return l=Ff.interpolateRouteParams(l,p),l};qs.prototype.send=function(){var n=this;if(n.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return n.sent=!0,n.client.sendRequest(n).then(function(l){return n.response=l,n.emitter.emit(N0.EVENT_RESPONSE,l),l},function(l){throw n.error=l,n.emitter.emit(N0.EVENT_ERROR,l),l})};qs.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};qs.prototype.eachPage=function(n){var l=this;function p(x){function E(){delete l._nextPageRequest;var C=x.nextPage();C&&(l._nextPageRequest=C,y(C))}n(null,x,E)}function m(x){n(x,null,function(){})}function y(x){x.send().then(p,m)}y(this)};qs.prototype.clone=function(){return this._extend()};qs.prototype._extend=function(n){var l=$y(this._options,n);return new qs(this.client,l)};var mk=qs,gk=Gb,yk=mk,vk=Jd;function Xb(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");gk(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||vk.API_ORIGIN}Xb.prototype.createRequest=function(n){return new yk(this,n)};var Jb=Xb,Yb=tk,Qb=Jb;function xc(t){Qb.call(this,t)}xc.prototype=Object.create(Qb.prototype);xc.prototype.constructor=xc;xc.prototype.sendRequest=Yb.browserSend;xc.prototype.abortRequest=Yb.browserAbort;function _k(t){return new xc(t)}var ew=_k,xk=ew,bk=xk,wk=Object.prototype.toString,Ek=function(t){var n;return wk.call(t)==="[object Object]"&&(n=Object.getPrototypeOf(t),n===null||n===Object.getPrototypeOf({}))},Sk=Ek,Tk=Cc,tw="value",sg=`
  `,Wr={};Wr.assert=function(t,n){return n=n||{},function(l){var p=Hs(t,l);if(p){var m=Wy(p,n);throw n.apiName&&(m=n.apiName+": "+m),new Error(m)}}};Wr.shape=function(n){var l=kk(n);return function(m){var y=Hs(Wr.plainObject,m);if(y)return y;for(var x,E,C=[],k=0;k<l.length;k++)x=l[k].key,E=l[k].value,y=Hs(E,m[x]),y&&C.push([x].concat(y));return C.length<2?C[0]:function(D){C=C.map(function(se){var ne=se[0],ve=Wy(se,D).split(`
`).join(sg);return"- "+ne+": "+ve});var N=D.path.join("."),ee=N===tw?"":" of "+N;return"The following properties"+ee+" have invalid values:"+sg+C.join(sg)}}};Wr.strictShape=function(n){var l=Wr.shape(n);return function(m){var y=l(m);if(y)return y;var x=Object.keys(m).reduce(function(E,C){return n[C]===void 0&&E.push(C),E},[]);if(x.length!==0)return function(){return"The following keys are invalid: "+x.join(", ")}}};Wr.arrayOf=function(n){return rw(n)};Wr.tuple=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return rw(n)};function rw(t){var n=Array.isArray(t),l=function(p){return n?t[p]:t};return function(m){var y=Hs(Wr.plainArray,m);if(y)return y;if(n&&m.length!==t.length)return"an array with "+t.length+" items";for(var x=0;x<m.length;x++)if(y=Hs(l(x),m[x]),y)return[x].concat(y)}}Wr.required=function(n){function l(p){return p==null?function(m){return nw(m,iw(m.path)?"cannot be undefined/null.":"is required.")}:n.apply(this,arguments)}return l.__required=!0,l};Wr.oneOfType=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(p){var m=n.map(function(y){return Hs(y,p)}).filter(Boolean);if(m.length===n.length)return m.every(function(y){return y.length===1&&typeof y[0]=="string"})?Ck(m.map(function(y){return y[0]})):m.reduce(function(y,x){return x.length>y.length?x:y})}};Wr.equal=function(n){return function(p){if(p!==n)return JSON.stringify(n)}};Wr.oneOf=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),l=n.map(function(p){return Wr.equal(p)});return Wr.oneOfType.apply(this,l)};Wr.range=function(n){var l=n[0],p=n[1];return function(y){var x=Hs(Wr.number,y);if(x||y<l||y>p)return"number between "+l+" & "+p+" (inclusive)"}};Wr.any=function(){};Wr.boolean=function(n){if(typeof n!="boolean")return"boolean"};Wr.number=function(n){if(typeof n!="number")return"number"};Wr.plainArray=function(n){if(!Array.isArray(n))return"array"};Wr.plainObject=function(n){if(!Sk(n))return"object"};Wr.string=function(n){if(typeof n!="string")return"string"};Wr.func=function(n){if(typeof n!="function")return"function"};function Hs(t,n){if(!(n==null&&!t.hasOwnProperty("__required"))){var l=t(n);if(l)return Array.isArray(l)?l:[l]}}function Wy(t,n){var l=t.length,p=t[l-1],m=t.slice(0,l-1);return m.length===0&&(m=[tw]),n=Tk(n,{path:m}),typeof p=="function"?p(n):nw(n,Ak(p))}function Ck(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function Ak(t){return"must be "+Ik(t)+"."}function Ik(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function nw(t,n){var l=iw(t.path),p=t.path.join(".")+" "+n,m=l?"Item at position ":"";return m+p}function iw(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function kk(t){return Object.keys(t||{}).map(function(n){return{key:n,value:t[n]}})}Wr.validate=Hs;Wr.processMessage=Wy;var Pk=Wr,Mk=Cc,cc=Pk;function zk(t){if(typeof window<"u")return t instanceof mo.Blob||t instanceof mo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function Lk(t,n){return cc.assert(cc.strictShape(t),n)}function Rk(t){var n="date";if(typeof t=="boolean")return n;try{var l=new Date(t);if(l.getTime&&isNaN(l.getTime()))return n}catch{return n}}function Ok(t){return cc.tuple(cc.number,cc.number)(t)}var Dk=Mk(cc,{file:zk,date:Rk,coordinates:Ok,assertShape:Lk});function Bk(t,n){var l=function(p,m){return n.indexOf(p)!==-1&&m!==void 0};return typeof n=="function"&&(l=n),Object.keys(t).filter(function(p){return l(p,t[p])}).reduce(function(p,m){return p[m]=t[m],p},{})}var Fk=Bk;function Nk(t,n){return Object.keys(t).reduce(function(l,p){return l[p]=n(p,t[p]),l},{})}var Uk=Nk,Vk=Uk;function jk(t){return Vk(t,function(n,l){return typeof l=="boolean"?JSON.stringify(l):l})}var qk=jk,Hk=Jb,Zk=ew;function Gk(t){return function(n){var l;Hk.prototype.isPrototypeOf(n)?l=n:l=Zk(n);var p=Object.create(t);return p.client=l,p}}var $k=Gk,ow=Cc,yr=Dk,yd=Fk,aw=qk,Wk=$k,Ky={},sw=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Ky.forwardGeocode=function(t){yr.assertShape({query:yr.required(yr.string),mode:yr.oneOf("mapbox.places","mapbox.places-permanent"),countries:yr.arrayOf(yr.string),proximity:yr.oneOf(yr.coordinates,"ip"),types:yr.arrayOf(yr.oneOf(sw)),autocomplete:yr.boolean,bbox:yr.arrayOf(yr.number),limit:yr.number,language:yr.arrayOf(yr.string),routing:yr.boolean,fuzzyMatch:yr.boolean,worldview:yr.string})(t),t.mode=t.mode||"mapbox.places";var n=aw(ow({country:t.countries},yd(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:yd(t,["mode","query"]),query:n})};Ky.reverseGeocode=function(t){yr.assertShape({query:yr.required(yr.coordinates),mode:yr.oneOf("mapbox.places","mapbox.places-permanent"),countries:yr.arrayOf(yr.string),types:yr.arrayOf(yr.oneOf(sw)),bbox:yr.arrayOf(yr.number),limit:yr.number,language:yr.arrayOf(yr.string),reverseMode:yr.oneOf("distance","score"),routing:yr.boolean,worldview:yr.string})(t),t.mode=t.mode||"mapbox.places";var n=aw(ow({country:t.countries},yd(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:yd(t,["mode","query"]),query:n})};var Kk=Wk(Ky);let Xk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",lw=t=>crypto.getRandomValues(new Uint8Array(t)),uw=(t,n,l)=>{let p=(2<<Math.log(t.length-1)/Math.LN2)-1,m=-~(1.6*p*n/t.length);return(y=n)=>{let x="";for(;;){let E=l(m),C=m;for(;C--;)if(x+=t[E[C]&p]||"",x.length===y)return x}}},Jk=(t,n=21)=>uw(t,n,lw),Yk=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,l)=>(l&=63,l<36?n+=l.toString(36):l<62?n+=(l-26).toString(36).toUpperCase():l>62?n+="-":n+="_",n),"");const Qk=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:Jk,customRandom:uw,nanoid:Yk,random:lw,urlAlphabet:Xk},Symbol.toStringTag,{value:"Module"})),eP=f5(Qk);var tP=eP.nanoid;function cw(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}cw.prototype={select:function(t,n){var l=this.getSelectedIndex(t,n),p=this.getEventPayload("search.select",n);if(p.resultIndex=l,p.resultPlaceName=t.place_name,p.resultId=t.id,!(l===this.lastSentIndex&&p.queryString===this.lastSentInput||l==-1)&&(this.lastSentIndex=l,this.lastSentInput=p.queryString,!!p.queryString))return this.push(p)},start:function(t){var n=this.getEventPayload("search.start",t);if(n.queryString)return this.push(n)},keyevent:function(t,n){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var l=this.getEventPayload("search.keystroke",n);if(l.lastAction=t.key,!!l.queryString)return this.push(l)}},send:function(t,n){if(!this.enableEventLogging)return n?n():void 0;var l=this.getRequestOptions(t);this.request(l,function(p){if(p)return this.handleError(p,n);if(n)return n()}.bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var n={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return n},getEventPayload:function(t,n){var l;n.options.proximity?typeof n.options.proximity=="object"?l=[n.options.proximity.longitude,n.options.proximity.latitude]:n.options.proximity==="ip"?l=[999,999]:l=n.options.proximity:l=null;var p=n._map?n._map.getZoom():void 0,m={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:n.options.autocomplete,fuzzyMatch:n.options.fuzzyMatch,proximity:l,limit:n.options.limit,routing:n.options.routing,worldview:n.options.worldview,mapZoom:p,keyboardLocale:this.locale};return t==="search.select"?m.queryString=n.inputString:t!="search.select"&&n._inputEl?m.queryString=n._inputEl.value:m.queryString=n.inputString,m},request:function(t,n){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(this.readyState==4)return this.status==204?n(null):n(this.statusText)},l.open(t.method,t.host+"/"+t.path,!0);for(var p in t.headers){var m=t.headers[p];l.setRequestHeader(p,m)}l.send(t.body)},handleError:function(t,n){if(n)return n(t)},generateSessionID:function(){return tP()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,n){if(n._typeahead){var l=n._typeahead.data,p=t.id,m=l.map(function(x){return x.id}),y=m.indexOf(p);return y}},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com"||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,n){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||n)&&this.flush()},remove:function(){this.flush()}};var rP=cw,nP={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},iP={placeholder:nP},pw={exports:{}};(function(t){(function(n,l,p){t.exports?t.exports=p():n[l]=p()})(mo,"subtag",function(){var n="",l=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function p(C){return C.match(l)||[]}function m(C){return p(C).filter(function(k,D){return k&&D})}function y(C){return C=p(C),{language:C[1]||n,extlang:C[2]||n,script:C[3]||n,region:C[4]||n}}function x(C,k,D){Object.defineProperty(C,k,{value:D,enumerable:!0})}function E(C,k,D){function N(ee){return p(ee)[C]||n}x(N,"pattern",k),x(y,D,N)}return E(1,/^[a-zA-Z]{2,3}$/,"language"),E(2,/^[a-zA-Z]{3}$/,"extlang"),E(3,/^[a-zA-Z]{4}$/,"script"),E(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),x(y,"split",m),y})})(pw);var oP=pw.exports;function hw(){}hw.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(n,l){window.navigator.geolocation.getCurrentPosition(n,l,t)})}};var aP=hw;function sP(t,n){const l=fw(t),p=["address","street","place","country"];var m;if(typeof n=="function")return n(l);const y=p.indexOf(n);return y===-1?m=p:m=p.slice(y),m.reduce(function(x,E){return l[E]?(x!==""&&(x=x+", "),x+l[E]):x},"")}function fw(t){const n=t.address||"",l=t.text||"",p=t.place_name||"",y={address:p.split(",")[0],houseNumber:n,street:l,placeName:p};return t.context.forEach(function(x){const E=x.id.split(".")[0];y[E]=x.text}),y}const lP=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var uP={transformFeatureToGeolocationText:sP,getAddressInfo:fw,REVERSE_GEOCODE_COORD_RGX:lP},cP=hI,pP=PI,zl=Cc,hP=BI.EventEmitter,U0=FI,lg=bk,ug=Kk,fP=rP,dP=iP,mP=oP,gP=aP,V0=uP;const ks={FORWARD:0,LOCAL:1,REVERSE:2};function yP(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function dw(t){this._eventEmitter=new hP,this.options=zl({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new gP}dw.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var n=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+n[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+n.splice(1,n.length).join(",")+"</div></div>"}},addTo:function(t){function n(l,p){if(!document.body.contains(p))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const m=l.onAdd();p.appendChild(m)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)n(this,t);else if(typeof t=="string"){const l=document.querySelectorAll(t);if(l.length===0)throw new Error("Element ",t,"not found.");if(l.length>1)throw new Error("Geocoder can only be added to a single html element");n(this,l[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=ug(lg({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new fP(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var n=this.container=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var l=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",pP(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(k){this.eventManager.keyevent(k,this)}.bind(this));var p=document.createElement("div");p.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var m=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(m),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),p.appendChild(this._clearEl),p.appendChild(this._loadingEl),n.appendChild(l),n.appendChild(this._inputEl),n.appendChild(p),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var y=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(y),p.appendChild(this._geolocateEl),this._showGeolocateButton()}var x=this._typeahead=new cP(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),x.getItemValue=this.options.getItemValue;var E=x.list.draw,C=this._footerNode=yP();return x.list.draw=function(){E.call(this),C.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),C.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(C)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),n},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const n={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(n),this._fly(n),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(n),this._showClearButton(),this.fresh=!1;const l={limit:1,language:[this.options.language],query:n.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const p=n.geometry.coordinates[0]+","+n.geometry.coordinates[1];this._setInputValue(p),this._eventEmitter.emit("result",{result:n})}else this.geocoderService.reverseGeocode(l).send().then(function(p){const m=p.body.features[0];if(m){const y=V0.transformFeatureToGeolocationText(m,this.options.addressAccuracy);this._setInputValue(y),m.user_coordinates=n.geometry.coordinates,this._eventEmitter.emit("result",{result:m})}else this._eventEmitter.emit("result",{result:{user_coordinates:n.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,n){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");return l.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),l.setAttribute("viewBox","0 0 18 18"),l.setAttribute("xml:space","preserve"),l.setAttribute("width",18),l.setAttribute("height",18),l.innerHTML=n,l},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var n=(t.clipboardData||window.clipboardData).getData("text");n.length>=this.options.minLength&&this._geocode(n)},_onKeyDown:function(t){var n=27,l=9;if(t.keyCode===n&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var p=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,m=p?p.value:"";if(!m)return this.fresh=!0,t.keyCode!==l&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[l,n,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&p.value.length>=this.options.minLength&&this._geocode(p.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var n;if(t.properties&&U0[t.properties.short_code])n=zl({},this.options.flyTo),this._map&&this._map.fitBounds(U0[t.properties.short_code].bbox,n);else if(t.bbox){var l=t.bbox;n=zl({},this.options.flyTo),this._map&&this._map.fitBounds([[l[0],l[1]],[l[2],l[3]]],n)}else{var p={zoom:this.options.zoom};n=zl({},p,this.options.flyTo),t.center?n.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(n.center=t.geometry.coordinates),this._map&&this._map.flyTo(n)}},_requestType:function(t,n){var l;return t.localGeocoderOnly?l=ks.LOCAL:t.reverseGeocode&&V0.REVERSE_GEOCODE_COORD_RGX.test(n)?l=ks.REVERSE:l=ks.FORWARD,l},_setupConfig:function(t,n){const l=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],p=/[\s,]+/;var m=this,y=l.reduce(function(E,C){if(m.options[C]===void 0||m.options[C]===null)return E;["countries","types","language"].indexOf(C)>-1?E[C]=m.options[C].split(p):E[C]=m.options[C];const k=typeof m.options[C].longitude=="number"&&typeof m.options[C].latitude=="number";if(C==="proximity"&&k){const D=m.options[C].longitude,N=m.options[C].latitude;E[C]=[D,N]}return E},{});switch(t){case ks.REVERSE:{var x=n.split(p).map(function(E){return parseFloat(E,10)});m.options.flipCoordinates||x.reverse(),y.types&&y.types[0],y=zl(y,{query:x,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(E){E in y&&delete y[E]})}break;case ks.FORWARD:{const E=n.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(E)&&(n=n.replace(/,/g," ")),y=zl(y,{query:n})}break}return y},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const n=this._requestType(this.options,t),l=this._setupConfig(n,t);var p;switch(n){case ks.LOCAL:p=Promise.resolve();break;case ks.FORWARD:p=this.geocoderService.forwardGeocode(l).send();break;case ks.REVERSE:p=this.geocoderService.reverseGeocode(l).send();break}var m=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],y=[],x=null;return p.catch(function(E){x=E}.bind(this)).then(function(E){this._hideLoadingIcon();var C={};return E?E.statusCode=="200"&&(C=E.body,C.request=E.request,C.headers=E.headers):C={type:"FeatureCollection",features:[]},C.config=l,this.fresh&&(this.eventManager.start(this),this.fresh=!1),C.features=C.features?m.concat(C.features):m,this.options.externalGeocoder?(y=this.options.externalGeocoder(t,C.features)||Promise.resolve([]),y.then(function(k){return C.features=C.features?k.concat(C.features):k,C},function(){return C})):C}.bind(this)).then(function(E){if(x)throw x;this.options.filter&&E.features.length&&(E.features=E.features.filter(this.options.filter)),E.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",E),this._typeahead.update(E.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",E))}.bind(this)).catch(function(E){this._hideLoadingIcon(),this._hideAttribution(),m.length&&this.options.localGeocoder||y.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(m)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:m}),this._eventEmitter.emit("error",{error:E})}.bind(this)),p},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var n=this;t.relatedTarget&&n._clear(t)},_onQueryResult:function(t){var n=t.body;if(n.features.length){var l=n.features[0];this._typeahead.selected=l,this._inputEl.value=l.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],n=mP.language(t),l=dP.placeholder[n];if(l)return l}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t,n=!0){return this.options.proximity=t,n&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var n=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||n,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=ug(lg({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=ug(lg({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var n={color:"#4668F2"},l=zl({},n,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(l),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,n){return this._eventEmitter.on(t,n),this},off:function(t,n){return this._eventEmitter.removeListener(t,n),this.eventManager.remove(),this}};var vP=dw;const mw=h5(vP),_P={props:["latitude","longitude","location","rating"],methods:{submit(){const t=this,n=this.$refs.form,l=new FormData(n);Ja.post("/properties",l).then(p=>t.$emit("show-houses")).catch(p=>console.log(p))}}},xP=J1('<div class="form-group"><label for="formGroupExampleInput">Title</label><input type="text" class="form-control" id="formGroupExampleInput" name="property[title]" required></div><div class="row"><div class="form-group col-6"><label for="formGroupExampleInput2">Price</label><input type="number" class="form-control" id="Price" name="property[price]" required></div><div class="form-group col-3"><label for="formGroupExampleInput2">Rooms</label><input type="number" class="form-control" id="Rooms" name="property[rooms]" required></div><div class="form-group col-3"><label for="formGroupExampleInput2">Bathrooms</label><input type="number" class="form-control" id="Bathrooms" name="property[bathrooms]" required></div></div><div class="form-group"><label for="exampleFormControlFile1">Photo</label><input type="file" class="form-control-file" id="exampleFormControlFile1" multiple name="property[avatar]"></div>',3),bP=["value"],wP=["value"],EP=["value"],SP=["value"];function TP(t,n,l,p,m,y){return Sn(),Xi("form",{ref:"form",onSubmit:n[0]||(n[0]=Ex(()=>{},["prevent","stop"]))},[xP,Ft("input",{type:"hidden",name:"property[latitude]",value:l.latitude},null,8,bP),Ft("input",{type:"hidden",name:"property[longitude]",value:l.longitude},null,8,wP),Ft("input",{type:"hidden",name:"property[address]",value:l.location},null,8,EP),Ft("input",{type:"hidden",name:"property[rating]",value:l.rating},null,8,SP)],544)}const CP=Zs(_P,[["render",TP]]),AP={props:["current-location","access-token"],methods:{search(){const t=parseFloat(this.currentLocation[0])-.02,n=parseFloat(this.currentLocation[1])-.02,l=parseFloat(this.currentLocation[0])+.02,p=parseFloat(this.currentLocation[1])+.02,m=`bbox=${t},${n},${l},${p}`;console.log(this.currentLocation),console.log(m),console.log(this.currentLocation),Ja.get(`https://api.mapbox.com/search/v1/forward/?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"clinics",data:y.data})}),Ja.get(`https://api.mapbox.com/search/searchbox/v1/category/>?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"elemSchools",data:y.data})}),Ja.get(`https://api.mapbox.com/search/searchbox/v1/category/>?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"hospitals",data:y.data})}),Ja.get(`https://api.mapbox.com/search/searchbox/v1/category/>?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"konbini",data:y.data})}),Ja.get(`https://api.mapbox.com/search/searchbox/v1/category/>?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"kindergardens",data:y.data})})}}};function IP(t,n,l,p,m,y){return Sn(),Xi("button",{class:"btn btn-info",onClick:n[0]||(n[0]=(...x)=>y.search&&y.search(...x))},"Search places nearby")}const kP=Zs(AP,[["render",IP]]);const PP={props:["map","center"],components:{SearchButton:kP},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,marker:!1,editPositionFlg:!1,searchedFlg:!1,locationFound:!1,addressEdited:!0,count:{clinics:0,hospitals:0,elementarySchools:0,konbini:0,kindergardens:0}}},mounted(){this.init()},computed:{btnEditPositionText(){return this.editPositionFlg?"Save new position":"Adjust position"},rating(){let t=0;for(const n in this.count)t=t+this.count[n];return t>=40?10:6+t/10}},methods:{locationInput(t){this.addressEdited=!0,this.$emit("location-input",t.target.value)},toggleEditPosition(){this.editPositionFlg,this.editPositionFlg=!this.editPositionFlg},async init(){try{let t=new mw({accessToken:this.access_token,mapboxgl,marker:!1})}catch(t){console.log("map error",t)}},async getLocation(){try{this.loading=!0,console.log(this.center);const t=await Ja.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.center[0]},${this.center[1]}.json?access_token=${this.access_token}&language=ja`);if(this.loading=!1,t.data.features.length==0)throw Error("not found!");this.location=t.data.features[0].place_name}catch(t){this.loading=!1,console.log(t),t.message==="not found!"&&console.log("not found!")}},async searchLngLat(){console.log("click",this.location),this.location&&(this.loading=!0,Ja.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.location}.json?proximity=ip&access_token=${this.access_token}&language=ja`).then(t=>{if(console.log("answer"),this.loading=!1,t.data.features.length===0)throw Error("not found");this.$emit("set-marker",t.data.features[0].center),this.locationFound=!0,this.addressEdited=!1}).catch(t=>{console.log("err"),this.locationFound=!1,t.message=="not found"&&console.log("not found"),console.log(t)}))},showMarkers(t){switch(console.log("found-places search",t),this.searchedFlg=!0,t.type){case"clinics":this.count.clinics=t.data.features.length;break;case"hospitals":this.count.hospitals=t.data.features.length;break;case"elemSchools":this.count.elemSchools=t.data.features.length;break;case"konbini":this.count.konbini=t.data.features.length;break;case"kindergardens":this.count.kindergardens=t.data.features.length;break}this.$emit("found-places",t),this.$emit("rating-update",this.rating)}}},hh=t=>(th("data-v-ba086224"),t=t(),rh(),t),MP={class:"dislpay-arena"},zP={class:"coordinates-header"},LP=hh(()=>Ft("h3",null,"Location",-1)),RP=hh(()=>Ft("span",{class:"font-italic"},"Your address will not be displayed to others.",-1)),OP={class:"form-group"},DP=hh(()=>Ft("label",{for:"address"},"Address",-1)),BP=["disabled"],FP={key:2,class:"ml-1 font-italic"},NP=hh(()=>Ft("h4",null,"Places nearby",-1)),UP=hh(()=>Ft("p",{class:"font-italic"},"Check you location rating!",-1)),VP={key:0},jP={class:"mt-1"},qP={class:"text-lg badge badge-primary m-1"},HP={class:"text-lg badge badge-warning m-1"},ZP={class:"text-lg badge badge-danger m-1"},GP={class:"text-lg badge badge-success m-1"},$P={class:"text-lg badge badge-info m-1"};function WP(t,n,l,p,m,y){const x=Ls("SearchButton");return Sn(),Xi("div",MP,[Ft("div",zP,[LP,RP,Ft("div",OP,[DP,_1(Ft("input",{type:"text",class:"form-control location-control my-2",id:"address","onUpdate:modelValue":n[0]||(n[0]=E=>m.location=E),onInput:n[1]||(n[1]=(...E)=>y.locationInput&&y.locationInput(...E))},null,544),[[Zp,m.location]]),m.addressEdited?(Sn(),Xi("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:n[2]||(n[2]=(...E)=>y.searchLngLat&&y.searchLngLat(...E))}," Show my house on the map! ")):Ya("",!0),m.locationFound&&!m.addressEdited?(Sn(),Xi("button",{key:1,type:"button",disabled:m.loading,class:wc([{disabled:m.loading},"btn btn-outline-info m-1"]),onClick:n[3]||(n[3]=(...E)=>y.toggleEditPosition&&y.toggleEditPosition(...E))},Io(y.btnEditPositionText),11,BP)):Ya("",!0),m.editPositionFlg?(Sn(),Xi("span",FP,"Move marker")):Ya("",!0)]),NP,UP,Vr(x,{disabled:!m.locationFound||m.addressEdited,"access-token":m.access_token,"current-location":l.center,onFoundPlaces:y.showMarkers},null,8,["disabled","access-token","current-location","onFoundPlaces"]),m.locationFound&&m.searchedFlg&&!m.addressEdited?(Sn(),Xi("div",VP,[Ft("p",jP,[Ft("span",qP,"elementary schools: "+Io(m.count.elemSchools),1),Ft("span",HP,"konbini: "+Io(m.count.konbini),1),Ft("span",ZP,"hospitals: "+Io(m.count.hospitals),1),Ft("span",GP,"clinics: "+Io(m.count.clinics),1),Ft("span",$P,"kindergardens: "+Io(m.count.kindergardens),1)]),Ft("h6",null,"Average rating: "+Io(y.rating)+" / 10",1)])):Ya("",!0)])])}const KP=Zs(PP,[["render",WP],["__scopeId","data-v-ba086224"]]);const XP={components:{AddPropertyForm:CP,Search:KP},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,center:[132.7445942,35.3665752],map:{},rating:6}},mounted(){this.createMap()},methods:{ratingUpdate(t){this.rating=t},locationInput(t){this.location=t},async createMap(){try{this.map=jg(this.access_token,"streets");let t=new mw({accessToken:this.access_token,mapboxgl,marker:!1})}catch(t){console.log("map error",t)}},submitForm(){this.$refs.form.submit()},showMarkers({type:t,data:n}){console.log("addproperty");let l="magneta";switch(t){case"hospitals":l="red";break;case"konbini":l="yellow";break;case"elemSchools":l="blue";break;case"clinics":l="green";break;case"kindergardens":l="#17a2b8";break}console.log(this.map.getSource(t)),this.map.getSource(t)?this.map.getSource(t).setData(n):(this.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n.features}}),this.map.addLayer({id:t,type:"circle",source:t,paint:{"circle-radius":10,"circle-color":l,"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":.5}}))},setMarker(t){this.marker&&this.marker.remove();const n=new mapboxgl.Marker({draggable:!0,color:"#D80739"}).setLngLat(t).addTo(this.map);n.on("dragend",l=>{this.center=Object.values(l.target.getLngLat()),console.log("center changed welcome",this.center)}),this.marker=n,this.center=t,this.map.flyTo({center:t,speed:.2})}}},Xy=t=>(th("data-v-c5aeb119"),t=t(),rh(),t),JP={class:"main"},YP={class:"sidebar col-4 py-3"},QP={class:"d-flex justify-content-between align-items-center"},eM=Xy(()=>Ft("h2",null,"Add house",-1)),tM=Xy(()=>Ft("h3",null,"General",-1)),rM=Xy(()=>Ft("div",{class:"map-wrapper"},[Ft("div",{id:"map"})],-1));function nM(t,n,l,p,m,y){const x=Ls("AddPropertyForm"),E=Ls("Search");return Sn(),Xi("div",JP,[Ft("div",YP,[Ft("div",null,[Ft("div",QP,[eM,Ft("button",{class:"btn btn-outline-info",onClick:n[0]||(n[0]=C=>t.$emit("show-houses"))},"See all houses")]),tM,Vr(x,{ref:"form",latitude:m.center[1],longitude:m.center[0],location:m.location,rating:m.rating,onShowHouses:n[1]||(n[1]=C=>t.$emit("show-houses"))},null,8,["latitude","longitude","location","rating"]),Vr(E,{map:m.map,center:m.center,onSetMarker:y.setMarker,onFoundPlaces:y.showMarkers,onLocationInput:y.locationInput,onRatingUpdate:y.ratingUpdate},null,8,["map","center","onSetMarker","onFoundPlaces","onLocationInput","onRatingUpdate"]),Ft("button",{type:"submit",class:"btn btn-primary btn-lg btn-block mt-3",onClick:n[2]||(n[2]=(...C)=>y.submitForm&&y.submitForm(...C))},"Submit")])]),rM])}const iM=Zs(XP,[["render",nM],["__scopeId","data-v-c5aeb119"]]);const oM={components:{TheWelcome:C5,Houses:nI,AddProperty:iM},data(){return{showHousesPage:!1,showAddHouse:!1,showWelcome:!0}},methods:{showHouses(){this.showHousesPage=!0,this.showWelcome=!1,this.showAddHouse=!1},addHouse(){this.showAddHouse=!0,this.showWelcome=!1,this.showHousesPage=!1}}},aM={id:"app"};function sM(t,n,l,p,m,y){const x=Ls("TheWelcome"),E=Ls("Houses"),C=Ls("AddProperty");return Sn(),Xi("div",aM,[Ft("main",null,[m.showWelcome?(Sn(),Rs(x,{key:0,onShowHouses:y.showHouses,onAddHouse:y.addHouse},null,8,["onShowHouses","onAddHouse"])):Ya("",!0),m.showHousesPage?(Sn(),Rs(E,{key:1,onAddHouse:y.addHouse},null,8,["onAddHouse"])):Ya("",!0),m.showAddHouse?(Sn(),Rs(C,{key:2,onShowHouses:y.showHouses},null,8,["onShowHouses"])):Ya("",!0)])])}const lM=Zs(oM,[["render",sM]]),Jy=kx(lM);Jy.config.globalProperties.$mapboxApiKey="pk.eyJ1IjoiaXJpbmFzayIsImEiOiJjbDIwOHhrbm0wdWJlM2pxZDNvN3A5NHNzIn0.M37Dun7-7tjVc9C0O82lpw";Jy.mount("#app");console.log("app",Jy);
