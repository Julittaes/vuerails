/* empty css             */import{i as q_}from"./map-e912c496.js";function Wn(r,a){const c=Object.create(null),f=r.split(",");for(let y=0;y<f.length;y++)c[f[y]]=!0;return a?y=>!!c[y.toLowerCase()]:y=>!!c[y]}const Br={},Fu=[],zn=()=>{},hf=()=>!1,hw=/^on[^a-z]/,Pl=r=>hw.test(r),ig=r=>r.startsWith("onUpdate:"),gr=Object.assign,ng=(r,a)=>{const c=r.indexOf(a);c>-1&&r.splice(c,1)},fw=Object.prototype.hasOwnProperty,Er=(r,a)=>fw.call(r,a),xt=Array.isArray,Nu=r=>ec(r)==="[object Map]",zl=r=>ec(r)==="[object Set]",kv=r=>ec(r)==="[object Date]",dw=r=>ec(r)==="[object RegExp]",Zt=r=>typeof r=="function",er=r=>typeof r=="string",Es=r=>typeof r=="symbol",Fr=r=>r!==null&&typeof r=="object",og=r=>Fr(r)&&Zt(r.then)&&Zt(r.catch),Z_=Object.prototype.toString,ec=r=>Z_.call(r),mw=r=>ec(r).slice(8,-1),H_=r=>ec(r)==="[object Object]",ag=r=>er(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,vl=Wn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gw=Wn("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),jf=r=>{const a=Object.create(null);return c=>a[c]||(a[c]=r(c))},yw=/-(\w)/g,Ri=jf(r=>r.replace(yw,(a,c)=>c?c.toUpperCase():"")),vw=/\B([A-Z])/g,oo=jf(r=>r.replace(vw,"-$1").toLowerCase()),Ml=jf(r=>r.charAt(0).toUpperCase()+r.slice(1)),Uu=jf(r=>r?`on${Ml(r)}`:""),Hu=(r,a)=>!Object.is(r,a),Vu=(r,a)=>{for(let c=0;c<r.length;c++)r[c](a)},bf=(r,a,c)=>{Object.defineProperty(r,a,{configurable:!0,enumerable:!1,value:c})},wf=r=>{const a=parseFloat(r);return isNaN(a)?r:a},Ef=r=>{const a=er(r)?Number(r):NaN;return isNaN(a)?r:a};let Pv;const Cm=()=>Pv||(Pv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),_w="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",xw=Wn(_w);function kp(r){if(xt(r)){const a={};for(let c=0;c<r.length;c++){const f=r[c],y=er(f)?G_(f):kp(f);if(y)for(const _ in y)a[_]=y[_]}return a}else{if(er(r))return r;if(Fr(r))return r}}const bw=/;(?![^(]*\))/g,ww=/:([^]+)/,Ew=/\/\*[^]*?\*\//g;function G_(r){const a={};return r.replace(Ew,"").split(bw).forEach(c=>{if(c){const f=c.split(ww);f.length>1&&(a[f[0].trim()]=f[1].trim())}}),a}function Pp(r){let a="";if(er(r))a=r;else if(xt(r))for(let c=0;c<r.length;c++){const f=Pp(r[c]);f&&(a+=f+" ")}else if(Fr(r))for(const c in r)r[c]&&(a+=c+" ");return a.trim()}function Sw(r){if(!r)return null;let{class:a,style:c}=r;return a&&!er(a)&&(r.class=Pp(a)),c&&(r.style=kp(c)),r}const Tw="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Cw="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Iw="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Aw=Wn(Tw),kw=Wn(Cw),Pw=Wn(Iw),zw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mw=Wn(zw);function W_(r){return!!r||r===""}function Lw(r,a){if(r.length!==a.length)return!1;let c=!0;for(let f=0;c&&f<r.length;f++)c=Ss(r[f],a[f]);return c}function Ss(r,a){if(r===a)return!0;let c=kv(r),f=kv(a);if(c||f)return c&&f?r.getTime()===a.getTime():!1;if(c=Es(r),f=Es(a),c||f)return r===a;if(c=xt(r),f=xt(a),c||f)return c&&f?Lw(r,a):!1;if(c=Fr(r),f=Fr(a),c||f){if(!c||!f)return!1;const y=Object.keys(r).length,_=Object.keys(a).length;if(y!==_)return!1;for(const w in r){const T=r.hasOwnProperty(w),k=a.hasOwnProperty(w);if(T&&!k||!T&&k||!Ss(r[w],a[w]))return!1}}return String(r)===String(a)}function qf(r,a){return r.findIndex(c=>Ss(c,a))}const Dw=r=>er(r)?r:r==null?"":xt(r)||Fr(r)&&(r.toString===Z_||!Zt(r.toString))?JSON.stringify(r,K_,2):String(r),K_=(r,a)=>a&&a.__v_isRef?K_(r,a.value):Nu(a)?{[`Map(${a.size})`]:[...a.entries()].reduce((c,[f,y])=>(c[`${f} =>`]=y,c),{})}:zl(a)?{[`Set(${a.size})`]:[...a.values()]}:Fr(a)&&!xt(a)&&!H_(a)?String(a):a;let io;class sg{constructor(a=!1){this.detached=a,this._active=!0,this.effects=[],this.cleanups=[],this.parent=io,!a&&io&&(this.index=(io.scopes||(io.scopes=[])).push(this)-1)}get active(){return this._active}run(a){if(this._active){const c=io;try{return io=this,a()}finally{io=c}}}on(){io=this}off(){io=this.parent}stop(a){if(this._active){let c,f;for(c=0,f=this.effects.length;c<f;c++)this.effects[c].stop();for(c=0,f=this.cleanups.length;c<f;c++)this.cleanups[c]();if(this.scopes)for(c=0,f=this.scopes.length;c<f;c++)this.scopes[c].stop(!0);if(!this.detached&&this.parent&&!a){const y=this.parent.scopes.pop();y&&y!==this&&(this.parent.scopes[this.index]=y,y.index=this.index)}this.parent=void 0,this._active=!1}}}function Rw(r){return new sg(r)}function $_(r,a=io){a&&a.active&&a.effects.push(r)}function X_(){return io}function Ow(r){io&&io.cleanups.push(r)}const lg=r=>{const a=new Set(r);return a.w=0,a.n=0,a},J_=r=>(r.w&Ts)>0,Y_=r=>(r.n&Ts)>0,Bw=({deps:r})=>{if(r.length)for(let a=0;a<r.length;a++)r[a].w|=Ts},Fw=r=>{const{deps:a}=r;if(a.length){let c=0;for(let f=0;f<a.length;f++){const y=a[f];J_(y)&&!Y_(y)?y.delete(r):a[c++]=y,y.w&=~Ts,y.n&=~Ts}a.length=c}},Sf=new WeakMap;let np=0,Ts=1;const Im=30;let Do;const _l=Symbol(""),Am=Symbol("");class zp{constructor(a,c=null,f){this.fn=a,this.scheduler=c,this.active=!0,this.deps=[],this.parent=void 0,$_(this,f)}run(){if(!this.active)return this.fn();let a=Do,c=xs;for(;a;){if(a===this)return;a=a.parent}try{return this.parent=Do,Do=this,xs=!0,Ts=1<<++np,np<=Im?Bw(this):zv(this),this.fn()}finally{np<=Im&&Fw(this),Ts=1<<--np,Do=this.parent,xs=c,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Do===this?this.deferStop=!0:this.active&&(zv(this),this.onStop&&this.onStop(),this.active=!1)}}function zv(r){const{deps:a}=r;if(a.length){for(let c=0;c<a.length;c++)a[c].delete(r);a.length=0}}function Nw(r,a){r.effect&&(r=r.effect.fn);const c=new zp(r);a&&(gr(c,a),a.scope&&$_(c,a.scope)),(!a||!a.lazy)&&c.run();const f=c.run.bind(c);return f.effect=c,f}function Uw(r){r.effect.stop()}let xs=!0;const Q_=[];function tc(){Q_.push(xs),xs=!1}function rc(){const r=Q_.pop();xs=r===void 0?!0:r}function Gn(r,a,c){if(xs&&Do){let f=Sf.get(r);f||Sf.set(r,f=new Map);let y=f.get(c);y||f.set(c,y=lg()),e0(y)}}function e0(r,a){let c=!1;np<=Im?Y_(r)||(r.n|=Ts,c=!J_(r)):c=!r.has(Do),c&&(r.add(Do),Do.deps.push(r))}function Za(r,a,c,f,y,_){const w=Sf.get(r);if(!w)return;let T=[];if(a==="clear")T=[...w.values()];else if(c==="length"&&xt(r)){const k=Number(f);w.forEach((L,q)=>{(q==="length"||q>=k)&&T.push(L)})}else switch(c!==void 0&&T.push(w.get(c)),a){case"add":xt(r)?ag(c)&&T.push(w.get("length")):(T.push(w.get(_l)),Nu(r)&&T.push(w.get(Am)));break;case"delete":xt(r)||(T.push(w.get(_l)),Nu(r)&&T.push(w.get(Am)));break;case"set":Nu(r)&&T.push(w.get(_l));break}if(T.length===1)T[0]&&km(T[0]);else{const k=[];for(const L of T)L&&k.push(...L);km(lg(k))}}function km(r,a){const c=xt(r)?r:[...r];for(const f of c)f.computed&&Mv(f);for(const f of c)f.computed||Mv(f)}function Mv(r,a){(r!==Do||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function Vw(r,a){var c;return(c=Sf.get(r))==null?void 0:c.get(a)}const jw=Wn("__proto__,__v_isRef,__isVue"),t0=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Es)),qw=Zf(),Zw=Zf(!1,!0),Hw=Zf(!0),Gw=Zf(!0,!0),Lv=Ww();function Ww(){const r={};return["includes","indexOf","lastIndexOf"].forEach(a=>{r[a]=function(...c){const f=yr(this);for(let _=0,w=this.length;_<w;_++)Gn(f,"get",_+"");const y=f[a](...c);return y===-1||y===!1?f[a](...c.map(yr)):y}}),["push","pop","shift","unshift","splice"].forEach(a=>{r[a]=function(...c){tc();const f=yr(this)[a].apply(this,c);return rc(),f}}),r}function Kw(r){const a=yr(this);return Gn(a,"has",r),a.hasOwnProperty(r)}function Zf(r=!1,a=!1){return function(f,y,_){if(y==="__v_isReactive")return!r;if(y==="__v_isReadonly")return r;if(y==="__v_isShallow")return a;if(y==="__v_raw"&&_===(r?a?l0:s0:a?a0:o0).get(f))return f;const w=xt(f);if(!r){if(w&&Er(Lv,y))return Reflect.get(Lv,y,_);if(y==="hasOwnProperty")return Kw}const T=Reflect.get(f,y,_);return(Es(y)?t0.has(y):jw(y))||(r||Gn(f,"get",y),a)?T:Ui(T)?w&&ag(y)?T:T.value:Fr(T)?r?cg(T):Wf(T):T}}const $w=r0(),Xw=r0(!0);function r0(r=!1){return function(c,f,y,_){let w=c[f];if(Tl(w)&&Ui(w)&&!Ui(y))return!1;if(!r&&(!dp(y)&&!Tl(y)&&(w=yr(w),y=yr(y)),!xt(c)&&Ui(w)&&!Ui(y)))return w.value=y,!0;const T=xt(c)&&ag(f)?Number(f)<c.length:Er(c,f),k=Reflect.set(c,f,y,_);return c===yr(_)&&(T?Hu(y,w)&&Za(c,"set",f,y):Za(c,"add",f,y)),k}}function Jw(r,a){const c=Er(r,a);r[a];const f=Reflect.deleteProperty(r,a);return f&&c&&Za(r,"delete",a,void 0),f}function Yw(r,a){const c=Reflect.has(r,a);return(!Es(a)||!t0.has(a))&&Gn(r,"has",a),c}function Qw(r){return Gn(r,"iterate",xt(r)?"length":_l),Reflect.ownKeys(r)}const i0={get:qw,set:$w,deleteProperty:Jw,has:Yw,ownKeys:Qw},n0={get:Hw,set(r,a){return!0},deleteProperty(r,a){return!0}},e2=gr({},i0,{get:Zw,set:Xw}),t2=gr({},n0,{get:Gw}),ug=r=>r,Hf=r=>Reflect.getPrototypeOf(r);function Jh(r,a,c=!1,f=!1){r=r.__v_raw;const y=yr(r),_=yr(a);c||(a!==_&&Gn(y,"get",a),Gn(y,"get",_));const{has:w}=Hf(y),T=f?ug:c?fg:mp;if(w.call(y,a))return T(r.get(a));if(w.call(y,_))return T(r.get(_));r!==y&&r.get(a)}function Yh(r,a=!1){const c=this.__v_raw,f=yr(c),y=yr(r);return a||(r!==y&&Gn(f,"has",r),Gn(f,"has",y)),r===y?c.has(r):c.has(r)||c.has(y)}function Qh(r,a=!1){return r=r.__v_raw,!a&&Gn(yr(r),"iterate",_l),Reflect.get(r,"size",r)}function Dv(r){r=yr(r);const a=yr(this);return Hf(a).has.call(a,r)||(a.add(r),Za(a,"add",r,r)),this}function Rv(r,a){a=yr(a);const c=yr(this),{has:f,get:y}=Hf(c);let _=f.call(c,r);_||(r=yr(r),_=f.call(c,r));const w=y.call(c,r);return c.set(r,a),_?Hu(a,w)&&Za(c,"set",r,a):Za(c,"add",r,a),this}function Ov(r){const a=yr(this),{has:c,get:f}=Hf(a);let y=c.call(a,r);y||(r=yr(r),y=c.call(a,r)),f&&f.call(a,r);const _=a.delete(r);return y&&Za(a,"delete",r,void 0),_}function Bv(){const r=yr(this),a=r.size!==0,c=r.clear();return a&&Za(r,"clear",void 0,void 0),c}function ef(r,a){return function(f,y){const _=this,w=_.__v_raw,T=yr(w),k=a?ug:r?fg:mp;return!r&&Gn(T,"iterate",_l),w.forEach((L,q)=>f.call(y,k(L),k(q),_))}}function tf(r,a,c){return function(...f){const y=this.__v_raw,_=yr(y),w=Nu(_),T=r==="entries"||r===Symbol.iterator&&w,k=r==="keys"&&w,L=y[r](...f),q=c?ug:a?fg:mp;return!a&&Gn(_,"iterate",k?Am:_l),{next(){const{value:Z,done:ae}=L.next();return ae?{value:Z,done:ae}:{value:T?[q(Z[0]),q(Z[1])]:q(Z),done:ae}},[Symbol.iterator](){return this}}}}function ds(r){return function(...a){return r==="delete"?!1:this}}function r2(){const r={get(_){return Jh(this,_)},get size(){return Qh(this)},has:Yh,add:Dv,set:Rv,delete:Ov,clear:Bv,forEach:ef(!1,!1)},a={get(_){return Jh(this,_,!1,!0)},get size(){return Qh(this)},has:Yh,add:Dv,set:Rv,delete:Ov,clear:Bv,forEach:ef(!1,!0)},c={get(_){return Jh(this,_,!0)},get size(){return Qh(this,!0)},has(_){return Yh.call(this,_,!0)},add:ds("add"),set:ds("set"),delete:ds("delete"),clear:ds("clear"),forEach:ef(!0,!1)},f={get(_){return Jh(this,_,!0,!0)},get size(){return Qh(this,!0)},has(_){return Yh.call(this,_,!0)},add:ds("add"),set:ds("set"),delete:ds("delete"),clear:ds("clear"),forEach:ef(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(_=>{r[_]=tf(_,!1,!1),c[_]=tf(_,!0,!1),a[_]=tf(_,!1,!0),f[_]=tf(_,!0,!0)}),[r,c,a,f]}const[i2,n2,o2,a2]=r2();function Gf(r,a){const c=a?r?a2:o2:r?n2:i2;return(f,y,_)=>y==="__v_isReactive"?!r:y==="__v_isReadonly"?r:y==="__v_raw"?f:Reflect.get(Er(c,y)&&y in f?c:f,y,_)}const s2={get:Gf(!1,!1)},l2={get:Gf(!1,!0)},u2={get:Gf(!0,!1)},c2={get:Gf(!0,!0)},o0=new WeakMap,a0=new WeakMap,s0=new WeakMap,l0=new WeakMap;function p2(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function h2(r){return r.__v_skip||!Object.isExtensible(r)?0:p2(mw(r))}function Wf(r){return Tl(r)?r:Kf(r,!1,i0,s2,o0)}function u0(r){return Kf(r,!1,e2,l2,a0)}function cg(r){return Kf(r,!0,n0,u2,s0)}function f2(r){return Kf(r,!0,t2,c2,l0)}function Kf(r,a,c,f,y){if(!Fr(r)||r.__v_raw&&!(a&&r.__v_isReactive))return r;const _=y.get(r);if(_)return _;const w=h2(r);if(w===0)return r;const T=new Proxy(r,w===2?f:c);return y.set(r,T),T}function xl(r){return Tl(r)?xl(r.__v_raw):!!(r&&r.__v_isReactive)}function Tl(r){return!!(r&&r.__v_isReadonly)}function dp(r){return!!(r&&r.__v_isShallow)}function pg(r){return xl(r)||Tl(r)}function yr(r){const a=r&&r.__v_raw;return a?yr(a):r}function hg(r){return bf(r,"__v_skip",!0),r}const mp=r=>Fr(r)?Wf(r):r,fg=r=>Fr(r)?cg(r):r;function dg(r){xs&&Do&&(r=yr(r),e0(r.dep||(r.dep=lg())))}function $f(r,a){r=yr(r);const c=r.dep;c&&km(c)}function Ui(r){return!!(r&&r.__v_isRef===!0)}function ju(r){return c0(r,!1)}function d2(r){return c0(r,!0)}function c0(r,a){return Ui(r)?r:new m2(r,a)}class m2{constructor(a,c){this.__v_isShallow=c,this.dep=void 0,this.__v_isRef=!0,this._rawValue=c?a:yr(a),this._value=c?a:mp(a)}get value(){return dg(this),this._value}set value(a){const c=this.__v_isShallow||dp(a)||Tl(a);a=c?a:yr(a),Hu(a,this._rawValue)&&(this._rawValue=a,this._value=c?a:mp(a),$f(this))}}function g2(r){$f(r)}function mg(r){return Ui(r)?r.value:r}function y2(r){return Zt(r)?r():mg(r)}const v2={get:(r,a,c)=>mg(Reflect.get(r,a,c)),set:(r,a,c,f)=>{const y=r[a];return Ui(y)&&!Ui(c)?(y.value=c,!0):Reflect.set(r,a,c,f)}};function gg(r){return xl(r)?r:new Proxy(r,v2)}class _2{constructor(a){this.dep=void 0,this.__v_isRef=!0;const{get:c,set:f}=a(()=>dg(this),()=>$f(this));this._get=c,this._set=f}get value(){return this._get()}set value(a){this._set(a)}}function x2(r){return new _2(r)}function b2(r){const a=xt(r)?new Array(r.length):{};for(const c in r)a[c]=p0(r,c);return a}class w2{constructor(a,c,f){this._object=a,this._key=c,this._defaultValue=f,this.__v_isRef=!0}get value(){const a=this._object[this._key];return a===void 0?this._defaultValue:a}set value(a){this._object[this._key]=a}get dep(){return Vw(yr(this._object),this._key)}}class E2{constructor(a){this._getter=a,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function S2(r,a,c){return Ui(r)?r:Zt(r)?new E2(r):Fr(r)&&arguments.length>1?p0(r,a,c):ju(r)}function p0(r,a,c){const f=r[a];return Ui(f)?f:new w2(r,a,c)}class T2{constructor(a,c,f,y){this._setter=c,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new zp(a,()=>{this._dirty||(this._dirty=!0,$f(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!y,this.__v_isReadonly=f}get value(){const a=yr(this);return dg(a),(a._dirty||!a._cacheable)&&(a._dirty=!1,a._value=a.effect.run()),a._value}set value(a){this._setter(a)}}function C2(r,a,c=!1){let f,y;const _=Zt(r);return _?(f=r,y=zn):(f=r.get,y=r.set),new T2(f,y,_||!y,c)}function I2(r,...a){}function A2(r,a){}function ja(r,a,c,f){let y;try{y=f?r(...f):r()}catch(_){Ll(_,a,c)}return y}function ao(r,a,c,f){if(Zt(r)){const _=ja(r,a,c,f);return _&&og(_)&&_.catch(w=>{Ll(w,a,c)}),_}const y=[];for(let _=0;_<r.length;_++)y.push(ao(r[_],a,c,f));return y}function Ll(r,a,c,f=!0){const y=a?a.vnode:null;if(a){let _=a.parent;const w=a.proxy,T=c;for(;_;){const L=_.ec;if(L){for(let q=0;q<L.length;q++)if(L[q](r,w,T)===!1)return}_=_.parent}const k=a.appContext.config.errorHandler;if(k){ja(k,null,10,[r,w,T]);return}}k2(r,c,y,f)}function k2(r,a,c,f=!0){console.error(r)}let gp=!1,Pm=!1;const _n=[];let la=0;const qu=[];let Ua=null,dl=0;const h0=Promise.resolve();let yg=null;function vg(r){const a=yg||h0;return r?a.then(this?r.bind(this):r):a}function P2(r){let a=la+1,c=_n.length;for(;a<c;){const f=a+c>>>1;yp(_n[f])<r?a=f+1:c=f}return a}function Xf(r){(!_n.length||!_n.includes(r,gp&&r.allowRecurse?la+1:la))&&(r.id==null?_n.push(r):_n.splice(P2(r.id),0,r),f0())}function f0(){!gp&&!Pm&&(Pm=!0,yg=h0.then(d0))}function z2(r){const a=_n.indexOf(r);a>la&&_n.splice(a,1)}function _g(r){xt(r)?qu.push(...r):(!Ua||!Ua.includes(r,r.allowRecurse?dl+1:dl))&&qu.push(r),f0()}function Fv(r,a=gp?la+1:0){for(;a<_n.length;a++){const c=_n[a];c&&c.pre&&(_n.splice(a,1),a--,c())}}function Tf(r){if(qu.length){const a=[...new Set(qu)];if(qu.length=0,Ua){Ua.push(...a);return}for(Ua=a,Ua.sort((c,f)=>yp(c)-yp(f)),dl=0;dl<Ua.length;dl++)Ua[dl]();Ua=null,dl=0}}const yp=r=>r.id==null?1/0:r.id,M2=(r,a)=>{const c=yp(r)-yp(a);if(c===0){if(r.pre&&!a.pre)return-1;if(a.pre&&!r.pre)return 1}return c};function d0(r){Pm=!1,gp=!0,_n.sort(M2);const a=zn;try{for(la=0;la<_n.length;la++){const c=_n[la];c&&c.active!==!1&&ja(c,null,14)}}finally{la=0,_n.length=0,Tf(),gp=!1,yg=null,(_n.length||qu.length)&&d0()}}let Ou,rf=[];function m0(r,a){var c,f;Ou=r,Ou?(Ou.enabled=!0,rf.forEach(({event:y,args:_})=>Ou.emit(y,..._)),rf=[]):typeof window<"u"&&window.HTMLElement&&!((f=(c=window.navigator)==null?void 0:c.userAgent)!=null&&f.includes("jsdom"))?((a.__VUE_DEVTOOLS_HOOK_REPLAY__=a.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(_=>{m0(_,a)}),setTimeout(()=>{Ou||(a.__VUE_DEVTOOLS_HOOK_REPLAY__=null,rf=[])},3e3)):rf=[]}function L2(r,a,...c){if(r.isUnmounted)return;const f=r.vnode.props||Br;let y=c;const _=a.startsWith("update:"),w=_&&a.slice(7);if(w&&w in f){const q=`${w==="modelValue"?"model":w}Modifiers`,{number:Z,trim:ae}=f[q]||Br;ae&&(y=c.map(ce=>er(ce)?ce.trim():ce)),Z&&(y=c.map(wf))}let T,k=f[T=Uu(a)]||f[T=Uu(Ri(a))];!k&&_&&(k=f[T=Uu(oo(a))]),k&&ao(k,r,6,y);const L=f[T+"Once"];if(L){if(!r.emitted)r.emitted={};else if(r.emitted[T])return;r.emitted[T]=!0,ao(L,r,6,y)}}function g0(r,a,c=!1){const f=a.emitsCache,y=f.get(r);if(y!==void 0)return y;const _=r.emits;let w={},T=!1;if(!Zt(r)){const k=L=>{const q=g0(L,a,!0);q&&(T=!0,gr(w,q))};!c&&a.mixins.length&&a.mixins.forEach(k),r.extends&&k(r.extends),r.mixins&&r.mixins.forEach(k)}return!_&&!T?(Fr(r)&&f.set(r,null),null):(xt(_)?_.forEach(k=>w[k]=null):gr(w,_),Fr(r)&&f.set(r,w),w)}function Jf(r,a){return!r||!Pl(a)?!1:(a=a.slice(2).replace(/Once$/,""),Er(r,a[0].toLowerCase()+a.slice(1))||Er(r,oo(a))||Er(r,a))}let Yi=null,Yf=null;function vp(r){const a=Yi;return Yi=r,Yf=r&&r.type.__scopeId||null,a}function D2(r){Yf=r}function R2(){Yf=null}const O2=r=>xg;function xg(r,a=Yi,c){if(!a||r._n)return r;const f=(...y)=>{f._d&&Bm(-1);const _=vp(a);let w;try{w=r(...y)}finally{vp(_),f._d&&Bm(1)}return w};return f._n=!0,f._c=!0,f._d=!0,f}function ff(r){const{type:a,vnode:c,proxy:f,withProxy:y,props:_,propsOptions:[w],slots:T,attrs:k,emit:L,render:q,renderCache:Z,data:ae,setupState:ce,ctx:de,inheritAttrs:Se}=r;let ze,he;const ue=vp(r);try{if(c.shapeFlag&4){const ve=y||f;ze=no(q.call(ve,ve,Z,_,ce,ae,de)),he=k}else{const ve=a;ze=no(ve.length>1?ve(_,{attrs:k,slots:T,emit:L}):ve(_,null)),he=a.props?k:F2(k)}}catch(ve){cp.length=0,Ll(ve,r,1),ze=Vr(bn)}let De=ze;if(he&&Se!==!1){const ve=Object.keys(he),{shapeFlag:je}=De;ve.length&&je&7&&(w&&ve.some(ig)&&(he=N2(he,w)),De=ca(De,he))}return c.dirs&&(De=ca(De),De.dirs=De.dirs?De.dirs.concat(c.dirs):c.dirs),c.transition&&(De.transition=c.transition),ze=De,vp(ue),ze}function B2(r){let a;for(let c=0;c<r.length;c++){const f=r[c];if(Cs(f)){if(f.type!==bn||f.children==="v-if"){if(a)return;a=f}}else return}return a}const F2=r=>{let a;for(const c in r)(c==="class"||c==="style"||Pl(c))&&((a||(a={}))[c]=r[c]);return a},N2=(r,a)=>{const c={};for(const f in r)(!ig(f)||!(f.slice(9)in a))&&(c[f]=r[f]);return c};function U2(r,a,c){const{props:f,children:y,component:_}=r,{props:w,children:T,patchFlag:k}=a,L=_.emitsOptions;if(a.dirs||a.transition)return!0;if(c&&k>=0){if(k&1024)return!0;if(k&16)return f?Nv(f,w,L):!!w;if(k&8){const q=a.dynamicProps;for(let Z=0;Z<q.length;Z++){const ae=q[Z];if(w[ae]!==f[ae]&&!Jf(L,ae))return!0}}}else return(y||T)&&(!T||!T.$stable)?!0:f===w?!1:f?w?Nv(f,w,L):!0:!!w;return!1}function Nv(r,a,c){const f=Object.keys(a);if(f.length!==Object.keys(r).length)return!0;for(let y=0;y<f.length;y++){const _=f[y];if(a[_]!==r[_]&&!Jf(c,_))return!0}return!1}function bg({vnode:r,parent:a},c){for(;a&&a.subTree===r;)(r=a.vnode).el=c,a=a.parent}const y0=r=>r.__isSuspense,V2={name:"Suspense",__isSuspense:!0,process(r,a,c,f,y,_,w,T,k,L){r==null?q2(a,c,f,y,_,w,T,k,L):Z2(r,a,c,f,y,w,T,k,L)},hydrate:H2,create:wg,normalize:G2},j2=V2;function _p(r,a){const c=r.props&&r.props[a];Zt(c)&&c()}function q2(r,a,c,f,y,_,w,T,k){const{p:L,o:{createElement:q}}=k,Z=q("div"),ae=r.suspense=wg(r,y,f,a,Z,c,_,w,T,k);L(null,ae.pendingBranch=r.ssContent,Z,null,f,ae,_,w),ae.deps>0?(_p(r,"onPending"),_p(r,"onFallback"),L(null,r.ssFallback,a,c,f,null,_,w),Zu(ae,r.ssFallback)):ae.resolve(!1,!0)}function Z2(r,a,c,f,y,_,w,T,{p:k,um:L,o:{createElement:q}}){const Z=a.suspense=r.suspense;Z.vnode=a,a.el=r.el;const ae=a.ssContent,ce=a.ssFallback,{activeBranch:de,pendingBranch:Se,isInFallback:ze,isHydrating:he}=Z;if(Se)Z.pendingBranch=ae,Ro(ae,Se)?(k(Se,ae,Z.hiddenContainer,null,y,Z,_,w,T),Z.deps<=0?Z.resolve():ze&&(k(de,ce,c,f,y,null,_,w,T),Zu(Z,ce))):(Z.pendingId++,he?(Z.isHydrating=!1,Z.activeBranch=Se):L(Se,y,Z),Z.deps=0,Z.effects.length=0,Z.hiddenContainer=q("div"),ze?(k(null,ae,Z.hiddenContainer,null,y,Z,_,w,T),Z.deps<=0?Z.resolve():(k(de,ce,c,f,y,null,_,w,T),Zu(Z,ce))):de&&Ro(ae,de)?(k(de,ae,c,f,y,Z,_,w,T),Z.resolve(!0)):(k(null,ae,Z.hiddenContainer,null,y,Z,_,w,T),Z.deps<=0&&Z.resolve()));else if(de&&Ro(ae,de))k(de,ae,c,f,y,Z,_,w,T),Zu(Z,ae);else if(_p(a,"onPending"),Z.pendingBranch=ae,Z.pendingId++,k(null,ae,Z.hiddenContainer,null,y,Z,_,w,T),Z.deps<=0)Z.resolve();else{const{timeout:ue,pendingId:De}=Z;ue>0?setTimeout(()=>{Z.pendingId===De&&Z.fallback(ce)},ue):ue===0&&Z.fallback(ce)}}function wg(r,a,c,f,y,_,w,T,k,L,q=!1){const{p:Z,m:ae,um:ce,n:de,o:{parentNode:Se,remove:ze}}=L;let he;const ue=W2(r);ue&&a!=null&&a.pendingBranch&&(he=a.pendingId,a.deps++);const De=r.props?Ef(r.props.timeout):void 0,ve={vnode:r,parent:a,parentComponent:c,isSVG:w,container:f,hiddenContainer:y,anchor:_,deps:0,pendingId:0,timeout:typeof De=="number"?De:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:q,isUnmounted:!1,effects:[],resolve(je=!1,h=!1){const{vnode:Me,activeBranch:Y,pendingBranch:Fe,pendingId:ke,effects:Xe,parentComponent:ye,container:mt}=ve;if(ve.isHydrating)ve.isHydrating=!1;else if(!je){const Dt=Y&&Fe.transition&&Fe.transition.mode==="out-in";Dt&&(Y.transition.afterLeave=()=>{ke===ve.pendingId&&ae(Fe,mt,tr,0)});let{anchor:tr}=ve;Y&&(tr=de(Y),ce(Y,ye,ve,!0)),Dt||ae(Fe,mt,tr,0)}Zu(ve,Fe),ve.pendingBranch=null,ve.isInFallback=!1;let et=ve.parent,Wt=!1;for(;et;){if(et.pendingBranch){et.effects.push(...Xe),Wt=!0;break}et=et.parent}Wt||_g(Xe),ve.effects=[],ue&&a&&a.pendingBranch&&he===a.pendingId&&(a.deps--,a.deps===0&&!h&&a.resolve()),_p(Me,"onResolve")},fallback(je){if(!ve.pendingBranch)return;const{vnode:h,activeBranch:Me,parentComponent:Y,container:Fe,isSVG:ke}=ve;_p(h,"onFallback");const Xe=de(Me),ye=()=>{ve.isInFallback&&(Z(null,je,Fe,Xe,Y,null,ke,T,k),Zu(ve,je))},mt=je.transition&&je.transition.mode==="out-in";mt&&(Me.transition.afterLeave=ye),ve.isInFallback=!0,ce(Me,Y,null,!0),mt||ye()},move(je,h,Me){ve.activeBranch&&ae(ve.activeBranch,je,h,Me),ve.container=je},next(){return ve.activeBranch&&de(ve.activeBranch)},registerDep(je,h){const Me=!!ve.pendingBranch;Me&&ve.deps++;const Y=je.vnode.el;je.asyncDep.catch(Fe=>{Ll(Fe,je,0)}).then(Fe=>{if(je.isUnmounted||ve.isUnmounted||ve.pendingId!==je.suspenseId)return;je.asyncResolved=!0;const{vnode:ke}=je;Fm(je,Fe,!1),Y&&(ke.el=Y);const Xe=!Y&&je.subTree.el;h(je,ke,Se(Y||je.subTree.el),Y?null:de(je.subTree),ve,w,k),Xe&&ze(Xe),bg(je,ke.el),Me&&--ve.deps===0&&ve.resolve()})},unmount(je,h){ve.isUnmounted=!0,ve.activeBranch&&ce(ve.activeBranch,c,je,h),ve.pendingBranch&&ce(ve.pendingBranch,c,je,h)}};return ve}function H2(r,a,c,f,y,_,w,T,k){const L=a.suspense=wg(a,f,c,r.parentNode,document.createElement("div"),null,y,_,w,T,!0),q=k(r,L.pendingBranch=a.ssContent,c,L,_,w);return L.deps===0&&L.resolve(!1,!0),q}function G2(r){const{shapeFlag:a,children:c}=r,f=a&32;r.ssContent=Uv(f?c.default:c),r.ssFallback=f?Uv(c.fallback):Vr(bn)}function Uv(r){let a;if(Zt(r)){const c=Al&&r._c;c&&(r._d=!1,Dl()),r=r(),c&&(r._d=!0,a=Zn,K0())}return xt(r)&&(r=B2(r)),r=no(r),a&&!r.dynamicChildren&&(r.dynamicChildren=a.filter(c=>c!==r)),r}function v0(r,a){a&&a.pendingBranch?xt(r)?a.effects.push(...r):a.effects.push(r):_g(r)}function Zu(r,a){r.activeBranch=a;const{vnode:c,parentComponent:f}=r,y=c.el=a.el;f&&f.subTree===c&&(f.vnode.el=y,bg(f,y))}function W2(r){var a;return((a=r.props)==null?void 0:a.suspensible)!=null&&r.props.suspensible!==!1}function K2(r,a){return Mp(r,null,a)}function _0(r,a){return Mp(r,null,{flush:"post"})}function $2(r,a){return Mp(r,null,{flush:"sync"})}const nf={};function bl(r,a,c){return Mp(r,a,c)}function Mp(r,a,{immediate:c,deep:f,flush:y,onTrack:_,onTrigger:w}=Br){var T;const k=X_()===((T=Di)==null?void 0:T.scope)?Di:null;let L,q=!1,Z=!1;if(Ui(r)?(L=()=>r.value,q=dp(r)):xl(r)?(L=()=>r,f=!0):xt(r)?(Z=!0,q=r.some(ve=>xl(ve)||dp(ve)),L=()=>r.map(ve=>{if(Ui(ve))return ve.value;if(xl(ve))return gl(ve);if(Zt(ve))return ja(ve,k,2)})):Zt(r)?a?L=()=>ja(r,k,2):L=()=>{if(!(k&&k.isUnmounted))return ae&&ae(),ao(r,k,3,[ce])}:L=zn,a&&f){const ve=L;L=()=>gl(ve())}let ae,ce=ve=>{ae=ue.onStop=()=>{ja(ve,k,4)}},de;if(Wu)if(ce=zn,a?c&&ao(a,k,3,[L(),Z?[]:void 0,ce]):L(),y==="sync"){const ve=l1();de=ve.__watcherHandles||(ve.__watcherHandles=[])}else return zn;let Se=Z?new Array(r.length).fill(nf):nf;const ze=()=>{if(ue.active)if(a){const ve=ue.run();(f||q||(Z?ve.some((je,h)=>Hu(je,Se[h])):Hu(ve,Se)))&&(ae&&ae(),ao(a,k,3,[ve,Se===nf?void 0:Z&&Se[0]===nf?[]:Se,ce]),Se=ve)}else ue.run()};ze.allowRecurse=!!a;let he;y==="sync"?he=ze:y==="post"?he=()=>sn(ze,k&&k.suspense):(ze.pre=!0,k&&(ze.id=k.uid),he=()=>Xf(ze));const ue=new zp(L,he);a?c?ze():Se=ue.run():y==="post"?sn(ue.run.bind(ue),k&&k.suspense):ue.run();const De=()=>{ue.stop(),k&&k.scope&&ng(k.scope.effects,ue)};return de&&de.push(De),De}function X2(r,a,c){const f=this.proxy,y=er(r)?r.includes(".")?x0(f,r):()=>f[r]:r.bind(f,f);let _;Zt(a)?_=a:(_=a.handler,c=a);const w=Di;Is(this);const T=Mp(y,_.bind(f),c);return w?Is(w):bs(),T}function x0(r,a){const c=a.split(".");return()=>{let f=r;for(let y=0;y<c.length&&f;y++)f=f[c[y]];return f}}function gl(r,a){if(!Fr(r)||r.__v_skip||(a=a||new Set,a.has(r)))return r;if(a.add(r),Ui(r))gl(r.value,a);else if(xt(r))for(let c=0;c<r.length;c++)gl(r[c],a);else if(zl(r)||Nu(r))r.forEach(c=>{gl(c,a)});else if(H_(r))for(const c in r)gl(r[c],a);return r}function J2(r,a){const c=Yi;if(c===null)return r;const f=ad(c)||c.proxy,y=r.dirs||(r.dirs=[]);for(let _=0;_<a.length;_++){let[w,T,k,L=Br]=a[_];w&&(Zt(w)&&(w={mounted:w,updated:w}),w.deep&&gl(T),y.push({dir:w,instance:f,value:T,oldValue:void 0,arg:k,modifiers:L}))}return r}function sa(r,a,c,f){const y=r.dirs,_=a&&a.dirs;for(let w=0;w<y.length;w++){const T=y[w];_&&(T.oldValue=_[w].value);let k=T.dir[f];k&&(tc(),ao(k,c,8,[r.el,T,r,a]),rc())}}function Eg(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dp(()=>{r.isMounted=!0}),rd(()=>{r.isUnmounting=!0}),r}const vo=[Function,Array],Sg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vo,onEnter:vo,onAfterEnter:vo,onEnterCancelled:vo,onBeforeLeave:vo,onLeave:vo,onAfterLeave:vo,onLeaveCancelled:vo,onBeforeAppear:vo,onAppear:vo,onAfterAppear:vo,onAppearCancelled:vo},Y2={name:"BaseTransition",props:Sg,setup(r,{slots:a}){const c=Ga(),f=Eg();let y;return()=>{const _=a.default&&Qf(a.default(),!0);if(!_||!_.length)return;let w=_[0];if(_.length>1){for(const Se of _)if(Se.type!==bn){w=Se;break}}const T=yr(r),{mode:k}=T;if(f.isLeaving)return pm(w);const L=Vv(w);if(!L)return pm(w);const q=Gu(L,T,f,c);Cl(L,q);const Z=c.subTree,ae=Z&&Vv(Z);let ce=!1;const{getTransitionKey:de}=L.type;if(de){const Se=de();y===void 0?y=Se:Se!==y&&(y=Se,ce=!0)}if(ae&&ae.type!==bn&&(!Ro(L,ae)||ce)){const Se=Gu(ae,T,f,c);if(Cl(ae,Se),k==="out-in")return f.isLeaving=!0,Se.afterLeave=()=>{f.isLeaving=!1,c.update.active!==!1&&c.update()},pm(w);k==="in-out"&&L.type!==bn&&(Se.delayLeave=(ze,he,ue)=>{const De=w0(f,ae);De[String(ae.key)]=ae,ze._leaveCb=()=>{he(),ze._leaveCb=void 0,delete q.delayedLeave},q.delayedLeave=ue})}return w}}},b0=Y2;function w0(r,a){const{leavingVNodes:c}=r;let f=c.get(a.type);return f||(f=Object.create(null),c.set(a.type,f)),f}function Gu(r,a,c,f){const{appear:y,mode:_,persisted:w=!1,onBeforeEnter:T,onEnter:k,onAfterEnter:L,onEnterCancelled:q,onBeforeLeave:Z,onLeave:ae,onAfterLeave:ce,onLeaveCancelled:de,onBeforeAppear:Se,onAppear:ze,onAfterAppear:he,onAppearCancelled:ue}=a,De=String(r.key),ve=w0(c,r),je=(Y,Fe)=>{Y&&ao(Y,f,9,Fe)},h=(Y,Fe)=>{const ke=Fe[1];je(Y,Fe),xt(Y)?Y.every(Xe=>Xe.length<=1)&&ke():Y.length<=1&&ke()},Me={mode:_,persisted:w,beforeEnter(Y){let Fe=T;if(!c.isMounted)if(y)Fe=Se||T;else return;Y._leaveCb&&Y._leaveCb(!0);const ke=ve[De];ke&&Ro(r,ke)&&ke.el._leaveCb&&ke.el._leaveCb(),je(Fe,[Y])},enter(Y){let Fe=k,ke=L,Xe=q;if(!c.isMounted)if(y)Fe=ze||k,ke=he||L,Xe=ue||q;else return;let ye=!1;const mt=Y._enterCb=et=>{ye||(ye=!0,et?je(Xe,[Y]):je(ke,[Y]),Me.delayedLeave&&Me.delayedLeave(),Y._enterCb=void 0)};Fe?h(Fe,[Y,mt]):mt()},leave(Y,Fe){const ke=String(r.key);if(Y._enterCb&&Y._enterCb(!0),c.isUnmounting)return Fe();je(Z,[Y]);let Xe=!1;const ye=Y._leaveCb=mt=>{Xe||(Xe=!0,Fe(),mt?je(de,[Y]):je(ce,[Y]),Y._leaveCb=void 0,ve[ke]===r&&delete ve[ke])};ve[ke]=r,ae?h(ae,[Y,ye]):ye()},clone(Y){return Gu(Y,a,c,f)}};return Me}function pm(r){if(Lp(r))return r=ca(r),r.children=null,r}function Vv(r){return Lp(r)?r.children?r.children[0]:void 0:r}function Cl(r,a){r.shapeFlag&6&&r.component?Cl(r.component.subTree,a):r.shapeFlag&128?(r.ssContent.transition=a.clone(r.ssContent),r.ssFallback.transition=a.clone(r.ssFallback)):r.transition=a}function Qf(r,a=!1,c){let f=[],y=0;for(let _=0;_<r.length;_++){let w=r[_];const T=c==null?w.key:String(c)+String(w.key!=null?w.key:_);w.type===ln?(w.patchFlag&128&&y++,f=f.concat(Qf(w.children,a,T))):(a||w.type!==bn)&&f.push(T!=null?ca(w,{key:T}):w)}if(y>1)for(let _=0;_<f.length;_++)f[_].patchFlag=-2;return f}function Tg(r,a){return Zt(r)?(()=>gr({name:r.name},a,{setup:r}))():r}const wl=r=>!!r.type.__asyncLoader;function Q2(r){Zt(r)&&(r={loader:r});const{loader:a,loadingComponent:c,errorComponent:f,delay:y=200,timeout:_,suspensible:w=!0,onError:T}=r;let k=null,L,q=0;const Z=()=>(q++,k=null,ae()),ae=()=>{let ce;return k||(ce=k=a().catch(de=>{if(de=de instanceof Error?de:new Error(String(de)),T)return new Promise((Se,ze)=>{T(de,()=>Se(Z()),()=>ze(de),q+1)});throw de}).then(de=>ce!==k&&k?k:(de&&(de.__esModule||de[Symbol.toStringTag]==="Module")&&(de=de.default),L=de,de)))};return Tg({name:"AsyncComponentWrapper",__asyncLoader:ae,get __asyncResolved(){return L},setup(){const ce=Di;if(L)return()=>hm(L,ce);const de=ue=>{k=null,Ll(ue,ce,13,!f)};if(w&&ce.suspense||Wu)return ae().then(ue=>()=>hm(ue,ce)).catch(ue=>(de(ue),()=>f?Vr(f,{error:ue}):null));const Se=ju(!1),ze=ju(),he=ju(!!y);return y&&setTimeout(()=>{he.value=!1},y),_!=null&&setTimeout(()=>{if(!Se.value&&!ze.value){const ue=new Error(`Async component timed out after ${_}ms.`);de(ue),ze.value=ue}},_),ae().then(()=>{Se.value=!0,ce.parent&&Lp(ce.parent.vnode)&&Xf(ce.parent.update)}).catch(ue=>{de(ue),ze.value=ue}),()=>{if(Se.value&&L)return hm(L,ce);if(ze.value&&f)return Vr(f,{error:ze.value});if(c&&!he.value)return Vr(c)}}})}function hm(r,a){const{ref:c,props:f,children:y,ce:_}=a.vnode,w=Vr(r,f,y);return w.ref=c,w.ce=_,delete a.vnode.ce,w}const Lp=r=>r.type.__isKeepAlive,eE={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:a}){const c=Ga(),f=c.ctx;if(!f.renderer)return()=>{const ue=a.default&&a.default();return ue&&ue.length===1?ue[0]:ue};const y=new Map,_=new Set;let w=null;const T=c.suspense,{renderer:{p:k,m:L,um:q,o:{createElement:Z}}}=f,ae=Z("div");f.activate=(ue,De,ve,je,h)=>{const Me=ue.component;L(ue,De,ve,0,T),k(Me.vnode,ue,De,ve,Me,T,je,ue.slotScopeIds,h),sn(()=>{Me.isDeactivated=!1,Me.a&&Vu(Me.a);const Y=ue.props&&ue.props.onVnodeMounted;Y&&qn(Y,Me.parent,ue)},T)},f.deactivate=ue=>{const De=ue.component;L(ue,ae,null,1,T),sn(()=>{De.da&&Vu(De.da);const ve=ue.props&&ue.props.onVnodeUnmounted;ve&&qn(ve,De.parent,ue),De.isDeactivated=!0},T)};function ce(ue){fm(ue),q(ue,c,T,!0)}function de(ue){y.forEach((De,ve)=>{const je=Um(De.type);je&&(!ue||!ue(je))&&Se(ve)})}function Se(ue){const De=y.get(ue);!w||!Ro(De,w)?ce(De):w&&fm(w),y.delete(ue),_.delete(ue)}bl(()=>[r.include,r.exclude],([ue,De])=>{ue&&de(ve=>op(ue,ve)),De&&de(ve=>!op(De,ve))},{flush:"post",deep:!0});let ze=null;const he=()=>{ze!=null&&y.set(ze,dm(c.subTree))};return Dp(he),td(he),rd(()=>{y.forEach(ue=>{const{subTree:De,suspense:ve}=c,je=dm(De);if(ue.type===je.type&&ue.key===je.key){fm(je);const h=je.component.da;h&&sn(h,ve);return}ce(ue)})}),()=>{if(ze=null,!a.default)return null;const ue=a.default(),De=ue[0];if(ue.length>1)return w=null,ue;if(!Cs(De)||!(De.shapeFlag&4)&&!(De.shapeFlag&128))return w=null,De;let ve=dm(De);const je=ve.type,h=Um(wl(ve)?ve.type.__asyncResolved||{}:je),{include:Me,exclude:Y,max:Fe}=r;if(Me&&(!h||!op(Me,h))||Y&&h&&op(Y,h))return w=ve,De;const ke=ve.key==null?je:ve.key,Xe=y.get(ke);return ve.el&&(ve=ca(ve),De.shapeFlag&128&&(De.ssContent=ve)),ze=ke,Xe?(ve.el=Xe.el,ve.component=Xe.component,ve.transition&&Cl(ve,ve.transition),ve.shapeFlag|=512,_.delete(ke),_.add(ke)):(_.add(ke),Fe&&_.size>parseInt(Fe,10)&&Se(_.values().next().value)),ve.shapeFlag|=256,w=ve,y0(De.type)?De:ve}}},tE=eE;function op(r,a){return xt(r)?r.some(c=>op(c,a)):er(r)?r.split(",").includes(a):dw(r)?r.test(a):!1}function E0(r,a){T0(r,"a",a)}function S0(r,a){T0(r,"da",a)}function T0(r,a,c=Di){const f=r.__wdc||(r.__wdc=()=>{let y=c;for(;y;){if(y.isDeactivated)return;y=y.parent}return r()});if(ed(a,f,c),c){let y=c.parent;for(;y&&y.parent;)Lp(y.parent.vnode)&&rE(f,a,c,y),y=y.parent}}function rE(r,a,c,f){const y=ed(a,r,f,!0);id(()=>{ng(f[a],y)},c)}function fm(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function dm(r){return r.shapeFlag&128?r.ssContent:r}function ed(r,a,c=Di,f=!1){if(c){const y=c[r]||(c[r]=[]),_=a.__weh||(a.__weh=(...w)=>{if(c.isUnmounted)return;tc(),Is(c);const T=ao(a,c,r,w);return bs(),rc(),T});return f?y.unshift(_):y.push(_),_}}const Ha=r=>(a,c=Di)=>(!Wu||r==="sp")&&ed(r,(...f)=>a(...f),c),C0=Ha("bm"),Dp=Ha("m"),I0=Ha("bu"),td=Ha("u"),rd=Ha("bum"),id=Ha("um"),A0=Ha("sp"),k0=Ha("rtg"),P0=Ha("rtc");function z0(r,a=Di){ed("ec",r,a)}const Cg="components",iE="directives";function M0(r,a){return Ig(Cg,r,!0,a)||r}const L0=Symbol.for("v-ndc");function nE(r){return er(r)?Ig(Cg,r,!1)||r:r||L0}function oE(r){return Ig(iE,r)}function Ig(r,a,c=!0,f=!1){const y=Yi||Di;if(y){const _=y.type;if(r===Cg){const T=Um(_,!1);if(T&&(T===a||T===Ri(a)||T===Ml(Ri(a))))return _}const w=jv(y[r]||_[r],a)||jv(y.appContext[r],a);return!w&&f?_:w}}function jv(r,a){return r&&(r[a]||r[Ri(a)]||r[Ml(Ri(a))])}function aE(r,a,c,f){let y;const _=c&&c[f];if(xt(r)||er(r)){y=new Array(r.length);for(let w=0,T=r.length;w<T;w++)y[w]=a(r[w],w,void 0,_&&_[w])}else if(typeof r=="number"){y=new Array(r);for(let w=0;w<r;w++)y[w]=a(w+1,w,void 0,_&&_[w])}else if(Fr(r))if(r[Symbol.iterator])y=Array.from(r,(w,T)=>a(w,T,void 0,_&&_[T]));else{const w=Object.keys(r);y=new Array(w.length);for(let T=0,k=w.length;T<k;T++){const L=w[T];y[T]=a(r[L],L,T,_&&_[T])}}else y=[];return c&&(c[f]=y),y}function sE(r,a){for(let c=0;c<a.length;c++){const f=a[c];if(xt(f))for(let y=0;y<f.length;y++)r[f[y].name]=f[y].fn;else f&&(r[f.name]=f.key?(...y)=>{const _=f.fn(...y);return _&&(_.key=f.key),_}:f.fn)}return r}function lE(r,a,c={},f,y){if(Yi.isCE||Yi.parent&&wl(Yi.parent)&&Yi.parent.isCE)return a!=="default"&&(c.name=a),Vr("slot",c,f&&f());let _=r[a];_&&_._c&&(_._d=!1),Dl();const w=_&&D0(_(c)),T=zg(ln,{key:c.key||w&&w.key||`_${a}`},w||(f?f():[]),w&&r._===1?64:-2);return!y&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),_&&_._c&&(_._d=!0),T}function D0(r){return r.some(a=>Cs(a)?!(a.type===bn||a.type===ln&&!D0(a.children)):!0)?r:null}function uE(r,a){const c={};for(const f in r)c[a&&/[A-Z]/.test(f)?`on:${f}`:Uu(f)]=r[f];return c}const zm=r=>r?e1(r)?ad(r)||r.proxy:zm(r.parent):null,sp=gr(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>zm(r.parent),$root:r=>zm(r.root),$emit:r=>r.emit,$options:r=>Ag(r),$forceUpdate:r=>r.f||(r.f=()=>Xf(r.update)),$nextTick:r=>r.n||(r.n=vg.bind(r.proxy)),$watch:r=>X2.bind(r)}),mm=(r,a)=>r!==Br&&!r.__isScriptSetup&&Er(r,a),Mm={get({_:r},a){const{ctx:c,setupState:f,data:y,props:_,accessCache:w,type:T,appContext:k}=r;let L;if(a[0]!=="$"){const ce=w[a];if(ce!==void 0)switch(ce){case 1:return f[a];case 2:return y[a];case 4:return c[a];case 3:return _[a]}else{if(mm(f,a))return w[a]=1,f[a];if(y!==Br&&Er(y,a))return w[a]=2,y[a];if((L=r.propsOptions[0])&&Er(L,a))return w[a]=3,_[a];if(c!==Br&&Er(c,a))return w[a]=4,c[a];Lm&&(w[a]=0)}}const q=sp[a];let Z,ae;if(q)return a==="$attrs"&&Gn(r,"get",a),q(r);if((Z=T.__cssModules)&&(Z=Z[a]))return Z;if(c!==Br&&Er(c,a))return w[a]=4,c[a];if(ae=k.config.globalProperties,Er(ae,a))return ae[a]},set({_:r},a,c){const{data:f,setupState:y,ctx:_}=r;return mm(y,a)?(y[a]=c,!0):f!==Br&&Er(f,a)?(f[a]=c,!0):Er(r.props,a)||a[0]==="$"&&a.slice(1)in r?!1:(_[a]=c,!0)},has({_:{data:r,setupState:a,accessCache:c,ctx:f,appContext:y,propsOptions:_}},w){let T;return!!c[w]||r!==Br&&Er(r,w)||mm(a,w)||(T=_[0])&&Er(T,w)||Er(f,w)||Er(sp,w)||Er(y.config.globalProperties,w)},defineProperty(r,a,c){return c.get!=null?r._.accessCache[a]=0:Er(c,"value")&&this.set(r,a,c.value,null),Reflect.defineProperty(r,a,c)}},cE=gr({},Mm,{get(r,a){if(a!==Symbol.unscopables)return Mm.get(r,a,r)},has(r,a){return a[0]!=="_"&&!xw(a)}});function pE(){return null}function hE(){return null}function fE(r){}function dE(r){}function mE(){return null}function gE(){}function yE(r,a){return null}function vE(){return R0().slots}function _E(){return R0().attrs}function xE(r,a,c){const f=Ga();if(c&&c.local){const y=ju(r[a]);return bl(()=>r[a],_=>y.value=_),bl(y,_=>{_!==r[a]&&f.emit(`update:${a}`,_)}),y}else return{__v_isRef:!0,get value(){return r[a]},set value(y){f.emit(`update:${a}`,y)}}}function R0(){const r=Ga();return r.setupContext||(r.setupContext=n1(r))}function xp(r){return xt(r)?r.reduce((a,c)=>(a[c]=null,a),{}):r}function bE(r,a){const c=xp(r);for(const f in a){if(f.startsWith("__skip"))continue;let y=c[f];y?xt(y)||Zt(y)?y=c[f]={type:y,default:a[f]}:y.default=a[f]:y===null&&(y=c[f]={default:a[f]}),y&&a[`__skip_${f}`]&&(y.skipFactory=!0)}return c}function wE(r,a){return!r||!a?r||a:xt(r)&&xt(a)?r.concat(a):gr({},xp(r),xp(a))}function EE(r,a){const c={};for(const f in r)a.includes(f)||Object.defineProperty(c,f,{enumerable:!0,get:()=>r[f]});return c}function SE(r){const a=Ga();let c=r();return bs(),og(c)&&(c=c.catch(f=>{throw Is(a),f})),[c,()=>Is(a)]}let Lm=!0;function TE(r){const a=Ag(r),c=r.proxy,f=r.ctx;Lm=!1,a.beforeCreate&&qv(a.beforeCreate,r,"bc");const{data:y,computed:_,methods:w,watch:T,provide:k,inject:L,created:q,beforeMount:Z,mounted:ae,beforeUpdate:ce,updated:de,activated:Se,deactivated:ze,beforeDestroy:he,beforeUnmount:ue,destroyed:De,unmounted:ve,render:je,renderTracked:h,renderTriggered:Me,errorCaptured:Y,serverPrefetch:Fe,expose:ke,inheritAttrs:Xe,components:ye,directives:mt,filters:et}=a;if(L&&CE(L,f,null),w)for(const tr in w){const Rt=w[tr];Zt(Rt)&&(f[tr]=Rt.bind(c))}if(y){const tr=y.call(c,c);Fr(tr)&&(r.data=Wf(tr))}if(Lm=!0,_)for(const tr in _){const Rt=_[tr],pi=Zt(Rt)?Rt.bind(c,c):Zt(Rt.get)?Rt.get.bind(c,c):zn,un=!Zt(Rt)&&Zt(Rt.set)?Rt.set.bind(c):zn,Hr=o1({get:pi,set:un});Object.defineProperty(f,tr,{enumerable:!0,configurable:!0,get:()=>Hr.value,set:hi=>Hr.value=hi})}if(T)for(const tr in T)O0(T[tr],f,c,tr);if(k){const tr=Zt(k)?k.call(c):k;Reflect.ownKeys(tr).forEach(Rt=>{F0(Rt,tr[Rt])})}q&&qv(q,r,"c");function Dt(tr,Rt){xt(Rt)?Rt.forEach(pi=>tr(pi.bind(c))):Rt&&tr(Rt.bind(c))}if(Dt(C0,Z),Dt(Dp,ae),Dt(I0,ce),Dt(td,de),Dt(E0,Se),Dt(S0,ze),Dt(z0,Y),Dt(P0,h),Dt(k0,Me),Dt(rd,ue),Dt(id,ve),Dt(A0,Fe),xt(ke))if(ke.length){const tr=r.exposed||(r.exposed={});ke.forEach(Rt=>{Object.defineProperty(tr,Rt,{get:()=>c[Rt],set:pi=>c[Rt]=pi})})}else r.exposed||(r.exposed={});je&&r.render===zn&&(r.render=je),Xe!=null&&(r.inheritAttrs=Xe),ye&&(r.components=ye),mt&&(r.directives=mt)}function CE(r,a,c=zn){xt(r)&&(r=Dm(r));for(const f in r){const y=r[f];let _;Fr(y)?"default"in y?_=lp(y.from||f,y.default,!0):_=lp(y.from||f):_=lp(y),Ui(_)?Object.defineProperty(a,f,{enumerable:!0,configurable:!0,get:()=>_.value,set:w=>_.value=w}):a[f]=_}}function qv(r,a,c){ao(xt(r)?r.map(f=>f.bind(a.proxy)):r.bind(a.proxy),a,c)}function O0(r,a,c,f){const y=f.includes(".")?x0(c,f):()=>c[f];if(er(r)){const _=a[r];Zt(_)&&bl(y,_)}else if(Zt(r))bl(y,r.bind(c));else if(Fr(r))if(xt(r))r.forEach(_=>O0(_,a,c,f));else{const _=Zt(r.handler)?r.handler.bind(c):a[r.handler];Zt(_)&&bl(y,_,r)}}function Ag(r){const a=r.type,{mixins:c,extends:f}=a,{mixins:y,optionsCache:_,config:{optionMergeStrategies:w}}=r.appContext,T=_.get(a);let k;return T?k=T:!y.length&&!c&&!f?k=a:(k={},y.length&&y.forEach(L=>Cf(k,L,w,!0)),Cf(k,a,w)),Fr(a)&&_.set(a,k),k}function Cf(r,a,c,f=!1){const{mixins:y,extends:_}=a;_&&Cf(r,_,c,!0),y&&y.forEach(w=>Cf(r,w,c,!0));for(const w in a)if(!(f&&w==="expose")){const T=IE[w]||c&&c[w];r[w]=T?T(r[w],a[w]):a[w]}return r}const IE={data:Zv,props:Hv,emits:Hv,methods:ap,computed:ap,beforeCreate:Pn,created:Pn,beforeMount:Pn,mounted:Pn,beforeUpdate:Pn,updated:Pn,beforeDestroy:Pn,beforeUnmount:Pn,destroyed:Pn,unmounted:Pn,activated:Pn,deactivated:Pn,errorCaptured:Pn,serverPrefetch:Pn,components:ap,directives:ap,watch:kE,provide:Zv,inject:AE};function Zv(r,a){return a?r?function(){return gr(Zt(r)?r.call(this,this):r,Zt(a)?a.call(this,this):a)}:a:r}function AE(r,a){return ap(Dm(r),Dm(a))}function Dm(r){if(xt(r)){const a={};for(let c=0;c<r.length;c++)a[r[c]]=r[c];return a}return r}function Pn(r,a){return r?[...new Set([].concat(r,a))]:a}function ap(r,a){return r?gr(Object.create(null),r,a):a}function Hv(r,a){return r?xt(r)&&xt(a)?[...new Set([...r,...a])]:gr(Object.create(null),xp(r),xp(a??{})):a}function kE(r,a){if(!r)return a;if(!a)return r;const c=gr(Object.create(null),r);for(const f in a)c[f]=Pn(r[f],a[f]);return c}function B0(){return{app:null,config:{isNativeTag:hf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PE=0;function zE(r,a){return function(f,y=null){Zt(f)||(f=gr({},f)),y!=null&&!Fr(y)&&(y=null);const _=B0(),w=new Set;let T=!1;const k=_.app={_uid:PE++,_component:f,_props:y,_container:null,_context:_,_instance:null,version:c1,get config(){return _.config},set config(L){},use(L,...q){return w.has(L)||(L&&Zt(L.install)?(w.add(L),L.install(k,...q)):Zt(L)&&(w.add(L),L(k,...q))),k},mixin(L){return _.mixins.includes(L)||_.mixins.push(L),k},component(L,q){return q?(_.components[L]=q,k):_.components[L]},directive(L,q){return q?(_.directives[L]=q,k):_.directives[L]},mount(L,q,Z){if(!T){const ae=Vr(f,y);return ae.appContext=_,q&&a?a(ae,L):r(ae,L,Z),T=!0,k._container=L,L.__vue_app__=k,ad(ae.component)||ae.component.proxy}},unmount(){T&&(r(null,k._container),delete k._container.__vue_app__)},provide(L,q){return _.provides[L]=q,k},runWithContext(L){bp=k;try{return L()}finally{bp=null}}};return k}}let bp=null;function F0(r,a){if(Di){let c=Di.provides;const f=Di.parent&&Di.parent.provides;f===c&&(c=Di.provides=Object.create(f)),c[r]=a}}function lp(r,a,c=!1){const f=Di||Yi;if(f||bp){const y=f?f.parent==null?f.vnode.appContext&&f.vnode.appContext.provides:f.parent.provides:bp._context.provides;if(y&&r in y)return y[r];if(arguments.length>1)return c&&Zt(a)?a.call(f&&f.proxy):a}}function ME(){return!!(Di||Yi||bp)}function LE(r,a,c,f=!1){const y={},_={};bf(_,od,1),r.propsDefaults=Object.create(null),N0(r,a,y,_);for(const w in r.propsOptions[0])w in y||(y[w]=void 0);c?r.props=f?y:u0(y):r.type.props?r.props=y:r.props=_,r.attrs=_}function DE(r,a,c,f){const{props:y,attrs:_,vnode:{patchFlag:w}}=r,T=yr(y),[k]=r.propsOptions;let L=!1;if((f||w>0)&&!(w&16)){if(w&8){const q=r.vnode.dynamicProps;for(let Z=0;Z<q.length;Z++){let ae=q[Z];if(Jf(r.emitsOptions,ae))continue;const ce=a[ae];if(k)if(Er(_,ae))ce!==_[ae]&&(_[ae]=ce,L=!0);else{const de=Ri(ae);y[de]=Rm(k,T,de,ce,r,!1)}else ce!==_[ae]&&(_[ae]=ce,L=!0)}}}else{N0(r,a,y,_)&&(L=!0);let q;for(const Z in T)(!a||!Er(a,Z)&&((q=oo(Z))===Z||!Er(a,q)))&&(k?c&&(c[Z]!==void 0||c[q]!==void 0)&&(y[Z]=Rm(k,T,Z,void 0,r,!0)):delete y[Z]);if(_!==T)for(const Z in _)(!a||!Er(a,Z))&&(delete _[Z],L=!0)}L&&Za(r,"set","$attrs")}function N0(r,a,c,f){const[y,_]=r.propsOptions;let w=!1,T;if(a)for(let k in a){if(vl(k))continue;const L=a[k];let q;y&&Er(y,q=Ri(k))?!_||!_.includes(q)?c[q]=L:(T||(T={}))[q]=L:Jf(r.emitsOptions,k)||(!(k in f)||L!==f[k])&&(f[k]=L,w=!0)}if(_){const k=yr(c),L=T||Br;for(let q=0;q<_.length;q++){const Z=_[q];c[Z]=Rm(y,k,Z,L[Z],r,!Er(L,Z))}}return w}function Rm(r,a,c,f,y,_){const w=r[c];if(w!=null){const T=Er(w,"default");if(T&&f===void 0){const k=w.default;if(w.type!==Function&&!w.skipFactory&&Zt(k)){const{propsDefaults:L}=y;c in L?f=L[c]:(Is(y),f=L[c]=k.call(null,a),bs())}else f=k}w[0]&&(_&&!T?f=!1:w[1]&&(f===""||f===oo(c))&&(f=!0))}return f}function U0(r,a,c=!1){const f=a.propsCache,y=f.get(r);if(y)return y;const _=r.props,w={},T=[];let k=!1;if(!Zt(r)){const q=Z=>{k=!0;const[ae,ce]=U0(Z,a,!0);gr(w,ae),ce&&T.push(...ce)};!c&&a.mixins.length&&a.mixins.forEach(q),r.extends&&q(r.extends),r.mixins&&r.mixins.forEach(q)}if(!_&&!k)return Fr(r)&&f.set(r,Fu),Fu;if(xt(_))for(let q=0;q<_.length;q++){const Z=Ri(_[q]);Gv(Z)&&(w[Z]=Br)}else if(_)for(const q in _){const Z=Ri(q);if(Gv(Z)){const ae=_[q],ce=w[Z]=xt(ae)||Zt(ae)?{type:ae}:gr({},ae);if(ce){const de=$v(Boolean,ce.type),Se=$v(String,ce.type);ce[0]=de>-1,ce[1]=Se<0||de<Se,(de>-1||Er(ce,"default"))&&T.push(Z)}}}const L=[w,T];return Fr(r)&&f.set(r,L),L}function Gv(r){return r[0]!=="$"}function Wv(r){const a=r&&r.toString().match(/^\s*(function|class) (\w+)/);return a?a[2]:r===null?"null":""}function Kv(r,a){return Wv(r)===Wv(a)}function $v(r,a){return xt(a)?a.findIndex(c=>Kv(c,r)):Zt(a)&&Kv(a,r)?0:-1}const V0=r=>r[0]==="_"||r==="$stable",kg=r=>xt(r)?r.map(no):[no(r)],RE=(r,a,c)=>{if(a._n)return a;const f=xg((...y)=>kg(a(...y)),c);return f._c=!1,f},j0=(r,a,c)=>{const f=r._ctx;for(const y in r){if(V0(y))continue;const _=r[y];if(Zt(_))a[y]=RE(y,_,f);else if(_!=null){const w=kg(_);a[y]=()=>w}}},q0=(r,a)=>{const c=kg(a);r.slots.default=()=>c},OE=(r,a)=>{if(r.vnode.shapeFlag&32){const c=a._;c?(r.slots=yr(a),bf(a,"_",c)):j0(a,r.slots={})}else r.slots={},a&&q0(r,a);bf(r.slots,od,1)},BE=(r,a,c)=>{const{vnode:f,slots:y}=r;let _=!0,w=Br;if(f.shapeFlag&32){const T=a._;T?c&&T===1?_=!1:(gr(y,a),!c&&T===1&&delete y._):(_=!a.$stable,j0(a,y)),w=a}else a&&(q0(r,a),w={default:1});if(_)for(const T in y)!V0(T)&&!(T in w)&&delete y[T]};function If(r,a,c,f,y=!1){if(xt(r)){r.forEach((ae,ce)=>If(ae,a&&(xt(a)?a[ce]:a),c,f,y));return}if(wl(f)&&!y)return;const _=f.shapeFlag&4?ad(f.component)||f.component.proxy:f.el,w=y?null:_,{i:T,r:k}=r,L=a&&a.r,q=T.refs===Br?T.refs={}:T.refs,Z=T.setupState;if(L!=null&&L!==k&&(er(L)?(q[L]=null,Er(Z,L)&&(Z[L]=null)):Ui(L)&&(L.value=null)),Zt(k))ja(k,T,12,[w,q]);else{const ae=er(k),ce=Ui(k);if(ae||ce){const de=()=>{if(r.f){const Se=ae?Er(Z,k)?Z[k]:q[k]:k.value;y?xt(Se)&&ng(Se,_):xt(Se)?Se.includes(_)||Se.push(_):ae?(q[k]=[_],Er(Z,k)&&(Z[k]=q[k])):(k.value=[_],r.k&&(q[r.k]=k.value))}else ae?(q[k]=w,Er(Z,k)&&(Z[k]=w)):ce&&(k.value=w,r.k&&(q[r.k]=w))};w?(de.id=-1,sn(de,c)):de()}}}let ms=!1;const of=r=>/svg/.test(r.namespaceURI)&&r.tagName!=="foreignObject",af=r=>r.nodeType===8;function FE(r){const{mt:a,p:c,o:{patchProp:f,createText:y,nextSibling:_,parentNode:w,remove:T,insert:k,createComment:L}}=r,q=(he,ue)=>{if(!ue.hasChildNodes()){c(null,he,ue),Tf(),ue._vnode=he;return}ms=!1,Z(ue.firstChild,he,null,null,null),Tf(),ue._vnode=he,ms&&console.error("Hydration completed but contains mismatches.")},Z=(he,ue,De,ve,je,h=!1)=>{const Me=af(he)&&he.data==="[",Y=()=>Se(he,ue,De,ve,je,Me),{type:Fe,ref:ke,shapeFlag:Xe,patchFlag:ye}=ue;let mt=he.nodeType;ue.el=he,ye===-2&&(h=!1,ue.dynamicChildren=null);let et=null;switch(Fe){case Il:mt!==3?ue.children===""?(k(ue.el=y(""),w(he),he),et=he):et=Y():(he.data!==ue.children&&(ms=!0,he.data=ue.children),et=_(he));break;case bn:mt!==8||Me?et=Y():et=_(he);break;case El:if(Me&&(he=_(he),mt=he.nodeType),mt===1||mt===3){et=he;const Wt=!ue.children.length;for(let Dt=0;Dt<ue.staticCount;Dt++)Wt&&(ue.children+=et.nodeType===1?et.outerHTML:et.data),Dt===ue.staticCount-1&&(ue.anchor=et),et=_(et);return Me?_(et):et}else Y();break;case ln:Me?et=de(he,ue,De,ve,je,h):et=Y();break;default:if(Xe&1)mt!==1||ue.type.toLowerCase()!==he.tagName.toLowerCase()?et=Y():et=ae(he,ue,De,ve,je,h);else if(Xe&6){ue.slotScopeIds=je;const Wt=w(he);if(a(ue,Wt,null,De,ve,of(Wt),h),et=Me?ze(he):_(he),et&&af(et)&&et.data==="teleport end"&&(et=_(et)),wl(ue)){let Dt;Me?(Dt=Vr(ln),Dt.anchor=et?et.previousSibling:Wt.lastChild):Dt=he.nodeType===3?Mg(""):Vr("div"),Dt.el=he,ue.component.subTree=Dt}}else Xe&64?mt!==8?et=Y():et=ue.type.hydrate(he,ue,De,ve,je,h,r,ce):Xe&128&&(et=ue.type.hydrate(he,ue,De,ve,of(w(he)),je,h,r,Z))}return ke!=null&&If(ke,null,ve,ue),et},ae=(he,ue,De,ve,je,h)=>{h=h||!!ue.dynamicChildren;const{type:Me,props:Y,patchFlag:Fe,shapeFlag:ke,dirs:Xe}=ue,ye=Me==="input"&&Xe||Me==="option";if(ye||Fe!==-1){if(Xe&&sa(ue,null,De,"created"),Y)if(ye||!h||Fe&48)for(const et in Y)(ye&&et.endsWith("value")||Pl(et)&&!vl(et))&&f(he,et,null,Y[et],!1,void 0,De);else Y.onClick&&f(he,"onClick",null,Y.onClick,!1,void 0,De);let mt;if((mt=Y&&Y.onVnodeBeforeMount)&&qn(mt,De,ue),Xe&&sa(ue,null,De,"beforeMount"),((mt=Y&&Y.onVnodeMounted)||Xe)&&v0(()=>{mt&&qn(mt,De,ue),Xe&&sa(ue,null,De,"mounted")},ve),ke&16&&!(Y&&(Y.innerHTML||Y.textContent))){let et=ce(he.firstChild,ue,he,De,ve,je,h);for(;et;){ms=!0;const Wt=et;et=et.nextSibling,T(Wt)}}else ke&8&&he.textContent!==ue.children&&(ms=!0,he.textContent=ue.children)}return he.nextSibling},ce=(he,ue,De,ve,je,h,Me)=>{Me=Me||!!ue.dynamicChildren;const Y=ue.children,Fe=Y.length;for(let ke=0;ke<Fe;ke++){const Xe=Me?Y[ke]:Y[ke]=no(Y[ke]);if(he)he=Z(he,Xe,ve,je,h,Me);else{if(Xe.type===Il&&!Xe.children)continue;ms=!0,c(null,Xe,De,null,ve,je,of(De),h)}}return he},de=(he,ue,De,ve,je,h)=>{const{slotScopeIds:Me}=ue;Me&&(je=je?je.concat(Me):Me);const Y=w(he),Fe=ce(_(he),ue,Y,De,ve,je,h);return Fe&&af(Fe)&&Fe.data==="]"?_(ue.anchor=Fe):(ms=!0,k(ue.anchor=L("]"),Y,Fe),Fe)},Se=(he,ue,De,ve,je,h)=>{if(ms=!0,ue.el=null,h){const Fe=ze(he);for(;;){const ke=_(he);if(ke&&ke!==Fe)T(ke);else break}}const Me=_(he),Y=w(he);return T(he),c(null,ue,Y,Me,De,ve,of(Y),je),Me},ze=he=>{let ue=0;for(;he;)if(he=_(he),he&&af(he)&&(he.data==="["&&ue++,he.data==="]")){if(ue===0)return _(he);ue--}return he};return[q,Z]}const sn=v0;function Z0(r){return G0(r)}function H0(r){return G0(r,FE)}function G0(r,a){const c=Cm();c.__VUE__=!0;const{insert:f,remove:y,patchProp:_,createElement:w,createText:T,createComment:k,setText:L,setElementText:q,parentNode:Z,nextSibling:ae,setScopeId:ce=zn,insertStaticContent:de}=r,Se=(ie,pe,Oe,We=null,qe=null,Je=null,we=!1,Pe=null,Le=!!pe.dynamicChildren)=>{if(ie===pe)return;ie&&!Ro(ie,pe)&&(We=Ii(ie),hi(ie,qe,Je,!0),ie=null),pe.patchFlag===-2&&(Le=!1,pe.dynamicChildren=null);const{type:Te,ref:Ye,shapeFlag:Ze}=pe;switch(Te){case Il:ze(ie,pe,Oe,We);break;case bn:he(ie,pe,Oe,We);break;case El:ie==null&&ue(pe,Oe,We,we);break;case ln:ye(ie,pe,Oe,We,qe,Je,we,Pe,Le);break;default:Ze&1?je(ie,pe,Oe,We,qe,Je,we,Pe,Le):Ze&6?mt(ie,pe,Oe,We,qe,Je,we,Pe,Le):(Ze&64||Ze&128)&&Te.process(ie,pe,Oe,We,qe,Je,we,Pe,Le,dr)}Ye!=null&&qe&&If(Ye,ie&&ie.ref,Je,pe||ie,!pe)},ze=(ie,pe,Oe,We)=>{if(ie==null)f(pe.el=T(pe.children),Oe,We);else{const qe=pe.el=ie.el;pe.children!==ie.children&&L(qe,pe.children)}},he=(ie,pe,Oe,We)=>{ie==null?f(pe.el=k(pe.children||""),Oe,We):pe.el=ie.el},ue=(ie,pe,Oe,We)=>{[ie.el,ie.anchor]=de(ie.children,pe,Oe,We,ie.el,ie.anchor)},De=({el:ie,anchor:pe},Oe,We)=>{let qe;for(;ie&&ie!==pe;)qe=ae(ie),f(ie,Oe,We),ie=qe;f(pe,Oe,We)},ve=({el:ie,anchor:pe})=>{let Oe;for(;ie&&ie!==pe;)Oe=ae(ie),y(ie),ie=Oe;y(pe)},je=(ie,pe,Oe,We,qe,Je,we,Pe,Le)=>{we=we||pe.type==="svg",ie==null?h(pe,Oe,We,qe,Je,we,Pe,Le):Fe(ie,pe,qe,Je,we,Pe,Le)},h=(ie,pe,Oe,We,qe,Je,we,Pe)=>{let Le,Te;const{type:Ye,props:Ze,shapeFlag:ct,transition:it,dirs:At}=ie;if(Le=ie.el=w(ie.type,Je,Ze&&Ze.is,Ze),ct&8?q(Le,ie.children):ct&16&&Y(ie.children,Le,null,We,qe,Je&&Ye!=="foreignObject",we,Pe),At&&sa(ie,null,We,"created"),Me(Le,ie,ie.scopeId,we,We),Ze){for(const jt in Ze)jt!=="value"&&!vl(jt)&&_(Le,jt,null,Ze[jt],Je,ie.children,We,qe,Qr);"value"in Ze&&_(Le,"value",null,Ze.value),(Te=Ze.onVnodeBeforeMount)&&qn(Te,We,ie)}At&&sa(ie,null,We,"beforeMount");const Vt=(!qe||qe&&!qe.pendingBranch)&&it&&!it.persisted;Vt&&it.beforeEnter(Le),f(Le,pe,Oe),((Te=Ze&&Ze.onVnodeMounted)||Vt||At)&&sn(()=>{Te&&qn(Te,We,ie),Vt&&it.enter(Le),At&&sa(ie,null,We,"mounted")},qe)},Me=(ie,pe,Oe,We,qe)=>{if(Oe&&ce(ie,Oe),We)for(let Je=0;Je<We.length;Je++)ce(ie,We[Je]);if(qe){let Je=qe.subTree;if(pe===Je){const we=qe.vnode;Me(ie,we,we.scopeId,we.slotScopeIds,qe.parent)}}},Y=(ie,pe,Oe,We,qe,Je,we,Pe,Le=0)=>{for(let Te=Le;Te<ie.length;Te++){const Ye=ie[Te]=Pe?_s(ie[Te]):no(ie[Te]);Se(null,Ye,pe,Oe,We,qe,Je,we,Pe)}},Fe=(ie,pe,Oe,We,qe,Je,we)=>{const Pe=pe.el=ie.el;let{patchFlag:Le,dynamicChildren:Te,dirs:Ye}=pe;Le|=ie.patchFlag&16;const Ze=ie.props||Br,ct=pe.props||Br;let it;Oe&&hl(Oe,!1),(it=ct.onVnodeBeforeUpdate)&&qn(it,Oe,pe,ie),Ye&&sa(pe,ie,Oe,"beforeUpdate"),Oe&&hl(Oe,!0);const At=qe&&pe.type!=="foreignObject";if(Te?ke(ie.dynamicChildren,Te,Pe,Oe,We,At,Je):we||Rt(ie,pe,Pe,null,Oe,We,At,Je,!1),Le>0){if(Le&16)Xe(Pe,pe,Ze,ct,Oe,We,qe);else if(Le&2&&Ze.class!==ct.class&&_(Pe,"class",null,ct.class,qe),Le&4&&_(Pe,"style",Ze.style,ct.style,qe),Le&8){const Vt=pe.dynamicProps;for(let jt=0;jt<Vt.length;jt++){const dt=Vt[jt],kr=Ze[dt],Pr=ct[dt];(Pr!==kr||dt==="value")&&_(Pe,dt,kr,Pr,qe,ie.children,Oe,We,Qr)}}Le&1&&ie.children!==pe.children&&q(Pe,pe.children)}else!we&&Te==null&&Xe(Pe,pe,Ze,ct,Oe,We,qe);((it=ct.onVnodeUpdated)||Ye)&&sn(()=>{it&&qn(it,Oe,pe,ie),Ye&&sa(pe,ie,Oe,"updated")},We)},ke=(ie,pe,Oe,We,qe,Je,we)=>{for(let Pe=0;Pe<pe.length;Pe++){const Le=ie[Pe],Te=pe[Pe],Ye=Le.el&&(Le.type===ln||!Ro(Le,Te)||Le.shapeFlag&70)?Z(Le.el):Oe;Se(Le,Te,Ye,null,We,qe,Je,we,!0)}},Xe=(ie,pe,Oe,We,qe,Je,we)=>{if(Oe!==We){if(Oe!==Br)for(const Pe in Oe)!vl(Pe)&&!(Pe in We)&&_(ie,Pe,Oe[Pe],null,we,pe.children,qe,Je,Qr);for(const Pe in We){if(vl(Pe))continue;const Le=We[Pe],Te=Oe[Pe];Le!==Te&&Pe!=="value"&&_(ie,Pe,Te,Le,we,pe.children,qe,Je,Qr)}"value"in We&&_(ie,"value",Oe.value,We.value)}},ye=(ie,pe,Oe,We,qe,Je,we,Pe,Le)=>{const Te=pe.el=ie?ie.el:T(""),Ye=pe.anchor=ie?ie.anchor:T("");let{patchFlag:Ze,dynamicChildren:ct,slotScopeIds:it}=pe;it&&(Pe=Pe?Pe.concat(it):it),ie==null?(f(Te,Oe,We),f(Ye,Oe,We),Y(pe.children,Oe,Ye,qe,Je,we,Pe,Le)):Ze>0&&Ze&64&&ct&&ie.dynamicChildren?(ke(ie.dynamicChildren,ct,Oe,qe,Je,we,Pe),(pe.key!=null||qe&&pe===qe.subTree)&&Pg(ie,pe,!0)):Rt(ie,pe,Oe,Ye,qe,Je,we,Pe,Le)},mt=(ie,pe,Oe,We,qe,Je,we,Pe,Le)=>{pe.slotScopeIds=Pe,ie==null?pe.shapeFlag&512?qe.ctx.activate(pe,Oe,We,we,Le):et(pe,Oe,We,qe,Je,we,Le):Wt(ie,pe,Le)},et=(ie,pe,Oe,We,qe,Je,we)=>{const Pe=ie.component=Q0(ie,We,qe);if(Lp(ie)&&(Pe.ctx.renderer=dr),t1(Pe),Pe.asyncDep){if(qe&&qe.registerDep(Pe,Dt),!ie.el){const Le=Pe.subTree=Vr(bn);he(null,Le,pe,Oe)}return}Dt(Pe,ie,pe,Oe,qe,Je,we)},Wt=(ie,pe,Oe)=>{const We=pe.component=ie.component;if(U2(ie,pe,Oe))if(We.asyncDep&&!We.asyncResolved){tr(We,pe,Oe);return}else We.next=pe,z2(We.update),We.update();else pe.el=ie.el,We.vnode=pe},Dt=(ie,pe,Oe,We,qe,Je,we)=>{const Pe=()=>{if(ie.isMounted){let{next:Ye,bu:Ze,u:ct,parent:it,vnode:At}=ie,Vt=Ye,jt;hl(ie,!1),Ye?(Ye.el=At.el,tr(ie,Ye,we)):Ye=At,Ze&&Vu(Ze),(jt=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&qn(jt,it,Ye,At),hl(ie,!0);const dt=ff(ie),kr=ie.subTree;ie.subTree=dt,Se(kr,dt,Z(kr.el),Ii(kr),ie,qe,Je),Ye.el=dt.el,Vt===null&&bg(ie,dt.el),ct&&sn(ct,qe),(jt=Ye.props&&Ye.props.onVnodeUpdated)&&sn(()=>qn(jt,it,Ye,At),qe)}else{let Ye;const{el:Ze,props:ct}=pe,{bm:it,m:At,parent:Vt}=ie,jt=wl(pe);if(hl(ie,!1),it&&Vu(it),!jt&&(Ye=ct&&ct.onVnodeBeforeMount)&&qn(Ye,Vt,pe),hl(ie,!0),Ze&&$n){const dt=()=>{ie.subTree=ff(ie),$n(Ze,ie.subTree,ie,qe,null)};jt?pe.type.__asyncLoader().then(()=>!ie.isUnmounted&&dt()):dt()}else{const dt=ie.subTree=ff(ie);Se(null,dt,Oe,We,ie,qe,Je),pe.el=dt.el}if(At&&sn(At,qe),!jt&&(Ye=ct&&ct.onVnodeMounted)){const dt=pe;sn(()=>qn(Ye,Vt,dt),qe)}(pe.shapeFlag&256||Vt&&wl(Vt.vnode)&&Vt.vnode.shapeFlag&256)&&ie.a&&sn(ie.a,qe),ie.isMounted=!0,pe=Oe=We=null}},Le=ie.effect=new zp(Pe,()=>Xf(Te),ie.scope),Te=ie.update=()=>Le.run();Te.id=ie.uid,hl(ie,!0),Te()},tr=(ie,pe,Oe)=>{pe.component=ie;const We=ie.vnode.props;ie.vnode=pe,ie.next=null,DE(ie,pe.props,We,Oe),BE(ie,pe.children,Oe),tc(),Fv(),rc()},Rt=(ie,pe,Oe,We,qe,Je,we,Pe,Le=!1)=>{const Te=ie&&ie.children,Ye=ie?ie.shapeFlag:0,Ze=pe.children,{patchFlag:ct,shapeFlag:it}=pe;if(ct>0){if(ct&128){un(Te,Ze,Oe,We,qe,Je,we,Pe,Le);return}else if(ct&256){pi(Te,Ze,Oe,We,qe,Je,we,Pe,Le);return}}it&8?(Ye&16&&Qr(Te,qe,Je),Ze!==Te&&q(Oe,Ze)):Ye&16?it&16?un(Te,Ze,Oe,We,qe,Je,we,Pe,Le):Qr(Te,qe,Je,!0):(Ye&8&&q(Oe,""),it&16&&Y(Ze,Oe,We,qe,Je,we,Pe,Le))},pi=(ie,pe,Oe,We,qe,Je,we,Pe,Le)=>{ie=ie||Fu,pe=pe||Fu;const Te=ie.length,Ye=pe.length,Ze=Math.min(Te,Ye);let ct;for(ct=0;ct<Ze;ct++){const it=pe[ct]=Le?_s(pe[ct]):no(pe[ct]);Se(ie[ct],it,Oe,null,qe,Je,we,Pe,Le)}Te>Ye?Qr(ie,qe,Je,!0,!1,Ze):Y(pe,Oe,We,qe,Je,we,Pe,Le,Ze)},un=(ie,pe,Oe,We,qe,Je,we,Pe,Le)=>{let Te=0;const Ye=pe.length;let Ze=ie.length-1,ct=Ye-1;for(;Te<=Ze&&Te<=ct;){const it=ie[Te],At=pe[Te]=Le?_s(pe[Te]):no(pe[Te]);if(Ro(it,At))Se(it,At,Oe,null,qe,Je,we,Pe,Le);else break;Te++}for(;Te<=Ze&&Te<=ct;){const it=ie[Ze],At=pe[ct]=Le?_s(pe[ct]):no(pe[ct]);if(Ro(it,At))Se(it,At,Oe,null,qe,Je,we,Pe,Le);else break;Ze--,ct--}if(Te>Ze){if(Te<=ct){const it=ct+1,At=it<Ye?pe[it].el:We;for(;Te<=ct;)Se(null,pe[Te]=Le?_s(pe[Te]):no(pe[Te]),Oe,At,qe,Je,we,Pe,Le),Te++}}else if(Te>ct)for(;Te<=Ze;)hi(ie[Te],qe,Je,!0),Te++;else{const it=Te,At=Te,Vt=new Map;for(Te=At;Te<=ct;Te++){const lr=pe[Te]=Le?_s(pe[Te]):no(pe[Te]);lr.key!=null&&Vt.set(lr.key,Te)}let jt,dt=0;const kr=ct-At+1;let Pr=!1,ai=0;const Sn=new Array(kr);for(Te=0;Te<kr;Te++)Sn[Te]=0;for(Te=it;Te<=Ze;Te++){const lr=ie[Te];if(dt>=kr){hi(lr,qe,Je,!0);continue}let rr;if(lr.key!=null)rr=Vt.get(lr.key);else for(jt=At;jt<=ct;jt++)if(Sn[jt-At]===0&&Ro(lr,pe[jt])){rr=jt;break}rr===void 0?hi(lr,qe,Je,!0):(Sn[rr-At]=Te+1,rr>=ai?ai=rr:Pr=!0,Se(lr,pe[rr],Oe,null,qe,Je,we,Pe,Le),dt++)}const Ai=Pr?NE(Sn):Fu;for(jt=Ai.length-1,Te=kr-1;Te>=0;Te--){const lr=At+Te,rr=pe[lr],fi=lr+1<Ye?pe[lr+1].el:We;Sn[Te]===0?Se(null,rr,Oe,fi,qe,Je,we,Pe,Le):Pr&&(jt<0||Te!==Ai[jt]?Hr(rr,Oe,fi,2):jt--)}}},Hr=(ie,pe,Oe,We,qe=null)=>{const{el:Je,type:we,transition:Pe,children:Le,shapeFlag:Te}=ie;if(Te&6){Hr(ie.component.subTree,pe,Oe,We);return}if(Te&128){ie.suspense.move(pe,Oe,We);return}if(Te&64){we.move(ie,pe,Oe,dr);return}if(we===ln){f(Je,pe,Oe);for(let Ze=0;Ze<Le.length;Ze++)Hr(Le[Ze],pe,Oe,We);f(ie.anchor,pe,Oe);return}if(we===El){De(ie,pe,Oe);return}if(We!==2&&Te&1&&Pe)if(We===0)Pe.beforeEnter(Je),f(Je,pe,Oe),sn(()=>Pe.enter(Je),qe);else{const{leave:Ze,delayLeave:ct,afterLeave:it}=Pe,At=()=>f(Je,pe,Oe),Vt=()=>{Ze(Je,()=>{At(),it&&it()})};ct?ct(Je,At,Vt):Vt()}else f(Je,pe,Oe)},hi=(ie,pe,Oe,We=!1,qe=!1)=>{const{type:Je,props:we,ref:Pe,children:Le,dynamicChildren:Te,shapeFlag:Ye,patchFlag:Ze,dirs:ct}=ie;if(Pe!=null&&If(Pe,null,Oe,ie,!0),Ye&256){pe.ctx.deactivate(ie);return}const it=Ye&1&&ct,At=!wl(ie);let Vt;if(At&&(Vt=we&&we.onVnodeBeforeUnmount)&&qn(Vt,pe,ie),Ye&6)ni(ie.component,Oe,We);else{if(Ye&128){ie.suspense.unmount(Oe,We);return}it&&sa(ie,null,pe,"beforeUnmount"),Ye&64?ie.type.remove(ie,pe,Oe,qe,dr,We):Te&&(Je!==ln||Ze>0&&Ze&64)?Qr(Te,pe,Oe,!1,!0):(Je===ln&&Ze&384||!qe&&Ye&16)&&Qr(Le,pe,Oe),We&&En(ie)}(At&&(Vt=we&&we.onVnodeUnmounted)||it)&&sn(()=>{Vt&&qn(Vt,pe,ie),it&&sa(ie,null,pe,"unmounted")},Oe)},En=ie=>{const{type:pe,el:Oe,anchor:We,transition:qe}=ie;if(pe===ln){Mn(Oe,We);return}if(pe===El){ve(ie);return}const Je=()=>{y(Oe),qe&&!qe.persisted&&qe.afterLeave&&qe.afterLeave()};if(ie.shapeFlag&1&&qe&&!qe.persisted){const{leave:we,delayLeave:Pe}=qe,Le=()=>we(Oe,Je);Pe?Pe(ie.el,Je,Le):Le()}else Je()},Mn=(ie,pe)=>{let Oe;for(;ie!==pe;)Oe=ae(ie),y(ie),ie=Oe;y(pe)},ni=(ie,pe,Oe)=>{const{bum:We,scope:qe,update:Je,subTree:we,um:Pe}=ie;We&&Vu(We),qe.stop(),Je&&(Je.active=!1,hi(we,ie,pe,Oe)),Pe&&sn(Pe,pe),sn(()=>{ie.isUnmounted=!0},pe),pe&&pe.pendingBranch&&!pe.isUnmounted&&ie.asyncDep&&!ie.asyncResolved&&ie.suspenseId===pe.pendingId&&(pe.deps--,pe.deps===0&&pe.resolve())},Qr=(ie,pe,Oe,We=!1,qe=!1,Je=0)=>{for(let we=Je;we<ie.length;we++)hi(ie[we],pe,Oe,We,qe)},Ii=ie=>ie.shapeFlag&6?Ii(ie.component.subTree):ie.shapeFlag&128?ie.suspense.next():ae(ie.anchor||ie.el),Kn=(ie,pe,Oe)=>{ie==null?pe._vnode&&hi(pe._vnode,null,null,!0):Se(pe._vnode||null,ie,pe,null,null,null,Oe),Fv(),Tf(),pe._vnode=ie},dr={p:Se,um:hi,m:Hr,r:En,mt:et,mc:Y,pc:Rt,pbc:ke,n:Ii,o:r};let oi,$n;return a&&([oi,$n]=a(dr)),{render:Kn,hydrate:oi,createApp:zE(Kn,oi)}}function hl({effect:r,update:a},c){r.allowRecurse=a.allowRecurse=c}function Pg(r,a,c=!1){const f=r.children,y=a.children;if(xt(f)&&xt(y))for(let _=0;_<f.length;_++){const w=f[_];let T=y[_];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=y[_]=_s(y[_]),T.el=w.el),c||Pg(w,T)),T.type===Il&&(T.el=w.el)}}function NE(r){const a=r.slice(),c=[0];let f,y,_,w,T;const k=r.length;for(f=0;f<k;f++){const L=r[f];if(L!==0){if(y=c[c.length-1],r[y]<L){a[f]=y,c.push(f);continue}for(_=0,w=c.length-1;_<w;)T=_+w>>1,r[c[T]]<L?_=T+1:w=T;L<r[c[_]]&&(_>0&&(a[f]=c[_-1]),c[_]=f)}}for(_=c.length,w=c[_-1];_-- >0;)c[_]=w,w=a[w];return c}const UE=r=>r.__isTeleport,up=r=>r&&(r.disabled||r.disabled===""),Xv=r=>typeof SVGElement<"u"&&r instanceof SVGElement,Om=(r,a)=>{const c=r&&r.to;return er(c)?a?a(c):null:c},VE={__isTeleport:!0,process(r,a,c,f,y,_,w,T,k,L){const{mc:q,pc:Z,pbc:ae,o:{insert:ce,querySelector:de,createText:Se,createComment:ze}}=L,he=up(a.props);let{shapeFlag:ue,children:De,dynamicChildren:ve}=a;if(r==null){const je=a.el=Se(""),h=a.anchor=Se("");ce(je,c,f),ce(h,c,f);const Me=a.target=Om(a.props,de),Y=a.targetAnchor=Se("");Me&&(ce(Y,Me),w=w||Xv(Me));const Fe=(ke,Xe)=>{ue&16&&q(De,ke,Xe,y,_,w,T,k)};he?Fe(c,h):Me&&Fe(Me,Y)}else{a.el=r.el;const je=a.anchor=r.anchor,h=a.target=r.target,Me=a.targetAnchor=r.targetAnchor,Y=up(r.props),Fe=Y?c:h,ke=Y?je:Me;if(w=w||Xv(h),ve?(ae(r.dynamicChildren,ve,Fe,y,_,w,T),Pg(r,a,!0)):k||Z(r,a,Fe,ke,y,_,w,T,!1),he)Y||sf(a,c,je,L,1);else if((a.props&&a.props.to)!==(r.props&&r.props.to)){const Xe=a.target=Om(a.props,de);Xe&&sf(a,Xe,null,L,0)}else Y&&sf(a,h,Me,L,1)}W0(a)},remove(r,a,c,f,{um:y,o:{remove:_}},w){const{shapeFlag:T,children:k,anchor:L,targetAnchor:q,target:Z,props:ae}=r;if(Z&&_(q),(w||!up(ae))&&(_(L),T&16))for(let ce=0;ce<k.length;ce++){const de=k[ce];y(de,a,c,!0,!!de.dynamicChildren)}},move:sf,hydrate:jE};function sf(r,a,c,{o:{insert:f},m:y},_=2){_===0&&f(r.targetAnchor,a,c);const{el:w,anchor:T,shapeFlag:k,children:L,props:q}=r,Z=_===2;if(Z&&f(w,a,c),(!Z||up(q))&&k&16)for(let ae=0;ae<L.length;ae++)y(L[ae],a,c,2);Z&&f(T,a,c)}function jE(r,a,c,f,y,_,{o:{nextSibling:w,parentNode:T,querySelector:k}},L){const q=a.target=Om(a.props,k);if(q){const Z=q._lpa||q.firstChild;if(a.shapeFlag&16)if(up(a.props))a.anchor=L(w(r),a,T(r),c,f,y,_),a.targetAnchor=Z;else{a.anchor=w(r);let ae=Z;for(;ae;)if(ae=w(ae),ae&&ae.nodeType===8&&ae.data==="teleport anchor"){a.targetAnchor=ae,q._lpa=a.targetAnchor&&w(a.targetAnchor);break}L(Z,a,q,c,f,y,_)}W0(a)}return a.anchor&&w(a.anchor)}const qE=VE;function W0(r){const a=r.ctx;if(a&&a.ut){let c=r.children[0].el;for(;c!==r.targetAnchor;)c.nodeType===1&&c.setAttribute("data-v-owner",a.uid),c=c.nextSibling;a.ut()}}const ln=Symbol.for("v-fgt"),Il=Symbol.for("v-txt"),bn=Symbol.for("v-cmt"),El=Symbol.for("v-stc"),cp=[];let Zn=null;function Dl(r=!1){cp.push(Zn=r?null:[])}function K0(){cp.pop(),Zn=cp[cp.length-1]||null}let Al=1;function Bm(r){Al+=r}function $0(r){return r.dynamicChildren=Al>0?Zn||Fu:null,K0(),Al>0&&Zn&&Zn.push(r),r}function nd(r,a,c,f,y,_){return $0(Oo(r,a,c,f,y,_,!0))}function zg(r,a,c,f,y){return $0(Vr(r,a,c,f,y,!0))}function Cs(r){return r?r.__v_isVNode===!0:!1}function Ro(r,a){return r.type===a.type&&r.key===a.key}function ZE(r){}const od="__vInternal",X0=({key:r})=>r??null,df=({ref:r,ref_key:a,ref_for:c})=>(typeof r=="number"&&(r=""+r),r!=null?er(r)||Ui(r)||Zt(r)?{i:Yi,r,k:a,f:!!c}:r:null);function Oo(r,a=null,c=null,f=0,y=null,_=r===ln?0:1,w=!1,T=!1){const k={__v_isVNode:!0,__v_skip:!0,type:r,props:a,key:a&&X0(a),ref:a&&df(a),scopeId:Yf,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:_,patchFlag:f,dynamicProps:y,dynamicChildren:null,appContext:null,ctx:Yi};return T?(Lg(k,c),_&128&&r.normalize(k)):c&&(k.shapeFlag|=er(c)?8:16),Al>0&&!w&&Zn&&(k.patchFlag>0||_&6)&&k.patchFlag!==32&&Zn.push(k),k}const Vr=HE;function HE(r,a=null,c=null,f=0,y=null,_=!1){if((!r||r===L0)&&(r=bn),Cs(r)){const T=ca(r,a,!0);return c&&Lg(T,c),Al>0&&!_&&Zn&&(T.shapeFlag&6?Zn[Zn.indexOf(r)]=T:Zn.push(T)),T.patchFlag|=-2,T}if(QE(r)&&(r=r.__vccOpts),a){a=J0(a);let{class:T,style:k}=a;T&&!er(T)&&(a.class=Pp(T)),Fr(k)&&(pg(k)&&!xt(k)&&(k=gr({},k)),a.style=kp(k))}const w=er(r)?1:y0(r)?128:UE(r)?64:Fr(r)?4:Zt(r)?2:0;return Oo(r,a,c,f,y,w,_,!0)}function J0(r){return r?pg(r)||od in r?gr({},r):r:null}function ca(r,a,c=!1){const{props:f,ref:y,patchFlag:_,children:w}=r,T=a?Y0(f||{},a):f;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:T,key:T&&X0(T),ref:a&&a.ref?c&&y?xt(y)?y.concat(df(a)):[y,df(a)]:df(a):y,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:w,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:a&&r.type!==ln?_===-1?16:_|16:_,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&ca(r.ssContent),ssFallback:r.ssFallback&&ca(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function Mg(r=" ",a=0){return Vr(Il,null,r,a)}function GE(r,a){const c=Vr(El,null,r);return c.staticCount=a,c}function WE(r="",a=!1){return a?(Dl(),zg(bn,null,r)):Vr(bn,null,r)}function no(r){return r==null||typeof r=="boolean"?Vr(bn):xt(r)?Vr(ln,null,r.slice()):typeof r=="object"?_s(r):Vr(Il,null,String(r))}function _s(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:ca(r)}function Lg(r,a){let c=0;const{shapeFlag:f}=r;if(a==null)a=null;else if(xt(a))c=16;else if(typeof a=="object")if(f&65){const y=a.default;y&&(y._c&&(y._d=!1),Lg(r,y()),y._c&&(y._d=!0));return}else{c=32;const y=a._;!y&&!(od in a)?a._ctx=Yi:y===3&&Yi&&(Yi.slots._===1?a._=1:(a._=2,r.patchFlag|=1024))}else Zt(a)?(a={default:a,_ctx:Yi},c=32):(a=String(a),f&64?(c=16,a=[Mg(a)]):c=8);r.children=a,r.shapeFlag|=c}function Y0(...r){const a={};for(let c=0;c<r.length;c++){const f=r[c];for(const y in f)if(y==="class")a.class!==f.class&&(a.class=Pp([a.class,f.class]));else if(y==="style")a.style=kp([a.style,f.style]);else if(Pl(y)){const _=a[y],w=f[y];w&&_!==w&&!(xt(_)&&_.includes(w))&&(a[y]=_?[].concat(_,w):w)}else y!==""&&(a[y]=f[y])}return a}function qn(r,a,c,f=null){ao(r,a,7,[c,f])}const KE=B0();let $E=0;function Q0(r,a,c){const f=r.type,y=(a?a.appContext:r.appContext)||KE,_={uid:$E++,vnode:r,type:f,parent:a,appContext:y,root:null,next:null,subTree:null,effect:null,update:null,scope:new sg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(y.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:U0(f,y),emitsOptions:g0(f,y),emit:null,emitted:null,propsDefaults:Br,inheritAttrs:f.inheritAttrs,ctx:Br,data:Br,props:Br,attrs:Br,slots:Br,refs:Br,setupState:Br,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return _.ctx={_},_.root=a?a.root:_,_.emit=L2.bind(null,_),r.ce&&r.ce(_),_}let Di=null;const Ga=()=>Di||Yi;let Dg,Du,Jv="__VUE_INSTANCE_SETTERS__";(Du=Cm()[Jv])||(Du=Cm()[Jv]=[]),Du.push(r=>Di=r),Dg=r=>{Du.length>1?Du.forEach(a=>a(r)):Du[0](r)};const Is=r=>{Dg(r),r.scope.on()},bs=()=>{Di&&Di.scope.off(),Dg(null)};function e1(r){return r.vnode.shapeFlag&4}let Wu=!1;function t1(r,a=!1){Wu=a;const{props:c,children:f}=r.vnode,y=e1(r);LE(r,c,y,a),OE(r,f);const _=y?XE(r,a):void 0;return Wu=!1,_}function XE(r,a){const c=r.type;r.accessCache=Object.create(null),r.proxy=hg(new Proxy(r.ctx,Mm));const{setup:f}=c;if(f){const y=r.setupContext=f.length>1?n1(r):null;Is(r),tc();const _=ja(f,r,0,[r.props,y]);if(rc(),bs(),og(_)){if(_.then(bs,bs),a)return _.then(w=>{Fm(r,w,a)}).catch(w=>{Ll(w,r,0)});r.asyncDep=_}else Fm(r,_,a)}else i1(r,a)}function Fm(r,a,c){Zt(a)?r.type.__ssrInlineRender?r.ssrRender=a:r.render=a:Fr(a)&&(r.setupState=gg(a)),i1(r,c)}let Af,Nm;function r1(r){Af=r,Nm=a=>{a.render._rc&&(a.withProxy=new Proxy(a.ctx,cE))}}const JE=()=>!Af;function i1(r,a,c){const f=r.type;if(!r.render){if(!a&&Af&&!f.render){const y=f.template||Ag(r).template;if(y){const{isCustomElement:_,compilerOptions:w}=r.appContext.config,{delimiters:T,compilerOptions:k}=f,L=gr(gr({isCustomElement:_,delimiters:T},w),k);f.render=Af(y,L)}}r.render=f.render||zn,Nm&&Nm(r)}Is(r),tc(),TE(r),rc(),bs()}function YE(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(a,c){return Gn(r,"get","$attrs"),a[c]}}))}function n1(r){const a=c=>{r.exposed=c||{}};return{get attrs(){return YE(r)},slots:r.slots,emit:r.emit,expose:a}}function ad(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(gg(hg(r.exposed)),{get(a,c){if(c in a)return a[c];if(c in sp)return sp[c](r)},has(a,c){return c in a||c in sp}}))}function Um(r,a=!0){return Zt(r)?r.displayName||r.name:r.name||a&&r.__name}function QE(r){return Zt(r)&&"__vccOpts"in r}const o1=(r,a)=>C2(r,a,Wu);function a1(r,a,c){const f=arguments.length;return f===2?Fr(a)&&!xt(a)?Cs(a)?Vr(r,null,[a]):Vr(r,a):Vr(r,null,a):(f>3?c=Array.prototype.slice.call(arguments,2):f===3&&Cs(c)&&(c=[c]),Vr(r,a,c))}const s1=Symbol.for("v-scx"),l1=()=>lp(s1);function e3(){}function t3(r,a,c,f){const y=c[f];if(y&&u1(y,r))return y;const _=a();return _.memo=r.slice(),c[f]=_}function u1(r,a){const c=r.memo;if(c.length!=a.length)return!1;for(let f=0;f<c.length;f++)if(Hu(c[f],a[f]))return!1;return Al>0&&Zn&&Zn.push(r),!0}const c1="3.3.4",r3={createComponentInstance:Q0,setupComponent:t1,renderComponentRoot:ff,setCurrentRenderingInstance:vp,isVNode:Cs,normalizeVNode:no},i3=r3,n3=null,o3=null,a3="http://www.w3.org/2000/svg",ml=typeof document<"u"?document:null,Yv=ml&&ml.createElement("template"),s3={insert:(r,a,c)=>{a.insertBefore(r,c||null)},remove:r=>{const a=r.parentNode;a&&a.removeChild(r)},createElement:(r,a,c,f)=>{const y=a?ml.createElementNS(a3,r):ml.createElement(r,c?{is:c}:void 0);return r==="select"&&f&&f.multiple!=null&&y.setAttribute("multiple",f.multiple),y},createText:r=>ml.createTextNode(r),createComment:r=>ml.createComment(r),setText:(r,a)=>{r.nodeValue=a},setElementText:(r,a)=>{r.textContent=a},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>ml.querySelector(r),setScopeId(r,a){r.setAttribute(a,"")},insertStaticContent(r,a,c,f,y,_){const w=c?c.previousSibling:a.lastChild;if(y&&(y===_||y.nextSibling))for(;a.insertBefore(y.cloneNode(!0),c),!(y===_||!(y=y.nextSibling)););else{Yv.innerHTML=f?`<svg>${r}</svg>`:r;const T=Yv.content;if(f){const k=T.firstChild;for(;k.firstChild;)T.appendChild(k.firstChild);T.removeChild(k)}a.insertBefore(T,c)}return[w?w.nextSibling:a.firstChild,c?c.previousSibling:a.lastChild]}};function l3(r,a,c){const f=r._vtc;f&&(a=(a?[a,...f]:[...f]).join(" ")),a==null?r.removeAttribute("class"):c?r.setAttribute("class",a):r.className=a}function u3(r,a,c){const f=r.style,y=er(c);if(c&&!y){if(a&&!er(a))for(const _ in a)c[_]==null&&Vm(f,_,"");for(const _ in c)Vm(f,_,c[_])}else{const _=f.display;y?a!==c&&(f.cssText=c):a&&r.removeAttribute("style"),"_vod"in r&&(f.display=_)}}const Qv=/\s*!important$/;function Vm(r,a,c){if(xt(c))c.forEach(f=>Vm(r,a,f));else if(c==null&&(c=""),a.startsWith("--"))r.setProperty(a,c);else{const f=c3(r,a);Qv.test(c)?r.setProperty(oo(f),c.replace(Qv,""),"important"):r[f]=c}}const e_=["Webkit","Moz","ms"],gm={};function c3(r,a){const c=gm[a];if(c)return c;let f=Ri(a);if(f!=="filter"&&f in r)return gm[a]=f;f=Ml(f);for(let y=0;y<e_.length;y++){const _=e_[y]+f;if(_ in r)return gm[a]=_}return a}const t_="http://www.w3.org/1999/xlink";function p3(r,a,c,f,y){if(f&&a.startsWith("xlink:"))c==null?r.removeAttributeNS(t_,a.slice(6,a.length)):r.setAttributeNS(t_,a,c);else{const _=Mw(a);c==null||_&&!W_(c)?r.removeAttribute(a):r.setAttribute(a,_?"":c)}}function h3(r,a,c,f,y,_,w){if(a==="innerHTML"||a==="textContent"){f&&w(f,y,_),r[a]=c??"";return}const T=r.tagName;if(a==="value"&&T!=="PROGRESS"&&!T.includes("-")){r._value=c;const L=T==="OPTION"?r.getAttribute("value"):r.value,q=c??"";L!==q&&(r.value=q),c==null&&r.removeAttribute(a);return}let k=!1;if(c===""||c==null){const L=typeof r[a];L==="boolean"?c=W_(c):c==null&&L==="string"?(c="",k=!0):L==="number"&&(c=0,k=!0)}try{r[a]=c}catch{}k&&r.removeAttribute(a)}function Va(r,a,c,f){r.addEventListener(a,c,f)}function f3(r,a,c,f){r.removeEventListener(a,c,f)}function d3(r,a,c,f,y=null){const _=r._vei||(r._vei={}),w=_[a];if(f&&w)w.value=f;else{const[T,k]=m3(a);if(f){const L=_[a]=v3(f,y);Va(r,T,L,k)}else w&&(f3(r,T,w,k),_[a]=void 0)}}const r_=/(?:Once|Passive|Capture)$/;function m3(r){let a;if(r_.test(r)){a={};let f;for(;f=r.match(r_);)r=r.slice(0,r.length-f[0].length),a[f[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):oo(r.slice(2)),a]}let ym=0;const g3=Promise.resolve(),y3=()=>ym||(g3.then(()=>ym=0),ym=Date.now());function v3(r,a){const c=f=>{if(!f._vts)f._vts=Date.now();else if(f._vts<=c.attached)return;ao(_3(f,c.value),a,5,[f])};return c.value=r,c.attached=y3(),c}function _3(r,a){if(xt(a)){const c=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{c.call(r),r._stopped=!0},a.map(f=>y=>!y._stopped&&f&&f(y))}else return a}const i_=/^on[a-z]/,x3=(r,a,c,f,y=!1,_,w,T,k)=>{a==="class"?l3(r,f,y):a==="style"?u3(r,c,f):Pl(a)?ig(a)||d3(r,a,c,f,w):(a[0]==="."?(a=a.slice(1),!0):a[0]==="^"?(a=a.slice(1),!1):b3(r,a,f,y))?h3(r,a,f,_,w,T,k):(a==="true-value"?r._trueValue=f:a==="false-value"&&(r._falseValue=f),p3(r,a,f,y))};function b3(r,a,c,f){return f?!!(a==="innerHTML"||a==="textContent"||a in r&&i_.test(a)&&Zt(c)):a==="spellcheck"||a==="draggable"||a==="translate"||a==="form"||a==="list"&&r.tagName==="INPUT"||a==="type"&&r.tagName==="TEXTAREA"||i_.test(a)&&er(c)?!1:a in r}function p1(r,a){const c=Tg(r);class f extends sd{constructor(_){super(c,_,a)}}return f.def=c,f}const w3=r=>p1(r,I1),E3=typeof HTMLElement<"u"?HTMLElement:class{};class sd extends E3{constructor(a,c={},f){super(),this._def=a,this._props=c,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&f?f(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,vg(()=>{this._connected||(Zm(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let f=0;f<this.attributes.length;f++)this._setAttr(this.attributes[f].name);new MutationObserver(f=>{for(const y of f)this._setAttr(y.attributeName)}).observe(this,{attributes:!0});const a=(f,y=!1)=>{const{props:_,styles:w}=f;let T;if(_&&!xt(_))for(const k in _){const L=_[k];(L===Number||L&&L.type===Number)&&(k in this._props&&(this._props[k]=Ef(this._props[k])),(T||(T=Object.create(null)))[Ri(k)]=!0)}this._numberProps=T,y&&this._resolveProps(f),this._applyStyles(w),this._update()},c=this._def.__asyncLoader;c?c().then(f=>a(f,!0)):a(this._def)}_resolveProps(a){const{props:c}=a,f=xt(c)?c:Object.keys(c||{});for(const y of Object.keys(this))y[0]!=="_"&&f.includes(y)&&this._setProp(y,this[y],!0,!1);for(const y of f.map(Ri))Object.defineProperty(this,y,{get(){return this._getProp(y)},set(_){this._setProp(y,_)}})}_setAttr(a){let c=this.getAttribute(a);const f=Ri(a);this._numberProps&&this._numberProps[f]&&(c=Ef(c)),this._setProp(f,c,!1)}_getProp(a){return this._props[a]}_setProp(a,c,f=!0,y=!0){c!==this._props[a]&&(this._props[a]=c,y&&this._instance&&this._update(),f&&(c===!0?this.setAttribute(oo(a),""):typeof c=="string"||typeof c=="number"?this.setAttribute(oo(a),c+""):c||this.removeAttribute(oo(a))))}_update(){Zm(this._createVNode(),this.shadowRoot)}_createVNode(){const a=Vr(this._def,gr({},this._props));return this._instance||(a.ce=c=>{this._instance=c,c.isCE=!0;const f=(_,w)=>{this.dispatchEvent(new CustomEvent(_,{detail:w}))};c.emit=(_,...w)=>{f(_,w),oo(_)!==_&&f(oo(_),w)};let y=this;for(;y=y&&(y.parentNode||y.host);)if(y instanceof sd){c.parent=y._instance,c.provides=y._instance.provides;break}}),a}_applyStyles(a){a&&a.forEach(c=>{const f=document.createElement("style");f.textContent=c,this.shadowRoot.appendChild(f)})}}function S3(r="$style"){{const a=Ga();if(!a)return Br;const c=a.type.__cssModules;if(!c)return Br;const f=c[r];return f||Br}}function T3(r){const a=Ga();if(!a)return;const c=a.ut=(y=r(a.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${a.uid}"]`)).forEach(_=>qm(_,y))},f=()=>{const y=r(a.proxy);jm(a.subTree,y),c(y)};_0(f),Dp(()=>{const y=new MutationObserver(f);y.observe(a.subTree.el.parentNode,{childList:!0}),id(()=>y.disconnect())})}function jm(r,a){if(r.shapeFlag&128){const c=r.suspense;r=c.activeBranch,c.pendingBranch&&!c.isHydrating&&c.effects.push(()=>{jm(c.activeBranch,a)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)qm(r.el,a);else if(r.type===ln)r.children.forEach(c=>jm(c,a));else if(r.type===El){let{el:c,anchor:f}=r;for(;c&&(qm(c,a),c!==f);)c=c.nextSibling}}function qm(r,a){if(r.nodeType===1){const c=r.style;for(const f in a)c.setProperty(`--${f}`,a[f])}}const gs="transition",ep="animation",Rg=(r,{slots:a})=>a1(b0,f1(r),a);Rg.displayName="Transition";const h1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},C3=Rg.props=gr({},Sg,h1),fl=(r,a=[])=>{xt(r)?r.forEach(c=>c(...a)):r&&r(...a)},n_=r=>r?xt(r)?r.some(a=>a.length>1):r.length>1:!1;function f1(r){const a={};for(const ye in r)ye in h1||(a[ye]=r[ye]);if(r.css===!1)return a;const{name:c="v",type:f,duration:y,enterFromClass:_=`${c}-enter-from`,enterActiveClass:w=`${c}-enter-active`,enterToClass:T=`${c}-enter-to`,appearFromClass:k=_,appearActiveClass:L=w,appearToClass:q=T,leaveFromClass:Z=`${c}-leave-from`,leaveActiveClass:ae=`${c}-leave-active`,leaveToClass:ce=`${c}-leave-to`}=r,de=I3(y),Se=de&&de[0],ze=de&&de[1],{onBeforeEnter:he,onEnter:ue,onEnterCancelled:De,onLeave:ve,onLeaveCancelled:je,onBeforeAppear:h=he,onAppear:Me=ue,onAppearCancelled:Y=De}=a,Fe=(ye,mt,et)=>{vs(ye,mt?q:T),vs(ye,mt?L:w),et&&et()},ke=(ye,mt)=>{ye._isLeaving=!1,vs(ye,Z),vs(ye,ce),vs(ye,ae),mt&&mt()},Xe=ye=>(mt,et)=>{const Wt=ye?Me:ue,Dt=()=>Fe(mt,ye,et);fl(Wt,[mt,Dt]),o_(()=>{vs(mt,ye?k:_),Na(mt,ye?q:T),n_(Wt)||a_(mt,f,Se,Dt)})};return gr(a,{onBeforeEnter(ye){fl(he,[ye]),Na(ye,_),Na(ye,w)},onBeforeAppear(ye){fl(h,[ye]),Na(ye,k),Na(ye,L)},onEnter:Xe(!1),onAppear:Xe(!0),onLeave(ye,mt){ye._isLeaving=!0;const et=()=>ke(ye,mt);Na(ye,Z),m1(),Na(ye,ae),o_(()=>{ye._isLeaving&&(vs(ye,Z),Na(ye,ce),n_(ve)||a_(ye,f,ze,et))}),fl(ve,[ye,et])},onEnterCancelled(ye){Fe(ye,!1),fl(De,[ye])},onAppearCancelled(ye){Fe(ye,!0),fl(Y,[ye])},onLeaveCancelled(ye){ke(ye),fl(je,[ye])}})}function I3(r){if(r==null)return null;if(Fr(r))return[vm(r.enter),vm(r.leave)];{const a=vm(r);return[a,a]}}function vm(r){return Ef(r)}function Na(r,a){a.split(/\s+/).forEach(c=>c&&r.classList.add(c)),(r._vtc||(r._vtc=new Set)).add(a)}function vs(r,a){a.split(/\s+/).forEach(f=>f&&r.classList.remove(f));const{_vtc:c}=r;c&&(c.delete(a),c.size||(r._vtc=void 0))}function o_(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let A3=0;function a_(r,a,c,f){const y=r._endId=++A3,_=()=>{y===r._endId&&f()};if(c)return setTimeout(_,c);const{type:w,timeout:T,propCount:k}=d1(r,a);if(!w)return f();const L=w+"end";let q=0;const Z=()=>{r.removeEventListener(L,ae),_()},ae=ce=>{ce.target===r&&++q>=k&&Z()};setTimeout(()=>{q<k&&Z()},T+1),r.addEventListener(L,ae)}function d1(r,a){const c=window.getComputedStyle(r),f=de=>(c[de]||"").split(", "),y=f(`${gs}Delay`),_=f(`${gs}Duration`),w=s_(y,_),T=f(`${ep}Delay`),k=f(`${ep}Duration`),L=s_(T,k);let q=null,Z=0,ae=0;a===gs?w>0&&(q=gs,Z=w,ae=_.length):a===ep?L>0&&(q=ep,Z=L,ae=k.length):(Z=Math.max(w,L),q=Z>0?w>L?gs:ep:null,ae=q?q===gs?_.length:k.length:0);const ce=q===gs&&/\b(transform|all)(,|$)/.test(f(`${gs}Property`).toString());return{type:q,timeout:Z,propCount:ae,hasTransform:ce}}function s_(r,a){for(;r.length<a.length;)r=r.concat(r);return Math.max(...a.map((c,f)=>l_(c)+l_(r[f])))}function l_(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function m1(){return document.body.offsetHeight}const g1=new WeakMap,y1=new WeakMap,v1={name:"TransitionGroup",props:gr({},C3,{tag:String,moveClass:String}),setup(r,{slots:a}){const c=Ga(),f=Eg();let y,_;return td(()=>{if(!y.length)return;const w=r.moveClass||`${r.name||"v"}-move`;if(!D3(y[0].el,c.vnode.el,w))return;y.forEach(z3),y.forEach(M3);const T=y.filter(L3);m1(),T.forEach(k=>{const L=k.el,q=L.style;Na(L,w),q.transform=q.webkitTransform=q.transitionDuration="";const Z=L._moveCb=ae=>{ae&&ae.target!==L||(!ae||/transform$/.test(ae.propertyName))&&(L.removeEventListener("transitionend",Z),L._moveCb=null,vs(L,w))};L.addEventListener("transitionend",Z)})}),()=>{const w=yr(r),T=f1(w);let k=w.tag||ln;y=_,_=a.default?Qf(a.default()):[];for(let L=0;L<_.length;L++){const q=_[L];q.key!=null&&Cl(q,Gu(q,T,f,c))}if(y)for(let L=0;L<y.length;L++){const q=y[L];Cl(q,Gu(q,T,f,c)),g1.set(q,q.el.getBoundingClientRect())}return Vr(k,null,_)}}},k3=r=>delete r.mode;v1.props;const P3=v1;function z3(r){const a=r.el;a._moveCb&&a._moveCb(),a._enterCb&&a._enterCb()}function M3(r){y1.set(r,r.el.getBoundingClientRect())}function L3(r){const a=g1.get(r),c=y1.get(r),f=a.left-c.left,y=a.top-c.top;if(f||y){const _=r.el.style;return _.transform=_.webkitTransform=`translate(${f}px,${y}px)`,_.transitionDuration="0s",r}}function D3(r,a,c){const f=r.cloneNode();r._vtc&&r._vtc.forEach(w=>{w.split(/\s+/).forEach(T=>T&&f.classList.remove(T))}),c.split(/\s+/).forEach(w=>w&&f.classList.add(w)),f.style.display="none";const y=a.nodeType===1?a:a.parentNode;y.appendChild(f);const{hasTransform:_}=d1(f);return y.removeChild(f),_}const As=r=>{const a=r.props["onUpdate:modelValue"]||!1;return xt(a)?c=>Vu(a,c):a};function R3(r){r.target.composing=!0}function u_(r){const a=r.target;a.composing&&(a.composing=!1,a.dispatchEvent(new Event("input")))}const kf={created(r,{modifiers:{lazy:a,trim:c,number:f}},y){r._assign=As(y);const _=f||y.props&&y.props.type==="number";Va(r,a?"change":"input",w=>{if(w.target.composing)return;let T=r.value;c&&(T=T.trim()),_&&(T=wf(T)),r._assign(T)}),c&&Va(r,"change",()=>{r.value=r.value.trim()}),a||(Va(r,"compositionstart",R3),Va(r,"compositionend",u_),Va(r,"change",u_))},mounted(r,{value:a}){r.value=a??""},beforeUpdate(r,{value:a,modifiers:{lazy:c,trim:f,number:y}},_){if(r._assign=As(_),r.composing||document.activeElement===r&&r.type!=="range"&&(c||f&&r.value.trim()===a||(y||r.type==="number")&&wf(r.value)===a))return;const w=a??"";r.value!==w&&(r.value=w)}},Og={deep:!0,created(r,a,c){r._assign=As(c),Va(r,"change",()=>{const f=r._modelValue,y=Ku(r),_=r.checked,w=r._assign;if(xt(f)){const T=qf(f,y),k=T!==-1;if(_&&!k)w(f.concat(y));else if(!_&&k){const L=[...f];L.splice(T,1),w(L)}}else if(zl(f)){const T=new Set(f);_?T.add(y):T.delete(y),w(T)}else w(x1(r,_))})},mounted:c_,beforeUpdate(r,a,c){r._assign=As(c),c_(r,a,c)}};function c_(r,{value:a,oldValue:c},f){r._modelValue=a,xt(a)?r.checked=qf(a,f.props.value)>-1:zl(a)?r.checked=a.has(f.props.value):a!==c&&(r.checked=Ss(a,x1(r,!0)))}const Bg={created(r,{value:a},c){r.checked=Ss(a,c.props.value),r._assign=As(c),Va(r,"change",()=>{r._assign(Ku(r))})},beforeUpdate(r,{value:a,oldValue:c},f){r._assign=As(f),a!==c&&(r.checked=Ss(a,f.props.value))}},_1={deep:!0,created(r,{value:a,modifiers:{number:c}},f){const y=zl(a);Va(r,"change",()=>{const _=Array.prototype.filter.call(r.options,w=>w.selected).map(w=>c?wf(Ku(w)):Ku(w));r._assign(r.multiple?y?new Set(_):_:_[0])}),r._assign=As(f)},mounted(r,{value:a}){p_(r,a)},beforeUpdate(r,a,c){r._assign=As(c)},updated(r,{value:a}){p_(r,a)}};function p_(r,a){const c=r.multiple;if(!(c&&!xt(a)&&!zl(a))){for(let f=0,y=r.options.length;f<y;f++){const _=r.options[f],w=Ku(_);if(c)xt(a)?_.selected=qf(a,w)>-1:_.selected=a.has(w);else if(Ss(Ku(_),a)){r.selectedIndex!==f&&(r.selectedIndex=f);return}}!c&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function Ku(r){return"_value"in r?r._value:r.value}function x1(r,a){const c=a?"_trueValue":"_falseValue";return c in r?r[c]:a}const b1={created(r,a,c){lf(r,a,c,null,"created")},mounted(r,a,c){lf(r,a,c,null,"mounted")},beforeUpdate(r,a,c,f){lf(r,a,c,f,"beforeUpdate")},updated(r,a,c,f){lf(r,a,c,f,"updated")}};function w1(r,a){switch(r){case"SELECT":return _1;case"TEXTAREA":return kf;default:switch(a){case"checkbox":return Og;case"radio":return Bg;default:return kf}}}function lf(r,a,c,f,y){const w=w1(r.tagName,c.props&&c.props.type)[y];w&&w(r,a,c,f)}function O3(){kf.getSSRProps=({value:r})=>({value:r}),Bg.getSSRProps=({value:r},a)=>{if(a.props&&Ss(a.props.value,r))return{checked:!0}},Og.getSSRProps=({value:r},a)=>{if(xt(r)){if(a.props&&qf(r,a.props.value)>-1)return{checked:!0}}else if(zl(r)){if(a.props&&r.has(a.props.value))return{checked:!0}}else if(r)return{checked:!0}},b1.getSSRProps=(r,a)=>{if(typeof a.type!="string")return;const c=w1(a.type.toUpperCase(),a.props&&a.props.type);if(c.getSSRProps)return c.getSSRProps(r,a)}}const B3=["ctrl","shift","alt","meta"],F3={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,a)=>B3.some(c=>r[`${c}Key`]&&!a.includes(c))},N3=(r,a)=>(c,...f)=>{for(let y=0;y<a.length;y++){const _=F3[a[y]];if(_&&_(c,a))return}return r(c,...f)},U3={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},V3=(r,a)=>c=>{if(!("key"in c))return;const f=oo(c.key);if(a.some(y=>y===f||U3[y]===f))return r(c)},E1={beforeMount(r,{value:a},{transition:c}){r._vod=r.style.display==="none"?"":r.style.display,c&&a?c.beforeEnter(r):tp(r,a)},mounted(r,{value:a},{transition:c}){c&&a&&c.enter(r)},updated(r,{value:a,oldValue:c},{transition:f}){!a!=!c&&(f?a?(f.beforeEnter(r),tp(r,!0),f.enter(r)):f.leave(r,()=>{tp(r,!1)}):tp(r,a))},beforeUnmount(r,{value:a}){tp(r,a)}};function tp(r,a){r.style.display=a?r._vod:"none"}function j3(){E1.getSSRProps=({value:r})=>{if(!r)return{style:{display:"none"}}}}const S1=gr({patchProp:x3},s3);let pp,h_=!1;function T1(){return pp||(pp=Z0(S1))}function C1(){return pp=h_?pp:H0(S1),h_=!0,pp}const Zm=(...r)=>{T1().render(...r)},I1=(...r)=>{C1().hydrate(...r)},A1=(...r)=>{const a=T1().createApp(...r),{mount:c}=a;return a.mount=f=>{const y=k1(f);if(!y)return;const _=a._component;!Zt(_)&&!_.render&&!_.template&&(_.template=y.innerHTML),y.innerHTML="";const w=c(y,!1,y instanceof SVGElement);return y instanceof Element&&(y.removeAttribute("v-cloak"),y.setAttribute("data-v-app","")),w},a},q3=(...r)=>{const a=C1().createApp(...r),{mount:c}=a;return a.mount=f=>{const y=k1(f);if(y)return c(y,!0,y instanceof SVGElement)},a};function k1(r){return er(r)?document.querySelector(r):r}let f_=!1;const Z3=()=>{f_||(f_=!0,O3(),j3())},H3=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:b0,BaseTransitionPropsValidators:Sg,Comment:bn,EffectScope:sg,Fragment:ln,KeepAlive:tE,ReactiveEffect:zp,Static:El,Suspense:j2,Teleport:qE,Text:Il,Transition:Rg,TransitionGroup:P3,VueElement:sd,assertNumber:A2,callWithAsyncErrorHandling:ao,callWithErrorHandling:ja,camelize:Ri,capitalize:Ml,cloneVNode:ca,compatUtils:o3,computed:o1,createApp:A1,createBlock:zg,createCommentVNode:WE,createElementBlock:nd,createElementVNode:Oo,createHydrationRenderer:H0,createPropsRestProxy:EE,createRenderer:Z0,createSSRApp:q3,createSlots:sE,createStaticVNode:GE,createTextVNode:Mg,createVNode:Vr,customRef:x2,defineAsyncComponent:Q2,defineComponent:Tg,defineCustomElement:p1,defineEmits:hE,defineExpose:fE,defineModel:gE,defineOptions:dE,defineProps:pE,defineSSRCustomElement:w3,defineSlots:mE,get devtools(){return Ou},effect:Nw,effectScope:Rw,getCurrentInstance:Ga,getCurrentScope:X_,getTransitionRawChildren:Qf,guardReactiveProps:J0,h:a1,handleError:Ll,hasInjectionContext:ME,hydrate:I1,initCustomFormatter:e3,initDirectivesForSSR:Z3,inject:lp,isMemoSame:u1,isProxy:pg,isReactive:xl,isReadonly:Tl,isRef:Ui,isRuntimeOnly:JE,isShallow:dp,isVNode:Cs,markRaw:hg,mergeDefaults:bE,mergeModels:wE,mergeProps:Y0,nextTick:vg,normalizeClass:Pp,normalizeProps:Sw,normalizeStyle:kp,onActivated:E0,onBeforeMount:C0,onBeforeUnmount:rd,onBeforeUpdate:I0,onDeactivated:S0,onErrorCaptured:z0,onMounted:Dp,onRenderTracked:P0,onRenderTriggered:k0,onScopeDispose:Ow,onServerPrefetch:A0,onUnmounted:id,onUpdated:td,openBlock:Dl,popScopeId:R2,provide:F0,proxyRefs:gg,pushScopeId:D2,queuePostFlushCb:_g,reactive:Wf,readonly:cg,ref:ju,registerRuntimeCompiler:r1,render:Zm,renderList:aE,renderSlot:lE,resolveComponent:M0,resolveDirective:oE,resolveDynamicComponent:nE,resolveFilter:n3,resolveTransitionHooks:Gu,setBlockTracking:Bm,setDevtoolsHook:m0,setTransitionHooks:Cl,shallowReactive:u0,shallowReadonly:f2,shallowRef:d2,ssrContextKey:s1,ssrUtils:i3,stop:Uw,toDisplayString:Dw,toHandlerKey:Uu,toHandlers:uE,toRaw:yr,toRef:S2,toRefs:b2,toValue:y2,transformVNodeArgs:ZE,triggerRef:g2,unref:mg,useAttrs:_E,useCssModule:S3,useCssVars:T3,useModel:xE,useSSRContext:l1,useSlots:vE,useTransitionState:Eg,vModelCheckbox:Og,vModelDynamic:b1,vModelRadio:Bg,vModelSelect:_1,vModelText:kf,vShow:E1,version:c1,warn:I2,watch:bl,watchEffect:K2,watchPostEffect:_0,watchSyncEffect:$2,withAsyncContext:SE,withCtx:xg,withDefaults:yE,withDirectives:J2,withKeys:V3,withMemo:t3,withModifiers:N3,withScopeId:O2},Symbol.toStringTag,{value:"Module"}));function Fg(r){throw r}function P1(r){}function ii(r,a,c,f){const y=r,_=new SyntaxError(String(y));return _.code=r,_.loc=a,_}const wp=Symbol(""),hp=Symbol(""),Ng=Symbol(""),Pf=Symbol(""),z1=Symbol(""),kl=Symbol(""),M1=Symbol(""),L1=Symbol(""),Ug=Symbol(""),Vg=Symbol(""),Rp=Symbol(""),jg=Symbol(""),D1=Symbol(""),qg=Symbol(""),zf=Symbol(""),Zg=Symbol(""),Hg=Symbol(""),Gg=Symbol(""),Wg=Symbol(""),R1=Symbol(""),O1=Symbol(""),ld=Symbol(""),Mf=Symbol(""),Kg=Symbol(""),$g=Symbol(""),Ep=Symbol(""),Op=Symbol(""),Xg=Symbol(""),Hm=Symbol(""),G3=Symbol(""),Gm=Symbol(""),Lf=Symbol(""),W3=Symbol(""),K3=Symbol(""),Jg=Symbol(""),$3=Symbol(""),X3=Symbol(""),Yg=Symbol(""),B1=Symbol(""),$u={[wp]:"Fragment",[hp]:"Teleport",[Ng]:"Suspense",[Pf]:"KeepAlive",[z1]:"BaseTransition",[kl]:"openBlock",[M1]:"createBlock",[L1]:"createElementBlock",[Ug]:"createVNode",[Vg]:"createElementVNode",[Rp]:"createCommentVNode",[jg]:"createTextVNode",[D1]:"createStaticVNode",[qg]:"resolveComponent",[zf]:"resolveDynamicComponent",[Zg]:"resolveDirective",[Hg]:"resolveFilter",[Gg]:"withDirectives",[Wg]:"renderList",[R1]:"renderSlot",[O1]:"createSlots",[ld]:"toDisplayString",[Mf]:"mergeProps",[Kg]:"normalizeClass",[$g]:"normalizeStyle",[Ep]:"normalizeProps",[Op]:"guardReactiveProps",[Xg]:"toHandlers",[Hm]:"camelize",[G3]:"capitalize",[Gm]:"toHandlerKey",[Lf]:"setBlockTracking",[W3]:"pushScopeId",[K3]:"popScopeId",[Jg]:"withCtx",[$3]:"unref",[X3]:"isRef",[Yg]:"withMemo",[B1]:"isMemoSame"};function J3(r){Object.getOwnPropertySymbols(r).forEach(a=>{$u[a]=r[a]})}const lo={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Y3(r,a=lo){return{type:0,children:r,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:a}}function Sp(r,a,c,f,y,_,w,T=!1,k=!1,L=!1,q=lo){return r&&(T?(r.helper(kl),r.helper(Yu(r.inSSR,L))):r.helper(Ju(r.inSSR,L)),w&&r.helper(Gg)),{type:13,tag:a,props:c,children:f,patchFlag:y,dynamicProps:_,directives:w,isBlock:T,disableTracking:k,isComponent:L,loc:q}}function Bp(r,a=lo){return{type:17,loc:a,elements:r}}function xo(r,a=lo){return{type:15,loc:a,properties:r}}function _i(r,a){return{type:16,loc:lo,key:er(r)?sr(r,!0):r,value:a}}function sr(r,a=!1,c=lo,f=0){return{type:4,loc:c,content:r,isStatic:a,constType:a?3:f}}function Bo(r,a=lo){return{type:8,loc:a,children:r}}function Li(r,a=[],c=lo){return{type:14,loc:c,callee:r,arguments:a}}function Xu(r,a=void 0,c=!1,f=!1,y=lo){return{type:18,params:r,returns:a,newline:c,isSlot:f,loc:y}}function Wm(r,a,c,f=!0){return{type:19,test:r,consequent:a,alternate:c,newline:f,loc:lo}}function Q3(r,a,c=!1){return{type:20,index:r,value:a,isVNode:c,loc:lo}}function eS(r){return{type:21,body:r,loc:lo}}function Ju(r,a){return r||a?Ug:Vg}function Yu(r,a){return r||a?M1:L1}function Qg(r,{helper:a,removeHelper:c,inSSR:f}){r.isBlock||(r.isBlock=!0,c(Ju(f,r.isComponent)),a(kl),a(Yu(f,r.isComponent)))}const Hn=r=>r.type===4&&r.isStatic,Bu=(r,a)=>r===a||r===oo(a);function F1(r){if(Bu(r,"Teleport"))return hp;if(Bu(r,"Suspense"))return Ng;if(Bu(r,"KeepAlive"))return Pf;if(Bu(r,"BaseTransition"))return z1}const tS=/^\d|[^\$\w]/,ey=r=>!tS.test(r),rS=/[A-Za-z_$\xA0-\uFFFF]/,iS=/[\.\?\w$\xA0-\uFFFF]/,nS=/\s+[.[]\s*|\s*[.[]\s+/g,oS=r=>{r=r.trim().replace(nS,w=>w.trim());let a=0,c=[],f=0,y=0,_=null;for(let w=0;w<r.length;w++){const T=r.charAt(w);switch(a){case 0:if(T==="[")c.push(a),a=1,f++;else if(T==="(")c.push(a),a=2,y++;else if(!(w===0?rS:iS).test(T))return!1;break;case 1:T==="'"||T==='"'||T==="`"?(c.push(a),a=3,_=T):T==="["?f++:T==="]"&&(--f||(a=c.pop()));break;case 2:if(T==="'"||T==='"'||T==="`")c.push(a),a=3,_=T;else if(T==="(")y++;else if(T===")"){if(w===r.length-1)return!1;--y||(a=c.pop())}break;case 3:T===_&&(a=c.pop(),_=null);break}}return!f&&!y},N1=oS;function U1(r,a,c){const y={source:r.source.slice(a,a+c),start:Df(r.start,r.source,a),end:r.end};return c!=null&&(y.end=Df(r.start,r.source,a+c)),y}function Df(r,a,c=a.length){return Rf(gr({},r),a,c)}function Rf(r,a,c=a.length){let f=0,y=-1;for(let _=0;_<c;_++)a.charCodeAt(_)===10&&(f++,y=_);return r.offset+=c,r.line+=f,r.column=y===-1?r.column+c:c-y,r}function _o(r,a,c=!1){for(let f=0;f<r.props.length;f++){const y=r.props[f];if(y.type===7&&(c||y.exp)&&(er(a)?y.name===a:a.test(y.name)))return y}}function ud(r,a,c=!1,f=!1){for(let y=0;y<r.props.length;y++){const _=r.props[y];if(_.type===6){if(c)continue;if(_.name===a&&(_.value||f))return _}else if(_.name==="bind"&&(_.exp||f)&&yl(_.arg,a))return _}}function yl(r,a){return!!(r&&Hn(r)&&r.content===a)}function aS(r){return r.props.some(a=>a.type===7&&a.name==="bind"&&(!a.arg||a.arg.type!==4||!a.arg.isStatic))}function _m(r){return r.type===5||r.type===2}function sS(r){return r.type===7&&r.name==="slot"}function Of(r){return r.type===1&&r.tagType===3}function Bf(r){return r.type===1&&r.tagType===2}const lS=new Set([Ep,Op]);function V1(r,a=[]){if(r&&!er(r)&&r.type===14){const c=r.callee;if(!er(c)&&lS.has(c))return V1(r.arguments[0],a.concat(r))}return[r,a]}function Ff(r,a,c){let f,y=r.type===13?r.props:r.arguments[2],_=[],w;if(y&&!er(y)&&y.type===14){const T=V1(y);y=T[0],_=T[1],w=_[_.length-1]}if(y==null||er(y))f=xo([a]);else if(y.type===14){const T=y.arguments[0];!er(T)&&T.type===15?d_(a,T)||T.properties.unshift(a):y.callee===Xg?f=Li(c.helper(Mf),[xo([a]),y]):y.arguments.unshift(xo([a])),!f&&(f=y)}else y.type===15?(d_(a,y)||y.properties.unshift(a),f=y):(f=Li(c.helper(Mf),[xo([a]),y]),w&&w.callee===Op&&(w=_[_.length-2]));r.type===13?w?w.arguments[0]=f:r.props=f:w?w.arguments[0]=f:r.arguments[2]=f}function d_(r,a){let c=!1;if(r.key.type===4){const f=r.key.content;c=a.properties.some(y=>y.key.type===4&&y.key.content===f)}return c}function Tp(r,a){return`_${a}_${r.replace(/[^\w]/g,(c,f)=>c==="-"?"_":r.charCodeAt(f).toString())}`}function uS(r){return r.type===14&&r.callee===Yg?r.arguments[1].returns:r}function m_(r,a){const c=a.options?a.options.compatConfig:a.compatConfig,f=c&&c[r];return r==="MODE"?f||3:f}function Sl(r,a){const c=m_("MODE",a),f=m_(r,a);return c===3?f===!0:f!==!1}function Cp(r,a,c,...f){return Sl(r,a)}const cS=/&(gt|lt|amp|apos|quot);/g,pS={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},g_={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:hf,isPreTag:hf,isCustomElement:hf,decodeEntities:r=>r.replace(cS,(a,c)=>pS[c]),onError:Fg,onWarn:P1,comments:!1};function hS(r,a={}){const c=fS(r,a),f=so(c);return Y3(ty(c,0,[]),Eo(c,f))}function fS(r,a){const c=gr({},g_);let f;for(f in a)c[f]=a[f]===void 0?g_[f]:a[f];return{options:c,column:1,line:1,offset:0,originalSource:r,source:r,inPre:!1,inVPre:!1,onWarn:c.onWarn}}function ty(r,a,c){const f=cd(c),y=f?f.ns:0,_=[];for(;!wS(r,a,c);){const T=r.source;let k;if(a===0||a===1){if(!r.inVPre&&xn(T,r.options.delimiters[0]))k=xS(r,a);else if(a===0&&T[0]==="<")if(T.length===1)Or(r,5,1);else if(T[1]==="!")xn(T,"<!--")?k=mS(r):xn(T,"<!DOCTYPE")?k=rp(r):xn(T,"<![CDATA[")?y!==0?k=dS(r,c):(Or(r,1),k=rp(r)):(Or(r,11),k=rp(r));else if(T[1]==="/")if(T.length===2)Or(r,5,2);else if(T[2]===">"){Or(r,14,2),Vi(r,3);continue}else if(/[a-z]/i.test(T[2])){Or(r,23),Km(r,Nf.End,f);continue}else Or(r,12,2),k=rp(r);else/[a-z]/i.test(T[1])?(k=gS(r,c),Sl("COMPILER_NATIVE_TEMPLATE",r)&&k&&k.tag==="template"&&!k.props.some(L=>L.type===7&&j1(L.name))&&(k=k.children)):T[1]==="?"?(Or(r,21,1),k=rp(r)):Or(r,12,1)}if(k||(k=bS(r,a)),xt(k))for(let L=0;L<k.length;L++)y_(_,k[L]);else y_(_,k)}let w=!1;if(a!==2&&a!==1){const T=r.options.whitespace!=="preserve";for(let k=0;k<_.length;k++){const L=_[k];if(L.type===2)if(r.inPre)L.content=L.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(L.content))T&&(L.content=L.content.replace(/[\t\r\n\f ]+/g," "));else{const q=_[k-1],Z=_[k+1];!q||!Z||T&&(q.type===3&&Z.type===3||q.type===3&&Z.type===1||q.type===1&&Z.type===3||q.type===1&&Z.type===1&&/[\r\n]/.test(L.content))?(w=!0,_[k]=null):L.content=" "}else L.type===3&&!r.options.comments&&(w=!0,_[k]=null)}if(r.inPre&&f&&r.options.isPreTag(f.tag)){const k=_[0];k&&k.type===2&&(k.content=k.content.replace(/^\r?\n/,""))}}return w?_.filter(Boolean):_}function y_(r,a){if(a.type===2){const c=cd(r);if(c&&c.type===2&&c.loc.end.offset===a.loc.start.offset){c.content+=a.content,c.loc.end=a.loc.end,c.loc.source+=a.loc.source;return}}r.push(a)}function dS(r,a){Vi(r,9);const c=ty(r,3,a);return r.source.length===0?Or(r,6):Vi(r,3),c}function mS(r){const a=so(r);let c;const f=/--(\!)?>/.exec(r.source);if(!f)c=r.source.slice(4),Vi(r,r.source.length),Or(r,7);else{f.index<=3&&Or(r,0),f[1]&&Or(r,10),c=r.source.slice(4,f.index);const y=r.source.slice(0,f.index);let _=1,w=0;for(;(w=y.indexOf("<!--",_))!==-1;)Vi(r,w-_+1),w+4<y.length&&Or(r,16),_=w+1;Vi(r,f.index+f[0].length-_+1)}return{type:3,content:c,loc:Eo(r,a)}}function rp(r){const a=so(r),c=r.source[1]==="?"?1:2;let f;const y=r.source.indexOf(">");return y===-1?(f=r.source.slice(c),Vi(r,r.source.length)):(f=r.source.slice(c,y),Vi(r,y+1)),{type:3,content:f,loc:Eo(r,a)}}function gS(r,a){const c=r.inPre,f=r.inVPre,y=cd(a),_=Km(r,Nf.Start,y),w=r.inPre&&!c,T=r.inVPre&&!f;if(_.isSelfClosing||r.options.isVoidTag(_.tag))return w&&(r.inPre=!1),T&&(r.inVPre=!1),_;a.push(_);const k=r.options.getTextMode(_,y),L=ty(r,k,a);a.pop();{const q=_.props.find(Z=>Z.type===6&&Z.name==="inline-template");if(q&&Cp("COMPILER_INLINE_TEMPLATE",r,q.loc)){const Z=Eo(r,_.loc.end);q.value={type:2,content:Z.source,loc:Z}}}if(_.children=L,$m(r.source,_.tag))Km(r,Nf.End,y);else if(Or(r,24,0,_.loc.start),r.source.length===0&&_.tag.toLowerCase()==="script"){const q=L[0];q&&xn(q.loc.source,"<!--")&&Or(r,8)}return _.loc=Eo(r,_.loc.start),w&&(r.inPre=!1),T&&(r.inVPre=!1),_}var Nf=(r=>(r[r.Start=0]="Start",r[r.End=1]="End",r))(Nf||{});const j1=Wn("if,else,else-if,for,slot");function Km(r,a,c){const f=so(r),y=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(r.source),_=y[1],w=r.options.getNamespace(_,c);Vi(r,y[0].length),Ip(r);const T=so(r),k=r.source;r.options.isPreTag(_)&&(r.inPre=!0);let L=v_(r,a);a===0&&!r.inVPre&&L.some(ae=>ae.type===7&&ae.name==="pre")&&(r.inVPre=!0,gr(r,T),r.source=k,L=v_(r,a).filter(ae=>ae.name!=="v-pre"));let q=!1;if(r.source.length===0?Or(r,9):(q=xn(r.source,"/>"),a===1&&q&&Or(r,4),Vi(r,q?2:1)),a===1)return;let Z=0;return r.inVPre||(_==="slot"?Z=2:_==="template"?L.some(ae=>ae.type===7&&j1(ae.name))&&(Z=3):yS(_,L,r)&&(Z=1)),{type:1,ns:w,tag:_,tagType:Z,props:L,isSelfClosing:q,children:[],loc:Eo(r,f),codegenNode:void 0}}function yS(r,a,c){const f=c.options;if(f.isCustomElement(r))return!1;if(r==="component"||/^[A-Z]/.test(r)||F1(r)||f.isBuiltInComponent&&f.isBuiltInComponent(r)||f.isNativeTag&&!f.isNativeTag(r))return!0;for(let y=0;y<a.length;y++){const _=a[y];if(_.type===6){if(_.name==="is"&&_.value){if(_.value.content.startsWith("vue:"))return!0;if(Cp("COMPILER_IS_ON_ELEMENT",c,_.loc))return!0}}else{if(_.name==="is")return!0;if(_.name==="bind"&&yl(_.arg,"is")&&Cp("COMPILER_IS_ON_ELEMENT",c,_.loc))return!0}}}function v_(r,a){const c=[],f=new Set;for(;r.source.length>0&&!xn(r.source,">")&&!xn(r.source,"/>");){if(xn(r.source,"/")){Or(r,22),Vi(r,1),Ip(r);continue}a===1&&Or(r,3);const y=vS(r,f);y.type===6&&y.value&&y.name==="class"&&(y.value.content=y.value.content.replace(/\s+/g," ").trim()),a===0&&c.push(y),/^[^\t\r\n\f />]/.test(r.source)&&Or(r,15),Ip(r)}return c}function vS(r,a){var c;const f=so(r),_=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(r.source)[0];a.has(_)&&Or(r,2),a.add(_),_[0]==="="&&Or(r,19);{const k=/["'<]/g;let L;for(;L=k.exec(_);)Or(r,17,L.index)}Vi(r,_.length);let w;/^[\t\r\n\f ]*=/.test(r.source)&&(Ip(r),Vi(r,1),Ip(r),w=_S(r),w||Or(r,13));const T=Eo(r,f);if(!r.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(_)){const k=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(_);let L=xn(_,"."),q=k[1]||(L||xn(_,":")?"bind":xn(_,"@")?"on":"slot"),Z;if(k[2]){const ce=q==="slot",de=_.lastIndexOf(k[2],_.length-(((c=k[3])==null?void 0:c.length)||0)),Se=Eo(r,__(r,f,de),__(r,f,de+k[2].length+(ce&&k[3]||"").length));let ze=k[2],he=!0;ze.startsWith("[")?(he=!1,ze.endsWith("]")?ze=ze.slice(1,ze.length-1):(Or(r,27),ze=ze.slice(1))):ce&&(ze+=k[3]||""),Z={type:4,content:ze,isStatic:he,constType:he?3:0,loc:Se}}if(w&&w.isQuoted){const ce=w.loc;ce.start.offset++,ce.start.column++,ce.end=Df(ce.start,w.content),ce.source=ce.source.slice(1,-1)}const ae=k[3]?k[3].slice(1).split("."):[];return L&&ae.push("prop"),q==="bind"&&Z&&ae.includes("sync")&&Cp("COMPILER_V_BIND_SYNC",r,T,Z.loc.source)&&(q="model",ae.splice(ae.indexOf("sync"),1)),{type:7,name:q,exp:w&&{type:4,content:w.content,isStatic:!1,constType:0,loc:w.loc},arg:Z,modifiers:ae,loc:T}}return!r.inVPre&&xn(_,"v-")&&Or(r,26),{type:6,name:_,value:w&&{type:2,content:w.content,loc:w.loc},loc:T}}function _S(r){const a=so(r);let c;const f=r.source[0],y=f==='"'||f==="'";if(y){Vi(r,1);const _=r.source.indexOf(f);_===-1?c=fp(r,r.source.length,4):(c=fp(r,_,4),Vi(r,1))}else{const _=/^[^\t\r\n\f >]+/.exec(r.source);if(!_)return;const w=/["'<=`]/g;let T;for(;T=w.exec(_[0]);)Or(r,18,T.index);c=fp(r,_[0].length,4)}return{content:c,isQuoted:y,loc:Eo(r,a)}}function xS(r,a){const[c,f]=r.options.delimiters,y=r.source.indexOf(f,c.length);if(y===-1){Or(r,25);return}const _=so(r);Vi(r,c.length);const w=so(r),T=so(r),k=y-c.length,L=r.source.slice(0,k),q=fp(r,k,a),Z=q.trim(),ae=q.indexOf(Z);ae>0&&Rf(w,L,ae);const ce=k-(q.length-Z.length-ae);return Rf(T,L,ce),Vi(r,f.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:Z,loc:Eo(r,w,T)},loc:Eo(r,_)}}function bS(r,a){const c=a===3?["]]>"]:["<",r.options.delimiters[0]];let f=r.source.length;for(let w=0;w<c.length;w++){const T=r.source.indexOf(c[w],1);T!==-1&&f>T&&(f=T)}const y=so(r);return{type:2,content:fp(r,f,a),loc:Eo(r,y)}}function fp(r,a,c){const f=r.source.slice(0,a);return Vi(r,a),c===2||c===3||!f.includes("&")?f:r.options.decodeEntities(f,c===4)}function so(r){const{column:a,line:c,offset:f}=r;return{column:a,line:c,offset:f}}function Eo(r,a,c){return c=c||so(r),{start:a,end:c,source:r.originalSource.slice(a.offset,c.offset)}}function cd(r){return r[r.length-1]}function xn(r,a){return r.startsWith(a)}function Vi(r,a){const{source:c}=r;Rf(r,c,a),r.source=c.slice(a)}function Ip(r){const a=/^[\t\r\n\f ]+/.exec(r.source);a&&Vi(r,a[0].length)}function __(r,a,c){return Df(a,r.originalSource.slice(a.offset,c),c)}function Or(r,a,c,f=so(r)){c&&(f.offset+=c,f.column+=c),r.options.onError(ii(a,{start:f,end:f,source:""}))}function wS(r,a,c){const f=r.source;switch(a){case 0:if(xn(f,"</")){for(let y=c.length-1;y>=0;--y)if($m(f,c[y].tag))return!0}break;case 1:case 2:{const y=cd(c);if(y&&$m(f,y.tag))return!0;break}case 3:if(xn(f,"]]>"))return!0;break}return!f}function $m(r,a){return xn(r,"</")&&r.slice(2,2+a.length).toLowerCase()===a.toLowerCase()&&/[\t\r\n\f />]/.test(r[2+a.length]||">")}function ES(r,a){mf(r,a,q1(r,r.children[0]))}function q1(r,a){const{children:c}=r;return c.length===1&&a.type===1&&!Bf(a)}function mf(r,a,c=!1){const{children:f}=r,y=f.length;let _=0;for(let w=0;w<f.length;w++){const T=f[w];if(T.type===1&&T.tagType===0){const k=c?0:bo(T,a);if(k>0){if(k>=2){T.codegenNode.patchFlag="-1",T.codegenNode=a.hoist(T.codegenNode),_++;continue}}else{const L=T.codegenNode;if(L.type===13){const q=W1(L);if((!q||q===512||q===1)&&H1(T,a)>=2){const Z=G1(T);Z&&(L.props=a.hoist(Z))}L.dynamicProps&&(L.dynamicProps=a.hoist(L.dynamicProps))}}}if(T.type===1){const k=T.tagType===1;k&&a.scopes.vSlot++,mf(T,a),k&&a.scopes.vSlot--}else if(T.type===11)mf(T,a,T.children.length===1);else if(T.type===9)for(let k=0;k<T.branches.length;k++)mf(T.branches[k],a,T.branches[k].children.length===1)}_&&a.transformHoist&&a.transformHoist(f,a,r),_&&_===y&&r.type===1&&r.tagType===0&&r.codegenNode&&r.codegenNode.type===13&&xt(r.codegenNode.children)&&(r.codegenNode.children=a.hoist(Bp(r.codegenNode.children)))}function bo(r,a){const{constantCache:c}=a;switch(r.type){case 1:if(r.tagType!==0)return 0;const f=c.get(r);if(f!==void 0)return f;const y=r.codegenNode;if(y.type!==13||y.isBlock&&r.tag!=="svg"&&r.tag!=="foreignObject")return 0;if(W1(y))return c.set(r,0),0;{let T=3;const k=H1(r,a);if(k===0)return c.set(r,0),0;k<T&&(T=k);for(let L=0;L<r.children.length;L++){const q=bo(r.children[L],a);if(q===0)return c.set(r,0),0;q<T&&(T=q)}if(T>1)for(let L=0;L<r.props.length;L++){const q=r.props[L];if(q.type===7&&q.name==="bind"&&q.exp){const Z=bo(q.exp,a);if(Z===0)return c.set(r,0),0;Z<T&&(T=Z)}}if(y.isBlock){for(let L=0;L<r.props.length;L++)if(r.props[L].type===7)return c.set(r,0),0;a.removeHelper(kl),a.removeHelper(Yu(a.inSSR,y.isComponent)),y.isBlock=!1,a.helper(Ju(a.inSSR,y.isComponent))}return c.set(r,T),T}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return bo(r.content,a);case 4:return r.constType;case 8:let w=3;for(let T=0;T<r.children.length;T++){const k=r.children[T];if(er(k)||Es(k))continue;const L=bo(k,a);if(L===0)return 0;L<w&&(w=L)}return w;default:return 0}}const SS=new Set([Kg,$g,Ep,Op]);function Z1(r,a){if(r.type===14&&!er(r.callee)&&SS.has(r.callee)){const c=r.arguments[0];if(c.type===4)return bo(c,a);if(c.type===14)return Z1(c,a)}return 0}function H1(r,a){let c=3;const f=G1(r);if(f&&f.type===15){const{properties:y}=f;for(let _=0;_<y.length;_++){const{key:w,value:T}=y[_],k=bo(w,a);if(k===0)return k;k<c&&(c=k);let L;if(T.type===4?L=bo(T,a):T.type===14?L=Z1(T,a):L=0,L===0)return L;L<c&&(c=L)}}return c}function G1(r){const a=r.codegenNode;if(a.type===13)return a.props}function W1(r){const a=r.patchFlag;return a?parseInt(a,10):void 0}function TS(r,{filename:a="",prefixIdentifiers:c=!1,hoistStatic:f=!1,cacheHandlers:y=!1,nodeTransforms:_=[],directiveTransforms:w={},transformHoist:T=null,isBuiltInComponent:k=zn,isCustomElement:L=zn,expressionPlugins:q=[],scopeId:Z=null,slotted:ae=!0,ssr:ce=!1,inSSR:de=!1,ssrCssVars:Se="",bindingMetadata:ze=Br,inline:he=!1,isTS:ue=!1,onError:De=Fg,onWarn:ve=P1,compatConfig:je}){const h=a.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),Me={selfName:h&&Ml(Ri(h[1])),prefixIdentifiers:c,hoistStatic:f,cacheHandlers:y,nodeTransforms:_,directiveTransforms:w,transformHoist:T,isBuiltInComponent:k,isCustomElement:L,expressionPlugins:q,scopeId:Z,slotted:ae,ssr:ce,inSSR:de,ssrCssVars:Se,bindingMetadata:ze,inline:he,isTS:ue,onError:De,onWarn:ve,compatConfig:je,root:r,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:r,childIndex:0,inVOnce:!1,helper(Y){const Fe=Me.helpers.get(Y)||0;return Me.helpers.set(Y,Fe+1),Y},removeHelper(Y){const Fe=Me.helpers.get(Y);if(Fe){const ke=Fe-1;ke?Me.helpers.set(Y,ke):Me.helpers.delete(Y)}},helperString(Y){return`_${$u[Me.helper(Y)]}`},replaceNode(Y){Me.parent.children[Me.childIndex]=Me.currentNode=Y},removeNode(Y){const Fe=Me.parent.children,ke=Y?Fe.indexOf(Y):Me.currentNode?Me.childIndex:-1;!Y||Y===Me.currentNode?(Me.currentNode=null,Me.onNodeRemoved()):Me.childIndex>ke&&(Me.childIndex--,Me.onNodeRemoved()),Me.parent.children.splice(ke,1)},onNodeRemoved:()=>{},addIdentifiers(Y){},removeIdentifiers(Y){},hoist(Y){er(Y)&&(Y=sr(Y)),Me.hoists.push(Y);const Fe=sr(`_hoisted_${Me.hoists.length}`,!1,Y.loc,2);return Fe.hoisted=Y,Fe},cache(Y,Fe=!1){return Q3(Me.cached++,Y,Fe)}};return Me.filters=new Set,Me}function CS(r,a){const c=TS(r,a);pd(r,c),a.hoistStatic&&ES(r,c),a.ssr||IS(r,c),r.helpers=new Set([...c.helpers.keys()]),r.components=[...c.components],r.directives=[...c.directives],r.imports=c.imports,r.hoists=c.hoists,r.temps=c.temps,r.cached=c.cached,r.filters=[...c.filters]}function IS(r,a){const{helper:c}=a,{children:f}=r;if(f.length===1){const y=f[0];if(q1(r,y)&&y.codegenNode){const _=y.codegenNode;_.type===13&&Qg(_,a),r.codegenNode=_}else r.codegenNode=y}else if(f.length>1){let y=64;r.codegenNode=Sp(a,c(wp),void 0,r.children,y+"",void 0,void 0,!0,void 0,!1)}}function AS(r,a){let c=0;const f=()=>{c--};for(;c<r.children.length;c++){const y=r.children[c];er(y)||(a.parent=r,a.childIndex=c,a.onNodeRemoved=f,pd(y,a))}}function pd(r,a){a.currentNode=r;const{nodeTransforms:c}=a,f=[];for(let _=0;_<c.length;_++){const w=c[_](r,a);if(w&&(xt(w)?f.push(...w):f.push(w)),a.currentNode)r=a.currentNode;else return}switch(r.type){case 3:a.ssr||a.helper(Rp);break;case 5:a.ssr||a.helper(ld);break;case 9:for(let _=0;_<r.branches.length;_++)pd(r.branches[_],a);break;case 10:case 11:case 1:case 0:AS(r,a);break}a.currentNode=r;let y=f.length;for(;y--;)f[y]()}function K1(r,a){const c=er(r)?f=>f===r:f=>r.test(f);return(f,y)=>{if(f.type===1){const{props:_}=f;if(f.tagType===3&&_.some(sS))return;const w=[];for(let T=0;T<_.length;T++){const k=_[T];if(k.type===7&&c(k.name)){_.splice(T,1),T--;const L=a(f,k,y);L&&w.push(L)}}return w}}}const hd="/*#__PURE__*/",$1=r=>`${$u[r]}: _${$u[r]}`;function x_(r,{mode:a="function",prefixIdentifiers:c=a==="module",sourceMap:f=!1,filename:y="template.vue.html",scopeId:_=null,optimizeImports:w=!1,runtimeGlobalName:T="Vue",runtimeModuleName:k="vue",ssrRuntimeModuleName:L="vue/server-renderer",ssr:q=!1,isTS:Z=!1,inSSR:ae=!1}){const ce={mode:a,prefixIdentifiers:c,sourceMap:f,filename:y,scopeId:_,optimizeImports:w,runtimeGlobalName:T,runtimeModuleName:k,ssrRuntimeModuleName:L,ssr:q,isTS:Z,inSSR:ae,source:r.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(Se){return`_${$u[Se]}`},push(Se,ze){ce.code+=Se},indent(){de(++ce.indentLevel)},deindent(Se=!1){Se?--ce.indentLevel:de(--ce.indentLevel)},newline(){de(ce.indentLevel)}};function de(Se){ce.push(`
`+"  ".repeat(Se))}return ce}function kS(r,a={}){const c=x_(r,a);a.onContextCreated&&a.onContextCreated(c);const{mode:f,push:y,prefixIdentifiers:_,indent:w,deindent:T,newline:k,scopeId:L,ssr:q}=c,Z=Array.from(r.helpers),ae=Z.length>0,ce=!_&&f!=="module",de=!1,Se=de?x_(r,a):c;PS(r,Se);const ze=q?"ssrRender":"render",ue=(q?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(y(`function ${ze}(${ue}) {`),w(),ce&&(y("with (_ctx) {"),w(),ae&&(y(`const { ${Z.map($1).join(", ")} } = _Vue`),y(`
`),k())),r.components.length&&(xm(r.components,"component",c),(r.directives.length||r.temps>0)&&k()),r.directives.length&&(xm(r.directives,"directive",c),r.temps>0&&k()),r.filters&&r.filters.length&&(k(),xm(r.filters,"filter",c),k()),r.temps>0){y("let ");for(let De=0;De<r.temps;De++)y(`${De>0?", ":""}_temp${De}`)}return(r.components.length||r.directives.length||r.temps)&&(y(`
`),k()),q||y("return "),r.codegenNode?wn(r.codegenNode,c):y("null"),ce&&(T(),y("}")),T(),y("}"),{ast:r,code:c.code,preamble:de?Se.code:"",map:c.map?c.map.toJSON():void 0}}function PS(r,a){const{ssr:c,prefixIdentifiers:f,push:y,newline:_,runtimeModuleName:w,runtimeGlobalName:T,ssrRuntimeModuleName:k}=a,L=T,q=Array.from(r.helpers);if(q.length>0&&(y(`const _Vue = ${L}
`),r.hoists.length)){const Z=[Ug,Vg,Rp,jg,D1].filter(ae=>q.includes(ae)).map($1).join(", ");y(`const { ${Z} } = _Vue
`)}zS(r.hoists,a),_(),y("return ")}function xm(r,a,{helper:c,push:f,newline:y,isTS:_}){const w=c(a==="filter"?Hg:a==="component"?qg:Zg);for(let T=0;T<r.length;T++){let k=r[T];const L=k.endsWith("__self");L&&(k=k.slice(0,-6)),f(`const ${Tp(k,a)} = ${w}(${JSON.stringify(k)}${L?", true":""})${_?"!":""}`),T<r.length-1&&y()}}function zS(r,a){if(!r.length)return;a.pure=!0;const{push:c,newline:f,helper:y,scopeId:_,mode:w}=a;f();for(let T=0;T<r.length;T++){const k=r[T];k&&(c(`const _hoisted_${T+1} = `),wn(k,a),f())}a.pure=!1}function ry(r,a){const c=r.length>3||!1;a.push("["),c&&a.indent(),Fp(r,a,c),c&&a.deindent(),a.push("]")}function Fp(r,a,c=!1,f=!0){const{push:y,newline:_}=a;for(let w=0;w<r.length;w++){const T=r[w];er(T)?y(T):xt(T)?ry(T,a):wn(T,a),w<r.length-1&&(c?(f&&y(","),_()):f&&y(", "))}}function wn(r,a){if(er(r)){a.push(r);return}if(Es(r)){a.push(a.helper(r));return}switch(r.type){case 1:case 9:case 11:wn(r.codegenNode,a);break;case 2:MS(r,a);break;case 4:X1(r,a);break;case 5:LS(r,a);break;case 12:wn(r.codegenNode,a);break;case 8:J1(r,a);break;case 3:RS(r,a);break;case 13:OS(r,a);break;case 14:FS(r,a);break;case 15:NS(r,a);break;case 17:US(r,a);break;case 18:VS(r,a);break;case 19:jS(r,a);break;case 20:qS(r,a);break;case 21:Fp(r.body,a,!0,!1);break}}function MS(r,a){a.push(JSON.stringify(r.content),r)}function X1(r,a){const{content:c,isStatic:f}=r;a.push(f?JSON.stringify(c):c,r)}function LS(r,a){const{push:c,helper:f,pure:y}=a;y&&c(hd),c(`${f(ld)}(`),wn(r.content,a),c(")")}function J1(r,a){for(let c=0;c<r.children.length;c++){const f=r.children[c];er(f)?a.push(f):wn(f,a)}}function DS(r,a){const{push:c}=a;if(r.type===8)c("["),J1(r,a),c("]");else if(r.isStatic){const f=ey(r.content)?r.content:JSON.stringify(r.content);c(f,r)}else c(`[${r.content}]`,r)}function RS(r,a){const{push:c,helper:f,pure:y}=a;y&&c(hd),c(`${f(Rp)}(${JSON.stringify(r.content)})`,r)}function OS(r,a){const{push:c,helper:f,pure:y}=a,{tag:_,props:w,children:T,patchFlag:k,dynamicProps:L,directives:q,isBlock:Z,disableTracking:ae,isComponent:ce}=r;q&&c(f(Gg)+"("),Z&&c(`(${f(kl)}(${ae?"true":""}), `),y&&c(hd);const de=Z?Yu(a.inSSR,ce):Ju(a.inSSR,ce);c(f(de)+"(",r),Fp(BS([_,w,T,k,L]),a),c(")"),Z&&c(")"),q&&(c(", "),wn(q,a),c(")"))}function BS(r){let a=r.length;for(;a--&&r[a]==null;);return r.slice(0,a+1).map(c=>c||"null")}function FS(r,a){const{push:c,helper:f,pure:y}=a,_=er(r.callee)?r.callee:f(r.callee);y&&c(hd),c(_+"(",r),Fp(r.arguments,a),c(")")}function NS(r,a){const{push:c,indent:f,deindent:y,newline:_}=a,{properties:w}=r;if(!w.length){c("{}",r);return}const T=w.length>1||!1;c(T?"{":"{ "),T&&f();for(let k=0;k<w.length;k++){const{key:L,value:q}=w[k];DS(L,a),c(": "),wn(q,a),k<w.length-1&&(c(","),_())}T&&y(),c(T?"}":" }")}function US(r,a){ry(r.elements,a)}function VS(r,a){const{push:c,indent:f,deindent:y}=a,{params:_,returns:w,body:T,newline:k,isSlot:L}=r;L&&c(`_${$u[Jg]}(`),c("(",r),xt(_)?Fp(_,a):_&&wn(_,a),c(") => "),(k||T)&&(c("{"),f()),w?(k&&c("return "),xt(w)?ry(w,a):wn(w,a)):T&&wn(T,a),(k||T)&&(y(),c("}")),L&&(r.isNonScopedSlot&&c(", undefined, true"),c(")"))}function jS(r,a){const{test:c,consequent:f,alternate:y,newline:_}=r,{push:w,indent:T,deindent:k,newline:L}=a;if(c.type===4){const Z=!ey(c.content);Z&&w("("),X1(c,a),Z&&w(")")}else w("("),wn(c,a),w(")");_&&T(),a.indentLevel++,_||w(" "),w("? "),wn(f,a),a.indentLevel--,_&&L(),_||w(" "),w(": ");const q=y.type===19;q||a.indentLevel++,wn(y,a),q||a.indentLevel--,_&&k(!0)}function qS(r,a){const{push:c,helper:f,indent:y,deindent:_,newline:w}=a;c(`_cache[${r.index}] || (`),r.isVNode&&(y(),c(`${f(Lf)}(-1),`),w()),c(`_cache[${r.index}] = `),wn(r.value,a),r.isVNode&&(c(","),w(),c(`${f(Lf)}(1),`),w(),c(`_cache[${r.index}]`),_()),c(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const ZS=K1(/^(if|else|else-if)$/,(r,a,c)=>HS(r,a,c,(f,y,_)=>{const w=c.parent.children;let T=w.indexOf(f),k=0;for(;T-->=0;){const L=w[T];L&&L.type===9&&(k+=L.branches.length)}return()=>{if(_)f.codegenNode=w_(y,k,c);else{const L=GS(f.codegenNode);L.alternate=w_(y,k+f.branches.length-1,c)}}}));function HS(r,a,c,f){if(a.name!=="else"&&(!a.exp||!a.exp.content.trim())){const y=a.exp?a.exp.loc:r.loc;c.onError(ii(28,a.loc)),a.exp=sr("true",!1,y)}if(a.name==="if"){const y=b_(r,a),_={type:9,loc:r.loc,branches:[y]};if(c.replaceNode(_),f)return f(_,y,!0)}else{const y=c.parent.children;let _=y.indexOf(r);for(;_-->=-1;){const w=y[_];if(w&&w.type===3){c.removeNode(w);continue}if(w&&w.type===2&&!w.content.trim().length){c.removeNode(w);continue}if(w&&w.type===9){a.name==="else-if"&&w.branches[w.branches.length-1].condition===void 0&&c.onError(ii(30,r.loc)),c.removeNode();const T=b_(r,a);w.branches.push(T);const k=f&&f(w,T,!1);pd(T,c),k&&k(),c.currentNode=null}else c.onError(ii(30,r.loc));break}}}function b_(r,a){const c=r.tagType===3;return{type:10,loc:r.loc,condition:a.name==="else"?void 0:a.exp,children:c&&!_o(r,"for")?r.children:[r],userKey:ud(r,"key"),isTemplateIf:c}}function w_(r,a,c){return r.condition?Wm(r.condition,E_(r,a,c),Li(c.helper(Rp),['""',"true"])):E_(r,a,c)}function E_(r,a,c){const{helper:f}=c,y=_i("key",sr(`${a}`,!1,lo,2)),{children:_}=r,w=_[0];if(_.length!==1||w.type!==1)if(_.length===1&&w.type===11){const k=w.codegenNode;return Ff(k,y,c),k}else{let k=64;return Sp(c,f(wp),xo([y]),_,k+"",void 0,void 0,!0,!1,!1,r.loc)}else{const k=w.codegenNode,L=uS(k);return L.type===13&&Qg(L,c),Ff(L,y,c),k}}function GS(r){for(;;)if(r.type===19)if(r.alternate.type===19)r=r.alternate;else return r;else r.type===20&&(r=r.value)}const WS=K1("for",(r,a,c)=>{const{helper:f,removeHelper:y}=c;return KS(r,a,c,_=>{const w=Li(f(Wg),[_.source]),T=Of(r),k=_o(r,"memo"),L=ud(r,"key"),q=L&&(L.type===6?sr(L.value.content,!0):L.exp),Z=L?_i("key",q):null,ae=_.source.type===4&&_.source.constType>0,ce=ae?64:L?128:256;return _.codegenNode=Sp(c,f(wp),void 0,w,ce+"",void 0,void 0,!0,!ae,!1,r.loc),()=>{let de;const{children:Se}=_,ze=Se.length!==1||Se[0].type!==1,he=Bf(r)?r:T&&r.children.length===1&&Bf(r.children[0])?r.children[0]:null;if(he?(de=he.codegenNode,T&&Z&&Ff(de,Z,c)):ze?de=Sp(c,f(wp),Z?xo([Z]):void 0,r.children,"64",void 0,void 0,!0,void 0,!1):(de=Se[0].codegenNode,T&&Z&&Ff(de,Z,c),de.isBlock!==!ae&&(de.isBlock?(y(kl),y(Yu(c.inSSR,de.isComponent))):y(Ju(c.inSSR,de.isComponent))),de.isBlock=!ae,de.isBlock?(f(kl),f(Yu(c.inSSR,de.isComponent))):f(Ju(c.inSSR,de.isComponent))),k){const ue=Xu(Xm(_.parseResult,[sr("_cached")]));ue.body=eS([Bo(["const _memo = (",k.exp,")"]),Bo(["if (_cached",...q?[" && _cached.key === ",q]:[],` && ${c.helperString(B1)}(_cached, _memo)) return _cached`]),Bo(["const _item = ",de]),sr("_item.memo = _memo"),sr("return _item")]),w.arguments.push(ue,sr("_cache"),sr(String(c.cached++)))}else w.arguments.push(Xu(Xm(_.parseResult),de,!0))}})});function KS(r,a,c,f){if(!a.exp){c.onError(ii(31,a.loc));return}const y=Y1(a.exp);if(!y){c.onError(ii(32,a.loc));return}const{addIdentifiers:_,removeIdentifiers:w,scopes:T}=c,{source:k,value:L,key:q,index:Z}=y,ae={type:11,loc:a.loc,source:k,valueAlias:L,keyAlias:q,objectIndexAlias:Z,parseResult:y,children:Of(r)?r.children:[r]};c.replaceNode(ae),T.vFor++;const ce=f&&f(ae);return()=>{T.vFor--,ce&&ce()}}const $S=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,S_=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,XS=/^\(|\)$/g;function Y1(r,a){const c=r.loc,f=r.content,y=f.match($S);if(!y)return;const[,_,w]=y,T={source:uf(c,w.trim(),f.indexOf(w,_.length)),value:void 0,key:void 0,index:void 0};let k=_.trim().replace(XS,"").trim();const L=_.indexOf(k),q=k.match(S_);if(q){k=k.replace(S_,"").trim();const Z=q[1].trim();let ae;if(Z&&(ae=f.indexOf(Z,L+k.length),T.key=uf(c,Z,ae)),q[2]){const ce=q[2].trim();ce&&(T.index=uf(c,ce,f.indexOf(ce,T.key?ae+Z.length:L+k.length)))}}return k&&(T.value=uf(c,k,L)),T}function uf(r,a,c){return sr(a,!1,U1(r,c,a.length))}function Xm({value:r,key:a,index:c},f=[]){return JS([r,a,c,...f])}function JS(r){let a=r.length;for(;a--&&!r[a];);return r.slice(0,a+1).map((c,f)=>c||sr("_".repeat(f+1),!1))}const T_=sr("undefined",!1),YS=(r,a)=>{if(r.type===1&&(r.tagType===1||r.tagType===3)){const c=_o(r,"slot");if(c)return c.exp,a.scopes.vSlot++,()=>{a.scopes.vSlot--}}},QS=(r,a,c)=>Xu(r,a,!1,!0,a.length?a[0].loc:c);function eT(r,a,c=QS){a.helper(Jg);const{children:f,loc:y}=r,_=[],w=[];let T=a.scopes.vSlot>0||a.scopes.vFor>0;const k=_o(r,"slot",!0);if(k){const{arg:ze,exp:he}=k;ze&&!Hn(ze)&&(T=!0),_.push(_i(ze||sr("default",!0),c(he,f,y)))}let L=!1,q=!1;const Z=[],ae=new Set;let ce=0;for(let ze=0;ze<f.length;ze++){const he=f[ze];let ue;if(!Of(he)||!(ue=_o(he,"slot",!0))){he.type!==3&&Z.push(he);continue}if(k){a.onError(ii(37,ue.loc));break}L=!0;const{children:De,loc:ve}=he,{arg:je=sr("default",!0),exp:h,loc:Me}=ue;let Y;Hn(je)?Y=je?je.content:"default":T=!0;const Fe=c(h,De,ve);let ke,Xe,ye;if(ke=_o(he,"if"))T=!0,w.push(Wm(ke.exp,cf(je,Fe,ce++),T_));else if(Xe=_o(he,/^else(-if)?$/,!0)){let mt=ze,et;for(;mt--&&(et=f[mt],et.type===3););if(et&&Of(et)&&_o(et,"if")){f.splice(ze,1),ze--;let Wt=w[w.length-1];for(;Wt.alternate.type===19;)Wt=Wt.alternate;Wt.alternate=Xe.exp?Wm(Xe.exp,cf(je,Fe,ce++),T_):cf(je,Fe,ce++)}else a.onError(ii(30,Xe.loc))}else if(ye=_o(he,"for")){T=!0;const mt=ye.parseResult||Y1(ye.exp);mt?w.push(Li(a.helper(Wg),[mt.source,Xu(Xm(mt),cf(je,Fe),!0)])):a.onError(ii(32,ye.loc))}else{if(Y){if(ae.has(Y)){a.onError(ii(38,Me));continue}ae.add(Y),Y==="default"&&(q=!0)}_.push(_i(je,Fe))}}if(!k){const ze=(he,ue)=>{const De=c(he,ue,y);return a.compatConfig&&(De.isNonScopedSlot=!0),_i("default",De)};L?Z.length&&Z.some(he=>Q1(he))&&(q?a.onError(ii(39,Z[0].loc)):_.push(ze(void 0,Z))):_.push(ze(void 0,f))}const de=T?2:gf(r.children)?3:1;let Se=xo(_.concat(_i("_",sr(de+"",!1))),y);return w.length&&(Se=Li(a.helper(O1),[Se,Bp(w)])),{slots:Se,hasDynamicSlots:T}}function cf(r,a,c){const f=[_i("name",r),_i("fn",a)];return c!=null&&f.push(_i("key",sr(String(c),!0))),xo(f)}function gf(r){for(let a=0;a<r.length;a++){const c=r[a];switch(c.type){case 1:if(c.tagType===2||gf(c.children))return!0;break;case 9:if(gf(c.branches))return!0;break;case 10:case 11:if(gf(c.children))return!0;break}}return!1}function Q1(r){return r.type!==2&&r.type!==12?!0:r.type===2?!!r.content.trim():Q1(r.content)}const ex=new WeakMap,tT=(r,a)=>function(){if(r=a.currentNode,!(r.type===1&&(r.tagType===0||r.tagType===1)))return;const{tag:f,props:y}=r,_=r.tagType===1;let w=_?rT(r,a):`"${f}"`;const T=Fr(w)&&w.callee===zf;let k,L,q,Z=0,ae,ce,de,Se=T||w===hp||w===Ng||!_&&(f==="svg"||f==="foreignObject");if(y.length>0){const ze=tx(r,a,void 0,_,T);k=ze.props,Z=ze.patchFlag,ce=ze.dynamicPropNames;const he=ze.directives;de=he&&he.length?Bp(he.map(ue=>nT(ue,a))):void 0,ze.shouldUseBlock&&(Se=!0)}if(r.children.length>0)if(w===Pf&&(Se=!0,Z|=1024),_&&w!==hp&&w!==Pf){const{slots:he,hasDynamicSlots:ue}=eT(r,a);L=he,ue&&(Z|=1024)}else if(r.children.length===1&&w!==hp){const he=r.children[0],ue=he.type,De=ue===5||ue===8;De&&bo(he,a)===0&&(Z|=1),De||ue===2?L=he:L=r.children}else L=r.children;Z!==0&&(q=String(Z),ce&&ce.length&&(ae=oT(ce))),r.codegenNode=Sp(a,w,k,L,q,ae,de,!!Se,!1,_,r.loc)};function rT(r,a,c=!1){let{tag:f}=r;const y=Jm(f),_=ud(r,"is");if(_)if(y||Sl("COMPILER_IS_ON_ELEMENT",a)){const k=_.type===6?_.value&&sr(_.value.content,!0):_.exp;if(k)return Li(a.helper(zf),[k])}else _.type===6&&_.value.content.startsWith("vue:")&&(f=_.value.content.slice(4));const w=!y&&_o(r,"is");if(w&&w.exp)return Li(a.helper(zf),[w.exp]);const T=F1(f)||a.isBuiltInComponent(f);return T?(c||a.helper(T),T):(a.helper(qg),a.components.add(f),Tp(f,"component"))}function tx(r,a,c=r.props,f,y,_=!1){const{tag:w,loc:T,children:k}=r;let L=[];const q=[],Z=[],ae=k.length>0;let ce=!1,de=0,Se=!1,ze=!1,he=!1,ue=!1,De=!1,ve=!1;const je=[],h=Fe=>{L.length&&(q.push(xo(C_(L),T)),L=[]),Fe&&q.push(Fe)},Me=({key:Fe,value:ke})=>{if(Hn(Fe)){const Xe=Fe.content,ye=Pl(Xe);if(ye&&(!f||y)&&Xe.toLowerCase()!=="onclick"&&Xe!=="onUpdate:modelValue"&&!vl(Xe)&&(ue=!0),ye&&vl(Xe)&&(ve=!0),ke.type===20||(ke.type===4||ke.type===8)&&bo(ke,a)>0)return;Xe==="ref"?Se=!0:Xe==="class"?ze=!0:Xe==="style"?he=!0:Xe!=="key"&&!je.includes(Xe)&&je.push(Xe),f&&(Xe==="class"||Xe==="style")&&!je.includes(Xe)&&je.push(Xe)}else De=!0};for(let Fe=0;Fe<c.length;Fe++){const ke=c[Fe];if(ke.type===6){const{loc:Xe,name:ye,value:mt}=ke;let et=!0;if(ye==="ref"&&(Se=!0,a.scopes.vFor>0&&L.push(_i(sr("ref_for",!0),sr("true")))),ye==="is"&&(Jm(w)||mt&&mt.content.startsWith("vue:")||Sl("COMPILER_IS_ON_ELEMENT",a)))continue;L.push(_i(sr(ye,!0,U1(Xe,0,ye.length)),sr(mt?mt.content:"",et,mt?mt.loc:Xe)))}else{const{name:Xe,arg:ye,exp:mt,loc:et}=ke,Wt=Xe==="bind",Dt=Xe==="on";if(Xe==="slot"){f||a.onError(ii(40,et));continue}if(Xe==="once"||Xe==="memo"||Xe==="is"||Wt&&yl(ye,"is")&&(Jm(w)||Sl("COMPILER_IS_ON_ELEMENT",a))||Dt&&_)continue;if((Wt&&yl(ye,"key")||Dt&&ae&&yl(ye,"vue:before-update"))&&(ce=!0),Wt&&yl(ye,"ref")&&a.scopes.vFor>0&&L.push(_i(sr("ref_for",!0),sr("true"))),!ye&&(Wt||Dt)){if(De=!0,mt)if(Wt){if(h(),Sl("COMPILER_V_BIND_OBJECT_ORDER",a)){q.unshift(mt);continue}q.push(mt)}else h({type:14,loc:et,callee:a.helper(Xg),arguments:f?[mt]:[mt,"true"]});else a.onError(ii(Wt?34:35,et));continue}const tr=a.directiveTransforms[Xe];if(tr){const{props:Rt,needRuntime:pi}=tr(ke,r,a);!_&&Rt.forEach(Me),Dt&&ye&&!Hn(ye)?h(xo(Rt,T)):L.push(...Rt),pi&&(Z.push(ke),Es(pi)&&ex.set(ke,pi))}else gw(Xe)||(Z.push(ke),ae&&(ce=!0))}}let Y;if(q.length?(h(),q.length>1?Y=Li(a.helper(Mf),q,T):Y=q[0]):L.length&&(Y=xo(C_(L),T)),De?de|=16:(ze&&!f&&(de|=2),he&&!f&&(de|=4),je.length&&(de|=8),ue&&(de|=32)),!ce&&(de===0||de===32)&&(Se||ve||Z.length>0)&&(de|=512),!a.inSSR&&Y)switch(Y.type){case 15:let Fe=-1,ke=-1,Xe=!1;for(let et=0;et<Y.properties.length;et++){const Wt=Y.properties[et].key;Hn(Wt)?Wt.content==="class"?Fe=et:Wt.content==="style"&&(ke=et):Wt.isHandlerKey||(Xe=!0)}const ye=Y.properties[Fe],mt=Y.properties[ke];Xe?Y=Li(a.helper(Ep),[Y]):(ye&&!Hn(ye.value)&&(ye.value=Li(a.helper(Kg),[ye.value])),mt&&(he||mt.value.type===4&&mt.value.content.trim()[0]==="["||mt.value.type===17)&&(mt.value=Li(a.helper($g),[mt.value])));break;case 14:break;default:Y=Li(a.helper(Ep),[Li(a.helper(Op),[Y])]);break}return{props:Y,directives:Z,patchFlag:de,dynamicPropNames:je,shouldUseBlock:ce}}function C_(r){const a=new Map,c=[];for(let f=0;f<r.length;f++){const y=r[f];if(y.key.type===8||!y.key.isStatic){c.push(y);continue}const _=y.key.content,w=a.get(_);w?(_==="style"||_==="class"||Pl(_))&&iT(w,y):(a.set(_,y),c.push(y))}return c}function iT(r,a){r.value.type===17?r.value.elements.push(a.value):r.value=Bp([r.value,a.value],r.loc)}function nT(r,a){const c=[],f=ex.get(r);f?c.push(a.helperString(f)):(a.helper(Zg),a.directives.add(r.name),c.push(Tp(r.name,"directive")));const{loc:y}=r;if(r.exp&&c.push(r.exp),r.arg&&(r.exp||c.push("void 0"),c.push(r.arg)),Object.keys(r.modifiers).length){r.arg||(r.exp||c.push("void 0"),c.push("void 0"));const _=sr("true",!1,y);c.push(xo(r.modifiers.map(w=>_i(w,_)),y))}return Bp(c,r.loc)}function oT(r){let a="[";for(let c=0,f=r.length;c<f;c++)a+=JSON.stringify(r[c]),c<f-1&&(a+=", ");return a+"]"}function Jm(r){return r==="component"||r==="Component"}const aT=(r,a)=>{if(Bf(r)){const{children:c,loc:f}=r,{slotName:y,slotProps:_}=sT(r,a),w=[a.prefixIdentifiers?"_ctx.$slots":"$slots",y,"{}","undefined","true"];let T=2;_&&(w[2]=_,T=3),c.length&&(w[3]=Xu([],c,!1,!1,f),T=4),a.scopeId&&!a.slotted&&(T=5),w.splice(T),r.codegenNode=Li(a.helper(R1),w,f)}};function sT(r,a){let c='"default"',f;const y=[];for(let _=0;_<r.props.length;_++){const w=r.props[_];w.type===6?w.value&&(w.name==="name"?c=JSON.stringify(w.value.content):(w.name=Ri(w.name),y.push(w))):w.name==="bind"&&yl(w.arg,"name")?w.exp&&(c=w.exp):(w.name==="bind"&&w.arg&&Hn(w.arg)&&(w.arg.content=Ri(w.arg.content)),y.push(w))}if(y.length>0){const{props:_,directives:w}=tx(r,a,y,!1,!1);f=_,w.length&&a.onError(ii(36,w[0].loc))}return{slotName:c,slotProps:f}}const lT=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,rx=(r,a,c,f)=>{const{loc:y,modifiers:_,arg:w}=r;!r.exp&&!_.length&&c.onError(ii(35,y));let T;if(w.type===4)if(w.isStatic){let Z=w.content;Z.startsWith("vue:")&&(Z=`vnode-${Z.slice(4)}`);const ae=a.tagType!==0||Z.startsWith("vnode")||!/[A-Z]/.test(Z)?Uu(Ri(Z)):`on:${Z}`;T=sr(ae,!0,w.loc)}else T=Bo([`${c.helperString(Gm)}(`,w,")"]);else T=w,T.children.unshift(`${c.helperString(Gm)}(`),T.children.push(")");let k=r.exp;k&&!k.content.trim()&&(k=void 0);let L=c.cacheHandlers&&!k&&!c.inVOnce;if(k){const Z=N1(k.content),ae=!(Z||lT.test(k.content)),ce=k.content.includes(";");(ae||L&&Z)&&(k=Bo([`${ae?"$event":"(...args)"} => ${ce?"{":"("}`,k,ce?"}":")"]))}let q={props:[_i(T,k||sr("() => {}",!1,y))]};return f&&(q=f(q)),L&&(q.props[0].value=c.cache(q.props[0].value)),q.props.forEach(Z=>Z.key.isHandlerKey=!0),q},uT=(r,a,c)=>{const{exp:f,modifiers:y,loc:_}=r,w=r.arg;return w.type!==4?(w.children.unshift("("),w.children.push(') || ""')):w.isStatic||(w.content=`${w.content} || ""`),y.includes("camel")&&(w.type===4?w.isStatic?w.content=Ri(w.content):w.content=`${c.helperString(Hm)}(${w.content})`:(w.children.unshift(`${c.helperString(Hm)}(`),w.children.push(")"))),c.inSSR||(y.includes("prop")&&I_(w,"."),y.includes("attr")&&I_(w,"^")),!f||f.type===4&&!f.content.trim()?(c.onError(ii(34,_)),{props:[_i(w,sr("",!0,_))]}):{props:[_i(w,f)]}},I_=(r,a)=>{r.type===4?r.isStatic?r.content=a+r.content:r.content=`\`${a}\${${r.content}}\``:(r.children.unshift(`'${a}' + (`),r.children.push(")"))},cT=(r,a)=>{if(r.type===0||r.type===1||r.type===11||r.type===10)return()=>{const c=r.children;let f,y=!1;for(let _=0;_<c.length;_++){const w=c[_];if(_m(w)){y=!0;for(let T=_+1;T<c.length;T++){const k=c[T];if(_m(k))f||(f=c[_]=Bo([w],w.loc)),f.children.push(" + ",k),c.splice(T,1),T--;else{f=void 0;break}}}}if(!(!y||c.length===1&&(r.type===0||r.type===1&&r.tagType===0&&!r.props.find(_=>_.type===7&&!a.directiveTransforms[_.name])&&r.tag!=="template")))for(let _=0;_<c.length;_++){const w=c[_];if(_m(w)||w.type===8){const T=[];(w.type!==2||w.content!==" ")&&T.push(w),!a.ssr&&bo(w,a)===0&&T.push("1"),c[_]={type:12,content:w,loc:w.loc,codegenNode:Li(a.helper(jg),T)}}}}},A_=new WeakSet,pT=(r,a)=>{if(r.type===1&&_o(r,"once",!0))return A_.has(r)||a.inVOnce||a.inSSR?void 0:(A_.add(r),a.inVOnce=!0,a.helper(Lf),()=>{a.inVOnce=!1;const c=a.currentNode;c.codegenNode&&(c.codegenNode=a.cache(c.codegenNode,!0))})},ix=(r,a,c)=>{const{exp:f,arg:y}=r;if(!f)return c.onError(ii(41,r.loc)),pf();const _=f.loc.source,w=f.type===4?f.content:_,T=c.bindingMetadata[_];if(T==="props"||T==="props-aliased")return c.onError(ii(44,f.loc)),pf();const k=!1;if(!w.trim()||!N1(w)&&!k)return c.onError(ii(42,f.loc)),pf();const L=y||sr("modelValue",!0),q=y?Hn(y)?`onUpdate:${Ri(y.content)}`:Bo(['"onUpdate:" + ',y]):"onUpdate:modelValue";let Z;const ae=c.isTS?"($event: any)":"$event";Z=Bo([`${ae} => ((`,f,") = $event)"]);const ce=[_i(L,r.exp),_i(q,Z)];if(r.modifiers.length&&a.tagType===1){const de=r.modifiers.map(ze=>(ey(ze)?ze:JSON.stringify(ze))+": true").join(", "),Se=y?Hn(y)?`${y.content}Modifiers`:Bo([y,' + "Modifiers"']):"modelModifiers";ce.push(_i(Se,sr(`{ ${de} }`,!1,r.loc,2)))}return pf(ce)};function pf(r=[]){return{props:r}}const hT=/[\w).+\-_$\]]/,fT=(r,a)=>{Sl("COMPILER_FILTER",a)&&(r.type===5&&Uf(r.content,a),r.type===1&&r.props.forEach(c=>{c.type===7&&c.name!=="for"&&c.exp&&Uf(c.exp,a)}))};function Uf(r,a){if(r.type===4)k_(r,a);else for(let c=0;c<r.children.length;c++){const f=r.children[c];typeof f=="object"&&(f.type===4?k_(f,a):f.type===8?Uf(r,a):f.type===5&&Uf(f.content,a))}}function k_(r,a){const c=r.content;let f=!1,y=!1,_=!1,w=!1,T=0,k=0,L=0,q=0,Z,ae,ce,de,Se=[];for(ce=0;ce<c.length;ce++)if(ae=Z,Z=c.charCodeAt(ce),f)Z===39&&ae!==92&&(f=!1);else if(y)Z===34&&ae!==92&&(y=!1);else if(_)Z===96&&ae!==92&&(_=!1);else if(w)Z===47&&ae!==92&&(w=!1);else if(Z===124&&c.charCodeAt(ce+1)!==124&&c.charCodeAt(ce-1)!==124&&!T&&!k&&!L)de===void 0?(q=ce+1,de=c.slice(0,ce).trim()):ze();else{switch(Z){case 34:y=!0;break;case 39:f=!0;break;case 96:_=!0;break;case 40:L++;break;case 41:L--;break;case 91:k++;break;case 93:k--;break;case 123:T++;break;case 125:T--;break}if(Z===47){let he=ce-1,ue;for(;he>=0&&(ue=c.charAt(he),ue===" ");he--);(!ue||!hT.test(ue))&&(w=!0)}}de===void 0?de=c.slice(0,ce).trim():q!==0&&ze();function ze(){Se.push(c.slice(q,ce).trim()),q=ce+1}if(Se.length){for(ce=0;ce<Se.length;ce++)de=dT(de,Se[ce],a);r.content=de}}function dT(r,a,c){c.helper(Hg);const f=a.indexOf("(");if(f<0)return c.filters.add(a),`${Tp(a,"filter")}(${r})`;{const y=a.slice(0,f),_=a.slice(f+1);return c.filters.add(y),`${Tp(y,"filter")}(${r}${_!==")"?","+_:_}`}}const P_=new WeakSet,mT=(r,a)=>{if(r.type===1){const c=_o(r,"memo");return!c||P_.has(r)?void 0:(P_.add(r),()=>{const f=r.codegenNode||a.currentNode.codegenNode;f&&f.type===13&&(r.tagType!==1&&Qg(f,a),r.codegenNode=Li(a.helper(Yg),[c.exp,Xu(void 0,f),"_cache",String(a.cached++)]))})}};function gT(r){return[[pT,ZS,mT,WS,fT,aT,tT,YS,cT],{on:rx,bind:uT,model:ix}]}function yT(r,a={}){const c=a.onError||Fg,f=a.mode==="module";a.prefixIdentifiers===!0?c(ii(47)):f&&c(ii(48));const y=!1;a.cacheHandlers&&c(ii(49)),a.scopeId&&!f&&c(ii(50));const _=er(r)?hS(r,a):r,[w,T]=gT();return CS(_,gr({},a,{prefixIdentifiers:y,nodeTransforms:[...w,...a.nodeTransforms||[]],directiveTransforms:gr({},T,a.directiveTransforms||{})})),kS(_,gr({},a,{prefixIdentifiers:y}))}const vT=()=>({props:[]}),nx=Symbol(""),ox=Symbol(""),ax=Symbol(""),sx=Symbol(""),Ym=Symbol(""),lx=Symbol(""),ux=Symbol(""),cx=Symbol(""),px=Symbol(""),hx=Symbol("");J3({[nx]:"vModelRadio",[ox]:"vModelCheckbox",[ax]:"vModelText",[sx]:"vModelSelect",[Ym]:"vModelDynamic",[lx]:"withModifiers",[ux]:"withKeys",[cx]:"vShow",[px]:"Transition",[hx]:"TransitionGroup"});let Ru;function _T(r,a=!1){return Ru||(Ru=document.createElement("div")),a?(Ru.innerHTML=`<div foo="${r.replace(/"/g,"&quot;")}">`,Ru.children[0].getAttribute("foo")):(Ru.innerHTML=r,Ru.textContent)}const xT=Wn("style,iframe,script,noscript",!0),bT={isVoidTag:Pw,isNativeTag:r=>Aw(r)||kw(r),isPreTag:r=>r==="pre",decodeEntities:_T,isBuiltInComponent:r=>{if(Bu(r,"Transition"))return px;if(Bu(r,"TransitionGroup"))return hx},getNamespace(r,a){let c=a?a.ns:0;if(a&&c===2)if(a.tag==="annotation-xml"){if(r==="svg")return 1;a.props.some(f=>f.type===6&&f.name==="encoding"&&f.value!=null&&(f.value.content==="text/html"||f.value.content==="application/xhtml+xml"))&&(c=0)}else/^m(?:[ions]|text)$/.test(a.tag)&&r!=="mglyph"&&r!=="malignmark"&&(c=0);else a&&c===1&&(a.tag==="foreignObject"||a.tag==="desc"||a.tag==="title")&&(c=0);if(c===0){if(r==="svg")return 1;if(r==="math")return 2}return c},getTextMode({tag:r,ns:a}){if(a===0){if(r==="textarea"||r==="title")return 1;if(xT(r))return 2}return 0}},wT=r=>{r.type===1&&r.props.forEach((a,c)=>{a.type===6&&a.name==="style"&&a.value&&(r.props[c]={type:7,name:"bind",arg:sr("style",!0,a.loc),exp:ET(a.value.content,a.loc),modifiers:[],loc:a.loc})})},ET=(r,a)=>{const c=G_(r);return sr(JSON.stringify(c),!1,a,3)};function ws(r,a){return ii(r,a)}const ST=(r,a,c)=>{const{exp:f,loc:y}=r;return f||c.onError(ws(53,y)),a.children.length&&(c.onError(ws(54,y)),a.children.length=0),{props:[_i(sr("innerHTML",!0,y),f||sr("",!0))]}},TT=(r,a,c)=>{const{exp:f,loc:y}=r;return f||c.onError(ws(55,y)),a.children.length&&(c.onError(ws(56,y)),a.children.length=0),{props:[_i(sr("textContent",!0),f?bo(f,c)>0?f:Li(c.helperString(ld),[f],y):sr("",!0))]}},CT=(r,a,c)=>{const f=ix(r,a,c);if(!f.props.length||a.tagType===1)return f;r.arg&&c.onError(ws(58,r.arg.loc));const{tag:y}=a,_=c.isCustomElement(y);if(y==="input"||y==="textarea"||y==="select"||_){let w=ax,T=!1;if(y==="input"||_){const k=ud(a,"type");if(k){if(k.type===7)w=Ym;else if(k.value)switch(k.value.content){case"radio":w=nx;break;case"checkbox":w=ox;break;case"file":T=!0,c.onError(ws(59,r.loc));break}}else aS(a)&&(w=Ym)}else y==="select"&&(w=sx);T||(f.needRuntime=c.helper(w))}else c.onError(ws(57,r.loc));return f.props=f.props.filter(w=>!(w.key.type===4&&w.key.content==="modelValue")),f},IT=Wn("passive,once,capture"),AT=Wn("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),kT=Wn("left,right"),fx=Wn("onkeyup,onkeydown,onkeypress",!0),PT=(r,a,c,f)=>{const y=[],_=[],w=[];for(let T=0;T<a.length;T++){const k=a[T];k==="native"&&Cp("COMPILER_V_ON_NATIVE",c)||IT(k)?w.push(k):kT(k)?Hn(r)?fx(r.content)?y.push(k):_.push(k):(y.push(k),_.push(k)):AT(k)?_.push(k):y.push(k)}return{keyModifiers:y,nonKeyModifiers:_,eventOptionModifiers:w}},z_=(r,a)=>Hn(r)&&r.content.toLowerCase()==="onclick"?sr(a,!0):r.type!==4?Bo(["(",r,`) === "onClick" ? "${a}" : (`,r,")"]):r,zT=(r,a,c)=>rx(r,a,c,f=>{const{modifiers:y}=r;if(!y.length)return f;let{key:_,value:w}=f.props[0];const{keyModifiers:T,nonKeyModifiers:k,eventOptionModifiers:L}=PT(_,y,c,r.loc);if(k.includes("right")&&(_=z_(_,"onContextmenu")),k.includes("middle")&&(_=z_(_,"onMouseup")),k.length&&(w=Li(c.helper(lx),[w,JSON.stringify(k)])),T.length&&(!Hn(_)||fx(_.content))&&(w=Li(c.helper(ux),[w,JSON.stringify(T)])),L.length){const q=L.map(Ml).join("");_=Hn(_)?sr(`${_.content}${q}`,!0):Bo(["(",_,`) + "${q}"`])}return{props:[_i(_,w)]}}),MT=(r,a,c)=>{const{exp:f,loc:y}=r;return f||c.onError(ws(61,y)),{props:[],needRuntime:c.helper(cx)}},LT=(r,a)=>{r.type===1&&r.tagType===0&&(r.tag==="script"||r.tag==="style")&&a.removeNode()},DT=[wT],RT={cloak:vT,html:ST,text:TT,model:CT,on:zT,show:MT};function OT(r,a={}){return yT(r,gr({},bT,a,{nodeTransforms:[LT,...DT,...a.nodeTransforms||[]],directiveTransforms:gr({},RT,a.directiveTransforms||{}),transformHoist:null}))}const M_=Object.create(null);function BT(r,a){if(!er(r))if(r.nodeType)r=r.innerHTML;else return zn;const c=r,f=M_[c];if(f)return f;if(r[0]==="#"){const T=document.querySelector(r);r=T?T.innerHTML:""}const y=gr({hoistStatic:!0,onError:void 0,onWarn:zn},a);!y.isCustomElement&&typeof customElements<"u"&&(y.isCustomElement=T=>!!customElements.get(T));const{code:_}=OT(r,y),w=new Function("Vue",_)(H3);return w._rc=!0,M_[c]=w}r1(BT);var bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FT={exports:{}};(function(r,a){(function(c,f){r.exports=f()})(bm,function(){function c(ze,he){he===void 0&&(he={});var ue=he.insertAt;if(!(!ze||typeof document>"u")){var De=document.head||document.getElementsByTagName("head")[0],ve=document.createElement("style");ve.type="text/css",ue==="top"&&De.firstChild?De.insertBefore(ve,De.firstChild):De.appendChild(ve),ve.styleSheet?ve.styleSheet.cssText=ze:ve.appendChild(document.createTextNode(ze))}}var f=`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`;c(f);var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof bm<"u"?bm:typeof self<"u"?self:{},_={},w={get exports(){return _},set exports(ze){_=ze}};(function(ze,he){(function(ue,De){ze.exports=De()})(y,function(){var ue,De,ve;function je(h,Me){if(!ue)ue=Me;else if(!De)De=Me;else{var Y="var sharedChunk = {}; ("+ue+")(sharedChunk); ("+De+")(sharedChunk);",Fe={};ue(Fe),ve=Me(Fe),typeof window<"u"&&(ve.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}}return je(["exports"],function(h){function Me(e,t){return e(t={exports:{}},t.exports),t.exports}var Y=Fe;function Fe(e,t,i,l){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=i,this.p2y=l}Fe.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Fe.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Fe.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Fe.prototype.solveCurveX=function(e,t){var i,l,p,d,g;for(t===void 0&&(t=1e-6),p=e,g=0;g<8;g++){if(d=this.sampleCurveX(p)-e,Math.abs(d)<t)return p;var b=this.sampleCurveDerivativeX(p);if(Math.abs(b)<1e-6)break;p-=d/b}if((p=e)<(i=0))return i;if(p>(l=1))return l;for(;i<l;){if(d=this.sampleCurveX(p),Math.abs(d-e)<t)return p;e>d?i=p:l=p,p=.5*(l-i)+i}return p},Fe.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var ke=Xe;function Xe(e,t){this.x=e,this.y=t}Xe.prototype={clone:function(){return new Xe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),p=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Xe.convert=function(e){return e instanceof Xe?e:Array.isArray(e)?new Xe(e[0],e[1]):e};var ye=typeof self<"u"?self:{},mt=Math.pow(2,53)-1;function et(e,t,i,l){var p=new Y(e,t,i,l);return function(d){return p.solve(d)}}var Wt=et(.25,.1,.25,1);function Dt(e,t,i){return Math.min(i,Math.max(t,e))}function tr(e,t,i){var l=i-t,p=((e-t)%l+l)%l+t;return p===t?i:p}function Rt(e){for(var t=arguments,i=[],l=arguments.length-1;l-- >0;)i[l]=t[l+1];for(var p=0,d=i;p<d.length;p+=1){var g=d[p];for(var b in g)e[b]=g[b]}return e}var pi=1;function un(){return pi++}function Hr(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function hi(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function En(e,t){e.forEach(function(i){t[i]&&(t[i]=t[i].bind(t))})}function Mn(e,t){return e.indexOf(t,e.length-t.length)!==-1}function ni(e,t,i){var l={};for(var p in e)l[p]=t.call(i||this,e[p],p,e);return l}function Qr(e,t,i){var l={};for(var p in e)t.call(i||this,e[p],p,e)&&(l[p]=e[p]);return l}function Ii(e){return Array.isArray(e)?e.map(Ii):typeof e=="object"&&e?ni(e,Ii):e}var Kn={};function dr(e){Kn[e]||(typeof console<"u"&&console.warn(e),Kn[e]=!0)}function oi(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function $n(e){for(var t=0,i=0,l=e.length,p=l-1,d=void 0,g=void 0;i<l;p=i++)t+=((g=e[p]).x-(d=e[i]).x)*(d.y+g.y);return t}function ie(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function pe(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,p,d,g){var b=d||g;return t[p]=!b||b.toLowerCase(),""}),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Oe=null;function We(e){if(Oe==null){var t=e.navigator?e.navigator.userAgent:null;Oe=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Oe}function qe(e){try{var t=ye[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Je,we,Pe,Le,Te=ye.performance&&ye.performance.now?ye.performance.now.bind(ye.performance):Date.now.bind(Date),Ye=ye.requestAnimationFrame||ye.mozRequestAnimationFrame||ye.webkitRequestAnimationFrame||ye.msRequestAnimationFrame,Ze=ye.cancelAnimationFrame||ye.mozCancelAnimationFrame||ye.webkitCancelAnimationFrame||ye.msCancelAnimationFrame,ct={now:Te,frame:function(e){var t=Ye(e);return{cancel:function(){return Ze(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var i=ye.document.createElement("canvas"),l=i.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Je||(Je=ye.document.createElement("a")),Je.href=e,Je.href},hardwareConcurrency:ye.navigator&&ye.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ye.devicePixelRatio},get prefersReducedMotion(){return!!ye.matchMedia&&(we==null&&(we=ye.matchMedia("(prefers-reduced-motion: reduce)")),we.matches)}},it={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},At={supported:!1,testSupport:function(e){!Vt&&Le&&(jt?dt(e):Pe=e)}},Vt=!1,jt=!1;function dt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Le),e.isContextLost())return;At.supported=!0}catch{}e.deleteTexture(t),Vt=!0}ye.document&&((Le=ye.document.createElement("img")).onload=function(){Pe&&dt(Pe),Pe=null,jt=!0},Le.onerror=function(){Vt=!0,Pe=null},Le.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var kr="01",Pr=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function ai(e){return e.indexOf("mapbox:")===0}Pr.prototype._createSkuToken=function(){var e=function(){for(var t="",i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",kr,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Pr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Pr.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},Pr.prototype.normalizeStyleURL=function(e,t){if(!ai(e))return e;var i=rr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Pr.prototype.normalizeGlyphsURL=function(e,t){if(!ai(e))return e;var i=rr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},Pr.prototype.normalizeSourceURL=function(e,t){if(!ai(e))return e;var i=rr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},Pr.prototype.normalizeSpriteURL=function(e,t,i,l){var p=rr(e);return ai(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+i,this._makeAPIURL(p,this._customAccessToken||l)):(p.path+=""+t+i,fi(p))},Pr.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ai(e))return e;var i=rr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ct.devicePixelRatio>=2||t===512?"@2x":"")+(At.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var l=this._customAccessToken||function(p){for(var d=0,g=p;d<g.length;d+=1){var b=g[d].match(/^access_token=(.*)$/);if(b)return b[1]}return null}(i.params)||it.ACCESS_TOKEN;return it.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,l)},Pr.prototype.canonicalizeTileURL=function(e,t){var i=rr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=i.path.replace("/v4/","");var p=i.params;return t&&(p=p.filter(function(d){return!d.match(/^access_token=/)})),p.length&&(l+="?"+p.join("&")),l},Pr.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&ai(t),l=[],p=0,d=e.tiles||[];p<d.length;p+=1){var g=d[p];Ai(g)?l.push(this.canonicalizeTileURL(g,i)):l.push(g)}return l},Pr.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=rr(it.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!it.REQUIRE_ACCESS_TOKEN)return fi(e);if(!(t=t||it.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+t),fi(e)};var Sn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ai(e){return Sn.test(e)}var lr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function rr(e){var t=e.match(lr);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function fi(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Oi(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(ye.atob(t[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var di=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};di.prototype.getStorageKey=function(e){var t,i=Oi(it.ACCESS_TOKEN);return t=i&&i.u?ye.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(l,p){return String.fromCharCode(+("0x"+p))})):it.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},di.prototype.fetchEventData=function(){var e=qe("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var l=ye.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var p=ye.localStorage.getItem(i);p&&(this.anonId=p)}catch{dr("Unable to read from LocalStorage")}},di.prototype.saveEventData=function(){var e=qe("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{ye.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&ye.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{dr("Unable to write to LocalStorage")}},di.prototype.processRequests=function(e){},di.prototype.postEvent=function(e,t,i,l){var p=this;if(it.EVENTS_URL){var d=rr(it.EVENTS_URL);d.params.push("access_token="+(l||it.ACCESS_TOKEN||""));var g={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:kr,userId:this.anonId},b=t?Rt(g,t):g,S={url:fi(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=Gr(S,function(C){p.pendingRequest=null,i(C),p.saveEventData(),p.processRequests(l)})}},di.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var Qi,uo,cn=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(i,l,p,d){this.skuToken=p;var g=!(!d&&!it.ACCESS_TOKEN),b=Array.isArray(i)&&i.some(function(S){return ai(S)||Ai(S)});it.EVENTS_URL&&g&&b&&this.queueRequest({id:l,timestamp:Date.now()},d)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var p=this.queue.shift(),d=p.id,g=p.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),hi(this.anonId)||(this.anonId=Hr()),this.postEvent(g,{skuToken:this.skuToken},function(b){b||d&&(l.success[d]=!0)},i))}},t}(di),Rl=new(function(e){function t(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(i,l){it.EVENTS_URL&&it.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(p){return ai(p)||Ai(p)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(i){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Oi(it.ACCESS_TOKEN),d=p?p.u:it.ACCESS_TOKEN,g=d!==this.eventData.tokenU;hi(this.anonId)||(this.anonId=Hr(),g=!0);var b=this.queue.shift();if(this.eventData.lastSuccess){var S=new Date(this.eventData.lastSuccess),C=new Date(b),A=(b-this.eventData.lastSuccess)/864e5;g=g||A>=1||A<-1||S.getDate()!==C.getDate()}else g=!0;if(!g)return this.processRequests();this.postEvent(b,{"enabled.telemetry":!1},function(P){P||(l.eventData.lastSuccess=b,l.eventData.tokenU=d)},i)}},t}(di)),Ol=Rl.postTurnstileEvent.bind(Rl),ks=new cn,Ps=ks.postMapLoadEvent.bind(ks),Wa=500,Bl=50;function Ka(){ye.caches&&!Qi&&(Qi=ye.caches.open("mapbox-tiles"))}function zs(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var ha,Ms=1/0;function Ls(){return ha==null&&(ha=ye.OffscreenCanvas&&new ye.OffscreenCanvas(1,1).getContext("2d")&&typeof ye.createImageBitmap=="function"),ha}var Fl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Fl);var Nl=function(e){function t(i,l,p){l===401&&Ai(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=l,this.url=p,this.name=this.constructor.name,this.message=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),fa=ie()?function(){return self.worker&&self.worker.referrer}:function(){return(ye.location.protocol==="blob:"?ye.parent:ye).location.href},So,To,$a=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(fa())&&!/^\w+:/.test(i))){if(ye.fetch&&ye.Request&&ye.AbortController&&ye.Request.prototype.hasOwnProperty("signal"))return function(l,p){var d,g=new ye.AbortController,b=new ye.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:fa(),signal:g.signal}),S=!1,C=!1,A=(d=b.url).indexOf("sku=")>0&&Ai(d);l.type==="json"&&b.headers.set("Accept","application/json");var P=function(B,G,W){if(!C){if(B&&B.message!=="SecurityError"&&dr(B),G&&W)return R(G);var re=Date.now();ye.fetch(b).then(function(Q){if(Q.ok){var le=A?Q.clone():null;return R(Q,le,re)}return p(new Nl(Q.statusText,Q.status,l.url))}).catch(function(Q){Q.code!==20&&p(new Error(Q.message))})}},R=function(B,G,W){(l.type==="arrayBuffer"?B.arrayBuffer():l.type==="json"?B.json():B.text()).then(function(re){C||(G&&W&&function(Q,le,ge){if(Ka(),Qi){var _e={status:le.status,statusText:le.statusText,headers:new ye.Headers};le.headers.forEach(function(Re,Ge){return _e.headers.set(Ge,Re)});var be=pe(le.headers.get("Cache-Control")||"");be["no-store"]||(be["max-age"]&&_e.headers.set("Expires",new Date(ge+1e3*be["max-age"]).toUTCString()),new Date(_e.headers.get("Expires")).getTime()-ge<42e4||function(Re,Ge){if(uo===void 0)try{new Response(new ReadableStream),uo=!0}catch{uo=!1}uo?Ge(Re.body):Re.blob().then(Ge)}(le,function(Re){var Ge=new ye.Response(Re,_e);Ka(),Qi&&Qi.then(function(Qe){return Qe.put(zs(Q.url),Ge)}).catch(function(Qe){return dr(Qe.message)})}))}}(b,G,W),S=!0,p(null,re,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(function(re){C||p(new Error(re.message))})};return A?function(B,G){if(Ka(),!Qi)return G(null);var W=zs(B.url);Qi.then(function(re){re.match(W).then(function(Q){var le=function(ge){if(!ge)return!1;var _e=new Date(ge.headers.get("Expires")||0),be=pe(ge.headers.get("Cache-Control")||"");return _e>Date.now()&&!be["no-cache"]}(Q);re.delete(W),le&&re.put(W,Q.clone()),G(null,Q,le)}).catch(G)}).catch(G)}(b,P):P(null,null),{cancel:function(){C=!0,S||g.abort()}}}(e,t);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(l,p){var d=new ye.XMLHttpRequest;for(var g in d.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(d.responseType="arraybuffer"),l.headers)d.setRequestHeader(g,l.headers[g]);return l.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=l.credentials==="include",d.onerror=function(){p(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var b=d.response;if(l.type==="json")try{b=JSON.parse(d.response)}catch(S){return p(S)}p(null,b,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else p(new Nl(d.statusText,d.status,l.url))},d.send(l.body),{cancel:function(){return d.abort()}}}(e,t)},Ds=function(e,t){return $a(Rt(e,{type:"arrayBuffer"}),t)},Gr=function(e,t){return $a(Rt(e,{method:"POST"}),t)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";So=[],To=0;var D=function(e,t){if(At.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),To>=it.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return So.push(i),i}To++;var l=!1,p=function(){if(!l)for(l=!0,To--;So.length&&To<it.MAX_PARALLEL_IMAGE_REQUESTS;){var g=So.shift();g.cancelled||(g.cancel=D(g.requestParameters,g.callback).cancel)}},d=Ds(e,function(g,b,S,C){p(),g?t(g):b&&(Ls()?function(A,P){var R=new ye.Blob([new Uint8Array(A)],{type:"image/png"});ye.createImageBitmap(R).then(function(B){P(null,B)}).catch(function(B){P(new Error("Could not load image because of "+B.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(b,t):function(A,P,R,B){var G=new ye.Image,W=ye.URL;G.onload=function(){P(null,G),W.revokeObjectURL(G.src),G.onload=null,ye.requestAnimationFrame(function(){G.src=z})},G.onerror=function(){return P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var re=new ye.Blob([new Uint8Array(A)],{type:"image/png"});G.cacheControl=R,G.expires=B,G.src=A.byteLength?W.createObjectURL(re):z}(b,t,S,C))});return{cancel:function(){d.cancel(),p()}}};function O(e,t,i){i[e]&&i[e].indexOf(t)!==-1||(i[e]=i[e]||[],i[e].push(t))}function j(e,t,i){if(i&&i[e]){var l=i[e].indexOf(t);l!==-1&&i[e].splice(l,1)}}var $=function(e,t){t===void 0&&(t={}),Rt(this,t),this.type=e},ne=function(e){function t(i,l){l===void 0&&(l={}),e.call(this,"error",Rt({error:i},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}($),se=function(){};se.prototype.on=function(e,t){return this._listeners=this._listeners||{},O(e,t,this._listeners),this},se.prototype.off=function(e,t){return j(e,t,this._listeners),j(e,t,this._oneTimeListeners),this},se.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},O(e,t,this._oneTimeListeners),this},se.prototype.fire=function(e,t){typeof e=="string"&&(e=new $(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var l=0,p=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];l<p.length;l+=1)p[l].call(this,e);for(var d=0,g=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<g.length;d+=1){var b=g[d];j(i,b,this._oneTimeListeners),b.call(this,e)}var S=this._eventedParent;S&&(Rt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(e))}else e instanceof ne&&console.error(e.error);return this},se.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},se.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var N={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},J=function(e,t,i,l){this.message=(e?e+": ":"")+i,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function me(e){var t=e.value;return t?[new J(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e){for(var t=arguments,i=[],l=arguments.length-1;l-- >0;)i[l]=t[l+1];for(var p=0,d=i;p<d.length;p+=1){var g=d[p];for(var b in g)e[b]=g[b]}return e}function He(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ie(e){if(Array.isArray(e))return e.map(Ie);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Ie(e[i]);return t}return He(e)}var Ue=function(e){function t(i,l){e.call(this,l),this.message=l,this.key=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),gt=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var i=0,l=t;i<l.length;i+=1){var p=l[i];this.bindings[p[0]]=p[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var ht={kind:"null"},Ae={kind:"number"},lt={kind:"string"},tt={kind:"boolean"},nt={kind:"color"},Ut={kind:"object"},at={kind:"value"},Xt={kind:"collator"},xr={kind:"formatted"},Ht={kind:"resolvedImage"};function ur(e,t){return{kind:"array",itemType:e,N:t}}function Yt(e){if(e.kind==="array"){var t=Yt(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var qi=[ht,Ae,lt,tt,nt,xr,Ut,ur(at),Ht];function hr(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!hr(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var i=0,l=qi;i<l.length;i+=1)if(!hr(l[i],t))return null}}return"Expected "+Yt(e)+" but found "+Yt(t)+" instead."}function Wr(e,t){return t.some(function(i){return i.kind===e.kind})}function vr(e,t){return t.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var $t=Me(function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(b){return(b=Math.round(b))<0?0:b>255?255:b}function p(b){return l(b[b.length-1]==="%"?parseFloat(b)/100*255:parseInt(b))}function d(b){return(S=b[b.length-1]==="%"?parseFloat(b)/100:parseFloat(b))<0?0:S>1?1:S;var S}function g(b,S,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?b+(S-b)*C*6:2*C<1?S:3*C<2?b+(S-b)*(2/3-C)*6:b}try{t.parseCSSColor=function(b){var S,C=b.replace(/ /g,"").toLowerCase();if(C in i)return i[C].slice();if(C[0]==="#")return C.length===4?(S=parseInt(C.substr(1),16))>=0&&S<=4095?[(3840&S)>>4|(3840&S)>>8,240&S|(240&S)>>4,15&S|(15&S)<<4,1]:null:C.length===7&&(S=parseInt(C.substr(1),16))>=0&&S<=16777215?[(16711680&S)>>16,(65280&S)>>8,255&S,1]:null;var A=C.indexOf("("),P=C.indexOf(")");if(A!==-1&&P+1===C.length){var R=C.substr(0,A),B=C.substr(A+1,P-(A+1)).split(","),G=1;switch(R){case"rgba":if(B.length!==4)return null;G=d(B.pop());case"rgb":return B.length!==3?null:[p(B[0]),p(B[1]),p(B[2]),G];case"hsla":if(B.length!==4)return null;G=d(B.pop());case"hsl":if(B.length!==3)return null;var W=(parseFloat(B[0])%360+360)%360/360,re=d(B[1]),Q=d(B[2]),le=Q<=.5?Q*(re+1):Q+re-Q*re,ge=2*Q-le;return[l(255*g(ge,le,W+1/3)),l(255*g(ge,le,W)),l(255*g(ge,le,W-1/3)),G];default:return null}}return null}}catch{}}).parseCSSColor,cr=function(e,t,i,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=i,this.a=l};cr.parse=function(e){if(e){if(e instanceof cr)return e;if(typeof e=="string"){var t=$t(e);if(t)return new cr(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},cr.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+l+")"},cr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var en=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};en.prototype.compare=function(e,t){return this.collator.compare(e,t)},en.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Rs=function(e,t,i,l,p){this.text=e,this.image=t,this.scale=i,this.fontStack=l,this.textColor=p},xi=function(e){this.sections=e};xi.fromString=function(e){return new xi([new Rs(e,null,null,null,null)])},xi.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},xi.factory=function(e){return e instanceof xi?e:xi.fromString(e)},xi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},xi.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var p={};l.fontStack&&(p["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(p["font-scale"]=l.scale),l.textColor&&(p["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(p)}}return e};var tn=function(e){this.name=e.name,this.available=e.available};function nc(e,t,i,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,i,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,i,l]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Os(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof cr||e instanceof en||e instanceof xi||e instanceof tn)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!Os(i[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Os(e[l]))return!1;return!0}return!1}function Kr(e){if(e===null)return ht;if(typeof e=="string")return lt;if(typeof e=="boolean")return tt;if(typeof e=="number")return Ae;if(e instanceof cr)return nt;if(e instanceof en)return Xt;if(e instanceof xi)return xr;if(e instanceof tn)return Ht;if(Array.isArray(e)){for(var t,i=e.length,l=0,p=e;l<p.length;l+=1){var d=Kr(p[l]);if(t){if(t===d)continue;t=at;break}t=d}return ur(t||at,i)}return Ut}function Bs(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof cr||e instanceof xi||e instanceof tn?e.toString():JSON.stringify(e)}tn.prototype.toString=function(){return this.name},tn.fromString=function(e){return e?new tn({name:e,available:!1}):null},tn.prototype.serialize=function(){return["image",this.name]};var Zi=function(e,t){this.type=e,this.value=t};Zi.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Os(e[1]))return t.error("invalid value");var i=e[1],l=Kr(i),p=t.expectedType;return l.kind!=="array"||l.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(l=p),new Zi(l,i)},Zi.prototype.evaluate=function(){return this.value},Zi.prototype.eachChild=function(){},Zi.prototype.outputDefined=function(){return!0},Zi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof xi?this.value.serialize():this.value};var bi=function(e){this.name="ExpressionEvaluationError",this.message=e};bi.prototype.toJSON=function(){return this.message};var Ln={string:lt,number:Ae,boolean:tt,object:Ut},zr=function(e,t){this.type=e,this.args=t};zr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,l=1,p=e[0];if(p==="array"){var d,g;if(e.length>2){var b=e[1];if(typeof b!="string"||!(b in Ln)||b==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);d=Ln[b],l++}else d=at;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);g=e[2],l++}i=ur(d,g)}else i=Ln[p];for(var S=[];l<e.length;l++){var C=t.parse(e[l],l,at);if(!C)return null;S.push(C)}return new zr(i,S)},zr.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!hr(this.type,Kr(i)))return i;if(t===this.args.length-1)throw new bi("Expected value to be of type "+Yt(this.type)+", but found "+Yt(Kr(i))+" instead.")}return null},zr.prototype.eachChild=function(e){this.args.forEach(e)},zr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},zr.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){t.push(i.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var Xn=function(e){this.type=xr,this.sections=e};Xn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return t.error("First argument must be an image or text section.");for(var l=[],p=!1,d=1;d<=e.length-1;++d){var g=e[d];if(p&&typeof g=="object"&&!Array.isArray(g)){p=!1;var b=null;if(g["font-scale"]&&!(b=t.parse(g["font-scale"],1,Ae)))return null;var S=null;if(g["text-font"]&&!(S=t.parse(g["text-font"],1,ur(lt))))return null;var C=null;if(g["text-color"]&&!(C=t.parse(g["text-color"],1,nt)))return null;var A=l[l.length-1];A.scale=b,A.font=S,A.textColor=C}else{var P=t.parse(e[d],1,at);if(!P)return null;var R=P.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,l.push({content:P,scale:null,font:null,textColor:null})}}return new Xn(l)},Xn.prototype.evaluate=function(e){return new xi(this.sections.map(function(t){var i=t.content.evaluate(e);return Kr(i)===Ht?new Rs("",i,null,null,null):new Rs(Bs(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Xn.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},Xn.prototype.outputDefined=function(){return!1},Xn.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var l=i[t];e.push(l.content.serialize());var p={};l.scale&&(p["font-scale"]=l.scale.serialize()),l.font&&(p["text-font"]=l.font.serialize()),l.textColor&&(p["text-color"]=l.textColor.serialize()),e.push(p)}return e};var Tn=function(e){this.type=Ht,this.input=e};Tn.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var i=t.parse(e[1],1,lt);return i?new Tn(i):t.error("No image name provided.")},Tn.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=tn.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},Tn.prototype.eachChild=function(e){e(this.input)},Tn.prototype.outputDefined=function(){return!1},Tn.prototype.serialize=function(){return["image",this.input.serialize()]};var Vp={"to-boolean":tt,"to-color":nt,"to-number":Ae,"to-string":lt},Dn=function(e,t){this.type=e,this.args=t};Dn.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=Vp[i],p=[],d=1;d<e.length;d++){var g=t.parse(e[d],d,at);if(!g)return null;p.push(g)}return new Dn(l,p)},Dn.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,i,l=0,p=this.args;l<p.length;l+=1){if(i=null,(t=p[l].evaluate(e))instanceof cr)return t;if(typeof t=="string"){var d=e.parseColor(t);if(d)return d}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":nc(t[0],t[1],t[2],t[3])))return new cr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new bi(i||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var g=null,b=0,S=this.args;b<S.length;b+=1){if((g=S[b].evaluate(e))===null)return 0;var C=Number(g);if(!isNaN(C))return C}throw new bi("Could not convert "+JSON.stringify(g)+" to number.")}return this.type.kind==="formatted"?xi.fromString(Bs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?tn.fromString(Bs(this.args[0].evaluate(e))):Bs(this.args[0].evaluate(e))},Dn.prototype.eachChild=function(e){this.args.forEach(e)},Dn.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Dn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Xn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tn(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var _d=["Unknown","Point","LineString","Polygon"],Co=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Co.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Co.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?_d[this.feature.type]:this.feature.type:null},Co.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Co.prototype.canonicalID=function(){return this.canonical},Co.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Co.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=cr.parse(e)),t};var ki=function(e,t,i,l){this.name=e,this.type=t,this._evaluate=i,this.args=l};ki.prototype.evaluate=function(e){return this._evaluate(e,this.args)},ki.prototype.eachChild=function(e){this.args.forEach(e)},ki.prototype.outputDefined=function(){return!1},ki.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},ki.parse=function(e,t){var i,l=e[0],p=ki.definitions[l];if(!p)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(p)?p[0]:p.type,g=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=g.filter(function(Et){var st=Et[0];return!Array.isArray(st)||st.length===e.length-1}),S=null,C=0,A=b;C<A.length;C+=1){var P=A[C],R=P[0],B=P[1];S=new Vo(t.registry,t.path,null,t.scope);for(var G=[],W=!1,re=1;re<e.length;re++){var Q=e[re],le=Array.isArray(R)?R[re-1]:R.type,ge=S.parse(Q,1+G.length,le);if(!ge){W=!0;break}G.push(ge)}if(!W)if(Array.isArray(R)&&R.length!==G.length)S.error("Expected "+R.length+" arguments, but found "+G.length+" instead.");else{for(var _e=0;_e<G.length;_e++){var be=Array.isArray(R)?R[_e]:R.type,Re=G[_e];S.concat(_e+1).checkSubtype(be,Re.type)}if(S.errors.length===0)return new ki(l,d,B,G)}}if(b.length===1)(i=t.errors).push.apply(i,S.errors);else{for(var Ge=(b.length?b:g).map(function(Et){var st;return st=Et[0],Array.isArray(st)?"("+st.map(Yt).join(", ")+")":"("+Yt(st.type)+"...)"}).join(" | "),Qe=[],_t=1;_t<e.length;_t++){var ot=t.parse(e[_t],1+Qe.length);if(!ot)return null;Qe.push(Yt(ot.type))}t.error("Expected arguments of type "+Ge+", but found ("+Qe.join(", ")+") instead.")}return null},ki.register=function(e,t){for(var i in ki.definitions=t,t)e[i]=ki};var co=function(e,t,i){this.type=Xt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function Hi(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function da(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function xd(e,t){var i=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(i*p*8192),Math.round(l*p*8192)]}function bd(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function oc(e,t){for(var i,l,p,d,g,b,S,C=!1,A=0,P=t.length;A<P;A++)for(var R=t[A],B=0,G=R.length;B<G-1;B++){if((d=(i=e)[0]-(l=R[B])[0])*(S=i[1]-(p=R[B+1])[1])-(b=i[0]-p[0])*(g=i[1]-l[1])==0&&d*b<=0&&g*S<=0)return!1;bd(e,R[B],R[B+1])&&(C=!C)}return C}function wd(e,t){for(var i=0;i<t.length;i++)if(oc(e,t[i]))return!0;return!1}function jp(e,t,i,l){var p=l[0]-i[0],d=l[1]-i[1],g=(e[0]-i[0])*d-p*(e[1]-i[1]),b=(t[0]-i[0])*d-p*(t[1]-i[1]);return g>0&&b<0||g<0&&b>0}function Ed(e,t,i){for(var l=0,p=i;l<p.length;l+=1)for(var d=p[l],g=0;g<d.length-1;++g)if((P=[(A=d[g+1])[0]-(C=d[g])[0],A[1]-C[1]])[0]*(R=[(S=t)[0]-(b=e)[0],S[1]-b[1]])[1]-P[1]*R[0]!=0&&jp(b,S,C,A)&&jp(C,A,b,S))return!0;var b,S,C,A,P,R;return!1}function qp(e,t){for(var i=0;i<e.length;++i)if(!oc(e[i],t))return!1;for(var l=0;l<e.length-1;++l)if(Ed(e[l],e[l+1],t))return!1;return!0}function Zp(e,t){for(var i=0;i<t.length;i++)if(qp(e,t[i]))return!0;return!1}function Xa(e,t,i){for(var l=[],p=0;p<e.length;p++){for(var d=[],g=0;g<e[p].length;g++){var b=xd(e[p][g],i);Hi(t,b),d.push(b)}l.push(d)}return l}function ac(e,t,i){for(var l=[],p=0;p<e.length;p++){var d=Xa(e[p],t,i);l.push(d)}return l}function Fs(e,t,i,l){if(e[0]<i[0]||e[0]>i[2]){var p=.5*l,d=e[0]-i[0]>p?-l:i[0]-e[0]>p?l:0;d===0&&(d=e[0]-i[2]>p?-l:i[2]-e[0]>p?l:0),e[0]+=d}Hi(t,e)}function Hp(e,t,i,l){for(var p=8192*Math.pow(2,l.z),d=[8192*l.x,8192*l.y],g=[],b=0,S=e;b<S.length;b+=1)for(var C=0,A=S[b];C<A.length;C+=1){var P=A[C],R=[P.x+d[0],P.y+d[1]];Fs(R,t,i,p),g.push(R)}return g}function Ul(e,t,i,l){for(var p,d=8192*Math.pow(2,l.z),g=[8192*l.x,8192*l.y],b=[],S=0,C=e;S<C.length;S+=1){for(var A=[],P=0,R=C[S];P<R.length;P+=1){var B=R[P],G=[B.x+g[0],B.y+g[1]];Hi(t,G),A.push(G)}b.push(A)}if(t[2]-t[0]<=d/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var W=0,re=b;W<re.length;W+=1)for(var Q=0,le=re[W];Q<le.length;Q+=1)Fs(le[Q],t,i,d)}return b}co.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return t.error("Collator options argument must be an object.");var l=t.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,tt);if(!l)return null;var p=t.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,tt);if(!p)return null;var d=null;return i.locale&&!(d=t.parse(i.locale,1,lt))?null:new co(l,p,d)},co.prototype.evaluate=function(e){return new en(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},co.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},co.prototype.outputDefined=function(){return!1},co.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Rn=function(e,t){this.type=tt,this.geojson=e,this.geometries=t};function Fo(e){if(e instanceof ki&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Rn)return!1;var t=!0;return e.eachChild(function(i){t&&!Fo(i)&&(t=!1)}),t}function No(e){if(e instanceof ki&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(i){t&&!No(i)&&(t=!1)}),t}function ma(e,t){if(e instanceof ki&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(l){i&&!ma(l,t)&&(i=!1)}),i}Rn.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Os(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var l=0;l<i.features.length;++l){var p=i.features[l].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Rn(i,i.features[l].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Rn(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Rn(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Rn.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var g=Xa(i.coordinates,p,d),b=Hp(t.geometry(),l,p,d);if(!da(l,p))return!1;for(var S=0,C=b;S<C.length;S+=1)if(!oc(C[S],g))return!1}if(i.type==="MultiPolygon"){var A=ac(i.coordinates,p,d),P=Hp(t.geometry(),l,p,d);if(!da(l,p))return!1;for(var R=0,B=P;R<B.length;R+=1)if(!wd(B[R],A))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,i){var l=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],d=t.canonicalID();if(i.type==="Polygon"){var g=Xa(i.coordinates,p,d),b=Ul(t.geometry(),l,p,d);if(!da(l,p))return!1;for(var S=0,C=b;S<C.length;S+=1)if(!qp(C[S],g))return!1}if(i.type==="MultiPolygon"){var A=ac(i.coordinates,p,d),P=Ul(t.geometry(),l,p,d);if(!da(l,p))return!1;for(var R=0,B=P;R<B.length;R+=1)if(!Zp(B[R],A))return!1}return!0}(e,this.geometries)}return!1},Rn.prototype.eachChild=function(){},Rn.prototype.outputDefined=function(){return!0},Rn.prototype.serialize=function(){return["within",this.geojson]};var Uo=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Uo.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Uo(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Uo.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Uo.prototype.eachChild=function(){},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){return["var",this.name]};var Vo=function(e,t,i,l,p){t===void 0&&(t=[]),l===void 0&&(l=new gt),p===void 0&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(d){return"["+d+"]"}).join(""),this.scope=l,this.errors=p,this.expectedType=i};function Vl(e,t){for(var i,l=e.length-1,p=0,d=l,g=0;p<=d;)if((i=e[g=Math.floor((p+d)/2)])<=t){if(g===l||t<e[g+1])return g;p=g+1}else{if(!(i>t))throw new bi("Input is not a number.");d=g-1}return 0}Vo.prototype.parse=function(e,t,i,l,p){return p===void 0&&(p={}),t?this.concat(t,i,l)._parse(e,p):this._parse(e,p)},Vo.prototype._parse=function(e,t){function i(C,A,P){return P==="assert"?new zr(A,[C]):P==="coerce"?new Dn(A,[C]):C}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[l];if(p){var d=p.parse(e,this);if(!d)return null;if(this.expectedType){var g=this.expectedType,b=d.type;if(g.kind!=="string"&&g.kind!=="number"&&g.kind!=="boolean"&&g.kind!=="object"&&g.kind!=="array"||b.kind!=="value")if(g.kind!=="color"&&g.kind!=="formatted"&&g.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(g,b))return null}else d=i(d,g,t.typeAnnotation||"coerce");else d=i(d,g,t.typeAnnotation||"assert")}if(!(d instanceof Zi)&&d.type.kind!=="resolvedImage"&&function C(A){if(A instanceof Uo)return C(A.boundExpression);if(A instanceof ki&&A.name==="error"||A instanceof co||A instanceof Rn)return!1;var P=A instanceof Dn||A instanceof zr,R=!0;return A.eachChild(function(B){R=P?R&&C(B):R&&B instanceof Zi}),!!R&&Fo(A)&&ma(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var S=new Co;try{d=new Zi(d.type,d.evaluate(S))}catch(C){return this.error(C.message),null}}return d}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Vo.prototype.concat=function(e,t,i){var l=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new Vo(this.registry,l,t||null,p,this.errors)},Vo.prototype.error=function(e){for(var t=arguments,i=[],l=arguments.length-1;l-- >0;)i[l]=t[l+1];var p=""+this.key+i.map(function(d){return"["+d+"]"}).join("");this.errors.push(new Ue(p,e))},Vo.prototype.checkSubtype=function(e,t){var i=hr(e,t);return i&&this.error(i),i};var pn=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,p=i;l<p.length;l+=1){var d=p[l],g=d[1];this.labels.push(d[0]),this.outputs.push(g)}};function ei(e,t,i){return e*(1-i)+t*i}pn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Ae);if(!i)return null;var l=[],p=null;t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(var d=1;d<e.length;d+=2){var g=d===1?-1/0:e[d],b=e[d+1],S=d,C=d+1;if(typeof g!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(l.length&&l[l.length-1][0]>=g)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);var A=t.parse(b,C,p);if(!A)return null;p=p||A.type,l.push([g,A])}return new pn(p,i,l)},pn.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;return l>=t[p-1]?i[p-1].evaluate(e):i[Vl(t,l)].evaluate(e)},pn.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},pn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},pn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ja=Object.freeze({__proto__:null,number:ei,color:function(e,t,i){return new cr(ei(e.r,t.r,i),ei(e.g,t.g,i),ei(e.b,t.b,i),ei(e.a,t.a,i))},array:function(e,t,i){return e.map(function(l,p){return ei(l,t[p],i)})}}),Gp=6/29*3*(6/29),Sd=Math.PI/180,Td=180/Math.PI;function sc(e){return e>.008856451679035631?Math.pow(e,1/3):e/Gp+4/29}function lc(e){return e>6/29?e*e*e:Gp*(e-4/29)}function uc(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cc(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Wp(e){var t=cc(e.r),i=cc(e.g),l=cc(e.b),p=sc((.4124564*t+.3575761*i+.1804375*l)/.95047),d=sc((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*d-16,a:500*(p-d),b:200*(d-sc((.0193339*t+.119192*i+.9503041*l)/1.08883)),alpha:e.a}}function Kp(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*lc(t),i=.95047*lc(i),l=1.08883*lc(l),new cr(uc(3.2404542*i-1.5371385*t-.4985314*l),uc(-.969266*i+1.8760108*t+.041556*l),uc(.0556434*i-.2040259*t+1.0572252*l),e.alpha)}function Cd(e,t,i){var l=t-e;return e+i*(l>180||l<-180?l-360*Math.round(l/360):l)}var Ns={forward:Wp,reverse:Kp,interpolate:function(e,t,i){return{l:ei(e.l,t.l,i),a:ei(e.a,t.a,i),b:ei(e.b,t.b,i),alpha:ei(e.alpha,t.alpha,i)}}},Us={forward:function(e){var t=Wp(e),i=t.l,l=t.a,p=t.b,d=Math.atan2(p,l)*Td;return{h:d<0?d+360:d,c:Math.sqrt(l*l+p*p),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Sd,i=e.c;return Kp({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Cd(e.h,t.h,i),c:ei(e.c,t.c,i),l:ei(e.l,t.l,i),alpha:ei(e.alpha,t.alpha,i)}}},$p=Object.freeze({__proto__:null,lab:Ns,hcl:Us}),Pi=function(e,t,i,l,p){this.type=e,this.operator=t,this.interpolation=i,this.input=l,this.labels=[],this.outputs=[];for(var d=0,g=p;d<g.length;d+=1){var b=g[d],S=b[1];this.labels.push(b[0]),this.outputs.push(S)}};function pc(e,t,i,l){var p=l-i,d=e-i;return p===0?0:t===1?d/p:(Math.pow(t,d)-1)/(Math.pow(t,p)-1)}Pi.interpolationFactor=function(e,t,i,l){var p=0;if(e.name==="exponential")p=pc(t,e.base,i,l);else if(e.name==="linear")p=pc(t,1,i,l);else if(e.name==="cubic-bezier"){var d=e.controlPoints;p=new Y(d[0],d[1],d[2],d[3]).solve(pc(t,1,i,l))}return p},Pi.parse=function(e,t){var i=e[0],l=e[1],p=e[2],d=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var g=l[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:g}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var b=l.slice(1);if(b.length!==4||b.some(function(re){return typeof re!="number"||re<0||re>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:b}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Ae)))return null;var S=[],C=null;i==="interpolate-hcl"||i==="interpolate-lab"?C=nt:t.expectedType&&t.expectedType.kind!=="value"&&(C=t.expectedType);for(var A=0;A<d.length;A+=2){var P=d[A],R=d[A+1],B=A+3,G=A+4;if(typeof P!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(S.length&&S[S.length-1][0]>=P)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);var W=t.parse(R,G,C);if(!W)return null;C=C||W.type,S.push([P,W])}return C.kind==="number"||C.kind==="color"||C.kind==="array"&&C.itemType.kind==="number"&&typeof C.N=="number"?new Pi(C,i,l,p,S):t.error("Type "+Yt(C)+" is not interpolatable.")},Pi.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(t.length===1)return i[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return i[0].evaluate(e);var p=t.length;if(l>=t[p-1])return i[p-1].evaluate(e);var d=Vl(t,l),g=Pi.interpolationFactor(this.interpolation,l,t[d],t[d+1]),b=i[d].evaluate(e),S=i[d+1].evaluate(e);return this.operator==="interpolate"?Ja[this.type.kind.toLowerCase()](b,S,g):this.operator==="interpolate-hcl"?Us.reverse(Us.interpolate(Us.forward(b),Us.forward(S),g)):Ns.reverse(Ns.interpolate(Ns.forward(b),Ns.forward(S),g))},Pi.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Pi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Pi.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var jo=function(e,t){this.type=e,this.args=t};jo.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,l=t.expectedType;l&&l.kind!=="value"&&(i=l);for(var p=[],d=0,g=e.slice(1);d<g.length;d+=1){var b=t.parse(g[d],1+p.length,i,void 0,{typeAnnotation:"omit"});if(!b)return null;i=i||b.type,p.push(b)}var S=l&&p.some(function(C){return hr(l,C.type)});return new jo(S?at:i,p)},jo.prototype.evaluate=function(e){for(var t,i=null,l=0,p=0,d=this.args;p<d.length&&(l++,(i=d[p].evaluate(e))&&i instanceof tn&&!i.available&&(t||(t=i.name),i=null,l===this.args.length&&(i=t)),i===null);p+=1);return i},jo.prototype.eachChild=function(e){this.args.forEach(e)},jo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},jo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var qo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};qo.prototype.evaluate=function(e){return this.result.evaluate(e)},qo.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},qo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],l=1;l<e.length-1;l+=2){var p=e[l];if(typeof p!="string")return t.error("Expected string, but found "+typeof p+" instead.",l);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var d=t.parse(e[l+1],l+1);if(!d)return null;i.push([p,d])}var g=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return g?new qo(i,g):null},qo.prototype.outputDefined=function(){return this.result.outputDefined()},qo.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var l=i[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var ga=function(e,t,i){this.type=e,this.index=t,this.input=i};ga.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ae),l=t.parse(e[2],2,ur(t.expectedType||at));return i&&l?new ga(l.type.itemType,i,l):null},ga.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new bi("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new bi("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new bi("Array index must be an integer, but found "+t+" instead.");return i[t]},ga.prototype.eachChild=function(e){e(this.index),e(this.input)},ga.prototype.outputDefined=function(){return!1},ga.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ya=function(e,t){this.type=tt,this.needle=e,this.haystack=t};ya.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),l=t.parse(e[2],2,at);return i&&l?Wr(i.type,[tt,lt,Ae,ht,at])?new ya(i,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(i.type)+" instead"):null},ya.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!vr(t,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Kr(t))+" instead.");if(!vr(i,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+Yt(Kr(i))+" instead.");return i.indexOf(t)>=0},ya.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},ya.prototype.outputDefined=function(){return!0},ya.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Zo=function(e,t,i){this.type=Ae,this.needle=e,this.haystack=t,this.fromIndex=i};Zo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),l=t.parse(e[2],2,at);if(!i||!l)return null;if(!Wr(i.type,[tt,lt,Ae,ht,at]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Ae);return p?new Zo(i,l,p):null}return new Zo(i,l)},Zo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!vr(t,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Kr(t))+" instead.");if(!vr(i,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+Yt(Kr(i))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return i.indexOf(t,l)}return i.indexOf(t)},Zo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var va=function(e,t,i,l,p,d){this.inputType=e,this.type=t,this.input=i,this.cases=l,this.outputs=p,this.otherwise=d};va.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var p={},d=[],g=2;g<e.length-1;g+=2){var b=e[g],S=e[g+1];Array.isArray(b)||(b=[b]);var C=t.concat(g);if(b.length===0)return C.error("Expected at least one branch label.");for(var A=0,P=b;A<P.length;A+=1){var R=P[A];if(typeof R!="number"&&typeof R!="string")return C.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return C.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof R=="number"&&Math.floor(R)!==R)return C.error("Numeric branch labels must be integer values.");if(i){if(C.checkSubtype(i,Kr(R)))return null}else i=Kr(R);if(p[String(R)]!==void 0)return C.error("Branch labels must be unique.");p[String(R)]=d.length}var B=t.parse(S,g,l);if(!B)return null;l=l||B.type,d.push(B)}var G=t.parse(e[1],1,at);if(!G)return null;var W=t.parse(e[e.length-1],e.length-1,l);return W?G.type.kind!=="value"&&t.concat(1).checkSubtype(i,G.type)?null:new va(i,l,G,p,d,W):null},va.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Kr(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},va.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},va.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},va.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],l={},p=0,d=Object.keys(this.cases).sort();p<d.length;p+=1){var g=d[p];(P=l[this.cases[g]])===void 0?(l[this.cases[g]]=i.length,i.push([this.cases[g],[g]])):i[P][1].push(g)}for(var b=function(B){return e.inputType.kind==="number"?Number(B):B},S=0,C=i;S<C.length;S+=1){var A=C[S],P=A[0],R=A[1];t.push(R.length===1?b(R[0]):R.map(b)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var _a=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};_a.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);for(var l=[],p=1;p<e.length-1;p+=2){var d=t.parse(e[p],p,tt);if(!d)return null;var g=t.parse(e[p+1],p+1,i);if(!g)return null;l.push([d,g]),i=i||g.type}var b=t.parse(e[e.length-1],e.length-1,i);return b?new _a(i,l,b):null},_a.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];if(l[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},_a.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var l=i[t],p=l[1];e(l[0]),e(p)}e(this.otherwise)},_a.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},_a.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Ho=function(e,t,i,l){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=l};function Xp(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Jp(e,t,i,l){return l.compare(t,i)===0}function br(e,t,i){var l=e!=="=="&&e!=="!=";return function(){function p(d,g,b){this.type=tt,this.lhs=d,this.rhs=g,this.collator=b,this.hasUntypedArgument=d.type.kind==="value"||g.type.kind==="value"}return p.parse=function(d,g){if(d.length!==3&&d.length!==4)return g.error("Expected two or three arguments.");var b=d[0],S=g.parse(d[1],1,at);if(!S)return null;if(!Xp(b,S.type))return g.concat(1).error('"'+b+`" comparisons are not supported for type '`+Yt(S.type)+"'.");var C=g.parse(d[2],2,at);if(!C)return null;if(!Xp(b,C.type))return g.concat(2).error('"'+b+`" comparisons are not supported for type '`+Yt(C.type)+"'.");if(S.type.kind!==C.type.kind&&S.type.kind!=="value"&&C.type.kind!=="value")return g.error("Cannot compare types '"+Yt(S.type)+"' and '"+Yt(C.type)+"'.");l&&(S.type.kind==="value"&&C.type.kind!=="value"?S=new zr(C.type,[S]):S.type.kind!=="value"&&C.type.kind==="value"&&(C=new zr(S.type,[C])));var A=null;if(d.length===4){if(S.type.kind!=="string"&&C.type.kind!=="string"&&S.type.kind!=="value"&&C.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(!(A=g.parse(d[3],3,Xt)))return null}return new p(S,C,A)},p.prototype.evaluate=function(d){var g=this.lhs.evaluate(d),b=this.rhs.evaluate(d);if(l&&this.hasUntypedArgument){var S=Kr(g),C=Kr(b);if(S.kind!==C.kind||S.kind!=="string"&&S.kind!=="number")throw new bi('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+S.kind+", "+C.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var A=Kr(g),P=Kr(b);if(A.kind!=="string"||P.kind!=="string")return t(d,g,b)}return this.collator?i(d,g,b,this.collator.evaluate(d)):t(d,g,b)},p.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var d=[e];return this.eachChild(function(g){d.push(g.serialize())}),d},p}()}Ho.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,at),l=t.parse(e[2],2,Ae);if(!i||!l)return null;if(!Wr(i.type,[ur(at),lt,at]))return t.error("Expected first argument to be of type array or string, but found "+Yt(i.type)+" instead");if(e.length===4){var p=t.parse(e[3],3,Ae);return p?new Ho(i.type,i,l,p):null}return new Ho(i.type,i,l)},Ho.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!vr(t,["string","array"]))throw new bi("Expected first argument to be of type array or string, but found "+Yt(Kr(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(i,l)}return t.slice(i)},Ho.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Id=br("==",function(e,t,i){return t===i},Jp),jl=br("!=",function(e,t,i){return t!==i},function(e,t,i,l){return!Jp(0,t,i,l)}),Yp=br("<",function(e,t,i){return t<i},function(e,t,i,l){return l.compare(t,i)<0}),Qp=br(">",function(e,t,i){return t>i},function(e,t,i,l){return l.compare(t,i)>0}),eh=br("<=",function(e,t,i){return t<=i},function(e,t,i,l){return l.compare(t,i)<=0}),th=br(">=",function(e,t,i){return t>=i},function(e,t,i,l){return l.compare(t,i)>=0}),xa=function(e,t,i,l,p){this.type=lt,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=l,this.maxFractionDigits=p};xa.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Ae);if(!i)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var p=null;if(l.locale&&!(p=t.parse(l.locale,1,lt)))return null;var d=null;if(l.currency&&!(d=t.parse(l.currency,1,lt)))return null;var g=null;if(l["min-fraction-digits"]&&!(g=t.parse(l["min-fraction-digits"],1,Ae)))return null;var b=null;return l["max-fraction-digits"]&&!(b=t.parse(l["max-fraction-digits"],1,Ae))?null:new xa(i,p,d,g,b)},xa.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},xa.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},xa.prototype.outputDefined=function(){return!1},xa.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Go=function(e){this.type=Ae,this.input=e};Go.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+Yt(i.type)+" instead."):new Go(i):null},Go.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new bi("Expected value to be of type string or array, but found "+Yt(Kr(t))+" instead.")},Go.prototype.eachChild=function(e){e(this.input)},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ba={"==":Id,"!=":jl,">":Qp,"<":Yp,">=":th,"<=":eh,array:zr,at:ga,boolean:zr,case:_a,coalesce:jo,collator:co,format:Xn,image:Tn,in:ya,"index-of":Zo,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:Go,let:qo,literal:Zi,match:va,number:zr,"number-format":xa,object:zr,slice:Ho,step:pn,string:zr,"to-boolean":Dn,"to-color":Dn,"to-number":Dn,"to-string":Dn,var:Uo,within:Rn};function rh(e,t){var i=t[0],l=t[1],p=t[2],d=t[3];i=i.evaluate(e),l=l.evaluate(e),p=p.evaluate(e);var g=d?d.evaluate(e):1,b=nc(i,l,p,g);if(b)throw new bi(b);return new cr(i/255*g,l/255*g,p/255*g,g)}function ih(e,t){return e in t}function hc(e,t){var i=t[e];return i===void 0?null:i}function wa(e){return{type:e}}function nh(e){return{result:"success",value:e}}function Ea(e){return{result:"error",value:e}}function Sa(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function oh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Vs(e){return!!e.expression&&e.expression.interpolated}function Tr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function ql(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Ad(e){return e}function Ya(e,t,i){return e!==void 0?e:t!==void 0?t:i!==void 0?i:void 0}function ah(e,t,i,l,p){return Ya(typeof i===p?l[i]:void 0,e.default,t.default)}function kd(e,t,i){if(Tr(i)!=="number")return Ya(e.default,t.default);var l=e.stops.length;if(l===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[l-1][0])return e.stops[l-1][1];var p=Vl(e.stops.map(function(d){return d[0]}),i);return e.stops[p][1]}function sh(e,t,i){var l=e.base!==void 0?e.base:1;if(Tr(i)!=="number")return Ya(e.default,t.default);var p=e.stops.length;if(p===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[p-1][0])return e.stops[p-1][1];var d=Vl(e.stops.map(function(P){return P[0]}),i),g=function(P,R,B,G){var W=G-B,re=P-B;return W===0?0:R===1?re/W:(Math.pow(R,re)-1)/(Math.pow(R,W)-1)}(i,l,e.stops[d][0],e.stops[d+1][0]),b=e.stops[d][1],S=e.stops[d+1][1],C=Ja[t.type]||Ad;if(e.colorSpace&&e.colorSpace!=="rgb"){var A=$p[e.colorSpace];C=function(P,R){return A.reverse(A.interpolate(A.forward(P),A.forward(R),g))}}return typeof b.evaluate=="function"?{evaluate:function(){for(var P=arguments,R=[],B=arguments.length;B--;)R[B]=P[B];var G=b.evaluate.apply(void 0,R),W=S.evaluate.apply(void 0,R);if(G!==void 0&&W!==void 0)return C(G,W,g)}}:C(b,S,g)}function Zl(e,t,i){return t.type==="color"?i=cr.parse(i):t.type==="formatted"?i=xi.fromString(i.toString()):t.type==="resolvedImage"?i=tn.fromString(i.toString()):Tr(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Ya(i,e.default,t.default)}ki.register(ba,{error:[{kind:"error"},[lt],function(e,t){throw new bi(t[0].evaluate(e))}],typeof:[lt,[at],function(e,t){return Yt(Kr(t[0].evaluate(e)))}],"to-rgba":[ur(Ae,4),[nt],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[nt,[Ae,Ae,Ae],rh],rgba:[nt,[Ae,Ae,Ae,Ae],rh],has:{type:tt,overloads:[[[lt],function(e,t){return ih(t[0].evaluate(e),e.properties())}],[[lt,Ut],function(e,t){var i=t[1];return ih(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:at,overloads:[[[lt],function(e,t){return hc(t[0].evaluate(e),e.properties())}],[[lt,Ut],function(e,t){var i=t[1];return hc(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[at,[lt],function(e,t){return hc(t[0].evaluate(e),e.featureState||{})}],properties:[Ut,[],function(e){return e.properties()}],"geometry-type":[lt,[],function(e){return e.geometryType()}],id:[at,[],function(e){return e.id()}],zoom:[Ae,[],function(e){return e.globals.zoom}],"heatmap-density":[Ae,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ae,[],function(e){return e.globals.lineProgress||0}],accumulated:[at,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Ae,wa(Ae),function(e,t){for(var i=0,l=0,p=t;l<p.length;l+=1)i+=p[l].evaluate(e);return i}],"*":[Ae,wa(Ae),function(e,t){for(var i=1,l=0,p=t;l<p.length;l+=1)i*=p[l].evaluate(e);return i}],"-":{type:Ae,overloads:[[[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Ae],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ae,[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Ae,[Ae,Ae],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Ae,[],function(){return Math.LN2}],pi:[Ae,[],function(){return Math.PI}],e:[Ae,[],function(){return Math.E}],"^":[Ae,[Ae,Ae],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Ae,[Ae],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ae,[Ae],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ae,[Ae],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ae,[Ae],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ae,[Ae],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ae,[Ae],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ae,[Ae],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ae,[Ae],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ae,wa(Ae),function(e,t){return Math.min.apply(Math,t.map(function(i){return i.evaluate(e)}))}],max:[Ae,wa(Ae),function(e,t){return Math.max.apply(Math,t.map(function(i){return i.evaluate(e)}))}],abs:[Ae,[Ae],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ae,[Ae],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ae,[Ae],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ae,[Ae],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[tt,[lt,at],function(e,t){var i=t[0],l=t[1];return e.properties()[i.value]===l.value}],"filter-id-==":[tt,[at],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[tt,[lt],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[tt,[lt,at],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<d}],"filter-id-<":[tt,[at],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[tt,[lt,at],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>d}],"filter-id->":[tt,[at],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[tt,[lt,at],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p<=d}],"filter-id-<=":[tt,[at],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[tt,[lt,at],function(e,t){var i=t[0],l=t[1],p=e.properties()[i.value],d=l.value;return typeof p==typeof d&&p>=d}],"filter-id->=":[tt,[at],function(e,t){var i=t[0],l=e.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[tt,[at],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[tt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[tt,[ur(lt)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[tt,[ur(at)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[tt,[lt,ur(at)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[tt,[lt,ur(at)],function(e,t){var i=t[0],l=t[1];return function(p,d,g,b){for(;g<=b;){var S=g+b>>1;if(d[S]===p)return!0;d[S]>p?b=S-1:g=S+1}return!1}(e.properties()[i.value],l.value,0,l.value.length-1)}],all:{type:tt,overloads:[[[tt,tt],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[wa(tt),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(!l[i].evaluate(e))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[wa(tt),function(e,t){for(var i=0,l=t;i<l.length;i+=1)if(l[i].evaluate(e))return!0;return!1}]]},"!":[tt,[tt],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[tt,[lt],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[lt,[lt],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[lt,[lt],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[lt,wa(at),function(e,t){return t.map(function(i){return Bs(i.evaluate(e))}).join("")}],"resolved-locale":[lt,[Xt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Qa=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Co,this._defaultValue=t?function(i){return i.type==="color"&&ql(i.default)?new cr(0,0,0,0):i.type==="color"?cr.parse(i.default)||null:i.default===void 0?null:i.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function js(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ba}function Hl(e,t){var i=new Vo(ba,[],t?function(p){var d={color:nt,string:lt,number:Ae,enum:lt,boolean:tt,formatted:xr,resolvedImage:Ht};return p.type==="array"?ur(d[p.value]||at,p.length):d[p.type]}(t):void 0),l=i.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?nh(new Qa(l,t)):Ea(i.errors)}Qa.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},Qa.prototype.evaluate=function(e,t,i,l,p,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=l,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=d||null;try{var g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!=g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new bi("Expected value to be one of "+Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(g)+" instead.");return g}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}};var qs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!No(t.expression)};qs.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},qs.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)};var es=function(e,t,i,l){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!No(t.expression),this.interpolationType=l};function lh(e,t){if((e=Hl(e,t)).result==="error")return e;var i=e.value.expression,l=Fo(i);if(!l&&!Sa(t))return Ea([new Ue("","data expressions not supported")]);var p=ma(i,["zoom"]);if(!p&&!oh(t))return Ea([new Ue("","zoom expressions not supported")]);var d=function g(b){var S=null;if(b instanceof qo)S=g(b.result);else if(b instanceof jo)for(var C=0,A=b.args;C<A.length&&!(S=g(A[C]));C+=1);else(b instanceof pn||b instanceof Pi)&&b.input instanceof ki&&b.input.name==="zoom"&&(S=b);return S instanceof Ue||b.eachChild(function(P){var R=g(P);R instanceof Ue?S=R:!S&&R?S=new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):S&&R&&S!==R&&(S=new Ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),S}(i);return d||p?d instanceof Ue?Ea([d]):d instanceof Pi&&!Vs(t)?Ea([new Ue("",'"interpolate" expressions cannot be used with this property')]):nh(d?new es(l?"camera":"composite",e.value,d.labels,d instanceof Pi?d.interpolation:void 0):new qs(l?"constant":"source",e.value)):Ea([new Ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}es.prototype.evaluateWithoutErrorHandling=function(e,t,i,l,p,d){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,l,p,d)},es.prototype.evaluate=function(e,t,i,l,p,d){return this._styleExpression.evaluate(e,t,i,l,p,d)},es.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,e,t,i):0};var ts=function(e,t){this._parameters=e,this._specification=t,Ne(this,function i(l,p){var d,g,b,S=p.type==="color",C=l.stops&&typeof l.stops[0][0]=="object",A=C||!(C||l.property!==void 0),P=l.type||(Vs(p)?"exponential":"interval");if(S&&((l=Ne({},l)).stops&&(l.stops=l.stops.map(function(ot){return[ot[0],cr.parse(ot[1])]})),l.default=cr.parse(l.default?l.default:p.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!$p[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(P==="exponential")d=sh;else if(P==="interval")d=kd;else if(P==="categorical"){d=ah,g=Object.create(null);for(var R=0,B=l.stops;R<B.length;R+=1){var G=B[R];g[G[0]]=G[1]}b=typeof l.stops[0][0]}else{if(P!=="identity")throw new Error('Unknown function type "'+P+'"');d=Zl}if(C){for(var W={},re=[],Q=0;Q<l.stops.length;Q++){var le=l.stops[Q],ge=le[0].zoom;W[ge]===void 0&&(W[ge]={zoom:ge,type:l.type,property:l.property,default:l.default,stops:[]},re.push(ge)),W[ge].stops.push([le[0].value,le[1]])}for(var _e=[],be=0,Re=re;be<Re.length;be+=1){var Ge=Re[be];_e.push([W[Ge].zoom,i(W[Ge],p)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Pi.interpolationFactor.bind(void 0,Qe),zoomStops:_e.map(function(ot){return ot[0]}),evaluate:function(ot,Et){var st=ot.zoom;return sh({stops:_e,base:l.base},p,st).evaluate(st,Et)}}}if(A){var _t=P==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:_t,interpolationFactor:Pi.interpolationFactor.bind(void 0,_t),zoomStops:l.stops.map(function(ot){return ot[0]}),evaluate:function(ot){return d(l,p,ot.zoom,g,b)}}}return{kind:"source",evaluate:function(ot,Et){var st=Et&&Et.properties?Et.properties[l.property]:void 0;return st===void 0?Ya(l.default,p.default):d(l,p,st,g,b)}}}(this._parameters,this._specification))};function Jn(e){var t=e.key,i=e.value,l=e.valueSpec||{},p=e.objectElementValidators||{},d=e.style,g=e.styleSpec,b=[],S=Tr(i);if(S!=="object")return[new J(t,i,"object expected, "+S+" found")];for(var C in i){var A=C.split(".")[0],P=l[A]||l["*"],R=void 0;if(p[A])R=p[A];else if(l[A])R=Jt;else if(p["*"])R=p["*"];else{if(!l["*"]){b.push(new J(t,i[C],'unknown property "'+C+'"'));continue}R=Jt}b=b.concat(R({key:(t&&t+".")+C,value:i[C],valueSpec:P,style:d,styleSpec:g,object:i,objectKey:C},i))}for(var B in l)p[B]||l[B].required&&l[B].default===void 0&&i[B]===void 0&&b.push(new J(t,i,'missing required property "'+B+'"'));return b}function uh(e){var t=e.value,i=e.valueSpec,l=e.style,p=e.styleSpec,d=e.key,g=e.arrayElementValidator||Jt;if(Tr(t)!=="array")return[new J(d,t,"array expected, "+Tr(t)+" found")];if(i.length&&t.length!==i.length)return[new J(d,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new J(d,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var b={type:i.value,values:i.values};p.$version<7&&(b.function=i.function),Tr(i.value)==="object"&&(b=i.value);for(var S=[],C=0;C<t.length;C++)S=S.concat(g({array:t,arrayIndex:C,value:t[C],valueSpec:b,style:l,styleSpec:p,key:d+"["+C+"]"}));return S}function ch(e){var t=e.key,i=e.value,l=e.valueSpec,p=Tr(i);return p==="number"&&i!=i&&(p="NaN"),p!=="number"?[new J(t,i,"number expected, "+p+" found")]:"minimum"in l&&i<l.minimum?[new J(t,i,i+" is less than the minimum value "+l.minimum)]:"maximum"in l&&i>l.maximum?[new J(t,i,i+" is greater than the maximum value "+l.maximum)]:[]}function ph(e){var t,i,l,p=e.valueSpec,d=He(e.value.type),g={},b=d!=="categorical"&&e.value.property===void 0,S=!b,C=Tr(e.value.stops)==="array"&&Tr(e.value.stops[0])==="array"&&Tr(e.value.stops[0][0])==="object",A=Jn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(B){if(d==="identity")return[new J(B.key,B.value,'identity function may not have a "stops" property')];var G=[],W=B.value;return G=G.concat(uh({key:B.key,value:W,valueSpec:B.valueSpec,style:B.style,styleSpec:B.styleSpec,arrayElementValidator:P})),Tr(W)==="array"&&W.length===0&&G.push(new J(B.key,W,"array must have at least one stop")),G},default:function(B){return Jt({key:B.key,value:B.value,valueSpec:p,style:B.style,styleSpec:B.styleSpec})}}});return d==="identity"&&b&&A.push(new J(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||A.push(new J(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Vs(e.valueSpec)&&A.push(new J(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(S&&!Sa(e.valueSpec)?A.push(new J(e.key,e.value,"property functions not supported")):b&&!oh(e.valueSpec)&&A.push(new J(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!C||e.value.property!==void 0||A.push(new J(e.key,e.value,'"property" property is required')),A;function P(B){var G=[],W=B.value,re=B.key;if(Tr(W)!=="array")return[new J(re,W,"array expected, "+Tr(W)+" found")];if(W.length!==2)return[new J(re,W,"array length 2 expected, length "+W.length+" found")];if(C){if(Tr(W[0])!=="object")return[new J(re,W,"object expected, "+Tr(W[0])+" found")];if(W[0].zoom===void 0)return[new J(re,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new J(re,W,"object stop key must have value")];if(l&&l>He(W[0].zoom))return[new J(re,W[0].zoom,"stop zoom values must appear in ascending order")];He(W[0].zoom)!==l&&(l=He(W[0].zoom),i=void 0,g={}),G=G.concat(Jn({key:re+"[0]",value:W[0],valueSpec:{zoom:{}},style:B.style,styleSpec:B.styleSpec,objectElementValidators:{zoom:ch,value:R}}))}else G=G.concat(R({key:re+"[0]",value:W[0],valueSpec:{},style:B.style,styleSpec:B.styleSpec},W));return js(Ie(W[1]))?G.concat([new J(re+"[1]",W[1],"expressions are not allowed in function stops.")]):G.concat(Jt({key:re+"[1]",value:W[1],valueSpec:p,style:B.style,styleSpec:B.styleSpec}))}function R(B,G){var W=Tr(B.value),re=He(B.value),Q=B.value!==null?B.value:G;if(t){if(W!==t)return[new J(B.key,Q,W+" stop domain type must match previous stop domain type "+t)]}else t=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new J(B.key,Q,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&d!=="categorical"){var le="number expected, "+W+" found";return Sa(p)&&d===void 0&&(le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new J(B.key,Q,le)]}return d!=="categorical"||W!=="number"||isFinite(re)&&Math.floor(re)===re?d!=="categorical"&&W==="number"&&i!==void 0&&re<i?[new J(B.key,Q,"stop domain values must appear in ascending order")]:(i=re,d==="categorical"&&re in g?[new J(B.key,Q,"stop domain values must be unique")]:(g[re]=!0,[])):[new J(B.key,Q,"integer expected, found "+re)]}}function Ta(e){var t=(e.expressionContext==="property"?lh:Hl)(Ie(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new J(""+e.key+l.key,e.value,l.message)});var i=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new J(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!No(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!No(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!ma(i,["zoom","feature-state"]))return[new J(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Fo(i))return[new J(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zs(e){var t=e.key,i=e.value,l=e.valueSpec,p=[];return Array.isArray(l.values)?l.values.indexOf(He(i))===-1&&p.push(new J(t,i,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(l.values).indexOf(He(i))===-1&&p.push(new J(t,i,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(i)+" found")),p}function Gl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var l=i[t];if(!Gl(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}ts.deserialize=function(e){return new ts(e._parameters,e._specification)},ts.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var fc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wl(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};Gl(e)||(e=Kl(e));var t=Hl(e,fc);if(t.result==="error")throw new Error(t.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,l,p){return t.value.evaluate(i,l,{},p)},needGeometry:function i(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var p=1;p<l.length;p++)if(i(l[p]))return!0;return!1}(e)}}function Pd(e,t){return e<t?-1:e>t?1:0}function Kl(e){if(!e)return!0;var t,i=e[0];return e.length<=1?i!=="any":i==="=="?dc(e[1],e[2],"=="):i==="!="?$l(dc(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?dc(e[1],e[2],i):i==="any"?(t=e.slice(1),["any"].concat(t.map(Kl))):i==="all"?["all"].concat(e.slice(1).map(Kl)):i==="none"?["all"].concat(e.slice(1).map(Kl).map($l)):i==="in"?hh(e[1],e.slice(2)):i==="!in"?$l(hh(e[1],e.slice(2))):i==="has"?fh(e[1]):i==="!has"?$l(fh(e[1])):i!=="within"||e}function dc(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function hh(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(i){return typeof i!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Pd)]]:["filter-in-small",e,["literal",t]]}}function fh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function $l(e){return["!",e]}function mc(e){return Gl(Ie(e.value))?Ta(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(i){var l=i.value,p=i.key;if(Tr(l)!=="array")return[new J(p,l,"array expected, "+Tr(l)+" found")];var d,g=i.styleSpec,b=[];if(l.length<1)return[new J(p,l,"filter array must have at least 1 element")];switch(b=b.concat(Zs({key:p+"[0]",value:l[0],valueSpec:g.filter_operator,style:i.style,styleSpec:i.styleSpec})),He(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&He(l[1])==="$type"&&b.push(new J(p,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&b.push(new J(p,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(d=Tr(l[1]))!=="string"&&b.push(new J(p+"[1]",l[1],"string expected, "+d+" found"));for(var S=2;S<l.length;S++)d=Tr(l[S]),He(l[1])==="$type"?b=b.concat(Zs({key:p+"["+S+"]",value:l[S],valueSpec:g.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&b.push(new J(p+"["+S+"]",l[S],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var C=1;C<l.length;C++)b=b.concat(t({key:p+"["+C+"]",value:l[C],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Tr(l[1]),l.length!==2?b.push(new J(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="string"&&b.push(new J(p+"[1]",l[1],"string expected, "+d+" found"));break;case"within":d=Tr(l[1]),l.length!==2?b.push(new J(p,l,'filter array for "'+l[0]+'" operator must have 2 elements')):d!=="object"&&b.push(new J(p+"[1]",l[1],"object expected, "+d+" found"))}return b}(e)}function gc(e,t){var i=e.key,l=e.style,p=e.styleSpec,d=e.value,g=e.objectKey,b=p[t+"_"+e.layerType];if(!b)return[];var S=g.match(/^(.*)-transition$/);if(t==="paint"&&S&&b[S[1]]&&b[S[1]].transition)return Jt({key:i,value:d,valueSpec:p.transition,style:l,styleSpec:p});var C,A=e.valueSpec||b[g];if(!A)return[new J(i,d,'unknown property "'+g+'"')];if(Tr(d)==="string"&&Sa(A)&&!A.tokens&&(C=/^{([^}]+)}$/.exec(d)))return[new J(i,d,'"'+g+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(C[1])+" }`.")];var P=[];return e.layerType==="symbol"&&(g==="text-field"&&l&&!l.glyphs&&P.push(new J(i,d,'use of "text-field" requires a style "glyphs" property')),g==="text-font"&&ql(Ie(d))&&He(d.type)==="identity"&&P.push(new J(i,d,'"text-font" does not support identity functions'))),P.concat(Jt({key:e.key,value:d,valueSpec:A,style:l,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:g}))}function yc(e){return gc(e,"paint")}function Hs(e){return gc(e,"layout")}function dh(e){var t=[],i=e.value,l=e.key,p=e.style,d=e.styleSpec;i.type||i.ref||t.push(new J(l,i,'either "type" or "ref" is required'));var g,b=He(i.type),S=He(i.ref);if(i.id)for(var C=He(i.id),A=0;A<e.arrayIndex;A++){var P=p.layers[A];He(P.id)===C&&t.push(new J(l,i.id,'duplicate layer id "'+i.id+'", previously used at line '+P.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(G){G in i&&t.push(new J(l,i[G],'"'+G+'" is prohibited for ref layers'))}),p.layers.forEach(function(G){He(G.id)===S&&(g=G)}),g?g.ref?t.push(new J(l,i.ref,"ref cannot reference another ref layer")):b=He(g.type):t.push(new J(l,i.ref,'ref layer "'+S+'" not found'));else if(b!=="background")if(i.source){var R=p.sources&&p.sources[i.source],B=R&&He(R.type);R?B==="vector"&&b==="raster"?t.push(new J(l,i.source,'layer "'+i.id+'" requires a raster source')):B==="raster"&&b!=="raster"?t.push(new J(l,i.source,'layer "'+i.id+'" requires a vector source')):B!=="vector"||i["source-layer"]?B==="raster-dem"&&b!=="hillshade"?t.push(new J(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!i.paint||!i.paint["line-gradient"]||B==="geojson"&&R.lineMetrics||t.push(new J(l,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new J(l,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new J(l,i.source,'source "'+i.source+'" not found'))}else t.push(new J(l,i,'missing required property "source"'));return t=t.concat(Jn({key:l,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Jt({key:l+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:mc,layout:function(G){return Jn({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function(W){return Hs(Ne({layerType:b},W))}}})},paint:function(G){return Jn({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function(W){return yc(Ne({layerType:b},W))}}})}}}))}function Ca(e){var t=e.value,i=e.key,l=Tr(t);return l!=="string"?[new J(i,t,"string expected, "+l+" found")]:[]}var Mr={promoteId:function(e){var t=e.key,i=e.value;if(Tr(i)==="string")return Ca({key:t,value:i});var l=[];for(var p in i)l.push.apply(l,Ca({key:t+"."+p,value:i[p]}));return l}};function Xl(e){var t=e.value,i=e.key,l=e.styleSpec,p=e.style;if(!t.type)return[new J(i,t,'"type" is required')];var d,g=He(t.type);switch(g){case"vector":case"raster":case"raster-dem":return Jn({key:i,value:t,valueSpec:l["source_"+g.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:Mr});case"geojson":if(d=Jn({key:i,value:t,valueSpec:l.source_geojson,style:p,styleSpec:l,objectElementValidators:Mr}),t.cluster)for(var b in t.clusterProperties){var S=t.clusterProperties[b],C=S[0],A=typeof C=="string"?[C,["accumulated"],["get",b]]:C;d.push.apply(d,Ta({key:i+"."+b+".map",value:S[1],expressionContext:"cluster-map"})),d.push.apply(d,Ta({key:i+"."+b+".reduce",value:A,expressionContext:"cluster-reduce"}))}return d;case"video":return Jn({key:i,value:t,valueSpec:l.source_video,style:p,styleSpec:l});case"image":return Jn({key:i,value:t,valueSpec:l.source_image,style:p,styleSpec:l});case"canvas":return[new J(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zs({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:l})}}function Ia(e){var t=e.value,i=e.styleSpec,l=i.light,p=e.style,d=[],g=Tr(t);if(t===void 0)return d;if(g!=="object")return d.concat([new J("light",t,"object expected, "+g+" found")]);for(var b in t){var S=b.match(/^(.*)-transition$/);d=d.concat(S&&l[S[1]]&&l[S[1]].transition?Jt({key:b,value:t[b],valueSpec:i.transition,style:p,styleSpec:i}):l[b]?Jt({key:b,value:t[b],valueSpec:l[b],style:p,styleSpec:i}):[new J(b,t[b],'unknown property "'+b+'"')])}return d}var Wo={"*":function(){return[]},array:uh,boolean:function(e){var t=e.value,i=e.key,l=Tr(t);return l!=="boolean"?[new J(i,t,"boolean expected, "+l+" found")]:[]},number:ch,color:function(e){var t=e.key,i=e.value,l=Tr(i);return l!=="string"?[new J(t,i,"color expected, "+l+" found")]:$t(i)===null?[new J(t,i,'color expected, "'+i+'" found')]:[]},constants:me,enum:Zs,filter:mc,function:ph,layer:dh,object:Jn,source:Xl,light:Ia,string:Ca,formatted:function(e){return Ca(e).length===0?[]:Ta(e)},resolvedImage:function(e){return Ca(e).length===0?[]:Ta(e)}};function Jt(e){var t=e.value,i=e.valueSpec,l=e.styleSpec;return i.expression&&ql(He(t))?ph(e):i.expression&&js(Ie(t))?Ta(e):i.type&&Wo[i.type]?Wo[i.type](e):Jn(Ne({},e,{valueSpec:i.type?l[i.type]:i}))}function Cr(e){var t=e.value,i=e.key,l=Ca(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new J(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new J(i,t,'"glyphs" url must include a "{range}" token'))),l}function Cn(e,t){t===void 0&&(t=N);var i=[];return i=i.concat(Jt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Cr,"*":function(){return[]}}})),e.constants&&(i=i.concat(me({key:"constants",value:e.constants,style:e,styleSpec:t}))),Gs(i)}function Gs(e){return[].concat(e).sort(function(t,i){return t.line-i.line})}function rs(e){return function(){for(var t=arguments,i=[],l=arguments.length;l--;)i[l]=t[l];return Gs(e.apply(this,i))}}Cn.source=rs(Xl),Cn.light=rs(Ia),Cn.layer=rs(dh),Cn.filter=rs(mc),Cn.paintProperty=rs(yc),Cn.layoutProperty=rs(Hs);var Ws=Cn,zd=Ws.light,Md=Ws.paintProperty,Ks=Ws.layoutProperty;function $s(e,t){var i=!1;if(t&&t.length)for(var l=0,p=t;l<p.length;l+=1)e.fire(new ne(new Error(p[l].message))),i=!0;return i}var Io=si;function si(e,t,i){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(i=p[2]);for(var d=0;d<this.d*this.d;d++){var g=p[3+d],b=p[3+d+1];l.push(g===b?null:p.subarray(g,b))}var S=p[3+l.length+1];this.keys=p.subarray(p[3+l.length],S),this.bboxes=p.subarray(S),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var C=0;C<this.d*this.d;C++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var A=i/t*e;this.min=-A,this.max=e+A}si.prototype.insert=function(e,t,i,l,p){this._forEachCell(t,i,l,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(p)},si.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},si.prototype._insertCell=function(e,t,i,l,p,d){this.cells[p].push(d)},si.prototype.query=function(e,t,i,l,p){var d=this.min,g=this.max;if(e<=d&&t<=d&&g<=i&&g<=l&&!p)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(e,t,i,l,this._queryCell,b,{},p),b},si.prototype._queryCell=function(e,t,i,l,p,d,g,b){var S=this.cells[p];if(S!==null)for(var C=this.keys,A=this.bboxes,P=0;P<S.length;P++){var R=S[P];if(g[R]===void 0){var B=4*R;(b?b(A[B+0],A[B+1],A[B+2],A[B+3]):e<=A[B+2]&&t<=A[B+3]&&i>=A[B+0]&&l>=A[B+1])?(g[R]=!0,d.push(C[R])):g[R]=!1}}},si.prototype._forEachCell=function(e,t,i,l,p,d,g,b){for(var S=this._convertToCellCoord(e),C=this._convertToCellCoord(t),A=this._convertToCellCoord(i),P=this._convertToCellCoord(l),R=S;R<=A;R++)for(var B=C;B<=P;B++){var G=this.d*B+R;if((!b||b(this._convertFromCellCoord(R),this._convertFromCellCoord(B),this._convertFromCellCoord(R+1),this._convertFromCellCoord(B+1)))&&p.call(this,e,t,i,l,G,d,g,b))return}},si.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},si.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},si.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var p=new Int32Array(t+i+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var d=t,g=0;g<e.length;g++){var b=e[g];p[3+g]=d,p.set(b,d),d+=b.length}return p[3+e.length]=d,p.set(this.keys,d),p[3+e.length+1]=d+=this.keys.length,p.set(this.bboxes,d),d+=this.bboxes.length,p.buffer};var Xs=ye.ImageData,mh=ye.ImageBitmap,ti={};function ft(e,t,i){i===void 0&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),ti[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var hn in ft("Object",Object),Io.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Io.deserialize=function(e){return new Io(e.buffer)},ft("Grid",Io),ft("Color",cr),ft("Error",Error),ft("ResolvedImage",tn),ft("StylePropertyFunction",ts),ft("StyleExpression",Qa,{omit:["_evaluator"]}),ft("ZoomDependentExpression",es),ft("ZoomConstantExpression",qs),ft("CompoundExpression",ki,{omit:["_evaluate"]}),ba)ba[hn]._classRegistryKey||ft("Expression_"+hn,ba[hn]);function Jl(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function is(e){return mh&&e instanceof mh}function Yn(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Jl(e)||is(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof Xs)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],p=0,d=e;p<d.length;p+=1)l.push(Yn(d[p],t));return l}if(typeof e=="object"){var g=e.constructor,b=g._classRegistryKey;if(!b)throw new Error("can't serialize object of unregistered class");var S=g.serialize?g.serialize(e,t):{};if(!g.serialize){for(var C in e)if(e.hasOwnProperty(C)&&!(ti[b].omit.indexOf(C)>=0)){var A=e[C];S[C]=ti[b].shallow.indexOf(C)>=0?A:Yn(A,t)}e instanceof Error&&(S.message=e.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return b!=="Object"&&(S.$name=b),S}throw new Error("can't serialize object of type "+typeof e)}function fn(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Jl(e)||is(e)||ArrayBuffer.isView(e)||e instanceof Xs)return e;if(Array.isArray(e))return e.map(fn);if(typeof e=="object"){var t=e.$name||"Object",i=ti[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var l=Object.create(i.prototype),p=0,d=Object.keys(e);p<d.length;p+=1){var g=d[p];if(g!=="$name"){var b=e[g];l[g]=ti[t].shallow.indexOf(g)>=0?b:fn(b)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var vc=function(){this.first=!0};vc.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function _c(e){for(var t=0,i=e;t<i.length;t+=1)if(Yl(i[t].charCodeAt(0)))return!0;return!1}function Yl(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function xc(e){return!(Yl(e)||function(t){return!!(rt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||rt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||rt["Letterlike Symbols"](t)||rt["Number Forms"](t)||rt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||rt["Control Pictures"](t)&&t!==9251||rt["Optical Character Recognition"](t)||rt["Enclosed Alphanumerics"](t)||rt["Geometric Shapes"](t)||rt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||rt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||rt["CJK Symbols and Punctuation"](t)||rt.Katakana(t)||rt["Private Use Area"](t)||rt["CJK Compatibility Forms"](t)||rt["Small Form Variants"](t)||rt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function On(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function dn(e,t){return!(!t&&On(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function Ql(e){for(var t=0,i=e;t<i.length;t+=1)if(On(i[t].charCodeAt(0)))return!0;return!1}var eu=null,mn="unavailable",Ao=null,gh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(mn="error"),eu&&eu(e)};function Js(){bc.fire(new $("pluginStateChange",{pluginStatus:mn,pluginURL:Ao}))}var bc=new se,wc=function(){return mn},Qn=function(){if(mn!=="deferred"||!Ao)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");mn="loading",Js(),Ao&&Ds({url:Ao},function(e){e?gh(e):(mn="loaded",Js())})},In={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return mn==="loaded"||In.applyArabicShaping!=null},isLoading:function(){return mn==="loading"},setState:function(e){mn=e.pluginStatus,Ao=e.pluginURL},isParsed:function(){return In.applyArabicShaping!=null&&In.processBidirectionalText!=null&&In.processStyledBidirectionalText!=null},getPluginURL:function(){return Ao}},Gt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vc,this.transition={})};Gt.prototype.isSupportedScript=function(e){return function(t,i){for(var l=0,p=t;l<p.length;l+=1)if(!dn(p[l].charCodeAt(0),i))return!1;return!0}(e,In.isLoaded())},Gt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Gt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var po=function(e,t){this.property=e,this.value=t,this.expression=function(i,l){if(ql(i))return new ts(i,l);if(js(i)){var p=lh(i,l);if(p.result==="error")throw new Error(p.value.map(function(g){return g.key+": "+g.message}).join(", "));return p.value}var d=i;return typeof i=="string"&&l.type==="color"&&(d=cr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(t===void 0?e.specification.default:t,e.specification)};po.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},po.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var Bn=function(e){this.property=e,this.value=new po(e,void 0)};Bn.prototype.transitioned=function(e,t){return new Aa(this.property,this.value,t,Rt({},e.transition,this.transition),e.now)},Bn.prototype.untransitioned=function(){return new Aa(this.property,this.value,null,{},0)};var zi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};zi.prototype.getValue=function(e){return Ii(this._values[e].value.value)},zi.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Bn(this._values[e].property)),this._values[e].value=new po(this._values[e].property,t===null?void 0:Ii(t))},zi.prototype.getTransition=function(e){return Ii(this._values[e].transition)},zi.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Bn(this._values[e].property)),this._values[e].transition=Ii(t)||void 0},zi.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p);var d=this.getTransition(l);d!==void 0&&(e[l+"-transition"]=d)}return e},zi.prototype.transitioned=function(e,t){for(var i=new Ko(this._properties),l=0,p=Object.keys(this._values);l<p.length;l+=1){var d=p[l];i._values[d]=this._values[d].transitioned(e,t._values[d])}return i},zi.prototype.untransitioned=function(){for(var e=new Ko(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t];e._values[l]=this._values[l].untransitioned()}return e};var Aa=function(e,t,i,l,p){this.property=e,this.value=t,this.begin=p+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=i)};Aa.prototype.possiblyEvaluate=function(e,t,i){var l=e.now||0,p=this.value.possiblyEvaluate(e,t,i),d=this.prior;if(d){if(l>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(l<this.begin)return d.possiblyEvaluate(e,t,i);var g=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,t,i),p,function(b){if(b<=0)return 0;if(b>=1)return 1;var S=b*b,C=S*b;return 4*(b<.5?C:3*(b-S)+C-.75)}(g))}return p};var Ko=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Ko.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Ys(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var g=d[p];l._values[g]=this._values[g].possiblyEvaluate(e,t,i)}return l},Ko.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var eo=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};eo.prototype.getValue=function(e){return Ii(this._values[e].value)},eo.prototype.setValue=function(e,t){this._values[e]=new po(this._values[e].property,t===null?void 0:Ii(t))},eo.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var l=i[t],p=this.getValue(l);p!==void 0&&(e[l]=p)}return e},eo.prototype.possiblyEvaluate=function(e,t,i){for(var l=new Ys(this._properties),p=0,d=Object.keys(this._values);p<d.length;p+=1){var g=d[p];l._values[g]=this._values[g].possiblyEvaluate(e,t,i)}return l};var Gi=function(e,t,i){this.property=e,this.value=t,this.parameters=i};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Gi.prototype.evaluate=function(e,t,i,l){return this.property.evaluate(this.value,this.parameters,e,t,i,l)};var Ys=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Ys.prototype.get=function(e){return this._values[e]};var bt=function(e){this.specification=e};bt.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},bt.prototype.interpolate=function(e,t,i){var l=Ja[this.specification.type];return l?l(e,t,i):e};var yt=function(e,t){this.specification=e,this.overrides=t};yt.prototype.possiblyEvaluate=function(e,t,i,l){return new Gi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},i,l)}:e.expression,t)},yt.prototype.interpolate=function(e,t,i){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},e.parameters);var l=Ja[this.specification.type];return l?new Gi(this,{kind:"constant",value:l(e.value.value,t.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,t,i,l,p,d){return e.kind==="constant"?e.value:e.evaluate(t,i,l,p,d)};var tu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l,p,d){if(i.value===void 0)return new Gi(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){var g=i.expression.evaluate(l,null,{},p,d),b=i.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,S=this._calculate(b,b,b,l);return new Gi(this,{kind:"constant",value:S},l)}if(i.expression.kind==="camera"){var C=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Gi(this,{kind:"constant",value:C},l)}return new Gi(this,i.expression,l)},t.prototype.evaluate=function(i,l,p,d,g,b){if(i.kind==="source"){var S=i.evaluate(l,p,d,g,b);return this._calculate(S,S,S,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,d),i.evaluate({zoom:Math.floor(l.zoom)},p,d),i.evaluate({zoom:Math.floor(l.zoom)+1},p,d),l):i.value},t.prototype._calculate=function(i,l,p,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}},t.prototype.interpolate=function(i){return i},t}(yt),Wi=function(e){this.specification=e};Wi.prototype.possiblyEvaluate=function(e,t,i,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var p=e.expression.evaluate(t,null,{},i,l);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new Gt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Gt(Math.floor(t.zoom),t)),e.expression.evaluate(new Gt(Math.floor(t.zoom+1),t)),t)}},Wi.prototype._calculate=function(e,t,i,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},Wi.prototype.interpolate=function(e){return e};var to=function(e){this.specification=e};to.prototype.possiblyEvaluate=function(e,t,i,l){return!!e.expression.evaluate(t,null,{},i,l)},to.prototype.interpolate=function(){return!1};var Mi=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new po(i,void 0),p=this.defaultTransitionablePropertyValues[t]=new Bn(i);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",bt),ft("CrossFadedDataDrivenProperty",tu),ft("CrossFadedProperty",Wi),ft("ColorRampProperty",to);var ho=function(e){function t(i,l){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new eo(l.layout)),l.paint)){for(var p in this._transitionablePaint=new zi(l.paint),i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ys(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},t.prototype.setLayoutProperty=function(i,l,p){p===void 0&&(p={}),l!=null&&this._validate(Ks,"layers."+this.id+".layout."+i,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)},t.prototype.getPaintProperty=function(i){return Mn(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},t.prototype.setPaintProperty=function(i,l,p){if(p===void 0&&(p={}),l!=null&&this._validate(Md,"layers."+this.id+".paint."+i,i,l,p))return!1;if(Mn(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;var d=this._transitionablePaint._values[i],g=d.property.specification["property-type"]==="cross-faded-data-driven",b=d.value.isDataDriven(),S=d.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);var C=this._transitionablePaint._values[i].value;return C.isDataDriven()||b||g||this._handleOverridablePaintPropertyUpdate(i,S,C)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!1},t.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)},t.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Qr(i,function(l,p){return!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(i,l,p,d,g){return g===void 0&&(g={}),(!g||g.validate!==!1)&&$s(this,i.call(Ws,{key:l,layerType:this.type,objectKey:p,value:d,styleSpec:N,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var i in this.paint._values){var l=this.paint.get(i);if(l instanceof Gi&&Sa(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(se),Ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ru=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},fr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wi(e,t){t===void 0&&(t=1);var i=0,l=0;return{members:e.map(function(p){var d=Ec[p.type].BYTES_PER_ELEMENT,g=i=yh(i,Math.max(t,d)),b=p.components||1;return l=Math.max(l,d),i+=d*b,{name:p.name,type:p.type,components:b,offset:g}}),size:yh(i,Math.max(l,t)),alignment:t}}function yh(e,t){return Math.ceil(e/t)*t}fr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},fr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},fr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},fr.prototype.clear=function(){this.length=0},fr.prototype.resize=function(e){this.reserve(e),this.length=e},fr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},fr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ka=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.int16[d+0]=l,this.int16[d+1]=p,i},t}(fr);ka.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",ka);var Sc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var g=this.length;return this.resize(g+1),this.emplace(g,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,g){var b=4*i;return this.int16[b+0]=l,this.int16[b+1]=p,this.int16[b+2]=d,this.int16[b+3]=g,i},t}(fr);Sc.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",Sc);var ko=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b){var S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,d,g,b)},t.prototype.emplace=function(i,l,p,d,g,b,S){var C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=d,this.int16[C+3]=g,this.int16[C+4]=b,this.int16[C+5]=S,i},t}(fr);ko.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",ko);var gn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b){var S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,d,g,b)},t.prototype.emplace=function(i,l,p,d,g,b,S){var C=4*i,A=8*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.uint8[A+4]=d,this.uint8[A+5]=g,this.uint8[A+6]=b,this.uint8[A+7]=S,i},t}(fr);gn.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",gn);var ns=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.float32[d+0]=l,this.float32[d+1]=p,i},t}(fr);ns.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",ns);var fo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b,S,C,A,P){var R=this.length;return this.resize(R+1),this.emplace(R,i,l,p,d,g,b,S,C,A,P)},t.prototype.emplace=function(i,l,p,d,g,b,S,C,A,P,R){var B=10*i;return this.uint16[B+0]=l,this.uint16[B+1]=p,this.uint16[B+2]=d,this.uint16[B+3]=g,this.uint16[B+4]=b,this.uint16[B+5]=S,this.uint16[B+6]=C,this.uint16[B+7]=A,this.uint16[B+8]=P,this.uint16[B+9]=R,i},t}(fr);fo.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",fo);var iu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b,S,C,A,P,R,B){var G=this.length;return this.resize(G+1),this.emplace(G,i,l,p,d,g,b,S,C,A,P,R,B)},t.prototype.emplace=function(i,l,p,d,g,b,S,C,A,P,R,B,G){var W=12*i;return this.int16[W+0]=l,this.int16[W+1]=p,this.int16[W+2]=d,this.int16[W+3]=g,this.uint16[W+4]=b,this.uint16[W+5]=S,this.uint16[W+6]=C,this.uint16[W+7]=A,this.int16[W+8]=P,this.int16[W+9]=R,this.int16[W+10]=B,this.int16[W+11]=G,i},t}(fr);iu.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",iu);var os=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var g=3*i;return this.float32[g+0]=l,this.float32[g+1]=p,this.float32[g+2]=d,i},t}(fr);os.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",os);var Qs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint32[1*i+0]=l,i},t}(fr);Qs.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",Qs);var Tc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b,S,C,A){var P=this.length;return this.resize(P+1),this.emplace(P,i,l,p,d,g,b,S,C,A)},t.prototype.emplace=function(i,l,p,d,g,b,S,C,A,P){var R=10*i,B=5*i;return this.int16[R+0]=l,this.int16[R+1]=p,this.int16[R+2]=d,this.int16[R+3]=g,this.int16[R+4]=b,this.int16[R+5]=S,this.uint32[B+3]=C,this.uint16[R+8]=A,this.uint16[R+9]=P,i},t}(fr);Tc.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",Tc);var as=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b){var S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,d,g,b)},t.prototype.emplace=function(i,l,p,d,g,b,S){var C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=d,this.int16[C+3]=g,this.int16[C+4]=b,this.int16[C+5]=S,i},t}(fr);as.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",as);var Pa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g){var b=this.length;return this.resize(b+1),this.emplace(b,i,l,p,d,g)},t.prototype.emplace=function(i,l,p,d,g,b){var S=4*i,C=8*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=d,this.int16[C+6]=g,this.int16[C+7]=b,i},t}(fr);Pa.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Pa);var Cc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var g=this.length;return this.resize(g+1),this.emplace(g,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,g){var b=12*i,S=3*i;return this.uint8[b+0]=l,this.uint8[b+1]=p,this.float32[S+1]=d,this.float32[S+2]=g,i},t}(fr);Cc.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Cc);var $o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var g=3*i;return this.uint16[g+0]=l,this.uint16[g+1]=p,this.uint16[g+2]=d,i},t}(fr);$o.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",$o);var Xo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le){var ge=this.length;return this.resize(ge+1),this.emplace(ge,i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le)},t.prototype.emplace=function(i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le,ge){var _e=24*i,be=12*i,Re=48*i;return this.int16[_e+0]=l,this.int16[_e+1]=p,this.uint16[_e+2]=d,this.uint16[_e+3]=g,this.uint32[be+2]=b,this.uint32[be+3]=S,this.uint32[be+4]=C,this.uint16[_e+10]=A,this.uint16[_e+11]=P,this.uint16[_e+12]=R,this.float32[be+7]=B,this.float32[be+8]=G,this.uint8[Re+36]=W,this.uint8[Re+37]=re,this.uint8[Re+38]=Q,this.uint32[be+10]=le,this.int16[_e+22]=ge,i},t}(fr);Xo.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Xo);var nu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le,ge,_e,be,Re,Ge,Qe,_t,ot,Et,st,Nt){var kt=this.length;return this.resize(kt+1),this.emplace(kt,i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le,ge,_e,be,Re,Ge,Qe,_t,ot,Et,st,Nt)},t.prototype.emplace=function(i,l,p,d,g,b,S,C,A,P,R,B,G,W,re,Q,le,ge,_e,be,Re,Ge,Qe,_t,ot,Et,st,Nt,kt){var vt=34*i,qt=17*i;return this.int16[vt+0]=l,this.int16[vt+1]=p,this.int16[vt+2]=d,this.int16[vt+3]=g,this.int16[vt+4]=b,this.int16[vt+5]=S,this.int16[vt+6]=C,this.int16[vt+7]=A,this.uint16[vt+8]=P,this.uint16[vt+9]=R,this.uint16[vt+10]=B,this.uint16[vt+11]=G,this.uint16[vt+12]=W,this.uint16[vt+13]=re,this.uint16[vt+14]=Q,this.uint16[vt+15]=le,this.uint16[vt+16]=ge,this.uint16[vt+17]=_e,this.uint16[vt+18]=be,this.uint16[vt+19]=Re,this.uint16[vt+20]=Ge,this.uint16[vt+21]=Qe,this.uint16[vt+22]=_t,this.uint32[qt+12]=ot,this.float32[qt+13]=Et,this.float32[qt+14]=st,this.float32[qt+15]=Nt,this.float32[qt+16]=kt,i},t}(fr);nu.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",nu);var Jo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.float32[1*i+0]=l,i},t}(fr);Jo.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",Jo);var Fn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var g=3*i;return this.int16[g+0]=l,this.int16[g+1]=p,this.int16[g+2]=d,i},t}(fr);Fn.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",Fn);var Ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p){var d=this.length;return this.resize(d+1),this.emplace(d,i,l,p)},t.prototype.emplace=function(i,l,p,d){var g=4*i;return this.uint32[2*i+0]=l,this.uint16[g+2]=p,this.uint16[g+3]=d,i},t}(fr);Ic.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Ic);var el=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l){var p=this.length;return this.resize(p+1),this.emplace(p,i,l)},t.prototype.emplace=function(i,l,p){var d=2*i;return this.uint16[d+0]=l,this.uint16[d+1]=p,i},t}(fr);el.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",el);var Ac=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i){var l=this.length;return this.resize(l+1),this.emplace(l,i)},t.prototype.emplace=function(i,l){return this.uint16[1*i+0]=l,i},t}(fr);Ac.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",Ac);var ou=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(i,l,p,d){var g=this.length;return this.resize(g+1),this.emplace(g,i,l,p,d)},t.prototype.emplace=function(i,l,p,d,g){var b=4*i;return this.float32[b+0]=l,this.float32[b+1]=p,this.float32[b+2]=d,this.float32[b+3]=g,i},t}(fr);ou.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",ou);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new ke(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(ru);n.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new n(this,i)},t}(Tc);ft("CollisionBoxArray",s);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(ru);o.prototype.size=48;var u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new o(this,i)},t}(Xo);ft("PlacedSymbolArray",u);var m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(ru);m.prototype.size=68;var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new m(this,i)},t}(nu);ft("SymbolInstanceArray",v);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(i){return this.float32[1*i+0]},t}(Jo);ft("GlyphOffsetArray",x);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(i){return this.int16[3*i+0]},t.prototype.gety=function(i){return this.int16[3*i+1]},t.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},t}(Fn);ft("SymbolLineVertexArray",E);var I=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(ru);I.prototype.size=8;var M=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(i){return new I(this,i)},t}(Ic);ft("FeatureIndexArray",M);var F=wi([{name:"a_pos",components:2,type:"Int16"}],4).members,U=function(e){e===void 0&&(e=[]),this.segments=e};function V(e,t){return 256*(e=Dt(Math.floor(e),0,255))+Dt(Math.floor(t),0,255)}U.prototype.prepareSegment=function(e,t,i,l){var p=this.segments[this.segments.length-1];return e>U.MAX_VERTEX_ARRAY_LENGTH&&dr("Max vertices per segment is "+U.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>U.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==l)&&(p={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},l!==void 0&&(p.sortKey=l),this.segments.push(p)),p},U.prototype.get=function(){return this.segments},U.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var l in i.vaos)i.vaos[l].destroy()}},U.simpleSegment=function(e,t,i,l){return new U([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:l,vaos:{},sortKey:0}])},U.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",U);var X=wi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),K=Me(function(e){e.exports=function(t,i){var l,p,d,g,b,S,C,A;for(p=t.length-(l=3&t.length),d=i,b=3432918353,S=461845907,A=0;A<p;)C=255&t.charCodeAt(A)|(255&t.charCodeAt(++A))<<8|(255&t.charCodeAt(++A))<<16|(255&t.charCodeAt(++A))<<24,++A,d=27492+(65535&(g=5*(65535&(d=(d^=C=(65535&(C=(C=(65535&C)*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(C=0,l){case 3:C^=(255&t.charCodeAt(A+2))<<16;case 2:C^=(255&t.charCodeAt(A+1))<<8;case 1:d^=C=(65535&(C=(C=(65535&(C^=255&t.charCodeAt(A)))*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),te=Me(function(e){e.exports=function(t,i){for(var l,p=t.length,d=i^p,g=0;p>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(g)|(255&t.charCodeAt(++g))<<8|(255&t.charCodeAt(++g))<<16|(255&t.charCodeAt(++g))<<24))+((1540483477*(l>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++g;switch(p){case 3:d^=(255&t.charCodeAt(g+2))<<16;case 2:d^=(255&t.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),H=K,ee=te;H.murmur3=K,H.murmur2=ee;var oe=function(){this.ids=[],this.positions=[],this.indexed=!1};oe.prototype.add=function(e,t,i,l){this.ids.push(Ee(e)),this.positions.push(t,i,l)},oe.prototype.getPositions=function(e){for(var t=Ee(e),i=0,l=this.ids.length-1;i<l;){var p=i+l>>1;this.ids[p]>=t?l=p:i=p+1}for(var d=[];this.ids[i]===t;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},oe.serialize=function(e,t){var i=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function p(d,g,b,S){for(;b<S;){for(var C=d[b+S>>1],A=b-1,P=S+1;;){do A++;while(d[A]<C);do P--;while(d[P]>C);if(A>=P)break;xe(d,A,P),xe(g,3*A,3*P),xe(g,3*A+1,3*P+1),xe(g,3*A+2,3*P+2)}P-b<S-P?(p(d,g,b,P),b=P+1):(p(d,g,P+1,S),S=P)}}(i,l,0,i.length-1),t&&t.push(i.buffer,l.buffer),{ids:i,positions:l}},oe.deserialize=function(e){var t=new oe;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var fe=Math.pow(2,53)-1;function Ee(e){var t=+e;return!isNaN(t)&&t<=fe?t:H(String(e))}function xe(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}ft("FeaturePositionMap",oe);var Ce=function(e,t){this.gl=e.gl,this.location=t},Be=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},t}(Ce),$e=function(e){function t(i,l){e.call(this,i,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},t}(Ce),Ke=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},t}(Ce),ut=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},t}(Ce),wt=function(e){function t(i,l){e.call(this,i,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},t}(Ce),Ct=function(e){function t(i,l){e.call(this,i,l),this.current=cr.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},t}(Ce),Tt=new Float32Array(16),ir=function(e){function t(i,l){e.call(this,i,l),this.current=Tt}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},t}(Ce);function pt(e){return[V(255*e.r,255*e.g),V(255*e.b,255*e.a)]}var Lt=function(e,t,i){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=i};Lt.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Lt.prototype.getBinding=function(e,t,i){return this.type==="color"?new Ct(e,t):new $e(e,t)};var Ft=function(e,t){this.uniformNames=t.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ft.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Ft.prototype.setUniform=function(e,t,i,l){var p=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;p&&e.set(p)},Ft.prototype.getBinding=function(e,t,i){return i.substr(0,9)==="u_pattern"?new wt(e,t):new $e(e,t)};var Mt=function(e,t,i,l){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new l};Mt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.paintVertexArray.length,g=this.expression.evaluate(new Gt(0),t,{},l,[],p);this.paintVertexArray.resize(e),this._setPaintValue(d,e,g)},Mt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:0},i,l);this._setPaintValue(e,t,p)},Mt.prototype._setPaintValue=function(e,t,i){if(this.type==="color")for(var l=pt(i),p=e;p<t;p++)this.paintVertexArray.emplace(p,l[0],l[1]);else{for(var d=e;d<t;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Mt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zt=function(e,t,i,l,p,d){this.expression=e,this.uniformNames=t.map(function(g){return"u_"+g+"_t"}),this.type=i,this.useIntegerZoom=l,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(g){return{name:"a_"+g,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};zt.prototype.populatePaintArray=function(e,t,i,l,p){var d=this.expression.evaluate(new Gt(this.zoom),t,{},l,[],p),g=this.expression.evaluate(new Gt(this.zoom+1),t,{},l,[],p),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,d,g)},zt.prototype.updatePaintArray=function(e,t,i,l){var p=this.expression.evaluate({zoom:this.zoom},i,l),d=this.expression.evaluate({zoom:this.zoom+1},i,l);this._setPaintValue(e,t,p,d)},zt.prototype._setPaintValue=function(e,t,i,l){if(this.type==="color")for(var p=pt(i),d=pt(l),g=e;g<t;g++)this.paintVertexArray.emplace(g,p[0],p[1],d[0],d[1]);else{for(var b=e;b<t;b++)this.paintVertexArray.emplace(b,i,l);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(l))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zt.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=Dt(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(l)},zt.prototype.getBinding=function(e,t,i){return new $e(e,t)};var Bt=function(e,t,i,l,p,d){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=l,this.layerId=d,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Bt.prototype.populatePaintArray=function(e,t,i){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],i)},Bt.prototype.updatePaintArray=function(e,t,i,l,p){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],p)},Bt.prototype._setPaintValues=function(e,t,i,l){if(l&&i){var p=l[i.min],d=l[i.mid],g=l[i.max];if(p&&d&&g)for(var b=e;b<t;b++)this.zoomInPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],d.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(b,d.tl[0],d.tl[1],d.br[0],d.br[1],g.tl[0],g.tl[1],g.br[0],g.br[1],d.pixelRatio,g.pixelRatio)}},Bt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,X.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,X.members,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Pt=function(e,t,i){this.binders={},this._buffers=[];var l=[];for(var p in e.paint._values)if(i(p)){var d=e.paint.get(p);if(d instanceof Gi&&Sa(d.property.specification)){var g=mi(p,e.type),b=d.value,S=d.property.specification.type,C=d.property.useIntegerZoom,A=d.property.specification["property-type"],P=A==="cross-faded"||A==="cross-faded-data-driven";if(b.kind==="constant")this.binders[p]=P?new Ft(b.value,g):new Lt(b.value,g,S),l.push("/u_"+p);else if(b.kind==="source"||P){var R=jr(p,S,"source");this.binders[p]=P?new Bt(b,S,C,t,R,e.id):new Mt(b,g,S,R),l.push("/a_"+p)}else{var B=jr(p,S,"composite");this.binders[p]=new zt(b,g,S,C,t,B),l.push("/z_"+p)}}}this.cacheKey=l.sort().join("")};Pt.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Mt||t instanceof zt?t.maxValue:0},Pt.prototype.populatePaintArrays=function(e,t,i,l,p){for(var d in this.binders){var g=this.binders[d];(g instanceof Mt||g instanceof zt||g instanceof Bt)&&g.populatePaintArray(e,t,i,l,p)}},Pt.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var l=this.binders[i];l instanceof Ft&&l.setConstantPatternPositions(e,t)}},Pt.prototype.updatePaintArrays=function(e,t,i,l,p){var d=!1;for(var g in e)for(var b=0,S=t.getPositions(g);b<S.length;b+=1){var C=S[b],A=i.feature(C.index);for(var P in this.binders){var R=this.binders[P];if((R instanceof Mt||R instanceof zt||R instanceof Bt)&&R.expression.isStateDependent===!0){var B=l.paint.get(P);R.expression=B.value,R.updatePaintArray(C.start,C.end,A,e[g],p),d=!0}}}return d},Pt.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Lt||i instanceof Ft)&&e.push.apply(e,i.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},Pt.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Mt||i instanceof zt)for(var l=0;l<i.paintVertexAttributes.length;l++)e.push(i.paintVertexAttributes[l].name);else if(i instanceof Bt)for(var p=0;p<X.members.length;p++)e.push(X.members[p].name)}return e},Pt.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Lt||i instanceof Ft||i instanceof zt)for(var l=0,p=i.uniformNames;l<p.length;l+=1)e.push(p[l])}return e},Pt.prototype.getPaintVertexBuffers=function(){return this._buffers},Pt.prototype.getUniforms=function(e,t){var i=[];for(var l in this.binders){var p=this.binders[l];if(p instanceof Lt||p instanceof Ft||p instanceof zt)for(var d=0,g=p.uniformNames;d<g.length;d+=1){var b=g[d];if(t[b]){var S=p.getBinding(e,t[b],b);i.push({name:b,property:l,binding:S})}}}return i},Pt.prototype.setUniforms=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1){var g=d[p],b=g.name,S=g.property;this.binders[S].setUniform(g.binding,l,i.get(S),b)}},Pt.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Bt){var l=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(i instanceof Mt||i instanceof zt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Pt.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Mt||i instanceof zt||i instanceof Bt)&&i.upload(e)}this.updatePaintBuffers()},Pt.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Mt||t instanceof zt||t instanceof Bt)&&t.destroy()}};var It=function(e,t,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var l=0,p=e;l<p.length;l+=1){var d=p[l];this.programConfigurations[d.id]=new Pt(d,t,i)}this.needsUpload=!1,this._featureMap=new oe,this._bufferOffset=0};function mi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function jr(e,t,i){var l={color:{source:ns,composite:ou},number:{source:Jo,composite:ns}},p=function(d){return{"line-pattern":{source:fo,composite:fo},"fill-pattern":{source:fo,composite:fo},"fill-extrusion-pattern":{source:fo,composite:fo}}[d]}(e);return p&&p[i]||l[t][i]}It.prototype.populatePaintArrays=function(e,t,i,l,p,d){for(var g in this.programConfigurations)this.programConfigurations[g].populatePaintArrays(e,t,l,p,d);t.id!==void 0&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},It.prototype.updatePaintArrays=function(e,t,i,l){for(var p=0,d=i;p<d.length;p+=1){var g=d[p];this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,t,g,l)||this.needsUpload}},It.prototype.get=function(e){return this.programConfigurations[e]},It.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},It.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Lt),ft("CrossFadedConstantBinder",Ft),ft("SourceExpressionBinder",Mt),ft("CrossFadedCompositeBinder",Bt),ft("CompositeExpressionBinder",zt),ft("ProgramConfiguration",Pt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",It);var Bi=Math.pow(2,14)-1,Ei=-Bi-1;function Nr(e){for(var t=8192/e.extent,i=e.loadGeometry(),l=0;l<i.length;l++)for(var p=i[l],d=0;d<p.length;d++){var g=p[d],b=Math.round(g.x*t),S=Math.round(g.y*t);g.x=Dt(b,Ei,Bi),g.y=Dt(S,Ei,Bi),(b<g.x||b>g.x+1||S<g.y||S>g.y+1)&&dr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function $r(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Nr(e):[]}}function yn(e,t,i,l,p){e.emplaceBack(2*t+(l+1)/2,2*i+(p+1)/2)}var Ki=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ka,this.indexArray=new $o,this.segments=new U,this.programConfigurations=new It(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Yo(e,t){for(var i=0;i<e.length;i++)if(mo(t,e[i]))return!0;for(var l=0;l<t.length;l++)if(mo(e,t[l]))return!0;return!!tl(e,t)}function rn(e,t,i){return!!mo(e,t)||!!Qo(t,e,i)}function ro(e,t){if(e.length===1)return rl(t,e[0]);for(var i=0;i<t.length;i++)for(var l=t[i],p=0;p<l.length;p++)if(mo(e,l[p]))return!0;for(var d=0;d<e.length;d++)if(rl(t,e[d]))return!0;for(var g=0;g<t.length;g++)if(tl(e,t[g]))return!0;return!1}function Nn(e,t,i){if(e.length>1){if(tl(e,t))return!0;for(var l=0;l<t.length;l++)if(Qo(t[l],e,i))return!0}for(var p=0;p<e.length;p++)if(Qo(e[p],t,i))return!0;return!1}function tl(e,t){if(e.length===0||t.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var l=e[i],p=e[i+1],d=0;d<t.length-1;d++)if(ss(l,p,t[d],t[d+1]))return!0;return!1}function ss(e,t,i,l){return oi(e,i,l)!==oi(t,i,l)&&oi(e,t,i)!==oi(e,t,l)}function Qo(e,t,i){var l=i*i;if(t.length===1)return e.distSqr(t[0])<l;for(var p=1;p<t.length;p++)if(ls(e,t[p-1],t[p])<l)return!0;return!1}function ls(e,t,i){var l=t.distSqr(i);if(l===0)return e.distSqr(t);var p=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/l;return e.distSqr(p<0?t:p>1?i:i.sub(t)._mult(p)._add(t))}function rl(e,t){for(var i,l,p,d=!1,g=0;g<e.length;g++)for(var b=0,S=(i=e[g]).length-1;b<i.length;S=b++)(l=i[b]).y>t.y!=(p=i[S]).y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(d=!d);return d}function mo(e,t){for(var i=!1,l=0,p=e.length-1;l<e.length;p=l++){var d=e[l],g=e[p];d.y>t.y!=g.y>t.y&&t.x<(g.x-d.x)*(t.y-d.y)/(g.y-d.y)+d.x&&(i=!i)}return i}function il(e,t,i){var l=i[0],p=i[2];if(e.x<l.x&&t.x<l.x||e.x>p.x&&t.x>p.x||e.y<l.y&&t.y<l.y||e.y>p.y&&t.y>p.y)return!1;var d=oi(e,t,i[0]);return d!==oi(e,t,i[1])||d!==oi(e,t,i[2])||d!==oi(e,t,i[3])}function go(e,t,i){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(e)}function gi(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Po(e,t,i,l,p){if(!t[0]&&!t[1])return e;var d=ke.convert(t)._mult(p);i==="viewport"&&d._rotate(-l);for(var g=[],b=0;b<e.length;b++)g.push(e[b].sub(d));return g}Ki.prototype.populate=function(e,t,i){var l=this.layers[0],p=[],d=null;l.type==="circle"&&(d=l.layout.get("circle-sort-key"));for(var g=0,b=e;g<b.length;g+=1){var S=b[g],C=S.feature,A=S.id,P=S.index,R=S.sourceLayerIndex,B=this.layers[0]._featureFilter.needGeometry,G=$r(C,B);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),G,i)){var W=d?d.evaluate(G,{},i):void 0,re={id:A,properties:C.properties,type:C.type,sourceLayerIndex:R,index:P,geometry:B?G.geometry:Nr(C),patterns:{},sortKey:W};p.push(re)}}d&&p.sort(function(Qe,_t){return Qe.sortKey-_t.sortKey});for(var Q=0,le=p;Q<le.length;Q+=1){var ge=le[Q],_e=ge.geometry,be=ge.index,Re=ge.sourceLayerIndex,Ge=e[be].feature;this.addFeature(ge,_e,be,i),t.featureIndex.insert(Ge,_e,be,Re,this.index)}},Ki.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ki.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ki.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ki.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,F),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ki.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ki.prototype.addFeature=function(e,t,i,l){for(var p=0,d=t;p<d.length;p+=1)for(var g=0,b=d[p];g<b.length;g+=1){var S=b[g],C=S.x,A=S.y;if(!(C<0||C>=8192||A<0||A>=8192)){var P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=P.vertexLength;yn(this.layoutVertexArray,C,A,-1,-1),yn(this.layoutVertexArray,C,A,1,-1),yn(this.layoutVertexArray,C,A,1,1),yn(this.layoutVertexArray,C,A,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),P.vertexLength+=4,P.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},l)},ft("CircleBucket",Ki,{omit:["layers"]});var ea=new Mi({"circle-sort-key":new yt(N.layout_circle["circle-sort-key"])}),za={paint:new Mi({"circle-radius":new yt(N.paint_circle["circle-radius"]),"circle-color":new yt(N.paint_circle["circle-color"]),"circle-blur":new yt(N.paint_circle["circle-blur"]),"circle-opacity":new yt(N.paint_circle["circle-opacity"]),"circle-translate":new bt(N.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(N.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(N.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(N.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(N.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(N.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(N.paint_circle["circle-stroke-opacity"])}),layout:ea},pr=typeof Float32Array<"u"?Float32Array:Array;function An(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nn(e,t,i){var l=t[0],p=t[1],d=t[2],g=t[3],b=t[4],S=t[5],C=t[6],A=t[7],P=t[8],R=t[9],B=t[10],G=t[11],W=t[12],re=t[13],Q=t[14],le=t[15],ge=i[0],_e=i[1],be=i[2],Re=i[3];return e[0]=ge*l+_e*b+be*P+Re*W,e[1]=ge*p+_e*S+be*R+Re*re,e[2]=ge*d+_e*C+be*B+Re*Q,e[3]=ge*g+_e*A+be*G+Re*le,e[4]=(ge=i[4])*l+(_e=i[5])*b+(be=i[6])*P+(Re=i[7])*W,e[5]=ge*p+_e*S+be*R+Re*re,e[6]=ge*d+_e*C+be*B+Re*Q,e[7]=ge*g+_e*A+be*G+Re*le,e[8]=(ge=i[8])*l+(_e=i[9])*b+(be=i[10])*P+(Re=i[11])*W,e[9]=ge*p+_e*S+be*R+Re*re,e[10]=ge*d+_e*C+be*B+Re*Q,e[11]=ge*g+_e*A+be*G+Re*le,e[12]=(ge=i[12])*l+(_e=i[13])*b+(be=i[14])*P+(Re=i[15])*W,e[13]=ge*p+_e*S+be*R+Re*re,e[14]=ge*d+_e*C+be*B+Re*Q,e[15]=ge*g+_e*A+be*G+Re*le,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var Ma,Ld=nn;function au(e,t,i){var l=t[0],p=t[1],d=t[2],g=t[3];return e[0]=i[0]*l+i[4]*p+i[8]*d+i[12]*g,e[1]=i[1]*l+i[5]*p+i[9]*d+i[13]*g,e[2]=i[2]*l+i[6]*p+i[10]*d+i[14]*g,e[3]=i[3]*l+i[7]*p+i[11]*d+i[15]*g,e}Ma=new pr(3),pr!=Float32Array&&(Ma[0]=0,Ma[1]=0,Ma[2]=0),function(){var e=new pr(4);pr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var Dd=(function(){var e=new pr(2);pr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(i){e.call(this,i,za)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Ki(i)},t.prototype.queryRadius=function(i){var l=i;return go("circle-radius",this,l)+go("circle-stroke-width",this,l)+gi(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,g,b,S,C){for(var A=Po(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,S),P=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),R=this.paint.get("circle-pitch-alignment")==="map",B=R?A:function(Ge,Qe){return Ge.map(function(_t){return nl(_t,Qe)})}(A,C),G=R?P*S:P,W=0,re=d;W<re.length;W+=1)for(var Q=0,le=re[W];Q<le.length;Q+=1){var ge=le[Q],_e=R?ge:nl(ge,C),be=G,Re=au([],[ge.x,ge.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=Re[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=b.cameraToCenterDistance/Re[3]),rn(B,_e,be))return!0}return!1},t}(ho));function nl(e,t){var i=au([],[e.x,e.y,0,1],t);return new ke(i[0]/i[3],i[1]/i[3])}var vh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ki);function us(e,t,i,l){var p=t.width,d=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==p*d*i)throw new RangeError("mismatched image size")}else l=new Uint8Array(p*d*i);return e.width=p,e.height=d,e.data=l,e}function su(e,t,i){var l=t.width,p=t.height;if(l!==e.width||p!==e.height){var d=us({},{width:l,height:p},i);Rd(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,p)},i),e.width=l,e.height=p,e.data=d.data}}function Rd(e,t,i,l,p,d){if(p.width===0||p.height===0)return t;if(p.width>e.width||p.height>e.height||i.x>e.width-p.width||i.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||l.x>t.width-p.width||l.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var g=e.data,b=t.data,S=0;S<p.height;S++)for(var C=((i.y+S)*e.width+i.x)*d,A=((l.y+S)*t.width+l.x)*d,P=0;P<p.width*d;P++)b[A+P]=g[C+P];return t}ft("HeatmapBucket",vh,{omit:["layers"]});var ol=function(e,t){us(this,e,1,t)};ol.prototype.resize=function(e){su(this,e,1)},ol.prototype.clone=function(){return new ol({width:this.width,height:this.height},new Uint8Array(this.data))},ol.copy=function(e,t,i,l,p){Rd(e,t,i,l,p,1)};var vn=function(e,t){us(this,e,4,t)};vn.prototype.resize=function(e){su(this,e,4)},vn.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},vn.prototype.clone=function(){return new vn({width:this.width,height:this.height},new Uint8Array(this.data))},vn.copy=function(e,t,i,l,p){Rd(e,t,i,l,p,4)},ft("AlphaImage",ol),ft("RGBAImage",vn);var Dx={paint:new Mi({"heatmap-radius":new yt(N.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(N.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(N.paint_heatmap["heatmap-intensity"]),"heatmap-color":new to(N.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(N.paint_heatmap["heatmap-opacity"])})};function uy(e){var t={},i=e.resolution||256,l=e.clips?e.clips.length:1,p=e.image||new vn({width:i,height:l}),d=function(G,W,re){t[e.evaluationKey]=re;var Q=e.expression.evaluate(t);p.data[G+W+0]=Math.floor(255*Q.r/Q.a),p.data[G+W+1]=Math.floor(255*Q.g/Q.a),p.data[G+W+2]=Math.floor(255*Q.b/Q.a),p.data[G+W+3]=Math.floor(255*Q.a)};if(e.clips)for(var g=0,b=0;g<l;++g,b+=4*i)for(var S=0,C=0;S<i;S++,C+=4){var A=S/(i-1),P=e.clips[g];d(b,C,P.start*(1-A)+P.end*A)}else for(var R=0,B=0;R<i;R++,B+=4)d(0,B,R/(i-1));return p}var Rx=function(e){function t(i){e.call(this,i,Dx),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new vh(i)},t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=uy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(ho),Ox={paint:new Mi({"hillshade-illumination-direction":new bt(N.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(N.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(N.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(N.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(N.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(N.paint_hillshade["hillshade-accent-color"])})},Bx=function(e){function t(i){e.call(this,i,Ox)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(ho),Fx=wi([{name:"a_pos",components:2,type:"Int16"}],4).members,Od=_h,Nx=_h;function _h(e,t,i){i=i||2;var l,p,d,g,b,S,C,A=t&&t.length,P=A?t[0]*i:e.length,R=cy(e,0,P,i,!0),B=[];if(!R||R.next===R.prev)return B;if(A&&(R=function(W,re,Q,le){var ge,_e,be,Re=[];for(ge=0,_e=re.length;ge<_e;ge++)(be=cy(W,re[ge]*le,ge<_e-1?re[ge+1]*le:W.length,le,!1))===be.next&&(be.steiner=!0),Re.push(Wx(be));for(Re.sort(Zx),ge=0;ge<Re.length;ge++)Hx(Re[ge],Q),Q=cs(Q,Q.next);return Q}(e,t,R,i)),e.length>80*i){l=d=e[0],p=g=e[1];for(var G=i;G<P;G+=i)(b=e[G])<l&&(l=b),(S=e[G+1])<p&&(p=S),b>d&&(d=b),S>g&&(g=S);C=(C=Math.max(d-l,g-p))!==0?1/C:0}return kc(R,B,i,l,p,C),B}function cy(e,t,i,l,p){var d,g;if(p===Nd(e,t,i,l)>0)for(d=t;d<i;d+=l)g=fy(d,e[d],e[d+1],g);else for(d=i-l;d>=t;d-=l)g=fy(d,e[d],e[d+1],g);return g&&xh(g,g.next)&&(zc(g),g=g.next),g}function cs(e,t){if(!e)return e;t||(t=e);var i,l=e;do if(i=!1,l.steiner||!xh(l,l.next)&&li(l.prev,l,l.next)!==0)l=l.next;else{if(zc(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function kc(e,t,i,l,p,d,g){if(e){!g&&d&&function(A,P,R,B){var G=A;do G.z===null&&(G.z=Bd(G.x,G.y,P,R,B)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==A);G.prevZ.nextZ=null,G.prevZ=null,function(W){var re,Q,le,ge,_e,be,Re,Ge,Qe=1;do{for(Q=W,W=null,_e=null,be=0;Q;){for(be++,le=Q,Re=0,re=0;re<Qe&&(Re++,le=le.nextZ);re++);for(Ge=Qe;Re>0||Ge>0&&le;)Re!==0&&(Ge===0||!le||Q.z<=le.z)?(ge=Q,Q=Q.nextZ,Re--):(ge=le,le=le.nextZ,Ge--),_e?_e.nextZ=ge:W=ge,ge.prevZ=_e,_e=ge;Q=le}_e.nextZ=null,Qe*=2}while(be>1)}(G)}(e,l,p,d);for(var b,S,C=e;e.prev!==e.next;)if(b=e.prev,S=e.next,d?Vx(e,l,p,d):Ux(e))t.push(b.i/i),t.push(e.i/i),t.push(S.i/i),zc(e),e=S.next,C=S.next;else if((e=S)===C){g?g===1?kc(e=jx(cs(e),t,i),t,i,l,p,d,2):g===2&&qx(e,t,i,l,p,d):kc(cs(e),t,i,l,p,d,1);break}}}function Ux(e){var t=e.prev,i=e,l=e.next;if(li(t,i,l)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(lu(t.x,t.y,i.x,i.y,l.x,l.y,p.x,p.y)&&li(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Vx(e,t,i,l){var p=e.prev,d=e,g=e.next;if(li(p,d,g)>=0)return!1;for(var b=p.x>d.x?p.x>g.x?p.x:g.x:d.x>g.x?d.x:g.x,S=p.y>d.y?p.y>g.y?p.y:g.y:d.y>g.y?d.y:g.y,C=Bd(p.x<d.x?p.x<g.x?p.x:g.x:d.x<g.x?d.x:g.x,p.y<d.y?p.y<g.y?p.y:g.y:d.y<g.y?d.y:g.y,t,i,l),A=Bd(b,S,t,i,l),P=e.prevZ,R=e.nextZ;P&&P.z>=C&&R&&R.z<=A;){if(P!==e.prev&&P!==e.next&&lu(p.x,p.y,d.x,d.y,g.x,g.y,P.x,P.y)&&li(P.prev,P,P.next)>=0||(P=P.prevZ,R!==e.prev&&R!==e.next&&lu(p.x,p.y,d.x,d.y,g.x,g.y,R.x,R.y)&&li(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;P&&P.z>=C;){if(P!==e.prev&&P!==e.next&&lu(p.x,p.y,d.x,d.y,g.x,g.y,P.x,P.y)&&li(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;R&&R.z<=A;){if(R!==e.prev&&R!==e.next&&lu(p.x,p.y,d.x,d.y,g.x,g.y,R.x,R.y)&&li(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function jx(e,t,i){var l=e;do{var p=l.prev,d=l.next.next;!xh(p,d)&&py(p,l,l.next,d)&&Pc(p,d)&&Pc(d,p)&&(t.push(p.i/i),t.push(l.i/i),t.push(d.i/i),zc(l),zc(l.next),l=e=d),l=l.next}while(l!==e);return cs(l)}function qx(e,t,i,l,p,d){var g=e;do{for(var b=g.next.next;b!==g.prev;){if(g.i!==b.i&&Kx(g,b)){var S=hy(g,b);return g=cs(g,g.next),S=cs(S,S.next),kc(g,t,i,l,p,d),void kc(S,t,i,l,p,d)}b=b.next}g=g.next}while(g!==e)}function Zx(e,t){return e.x-t.x}function Hx(e,t){if(t=function(l,p){var d,g=p,b=l.x,S=l.y,C=-1/0;do{if(S<=g.y&&S>=g.next.y&&g.next.y!==g.y){var A=g.x+(S-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(A<=b&&A>C){if(C=A,A===b){if(S===g.y)return g;if(S===g.next.y)return g.next}d=g.x<g.next.x?g:g.next}}g=g.next}while(g!==p);if(!d)return null;if(b===C)return d;var P,R=d,B=d.x,G=d.y,W=1/0;g=d;do b>=g.x&&g.x>=B&&b!==g.x&&lu(S<G?b:C,S,B,G,S<G?C:b,S,g.x,g.y)&&(P=Math.abs(S-g.y)/(b-g.x),Pc(g,l)&&(P<W||P===W&&(g.x>d.x||g.x===d.x&&Gx(d,g)))&&(d=g,W=P)),g=g.next;while(g!==R);return d}(e,t)){var i=hy(t,e);cs(t,t.next),cs(i,i.next)}}function Gx(e,t){return li(e.prev,e,t.prev)<0&&li(t.next,e,e.next)<0}function Bd(e,t,i,l,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wx(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function lu(e,t,i,l,p,d,g,b){return(p-g)*(t-b)-(e-g)*(d-b)>=0&&(e-g)*(l-b)-(i-g)*(t-b)>=0&&(i-g)*(d-b)-(p-g)*(l-b)>=0}function Kx(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(i,l){var p=i;do{if(p.i!==i.i&&p.next.i!==i.i&&p.i!==l.i&&p.next.i!==l.i&&py(p,p.next,i,l))return!0;p=p.next}while(p!==i);return!1}(e,t)&&(Pc(e,t)&&Pc(t,e)&&function(i,l){var p=i,d=!1,g=(i.x+l.x)/2,b=(i.y+l.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&g<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(d=!d),p=p.next;while(p!==i);return d}(e,t)&&(li(e.prev,e,t.prev)||li(e,t.prev,t))||xh(e,t)&&li(e.prev,e,e.next)>0&&li(t.prev,t,t.next)>0)}function li(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function xh(e,t){return e.x===t.x&&e.y===t.y}function py(e,t,i,l){var p=wh(li(e,t,i)),d=wh(li(e,t,l)),g=wh(li(i,l,e)),b=wh(li(i,l,t));return p!==d&&g!==b||!(p!==0||!bh(e,i,t))||!(d!==0||!bh(e,l,t))||!(g!==0||!bh(i,e,l))||!(b!==0||!bh(i,t,l))}function bh(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function wh(e){return e>0?1:e<0?-1:0}function Pc(e,t){return li(e.prev,e,e.next)<0?li(e,t,e.next)>=0&&li(e,e.prev,t)>=0:li(e,t,e.prev)<0||li(e,e.next,t)<0}function hy(e,t){var i=new Fd(e.i,e.x,e.y),l=new Fd(t.i,t.x,t.y),p=e.next,d=t.prev;return e.next=t,t.prev=e,i.next=p,p.prev=i,l.next=i,i.prev=l,d.next=l,l.prev=d,l}function fy(e,t,i,l){var p=new Fd(e,t,i);return l?(p.next=l.next,p.prev=l,l.next.prev=p,l.next=p):(p.prev=p,p.next=p),p}function zc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fd(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nd(e,t,i,l){for(var p=0,d=t,g=i-l;d<i;d+=l)p+=(e[g]-e[d])*(e[d+1]+e[g+1]),g=d;return p}function $x(e,t,i,l,p){(function d(g,b,S,C,A){for(;C>S;){if(C-S>600){var P=C-S+1,R=b-S+1,B=Math.log(P),G=.5*Math.exp(2*B/3),W=.5*Math.sqrt(B*G*(P-G)/P)*(R-P/2<0?-1:1);d(g,b,Math.max(S,Math.floor(b-R*G/P+W)),Math.min(C,Math.floor(b+(P-R)*G/P+W)),A)}var re=g[b],Q=S,le=C;for(Mc(g,S,b),A(g[C],re)>0&&Mc(g,S,C);Q<le;){for(Mc(g,Q,le),Q++,le--;A(g[Q],re)<0;)Q++;for(;A(g[le],re)>0;)le--}A(g[S],re)===0?Mc(g,S,le):Mc(g,++le,C),le<=b&&(S=le+1),b<=le&&(C=le-1)}})(e,t,i||0,l||e.length-1,p||Xx)}function Mc(e,t,i){var l=e[t];e[t]=e[i],e[i]=l}function Xx(e,t){return e<t?-1:e>t?1:0}function Ud(e,t){var i=e.length;if(i<=1)return[e];for(var l,p,d=[],g=0;g<i;g++){var b=$n(e[g]);b!==0&&(e[g].area=Math.abs(b),p===void 0&&(p=b<0),p===b<0?(l&&d.push(l),l=[e[g]]):l.push(e[g]))}if(l&&d.push(l),t>1)for(var S=0;S<d.length;S++)d[S].length<=t||($x(d[S],t,1,d[S].length-1,Jx),d[S]=d[S].slice(0,t));return d}function Jx(e,t){return t.area-e.area}function Vd(e,t,i){for(var l=i.patternDependencies,p=!1,d=0,g=t;d<g.length;d+=1){var b=g[d].paint.get(e+"-pattern");b.isConstant()||(p=!0);var S=b.constantOr(null);S&&(p=!0,l[S.to]=!0,l[S.from]=!0)}return p}function jd(e,t,i,l,p){for(var d=p.patternDependencies,g=0,b=t;g<b.length;g+=1){var S=b[g],C=S.paint.get(e+"-pattern").value;if(C.kind!=="constant"){var A=C.evaluate({zoom:l-1},i,{},p.availableImages),P=C.evaluate({zoom:l},i,{},p.availableImages),R=C.evaluate({zoom:l+1},i,{},p.availableImages);P=P&&P.name?P.name:P,R=R&&R.name?R.name:R,d[A=A&&A.name?A.name:A]=!0,d[P]=!0,d[R]=!0,i.patterns[S.id]={min:A,mid:P,max:R}}}return i}_h.deviation=function(e,t,i,l){var p=t&&t.length,d=Math.abs(Nd(e,0,p?t[0]*i:e.length,i));if(p)for(var g=0,b=t.length;g<b;g++)d-=Math.abs(Nd(e,t[g]*i,g<b-1?t[g+1]*i:e.length,i));var S=0;for(g=0;g<l.length;g+=3){var C=l[g]*i,A=l[g+1]*i,P=l[g+2]*i;S+=Math.abs((e[C]-e[P])*(e[A+1]-e[C+1])-(e[C]-e[A])*(e[P+1]-e[C+1]))}return d===0&&S===0?0:Math.abs((S-d)/d)},_h.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,p=0;p<e.length;p++){for(var d=0;d<e[p].length;d++)for(var g=0;g<t;g++)i.vertices.push(e[p][d][g]);p>0&&i.holes.push(l+=e[p-1].length)}return i},Od.default=Nx;var zo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ka,this.indexArray=new $o,this.indexArray2=new el,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new U,this.segments2=new U,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};zo.prototype.populate=function(e,t,i){this.hasPattern=Vd("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),p=[],d=0,g=e;d<g.length;d+=1){var b=g[d],S=b.feature,C=b.id,A=b.index,P=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,B=$r(S,R);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),B,i)){var G=l?l.evaluate(B,{},i,t.availableImages):void 0,W={id:C,properties:S.properties,type:S.type,sourceLayerIndex:P,index:A,geometry:R?B.geometry:Nr(S),patterns:{},sortKey:G};p.push(W)}}l&&p.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var re=0,Q=p;re<Q.length;re+=1){var le=Q[re],ge=le.geometry,_e=le.index,be=le.sourceLayerIndex;if(this.hasPattern){var Re=jd("fill",this.layers,le,this.zoom,t);this.patternFeatures.push(Re)}else this.addFeature(le,ge,_e,i,{});t.featureIndex.insert(e[_e].feature,ge,_e,be,this.index)}},zo.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},zo.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},zo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},zo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},zo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fx),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},zo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},zo.prototype.addFeature=function(e,t,i,l,p){for(var d=0,g=Ud(t,500);d<g.length;d+=1){for(var b=g[d],S=0,C=0,A=b;C<A.length;C+=1)S+=A[C].length;for(var P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),R=P.vertexLength,B=[],G=[],W=0,re=b;W<re.length;W+=1){var Q=re[W];if(Q.length!==0){Q!==b[0]&&G.push(B.length/2);var le=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ge=le.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ge+Q.length-1,ge),B.push(Q[0].x),B.push(Q[0].y);for(var _e=1;_e<Q.length;_e++)this.layoutVertexArray.emplaceBack(Q[_e].x,Q[_e].y),this.indexArray2.emplaceBack(ge+_e-1,ge+_e),B.push(Q[_e].x),B.push(Q[_e].y);le.vertexLength+=Q.length,le.primitiveLength+=Q.length}}for(var be=Od(B,G),Re=0;Re<be.length;Re+=3)this.indexArray.emplaceBack(R+be[Re],R+be[Re+1],R+be[Re+2]);P.vertexLength+=S,P.primitiveLength+=be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ft("FillBucket",zo,{omit:["layers","patternFeatures"]});var Yx=new Mi({"fill-sort-key":new yt(N.layout_fill["fill-sort-key"])}),Qx={paint:new Mi({"fill-antialias":new bt(N.paint_fill["fill-antialias"]),"fill-opacity":new yt(N.paint_fill["fill-opacity"]),"fill-color":new yt(N.paint_fill["fill-color"]),"fill-outline-color":new yt(N.paint_fill["fill-outline-color"]),"fill-translate":new bt(N.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(N.paint_fill["fill-translate-anchor"]),"fill-pattern":new tu(N.paint_fill["fill-pattern"])}),layout:Yx},eb=function(e){function t(i){e.call(this,i,Qx)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l);var p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(i){return new zo(i)},t.prototype.queryRadius=function(){return gi(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,g,b,S){return ro(Po(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,S),d)},t.prototype.isTileClipped=function(){return!0},t}(ho),tb=wi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dy=uu;function uu(e,t,i,l,p){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=p,e.readFields(rb,this,t)}function rb(e,t,i){e==1?t.id=i.readVarint():e==2?function(l,p){for(var d=l.readVarint()+l.pos;l.pos<d;){var g=p._keys[l.readVarint()],b=p._values[l.readVarint()];p.properties[g]=b}}(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function ib(e){for(var t,i,l=0,p=0,d=e.length,g=d-1;p<d;g=p++)l+=((i=e[g]).x-(t=e[p]).x)*(t.y+i.y);return l}uu.types=["Unknown","Point","LineString","Polygon"],uu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,l=1,p=0,d=0,g=0,b=[];e.pos<i;){if(p<=0){var S=e.readVarint();l=7&S,p=S>>3}if(p--,l===1||l===2)d+=e.readSVarint(),g+=e.readSVarint(),l===1&&(t&&b.push(t),t=[]),t.push(new ke(d,g));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&b.push(t),b},uu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,p=0,d=0,g=1/0,b=-1/0,S=1/0,C=-1/0;e.pos<t;){if(l<=0){var A=e.readVarint();i=7&A,l=A>>3}if(l--,i===1||i===2)(p+=e.readSVarint())<g&&(g=p),p>b&&(b=p),(d+=e.readSVarint())<S&&(S=d),d>C&&(C=d);else if(i!==7)throw new Error("unknown command "+i)}return[g,S,b,C]},uu.prototype.toGeoJSON=function(e,t,i){var l,p,d=this.extent*Math.pow(2,i),g=this.extent*e,b=this.extent*t,S=this.loadGeometry(),C=uu.types[this.type];function A(B){for(var G=0;G<B.length;G++){var W=B[G];B[G]=[360*(W.x+g)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+b)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(l=0;l<S.length;l++)P[l]=S[l][0];A(S=P);break;case 2:for(l=0;l<S.length;l++)A(S[l]);break;case 3:for(S=function(B){var G=B.length;if(G<=1)return[B];for(var W,re,Q=[],le=0;le<G;le++){var ge=ib(B[le]);ge!==0&&(re===void 0&&(re=ge<0),re===ge<0?(W&&Q.push(W),W=[B[le]]):W.push(B[le]))}return W&&Q.push(W),Q}(S),l=0;l<S.length;l++)for(p=0;p<S[l].length;p++)A(S[l][p])}S.length===1?S=S[0]:C="Multi"+C;var R={type:"Feature",geometry:{type:C,coordinates:S},properties:this.properties};return"id"in this&&(R.id=this.id),R};var my=gy;function gy(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nb,this,t),this.length=this._features.length}function nb(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(function(l){for(var p=null,d=l.readVarint()+l.pos;l.pos<d;){var g=l.readVarint()>>3;p=g===1?l.readString():g===2?l.readFloat():g===3?l.readDouble():g===4?l.readVarint64():g===5?l.readVarint():g===6?l.readSVarint():g===7?l.readBoolean():null}return p}(i))}function ob(e,t,i){if(e===3){var l=new my(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}gy.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new dy(this._pbf,t,this.extent,this._keys,this._values)};var cu={VectorTile:function(e,t){this.layers=e.readFields(ob,{},t)},VectorTileFeature:dy,VectorTileLayer:my},ab=cu.VectorTileFeature.types,qd=Math.pow(2,13);function Lc(e,t,i,l,p,d,g,b){e.emplaceBack(t,i,2*Math.floor(l*qd)+g,p*qd*2,d*qd*2,Math.round(b))}var Mo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ko,this.indexArray=new $o,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new U,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function sb(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Mo.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=Vd("fill-extrusion",this.layers,t);for(var l=0,p=e;l<p.length;l+=1){var d=p[l],g=d.feature,b=d.id,S=d.index,C=d.sourceLayerIndex,A=this.layers[0]._featureFilter.needGeometry,P=$r(g,A);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),P,i)){var R={id:b,sourceLayerIndex:C,index:S,geometry:A?P.geometry:Nr(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(jd("fill-extrusion",this.layers,R,this.zoom,t)):this.addFeature(R,R.geometry,S,i,{}),t.featureIndex.insert(g,R.geometry,S,C,this.index,!0)}}},Mo.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.features;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},Mo.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Mo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Mo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tb),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Mo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mo.prototype.addFeature=function(e,t,i,l,p){for(var d=0,g=Ud(t,500);d<g.length;d+=1){for(var b=g[d],S=0,C=0,A=b;C<A.length;C+=1)S+=A[C].length;for(var P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),R=0,B=b;R<B.length;R+=1){var G=B[R];if(G.length!==0&&!((qt=G).every(function(Ot){return Ot.x<0})||qt.every(function(Ot){return Ot.x>8192})||qt.every(function(Ot){return Ot.y<0})||qt.every(function(Ot){return Ot.y>8192})))for(var W=0,re=0;re<G.length;re++){var Q=G[re];if(re>=1){var le=G[re-1];if(!sb(Q,le)){P.vertexLength+4>U.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ge=Q.sub(le)._perp()._unit(),_e=le.dist(Q);W+_e>32768&&(W=0),Lc(this.layoutVertexArray,Q.x,Q.y,ge.x,ge.y,0,0,W),Lc(this.layoutVertexArray,Q.x,Q.y,ge.x,ge.y,0,1,W),Lc(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,0,W+=_e),Lc(this.layoutVertexArray,le.x,le.y,ge.x,ge.y,0,1,W);var be=P.vertexLength;this.indexArray.emplaceBack(be,be+2,be+1),this.indexArray.emplaceBack(be+1,be+2,be+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+S>U.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),ab[e.type]==="Polygon"){for(var Re=[],Ge=[],Qe=P.vertexLength,_t=0,ot=b;_t<ot.length;_t+=1){var Et=ot[_t];if(Et.length!==0){Et!==b[0]&&Ge.push(Re.length/2);for(var st=0;st<Et.length;st++){var Nt=Et[st];Lc(this.layoutVertexArray,Nt.x,Nt.y,0,0,1,1,0),Re.push(Nt.x),Re.push(Nt.y)}}}for(var kt=Od(Re,Ge),vt=0;vt<kt.length;vt+=3)this.indexArray.emplaceBack(Qe+kt[vt],Qe+kt[vt+2],Qe+kt[vt+1]);P.primitiveLength+=kt.length/3,P.vertexLength+=S}}var qt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},ft("FillExtrusionBucket",Mo,{omit:["layers","features"]});var lb={paint:new Mi({"fill-extrusion-opacity":new bt(N["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(N["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(N["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(N["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tu(N["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(N["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(N["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(N["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ub=function(e){function t(i){e.call(this,i,lb)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(i){return new Mo(i)},t.prototype.queryRadius=function(){return gi(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,l,p,d,g,b,S,C){var A=Po(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,S),P=this.paint.get("fill-extrusion-height").evaluate(l,p),R=this.paint.get("fill-extrusion-base").evaluate(l,p),B=function(W,re,Q,le){for(var ge=[],_e=0,be=W;_e<be.length;_e+=1){var Re=be[_e],Ge=[Re.x,Re.y,0,1];au(Ge,Ge,re),ge.push(new ke(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return ge}(A,C),G=function(W,re,Q,le){for(var ge=[],_e=[],be=le[8]*re,Re=le[9]*re,Ge=le[10]*re,Qe=le[11]*re,_t=le[8]*Q,ot=le[9]*Q,Et=le[10]*Q,st=le[11]*Q,Nt=0,kt=W;Nt<kt.length;Nt+=1){for(var vt=[],qt=[],Ot=0,Qt=kt[Nt];Ot<Qt.length;Ot+=1){var St=Qt[Ot],or=St.x,Dr=St.y,qr=le[0]*or+le[4]*Dr+le[12],Ur=le[1]*or+le[5]*Dr+le[13],Rr=le[2]*or+le[6]*Dr+le[14],Zr=le[3]*or+le[7]*Dr+le[15],yi=Rr+Ge,vi=Zr+Qe,Xi=qr+_t,Ti=Ur+ot,Ji=Rr+Et,Xr=Zr+st,Ci=new ke((qr+be)/vi,(Ur+Re)/vi);Ci.z=yi/vi,vt.push(Ci);var Kt=new ke(Xi/Xr,Ti/Xr);Kt.z=Ji/Xr,qt.push(Kt)}ge.push(vt),_e.push(qt)}return[ge,_e]}(d,R,P,C);return function(W,re,Q){var le=1/0;ro(Q,re)&&(le=yy(Q,re[0]));for(var ge=0;ge<re.length;ge++)for(var _e=re[ge],be=W[ge],Re=0;Re<_e.length-1;Re++){var Ge=_e[Re],Qe=[Ge,_e[Re+1],be[Re+1],be[Re],Ge];Yo(Q,Qe)&&(le=Math.min(le,yy(Q,Qe)))}return le!==1/0&&le}(G[0],G[1],B)},t}(ho);function Dc(e,t){return e.x*t.x+e.y*t.y}function yy(e,t){if(e.length===1){for(var i,l=0,p=t[l++];!i||p.equals(i);)if(!(i=t[l++]))return 1/0;for(;l<t.length;l++){var d=t[l],g=e[0],b=i.sub(p),S=d.sub(p),C=g.sub(p),A=Dc(b,b),P=Dc(b,S),R=Dc(S,S),B=Dc(C,b),G=Dc(C,S),W=A*R-P*P,re=(R*B-P*G)/W,Q=(A*G-P*B)/W,le=p.z*(1-re-Q)+i.z*re+d.z*Q;if(isFinite(le))return le}return 1/0}for(var ge=1/0,_e=0,be=t;_e<be.length;_e+=1)ge=Math.min(ge,be[_e].z);return ge}var cb=wi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,pb=wi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,hb=cu.VectorTileFeature.types,fb=Math.cos(Math.PI/180*37.5),vy=Math.pow(2,14)/.5,on=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){t.gradients[i.id]={}}),this.layoutVertexArray=new gn,this.layoutVertexArray2=new ns,this.indexArray=new $o,this.programConfigurations=new It(e.layers,e.zoom),this.segments=new U,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};on.prototype.populate=function(e,t,i){this.hasPattern=Vd("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),p=[],d=0,g=e;d<g.length;d+=1){var b=g[d],S=b.feature,C=b.id,A=b.index,P=b.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,B=$r(S,R);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),B,i)){var G=l?l.evaluate(B,{},i):void 0,W={id:C,properties:S.properties,type:S.type,sourceLayerIndex:P,index:A,geometry:R?B.geometry:Nr(S),patterns:{},sortKey:G};p.push(W)}}l&&p.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var re=0,Q=p;re<Q.length;re+=1){var le=Q[re],ge=le.geometry,_e=le.index,be=le.sourceLayerIndex;if(this.hasPattern){var Re=jd("line",this.layers,le,this.zoom,t);this.patternFeatures.push(Re)}else this.addFeature(le,ge,_e,i,{});t.featureIndex.insert(e[_e].feature,ge,_e,be,this.index)}},on.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},on.prototype.addFeatures=function(e,t,i){for(var l=0,p=this.patternFeatures;l<p.length;l+=1){var d=p[l];this.addFeature(d,d.geometry,d.index,t,i)}},on.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},on.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},on.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,pb)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cb),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},on.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},on.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},on.prototype.addFeature=function(e,t,i,l,p){var d=this.layers[0].layout,g=d.get("line-join").evaluate(e,{}),b=d.get("line-cap"),S=d.get("line-miter-limit"),C=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var A=0,P=t;A<P.length;A+=1)this.addLine(P[A],e,g,b,S,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,l)},on.prototype.addLine=function(e,t,i,l,p,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var g=0;g<e.length-1;g++)this.totalDistance+=e[g].dist(e[g+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var b=hb[t.type]==="Polygon",S=e.length;S>=2&&e[S-1].equals(e[S-2]);)S--;for(var C=0;C<S-1&&e[C].equals(e[C+1]);)C++;if(!(S<(b?3:2))){i==="bevel"&&(p=1.05);var A,P=this.overscaling<=16?122880/(512*this.overscaling):0,R=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray),B=void 0,G=void 0,W=void 0,re=void 0;this.e1=this.e2=-1,b&&(re=e[C].sub(A=e[S-2])._unit()._perp());for(var Q=C;Q<S;Q++)if(!(G=Q===S-1?b?e[C+1]:void 0:e[Q+1])||!e[Q].equals(G)){re&&(W=re),A&&(B=A),A=e[Q],re=G?G.sub(A)._unit()._perp():W;var le=(W=W||re).add(re);le.x===0&&le.y===0||le._unit();var ge=W.x*re.x+W.y*re.y,_e=le.x*re.x+le.y*re.y,be=_e!==0?1/_e:1/0,Re=2*Math.sqrt(2-2*_e),Ge=_e<fb&&B&&G,Qe=W.x*re.y-W.y*re.x>0;if(Ge&&Q>C){var _t=A.dist(B);if(_t>2*P){var ot=A.sub(A.sub(B)._mult(P/_t)._round());this.updateDistance(B,ot),this.addCurrentVertex(ot,W,0,0,R),B=ot}}var Et=B&&G,st=Et?i:b?"butt":l;if(Et&&st==="round"&&(be<d?st="miter":be<=2&&(st="fakeround")),st==="miter"&&be>p&&(st="bevel"),st==="bevel"&&(be>2&&(st="flipbevel"),be<p&&(st="miter")),B&&this.updateDistance(B,A),st==="miter")le._mult(be),this.addCurrentVertex(A,le,0,0,R);else if(st==="flipbevel"){if(be>100)le=re.mult(-1);else{var Nt=be*W.add(re).mag()/W.sub(re).mag();le._perp()._mult(Nt*(Qe?-1:1))}this.addCurrentVertex(A,le,0,0,R),this.addCurrentVertex(A,le.mult(-1),0,0,R)}else if(st==="bevel"||st==="fakeround"){var kt=-Math.sqrt(be*be-1),vt=Qe?kt:0,qt=Qe?0:kt;if(B&&this.addCurrentVertex(A,W,vt,qt,R),st==="fakeround")for(var Ot=Math.round(180*Re/Math.PI/20),Qt=1;Qt<Ot;Qt++){var St=Qt/Ot;if(St!==.5){var or=St-.5;St+=St*or*(St-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*or*or+(.848013+ge*(.215638*ge-1.06021)))}var Dr=re.sub(W)._mult(St)._add(W)._unit()._mult(Qe?-1:1);this.addHalfVertex(A,Dr.x,Dr.y,!1,Qe,0,R)}G&&this.addCurrentVertex(A,re,-vt,-qt,R)}else if(st==="butt")this.addCurrentVertex(A,le,0,0,R);else if(st==="square"){var qr=B?1:-1;this.addCurrentVertex(A,le,qr,qr,R)}else st==="round"&&(B&&(this.addCurrentVertex(A,W,0,0,R),this.addCurrentVertex(A,W,1,1,R,!0)),G&&(this.addCurrentVertex(A,re,-1,-1,R,!0),this.addCurrentVertex(A,re,0,0,R)));if(Ge&&Q<S-1){var Ur=A.dist(G);if(Ur>2*P){var Rr=A.add(G.sub(A)._mult(P/Ur)._round());this.updateDistance(A,Rr),this.addCurrentVertex(Rr,re,0,0,R),A=Rr}}}}},on.prototype.addCurrentVertex=function(e,t,i,l,p,d){d===void 0&&(d=!1);var g=t.y*l-t.x,b=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,d,!1,i,p),this.addHalfVertex(e,g,b,d,!0,-l,p),this.distance>vy/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,i,l,p,d))},on.prototype.addHalfVertex=function(e,t,i,l,p,d,g){var b=.5*(this.lineClips?this.scaledDistance*(vy-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&b)<<2,b>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var S=g.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),g.primitiveLength++),p?this.e2=S:this.e1=S},on.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},on.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},ft("LineBucket",on,{omit:["layers","patternFeatures"]});var db=new Mi({"line-cap":new bt(N.layout_line["line-cap"]),"line-join":new yt(N.layout_line["line-join"]),"line-miter-limit":new bt(N.layout_line["line-miter-limit"]),"line-round-limit":new bt(N.layout_line["line-round-limit"]),"line-sort-key":new yt(N.layout_line["line-sort-key"])}),_y={paint:new Mi({"line-opacity":new yt(N.paint_line["line-opacity"]),"line-color":new yt(N.paint_line["line-color"]),"line-translate":new bt(N.paint_line["line-translate"]),"line-translate-anchor":new bt(N.paint_line["line-translate-anchor"]),"line-width":new yt(N.paint_line["line-width"]),"line-gap-width":new yt(N.paint_line["line-gap-width"]),"line-offset":new yt(N.paint_line["line-offset"]),"line-blur":new yt(N.paint_line["line-blur"]),"line-dasharray":new Wi(N.paint_line["line-dasharray"]),"line-pattern":new tu(N.paint_line["line-pattern"]),"line-gradient":new to(N.paint_line["line-gradient"])}),layout:db},xy=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(i,l){return l=new Gt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,i,l)},t.prototype.evaluate=function(i,l,p,d){return l=Rt({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,i,l,p,d)},t}(yt))(_y.paint.properties["line-width"].specification);xy.useIntegerZoom=!0;var mb=function(e){function t(i){e.call(this,i,_y),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof pn,this.gradientVersion=(this.gradientVersion+1)%mt)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(i,l){e.prototype.recalculate.call(this,i,l),this.paint._values["line-floorwidth"]=xy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},t.prototype.createBucket=function(i){return new on(i)},t.prototype.queryRadius=function(i){var l=i,p=by(go("line-width",this,l),go("line-gap-width",this,l)),d=go("line-offset",this,l);return p/2+Math.abs(d)+gi(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(i,l,p,d,g,b,S){var C=Po(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,S),A=S/2*by(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),P=this.paint.get("line-offset").evaluate(l,p);return P&&(d=function(R,B){for(var G=[],W=new ke(0,0),re=0;re<R.length;re++){for(var Q=R[re],le=[],ge=0;ge<Q.length;ge++){var _e=Q[ge],be=Q[ge+1],Re=ge===0?W:_e.sub(Q[ge-1])._unit()._perp(),Ge=ge===Q.length-1?W:be.sub(_e)._unit()._perp(),Qe=Re._add(Ge)._unit();Qe._mult(1/(Qe.x*Ge.x+Qe.y*Ge.y)),le.push(Qe._mult(B)._add(_e))}G.push(le)}return G}(d,P*S)),function(R,B,G){for(var W=0;W<B.length;W++){var re=B[W];if(R.length>=3){for(var Q=0;Q<re.length;Q++)if(mo(R,re[Q]))return!0}if(Nn(R,re,G))return!0}return!1}(C,d,A)},t.prototype.isTileClipped=function(){return!0},t}(ho);function by(e,t){return t>0?t+2*e:e}var gb=wi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),yb=wi([{name:"a_projected_pos",components:3,type:"Float32"}],4),vb=(wi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),wy=(wi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),_b=wi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xb(e,t,i){return e.sections.forEach(function(l){l.text=function(p,d,g){var b=d.layout.get("text-transform").evaluate(g,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),In.applyArabicShaping&&(p=In.applyArabicShaping(p)),p}(l.text,t,i)}),e}wi([{name:"triangle",components:3,type:"Uint16"}]),wi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wi([{type:"Float32",name:"offsetX"}]),wi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ey=function(e,t,i,l,p){var d,g,b=8*p-l-1,S=(1<<b)-1,C=S>>1,A=-7,P=i?p-1:0,R=i?-1:1,B=e[t+P];for(P+=R,d=B&(1<<-A)-1,B>>=-A,A+=b;A>0;d=256*d+e[t+P],P+=R,A-=8);for(g=d&(1<<-A)-1,d>>=-A,A+=l;A>0;g=256*g+e[t+P],P+=R,A-=8);if(d===0)d=1-C;else{if(d===S)return g?NaN:1/0*(B?-1:1);g+=Math.pow(2,l),d-=C}return(B?-1:1)*g*Math.pow(2,d-l)},Sy=function(e,t,i,l,p,d){var g,b,S,C=8*d-p-1,A=(1<<C)-1,P=A>>1,R=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=l?0:d-1,G=l?1:-1,W=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,g=A):(g=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-g))<1&&(g--,S*=2),(t+=g+P>=1?R/S:R*Math.pow(2,1-P))*S>=2&&(g++,S/=2),g+P>=A?(b=0,g=A):g+P>=1?(b=(t*S-1)*Math.pow(2,p),g+=P):(b=t*Math.pow(2,P-1)*Math.pow(2,p),g=0));p>=8;e[i+B]=255&b,B+=G,b/=256,p-=8);for(g=g<<p|b,C+=p;C>0;e[i+B]=255&g,B+=G,g/=256,C-=8);e[i+B-G]|=128*W},Eh=Ir;function Ir(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var Ty=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function La(e){return e.type===Ir.Bytes?e.readVarint()+e.pos:e.pos+1}function pu(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Cy(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var p=i.pos-1;p>=e;p--)i.buf[p+l]=i.buf[p]}function bb(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function wb(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Eb(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Sb(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Tb(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Cb(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Ib(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Ab(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function kb(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Sh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function hu(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Iy(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Pb(e,t,i){e===1&&i.readMessage(zb,t)}function zb(e,t,i){if(e===3){var l=i.readMessage(Mb,{}),p=l.width,d=l.height,g=l.left,b=l.top,S=l.advance;t.push({id:l.id,bitmap:new ol({width:p+6,height:d+6},l.bitmap),metrics:{width:p,height:d,left:g,top:b,advance:S}})}}function Mb(e,t,i){e===1?t.id=i.readVarint():e===2?t.bitmap=i.readBytes():e===3?t.width=i.readVarint():e===4?t.height=i.readVarint():e===5?t.left=i.readSVarint():e===6?t.top=i.readSVarint():e===7&&(t.advance=i.readVarint())}function Ay(e){for(var t=0,i=0,l=0,p=e;l<p.length;l+=1){var d=p[l];t+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function(W,re){return re.h-W.h});for(var g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],b=0,S=0,C=0,A=e;C<A.length;C+=1)for(var P=A[C],R=g.length-1;R>=0;R--){var B=g[R];if(!(P.w>B.w||P.h>B.h)){if(P.x=B.x,P.y=B.y,S=Math.max(S,P.y+P.h),b=Math.max(b,P.x+P.w),P.w===B.w&&P.h===B.h){var G=g.pop();R<g.length&&(g[R]=G)}else P.h===B.h?(B.x+=P.w,B.w-=P.w):P.w===B.w?(B.y+=P.h,B.h-=P.h):(g.push({x:B.x+P.w,y:B.y,w:B.w-P.w,h:P.h}),B.y+=P.h,B.h-=P.h);break}}return{w:b,h:S,fill:t/(b*S)||0}}Ir.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),p=l>>3,d=this.pos;this.type=7&l,e(p,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Iy(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sh(this.buf,this.pos)+4294967296*Sh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Sh(this.buf,this.pos)+4294967296*Iy(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ey(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ey(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(p,d,g){var b,S,C=g.buf;if(b=(112&(S=C[g.pos++]))>>4,S<128||(b|=(127&(S=C[g.pos++]))<<3,S<128)||(b|=(127&(S=C[g.pos++]))<<10,S<128)||(b|=(127&(S=C[g.pos++]))<<17,S<128)||(b|=(127&(S=C[g.pos++]))<<24,S<128)||(b|=(1&(S=C[g.pos++]))<<31,S<128))return pu(p,b,d);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Ty?function(i,l,p){return Ty.decode(i.subarray(l,p))}(this.buf,t,e):function(i,l,p){for(var d="",g=l;g<p;){var b,S,C,A=i[g],P=null,R=A>239?4:A>223?3:A>191?2:1;if(g+R>p)break;R===1?A<128&&(P=A):R===2?(192&(b=i[g+1]))==128&&(P=(31&A)<<6|63&b)<=127&&(P=null):R===3?(S=i[g+2],(192&(b=i[g+1]))==128&&(192&S)==128&&((P=(15&A)<<12|(63&b)<<6|63&S)<=2047||P>=55296&&P<=57343)&&(P=null)):R===4&&(S=i[g+2],C=i[g+3],(192&(b=i[g+1]))==128&&(192&S)==128&&(192&C)==128&&((P=(15&A)<<18|(63&b)<<12|(63&S)<<6|63&C)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,R=1):P>65535&&(P-=65536,d+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),d+=String.fromCharCode(P),g+=R}return d}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ir.Bytes)return e.push(this.readVarint(t));var i=La(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSVarint());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ir.Bytes)return e.push(this.readBoolean());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFloat());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ir.Bytes)return e.push(this.readDouble());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed32());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed32());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed64());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed64());var t=La(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ir.Fixed32)this.pos+=4;else{if(t!==Ir.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),hu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),hu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),hu(this.buf,-1&e,this.pos),hu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),hu(this.buf,-1&e,this.pos),hu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,i){var l,p;if(t>=0?(l=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,p=p+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,g,b){b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,d>>>=7,b.buf[b.pos++]=127&d|128,b.buf[b.pos]=127&(d>>>=7)}(l,0,i),function(d,g){var b=(7&d)<<4;g.buf[g.pos++]|=b|((d>>>=3)?128:0),d&&(g.buf[g.pos++]=127&d|((d>>>=7)?128:0),d&&(g.buf[g.pos++]=127&d|((d>>>=7)?128:0),d&&(g.buf[g.pos++]=127&d|((d>>>=7)?128:0),d&&(g.buf[g.pos++]=127&d|((d>>>=7)?128:0),d&&(g.buf[g.pos++]=127&d)))))}(p,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,p,d){for(var g,b,S=0;S<p.length;S++){if((g=p.charCodeAt(S))>55295&&g<57344){if(!b){g>56319||S+1===p.length?(l[d++]=239,l[d++]=191,l[d++]=189):b=g;continue}if(g<56320){l[d++]=239,l[d++]=191,l[d++]=189,b=g;continue}g=b-55296<<10|g-56320|65536,b=null}else b&&(l[d++]=239,l[d++]=191,l[d++]=189,b=null);g<128?l[d++]=g:(g<2048?l[d++]=g>>6|192:(g<65536?l[d++]=g>>12|224:(l[d++]=g>>18|240,l[d++]=g>>12&63|128),l[d++]=g>>6&63|128),l[d++]=63&g|128)}return d}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Cy(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Sy(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Sy(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&Cy(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,Ir.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,bb,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,wb,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Tb,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Eb,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Sb,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Cb,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ib,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Ab,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,kb,t)},writeBytesField:function(e,t){this.writeTag(e,Ir.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ir.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ir.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ir.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ir.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ir.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ir.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ir.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ir.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ir.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Th=function(e,t){var i=t.pixelRatio,l=t.version,p=t.stretchX,d=t.stretchY,g=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=p,this.stretchY=d,this.content=g,this.version=l},Oc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Oc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Oc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Oc.tlbr.get=function(){return this.tl.concat(this.br)},Oc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Th.prototype,Oc);var Bc=function(e,t){var i={},l={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,i,p),this.addImages(t,l,p);var d=Ay(p),g=new vn({width:d.w||1,height:d.h||1});for(var b in e){var S=e[b],C=i[b].paddedRect;vn.copy(S.data,g,{x:0,y:0},{x:C.x+1,y:C.y+1},S.data)}for(var A in t){var P=t[A],R=l[A].paddedRect,B=R.x+1,G=R.y+1,W=P.data.width,re=P.data.height;vn.copy(P.data,g,{x:0,y:0},{x:B,y:G},P.data),vn.copy(P.data,g,{x:0,y:re-1},{x:B,y:G-1},{width:W,height:1}),vn.copy(P.data,g,{x:0,y:0},{x:B,y:G+re},{width:W,height:1}),vn.copy(P.data,g,{x:W-1,y:0},{x:B-1,y:G},{width:1,height:re}),vn.copy(P.data,g,{x:0,y:0},{x:B+W,y:G},{width:1,height:re})}this.image=g,this.iconPositions=i,this.patternPositions=l};Bc.prototype.addImages=function(e,t,i){for(var l in e){var p=e[l],d={x:0,y:0,w:p.data.width+2,h:p.data.height+2};i.push(d),t[l]=new Th(d,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},Bc.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},Bc.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;i.update(t.data,void 0,{x:l[0],y:l[1]})}},ft("ImagePosition",Th),ft("ImageAtlas",Bc);var Un={horizontal:1,vertical:2,horizontalOnly:3},fu=function(){this.scale=1,this.fontStack="",this.imageName=null};fu.forText=function(e,t){var i=new fu;return i.scale=e||1,i.fontStack=t,i},fu.forImage=function(e){var t=new fu;return t.imageName=e,t};var $i=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ch(e,t,i,l,p,d,g,b,S,C,A,P,R,B,G,W){var re,Q=$i.fromFeature(e,p);P===Un.vertical&&Q.verticalizePunctuation();var le=In.processBidirectionalText,ge=In.processStyledBidirectionalText;if(le&&Q.sections.length===1){re=[];for(var _e=0,be=le(Q.toString(),Zd(Q,C,d,t,l,B,G));_e<be.length;_e+=1){var Re=be[_e],Ge=new $i;Ge.text=Re,Ge.sections=Q.sections;for(var Qe=0;Qe<Re.length;Qe++)Ge.sectionIndex.push(0);re.push(Ge)}}else if(ge){re=[];for(var _t=0,ot=ge(Q.text,Q.sectionIndex,Zd(Q,C,d,t,l,B,G));_t<ot.length;_t+=1){var Et=ot[_t],st=new $i;st.text=Et[0],st.sectionIndex=Et[1],st.sections=Q.sections,re.push(st)}}else re=function(vt,qt){for(var Ot=[],Qt=vt.text,St=0,or=0,Dr=qt;or<Dr.length;or+=1){var qr=Dr[or];Ot.push(vt.substring(St,qr)),St=qr}return St<Qt.length&&Ot.push(vt.substring(St,Qt.length)),Ot}(Q,Zd(Q,C,d,t,l,B,G));var Nt=[],kt={positionedLines:Nt,text:Q.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(vt,qt,Ot,Qt,St,or,Dr,qr,Ur,Rr,Zr,yi){for(var vi=0,Xi=-17,Ti=0,Ji=0,Xr=qr==="right"?1:qr==="left"?0:.5,Ci=0,Kt=0,wr=St;Kt<wr.length;Kt+=1){var mr=wr[Kt];mr.trim();var nr=mr.getMaxScale(),an=24*(nr-1),Fi={positionedGlyphs:[],lineOffset:0};vt.positionedLines[Ci]=Fi;var Ar=Fi.positionedGlyphs,ri=0;if(mr.length()){for(var Ni=0;Ni<mr.length();Ni++){var ar=mr.getSection(Ni),ta=mr.getSectionIndex(Ni),Vn=mr.getCharCode(Ni),ra=0,Jr=null,ia=null,yo=null,bu=24,ul=!(Ur===Un.horizontal||!Zr&&!Yl(Vn)||Zr&&(Ih[Vn]||(Ba=Vn,rt.Arabic(Ba)||rt["Arabic Supplement"](Ba)||rt["Arabic Extended-A"](Ba)||rt["Arabic Presentation Forms-A"](Ba)||rt["Arabic Presentation Forms-B"](Ba))));if(ar.imageName){var wu=Qt[ar.imageName];if(!wu)continue;yo=ar.imageName,vt.iconsInText=vt.iconsInText||!0,ia=wu.paddedRect;var Oa=wu.displaySize;ar.scale=24*ar.scale/yi,ra=an+(24-Oa[1]*ar.scale),bu=(Jr={width:Oa[0],height:Oa[1],left:1,top:-3,advance:ul?Oa[1]:Oa[0]}).advance;var Eu=ul?Oa[0]*ar.scale-24*nr:Oa[1]*ar.scale-24*nr;Eu>0&&Eu>ri&&(ri=Eu)}else{var Oh=Ot[ar.fontStack],Su=Oh&&Oh[Vn];if(Su&&Su.rect)ia=Su.rect,Jr=Su.metrics;else{var Uc=qt[ar.fontStack],Bh=Uc&&Uc[Vn];if(!Bh)continue;Jr=Bh.metrics}ra=24*(nr-ar.scale)}ul?(vt.verticalizable=!0,Ar.push({glyph:Vn,imageName:yo,x:vi,y:Xi+ra,vertical:ul,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:ta,metrics:Jr,rect:ia}),vi+=bu*ar.scale+Rr):(Ar.push({glyph:Vn,imageName:yo,x:vi,y:Xi+ra,vertical:ul,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:ta,metrics:Jr,rect:ia}),vi+=Jr.advance*ar.scale+Rr)}Ar.length!==0&&(Ti=Math.max(vi-Rr,Ti),Db(Ar,0,Ar.length-1,Xr,ri)),vi=0;var Fh=or*nr+ri;Fi.lineOffset=Math.max(ri,an),Xi+=Fh,Ji=Math.max(Fh,Ji),++Ci}else Xi+=or,++Ci}var Ba,Vc=Xi- -17,Tu=Hd(Dr),hs=Tu.horizontalAlign,Cu=Tu.verticalAlign;(function(Nh,Uh,jc,qc,Vh,Zc,Hc,Gc,jh){var Iu,qh=(Uh-jc)*Vh;Iu=Zc!==Hc?-Gc*qc- -17:(-qc*jh+.5)*Hc;for(var Au=0,Wc=Nh;Au<Wc.length;Au+=1)for(var cl=0,Kc=Wc[Au].positionedGlyphs;cl<Kc.length;cl+=1){var ku=Kc[cl];ku.x+=qh,ku.y+=Iu}})(vt.positionedLines,Xr,hs,Cu,Ti,Ji,or,Vc,St.length),vt.top+=-Cu*Vc,vt.bottom=vt.top+Vc,vt.left+=-hs*Ti,vt.right=vt.left+Ti}(kt,t,i,l,re,g,b,S,P,C,R,W),!function(vt){for(var qt=0,Ot=vt;qt<Ot.length;qt+=1)if(Ot[qt].positionedGlyphs.length!==0)return!1;return!0}(Nt)&&kt}$i.fromFeature=function(e,t){for(var i=new $i,l=0;l<e.sections.length;l++){var p=e.sections[l];p.image?i.addImageSection(p):i.addTextSection(p,t)}return i},$i.prototype.length=function(){return this.text.length},$i.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},$i.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},$i.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},$i.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var l=e.charCodeAt(i+1)||null,p=e.charCodeAt(i-1)||null;t+=l&&xc(l)&&!Rc[e[i+1]]||p&&xc(p)&&!Rc[e[i-1]]||!Rc[e[i]]?e[i]:Rc[e[i]]}return t}(this.text)},$i.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Ih[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,l=this.text.length-1;l>=0&&l>=e&&Ih[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},$i.prototype.substring=function(e,t){var i=new $i;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},$i.prototype.toString=function(){return this.text},$i.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,i){return Math.max(t,e.sections[i].scale)},0)},$i.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(fu.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(i)},$i.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(fu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):dr("Reached maximum number of images 6401")}else dr("Can't add FormattedSection with an empty image.")},$i.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ih={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},kn={};function ky(e,t,i,l,p,d){if(t.imageName){var g=l[t.imageName];return g?g.displaySize[0]*t.scale*24/d+p:0}var b=i[t.fontStack],S=b&&b[e];return S?S.metrics.advance*t.scale+p:0}function Py(e,t,i,l){var p=Math.pow(e-t,2);return l?e<t?p/2:2*p:p+Math.abs(i)*i}function Lb(e,t,i){var l=0;return e===10&&(l-=1e4),i&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function zy(e,t,i,l,p,d){for(var g=null,b=Py(t,i,p,d),S=0,C=l;S<C.length;S+=1){var A=C[S],P=Py(t-A.x,i,p,d)+A.badness;P<=b&&(g=A,b=P)}return{index:e,x:t,priorBreak:g,badness:b}}function Zd(e,t,i,l,p,d,g){if(d!=="point")return[];if(!e)return[];for(var b,S=[],C=function(re,Q,le,ge,_e,be){for(var Re=0,Ge=0;Ge<re.length();Ge++){var Qe=re.getSection(Ge);Re+=ky(re.getCharCode(Ge),Qe,ge,_e,Q,be)}return Re/Math.max(1,Math.ceil(Re/le))}(e,t,i,l,p,g),A=e.text.indexOf("​")>=0,P=0,R=0;R<e.length();R++){var B=e.getSection(R),G=e.getCharCode(R);if(Ih[G]||(P+=ky(G,B,l,p,t,g)),R<e.length()-1){var W=!((b=G)<11904||!(rt["Bopomofo Extended"](b)||rt.Bopomofo(b)||rt["CJK Compatibility Forms"](b)||rt["CJK Compatibility Ideographs"](b)||rt["CJK Compatibility"](b)||rt["CJK Radicals Supplement"](b)||rt["CJK Strokes"](b)||rt["CJK Symbols and Punctuation"](b)||rt["CJK Unified Ideographs Extension A"](b)||rt["CJK Unified Ideographs"](b)||rt["Enclosed CJK Letters and Months"](b)||rt["Halfwidth and Fullwidth Forms"](b)||rt.Hiragana(b)||rt["Ideographic Description Characters"](b)||rt["Kangxi Radicals"](b)||rt["Katakana Phonetic Extensions"](b)||rt.Katakana(b)||rt["Vertical Forms"](b)||rt["Yi Radicals"](b)||rt["Yi Syllables"](b)));(kn[G]||W||B.imageName)&&S.push(zy(R+1,P,C,S,Lb(G,e.getCharCode(R+1),W&&A),!1))}}return function re(Q){return Q?re(Q.priorBreak).concat(Q.index):[]}(zy(e.length(),P,C,S,0,!0))}function Hd(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Db(e,t,i,l,p){if(l||p)for(var d=e[i],g=(e[i].x+d.metrics.advance*d.scale)*l,b=t;b<=i;b++)e[b].x-=g,e[b].y+=p}function My(e,t,i,l,p,d){var g,b=e.image;if(b.content){var S=b.content,C=b.pixelRatio||1;g=[S[0]/C,S[1]/C,b.displaySize[0]-S[2]/C,b.displaySize[1]-S[3]/C]}var A,P,R,B,G=t.left*d,W=t.right*d;i==="width"||i==="both"?(B=p[0]+G-l[3],P=p[0]+W+l[1]):P=(B=p[0]+(G+W-b.displaySize[0])/2)+b.displaySize[0];var re=t.top*d,Q=t.bottom*d;return i==="height"||i==="both"?(A=p[1]+re-l[0],R=p[1]+Q+l[2]):R=(A=p[1]+(re+Q-b.displaySize[1])/2)+b.displaySize[1],{image:b,top:A,right:P,bottom:R,left:B,collisionPadding:g}}kn[10]=!0,kn[32]=!0,kn[38]=!0,kn[40]=!0,kn[41]=!0,kn[43]=!0,kn[45]=!0,kn[47]=!0,kn[173]=!0,kn[183]=!0,kn[8203]=!0,kn[8208]=!0,kn[8211]=!0,kn[8231]=!0;var du=function(e){function t(i,l,p,d){e.call(this,i,l),this.angle=p,d!==void 0&&(this.segment=d)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(ke);function Gd(e,t){var i=t.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Gt(e+1))};if(i.kind==="source")return{kind:"source"};for(var l=i.zoomStops,p=i.interpolationType,d=0;d<l.length&&l[d]<=e;)d++;for(var g=d=Math.max(0,d-1);g<l.length&&l[g]<e+1;)g++;g=Math.min(l.length-1,g);var b=l[d],S=l[g];return i.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:S,minSize:i.evaluate(new Gt(b)),maxSize:i.evaluate(new Gt(S)),interpolationType:p}}function Ly(e,t,i){var l=t.uSize,p=i.lowerSize;return e.kind==="source"?p/128:e.kind==="composite"?ei(p/128,i.upperSize/128,t.uSizeT):l}function Dy(e,t){var i=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var p=e.interpolationType,d=p?Dt(Pi.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=ei(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:l}}ft("Anchor",du);var Rb=Object.freeze({__proto__:null,getSizeData:Gd,evaluateSizeForFeature:Ly,evaluateSizeForZoom:Dy,SIZE_PACK_FACTOR:128});function Ry(e,t,i,l,p){if(t.segment===void 0)return!0;for(var d=t,g=t.segment+1,b=0;b>-i/2;){if(--g<0)return!1;b-=e[g].dist(d),d=e[g]}b+=e[g].dist(e[g+1]),g++;for(var S=[],C=0;b<i/2;){var A=e[g],P=e[g+1];if(!P)return!1;var R=e[g-1].angleTo(A)-A.angleTo(P);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:R}),C+=R;b-S[0].distance>l;)C-=S.shift().angleDelta;if(C>p)return!1;g++,b+=A.dist(P)}return!0}function Oy(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function By(e,t,i){return e?.6*t*i:0}function Fy(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Ob(e,t,i,l,p,d){for(var g=By(i,p,d),b=Fy(i,l)*d,S=0,C=Oy(e)/2,A=0;A<e.length-1;A++){var P=e[A],R=e[A+1],B=P.dist(R);if(S+B>C){var G=(C-S)/B,W=ei(P.x,R.x,G),re=ei(P.y,R.y,G),Q=new du(W,re,R.angleTo(P),A);return Q._round(),!g||Ry(e,Q,b,g,t)?Q:void 0}S+=B}}function Bb(e,t,i,l,p,d,g,b,S){var C=By(l,d,g),A=Fy(l,p),P=A*g,R=e[0].x===0||e[0].x===S||e[0].y===0||e[0].y===S;return t-P<t/4&&(t=P+t/4),function B(G,W,re,Q,le,ge,_e,be,Re){for(var Ge=ge/2,Qe=Oy(G),_t=0,ot=W-re,Et=[],st=0;st<G.length-1;st++){for(var Nt=G[st],kt=G[st+1],vt=Nt.dist(kt),qt=kt.angleTo(Nt);ot+re<_t+vt;){var Ot=((ot+=re)-_t)/vt,Qt=ei(Nt.x,kt.x,Ot),St=ei(Nt.y,kt.y,Ot);if(Qt>=0&&Qt<Re&&St>=0&&St<Re&&ot-Ge>=0&&ot+Ge<=Qe){var or=new du(Qt,St,qt,st);or._round(),Q&&!Ry(G,or,ge,Q,le)||Et.push(or)}}_t+=vt}return be||Et.length||_e||(Et=B(G,_t/2,re,Q,le,ge,_e,!0,Re)),Et}(e,R?t/2*b%t:(A/2+2*d)*g*b%t,t,C,i,P,R,!1,S)}function Ny(e,t,i,l,p){for(var d=[],g=0;g<e.length;g++)for(var b=e[g],S=void 0,C=0;C<b.length-1;C++){var A=b[C],P=b[C+1];A.x<t&&P.x<t||(A.x<t?A=new ke(t,A.y+(t-A.x)/(P.x-A.x)*(P.y-A.y))._round():P.x<t&&(P=new ke(t,A.y+(t-A.x)/(P.x-A.x)*(P.y-A.y))._round()),A.y<i&&P.y<i||(A.y<i?A=new ke(A.x+(i-A.y)/(P.y-A.y)*(P.x-A.x),i)._round():P.y<i&&(P=new ke(A.x+(i-A.y)/(P.y-A.y)*(P.x-A.x),i)._round()),A.x>=l&&P.x>=l||(A.x>=l?A=new ke(l,A.y+(l-A.x)/(P.x-A.x)*(P.y-A.y))._round():P.x>=l&&(P=new ke(l,A.y+(l-A.x)/(P.x-A.x)*(P.y-A.y))._round()),A.y>=p&&P.y>=p||(A.y>=p?A=new ke(A.x+(p-A.y)/(P.y-A.y)*(P.x-A.x),p)._round():P.y>=p&&(P=new ke(A.x+(p-A.y)/(P.y-A.y)*(P.x-A.x),p)._round()),S&&A.equals(S[S.length-1])||d.push(S=[A]),S.push(P)))))}return d}function Uy(e,t,i,l){var p=[],d=e.image,g=d.pixelRatio,b=d.paddedRect.w-2,S=d.paddedRect.h-2,C=e.right-e.left,A=e.bottom-e.top,P=d.stretchX||[[0,b]],R=d.stretchY||[[0,S]],B=function(Qt,St){return Qt+St[1]-St[0]},G=P.reduce(B,0),W=R.reduce(B,0),re=b-G,Q=S-W,le=0,ge=G,_e=0,be=W,Re=0,Ge=re,Qe=0,_t=Q;if(d.content&&l){var ot=d.content;le=Ah(P,0,ot[0]),_e=Ah(R,0,ot[1]),ge=Ah(P,ot[0],ot[2]),be=Ah(R,ot[1],ot[3]),Re=ot[0]-le,Qe=ot[1]-_e,Ge=ot[2]-ot[0]-ge,_t=ot[3]-ot[1]-be}var Et=function(Qt,St,or,Dr){var qr=kh(Qt.stretch-le,ge,C,e.left),Ur=Ph(Qt.fixed-Re,Ge,Qt.stretch,G),Rr=kh(St.stretch-_e,be,A,e.top),Zr=Ph(St.fixed-Qe,_t,St.stretch,W),yi=kh(or.stretch-le,ge,C,e.left),vi=Ph(or.fixed-Re,Ge,or.stretch,G),Xi=kh(Dr.stretch-_e,be,A,e.top),Ti=Ph(Dr.fixed-Qe,_t,Dr.stretch,W),Ji=new ke(qr,Rr),Xr=new ke(yi,Rr),Ci=new ke(yi,Xi),Kt=new ke(qr,Xi),wr=new ke(Ur/g,Zr/g),mr=new ke(vi/g,Ti/g),nr=t*Math.PI/180;if(nr){var an=Math.sin(nr),Fi=Math.cos(nr),Ar=[Fi,-an,an,Fi];Ji._matMult(Ar),Xr._matMult(Ar),Kt._matMult(Ar),Ci._matMult(Ar)}var ri=Qt.stretch+Qt.fixed,Ni=St.stretch+St.fixed;return{tl:Ji,tr:Xr,bl:Kt,br:Ci,tex:{x:d.paddedRect.x+1+ri,y:d.paddedRect.y+1+Ni,w:or.stretch+or.fixed-ri,h:Dr.stretch+Dr.fixed-Ni},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wr,pixelOffsetBR:mr,minFontScaleX:Ge/g/C,minFontScaleY:_t/g/A,isSDF:i}};if(l&&(d.stretchX||d.stretchY))for(var st=Vy(P,re,G),Nt=Vy(R,Q,W),kt=0;kt<st.length-1;kt++)for(var vt=st[kt],qt=st[kt+1],Ot=0;Ot<Nt.length-1;Ot++)p.push(Et(vt,Nt[Ot],qt,Nt[Ot+1]));else p.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return p}function Ah(e,t,i){for(var l=0,p=0,d=e;p<d.length;p+=1){var g=d[p];l+=Math.max(t,Math.min(i,g[1]))-Math.max(t,Math.min(i,g[0]))}return l}function Vy(e,t,i){for(var l=[{fixed:-1,stretch:0}],p=0,d=e;p<d.length;p+=1){var g=d[p],b=g[0],S=g[1],C=l[l.length-1];l.push({fixed:b-C.stretch,stretch:C.stretch}),l.push({fixed:b-C.stretch,stretch:C.stretch+(S-b)})}return l.push({fixed:t+1,stretch:i}),l}function kh(e,t,i,l){return e/t*i+l}function Ph(e,t,i,l){return e-t*i/l}var zh=function(e,t,i,l,p,d,g,b,S,C){if(this.boxStartIndex=e.length,S){var A=d.top,P=d.bottom,R=d.collisionPadding;R&&(A-=R[1],P+=R[3]);var B=P-A;B>0&&(B=Math.max(10,B),this.circleDiameter=B)}else{var G=d.top*g-b,W=d.bottom*g+b,re=d.left*g-b,Q=d.right*g+b,le=d.collisionPadding;if(le&&(re-=le[0]*g,G-=le[1]*g,Q+=le[2]*g,W+=le[3]*g),C){var ge=new ke(re,G),_e=new ke(Q,G),be=new ke(re,W),Re=new ke(Q,W),Ge=C*Math.PI/180;ge._rotate(Ge),_e._rotate(Ge),be._rotate(Ge),Re._rotate(Ge),re=Math.min(ge.x,_e.x,be.x,Re.x),Q=Math.max(ge.x,_e.x,be.x,Re.x),G=Math.min(ge.y,_e.y,be.y,Re.y),W=Math.max(ge.y,_e.y,be.y,Re.y)}e.emplaceBack(t.x,t.y,re,G,Q,W,i,l,p)}this.boxEndIndex=e.length},mu=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Fb),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Fb(e,t){return e<t?-1:e>t?1:0}function Nb(e,t,i){t===void 0&&(t=1),i===void 0&&(i=!1);for(var l=1/0,p=1/0,d=-1/0,g=-1/0,b=e[0],S=0;S<b.length;S++){var C=b[S];(!S||C.x<l)&&(l=C.x),(!S||C.y<p)&&(p=C.y),(!S||C.x>d)&&(d=C.x),(!S||C.y>g)&&(g=C.y)}var A=Math.min(d-l,g-p),P=A/2,R=new mu([],Ub);if(A===0)return new ke(l,p);for(var B=l;B<d;B+=A)for(var G=p;G<g;G+=A)R.push(new gu(B+P,G+P,P,e));for(var W=function(le){for(var ge=0,_e=0,be=0,Re=le[0],Ge=0,Qe=Re.length,_t=Qe-1;Ge<Qe;_t=Ge++){var ot=Re[Ge],Et=Re[_t],st=ot.x*Et.y-Et.x*ot.y;_e+=(ot.x+Et.x)*st,be+=(ot.y+Et.y)*st,ge+=3*st}return new gu(_e/ge,be/ge,0,le)}(e),re=R.length;R.length;){var Q=R.pop();(Q.d>W.d||!W.d)&&(W=Q,i&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,re)),Q.max-W.d<=t||(R.push(new gu(Q.p.x-(P=Q.h/2),Q.p.y-P,P,e)),R.push(new gu(Q.p.x+P,Q.p.y-P,P,e)),R.push(new gu(Q.p.x-P,Q.p.y+P,P,e)),R.push(new gu(Q.p.x+P,Q.p.y+P,P,e)),re+=4)}return i&&(console.log("num probes: "+re),console.log("best distance: "+W.d)),W.p}function Ub(e,t){return t.max-e.max}function gu(e,t,i,l){this.p=new ke(e,t),this.h=i,this.d=function(p,d){for(var g=!1,b=1/0,S=0;S<d.length;S++)for(var C=d[S],A=0,P=C.length,R=P-1;A<P;R=A++){var B=C[A],G=C[R];B.y>p.y!=G.y>p.y&&p.x<(G.x-B.x)*(p.y-B.y)/(G.y-B.y)+B.x&&(g=!g),b=Math.min(b,ls(p,B,G))}return(g?1:-1)*Math.sqrt(b)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}mu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},mu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},mu.prototype.peek=function(){return this.data[0]},mu.prototype._up=function(e){for(var t=this.data,i=this.compare,l=t[e];e>0;){var p=e-1>>1,d=t[p];if(i(l,d)>=0)break;t[e]=d,e=p}t[e]=l},mu.prototype._down=function(e){for(var t=this.data,i=this.compare,l=this.length>>1,p=t[e];e<l;){var d=1+(e<<1),g=t[d],b=d+1;if(b<this.length&&i(t[b],g)<0&&(d=b,g=t[b]),i(g,p)>=0)break;t[e]=g,e=d}t[e]=p};var Wd=Number.POSITIVE_INFINITY;function jy(e,t){return t[1]!==Wd?function(i,l,p){var d=0,g=0;switch(l=Math.abs(l),p=Math.abs(p),i){case"top-right":case"top-left":case"top":g=p-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-p}switch(i){case"top-right":case"bottom-right":case"right":d=-l;break;case"top-left":case"bottom-left":case"left":d=l}return[d,g]}(e,t[0],t[1]):function(i,l){var p=0,d=0;l<0&&(l=0);var g=l/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=g-7;break;case"bottom-right":case"bottom-left":d=7-g;break;case"bottom":d=7-l;break;case"top":d=l-7}switch(i){case"top-right":case"bottom-right":p=-g;break;case"top-left":case"bottom-left":p=g;break;case"left":p=l;break;case"right":p=-l}return[p,d]}(e,t[0])}function Kd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qy(e,t,i,l,p,d,g,b,S,C,A,P,R,B,G){var W=function(_e,be,Re,Ge,Qe,_t,ot,Et){for(var st=Ge.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Nt=[],kt=0,vt=be.positionedLines;kt<vt.length;kt+=1)for(var qt=vt[kt],Ot=0,Qt=qt.positionedGlyphs;Ot<Qt.length;Ot+=1){var St=Qt[Ot];if(St.rect){var or=St.rect||{},Dr=4,qr=!0,Ur=1,Rr=0,Zr=(Qe||Et)&&St.vertical,yi=St.metrics.advance*St.scale/2;if(Et&&be.verticalizable&&(Rr=qt.lineOffset/2-(St.imageName?-(24-St.metrics.width*St.scale)/2:24*(St.scale-1))),St.imageName){var vi=ot[St.imageName];qr=vi.sdf,Dr=1/(Ur=vi.pixelRatio)}var Xi=Qe?[St.x+yi,St.y]:[0,0],Ti=Qe?[0,0]:[St.x+yi+Re[0],St.y+Re[1]-Rr],Ji=[0,0];Zr&&(Ji=Ti,Ti=[0,0]);var Xr=(St.metrics.left-Dr)*St.scale-yi+Ti[0],Ci=(-St.metrics.top-Dr)*St.scale+Ti[1],Kt=Xr+or.w*St.scale/Ur,wr=Ci+or.h*St.scale/Ur,mr=new ke(Xr,Ci),nr=new ke(Kt,Ci),an=new ke(Xr,wr),Fi=new ke(Kt,wr);if(Zr){var Ar=new ke(-yi,yi- -17),ri=-Math.PI/2,Ni=12-yi,ar=new ke(22-Ni,-(St.imageName?Ni:0)),ta=new(Function.prototype.bind.apply(ke,[null].concat(Ji)));mr._rotateAround(ri,Ar)._add(ar)._add(ta),nr._rotateAround(ri,Ar)._add(ar)._add(ta),an._rotateAround(ri,Ar)._add(ar)._add(ta),Fi._rotateAround(ri,Ar)._add(ar)._add(ta)}if(st){var Vn=Math.sin(st),ra=Math.cos(st),Jr=[ra,-Vn,Vn,ra];mr._matMult(Jr),nr._matMult(Jr),an._matMult(Jr),Fi._matMult(Jr)}var ia=new ke(0,0),yo=new ke(0,0);Nt.push({tl:mr,tr:nr,bl:an,br:Fi,tex:or,writingMode:be.writingMode,glyphOffset:Xi,sectionIndex:St.sectionIndex,isSDF:qr,pixelOffsetTL:ia,pixelOffsetBR:yo,minFontScaleX:0,minFontScaleY:0})}}return Nt}(0,i,b,p,d,g,l,e.allowVerticalPlacement),re=e.textSizeData,Q=null;re.kind==="source"?(Q=[128*p.layout.get("text-size").evaluate(g,{})])[0]>32640&&dr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):re.kind==="composite"&&((Q=[128*B.compositeTextSizes[0].evaluate(g,{},G),128*B.compositeTextSizes[1].evaluate(g,{},G)])[0]>32640||Q[1]>32640)&&dr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,W,Q,b,d,g,C,t,S.lineStartIndex,S.lineLength,R,G);for(var le=0,ge=A;le<ge.length;le+=1)P[ge[le]]=e.text.placedSymbolArray.length-1;return 4*W.length}function Zy(e){for(var t in e)return e[t];return null}function Vb(e,t,i,l){var p=e.compareText;if(t in p){for(var d=p[t],g=d.length-1;g>=0;g--)if(l.dist(d[g])<i)return!0}else p[t]=[];return p[t].push(l),!1}var jb=cu.VectorTileFeature.types,qb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mh(e,t,i,l,p,d,g,b,S,C,A,P,R){var B=b?Math.min(32640,Math.round(b[0])):0,G=b?Math.min(32640,Math.round(b[1])):0;e.emplaceBack(t,i,Math.round(32*l),Math.round(32*p),d,g,(B<<1)+(S?1:0),G,16*C,16*A,256*P,256*R)}function $d(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Zb(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Ql(i[t].text))return!0;return!1}var yu=function(e){this.layoutVertexArray=new iu,this.indexArray=new $o,this.programConfigurations=e,this.segments=new U,this.dynamicLayoutVertexArray=new os,this.opacityVertexArray=new Qs,this.placedSymbolArray=new u};yu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},yu.prototype.upload=function(e,t,i,l){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gb.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,yb.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,qb,!0),this.opacityVertexBuffer.itemSize=1),(i||l)&&this.programConfigurations.upload(e))},yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",yu);var Fc=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new U,this.collisionVertexArray=new Cc};Fc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,vb.members,!0)},Fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",Fc);var _r=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=An([]),this.placementViewportMatrix=An([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gd(this.zoom,t["text-size"]),this.iconSizeData=Gd(this.zoom,t["icon-size"]);var i=this.layers[0].layout,l=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Un[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};_r.prototype.createArrays=function(){this.text=new yu(new It(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new yu(new It(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new x,this.lineVertexArray=new E,this.symbolInstances=new v},_r.prototype.calculateGlyphDependencies=function(e,t,i,l,p){for(var d=0;d<e.length;d++)if(t[e.charCodeAt(d)]=!0,(i||l)&&p){var g=Rc[e.charAt(d)];g&&(t[g.charCodeAt(0)]=!0)}},_r.prototype.populate=function(e,t,i){var l=this.layers[0],p=l.layout,d=p.get("text-font"),g=p.get("text-field"),b=p.get("icon-image"),S=(g.value.kind!=="constant"||g.value.value instanceof xi&&!g.value.value.isEmpty()||g.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),C=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,A=p.get("symbol-sort-key");if(this.features=[],S||C){for(var P=t.iconDependencies,R=t.glyphDependencies,B=t.availableImages,G=new Gt(this.zoom),W=0,re=e;W<re.length;W+=1){var Q=re[W],le=Q.feature,ge=Q.id,_e=Q.index,be=Q.sourceLayerIndex,Re=l._featureFilter.needGeometry,Ge=$r(le,Re);if(l._featureFilter.filter(G,Ge,i)){Re||(Ge.geometry=Nr(le));var Qe=void 0;if(S){var _t=l.getValueAndResolveTokens("text-field",Ge,i,B),ot=xi.factory(_t);Zb(ot)&&(this.hasRTLText=!0),(!this.hasRTLText||wc()==="unavailable"||this.hasRTLText&&In.isParsed())&&(Qe=xb(ot,l,Ge))}var Et=void 0;if(C){var st=l.getValueAndResolveTokens("icon-image",Ge,i,B);Et=st instanceof tn?st:tn.fromString(st)}if(Qe||Et){var Nt=this.sortFeaturesByKey?A.evaluate(Ge,{},i):void 0;if(this.features.push({id:ge,text:Qe,icon:Et,index:_e,sourceLayerIndex:be,geometry:Ge.geometry,properties:le.properties,type:jb[le.type],sortKey:Nt}),Et&&(P[Et.name]=!0),Qe){var kt=d.evaluate(Ge,{},i).join(","),vt=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Un.vertical)>=0;for(var qt=0,Ot=Qe.sections;qt<Ot.length;qt+=1){var Qt=Ot[qt];if(Qt.image)P[Qt.image.name]=!0;else{var St=_c(Qe.toString()),or=Qt.fontStack||kt,Dr=R[or]=R[or]||{};this.calculateGlyphDependencies(Qt.text,Dr,vt,this.allowVerticalPlacement,St)}}}}}}p.get("symbol-placement")==="line"&&(this.features=function(qr){var Ur={},Rr={},Zr=[],yi=0;function vi(Ar){Zr.push(qr[Ar]),yi++}function Xi(Ar,ri,Ni){var ar=Rr[Ar];return delete Rr[Ar],Rr[ri]=ar,Zr[ar].geometry[0].pop(),Zr[ar].geometry[0]=Zr[ar].geometry[0].concat(Ni[0]),ar}function Ti(Ar,ri,Ni){var ar=Ur[ri];return delete Ur[ri],Ur[Ar]=ar,Zr[ar].geometry[0].shift(),Zr[ar].geometry[0]=Ni[0].concat(Zr[ar].geometry[0]),ar}function Ji(Ar,ri,Ni){var ar=Ni?ri[0][ri[0].length-1]:ri[0][0];return Ar+":"+ar.x+":"+ar.y}for(var Xr=0;Xr<qr.length;Xr++){var Ci=qr[Xr],Kt=Ci.geometry,wr=Ci.text?Ci.text.toString():null;if(wr){var mr=Ji(wr,Kt),nr=Ji(wr,Kt,!0);if(mr in Rr&&nr in Ur&&Rr[mr]!==Ur[nr]){var an=Ti(mr,nr,Kt),Fi=Xi(mr,nr,Zr[an].geometry);delete Ur[mr],delete Rr[nr],Rr[Ji(wr,Zr[Fi].geometry,!0)]=Fi,Zr[an].geometry=null}else mr in Rr?Xi(mr,nr,Kt):nr in Ur?Ti(mr,nr,Kt):(vi(Xr),Ur[mr]=yi-1,Rr[nr]=yi-1)}else vi(Xr)}return Zr.filter(function(Ar){return Ar.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(qr,Ur){return qr.sortKey-Ur.sortKey})}},_r.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},_r.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},_r.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_r.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_r.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},_r.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},_r.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),d={},g=e.segment+1;g<t.length;g++)d[g]={x:t[g].x,y:t[g].y,tileUnitDistanceFromAnchor:l},g<t.length-1&&(l+=t[g+1].dist(t[g]));for(var b=e.segment||0;b>=0;b--)d[b]={x:t[b].x,y:t[b].y,tileUnitDistanceFromAnchor:p},b>0&&(p+=t[b-1].dist(t[b]));for(var S=0;S<t.length;S++){var C=d[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},_r.prototype.addSymbols=function(e,t,i,l,p,d,g,b,S,C,A,P){for(var R=e.indexArray,B=e.layoutVertexArray,G=e.segments.prepareSegment(4*t.length,B,R,this.canOverlap?d.sortKey:void 0),W=this.glyphOffsetArray.length,re=G.vertexLength,Q=this.allowVerticalPlacement&&g===Un.vertical?Math.PI/2:0,le=d.text&&d.text.sections,ge=0;ge<t.length;ge++){var _e=t[ge],be=_e.tl,Re=_e.tr,Ge=_e.bl,Qe=_e.br,_t=_e.tex,ot=_e.pixelOffsetTL,Et=_e.pixelOffsetBR,st=_e.minFontScaleX,Nt=_e.minFontScaleY,kt=_e.glyphOffset,vt=_e.isSDF,qt=_e.sectionIndex,Ot=G.vertexLength,Qt=kt[1];Mh(B,b.x,b.y,be.x,Qt+be.y,_t.x,_t.y,i,vt,ot.x,ot.y,st,Nt),Mh(B,b.x,b.y,Re.x,Qt+Re.y,_t.x+_t.w,_t.y,i,vt,Et.x,ot.y,st,Nt),Mh(B,b.x,b.y,Ge.x,Qt+Ge.y,_t.x,_t.y+_t.h,i,vt,ot.x,Et.y,st,Nt),Mh(B,b.x,b.y,Qe.x,Qt+Qe.y,_t.x+_t.w,_t.y+_t.h,i,vt,Et.x,Et.y,st,Nt),$d(e.dynamicLayoutVertexArray,b,Q),R.emplaceBack(Ot,Ot+1,Ot+2),R.emplaceBack(Ot+1,Ot+2,Ot+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kt[0]),ge!==t.length-1&&qt===t[ge+1].sectionIndex||e.programConfigurations.populatePaintArrays(B.length,d,d.index,{},P,le&&le[qt])}e.placedSymbolArray.emplaceBack(b.x,b.y,W,this.glyphOffsetArray.length-W,re,S,C,b.segment,i?i[0]:0,i?i[1]:0,l[0],l[1],g,0,!1,0,A)},_r.prototype._addCollisionDebugVertex=function(e,t,i,l,p,d){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,l,p,Math.round(d.x),Math.round(d.y))},_r.prototype.addCollisionDebugVertices=function(e,t,i,l,p,d,g){var b=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),S=b.vertexLength,C=p.layoutVertexArray,A=p.collisionVertexArray,P=g.anchorX,R=g.anchorY;this._addCollisionDebugVertex(C,A,d,P,R,new ke(e,t)),this._addCollisionDebugVertex(C,A,d,P,R,new ke(i,t)),this._addCollisionDebugVertex(C,A,d,P,R,new ke(i,l)),this._addCollisionDebugVertex(C,A,d,P,R,new ke(e,l)),b.vertexLength+=4;var B=p.indexArray;B.emplaceBack(S,S+1),B.emplaceBack(S+1,S+2),B.emplaceBack(S+2,S+3),B.emplaceBack(S+3,S),b.primitiveLength+=4},_r.prototype.addDebugCollisionBoxes=function(e,t,i,l){for(var p=e;p<t;p++){var d=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,l?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},_r.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fc(as,wy.members,el),this.iconCollisionBox=new Fc(as,wy.members,el);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},_r.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,l,p,d,g,b,S){for(var C={},A=t;A<i;A++){var P=e.get(A);C.textBox={x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,anchorPointX:P.anchorPointX,anchorPointY:P.anchorPointY},C.textFeatureIndex=P.featureIndex;break}for(var R=l;R<p;R++){var B=e.get(R);C.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},C.verticalTextFeatureIndex=B.featureIndex;break}for(var G=d;G<g;G++){var W=e.get(G);C.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},C.iconFeatureIndex=W.featureIndex;break}for(var re=b;re<S;re++){var Q=e.get(re);C.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},C.verticalIconFeatureIndex=Q.featureIndex;break}return C},_r.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},_r.prototype.hasTextData=function(){return this.text.segments.get().length>0},_r.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_r.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},_r.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},_r.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},_r.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),l=i.vertexStartIndex+4*i.numGlyphs,p=i.vertexStartIndex;p<l;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},_r.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),l=[],p=[],d=[],g=0;g<this.symbolInstances.length;++g){d.push(g);var b=this.symbolInstances.get(g);l.push(0|Math.round(t*b.anchorX+i*b.anchorY)),p.push(b.featureIndex)}return d.sort(function(S,C){return l[S]-l[C]||p[C]-p[S]}),d},_r.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},_r.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,l=this.symbolInstanceIndexes;i<l.length;i+=1){var p=this.symbolInstances.get(l[i]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(d,g,b){d>=0&&b.indexOf(d)===g&&t.addIndicesForPlacedSymbol(t.text,d)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",_r,{omit:["layers","collisionBoxArray","features","compareText"]}),_r.MAX_GLYPHS=65535,_r.addDynamicAttributes=$d;var Hb=new Mi({"symbol-placement":new bt(N.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(N.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(N.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(N.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(N.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(N.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(N.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(N.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(N.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(N.layout_symbol["icon-size"]),"icon-text-fit":new bt(N.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(N.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(N.layout_symbol["icon-image"]),"icon-rotate":new yt(N.layout_symbol["icon-rotate"]),"icon-padding":new bt(N.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(N.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(N.layout_symbol["icon-offset"]),"icon-anchor":new yt(N.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(N.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(N.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(N.layout_symbol["text-rotation-alignment"]),"text-field":new yt(N.layout_symbol["text-field"]),"text-font":new yt(N.layout_symbol["text-font"]),"text-size":new yt(N.layout_symbol["text-size"]),"text-max-width":new yt(N.layout_symbol["text-max-width"]),"text-line-height":new bt(N.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(N.layout_symbol["text-letter-spacing"]),"text-justify":new yt(N.layout_symbol["text-justify"]),"text-radial-offset":new yt(N.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(N.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(N.layout_symbol["text-anchor"]),"text-max-angle":new bt(N.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(N.layout_symbol["text-writing-mode"]),"text-rotate":new yt(N.layout_symbol["text-rotate"]),"text-padding":new bt(N.layout_symbol["text-padding"]),"text-keep-upright":new bt(N.layout_symbol["text-keep-upright"]),"text-transform":new yt(N.layout_symbol["text-transform"]),"text-offset":new yt(N.layout_symbol["text-offset"]),"text-allow-overlap":new bt(N.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(N.layout_symbol["text-ignore-placement"]),"text-optional":new bt(N.layout_symbol["text-optional"])}),Xd={paint:new Mi({"icon-opacity":new yt(N.paint_symbol["icon-opacity"]),"icon-color":new yt(N.paint_symbol["icon-color"]),"icon-halo-color":new yt(N.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(N.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(N.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(N.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(N.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(N.paint_symbol["text-opacity"]),"text-color":new yt(N.paint_symbol["text-color"],{runtimeType:nt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(N.paint_symbol["text-halo-color"]),"text-halo-width":new yt(N.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(N.paint_symbol["text-halo-blur"]),"text-translate":new bt(N.paint_symbol["text-translate"]),"text-translate-anchor":new bt(N.paint_symbol["text-translate-anchor"])}),layout:Hb},vu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ht,this.defaultValue=e};vu.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},vu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){return null},ft("FormatSectionOverride",vu,{omit:["defaultValue"]});var Gb=function(e){function t(i){e.call(this,i,Xd)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(i,l){if(e.prototype.recalculate.call(this,i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var p=this.layout.get("text-writing-mode");if(p){for(var d=[],g=0,b=p;g<b.length;g+=1){var S=b[g];d.indexOf(S)<0&&d.push(S)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(i,l,p,d){var g=this.layout.get(i).evaluate(l,{},p,d),b=this._unevaluatedLayout._values[i];return b.isDataDriven()||js(b.value)||!g?g:function(S,C){return C.replace(/{([^{}]+)}/g,function(A,P){return P in S?String(S[P]):""})}(l.properties,g)},t.prototype.createBucket=function(i){return new _r(i)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var i=0,l=Xd.paint.overridableProperties;i<l.length;i+=1){var p=l[i];if(t.hasPaintOverride(this.layout,p)){var d,g=this.paint.get(p),b=new vu(g),S=new Qa(b,g.property.specification);d=g.value.kind==="constant"||g.value.kind==="source"?new qs("source",S):new es("composite",S,g.value.zoomStops,g.value._interpolationType),this.paint._values[p]=new Gi(g.property,d,g.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,i)},t.hasPaintOverride=function(i,l){var p=i.get("text-field"),d=Xd.paint.properties[l],g=!1,b=function(A){for(var P=0,R=A;P<R.length;P+=1)if(d.overrides&&d.overrides.hasOverride(R[P]))return void(g=!0)};if(p.value.kind==="constant"&&p.value.value instanceof xi)b(p.value.value.sections);else if(p.value.kind==="source"){var S=function(A){g||(A instanceof Zi&&Kr(A.value)===xr?b(A.value.sections):A instanceof Xn?b(A.sections):A.eachChild(S))},C=p.value;C._styleExpression&&S(C._styleExpression.expression)}return g},t}(ho),Wb={paint:new Mi({"background-color":new bt(N.paint_background["background-color"]),"background-pattern":new Wi(N.paint_background["background-pattern"]),"background-opacity":new bt(N.paint_background["background-opacity"])})},Kb=function(e){function t(i){e.call(this,i,Wb)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ho),$b={paint:new Mi({"raster-opacity":new bt(N.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(N.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(N.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(N.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(N.paint_raster["raster-saturation"]),"raster-contrast":new bt(N.paint_raster["raster-contrast"]),"raster-resampling":new bt(N.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(N.paint_raster["raster-fade-duration"])})},Xb=function(e){function t(i){e.call(this,i,$b)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ho),Jb=function(e){function t(i){e.call(this,i,{}),this.implementation=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},t.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},t}(ho),Yb={circle:Dd,heatmap:Rx,hillshade:Bx,fill:eb,"fill-extrusion":ub,line:mb,symbol:Gb,background:Kb,raster:Xb},Hy=ye.HTMLImageElement,Gy=ye.HTMLCanvasElement,Wy=ye.HTMLVideoElement,Ky=ye.ImageData,Lh=ye.ImageBitmap,al=function(e,t,i,l){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,l)};al.prototype.update=function(e,t,i){var l=e.width,p=e.height,d=!(this.size&&this.size[0]===l&&this.size[1]===p||i),g=this.context,b=g.gl;if(this.useMipmap=!!(t&&t.useMipmap),b.bindTexture(b.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!t||t.premultiply!==!1)),d)this.size=[l,p],e instanceof Hy||e instanceof Gy||e instanceof Wy||e instanceof Ky||Lh&&e instanceof Lh?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,e):b.texImage2D(b.TEXTURE_2D,0,this.format,l,p,0,this.format,b.UNSIGNED_BYTE,e.data);else{var S=i||{x:0,y:0},C=S.x,A=S.y;e instanceof Hy||e instanceof Gy||e instanceof Wy||e instanceof Ky||Lh&&e instanceof Lh?b.texSubImage2D(b.TEXTURE_2D,0,C,A,b.RGBA,b.UNSIGNED_BYTE,e):b.texSubImage2D(b.TEXTURE_2D,0,C,A,l,p,b.RGBA,b.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&b.generateMipmap(b.TEXTURE_2D)},al.prototype.bind=function(e,t,i){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),i!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},al.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},al.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Jd=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Jd.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Jd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var _u=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},En(["receive","process"],this),this.invoker=new Jd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?e:ye};function $y(e,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}_u.prototype.send=function(e,t,i,l,p){var d=this;p===void 0&&(p=!1);var g=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[g]=i);var b=We(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:e,hasCallback:!!i,targetMapId:l,mustQueue:p,sourceMapId:this.mapId,data:Yn(t,b)},b),{cancel:function(){i&&delete d.callbacks[g],d.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:d.mapId})}}},_u.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[i];var l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l()}else ie()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},_u.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},_u.prototype.processTask=function(e,t){var i=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l(fn(t.error)):l(null,fn(t.data)))}else{var p=!1,d=We(this.globalScope)?void 0:[],g=t.hasCallback?function(A,P){p=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:A?Yn(A):null,data:Yn(P,d)},d)}:function(A){p=!0},b=null,S=fn(t.data);if(this.parent[t.type])b=this.parent[t.type](t.sourceMapId,S,g);else if(this.parent.getWorkerSource){var C=t.type.split(".");b=this.parent.getWorkerSource(t.sourceMapId,C[0],S.source)[C[1]](S,g)}else g(new Error("Could not find function "+t.type));!p&&b&&b.cancel&&(this.cancelCallbacks[e]=b.cancel)}},_u.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ui=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};ui.prototype.setNorthEast=function(e){return this._ne=e instanceof Lr?new Lr(e.lng,e.lat):Lr.convert(e),this},ui.prototype.setSouthWest=function(e){return this._sw=e instanceof Lr?new Lr(e.lng,e.lat):Lr.convert(e),this},ui.prototype.extend=function(e){var t,i,l=this._sw,p=this._ne;if(e instanceof Lr)t=e,i=e;else{if(!(e instanceof ui))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(ui.convert(e)):this.extend(Lr.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return l||p?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),p.lng=Math.max(i.lng,p.lng),p.lat=Math.max(i.lat,p.lat)):(this._sw=new Lr(t.lng,t.lat),this._ne=new Lr(i.lng,i.lat)),this},ui.prototype.getCenter=function(){return new Lr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ui.prototype.getSouthWest=function(){return this._sw},ui.prototype.getNorthEast=function(){return this._ne},ui.prototype.getNorthWest=function(){return new Lr(this.getWest(),this.getNorth())},ui.prototype.getSouthEast=function(){return new Lr(this.getEast(),this.getSouth())},ui.prototype.getWest=function(){return this._sw.lng},ui.prototype.getSouth=function(){return this._sw.lat},ui.prototype.getEast=function(){return this._ne.lng},ui.prototype.getNorth=function(){return this._ne.lat},ui.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ui.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ui.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ui.prototype.contains=function(e){var t=Lr.convert(e),i=t.lng,l=t.lat,p=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&p},ui.convert=function(e){return!e||e instanceof ui?e:new ui(e)};var Lr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Lr.prototype.wrap=function(){return new Lr(tr(this.lng,-180,180),this.lat)},Lr.prototype.toArray=function(){return[this.lng,this.lat]},Lr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Lr.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,l=e.lat*t,p=Math.sin(i)*Math.sin(l)+Math.cos(i)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(p,1))},Lr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new ui(new Lr(this.lng-i,this.lat-t),new Lr(this.lng+i,this.lat+t))},Lr.convert=function(e){if(e instanceof Lr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Lr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Lr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Xy=2*Math.PI*63710088e-1;function Jy(e){return Xy*Math.cos(e*Math.PI/180)}function Yy(e){return(180+e)/360}function Qy(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ev(e,t){return e/Jy(t)}function Yd(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var sl=function(e,t,i){i===void 0&&(i=0),this.x=+e,this.y=+t,this.z=+i};sl.fromLngLat=function(e,t){t===void 0&&(t=0);var i=Lr.convert(e);return new sl(Yy(i.lng),Qy(i.lat),ev(t,i.lat))},sl.prototype.toLngLat=function(){return new Lr(360*this.x-180,Yd(this.y))},sl.prototype.toAltitude=function(){return this.z*Jy(Yd(this.y))},sl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Xy*(e=Yd(this.y),1/Math.cos(e*Math.PI/180));var e};var ll=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Nc(0,e,e,t,i)};ll.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ll.prototype.url=function(e,t){var i,l,p,d,g,b=(l=this.y,p=this.z,d=$y(256*(i=this.x),256*(l=Math.pow(2,p)-l-1),p),g=$y(256*(i+1),256*(l+1),p),d[0]+","+d[1]+","+g[0]+","+g[1]),S=function(C,A,P){for(var R,B="",G=C;G>0;G--)B+=(A&(R=1<<G-1)?1:0)+(P&R?2:0);return B}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",S).replace("{bbox-epsg-3857}",b)},ll.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new ke(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},ll.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var tv=function(e,t){this.wrap=e,this.canonical=t,this.key=Nc(e,t.z,t.z,t.x,t.y)},ci=function(e,t,i,l,p){this.overscaledZ=e,this.wrap=t,this.canonical=new ll(i,+l,+p),this.key=Nc(t,e,i,l,p)};function Nc(e,t,i,l,p){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*p+l).toString(36)+i.toString(36)+t.toString(36)}ci.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},ci.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new ci(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ci(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},ci.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Nc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Nc(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},ci.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},ci.prototype.children=function(e){if(this.overscaledZ>=e)return[new ci(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,l=2*this.canonical.y;return[new ci(t,this.wrap,t,i,l),new ci(t,this.wrap,t,i+1,l),new ci(t,this.wrap,t,i,l+1),new ci(t,this.wrap,t,i+1,l+1)]},ci.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},ci.prototype.wrapped=function(){return new ci(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ci.prototype.unwrapTo=function(e){return new ci(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},ci.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ci.prototype.toUnwrapped=function(){return new tv(this.wrap,this.canonical)},ci.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ci.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new sl(e.x-this.wrap,e.y))},ft("CanonicalTileID",ll),ft("OverscaledTileID",ci,{omit:["posMatrix"]});var Da=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return dr('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var p=0;p<l;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(l,p)]=this.data[this._idx(l-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,l)]=this.data[this._idx(p,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};Da.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[l],i[l+1],i[l+2])},Da.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Da.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Da.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Da.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Da.prototype.getPixels=function(){return new vn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Da.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,p=t*this.dim+this.dim,d=i*this.dim,g=i*this.dim+this.dim;switch(t){case-1:l=p-1;break;case 1:p=l+1}switch(i){case-1:d=g-1;break;case 1:g=d+1}for(var b=-t*this.dim,S=-i*this.dim,C=d;C<g;C++)for(var A=l;A<p;A++)this.data[this._idx(A,C)]=e.data[this._idx(A+b,C+S)]},ft("DEMData",Da);var Dh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Dh.prototype.encode=function(e){return this._stringToNumber[e]},Dh.prototype.decode=function(e){return this._numberToString[e]};var Rh=function(e,t,i,l,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=l,this.properties=e.properties,this.id=p},Qd={geometry:{configurable:!0}};Qd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Qd.geometry.set=function(e){this._geometry=e},Rh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Rh.prototype,Qd);var xu=function(){this.state={},this.stateChanges={},this.deletedStates={}};xu.prototype.updateState=function(e,t,i){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},Rt(this.stateChanges[e][l],i),this.deletedStates[e]===null)for(var p in this.deletedStates[e]={},this.state[e])p!==l&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var d in this.deletedStates[e][l]={},this.state[e][l])i[d]||(this.deletedStates[e][l][d]=null);else for(var g in i)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][g]===null&&delete this.deletedStates[e][l][g]},xu.prototype.removeFeatureState=function(e,t,i){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][i]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(i in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][i]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},xu.prototype.getState=function(e,t){var i=String(t),l=Rt({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(p===null)return{};for(var d in p)delete l[d]}return l},xu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},xu.prototype.coalesceChanges=function(e,t){var i={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var p={};for(var d in this.stateChanges[l])this.state[l][d]||(this.state[l][d]={}),Rt(this.state[l][d],this.stateChanges[l][d]),p[d]=this.state[l][d];i[l]=p}for(var g in this.deletedStates){this.state[g]=this.state[g]||{};var b={};if(this.deletedStates[g]===null)for(var S in this.state[g])b[S]={},this.state[g][S]={};else for(var C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(var A=0,P=Object.keys(this.deletedStates[g][C]);A<P.length;A+=1)delete this.state[g][C][P[A]];b[C]=this.state[g][C]}i[g]=i[g]||{},Rt(i[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var R in e)e[R].setFeatureState(i,t)};var Ra=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Io(8192,16,0),this.grid3D=new Io(8192,16,0),this.featureIndexArray=new M,this.promoteId=t};function rv(e,t,i,l,p){return ni(e,function(d,g){var b=t instanceof Ys?t.get(g):null;return b&&b.evaluate?b.evaluate(i,l,p):b})}function iv(e){for(var t=1/0,i=1/0,l=-1/0,p=-1/0,d=0,g=e;d<g.length;d+=1){var b=g[d];t=Math.min(t,b.x),i=Math.min(i,b.y),l=Math.max(l,b.x),p=Math.max(p,b.y)}return{minX:t,minY:i,maxX:l,maxY:p}}function Qb(e,t){return t-e}Ra.prototype.insert=function(e,t,i,l,p,d){var g=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,l,p);for(var b=d?this.grid3D:this.grid,S=0;S<t.length;S++){for(var C=t[S],A=[1/0,1/0,-1/0,-1/0],P=0;P<C.length;P++){var R=C[P];A[0]=Math.min(A[0],R.x),A[1]=Math.min(A[1],R.y),A[2]=Math.max(A[2],R.x),A[3]=Math.max(A[3],R.y)}A[0]<8192&&A[1]<8192&&A[2]>=0&&A[3]>=0&&b.insert(g,A[0],A[1],A[2],A[3])}},Ra.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new cu.VectorTile(new Eh(this.rawTileData)).layers,this.sourceLayerCoder=new Dh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ra.prototype.query=function(e,t,i,l){var p=this;this.loadVTLayers();for(var d=e.params||{},g=8192/e.tileSize/e.scale,b=Wl(d.filter),S=e.queryGeometry,C=e.queryPadding*g,A=iv(S),P=this.grid.query(A.minX-C,A.minY-C,A.maxX+C,A.maxY+C),R=iv(e.cameraQueryGeometry),B=this.grid3D.query(R.minX-C,R.minY-C,R.maxX+C,R.maxY+C,function(_e,be,Re,Ge){return function(Qe,_t,ot,Et,st){for(var Nt=0,kt=Qe;Nt<kt.length;Nt+=1){var vt=kt[Nt];if(_t<=vt.x&&ot<=vt.y&&Et>=vt.x&&st>=vt.y)return!0}var qt=[new ke(_t,ot),new ke(_t,st),new ke(Et,st),new ke(Et,ot)];if(Qe.length>2){for(var Ot=0,Qt=qt;Ot<Qt.length;Ot+=1)if(mo(Qe,Qt[Ot]))return!0}for(var St=0;St<Qe.length-1;St++)if(il(Qe[St],Qe[St+1],qt))return!0;return!1}(e.cameraQueryGeometry,_e-C,be-C,Re+C,Ge+C)}),G=0,W=B;G<W.length;G+=1)P.push(W[G]);P.sort(Qb);for(var re,Q={},le=function(_e){var be=P[_e];if(be!==re){re=be;var Re=p.featureIndexArray.get(be),Ge=null;p.loadMatchingFeature(Q,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,b,d.layers,d.availableImages,t,i,l,function(Qe,_t,ot){return Ge||(Ge=Nr(Qe)),_t.queryIntersectsFeature(S,Qe,ot,Ge,p.z,e.transform,g,e.pixelPosMatrix)})}},ge=0;ge<P.length;ge++)le(ge);return Q},Ra.prototype.loadMatchingFeature=function(e,t,i,l,p,d,g,b,S,C,A){var P=this.bucketLayerIDs[t];if(!d||function(Qe,_t){for(var ot=0;ot<Qe.length;ot++)if(_t.indexOf(Qe[ot])>=0)return!0;return!1}(d,P)){var R=this.sourceLayerCoder.decode(i),B=this.vtLayers[R].feature(l);if(p.needGeometry){var G=$r(B,!0);if(!p.filter(new Gt(this.tileID.overscaledZ),G,this.tileID.canonical))return}else if(!p.filter(new Gt(this.tileID.overscaledZ),B))return;for(var W=this.getId(B,R),re=0;re<P.length;re++){var Q=P[re];if(!(d&&d.indexOf(Q)<0)){var le=b[Q];if(le){var ge={};W!==void 0&&C&&(ge=C.getState(le.sourceLayer||"_geojsonTileLayer",W));var _e=Rt({},S[Q]);_e.paint=rv(_e.paint,le.paint,B,ge,g),_e.layout=rv(_e.layout,le.layout,B,ge,g);var be=!A||A(B,le,ge);if(be){var Re=new Rh(B,this.z,this.x,this.y,W);Re.layer=_e;var Ge=e[Q];Ge===void 0&&(Ge=e[Q]=[]),Ge.push({featureIndex:l,feature:Re,intersectionZ:be})}}}}}},Ra.prototype.lookupSymbolFeatures=function(e,t,i,l,p,d,g,b){var S={};this.loadVTLayers();for(var C=Wl(p),A=0,P=e;A<P.length;A+=1)this.loadMatchingFeature(S,i,l,P[A],C,d,g,b,t);return S},Ra.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var l=0,p=i[t];l<p.length;l+=1)if(e===p[l])return!0;return!1},Ra.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",Ra,{omit:["rawTileData","sourceLayerCoder"]});var Si=function(e,t){this.tileID=e,this.uid=un(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Si.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<ct.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Si.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Si.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(C,A){var P={};if(!A)return P;for(var R=function(){var W=G[B],re=W.layerIds.map(function(ge){return A.getLayer(ge)}).filter(Boolean);if(re.length!==0){W.layers=re,W.stateDependentLayerIds&&(W.stateDependentLayers=W.stateDependentLayerIds.map(function(ge){return re.filter(function(_e){return _e.id===ge})[0]}));for(var Q=0,le=re;Q<le.length;Q+=1)P[le[Q].id]=W}},B=0,G=C;B<G.length;B+=1)R();return P}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[l];if(p instanceof _r){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var g=this.buckets[d];if(g instanceof _r&&g.hasRTLText){this.hasRTLText=!0,In.isLoading()||In.isLoaded()||wc()!=="deferred"||Qn();break}}for(var b in this.queryPadding=0,this.buckets){var S=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(b).queryRadius(S))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Si.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Si.prototype.getBucket=function(e){return this.buckets[e.id]},Si.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new al(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new al(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},Si.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Si.prototype.queryRenderedFeatures=function(e,t,i,l,p,d,g,b,S,C){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:p,scale:d,tileSize:this.tileSize,pixelPosMatrix:C,transform:b,params:g,queryPadding:this.queryPadding*S},e,t,i):{}},Si.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var l=i.loadVTLayers(),p=t?t.sourceLayer:"",d=l._geojsonTileLayer||l[p];if(d)for(var g=Wl(t&&t.filter),b=this.tileID.canonical,S=b.z,C=b.x,A=b.y,P={z:S,x:C,y:A},R=0;R<d.length;R++){var B=d.feature(R);if(g.needGeometry){var G=$r(B,!0);if(!g.filter(new Gt(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!g.filter(new Gt(this.tileID.overscaledZ),B))continue;var W=i.getId(B,p),re=new Rh(B,S,C,A,W);re.tile=P,e.push(re)}}},Si.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Si.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Si.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=pe(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),p=!1;if(this.expirationTime>l)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var d=this.expirationTime-t;d?this.expirationTime=l+Math.max(d,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Si.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Si.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var p=this.buckets[l],d=p.layers[0].sourceLayer||"_geojsonTileLayer",g=i[d],b=e[d];if(g&&b&&Object.keys(b).length!==0){p.update(b,g,this.imageAtlas&&this.imageAtlas.patternPositions||{});var S=t&&t.style&&t.style.getLayer(l);S&&(this.queryPadding=Math.max(this.queryPadding,S.queryRadius(p)))}}}},Si.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Si.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ct.now()},Si.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Si.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ct.now()+e},Si.prototype.setDependencies=function(e,t){for(var i={},l=0,p=t;l<p.length;l+=1)i[p[l]]=!0;this.dependencies[e]=i},Si.prototype.hasDependency=function(e,t){for(var i=0,l=e;i<l.length;i+=1){var p=this.dependencies[l[i]];if(p){for(var d=0,g=t;d<g.length;d+=1)if(p[g[d]])return!0}}return!1};var ps=ye.performance,nv=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},ps.mark(this._marks.start)};nv.prototype.finish=function(){ps.mark(this._marks.end);var e=ps.getEntriesByName(this._marks.measure);return e.length===0&&(ps.measure(this._marks.measure,this._marks.start,this._marks.end),e=ps.getEntriesByName(this._marks.measure),ps.clearMarks(this._marks.start),ps.clearMarks(this._marks.end),ps.clearMeasures(this._marks.measure)),e},h.Actor=_u,h.AlphaImage=ol,h.CanonicalTileID=ll,h.CollisionBoxArray=s,h.Color=cr,h.DEMData=Da,h.DataConstantProperty=bt,h.DictionaryCoder=Dh,h.EXTENT=8192,h.ErrorEvent=ne,h.EvaluationParameters=Gt,h.Event=$,h.Evented=se,h.FeatureIndex=Ra,h.FillBucket=zo,h.FillExtrusionBucket=Mo,h.ImageAtlas=Bc,h.ImagePosition=Th,h.LineBucket=on,h.LngLat=Lr,h.LngLatBounds=ui,h.MercatorCoordinate=sl,h.ONE_EM=24,h.OverscaledTileID=ci,h.Point=ke,h.Point$1=ke,h.Properties=Mi,h.Protobuf=Eh,h.RGBAImage=vn,h.RequestManager=Pr,h.RequestPerformance=nv,h.ResourceType=Fl,h.SegmentVector=U,h.SourceFeatureState=xu,h.StructArrayLayout1ui2=Ac,h.StructArrayLayout2f1f2i16=Pa,h.StructArrayLayout2i4=ka,h.StructArrayLayout3ui6=$o,h.StructArrayLayout4i8=Sc,h.SymbolBucket=_r,h.Texture=al,h.Tile=Si,h.Transitionable=zi,h.Uniform1f=$e,h.Uniform1i=Be,h.Uniform2f=Ke,h.Uniform3f=ut,h.Uniform4f=wt,h.UniformColor=Ct,h.UniformMatrix4f=ir,h.UnwrappedTileID=tv,h.ValidationError=J,h.WritingMode=Un,h.ZoomHistory=vc,h.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},h.addDynamicAttributes=$d,h.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var l=e.length,p=new Array(e.length),d=null;e.forEach(function(g,b){t(g,function(S,C){S&&(d=S),p[b]=C,--l==0&&i(d,p)})})},h.bezier=et,h.bindAll=En,h.browser=ct,h.cacheEntryPossiblyAdded=function(e){++Ms>Bl&&(e.getActor().send("enforceCacheSizeLimit",Wa),Ms=0)},h.clamp=Dt,h.clearTileCache=function(e){var t=ye.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},h.clipLine=Ny,h.clone=function(e){var t=new pr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.clone$1=Ii,h.clone$2=function(e){var t=new pr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},h.collisionCircleLayout=_b,h.config=it,h.create=function(){var e=new pr(16);return pr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},h.create$1=function(){var e=new pr(9);return pr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},h.create$2=function(){var e=new pr(4);return pr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},h.createCommonjsModule=Me,h.createExpression=Hl,h.createLayout=wi,h.createStyleLayer=function(e){return e.type==="custom"?new Jb(e):new Yb[e.type](e)},h.cross=function(e,t,i){var l=t[0],p=t[1],d=t[2],g=i[0],b=i[1],S=i[2];return e[0]=p*S-d*b,e[1]=d*g-l*S,e[2]=l*b-p*g,e},h.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&i!==null){if(typeof i!="object"||Object.keys(t).length!==Object.keys(i).length)return!1;for(var p in t)if(!e(t[p],i[p]))return!1;return!0}return t===i},h.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},h.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},h.ease=Wt,h.emitValidationErrors=$s,h.endsWith=Mn,h.enforceCacheSizeLimit=function(e){Ka(),Qi&&Qi.then(function(t){t.keys().then(function(i){for(var l=0;l<i.length-e;l++)t.delete(i[l])})})},h.evaluateSizeForFeature=Ly,h.evaluateSizeForZoom=Dy,h.evaluateVariableOffset=jy,h.evented=bc,h.extend=Rt,h.featureFilter=Wl,h.filterObject=Qr,h.fromRotation=function(e,t){var i=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=i,e[2]=0,e[3]=-i,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},h.getAnchorAlignment=Hd,h.getAnchorJustification=Kd,h.getArrayBuffer=Ds,h.getImage=D,h.getJSON=function(e,t){return $a(Rt(e,{type:"json"}),t)},h.getRTLTextPluginStatus=wc,h.getReferrer=fa,h.getVideo=function(e,t){var i,l,p=ye.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var d=0;d<e.length;d++){var g=ye.document.createElement("source");i=e[d],l=void 0,(l=ye.document.createElement("a")).href=i,(l.protocol!==ye.document.location.protocol||l.host!==ye.document.location.host)&&(p.crossOrigin="Anonymous"),g.src=e[d],p.appendChild(g)}return{cancel:function(){}}},h.identity=An,h.invert=function(e,t){var i=t[0],l=t[1],p=t[2],d=t[3],g=t[4],b=t[5],S=t[6],C=t[7],A=t[8],P=t[9],R=t[10],B=t[11],G=t[12],W=t[13],re=t[14],Q=t[15],le=i*b-l*g,ge=i*S-p*g,_e=i*C-d*g,be=l*S-p*b,Re=l*C-d*b,Ge=p*C-d*S,Qe=A*W-P*G,_t=A*re-R*G,ot=A*Q-B*G,Et=P*re-R*W,st=P*Q-B*W,Nt=R*Q-B*re,kt=le*Nt-ge*st+_e*Et+be*ot-Re*_t+Ge*Qe;return kt?(e[0]=(b*Nt-S*st+C*Et)*(kt=1/kt),e[1]=(p*st-l*Nt-d*Et)*kt,e[2]=(W*Ge-re*Re+Q*be)*kt,e[3]=(R*Re-P*Ge-B*be)*kt,e[4]=(S*ot-g*Nt-C*_t)*kt,e[5]=(i*Nt-p*ot+d*_t)*kt,e[6]=(re*_e-G*Ge-Q*ge)*kt,e[7]=(A*Ge-R*_e+B*ge)*kt,e[8]=(g*st-b*ot+C*Qe)*kt,e[9]=(l*ot-i*st-d*Qe)*kt,e[10]=(G*Re-W*_e+Q*le)*kt,e[11]=(P*_e-A*Re-B*le)*kt,e[12]=(b*_t-g*Et-S*Qe)*kt,e[13]=(i*Et-l*_t+p*Qe)*kt,e[14]=(W*ge-G*be-re*le)*kt,e[15]=(A*be-P*ge+R*le)*kt,e):null},h.isChar=rt,h.isMapboxURL=ai,h.keysDifference=function(e,t){var i=[];for(var l in e)l in t||i.push(l);return i},h.makeRequest=$a,h.mapObject=ni,h.mercatorXfromLng=Yy,h.mercatorYfromLat=Qy,h.mercatorZfromAltitude=ev,h.mul=Ld,h.multiply=nn,h.mvt=cu,h.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},h.normalize=function(e,t){var i=t[0],l=t[1],p=t[2],d=i*i+l*l+p*p;return d>0&&(d=1/Math.sqrt(d)),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d,e},h.number=ei,h.offscreenCanvasSupported=Ls,h.ortho=function(e,t,i,l,p,d,g){var b=1/(t-i),S=1/(l-p),C=1/(d-g);return e[0]=-2*b,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*S,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*C,e[11]=0,e[12]=(t+i)*b,e[13]=(p+l)*S,e[14]=(g+d)*C,e[15]=1,e},h.parseGlyphPBF=function(e){return new Eh(e).readFields(Pb,[])},h.pbf=Eh,h.performSymbolLayout=function(e,t,i,l,p,d,g){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var b=e.layers[0].layout,S=e.layers[0]._unevaluatedLayout._values,C={};if(e.textSizeData.kind==="composite"){var A=e.textSizeData,P=A.maxZoom;C.compositeTextSizes=[S["text-size"].possiblyEvaluate(new Gt(A.minZoom),g),S["text-size"].possiblyEvaluate(new Gt(P),g)]}if(e.iconSizeData.kind==="composite"){var R=e.iconSizeData,B=R.maxZoom;C.compositeIconSizes=[S["icon-size"].possiblyEvaluate(new Gt(R.minZoom),g),S["icon-size"].possiblyEvaluate(new Gt(B),g)]}C.layoutTextSize=S["text-size"].possiblyEvaluate(new Gt(e.zoom+1),g),C.layoutIconSize=S["icon-size"].possiblyEvaluate(new Gt(e.zoom+1),g),C.textMaxSize=S["text-size"].possiblyEvaluate(new Gt(18));for(var G=24*b.get("text-line-height"),W=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point",re=b.get("text-keep-upright"),Q=b.get("text-size"),le=function(){var be=_e[ge],Re=b.get("text-font").evaluate(be,{},g).join(","),Ge=Q.evaluate(be,{},g),Qe=C.layoutTextSize.evaluate(be,{},g),_t=C.layoutIconSize.evaluate(be,{},g),ot={horizontal:{},vertical:void 0},Et=be.text,st=[0,0];if(Et){var Nt=Et.toString(),kt=24*b.get("text-letter-spacing").evaluate(be,{},g),vt=function(Kt){for(var wr=0,mr=Kt;wr<mr.length;wr+=1)if(nr=mr[wr].charCodeAt(0),rt.Arabic(nr)||rt["Arabic Supplement"](nr)||rt["Arabic Extended-A"](nr)||rt["Arabic Presentation Forms-A"](nr)||rt["Arabic Presentation Forms-B"](nr))return!1;var nr;return!0}(Nt)?kt:0,qt=b.get("text-anchor").evaluate(be,{},g),Ot=b.get("text-variable-anchor");if(!Ot){var Qt=b.get("text-radial-offset").evaluate(be,{},g);st=Qt?jy(qt,[24*Qt,Wd]):b.get("text-offset").evaluate(be,{},g).map(function(Kt){return 24*Kt})}var St=W?"center":b.get("text-justify").evaluate(be,{},g),or=b.get("symbol-placement"),Dr=or==="point"?24*b.get("text-max-width").evaluate(be,{},g):0,qr=function(){e.allowVerticalPlacement&&_c(Nt)&&(ot.vertical=Ch(Et,t,i,p,Re,Dr,G,qt,"left",vt,st,Un.vertical,!0,or,Qe,Ge))};if(!W&&Ot){for(var Ur=St==="auto"?Ot.map(function(Kt){return Kd(Kt)}):[St],Rr=!1,Zr=0;Zr<Ur.length;Zr++){var yi=Ur[Zr];if(!ot.horizontal[yi])if(Rr)ot.horizontal[yi]=ot.horizontal[0];else{var vi=Ch(Et,t,i,p,Re,Dr,G,"center",yi,vt,st,Un.horizontal,!1,or,Qe,Ge);vi&&(ot.horizontal[yi]=vi,Rr=vi.positionedLines.length===1)}}qr()}else{St==="auto"&&(St=Kd(qt));var Xi=Ch(Et,t,i,p,Re,Dr,G,qt,St,vt,st,Un.horizontal,!1,or,Qe,Ge);Xi&&(ot.horizontal[St]=Xi),qr(),_c(Nt)&&W&&re&&(ot.vertical=Ch(Et,t,i,p,Re,Dr,G,qt,St,vt,st,Un.vertical,!1,or,Qe,Ge))}}var Ti=void 0,Ji=!1;if(be.icon&&be.icon.name){var Xr=l[be.icon.name];Xr&&(Ti=function(Kt,wr,mr){var nr=Hd(mr),an=wr[0]-Kt.displaySize[0]*nr.horizontalAlign,Fi=wr[1]-Kt.displaySize[1]*nr.verticalAlign;return{image:Kt,top:Fi,bottom:Fi+Kt.displaySize[1],left:an,right:an+Kt.displaySize[0]}}(p[be.icon.name],b.get("icon-offset").evaluate(be,{},g),b.get("icon-anchor").evaluate(be,{},g)),Ji=Xr.sdf,e.sdfIcons===void 0?e.sdfIcons=Xr.sdf:e.sdfIcons!==Xr.sdf&&dr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xr.pixelRatio!==e.pixelRatio||b.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Ci=Zy(ot.horizontal)||ot.vertical;e.iconsInText=!!Ci&&Ci.iconsInText,(Ci||Ti)&&function(Kt,wr,mr,nr,an,Fi,Ar,ri,Ni,ar,ta){var Vn=Fi.textMaxSize.evaluate(wr,{});Vn===void 0&&(Vn=Ar);var ra,Jr=Kt.layers[0].layout,ia=Jr.get("icon-offset").evaluate(wr,{},ta),yo=Zy(mr.horizontal),bu=Ar/24,ul=Kt.tilePixelRatio*bu,wu=Kt.tilePixelRatio*Vn/24,Oa=Kt.tilePixelRatio*ri,Eu=Kt.tilePixelRatio*Jr.get("symbol-spacing"),Oh=Jr.get("text-padding")*Kt.tilePixelRatio,Su=Jr.get("icon-padding")*Kt.tilePixelRatio,Uc=Jr.get("text-max-angle")/180*Math.PI,Bh=Jr.get("text-rotation-alignment")==="map"&&Jr.get("symbol-placement")!=="point",Fh=Jr.get("icon-rotation-alignment")==="map"&&Jr.get("symbol-placement")!=="point",Ba=Jr.get("symbol-placement"),Vc=Eu/2,Tu=Jr.get("icon-text-fit");nr&&Tu!=="none"&&(Kt.allowVerticalPlacement&&mr.vertical&&(ra=My(nr,mr.vertical,Tu,Jr.get("icon-text-fit-padding"),ia,bu)),yo&&(nr=My(nr,yo,Tu,Jr.get("icon-text-fit-padding"),ia,bu)));var hs=function(ew,$c){$c.x<0||$c.x>=8192||$c.y<0||$c.y>=8192||function(Yr,Lo,tw,fs,im,sv,Zh,na,Hh,Xc,Gh,Wh,nm,lv,Jc,uv,cv,pv,hv,fv,jn,Kh,dv,oa,rw){var mv,pl,Pu,zu,Mu,Lu=Yr.addToLineVertexArray(Lo,tw),gv=0,yv=0,vv=0,_v=0,om=-1,am=-1,Fa={},xv=H(""),sm=0,lm=0;if(na._unevaluatedLayout.getValue("text-radial-offset")===void 0?(sm=(mv=na.layout.get("text-offset").evaluate(jn,{},oa).map(function(Qc){return 24*Qc}))[0],lm=mv[1]):(sm=24*na.layout.get("text-radial-offset").evaluate(jn,{},oa),lm=Wd),Yr.allowVerticalPlacement&&fs.vertical){var bv=na.layout.get("text-rotate").evaluate(jn,{},oa)+90;zu=new zh(Hh,Lo,Xc,Gh,Wh,fs.vertical,nm,lv,Jc,bv),Zh&&(Mu=new zh(Hh,Lo,Xc,Gh,Wh,Zh,cv,pv,Jc,bv))}if(im){var um=na.layout.get("icon-rotate").evaluate(jn,{}),wv=na.layout.get("icon-text-fit")!=="none",Ev=Uy(im,um,dv,wv),cm=Zh?Uy(Zh,um,dv,wv):void 0;Pu=new zh(Hh,Lo,Xc,Gh,Wh,im,cv,pv,!1,um),gv=4*Ev.length;var Sv=Yr.iconSizeData,Yc=null;Sv.kind==="source"?(Yc=[128*na.layout.get("icon-size").evaluate(jn,{})])[0]>32640&&dr(Yr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Sv.kind==="composite"&&((Yc=[128*Kh.compositeIconSizes[0].evaluate(jn,{},oa),128*Kh.compositeIconSizes[1].evaluate(jn,{},oa)])[0]>32640||Yc[1]>32640)&&dr(Yr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Yr.addSymbols(Yr.icon,Ev,Yc,fv,hv,jn,!1,Lo,Lu.lineStartIndex,Lu.lineLength,-1,oa),om=Yr.icon.placedSymbolArray.length-1,cm&&(yv=4*cm.length,Yr.addSymbols(Yr.icon,cm,Yc,fv,hv,jn,Un.vertical,Lo,Lu.lineStartIndex,Lu.lineLength,-1,oa),am=Yr.icon.placedSymbolArray.length-1)}for(var Tv in fs.horizontal){var $h=fs.horizontal[Tv];if(!pl){xv=H($h.text);var iw=na.layout.get("text-rotate").evaluate(jn,{},oa);pl=new zh(Hh,Lo,Xc,Gh,Wh,$h,nm,lv,Jc,iw)}var Cv=$h.positionedLines.length===1;if(vv+=qy(Yr,Lo,$h,sv,na,Jc,jn,uv,Lu,fs.vertical?Un.horizontal:Un.horizontalOnly,Cv?Object.keys(fs.horizontal):[Tv],Fa,om,Kh,oa),Cv)break}fs.vertical&&(_v+=qy(Yr,Lo,fs.vertical,sv,na,Jc,jn,uv,Lu,Un.vertical,["vertical"],Fa,am,Kh,oa));var nw=pl?pl.boxStartIndex:Yr.collisionBoxArray.length,ow=pl?pl.boxEndIndex:Yr.collisionBoxArray.length,aw=zu?zu.boxStartIndex:Yr.collisionBoxArray.length,sw=zu?zu.boxEndIndex:Yr.collisionBoxArray.length,lw=Pu?Pu.boxStartIndex:Yr.collisionBoxArray.length,uw=Pu?Pu.boxEndIndex:Yr.collisionBoxArray.length,cw=Mu?Mu.boxStartIndex:Yr.collisionBoxArray.length,pw=Mu?Mu.boxEndIndex:Yr.collisionBoxArray.length,aa=-1,Xh=function(Qc,Av){return Qc&&Qc.circleDiameter?Math.max(Qc.circleDiameter,Av):Av};aa=Xh(pl,aa),aa=Xh(zu,aa),aa=Xh(Pu,aa);var Iv=(aa=Xh(Mu,aa))>-1?1:0;Iv&&(aa*=rw/24),Yr.glyphOffsetArray.length>=_r.MAX_GLYPHS&&dr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jn.sortKey!==void 0&&Yr.addToSortKeyRanges(Yr.symbolInstances.length,jn.sortKey),Yr.symbolInstances.emplaceBack(Lo.x,Lo.y,Fa.right>=0?Fa.right:-1,Fa.center>=0?Fa.center:-1,Fa.left>=0?Fa.left:-1,Fa.vertical||-1,om,am,xv,nw,ow,aw,sw,lw,uw,cw,pw,Xc,vv,_v,gv,yv,Iv,0,nm,sm,lm,aa)}(Kt,$c,ew,mr,nr,an,ra,Kt.layers[0],Kt.collisionBoxArray,wr.index,wr.sourceLayerIndex,Kt.index,ul,Oh,Bh,Ni,Oa,Su,Fh,ia,wr,Fi,ar,ta,Ar)};if(Ba==="line")for(var Cu=0,Nh=Ny(wr.geometry,0,0,8192,8192);Cu<Nh.length;Cu+=1)for(var Uh=Nh[Cu],jc=0,qc=Bb(Uh,Eu,Uc,mr.vertical||yo,nr,24,wu,Kt.overscaling,8192);jc<qc.length;jc+=1){var Vh=qc[jc];yo&&Vb(Kt,yo.text,Vc,Vh)||hs(Uh,Vh)}else if(Ba==="line-center")for(var Zc=0,Hc=wr.geometry;Zc<Hc.length;Zc+=1){var Gc=Hc[Zc];if(Gc.length>1){var jh=Ob(Gc,Uc,mr.vertical||yo,nr,24,wu);jh&&hs(Gc,jh)}}else if(wr.type==="Polygon")for(var Iu=0,qh=Ud(wr.geometry,0);Iu<qh.length;Iu+=1){var Au=qh[Iu],Wc=Nb(Au,16);hs(Au[0],new du(Wc.x,Wc.y,0))}else if(wr.type==="LineString")for(var cl=0,Kc=wr.geometry;cl<Kc.length;cl+=1){var ku=Kc[cl];hs(ku,new du(ku[0].x,ku[0].y,0))}else if(wr.type==="Point")for(var em=0,ov=wr.geometry;em<ov.length;em+=1)for(var tm=0,av=ov[em];tm<av.length;tm+=1){var rm=av[tm];hs([rm],new du(rm.x,rm.y,0))}}(e,be,ot,Ti,l,C,Qe,_t,st,Ji,g)},ge=0,_e=e.features;ge<_e.length;ge+=1)le();d&&e.generateCollisionDebugBuffers()},h.perspective=function(e,t,i,l,p){var d,g=1/Math.tan(t/2);return e[0]=g/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,p!=null&&p!==1/0?(e[10]=(p+l)*(d=1/(l-p)),e[14]=2*p*l*d):(e[10]=-1,e[14]=-2*l),e},h.pick=function(e,t){for(var i={},l=0;l<t.length;l++){var p=t[l];p in e&&(i[p]=e[p])}return i},h.plugin=In,h.polygonIntersectsPolygon=Yo,h.postMapLoadEvent=Ps,h.postTurnstileEvent=Ol,h.potpack=Ay,h.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],h.register=ft,h.registerForPluginStateChange=function(e){return e({pluginStatus:mn,pluginURL:Ao}),bc.on("pluginStateChange",e),e},h.renderColorRamp=uy,h.rotate=function(e,t,i){var l=t[0],p=t[1],d=t[2],g=t[3],b=Math.sin(i),S=Math.cos(i);return e[0]=l*S+d*b,e[1]=p*S+g*b,e[2]=l*-b+d*S,e[3]=p*-b+g*S,e},h.rotateX=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[4],g=t[5],b=t[6],S=t[7],C=t[8],A=t[9],P=t[10],R=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*p+C*l,e[5]=g*p+A*l,e[6]=b*p+P*l,e[7]=S*p+R*l,e[8]=C*p-d*l,e[9]=A*p-g*l,e[10]=P*p-b*l,e[11]=R*p-S*l,e},h.rotateZ=function(e,t,i){var l=Math.sin(i),p=Math.cos(i),d=t[0],g=t[1],b=t[2],S=t[3],C=t[4],A=t[5],P=t[6],R=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*p+C*l,e[1]=g*p+A*l,e[2]=b*p+P*l,e[3]=S*p+R*l,e[4]=C*p-d*l,e[5]=A*p-g*l,e[6]=P*p-b*l,e[7]=R*p-S*l,e},h.scale=function(e,t,i){var l=i[0],p=i[1],d=i[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},h.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},h.setCacheLimits=function(e,t){Wa=e,Bl=t},h.setRTLTextPlugin=function(e,t,i){if(i===void 0&&(i=!1),mn==="deferred"||mn==="loading"||mn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ao=ct.resolveURL(e),mn="deferred",eu=t,Js(),i||Qn()},h.sphericalToCartesian=function(e){var t=e[0],i=e[1],l=e[2];return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(l),y:t*Math.sin(i)*Math.sin(l),z:t*Math.cos(l)}},h.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},h.styleSpec=N,h.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},h.symbolSize=Rb,h.transformMat3=function(e,t,i){var l=t[0],p=t[1],d=t[2];return e[0]=l*i[0]+p*i[3]+d*i[6],e[1]=l*i[1]+p*i[4]+d*i[7],e[2]=l*i[2]+p*i[5]+d*i[8],e},h.transformMat4=au,h.translate=function(e,t,i){var l,p,d,g,b,S,C,A,P,R,B,G,W=i[0],re=i[1],Q=i[2];return t===e?(e[12]=t[0]*W+t[4]*re+t[8]*Q+t[12],e[13]=t[1]*W+t[5]*re+t[9]*Q+t[13],e[14]=t[2]*W+t[6]*re+t[10]*Q+t[14],e[15]=t[3]*W+t[7]*re+t[11]*Q+t[15]):(p=t[1],d=t[2],g=t[3],b=t[4],S=t[5],C=t[6],A=t[7],P=t[8],R=t[9],B=t[10],G=t[11],e[0]=l=t[0],e[1]=p,e[2]=d,e[3]=g,e[4]=b,e[5]=S,e[6]=C,e[7]=A,e[8]=P,e[9]=R,e[10]=B,e[11]=G,e[12]=l*W+b*re+P*Q+t[12],e[13]=p*W+S*re+R*Q+t[13],e[14]=d*W+C*re+B*Q+t[14],e[15]=g*W+A*re+G*Q+t[15]),e},h.triggerPluginCompletionEvent=gh,h.uniqueId=un,h.validateCustomStyleLayer=function(e){var t=[],i=e.id;return i===void 0&&t.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},h.validateLight=zd,h.validateStyle=Ws,h.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},h.vectorTile=cu,h.version="1.13.3",h.warnOnce=dr,h.webpSupported=At,h.window=ye,h.wrap=tr}),je(["./shared"],function(h){function Me(z){var D=typeof z;if(D==="number"||D==="boolean"||D==="string"||z==null)return JSON.stringify(z);if(Array.isArray(z)){for(var O="[",j=0,$=z;j<$.length;j+=1)O+=Me($[j])+",";return O+"]"}for(var ne=Object.keys(z).sort(),se="{",N=0;N<ne.length;N++)se+=JSON.stringify(ne[N])+":"+Me(z[ne[N]])+",";return se+"}"}function Y(z){for(var D="",O=0,j=h.refProperties;O<j.length;O+=1)D+="/"+Me(z[j[O]]);return D}var Fe=function(z){this.keyCache={},z&&this.replace(z)};Fe.prototype.replace=function(z){this._layerConfigs={},this._layers={},this.update(z,[])},Fe.prototype.update=function(z,D){for(var O=this,j=0,$=z;j<$.length;j+=1){var ne=$[j];this._layerConfigs[ne.id]=ne;var se=this._layers[ne.id]=h.createStyleLayer(ne);se._featureFilter=h.featureFilter(se.filter),this.keyCache[ne.id]&&delete this.keyCache[ne.id]}for(var N=0,J=D;N<J.length;N+=1){var me=J[N];delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me]}this.familiesBySource={};for(var Ne=0,He=function(tt,nt){for(var Ut={},at=0;at<tt.length;at++){var Xt=nt&&nt[tt[at].id]||Y(tt[at]);nt&&(nt[tt[at].id]=Xt);var xr=Ut[Xt];xr||(xr=Ut[Xt]=[]),xr.push(tt[at])}var Ht=[];for(var ur in Ut)Ht.push(Ut[ur]);return Ht}(h.values(this._layerConfigs),this.keyCache);Ne<He.length;Ne+=1){var Ie=He[Ne].map(function(tt){return O._layers[tt.id]}),Ue=Ie[0];if(Ue.visibility!=="none"){var gt=Ue.source||"",ht=this.familiesBySource[gt];ht||(ht=this.familiesBySource[gt]={});var Ae=Ue.sourceLayer||"_geojsonTileLayer",lt=ht[Ae];lt||(lt=ht[Ae]=[]),lt.push(Ie)}}};var ke=function(z){var D={},O=[];for(var j in z){var $=z[j],ne=D[j]={};for(var se in $){var N=$[+se];if(N&&N.bitmap.width!==0&&N.bitmap.height!==0){var J={x:0,y:0,w:N.bitmap.width+2,h:N.bitmap.height+2};O.push(J),ne[se]={rect:J,metrics:N.metrics}}}}var me=h.potpack(O),Ne=new h.AlphaImage({width:me.w||1,height:me.h||1});for(var He in z){var Ie=z[He];for(var Ue in Ie){var gt=Ie[+Ue];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var ht=D[He][Ue].rect;h.AlphaImage.copy(gt.bitmap,Ne,{x:0,y:0},{x:ht.x+1,y:ht.y+1},gt.bitmap)}}}this.image=Ne,this.positions=D};h.register("GlyphAtlas",ke);var Xe=function(z){this.tileID=new h.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId};function ye(z,D,O){for(var j=new h.EvaluationParameters(D),$=0,ne=z;$<ne.length;$+=1)ne[$].recalculate(j,O)}function mt(z,D){var O=h.getArrayBuffer(z.request,function(j,$,ne,se){j?D(j):$&&D(null,{vectorTile:new h.vectorTile.VectorTile(new h.pbf($)),rawData:$,cacheControl:ne,expires:se})});return function(){O.cancel(),D()}}Xe.prototype.parse=function(z,D,O,j,$){var ne=this;this.status="parsing",this.data=z,this.collisionBoxArray=new h.CollisionBoxArray;var se=new h.DictionaryCoder(Object.keys(z.layers).sort()),N=new h.FeatureIndex(this.tileID,this.promoteId);N.bucketLayerIDs=[];var J,me,Ne,He,Ie={},Ue={featureIndex:N,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:O},gt=D.familiesBySource[this.source];for(var ht in gt){var Ae=z.layers[ht];if(Ae){Ae.version===1&&h.warnOnce('Vector tile source "'+this.source+'" layer "'+ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var lt=se.encode(ht),tt=[],nt=0;nt<Ae.length;nt++){var Ut=Ae.feature(nt),at=N.getId(Ut,ht);tt.push({feature:Ut,id:at,index:nt,sourceLayerIndex:lt})}for(var Xt=0,xr=gt[ht];Xt<xr.length;Xt+=1){var Ht=xr[Xt],ur=Ht[0];ur.minzoom&&this.zoom<Math.floor(ur.minzoom)||ur.maxzoom&&this.zoom>=ur.maxzoom||ur.visibility!=="none"&&(ye(Ht,this.zoom,O),(Ie[ur.id]=ur.createBucket({index:N.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lt,sourceID:this.source})).populate(tt,Ue,this.tileID.canonical),N.bucketLayerIDs.push(Ht.map(function(vr){return vr.id})))}}}var Yt=h.mapObject(Ue.glyphDependencies,function(vr){return Object.keys(vr).map(Number)});Object.keys(Yt).length?j.send("getGlyphs",{uid:this.uid,stacks:Yt},function(vr,$t){J||(J=vr,me=$t,Wr.call(ne))}):me={};var qi=Object.keys(Ue.iconDependencies);qi.length?j.send("getImages",{icons:qi,source:this.source,tileID:this.tileID,type:"icons"},function(vr,$t){J||(J=vr,Ne=$t,Wr.call(ne))}):Ne={};var hr=Object.keys(Ue.patternDependencies);function Wr(){if(J)return $(J);if(me&&Ne&&He){var vr=new ke(me),$t=new h.ImageAtlas(Ne,He);for(var cr in Ie){var en=Ie[cr];en instanceof h.SymbolBucket?(ye(en.layers,this.zoom,O),h.performSymbolLayout(en,me,vr.positions,Ne,$t.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):en.hasPattern&&(en instanceof h.LineBucket||en instanceof h.FillBucket||en instanceof h.FillExtrusionBucket)&&(ye(en.layers,this.zoom,O),en.addFeatures(Ue,this.tileID.canonical,$t.patternPositions))}this.status="done",$(null,{buckets:h.values(Ie).filter(function(Rs){return!Rs.isEmpty()}),featureIndex:N,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:$t,glyphMap:this.returnDependencies?me:null,iconMap:this.returnDependencies?Ne:null,glyphPositions:this.returnDependencies?vr.positions:null})}}hr.length?j.send("getImages",{icons:hr,source:this.source,tileID:this.tileID,type:"patterns"},function(vr,$t){J||(J=vr,He=$t,Wr.call(ne))}):He={},Wr.call(this)};var et=function(z,D,O,j){this.actor=z,this.layerIndex=D,this.availableImages=O,this.loadVectorData=j||mt,this.loading={},this.loaded={}};et.prototype.loadTile=function(z,D){var O=this,j=z.uid;this.loading||(this.loading={});var $=!!(z&&z.request&&z.request.collectResourceTiming)&&new h.RequestPerformance(z.request),ne=this.loading[j]=new Xe(z);ne.abort=this.loadVectorData(z,function(se,N){if(delete O.loading[j],se||!N)return ne.status="done",O.loaded[j]=ne,D(se);var J=N.rawData,me={};N.expires&&(me.expires=N.expires),N.cacheControl&&(me.cacheControl=N.cacheControl);var Ne={};if($){var He=$.finish();He&&(Ne.resourceTiming=JSON.parse(JSON.stringify(He)))}ne.vectorTile=N.vectorTile,ne.parse(N.vectorTile,O.layerIndex,O.availableImages,O.actor,function(Ie,Ue){if(Ie||!Ue)return D(Ie);D(null,h.extend({rawTileData:J.slice(0)},Ue,me,Ne))}),O.loaded=O.loaded||{},O.loaded[j]=ne})},et.prototype.reloadTile=function(z,D){var O=this,j=this.loaded,$=z.uid,ne=this;if(j&&j[$]){var se=j[$];se.showCollisionBoxes=z.showCollisionBoxes;var N=function(J,me){var Ne=se.reloadCallback;Ne&&(delete se.reloadCallback,se.parse(se.vectorTile,ne.layerIndex,O.availableImages,ne.actor,Ne)),D(J,me)};se.status==="parsing"?se.reloadCallback=N:se.status==="done"&&(se.vectorTile?se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,N):N())}},et.prototype.abortTile=function(z,D){var O=this.loading,j=z.uid;O&&O[j]&&O[j].abort&&(O[j].abort(),delete O[j]),D()},et.prototype.removeTile=function(z,D){var O=this.loaded,j=z.uid;O&&O[j]&&delete O[j],D()};var Wt=h.window.ImageBitmap,Dt=function(){this.loaded={}};function tr(z,D){if(z.length!==0){Rt(z[0],D);for(var O=1;O<z.length;O++)Rt(z[O],!D)}}function Rt(z,D){for(var O=0,j=0,$=0,ne=z.length,se=ne-1;$<ne;se=$++){var N=(z[$][0]-z[se][0])*(z[se][1]+z[$][1]),J=O+N;j+=Math.abs(O)>=Math.abs(N)?O-J+N:N-J+O,O=J}O+j>=0!=!!D&&z.reverse()}Dt.prototype.loadTile=function(z,D){var O=z.uid,j=z.encoding,$=z.rawImageData,ne=Wt&&$ instanceof Wt?this.getImageData($):$,se=new h.DEMData(O,ne,j);this.loaded=this.loaded||{},this.loaded[O]=se,D(null,se)},Dt.prototype.getImageData=function(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);var D=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new h.RGBAImage({width:D.width,height:D.height},D.data)},Dt.prototype.removeTile=function(z){var D=this.loaded,O=z.uid;D&&D[O]&&delete D[O]};var pi=h.vectorTile.VectorTileFeature.prototype.toGeoJSON,un=function(z){this._feature=z,this.extent=h.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))};un.prototype.loadGeometry=function(){if(this._feature.type===1){for(var z=[],D=0,O=this._feature.geometry;D<O.length;D+=1){var j=O[D];z.push([new h.Point$1(j[0],j[1])])}return z}for(var $=[],ne=0,se=this._feature.geometry;ne<se.length;ne+=1){for(var N=[],J=0,me=se[ne];J<me.length;J+=1){var Ne=me[J];N.push(new h.Point$1(Ne[0],Ne[1]))}$.push(N)}return $},un.prototype.toGeoJSON=function(z,D,O){return pi.call(this,z,D,O)};var Hr=function(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.EXTENT,this.length=z.length,this._features=z};Hr.prototype.feature=function(z){return new un(this._features[z])};var hi=h.vectorTile.VectorTileFeature,En=Mn;function Mn(z,D){this.options=D||{},this.features=z,this.length=z.length}function ni(z,D){this.id=typeof z.id=="number"?z.id:void 0,this.type=z.type,this.rawGeometry=z.type===1?[z.geometry]:z.geometry,this.properties=z.tags,this.extent=D||4096}Mn.prototype.feature=function(z){return new ni(this.features[z],this.options.extent)},ni.prototype.loadGeometry=function(){var z=this.rawGeometry;this.geometry=[];for(var D=0;D<z.length;D++){for(var O=z[D],j=[],$=0;$<O.length;$++)j.push(new h.Point$1(O[$][0],O[$][1]));this.geometry.push(j)}return this.geometry},ni.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var z=this.geometry,D=1/0,O=-1/0,j=1/0,$=-1/0,ne=0;ne<z.length;ne++)for(var se=z[ne],N=0;N<se.length;N++){var J=se[N];D=Math.min(D,J.x),O=Math.max(O,J.x),j=Math.min(j,J.y),$=Math.max($,J.y)}return[D,j,O,$]},ni.prototype.toGeoJSON=hi.prototype.toGeoJSON;var Qr=Kn,Ii=En;function Kn(z){var D=new h.pbf;return function(O,j){for(var $ in O.layers)j.writeMessage(3,dr,O.layers[$])}(z,D),D.finish()}function dr(z,D){var O;D.writeVarintField(15,z.version||1),D.writeStringField(1,z.name||""),D.writeVarintField(5,z.extent||4096);var j={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<z.length;O++)j.feature=z.feature(O),D.writeMessage(2,oi,j);var $=j.keys;for(O=0;O<$.length;O++)D.writeStringField(3,$[O]);var ne=j.values;for(O=0;O<ne.length;O++)D.writeMessage(4,We,ne[O])}function oi(z,D){var O=z.feature;O.id!==void 0&&D.writeVarintField(1,O.id),D.writeMessage(2,$n,z),D.writeVarintField(3,O.type),D.writeMessage(4,Oe,O)}function $n(z,D){var O=z.feature,j=z.keys,$=z.values,ne=z.keycache,se=z.valuecache;for(var N in O.properties){var J=ne[N];J===void 0&&(j.push(N),ne[N]=J=j.length-1),D.writeVarint(J);var me=O.properties[N],Ne=typeof me;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(me=JSON.stringify(me));var He=Ne+":"+me,Ie=se[He];Ie===void 0&&($.push(me),se[He]=Ie=$.length-1),D.writeVarint(Ie)}}function ie(z,D){return(D<<3)+(7&z)}function pe(z){return z<<1^z>>31}function Oe(z,D){for(var O=z.loadGeometry(),j=z.type,$=0,ne=0,se=O.length,N=0;N<se;N++){var J=O[N],me=1;j===1&&(me=J.length),D.writeVarint(ie(1,me));for(var Ne=j===3?J.length-1:J.length,He=0;He<Ne;He++){He===1&&j!==1&&D.writeVarint(ie(2,Ne-1));var Ie=J[He].x-$,Ue=J[He].y-ne;D.writeVarint(pe(Ie)),D.writeVarint(pe(Ue)),$+=Ie,ne+=Ue}j===3&&D.writeVarint(ie(7,1))}}function We(z,D){var O=typeof z;O==="string"?D.writeStringField(1,z):O==="boolean"?D.writeBooleanField(7,z):O==="number"&&(z%1!=0?D.writeDoubleField(3,z):z<0?D.writeSVarintField(6,z):D.writeVarintField(5,z))}function qe(z,D,O,j){Je(z,O,j),Je(D,2*O,2*j),Je(D,2*O+1,2*j+1)}function Je(z,D,O){var j=z[D];z[D]=z[O],z[O]=j}function we(z,D,O,j){var $=z-O,ne=D-j;return $*$+ne*ne}Qr.fromVectorTileJs=Kn,Qr.fromGeojsonVt=function(z,D){D=D||{};var O={};for(var j in z)O[j]=new En(z[j].features,D),O[j].name=j,O[j].version=D.version,O[j].extent=D.extent;return Kn({layers:O})},Qr.GeoJSONWrapper=Ii;var Pe=function(z){return z[0]},Le=function(z){return z[1]},Te=function(z,D,O,j,$){D===void 0&&(D=Pe),O===void 0&&(O=Le),j===void 0&&(j=64),$===void 0&&($=Float64Array),this.nodeSize=j,this.points=z;for(var ne=z.length<65536?Uint16Array:Uint32Array,se=this.ids=new ne(z.length),N=this.coords=new $(2*z.length),J=0;J<z.length;J++)se[J]=J,N[2*J]=D(z[J]),N[2*J+1]=O(z[J]);(function me(Ne,He,Ie,Ue,gt,ht){if(!(gt-Ue<=Ie)){var Ae=Ue+gt>>1;(function lt(tt,nt,Ut,at,Xt,xr){for(;Xt>at;){if(Xt-at>600){var Ht=Xt-at+1,ur=Ut-at+1,Yt=Math.log(Ht),qi=.5*Math.exp(2*Yt/3),hr=.5*Math.sqrt(Yt*qi*(Ht-qi)/Ht)*(ur-Ht/2<0?-1:1);lt(tt,nt,Ut,Math.max(at,Math.floor(Ut-ur*qi/Ht+hr)),Math.min(Xt,Math.floor(Ut+(Ht-ur)*qi/Ht+hr)),xr)}var Wr=nt[2*Ut+xr],vr=at,$t=Xt;for(qe(tt,nt,at,Ut),nt[2*Xt+xr]>Wr&&qe(tt,nt,at,Xt);vr<$t;){for(qe(tt,nt,vr,$t),vr++,$t--;nt[2*vr+xr]<Wr;)vr++;for(;nt[2*$t+xr]>Wr;)$t--}nt[2*at+xr]===Wr?qe(tt,nt,at,$t):qe(tt,nt,++$t,Xt),$t<=Ut&&(at=$t+1),Ut<=$t&&(Xt=$t-1)}})(Ne,He,Ae,Ue,gt,ht%2),me(Ne,He,Ie,Ue,Ae-1,ht+1),me(Ne,He,Ie,Ae+1,gt,ht+1)}})(se,N,j,0,se.length-1,0)};Te.prototype.range=function(z,D,O,j){return function($,ne,se,N,J,me,Ne){for(var He,Ie,Ue=[0,$.length-1,0],gt=[];Ue.length;){var ht=Ue.pop(),Ae=Ue.pop(),lt=Ue.pop();if(Ae-lt<=Ne)for(var tt=lt;tt<=Ae;tt++)Ie=ne[2*tt+1],(He=ne[2*tt])>=se&&He<=J&&Ie>=N&&Ie<=me&&gt.push($[tt]);else{var nt=Math.floor((lt+Ae)/2);Ie=ne[2*nt+1],(He=ne[2*nt])>=se&&He<=J&&Ie>=N&&Ie<=me&&gt.push($[nt]);var Ut=(ht+1)%2;(ht===0?se<=He:N<=Ie)&&(Ue.push(lt),Ue.push(nt-1),Ue.push(Ut)),(ht===0?J>=He:me>=Ie)&&(Ue.push(nt+1),Ue.push(Ae),Ue.push(Ut))}}return gt}(this.ids,this.coords,z,D,O,j,this.nodeSize)},Te.prototype.within=function(z,D,O){return function(j,$,ne,se,N,J){for(var me=[0,j.length-1,0],Ne=[],He=N*N;me.length;){var Ie=me.pop(),Ue=me.pop(),gt=me.pop();if(Ue-gt<=J)for(var ht=gt;ht<=Ue;ht++)we($[2*ht],$[2*ht+1],ne,se)<=He&&Ne.push(j[ht]);else{var Ae=Math.floor((gt+Ue)/2),lt=$[2*Ae],tt=$[2*Ae+1];we(lt,tt,ne,se)<=He&&Ne.push(j[Ae]);var nt=(Ie+1)%2;(Ie===0?ne-N<=lt:se-N<=tt)&&(me.push(gt),me.push(Ae-1),me.push(nt)),(Ie===0?ne+N>=lt:se+N>=tt)&&(me.push(Ae+1),me.push(Ue),me.push(nt))}}return Ne}(this.ids,this.coords,z,D,O,this.nodeSize)};var Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(z){return z}},Ze=function(z){this.options=kr(Object.create(Ye),z),this.trees=new Array(this.options.maxZoom+1)};function ct(z,D,O,j,$){return{x:z,y:D,zoom:1/0,id:O,parentId:-1,numPoints:j,properties:$}}function it(z,D){var O=z.geometry.coordinates,j=O[1];return{x:jt(O[0]),y:dt(j),zoom:1/0,index:D,parentId:-1}}function At(z){return{type:"Feature",id:z.id,properties:Vt(z),geometry:{type:"Point",coordinates:[(j=z.x,360*(j-.5)),(D=z.y,O=(180-360*D)*Math.PI/180,360*Math.atan(Math.exp(O))/Math.PI-90)]}};var D,O,j}function Vt(z){var D=z.numPoints,O=D>=1e4?Math.round(D/1e3)+"k":D>=1e3?Math.round(D/100)/10+"k":D;return kr(kr({},z.properties),{cluster:!0,cluster_id:z.id,point_count:D,point_count_abbreviated:O})}function jt(z){return z/360+.5}function dt(z){var D=Math.sin(z*Math.PI/180),O=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return O<0?0:O>1?1:O}function kr(z,D){for(var O in D)z[O]=D[O];return z}function Pr(z){return z.x}function ai(z){return z.y}function Sn(z,D,O,j,$,ne){var se=$-O,N=ne-j;if(se!==0||N!==0){var J=((z-O)*se+(D-j)*N)/(se*se+N*N);J>1?(O=$,j=ne):J>0&&(O+=se*J,j+=N*J)}return(se=z-O)*se+(N=D-j)*N}function Ai(z,D,O,j){var $={id:z===void 0?null:z,type:D,geometry:O,tags:j,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var se=ne.geometry,N=ne.type;if(N==="Point"||N==="MultiPoint"||N==="LineString")lr(ne,se);else if(N==="Polygon"||N==="MultiLineString")for(var J=0;J<se.length;J++)lr(ne,se[J]);else if(N==="MultiPolygon")for(J=0;J<se.length;J++)for(var me=0;me<se[J].length;me++)lr(ne,se[J][me])}($),$}function lr(z,D){for(var O=0;O<D.length;O+=3)z.minX=Math.min(z.minX,D[O]),z.minY=Math.min(z.minY,D[O+1]),z.maxX=Math.max(z.maxX,D[O]),z.maxY=Math.max(z.maxY,D[O+1])}function rr(z,D,O,j){if(D.geometry){var $=D.geometry.coordinates,ne=D.geometry.type,se=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),N=[],J=D.id;if(O.promoteId?J=D.properties[O.promoteId]:O.generateId&&(J=j||0),ne==="Point")fi($,N);else if(ne==="MultiPoint")for(var me=0;me<$.length;me++)fi($[me],N);else if(ne==="LineString")Oi($,N,se,!1);else if(ne==="MultiLineString"){if(O.lineMetrics){for(me=0;me<$.length;me++)Oi($[me],N=[],se,!1),z.push(Ai(J,"LineString",N,D.properties));return}di($,N,se,!1)}else if(ne==="Polygon")di($,N,se,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(me=0;me<D.geometry.geometries.length;me++)rr(z,{id:J,geometry:D.geometry.geometries[me],properties:D.properties},O,j);return}throw new Error("Input data is not a valid GeoJSON object.")}for(me=0;me<$.length;me++){var Ne=[];di($[me],Ne,se,!0),N.push(Ne)}}z.push(Ai(J,ne,N,D.properties))}}function fi(z,D){D.push(Qi(z[0])),D.push(uo(z[1])),D.push(0)}function Oi(z,D,O,j){for(var $,ne,se=0,N=0;N<z.length;N++){var J=Qi(z[N][0]),me=uo(z[N][1]);D.push(J),D.push(me),D.push(0),N>0&&(se+=j?($*me-J*ne)/2:Math.sqrt(Math.pow(J-$,2)+Math.pow(me-ne,2))),$=J,ne=me}var Ne=D.length-3;D[2]=1,function He(Ie,Ue,gt,ht){for(var Ae,lt=ht,tt=gt-Ue>>1,nt=gt-Ue,Ut=Ie[Ue],at=Ie[Ue+1],Xt=Ie[gt],xr=Ie[gt+1],Ht=Ue+3;Ht<gt;Ht+=3){var ur=Sn(Ie[Ht],Ie[Ht+1],Ut,at,Xt,xr);if(ur>lt)Ae=Ht,lt=ur;else if(ur===lt){var Yt=Math.abs(Ht-tt);Yt<nt&&(Ae=Ht,nt=Yt)}}lt>ht&&(Ae-Ue>3&&He(Ie,Ue,Ae,ht),Ie[Ae+2]=lt,gt-Ae>3&&He(Ie,Ae,gt,ht))}(D,0,Ne,O),D[Ne+2]=1,D.size=Math.abs(se),D.start=0,D.end=D.size}function di(z,D,O,j){for(var $=0;$<z.length;$++){var ne=[];Oi(z[$],ne,O,j),D.push(ne)}}function Qi(z){return z/360+.5}function uo(z){var D=Math.sin(z*Math.PI/180),O=.5-.25*Math.log((1+D)/(1-D))/Math.PI;return O<0?0:O>1?1:O}function cn(z,D,O,j,$,ne,se,N){if(j/=D,ne>=(O/=D)&&se<j)return z;if(se<O||ne>=j)return null;for(var J=[],me=0;me<z.length;me++){var Ne=z[me],He=Ne.geometry,Ie=Ne.type,Ue=$===0?Ne.minX:Ne.minY,gt=$===0?Ne.maxX:Ne.maxY;if(Ue>=O&&gt<j)J.push(Ne);else if(!(gt<O||Ue>=j)){var ht=[];if(Ie==="Point"||Ie==="MultiPoint")Rl(He,ht,O,j,$);else if(Ie==="LineString")Ol(He,ht,O,j,$,!1,N.lineMetrics);else if(Ie==="MultiLineString")Ps(He,ht,O,j,$,!1);else if(Ie==="Polygon")Ps(He,ht,O,j,$,!0);else if(Ie==="MultiPolygon")for(var Ae=0;Ae<He.length;Ae++){var lt=[];Ps(He[Ae],lt,O,j,$,!0),lt.length&&ht.push(lt)}if(ht.length){if(N.lineMetrics&&Ie==="LineString"){for(Ae=0;Ae<ht.length;Ae++)J.push(Ai(Ne.id,Ie,ht[Ae],Ne.tags));continue}Ie!=="LineString"&&Ie!=="MultiLineString"||(ht.length===1?(Ie="LineString",ht=ht[0]):Ie="MultiLineString"),Ie!=="Point"&&Ie!=="MultiPoint"||(Ie=ht.length===3?"Point":"MultiPoint"),J.push(Ai(Ne.id,Ie,ht,Ne.tags))}}}return J.length?J:null}function Rl(z,D,O,j,$){for(var ne=0;ne<z.length;ne+=3){var se=z[ne+$];se>=O&&se<=j&&(D.push(z[ne]),D.push(z[ne+1]),D.push(z[ne+2]))}}function Ol(z,D,O,j,$,ne,se){for(var N,J,me=ks(z),Ne=$===0?Bl:Ka,He=z.start,Ie=0;Ie<z.length-3;Ie+=3){var Ue=z[Ie],gt=z[Ie+1],ht=z[Ie+2],Ae=z[Ie+3],lt=z[Ie+4],tt=$===0?Ue:gt,nt=$===0?Ae:lt,Ut=!1;se&&(N=Math.sqrt(Math.pow(Ue-Ae,2)+Math.pow(gt-lt,2))),tt<O?nt>O&&(J=Ne(me,Ue,gt,Ae,lt,O),se&&(me.start=He+N*J)):tt>j?nt<j&&(J=Ne(me,Ue,gt,Ae,lt,j),se&&(me.start=He+N*J)):Wa(me,Ue,gt,ht),nt<O&&tt>=O&&(J=Ne(me,Ue,gt,Ae,lt,O),Ut=!0),nt>j&&tt<=j&&(J=Ne(me,Ue,gt,Ae,lt,j),Ut=!0),!ne&&Ut&&(se&&(me.end=He+N*J),D.push(me),me=ks(z)),se&&(He+=N)}var at=z.length-3;Ue=z[at],gt=z[at+1],ht=z[at+2],(tt=$===0?Ue:gt)>=O&&tt<=j&&Wa(me,Ue,gt,ht),at=me.length-3,ne&&at>=3&&(me[at]!==me[0]||me[at+1]!==me[1])&&Wa(me,me[0],me[1],me[2]),me.length&&D.push(me)}function ks(z){var D=[];return D.size=z.size,D.start=z.start,D.end=z.end,D}function Ps(z,D,O,j,$,ne){for(var se=0;se<z.length;se++)Ol(z[se],D,O,j,$,ne,!1)}function Wa(z,D,O,j){z.push(D),z.push(O),z.push(j)}function Bl(z,D,O,j,$,ne){var se=(ne-D)/(j-D);return z.push(ne),z.push(O+($-O)*se),z.push(1),se}function Ka(z,D,O,j,$,ne){var se=(ne-O)/($-O);return z.push(D+(j-D)*se),z.push(ne),z.push(1),se}function zs(z,D){for(var O=[],j=0;j<z.length;j++){var $,ne=z[j],se=ne.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")$=ha(ne.geometry,D);else if(se==="MultiLineString"||se==="Polygon"){$=[];for(var N=0;N<ne.geometry.length;N++)$.push(ha(ne.geometry[N],D))}else if(se==="MultiPolygon")for($=[],N=0;N<ne.geometry.length;N++){for(var J=[],me=0;me<ne.geometry[N].length;me++)J.push(ha(ne.geometry[N][me],D));$.push(J)}O.push(Ai(ne.id,se,$,ne.tags))}return O}function ha(z,D){var O=[];O.size=z.size,z.start!==void 0&&(O.start=z.start,O.end=z.end);for(var j=0;j<z.length;j+=3)O.push(z[j]+D,z[j+1],z[j+2]);return O}function Ms(z,D){if(z.transformed)return z;var O,j,$,ne=1<<z.z,se=z.x,N=z.y;for(O=0;O<z.features.length;O++){var J=z.features[O],me=J.geometry,Ne=J.type;if(J.geometry=[],Ne===1)for(j=0;j<me.length;j+=2)J.geometry.push(Ls(me[j],me[j+1],D,ne,se,N));else for(j=0;j<me.length;j++){var He=[];for($=0;$<me[j].length;$+=2)He.push(Ls(me[j][$],me[j][$+1],D,ne,se,N));J.geometry.push(He)}}return z.transformed=!0,z}function Ls(z,D,O,j,$,ne){return[Math.round(O*(z*j-$)),Math.round(O*(D*j-ne))]}function Fl(z,D,O,j,$){for(var ne=D===$.maxZoom?0:$.tolerance/((1<<D)*$.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:j,z:D,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},N=0;N<z.length;N++){se.numFeatures++,Nl(se,z[N],ne,$);var J=z[N].minX,me=z[N].minY,Ne=z[N].maxX,He=z[N].maxY;J<se.minX&&(se.minX=J),me<se.minY&&(se.minY=me),Ne>se.maxX&&(se.maxX=Ne),He>se.maxY&&(se.maxY=He)}return se}function Nl(z,D,O,j){var $=D.geometry,ne=D.type,se=[];if(ne==="Point"||ne==="MultiPoint")for(var N=0;N<$.length;N+=3)se.push($[N]),se.push($[N+1]),z.numPoints++,z.numSimplified++;else if(ne==="LineString")fa(se,$,z,O,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(N=0;N<$.length;N++)fa(se,$[N],z,O,ne==="Polygon",N===0);else if(ne==="MultiPolygon")for(var J=0;J<$.length;J++){var me=$[J];for(N=0;N<me.length;N++)fa(se,me[N],z,O,!0,N===0)}if(se.length){var Ne=D.tags||null;if(ne==="LineString"&&j.lineMetrics){for(var He in Ne={},D.tags)Ne[He]=D.tags[He];Ne.mapbox_clip_start=$.start/$.size,Ne.mapbox_clip_end=$.end/$.size}var Ie={geometry:se,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Ne};D.id!==null&&(Ie.id=D.id),z.features.push(Ie)}}function fa(z,D,O,j,$,ne){var se=j*j;if(j>0&&D.size<($?se:j))O.numPoints+=D.length/3;else{for(var N=[],J=0;J<D.length;J+=3)(j===0||D[J+2]>se)&&(O.numSimplified++,N.push(D[J]),N.push(D[J+1])),O.numPoints++;$&&function(me,Ne){for(var He=0,Ie=0,Ue=me.length,gt=Ue-2;Ie<Ue;gt=Ie,Ie+=2)He+=(me[Ie]-me[gt])*(me[Ie+1]+me[gt+1]);if(He>0===Ne)for(Ie=0,Ue=me.length;Ie<Ue/2;Ie+=2){var ht=me[Ie],Ae=me[Ie+1];me[Ie]=me[Ue-2-Ie],me[Ie+1]=me[Ue-1-Ie],me[Ue-2-Ie]=ht,me[Ue-1-Ie]=Ae}}(N,ne),z.push(N)}}function So(z,D){var O=(D=this.options=function($,ne){for(var se in ne)$[se]=ne[se];return $}(Object.create(this.options),D)).debug;if(O&&console.time("preprocess data"),D.maxZoom<0||D.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(D.promoteId&&D.generateId)throw new Error("promoteId and generateId cannot be used together.");var j=function($,ne){var se=[];if($.type==="FeatureCollection")for(var N=0;N<$.features.length;N++)rr(se,$.features[N],ne,N);else rr(se,$.type==="Feature"?$:{geometry:$},ne);return se}(z,D);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",D.indexMaxZoom,D.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(j=function($,ne){var se=ne.buffer/ne.extent,N=$,J=cn($,1,-1-se,se,0,-1,2,ne),me=cn($,1,1-se,2+se,0,-1,2,ne);return(J||me)&&(N=cn($,1,-se,1+se,0,-1,2,ne)||[],J&&(N=zs(J,1).concat(N)),me&&(N=N.concat(zs(me,-1)))),N}(j,D)).length&&this.splitTile(j,0,0,0),O&&(j.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function To(z,D,O){return 32*((1<<z)*O+D)+z}function $a(z,D){var O=z.tileID.canonical;if(!this._geoJSONIndex)return D(null,null);var j=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!j)return D(null,null);var $=new Hr(j.features),ne=Qr($);ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),D(null,{vectorTile:$,rawData:ne.buffer})}Ze.prototype.load=function(z){var D=this.options,O=D.log,j=D.minZoom,$=D.maxZoom,ne=D.nodeSize;O&&console.time("total time");var se="prepare "+z.length+" points";O&&console.time(se),this.points=z;for(var N=[],J=0;J<z.length;J++)z[J].geometry&&N.push(it(z[J],J));this.trees[$+1]=new Te(N,Pr,ai,ne,Float32Array),O&&console.timeEnd(se);for(var me=$;me>=j;me--){var Ne=+Date.now();N=this._cluster(N,me),this.trees[me]=new Te(N,Pr,ai,ne,Float32Array),O&&console.log("z%d: %d clusters in %dms",me,N.length,+Date.now()-Ne)}return O&&console.timeEnd("total time"),this},Ze.prototype.getClusters=function(z,D){var O=((z[0]+180)%360+360)%360-180,j=Math.max(-90,Math.min(90,z[1])),$=z[2]===180?180:((z[2]+180)%360+360)%360-180,ne=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)O=-180,$=180;else if(O>$){var se=this.getClusters([O,j,180,ne],D),N=this.getClusters([-180,j,$,ne],D);return se.concat(N)}for(var J=this.trees[this._limitZoom(D)],me=[],Ne=0,He=J.range(jt(O),dt(ne),jt($),dt(j));Ne<He.length;Ne+=1){var Ie=J.points[He[Ne]];me.push(Ie.numPoints?At(Ie):this.points[Ie.index])}return me},Ze.prototype.getChildren=function(z){var D=this._getOriginId(z),O=this._getOriginZoom(z),j="No cluster with the specified id.",$=this.trees[O];if(!$)throw new Error(j);var ne=$.points[D];if(!ne)throw new Error(j);for(var se=this.options.radius/(this.options.extent*Math.pow(2,O-1)),N=[],J=0,me=$.within(ne.x,ne.y,se);J<me.length;J+=1){var Ne=$.points[me[J]];Ne.parentId===z&&N.push(Ne.numPoints?At(Ne):this.points[Ne.index])}if(N.length===0)throw new Error(j);return N},Ze.prototype.getLeaves=function(z,D,O){var j=[];return this._appendLeaves(j,z,D=D||10,O=O||0,0),j},Ze.prototype.getTile=function(z,D,O){var j=this.trees[this._limitZoom(z)],$=Math.pow(2,z),ne=this.options,se=ne.radius/ne.extent,N=(O-se)/$,J=(O+1+se)/$,me={features:[]};return this._addTileFeatures(j.range((D-se)/$,N,(D+1+se)/$,J),j.points,D,O,$,me),D===0&&this._addTileFeatures(j.range(1-se/$,N,1,J),j.points,$,O,$,me),D===$-1&&this._addTileFeatures(j.range(0,N,se/$,J),j.points,-1,O,$,me),me.features.length?me:null},Ze.prototype.getClusterExpansionZoom=function(z){for(var D=this._getOriginZoom(z)-1;D<=this.options.maxZoom;){var O=this.getChildren(z);if(D++,O.length!==1)break;z=O[0].properties.cluster_id}return D},Ze.prototype._appendLeaves=function(z,D,O,j,$){for(var ne=0,se=this.getChildren(D);ne<se.length;ne+=1){var N=se[ne],J=N.properties;if(J&&J.cluster?$+J.point_count<=j?$+=J.point_count:$=this._appendLeaves(z,J.cluster_id,O,j,$):$<j?$++:z.push(N),z.length===O)break}return $},Ze.prototype._addTileFeatures=function(z,D,O,j,$,ne){for(var se=0,N=z;se<N.length;se+=1){var J=D[N[se]],me=J.numPoints,Ne={type:1,geometry:[[Math.round(this.options.extent*(J.x*$-O)),Math.round(this.options.extent*(J.y*$-j))]],tags:me?Vt(J):this.points[J.index].properties},He=void 0;me?He=J.id:this.options.generateId?He=J.index:this.points[J.index].id&&(He=this.points[J.index].id),He!==void 0&&(Ne.id=He),ne.features.push(Ne)}},Ze.prototype._limitZoom=function(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))},Ze.prototype._cluster=function(z,D){for(var O=[],j=this.options,$=j.reduce,ne=j.minPoints,se=j.radius/(j.extent*Math.pow(2,D)),N=0;N<z.length;N++){var J=z[N];if(!(J.zoom<=D)){J.zoom=D;for(var me=this.trees[D+1],Ne=me.within(J.x,J.y,se),He=J.numPoints||1,Ie=He,Ue=0,gt=Ne;Ue<gt.length;Ue+=1){var ht=me.points[gt[Ue]];ht.zoom>D&&(Ie+=ht.numPoints||1)}if(Ie>=ne){for(var Ae=J.x*He,lt=J.y*He,tt=$&&He>1?this._map(J,!0):null,nt=(N<<5)+(D+1)+this.points.length,Ut=0,at=Ne;Ut<at.length;Ut+=1){var Xt=me.points[at[Ut]];if(!(Xt.zoom<=D)){Xt.zoom=D;var xr=Xt.numPoints||1;Ae+=Xt.x*xr,lt+=Xt.y*xr,Xt.parentId=nt,$&&(tt||(tt=this._map(J,!0)),$(tt,this._map(Xt)))}}J.parentId=nt,O.push(ct(Ae/Ie,lt/Ie,nt,Ie,tt))}else if(O.push(J),Ie>1)for(var Ht=0,ur=Ne;Ht<ur.length;Ht+=1){var Yt=me.points[ur[Ht]];Yt.zoom<=D||(Yt.zoom=D,O.push(Yt))}}}return O},Ze.prototype._getOriginId=function(z){return z-this.points.length>>5},Ze.prototype._getOriginZoom=function(z){return(z-this.points.length)%32},Ze.prototype._map=function(z,D){if(z.numPoints)return D?kr({},z.properties):z.properties;var O=this.points[z.index].properties,j=this.options.map(O);return D&&j===O?kr({},j):j},So.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},So.prototype.splitTile=function(z,D,O,j,$,ne,se){for(var N=[z,D,O,j],J=this.options,me=J.debug;N.length;){j=N.pop(),O=N.pop(),D=N.pop(),z=N.pop();var Ne=1<<D,He=To(D,O,j),Ie=this.tiles[He];if(!Ie&&(me>1&&console.time("creation"),Ie=this.tiles[He]=Fl(z,D,O,j,J),this.tileCoords.push({z:D,x:O,y:j}),me)){me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",D,O,j,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var Ue="z"+D;this.stats[Ue]=(this.stats[Ue]||0)+1,this.total++}if(Ie.source=z,$){if(D===J.maxZoom||D===$)continue;var gt=1<<$-D;if(O!==Math.floor(ne/gt)||j!==Math.floor(se/gt))continue}else if(D===J.indexMaxZoom||Ie.numPoints<=J.indexMaxPoints)continue;if(Ie.source=null,z.length!==0){me>1&&console.time("clipping");var ht,Ae,lt,tt,nt,Ut,at=.5*J.buffer/J.extent,Xt=.5-at,xr=.5+at,Ht=1+at;ht=Ae=lt=tt=null,nt=cn(z,Ne,O-at,O+xr,0,Ie.minX,Ie.maxX,J),Ut=cn(z,Ne,O+Xt,O+Ht,0,Ie.minX,Ie.maxX,J),z=null,nt&&(ht=cn(nt,Ne,j-at,j+xr,1,Ie.minY,Ie.maxY,J),Ae=cn(nt,Ne,j+Xt,j+Ht,1,Ie.minY,Ie.maxY,J),nt=null),Ut&&(lt=cn(Ut,Ne,j-at,j+xr,1,Ie.minY,Ie.maxY,J),tt=cn(Ut,Ne,j+Xt,j+Ht,1,Ie.minY,Ie.maxY,J),Ut=null),me>1&&console.timeEnd("clipping"),N.push(ht||[],D+1,2*O,2*j),N.push(Ae||[],D+1,2*O,2*j+1),N.push(lt||[],D+1,2*O+1,2*j),N.push(tt||[],D+1,2*O+1,2*j+1)}}},So.prototype.getTile=function(z,D,O){var j=this.options,$=j.extent,ne=j.debug;if(z<0||z>24)return null;var se=1<<z,N=To(z,D=(D%se+se)%se,O);if(this.tiles[N])return Ms(this.tiles[N],$);ne>1&&console.log("drilling down to z%d-%d-%d",z,D,O);for(var J,me=z,Ne=D,He=O;!J&&me>0;)me--,Ne=Math.floor(Ne/2),He=Math.floor(He/2),J=this.tiles[To(me,Ne,He)];return J&&J.source?(ne>1&&console.log("found parent tile z%d-%d-%d",me,Ne,He),ne>1&&console.time("drilling down"),this.splitTile(J.source,me,Ne,He,z,D,O),ne>1&&console.timeEnd("drilling down"),this.tiles[N]?Ms(this.tiles[N],$):null):null};var Ds=function(z){function D(O,j,$,ne){z.call(this,O,j,$,$a),ne&&(this.loadGeoJSON=ne)}return z&&(D.__proto__=z),(D.prototype=Object.create(z&&z.prototype)).constructor=D,D.prototype.loadData=function(O,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=j,this._pendingLoadDataParams=O,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},D.prototype._loadData=function(){var O=this;if(this._pendingCallback&&this._pendingLoadDataParams){var j=this._pendingCallback,$=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ne=!!($&&$.request&&$.request.collectResourceTiming)&&new h.RequestPerformance($.request);this.loadGeoJSON($,function(se,N){if(se||!N)return j(se);if(typeof N!="object")return j(new Error("Input data given to '"+$.source+"' is not a valid GeoJSON object."));(function Ie(Ue,gt){var ht,Ae=Ue&&Ue.type;if(Ae==="FeatureCollection")for(ht=0;ht<Ue.features.length;ht++)Ie(Ue.features[ht],gt);else if(Ae==="GeometryCollection")for(ht=0;ht<Ue.geometries.length;ht++)Ie(Ue.geometries[ht],gt);else if(Ae==="Feature")Ie(Ue.geometry,gt);else if(Ae==="Polygon")tr(Ue.coordinates,gt);else if(Ae==="MultiPolygon")for(ht=0;ht<Ue.coordinates.length;ht++)tr(Ue.coordinates[ht],gt);return Ue})(N,!0);try{if($.filter){var J=h.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(function(Ie){return Ie.key+": "+Ie.message}).join(", "));var me=N.features.filter(function(Ie){return J.value.evaluate({zoom:0},Ie)});N={type:"FeatureCollection",features:me}}O._geoJSONIndex=$.cluster?new Ze(function(Ie){var Ue=Ie.superclusterOptions,gt=Ie.clusterProperties;if(!gt||!Ue)return Ue;for(var ht={},Ae={},lt={accumulated:null,zoom:0},tt={properties:null},nt=Object.keys(gt),Ut=0,at=nt;Ut<at.length;Ut+=1){var Xt=at[Ut],xr=gt[Xt],Ht=xr[0],ur=h.createExpression(xr[1]),Yt=h.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",Xt]]:Ht);ht[Xt]=ur.value,Ae[Xt]=Yt.value}return Ue.map=function(qi){tt.properties=qi;for(var hr={},Wr=0,vr=nt;Wr<vr.length;Wr+=1){var $t=vr[Wr];hr[$t]=ht[$t].evaluate(lt,tt)}return hr},Ue.reduce=function(qi,hr){tt.properties=hr;for(var Wr=0,vr=nt;Wr<vr.length;Wr+=1){var $t=vr[Wr];lt.accumulated=qi[$t],qi[$t]=Ae[$t].evaluate(lt,tt)}},Ue}($)).load(N.features):function(Ie,Ue){return new So(Ie,Ue)}(N,$.geojsonVtOptions)}catch(Ie){return j(Ie)}O.loaded={};var Ne={};if(ne){var He=ne.finish();He&&(Ne.resourceTiming={},Ne.resourceTiming[$.source]=JSON.parse(JSON.stringify(He)))}j(null,Ne)})}},D.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},D.prototype.reloadTile=function(O,j){var $=this.loaded;return $&&$[O.uid]?z.prototype.reloadTile.call(this,O,j):this.loadTile(O,j)},D.prototype.loadGeoJSON=function(O,j){if(O.request)h.getJSON(O.request,j);else{if(typeof O.data!="string")return j(new Error("Input data given to '"+O.source+"' is not a valid GeoJSON object."));try{return j(null,JSON.parse(O.data))}catch{return j(new Error("Input data given to '"+O.source+"' is not a valid GeoJSON object."))}}},D.prototype.removeSource=function(O,j){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),j()},D.prototype.getClusterExpansionZoom=function(O,j){try{j(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch($){j($)}},D.prototype.getClusterChildren=function(O,j){try{j(null,this._geoJSONIndex.getChildren(O.clusterId))}catch($){j($)}},D.prototype.getClusterLeaves=function(O,j){try{j(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch($){j($)}},D}(et),Gr=function(z){var D=this;this.self=z,this.actor=new h.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:et,geojson:Ds},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(O,j){if(D.workerSourceTypes[O])throw new Error('Worker source with name "'+O+'" already registered.');D.workerSourceTypes[O]=j},this.self.registerRTLTextPlugin=function(O){if(h.plugin.isParsed())throw new Error("RTL text plugin already registered.");h.plugin.applyArabicShaping=O.applyArabicShaping,h.plugin.processBidirectionalText=O.processBidirectionalText,h.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}};return Gr.prototype.setReferrer=function(z,D){this.referrer=D},Gr.prototype.setImages=function(z,D,O){for(var j in this.availableImages[z]=D,this.workerSources[z]){var $=this.workerSources[z][j];for(var ne in $)$[ne].availableImages=D}O()},Gr.prototype.setLayers=function(z,D,O){this.getLayerIndex(z).replace(D),O()},Gr.prototype.updateLayers=function(z,D,O){this.getLayerIndex(z).update(D.layers,D.removedIds),O()},Gr.prototype.loadTile=function(z,D,O){this.getWorkerSource(z,D.type,D.source).loadTile(D,O)},Gr.prototype.loadDEMTile=function(z,D,O){this.getDEMWorkerSource(z,D.source).loadTile(D,O)},Gr.prototype.reloadTile=function(z,D,O){this.getWorkerSource(z,D.type,D.source).reloadTile(D,O)},Gr.prototype.abortTile=function(z,D,O){this.getWorkerSource(z,D.type,D.source).abortTile(D,O)},Gr.prototype.removeTile=function(z,D,O){this.getWorkerSource(z,D.type,D.source).removeTile(D,O)},Gr.prototype.removeDEMTile=function(z,D){this.getDEMWorkerSource(z,D.source).removeTile(D)},Gr.prototype.removeSource=function(z,D,O){if(this.workerSources[z]&&this.workerSources[z][D.type]&&this.workerSources[z][D.type][D.source]){var j=this.workerSources[z][D.type][D.source];delete this.workerSources[z][D.type][D.source],j.removeSource!==void 0?j.removeSource(D,O):O()}},Gr.prototype.loadWorkerSource=function(z,D,O){try{this.self.importScripts(D.url),O()}catch(j){O(j.toString())}},Gr.prototype.syncRTLPluginState=function(z,D,O){try{h.plugin.setState(D);var j=h.plugin.getPluginURL();if(h.plugin.isLoaded()&&!h.plugin.isParsed()&&j!=null){this.self.importScripts(j);var $=h.plugin.isParsed();O($?void 0:new Error("RTL Text Plugin failed to import scripts from "+j),$)}}catch(ne){O(ne.toString())}},Gr.prototype.getAvailableImages=function(z){var D=this.availableImages[z];return D||(D=[]),D},Gr.prototype.getLayerIndex=function(z){var D=this.layerIndexes[z];return D||(D=this.layerIndexes[z]=new Fe),D},Gr.prototype.getWorkerSource=function(z,D,O){var j=this;return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][D]||(this.workerSources[z][D]={}),this.workerSources[z][D][O]||(this.workerSources[z][D][O]=new this.workerSourceTypes[D]({send:function($,ne,se){j.actor.send($,ne,se,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][D][O]},Gr.prototype.getDEMWorkerSource=function(z,D){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][D]||(this.demWorkerSources[z][D]=new Dt),this.demWorkerSources[z][D]},Gr.prototype.enforceCacheSizeLimit=function(z,D){h.enforceCacheSizeLimit(D)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Gr(self)),Gr}),je(["./shared"],function(h){var Me=h.createCommonjsModule(function(n){function s(m){return!o(m)}function o(m){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var x,E,I=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(I);try{E=new Worker(M),x=!0}catch{x=!1}return E&&E.terminate(),URL.revokeObjectURL(M),x}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var x=document.createElement("canvas");x.width=x.height=1;var E=x.getContext("2d");if(!E)return!1;var I=E.getImageData(0,0,1,1);return I&&I.width===x.width}()?(u[v=m&&m.failIfMajorPerformanceCaveat]===void 0&&(u[v]=function(x){var E=function(M){var F=document.createElement("canvas"),U=Object.create(s.webGLContextAttributes);return U.failIfMajorPerformanceCaveat=M,F.probablySupportsContext?F.probablySupportsContext("webgl",U)||F.probablySupportsContext("experimental-webgl",U):F.supportsContext?F.supportsContext("webgl",U)||F.supportsContext("experimental-webgl",U):F.getContext("webgl",U)||F.getContext("experimental-webgl",U)}(x);if(!E)return!1;var I=E.createShader(E.VERTEX_SHADER);return!(!I||E.isContextLost())&&(E.shaderSource(I,"void main() {}"),E.compileShader(I),E.getShaderParameter(I,E.COMPILE_STATUS)===!0)}(v)),u[v]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var v}n.exports?n.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=o);var u={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Y={create:function(n,s,o){var u=h.window.document.createElement(n);return s!==void 0&&(u.className=s),o&&o.appendChild(u),u},createNS:function(n,s){return h.window.document.createElementNS(n,s)}},Fe=h.window.document&&h.window.document.documentElement.style;function ke(n){if(!Fe)return n[0];for(var s=0;s<n.length;s++)if(n[s]in Fe)return n[s];return n[0]}var Xe,ye=ke(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Y.disableDrag=function(){Fe&&ye&&(Xe=Fe[ye],Fe[ye]="none")},Y.enableDrag=function(){Fe&&ye&&(Fe[ye]=Xe)};var mt=ke(["transform","WebkitTransform"]);Y.setTransform=function(n,s){n.style[mt]=s};var et=!1;try{var Wt=Object.defineProperty({},"passive",{get:function(){et=!0}});h.window.addEventListener("test",Wt,Wt),h.window.removeEventListener("test",Wt,Wt)}catch{et=!1}Y.addEventListener=function(n,s,o,u){u===void 0&&(u={}),n.addEventListener(s,o,"passive"in u&&et?u:u.capture)},Y.removeEventListener=function(n,s,o,u){u===void 0&&(u={}),n.removeEventListener(s,o,"passive"in u&&et?u:u.capture)};var Dt=function(n){n.preventDefault(),n.stopPropagation(),h.window.removeEventListener("click",Dt,!0)};function tr(n){var s=n.userImage;return!!(s&&s.render&&s.render())&&(n.data.replace(new Uint8Array(s.data.buffer)),!0)}Y.suppressClick=function(){h.window.addEventListener("click",Dt,!0),h.window.setTimeout(function(){h.window.removeEventListener("click",Dt,!0)},0)},Y.mousePos=function(n,s){var o=n.getBoundingClientRect();return new h.Point(s.clientX-o.left-n.clientLeft,s.clientY-o.top-n.clientTop)},Y.touchPos=function(n,s){for(var o=n.getBoundingClientRect(),u=[],m=0;m<s.length;m++)u.push(new h.Point(s[m].clientX-o.left-n.clientLeft,s[m].clientY-o.top-n.clientTop));return u},Y.mouseButton=function(n){return h.window.InstallTrigger!==void 0&&n.button===2&&n.ctrlKey&&h.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},Y.remove=function(n){n.parentNode&&n.parentNode.removeChild(n)};var Rt=function(n){function s(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(o){if(this.loaded!==o&&(this.loaded=o,o)){for(var u=0,m=this.requestors;u<m.length;u+=1){var v=m[u];this._notify(v.ids,v.callback)}this.requestors=[]}},s.prototype.getImage=function(o){return this.images[o]},s.prototype.addImage=function(o,u){this._validate(o,u)&&(this.images[o]=u)},s.prototype._validate=function(o,u){var m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new h.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchX" value'))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new h.ErrorEvent(new Error('Image "'+o+'" has invalid "stretchY" value'))),m=!1),this._validateContent(u.content,u)||(this.fire(new h.ErrorEvent(new Error('Image "'+o+'" has invalid "content" value'))),m=!1),m},s.prototype._validateStretch=function(o,u){if(!o)return!0;for(var m=0,v=0,x=o;v<x.length;v+=1){var E=x[v];if(E[0]<m||E[1]<E[0]||u<E[1])return!1;m=E[1]}return!0},s.prototype._validateContent=function(o,u){return!(o&&(o.length!==4||o[0]<0||u.data.width<o[0]||o[1]<0||u.data.height<o[1]||o[2]<0||u.data.width<o[2]||o[3]<0||u.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},s.prototype.updateImage=function(o,u){u.version=this.images[o].version+1,this.images[o]=u,this.updatedImages[o]=!0},s.prototype.removeImage=function(o){var u=this.images[o];delete this.images[o],delete this.patterns[o],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(o,u){var m=!0;if(!this.isLoaded())for(var v=0,x=o;v<x.length;v+=1)this.images[x[v]]||(m=!1);this.isLoaded()||m?this._notify(o,u):this.requestors.push({ids:o,callback:u})},s.prototype._notify=function(o,u){for(var m={},v=0,x=o;v<x.length;v+=1){var E=x[v];this.images[E]||this.fire(new h.Event("styleimagemissing",{id:E}));var I=this.images[E];I?m[E]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:h.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}u(null,m)},s.prototype.getPixelSize=function(){var o=this.atlasImage;return{width:o.width,height:o.height}},s.prototype.getPattern=function(o){var u=this.patterns[o],m=this.getImage(o);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{var v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},x=new h.ImagePosition(v,m);this.patterns[o]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[o].position},s.prototype.bind=function(o){var u=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new h.Texture(o,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var o=[];for(var u in this.patterns)o.push(this.patterns[u].bin);var m=h.potpack(o),v=m.w,x=m.h,E=this.atlasImage;for(var I in E.resize({width:v||1,height:x||1}),this.patterns){var M=this.patterns[I].bin,F=M.x+1,U=M.y+1,V=this.images[I].data,X=V.width,K=V.height;h.RGBAImage.copy(V,E,{x:0,y:0},{x:F,y:U},{width:X,height:K}),h.RGBAImage.copy(V,E,{x:0,y:K-1},{x:F,y:U-1},{width:X,height:1}),h.RGBAImage.copy(V,E,{x:0,y:0},{x:F,y:U+K},{width:X,height:1}),h.RGBAImage.copy(V,E,{x:X-1,y:0},{x:F-1,y:U},{width:1,height:K}),h.RGBAImage.copy(V,E,{x:0,y:0},{x:F+X,y:U},{width:1,height:K})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(o){for(var u=0,m=o;u<m.length;u+=1){var v=m[u];if(!this.callbackDispatchedThisFrame[v]){this.callbackDispatchedThisFrame[v]=!0;var x=this.images[v];tr(x)&&this.updateImage(v,x)}}},s}(h.Evented),pi=hi,un=hi,Hr=1e20;function hi(n,s,o,u,m,v){this.fontSize=n||24,this.buffer=s===void 0?3:s,this.cutoff=u||.25,this.fontFamily=m||"sans-serif",this.fontWeight=v||"normal",this.radius=o||8;var x=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=x,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.d=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Int16Array(x),this.middle=Math.round(x/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function En(n,s,o,u,m,v,x){for(var E=0;E<s;E++){for(var I=0;I<o;I++)u[I]=n[I*s+E];for(Mn(u,m,v,x,o),I=0;I<o;I++)n[I*s+E]=m[I]}for(I=0;I<o;I++){for(E=0;E<s;E++)u[E]=n[I*s+E];for(Mn(u,m,v,x,s),E=0;E<s;E++)n[I*s+E]=Math.sqrt(m[E])}}function Mn(n,s,o,u,m){o[0]=0,u[0]=-Hr,u[1]=+Hr;for(var v=1,x=0;v<m;v++){for(var E=(n[v]+v*v-(n[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);E<=u[x];)x--,E=(n[v]+v*v-(n[o[x]]+o[x]*o[x]))/(2*v-2*o[x]);o[++x]=v,u[x]=E,u[x+1]=+Hr}for(v=0,x=0;v<m;v++){for(;u[x+1]<v;)x++;s[v]=(v-o[x])*(v-o[x])+n[o[x]]}}hi.prototype.draw=function(n){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(n,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),u=0;u<this.size*this.size;u++){var m=s.data[4*u+3]/255;this.gridOuter[u]=m===1?0:m===0?Hr:Math.pow(Math.max(0,.5-m),2),this.gridInner[u]=m===1?Hr:m===0?0:Math.pow(Math.max(0,m-.5),2)}for(En(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),En(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),u=0;u<this.size*this.size;u++)o[u]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[u]-this.gridInner[u])/this.radius+this.cutoff))));return o},pi.default=un;var ni=function(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}};ni.prototype.setURL=function(n){this.url=n},ni.prototype.getGlyphs=function(n,s){var o=this,u=[];for(var m in n)for(var v=0,x=n[m];v<x.length;v+=1)u.push({stack:m,id:x[v]});h.asyncAll(u,function(E,I){var M=E.stack,F=E.id,U=o.entries[M];U||(U=o.entries[M]={glyphs:{},requests:{},ranges:{}});var V=U.glyphs[F];if(V===void 0){if(V=o._tinySDF(U,M,F))return U.glyphs[F]=V,void I(null,{stack:M,id:F,glyph:V});var X=Math.floor(F/256);if(256*X>65535)I(new Error("glyphs > 65535 not supported"));else if(U.ranges[X])I(null,{stack:M,id:F,glyph:V});else{var K=U.requests[X];K||(K=U.requests[X]=[],ni.loadGlyphRange(M,X,o.url,o.requestManager,function(te,H){if(H){for(var ee in H)o._doesCharSupportLocalGlyph(+ee)||(U.glyphs[+ee]=H[+ee]);U.ranges[X]=!0}for(var oe=0,fe=K;oe<fe.length;oe+=1)(0,fe[oe])(te,H);delete U.requests[X]})),K.push(function(te,H){te?I(te):H&&I(null,{stack:M,id:F,glyph:H[F]||null})})}}else I(null,{stack:M,id:F,glyph:V})},function(E,I){if(E)s(E);else if(I){for(var M={},F=0,U=I;F<U.length;F+=1){var V=U[F],X=V.stack,K=V.id,te=V.glyph;(M[X]||(M[X]={}))[K]=te&&{id:te.id,bitmap:te.bitmap.clone(),metrics:te.metrics}}s(null,M)}})},ni.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(h.isChar["CJK Unified Ideographs"](n)||h.isChar["Hangul Syllables"](n)||h.isChar.Hiragana(n)||h.isChar.Katakana(n))},ni.prototype._tinySDF=function(n,s,o){var u=this.localIdeographFontFamily;if(u&&this._doesCharSupportLocalGlyph(o)){var m=n.tinySDF;if(!m){var v="400";/bold/i.test(s)?v="900":/medium/i.test(s)?v="500":/light/i.test(s)&&(v="200"),m=n.tinySDF=new ni.TinySDF(24,3,8,.25,u,v)}return{id:o,bitmap:new h.AlphaImage({width:30,height:30},m.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ni.loadGlyphRange=function(n,s,o,u,m){var v=256*s,x=v+255,E=u.transformRequest(u.normalizeGlyphsURL(o).replace("{fontstack}",n).replace("{range}",v+"-"+x),h.ResourceType.Glyphs);h.getArrayBuffer(E,function(I,M){if(I)m(I);else if(M){for(var F={},U=0,V=h.parseGlyphPBF(M);U<V.length;U+=1){var X=V[U];F[X.id]=X}m(null,F)}})},ni.TinySDF=pi;var Qr=function(){this.specification=h.styleSpec.light.position};Qr.prototype.possiblyEvaluate=function(n,s){return h.sphericalToCartesian(n.expression.evaluate(s))},Qr.prototype.interpolate=function(n,s,o){return{x:h.number(n.x,s.x,o),y:h.number(n.y,s.y,o),z:h.number(n.z,s.z,o)}};var Ii=new h.Properties({anchor:new h.DataConstantProperty(h.styleSpec.light.anchor),position:new Qr,color:new h.DataConstantProperty(h.styleSpec.light.color),intensity:new h.DataConstantProperty(h.styleSpec.light.intensity)}),Kn=function(n){function s(o){n.call(this),this._transitionable=new h.Transitionable(Ii),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(o,u){if(u===void 0&&(u={}),!this._validate(h.validateLight,o,u))for(var m in o){var v=o[m];h.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}},s.prototype.updateTransitions=function(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(o){this.properties=this._transitioning.possiblyEvaluate(o)},s.prototype._validate=function(o,u,m){return(!m||m.validate!==!1)&&h.emitValidationErrors(this,o.call(h.validateStyle,h.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:h.styleSpec})))},s}(h.Evented),dr=function(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};dr.prototype.getDash=function(n,s){var o=n.join(",")+String(s);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(n,s)),this.dashEntry[o]},dr.prototype.getDashRanges=function(n,s,o){var u=[],m=n.length%2==1?-n[n.length-1]*o:0,v=n[0]*o,x=!0;u.push({left:m,right:v,isDash:x,zeroLength:n[0]===0});for(var E=n[0],I=1;I<n.length;I++){var M=n[I];u.push({left:m=E*o,right:v=(E+=M)*o,isDash:x=!x,zeroLength:M===0})}return u},dr.prototype.addRoundDash=function(n,s,o){for(var u=s/2,m=-o;m<=o;m++)for(var v=this.width*(this.nextRow+o+m),x=0,E=n[x],I=0;I<this.width;I++){I/E.right>1&&(E=n[++x]);var M=Math.abs(I-E.left),F=Math.abs(I-E.right),U=Math.min(M,F),V=void 0,X=m/o*(u+1);if(E.isDash){var K=u-Math.abs(X);V=Math.sqrt(U*U+K*K)}else V=u-Math.sqrt(U*U+X*X);this.data[v+I]=Math.max(0,Math.min(255,V+128))}},dr.prototype.addRegularDash=function(n){for(var s=n.length-1;s>=0;--s){var o=n[s],u=n[s+1];o.zeroLength?n.splice(s,1):u&&u.isDash===o.isDash&&(u.left=o.left,n.splice(s,1))}var m=n[0],v=n[n.length-1];m.isDash===v.isDash&&(m.left=v.left-this.width,v.right=m.right+this.width);for(var x=this.width*this.nextRow,E=0,I=n[E],M=0;M<this.width;M++){M/I.right>1&&(I=n[++E]);var F=Math.abs(M-I.left),U=Math.abs(M-I.right),V=Math.min(F,U);this.data[x+M]=Math.max(0,Math.min(255,(I.isDash?V:-V)+128))}},dr.prototype.addDash=function(n,s){var o=s?7:0,u=2*o+1;if(this.nextRow+u>this.height)return h.warnOnce("LineAtlas out of space"),null;for(var m=0,v=0;v<n.length;v++)m+=n[v];if(m!==0){var x=this.width/m,E=this.getDashRanges(n,this.width,x);s?this.addRoundDash(E,x,o):this.addRegularDash(E)}var I={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:m};return this.nextRow+=u,this.dirty=!0,I},dr.prototype.bind=function(n){var s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var oi=function n(s,o){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=h.uniqueId();for(var u=this.workerPool.acquire(this.id),m=0;m<u.length;m++){var v=new n.Actor(u[m],o,this.id);v.name="Worker "+m,this.actors.push(v)}};function $n(n,s,o){var u=function(m,v){if(m)return o(m);if(v){var x=h.pick(h.extend(v,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(x.vectorLayers=v.vector_layers,x.vectorLayerIds=x.vectorLayers.map(function(E){return E.id})),x.tiles=s.canonicalizeTileset(x,n.url),o(null,x)}};return n.url?h.getJSON(s.transformRequest(s.normalizeSourceURL(n.url),h.ResourceType.Source),u):h.browser.frame(function(){return u(null,n)})}oi.prototype.broadcast=function(n,s,o){h.asyncAll(this.actors,function(u,m){u.send(n,s,m)},o=o||function(){})},oi.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},oi.prototype.remove=function(){this.actors.forEach(function(n){n.remove()}),this.actors=[],this.workerPool.release(this.id)},oi.Actor=h.Actor;var ie=function(n,s,o){this.bounds=h.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=o||24};ie.prototype.validateBounds=function(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]},ie.prototype.contains=function(n){var s=Math.pow(2,n.z),o=Math.floor(h.mercatorXfromLng(this.bounds.getWest())*s),u=Math.floor(h.mercatorYfromLat(this.bounds.getNorth())*s),m=Math.ceil(h.mercatorXfromLng(this.bounds.getEast())*s),v=Math.ceil(h.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=o&&n.x<m&&n.y>=u&&n.y<v};var pe=function(n){function s(o,u,m,v){if(n.call(this),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.extend(this,h.pick(u,["url","scheme","tileSize","promoteId"])),this._options=h.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$n(this._options,this.map._requestManager,function(u,m){o._tileJSONRequest=null,o._loaded=!0,u?o.fire(new h.ErrorEvent(u)):m&&(h.extend(o,m),m.bounds&&(o.tileBounds=new ie(m.bounds,o.minzoom,o.maxzoom)),h.postTurnstileEvent(m.tiles,o.map._requestManager._customAccessToken),h.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setSourceProperty=function(o){this._tileJSONRequest&&this._tileJSONRequest.cancel(),o(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(o){var u=this;return this.setSourceProperty(function(){u._options.tiles=o}),this},s.prototype.setUrl=function(o){var u=this;return this.setSourceProperty(function(){u.url=o,u._options.url=o}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return h.extend({},this._options)},s.prototype.loadTile=function(o,u){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(m,h.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:h.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,I){return delete o.request,o.aborted?u(null):E&&E.status!==404?u(E):(I&&I.resourceTiming&&(o.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&o.setExpiryData(I),o.loadVectorData(I,this.map.painter),h.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired"?o.state==="loading"?o.reloadCallback=u:o.request=o.actor.send("reloadTile",v,x.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",v,x.bind(this)))},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(h.Evented),Oe=function(n){function s(o,u,m,v){n.call(this),this.id=o,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.extend({type:"raster"},u),h.extend(this,h.pick(u,["url","scheme","tileSize"]))}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$n(this._options,this.map._requestManager,function(u,m){o._tileJSONRequest=null,o._loaded=!0,u?o.fire(new h.ErrorEvent(u)):m&&(h.extend(o,m),m.bounds&&(o.tileBounds=new ie(m.bounds,o.minzoom,o.maxzoom)),h.postTurnstileEvent(m.tiles),h.postMapLoadEvent(m.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return h.extend({},this._options)},s.prototype.hasTile=function(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)},s.prototype.loadTile=function(o,u){var m=this,v=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=h.getImage(this.map._requestManager.transformRequest(v,h.ResourceType.Tile),function(x,E){if(delete o.request,o.aborted)o.state="unloaded",u(null);else if(x)o.state="errored",u(x);else if(E){m.map._refreshExpiredTiles&&o.setExpiryData(E),delete E.cacheControl,delete E.expires;var I=m.map.painter.context,M=I.gl;o.texture=m.map.painter.getTileTexture(E.width),o.texture?o.texture.update(E,{useMipmap:!0}):(o.texture=new h.Texture(I,E,M.RGBA,{useMipmap:!0}),o.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),o.state="loaded",h.cacheEntryPossiblyAdded(m.dispatcher),u(null)}})},s.prototype.abortTile=function(o,u){o.request&&(o.request.cancel(),delete o.request),u()},s.prototype.unloadTile=function(o,u){o.texture&&this.map.painter.saveTileTexture(o.texture),u()},s.prototype.hasTransition=function(){return!1},s}(h.Evented),We=function(n){function s(o,u,m,v){n.call(this,o,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=h.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(o,u){var m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function v(x,E){x&&(o.state="errored",u(x)),E&&(o.dem=E,o.needsHillshadePrepare=!0,o.state="loaded",u(null))}o.request=h.getImage(this.map._requestManager.transformRequest(m,h.ResourceType.Tile),function(x,E){if(delete o.request,o.aborted)o.state="unloaded",u(null);else if(x)o.state="errored",u(x);else if(E){this.map._refreshExpiredTiles&&o.setExpiryData(E),delete E.cacheControl,delete E.expires;var I=h.window.ImageBitmap&&E instanceof h.window.ImageBitmap&&h.offscreenCanvasSupported()?E:h.browser.getImageData(E,1),M={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:I,encoding:this.encoding};o.actor&&o.state!=="expired"||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",M,v.bind(this)))}}.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},s.prototype._getNeighboringTiles=function(o){var u=o.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,x=u.x===0?o.wrap-1:o.wrap,E=(u.x+1+m)%m,I=u.x+1===m?o.wrap+1:o.wrap,M={};return M[new h.OverscaledTileID(o.overscaledZ,x,u.z,v,u.y).key]={backfilled:!1},M[new h.OverscaledTileID(o.overscaledZ,I,u.z,E,u.y).key]={backfilled:!1},u.y>0&&(M[new h.OverscaledTileID(o.overscaledZ,x,u.z,v,u.y-1).key]={backfilled:!1},M[new h.OverscaledTileID(o.overscaledZ,o.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new h.OverscaledTileID(o.overscaledZ,I,u.z,E,u.y-1).key]={backfilled:!1}),u.y+1<m&&(M[new h.OverscaledTileID(o.overscaledZ,x,u.z,v,u.y+1).key]={backfilled:!1},M[new h.OverscaledTileID(o.overscaledZ,o.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new h.OverscaledTileID(o.overscaledZ,I,u.z,E,u.y+1).key]={backfilled:!1}),M},s.prototype.unloadTile=function(o){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&o.actor.send("removeDEMTile",{uid:o.uid,source:this.id})},s}(Oe),qe=function(n){function s(o,u,m,v){n.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(v),this._data=u.data,this._options=h.extend({},u),this._collectResourceTiming=u.collectResourceTiming,this._resourceTiming=[],u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;var x=h.EXTENT/this.tileSize;this.workerOptions=h.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*x,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*x,extent:h.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?Math.min(u.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:h.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this.fire(new h.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(u){if(u)o.fire(new h.ErrorEvent(u));else{var m={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(m.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new h.Event("data",m))}})},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setData=function(o){var u=this;return this._data=o,this.fire(new h.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(m){if(m)u.fire(new h.ErrorEvent(m));else{var v={dataType:"source",sourceDataType:"content"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(v.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new h.Event("data",v))}}),this},s.prototype.getClusterExpansionZoom=function(o,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:o,source:this.id},u),this},s.prototype.getClusterChildren=function(o,u){return this.actor.send("geojson.getClusterChildren",{clusterId:o,source:this.id},u),this},s.prototype.getClusterLeaves=function(o,u,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:o,limit:u,offset:m},v),this},s.prototype._updateWorkerData=function(o){var u=this;this._loaded=!1;var m=h.extend({},this.workerOptions),v=this._data;typeof v=="string"?(m.request=this.map._requestManager.transformRequest(h.browser.resolveURL(v),h.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(v),this.actor.send(this.type+".loadData",m,function(x,E){u._removed||E&&E.abandoned||(u._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[u.id]&&(u._resourceTiming=E.resourceTiming[u.id].slice(0)),u.actor.send(u.type+".coalesce",{source:m.source},null),o(x))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(o,u){var m=this,v=o.actor?"reloadTile":"loadTile";o.actor=this.actor,o.request=this.actor.send(v,{type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:h.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(x,E){return delete o.request,o.unloadVectorData(),o.aborted?u(null):x?u(x):(o.loadVectorData(E,m.map.painter,v==="reloadTile"),u(null))})},s.prototype.abortTile=function(o){o.request&&(o.request.cancel(),delete o.request),o.aborted=!0},s.prototype.unloadTile=function(o){o.unloadVectorData(),this.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return h.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(h.Evented),Je=h.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),we=function(n){function s(o,u,m,v){n.call(this),this.id=o,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(o,u){var m=this;this._loaded=!1,this.fire(new h.Event("dataloading",{dataType:"source"})),this.url=this.options.url,h.getImage(this.map._requestManager.transformRequest(this.url,h.ResourceType.Image),function(v,x){m._loaded=!0,v?m.fire(new h.ErrorEvent(v)):x&&(m.image=x,o&&(m.coordinates=o),u&&u(),m._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(o){var u=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){u.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(o){this.map=o,this.load()},s.prototype.setCoordinates=function(o){var u=this;this.coordinates=o;var m=o.map(h.MercatorCoordinate.fromLngLat);this.tileID=function(x){for(var E=1/0,I=1/0,M=-1/0,F=-1/0,U=0,V=x;U<V.length;U+=1){var X=V[U];E=Math.min(E,X.x),I=Math.min(I,X.y),M=Math.max(M,X.x),F=Math.max(F,X.y)}var K=Math.max(M-E,F-I),te=Math.max(0,Math.floor(-Math.log(K)/Math.LN2)),H=Math.pow(2,te);return new h.CanonicalTileID(te,Math.floor((E+M)/2*H),Math.floor((I+F)/2*H))}(m),this.minzoom=this.maxzoom=this.tileID.z;var v=m.map(function(x){return u.tileID.getTilePoint(x)._round()});return this._boundsArray=new h.StructArrayLayout4i8,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,h.EXTENT,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,h.EXTENT),this._boundsArray.emplaceBack(v[2].x,v[2].y,h.EXTENT,h.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var o=this.map.painter.context,u=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new h.Texture(o,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.loadTile=function(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(h.Evented),Pe=function(n){function s(o,u,m,v){n.call(this,o,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){var o=this;this._loaded=!1;var u=this.options;this.urls=[];for(var m=0,v=u.urls;m<v.length;m+=1)this.urls.push(this.map._requestManager.transformRequest(v[m],h.ResourceType.Source).url);h.getVideo(this.urls,function(x,E){o._loaded=!0,x?o.fire(new h.ErrorEvent(x)):E&&(o.video=E,o.video.loop=!0,o.video.setAttribute("playsinline",""),o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(o){if(this.video){var u=this.video.seekable;o<u.start(0)||o>u.end(0)?this.fire(new h.ErrorEvent(new h.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+u.start(0)+" and "+u.end(0)+"-second mark."))):this.video.currentTime=o}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var o=this.map.painter.context,u=o.gl;for(var m in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new h.Texture(o,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(we),Le=function(n){function s(o,u,m,v){n.call(this,o,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(function(x){return!Array.isArray(x)||x.length!==2||x.some(function(E){return typeof E!="number"})})||this.fire(new h.ErrorEvent(new h.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.ErrorEvent(new h.ValidationError("sources."+o,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new h.ErrorEvent(new h.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof h.window.HTMLCanvasElement||this.fire(new h.ErrorEvent(new h.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.ErrorEvent(new h.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof h.window.HTMLCanvasElement?this.options.canvas:h.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var u=this.map.painter.context,m=u.gl;for(var v in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=h.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new h.Texture(u,this.canvas,m.RGBA,{premultiply:!0}),this.tiles){var x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var o=0,u=[this.canvas.width,this.canvas.height];o<u.length;o+=1){var m=u[o];if(isNaN(m)||m<=0)return!0}return!1},s}(we),Te={vector:pe,raster:Oe,"raster-dem":We,geojson:qe,video:Pe,image:we,canvas:Le};function Ye(n,s){var o=h.identity([]);return h.translate(o,o,[1,1,0]),h.scale(o,o,[.5*n.width,.5*n.height,1]),h.multiply(o,o,n.calculatePosMatrix(s.toUnwrapped()))}function Ze(n,s,o,u,m,v){var x=function(te,H,ee){if(te)for(var oe=0,fe=te;oe<fe.length;oe+=1){var Ee=H[fe[oe]];if(Ee&&Ee.source===ee&&Ee.type==="fill-extrusion")return!0}else for(var xe in H){var Ce=H[xe];if(Ce.source===ee&&Ce.type==="fill-extrusion")return!0}return!1}(m&&m.layers,s,n.id),E=v.maxPitchScaleFactor(),I=n.tilesIn(u,E,x);I.sort(ct);for(var M=[],F=0,U=I;F<U.length;F+=1){var V=U[F];M.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(s,o,n._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,m,v,E,Ye(n.transform,V.tileID))})}var X=function(te){for(var H={},ee={},oe=0,fe=te;oe<fe.length;oe+=1){var Ee=fe[oe],xe=Ee.queryResults,Ce=Ee.wrappedTileID,Be=ee[Ce]=ee[Ce]||{};for(var $e in xe)for(var Ke=xe[$e],ut=Be[$e]=Be[$e]||{},wt=H[$e]=H[$e]||[],Ct=0,Tt=Ke;Ct<Tt.length;Ct+=1){var ir=Tt[Ct];ut[ir.featureIndex]||(ut[ir.featureIndex]=!0,wt.push(ir))}}return H}(M);for(var K in X)X[K].forEach(function(te){var H=te.feature,ee=n.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=ee});return X}function ct(n,s){var o=n.tileID,u=s.tileID;return o.overscaledZ-u.overscaledZ||o.canonical.y-u.canonical.y||o.wrap-u.wrap||o.canonical.x-u.canonical.x}var it=function(n,s){this.max=n,this.onRemove=s,this.reset()};it.prototype.reset=function(){for(var n in this.data)for(var s=0,o=this.data[n];s<o.length;s+=1){var u=o[s];u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value)}return this.data={},this.order=[],this},it.prototype.add=function(n,s,o){var u=this,m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);var v={value:s,timeout:void 0};if(o!==void 0&&(v.timeout=setTimeout(function(){u.remove(n,v)},o)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},it.prototype.has=function(n){return n.wrapped().key in this.data},it.prototype.getAndRemove=function(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null},it.prototype._getAndRemoveByKey=function(n){var s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value},it.prototype.getByKey=function(n){var s=this.data[n];return s?s[0].value:null},it.prototype.get=function(n){return this.has(n)?this.data[n.wrapped().key][0].value:null},it.prototype.remove=function(n,s){if(!this.has(n))return this;var o=n.wrapped().key,u=s===void 0?0:this.data[o].indexOf(s),m=this.data[o][u];return this.data[o].splice(u,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this},it.prototype.setMaxSize=function(n){for(this.max=n;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},it.prototype.filter=function(n){var s=[];for(var o in this.data)for(var u=0,m=this.data[o];u<m.length;u+=1){var v=m[u];n(v.value)||s.push(v)}for(var x=0,E=s;x<E.length;x+=1){var I=E[x];this.remove(I.value.tileID,I)}};var At=function(n,s,o){this.context=n;var u=n.gl;this.buffer=u.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};At.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},At.prototype.updateData=function(n){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)},At.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Vt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},jt=function(n,s,o,u){this.length=s.length,this.attributes=o,this.itemSize=s.bytesPerElement,this.dynamicDraw=u,this.context=n;var m=n.gl;this.buffer=m.createBuffer(),n.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};jt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},jt.prototype.updateData=function(n){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)},jt.prototype.enableAttributes=function(n,s){for(var o=0;o<this.attributes.length;o++){var u=s.attributes[this.attributes[o].name];u!==void 0&&n.enableVertexAttribArray(u)}},jt.prototype.setVertexAttribPointers=function(n,s,o){for(var u=0;u<this.attributes.length;u++){var m=this.attributes[u],v=s.attributes[m.name];v!==void 0&&n.vertexAttribPointer(v,m.components,n[Vt[m.type]],!1,this.itemSize,m.offset+this.itemSize*(o||0))}},jt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dt=function(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};dt.prototype.get=function(){return this.current},dt.prototype.set=function(n){},dt.prototype.getDefault=function(){return this.default},dt.prototype.setDefault=function(){this.set(this.default)};var kr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return h.Color.transparent},s.prototype.set=function(o){var u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(dt),Pr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)},s}(dt),ai=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)},s}(dt),Sn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(dt),Ai=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)},s}(dt),lr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)},s}(dt),rr=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(o){var u=this.current;(o.func!==u.func||o.ref!==u.ref||o.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},s}(dt),fi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},s}(dt),Oi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=o,this.dirty=!1}},s}(dt),di=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},s}(dt),Qi=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=o,this.dirty=!1}},s}(dt),uo=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)},s}(dt),cn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.BLEND):u.disable(u.BLEND),this.current=o,this.dirty=!1}},s}(dt),Rl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[o.ONE,o.ZERO]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},s}(dt),Ol=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return h.Color.transparent},s.prototype.set=function(o){var u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},s}(dt),ks=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)},s}(dt),Ps=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;o?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=o,this.dirty=!1}},s}(dt),Wa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)},s}(dt),Bl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)},s}(dt),Ka=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)},s}(dt),zs=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)},s}(dt),ha=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){var o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]},s.prototype.set=function(o){var u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},s}(dt),Ms=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},s}(dt),Ls=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(dt),Fl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindTexture(u.TEXTURE_2D,o),this.current=o,this.dirty=!1}},s}(dt),Nl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},s}(dt),fa=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){var u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},s}(dt),So=function(n){function s(o){n.call(this,o),this.vao=o.extVertexArrayObject}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)},s}(dt),To=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},s}(dt),$a=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},s}(dt),Ds=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(o){if(o!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},s}(dt),Gr=function(n){function s(o,u){n.call(this,o),this.context=o,this.parent=u}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(dt),z=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},s}(Gr),D=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}},s}(Gr),O=function(n,s,o,u){this.context=n,this.width=s,this.height=o;var m=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new z(n,m),u&&(this.depthAttachment=new D(n,m))};O.prototype.destroy=function(){var n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){var o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}n.deleteFramebuffer(this.framebuffer)};var j=function(n,s,o){this.func=n,this.mask=s,this.range=o};j.ReadOnly=!1,j.ReadWrite=!0,j.disabled=new j(519,j.ReadOnly,[0,1]);var $=function(n,s,o,u,m,v){this.test=n,this.ref=s,this.mask=o,this.fail=u,this.depthFail=m,this.pass=v};$.disabled=new $({func:519,mask:0},0,0,7680,7680,7680);var ne=function(n,s,o){this.blendFunction=n,this.blendColor=s,this.mask=o};ne.disabled=new ne(ne.Replace=[1,0],h.Color.transparent,[!1,!1,!1,!1]),ne.unblended=new ne(ne.Replace,h.Color.transparent,[!0,!0,!0,!0]),ne.alphaBlended=new ne([1,771],h.Color.transparent,[!0,!0,!0,!0]);var se=function(n,s,o){this.enable=n,this.mode=s,this.frontFace=o};se.disabled=new se(!1,1029,2305),se.backCCW=new se(!0,1029,2305);var N=function(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new kr(this),this.clearDepth=new Pr(this),this.clearStencil=new ai(this),this.colorMask=new Sn(this),this.depthMask=new Ai(this),this.stencilMask=new lr(this),this.stencilFunc=new rr(this),this.stencilOp=new fi(this),this.stencilTest=new Oi(this),this.depthRange=new di(this),this.depthTest=new Qi(this),this.depthFunc=new uo(this),this.blend=new cn(this),this.blendFunc=new Rl(this),this.blendColor=new Ol(this),this.blendEquation=new ks(this),this.cullFace=new Ps(this),this.cullFaceSide=new Wa(this),this.frontFace=new Bl(this),this.program=new Ka(this),this.activeTexture=new zs(this),this.viewport=new ha(this),this.bindFramebuffer=new Ms(this),this.bindRenderbuffer=new Ls(this),this.bindTexture=new Fl(this),this.bindVertexBuffer=new Nl(this),this.bindElementBuffer=new fa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new So(this),this.pixelStoreUnpack=new To(this),this.pixelStoreUnpackPremultiplyAlpha=new $a(this),this.pixelStoreUnpackFlipY=new Ds(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)};N.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},N.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},N.prototype.createIndexBuffer=function(n,s){return new At(this,n,s)},N.prototype.createVertexBuffer=function(n,s,o){return new jt(this,n,s,o)},N.prototype.createRenderbuffer=function(n,s,o){var u=this.gl,m=u.createRenderbuffer();return this.bindRenderbuffer.set(m),u.renderbufferStorage(u.RENDERBUFFER,n,s,o),this.bindRenderbuffer.set(null),m},N.prototype.createFramebuffer=function(n,s,o){return new O(this,n,s,o)},N.prototype.clear=function(n){var s=n.color,o=n.depth,u=this.gl,m=0;s&&(m|=u.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),u.clear(m)},N.prototype.setCullFace=function(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))},N.prototype.setDepthMode=function(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)},N.prototype.setStencilMode=function(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)},N.prototype.setColorMode=function(n){h.deepEqual(n.blendFunction,ne.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},N.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var J=function(n){function s(o,u,m){var v=this;n.call(this),this.id=o,this.dispatcher=m,this.on("data",function(x){x.dataType==="source"&&x.sourceDataType==="metadata"&&(v._sourceLoaded=!0),v._sourceLoaded&&!v._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(v.reload(),v.transform&&v.update(v.transform))}),this.on("error",function(){v._sourceErrored=!0}),this._source=function(x,E,I,M){var F=new Te[E.type](x,E,I,M);if(F.id!==x)throw new Error("Expected Source id to be "+x+" instead of "+F.id);return h.bindAll(["load","abort","unload","serialize","prepare"],F),F}(o,u,m,this),this._tiles={},this._cache=new it(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new h.SourceFeatureState}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(o)},s.prototype.onRemove=function(o){this._source&&this._source.onRemove&&this._source.onRemove(o)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var o in this._tiles){var u=this._tiles[o];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(o,u){return this._source.loadTile(o,u)},s.prototype._unloadTile=function(o){if(this._source.unloadTile)return this._source.unloadTile(o,function(){})},s.prototype._abortTile=function(o){if(this._source.abortTile)return this._source.abortTile(o,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(o){for(var u in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var m=this._tiles[u];m.upload(o),m.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return h.values(this._tiles).map(function(o){return o.tileID}).sort(me).map(function(o){return o.key})},s.prototype.getRenderableIds=function(o){var u=this,m=[];for(var v in this._tiles)this._isIdRenderable(v,o)&&m.push(this._tiles[v]);return o?m.sort(function(x,E){var I=x.tileID,M=E.tileID,F=new h.Point(I.canonical.x,I.canonical.y)._rotate(u.transform.angle),U=new h.Point(M.canonical.x,M.canonical.y)._rotate(u.transform.angle);return I.overscaledZ-M.overscaledZ||U.y-F.y||U.x-F.x}).map(function(x){return x.tileID.key}):m.map(function(x){return x.tileID}).sort(me).map(function(x){return x.key})},s.prototype.hasRenderableParent=function(o){var u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)},s.prototype._isIdRenderable=function(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var o in this._cache.reset(),this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(o,"reloading")},s.prototype._reloadTile=function(o,u){var m=this._tiles[o];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,o,u)))},s.prototype._tileLoaded=function(o,u,m,v){if(v)return o.state="errored",void(v.status!==404?this._source.fire(new h.ErrorEvent(v,{tile:o})):this.update(this.transform));o.timeAdded=h.browser.now(),m==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new h.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},s.prototype._backfillDEM=function(o){for(var u=this.getRenderableIds(),m=0;m<u.length;m++){var v=u[m];if(o.neighboringTiles&&o.neighboringTiles[v]){var x=this.getTileByID(v);E(o,x),E(x,o)}}function E(I,M){I.needsHillshadePrepare=!0;var F=M.tileID.canonical.x-I.tileID.canonical.x,U=M.tileID.canonical.y-I.tileID.canonical.y,V=Math.pow(2,I.tileID.canonical.z),X=M.tileID.key;F===0&&U===0||Math.abs(U)>1||(Math.abs(F)>1&&(Math.abs(F+V)===1?F+=V:Math.abs(F-V)===1&&(F-=V)),M.dem&&I.dem&&(I.dem.backfillBorder(M.dem,F,U),I.neighboringTiles&&I.neighboringTiles[X]&&(I.neighboringTiles[X].backfilled=!0)))}},s.prototype.getTile=function(o){return this.getTileByID(o.key)},s.prototype.getTileByID=function(o){return this._tiles[o]},s.prototype._retainLoadedChildren=function(o,u,m,v){for(var x in this._tiles){var E=this._tiles[x];if(!(v[x]||!E.hasData()||E.tileID.overscaledZ<=u||E.tileID.overscaledZ>m)){for(var I=E.tileID;E&&E.tileID.overscaledZ>u+1;){var M=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[M.key])&&E.hasData()&&(I=M)}for(var F=I;F.overscaledZ>u;)if(o[(F=F.scaledTo(F.overscaledZ-1)).key]){v[I.key]=I;break}}}},s.prototype.findLoadedParent=function(o,u){if(o.key in this._loadedParentTiles){var m=this._loadedParentTiles[o.key];return m&&m.tileID.overscaledZ>=u?m:null}for(var v=o.overscaledZ-1;v>=u;v--){var x=o.scaledTo(v),E=this._getLoadedTile(x);if(E)return E}},s.prototype._getLoadedTile=function(o){var u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(o.wrapped().key)},s.prototype.updateCacheSize=function(o){var u=Math.ceil(o.width/this._source.tileSize)+1,m=Math.ceil(o.height/this._source.tileSize)+1,v=Math.floor(u*m*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)},s.prototype.handleWrapJump=function(o){var u=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,u){var m={};for(var v in this._tiles){var x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),m[x.tileID.key]=x}for(var E in this._tiles=m,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(o){var u=this;if(this.transform=o,this._sourceLoaded&&!this._paused){var m;this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?m=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Be){return new h.OverscaledTileID(Be.canonical.z,Be.wrap,Be.canonical.z,Be.canonical.x,Be.canonical.y)}):(m=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(m=m.filter(function(Be){return u._source.hasTile(Be)}))):m=[];var v=o.coveringZoomLevel(this._source),x=Math.max(v-s.maxOverzooming,this._source.minzoom),E=Math.max(v+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(m,v);if(Ne(this._source.type)){for(var M={},F={},U=0,V=Object.keys(I);U<V.length;U+=1){var X=V[U],K=I[X],te=this._tiles[X];if(te&&!(te.fadeEndTime&&te.fadeEndTime<=h.browser.now())){var H=this.findLoadedParent(K,x);H&&(this._addTile(H.tileID),M[H.tileID.key]=H.tileID),F[X]=K}}for(var ee in this._retainLoadedChildren(F,v,E,I),M)I[ee]||(this._coveredTiles[ee]=!0,I[ee]=M[ee])}for(var oe in I)this._tiles[oe].clearFadeHold();for(var fe=0,Ee=h.keysDifference(this._tiles,I);fe<Ee.length;fe+=1){var xe=Ee[fe],Ce=this._tiles[xe];Ce.hasSymbolBuckets&&!Ce.holdingForFade()?Ce.setHoldDuration(this.map._fadeDuration):Ce.hasSymbolBuckets&&!Ce.symbolFadeFinished()||this._removeTile(xe)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)},s.prototype._updateRetainedTiles=function(o,u){for(var m={},v={},x=Math.max(u-s.maxOverzooming,this._source.minzoom),E=Math.max(u+s.maxUnderzooming,this._source.minzoom),I={},M=0,F=o;M<F.length;M+=1){var U=F[M],V=this._addTile(U);m[U.key]=U,V.hasData()||u<this._source.maxzoom&&(I[U.key]=U)}this._retainLoadedChildren(I,u,E,m);for(var X=0,K=o;X<K.length;X+=1){var te=K[X],H=this._tiles[te.key];if(!H.hasData()){if(u+1>this._source.maxzoom){var ee=te.children(this._source.maxzoom)[0],oe=this.getTile(ee);if(oe&&oe.hasData()){m[ee.key]=ee;continue}}else{var fe=te.children(this._source.maxzoom);if(m[fe[0].key]&&m[fe[1].key]&&m[fe[2].key]&&m[fe[3].key])continue}for(var Ee=H.wasRequested(),xe=te.overscaledZ-1;xe>=x;--xe){var Ce=te.scaledTo(xe);if(v[Ce.key]||(v[Ce.key]=!0,!(H=this.getTile(Ce))&&Ee&&(H=this._addTile(Ce)),H&&(m[Ce.key]=Ce,Ee=H.wasRequested(),H.hasData())))break}}}return m},s.prototype._updateLoadedParentTileCache=function(){for(var o in this._loadedParentTiles={},this._tiles){for(var u=[],m=void 0,v=this._tiles[o].tileID;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}u.push(v.key);var x=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(x))break;v=x}for(var E=0,I=u;E<I.length;E+=1)this._loadedParentTiles[I[E]]=m}},s.prototype._addTile=function(o){var u=this._tiles[o.key];if(u)return u;(u=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));var m=!!u;return m||(u=new h.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,o.key,u.state))),u?(u.uses++,this._tiles[o.key]=u,m||this._source.fire(new h.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null},s.prototype._setTileReloadTimer=function(o,u){var m=this;o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);var v=u.getExpiryTimeout();v&&(this._timers[o]=setTimeout(function(){m._reloadTile(o,"expired"),delete m._timers[o]},v))},s.prototype._removeTile=function(o){var u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))},s.prototype.clearTiles=function(){for(var o in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(o);this._cache.reset()},s.prototype.tilesIn=function(o,u,m){var v=this,x=[],E=this.transform;if(!E)return x;for(var I=m?E.getCameraQueryGeometry(o):o,M=o.map(function(xe){return E.pointCoordinate(xe)}),F=I.map(function(xe){return E.pointCoordinate(xe)}),U=this.getIds(),V=1/0,X=1/0,K=-1/0,te=-1/0,H=0,ee=F;H<ee.length;H+=1){var oe=ee[H];V=Math.min(V,oe.x),X=Math.min(X,oe.y),K=Math.max(K,oe.x),te=Math.max(te,oe.y)}for(var fe=function(xe){var Ce=v._tiles[U[xe]];if(!Ce.holdingForFade()){var Be=Ce.tileID,$e=Math.pow(2,E.zoom-Ce.tileID.overscaledZ),Ke=u*Ce.queryPadding*h.EXTENT/Ce.tileSize/$e,ut=[Be.getTilePoint(new h.MercatorCoordinate(V,X)),Be.getTilePoint(new h.MercatorCoordinate(K,te))];if(ut[0].x-Ke<h.EXTENT&&ut[0].y-Ke<h.EXTENT&&ut[1].x+Ke>=0&&ut[1].y+Ke>=0){var wt=M.map(function(Tt){return Be.getTilePoint(Tt)}),Ct=F.map(function(Tt){return Be.getTilePoint(Tt)});x.push({tile:Ce,tileID:Be,queryGeometry:wt,cameraQueryGeometry:Ct,scale:$e})}}},Ee=0;Ee<U.length;Ee++)fe(Ee);return x},s.prototype.getVisibleCoordinates=function(o){for(var u=this,m=this.getRenderableIds(o).map(function(I){return u._tiles[I].tileID}),v=0,x=m;v<x.length;v+=1){var E=x[v];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return m},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ne(this._source.type))for(var o in this._tiles){var u=this._tiles[o];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=h.browser.now())return!0}return!1},s.prototype.setFeatureState=function(o,u,m){this._state.updateState(o=o||"_geojsonTileLayer",u,m)},s.prototype.removeFeatureState=function(o,u,m){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,m)},s.prototype.getFeatureState=function(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)},s.prototype.setDependencies=function(o,u,m){var v=this._tiles[o];v&&v.setDependencies(u,m)},s.prototype.reloadTilesForDependencies=function(o,u){for(var m in this._tiles)this._tiles[m].hasDependency(o,u)&&this._reloadTile(m,"reloading");this._cache.filter(function(v){return!v.hasDependency(o,u)})},s}(h.Evented);function me(n,s){var o=Math.abs(2*n.wrap)-+(n.wrap<0),u=Math.abs(2*s.wrap)-+(s.wrap<0);return n.overscaledZ-s.overscaledZ||u-o||s.canonical.y-n.canonical.y||s.canonical.x-n.canonical.x}function Ne(n){return n==="raster"||n==="image"||n==="video"}function He(){return new h.window.Worker(ou.workerUrl)}J.maxOverzooming=10,J.maxUnderzooming=3;var Ie="mapboxgl_preloaded_worker_pool",Ue=function(){this.active={}};Ue.prototype.acquire=function(n){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new He);return this.active[n]=!0,this.workers.slice()},Ue.prototype.release=function(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ue.prototype.isPreloaded=function(){return!!this.active[Ie]},Ue.prototype.numActive=function(){return Object.keys(this.active).length};var gt,ht=Math.floor(h.browser.hardwareConcurrency/2);function Ae(){return gt||(gt=new Ue),gt}function lt(n,s){var o={};for(var u in n)u!=="ref"&&(o[u]=n[u]);return h.refProperties.forEach(function(m){m in s&&(o[m]=s[m])}),o}function tt(n){n=n.slice();for(var s=Object.create(null),o=0;o<n.length;o++)s[n[o].id]=n[o];for(var u=0;u<n.length;u++)"ref"in n[u]&&(n[u]=lt(n[u],s[n[u].ref]));return n}Ue.workerCount=Math.max(Math.min(ht,6),1);var nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(n,s,o){o.push({command:nt.addSource,args:[n,s[n]]})}function at(n,s,o){s.push({command:nt.removeSource,args:[n]}),o[n]=!0}function Xt(n,s,o,u){at(n,o,u),Ut(n,s,o)}function xr(n,s,o){var u;for(u in n[o])if(n[o].hasOwnProperty(u)&&u!=="data"&&!h.deepEqual(n[o][u],s[o][u]))return!1;for(u in s[o])if(s[o].hasOwnProperty(u)&&u!=="data"&&!h.deepEqual(n[o][u],s[o][u]))return!1;return!0}function Ht(n,s,o,u,m,v){var x;for(x in s=s||{},n=n||{})n.hasOwnProperty(x)&&(h.deepEqual(n[x],s[x])||o.push({command:v,args:[u,x,s[x],m]}));for(x in s)s.hasOwnProperty(x)&&!n.hasOwnProperty(x)&&(h.deepEqual(n[x],s[x])||o.push({command:v,args:[u,x,s[x],m]}))}function ur(n){return n.id}function Yt(n,s){return n[s.id]=s,n}var qi=function(n,s){this.reset(n,s)};qi.prototype.reset=function(n,s){this.points=n||[],this._distances=[0];for(var o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qi.prototype.lerp=function(n){if(this.points.length===1)return this.points[0];n=h.clamp(n,0,1);for(var s=1,o=this._distances[s],u=n*this.paddedLength+this.padding;o<u&&s<this._distances.length;)o=this._distances[++s];var m=s-1,v=this._distances[m],x=o-v,E=x>0?(u-v)/x:0;return this.points[m].mult(1-E).add(this.points[s].mult(E))};var hr=function(n,s,o){var u=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(n/o),this.yCellCount=Math.ceil(s/o);for(var v=0;v<this.xCellCount*this.yCellCount;v++)u.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Wr(n,s,o,u,m){var v=h.create();return s?(h.scale(v,v,[1/m,1/m,1]),o||h.rotateZ(v,v,u.angle)):h.multiply(v,u.labelPlaneMatrix,n),v}function vr(n,s,o,u,m){if(s){var v=h.clone(n);return h.scale(v,v,[m,m,1]),o||h.rotateZ(v,v,-u.angle),v}return u.glCoordMatrix}function $t(n,s){var o=[n.x,n.y,0,1];bi(o,o,s);var u=o[3];return{point:new h.Point(o[0]/u,o[1]/u),signedDistanceFromCamera:u}}function cr(n,s){return .5+n/s*.5}function en(n,s){var o=n[0]/n[3],u=n[1]/n[3];return o>=-s[0]&&o<=s[0]&&u>=-s[1]&&u<=s[1]}function Rs(n,s,o,u,m,v,x,E){var I=u?n.textSizeData:n.iconSizeData,M=h.evaluateSizeForZoom(I,o.transform.zoom),F=[256/o.width*2+1,256/o.height*2+1],U=u?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;U.clear();for(var V=n.lineVertexArray,X=u?n.text.placedSymbolArray:n.icon.placedSymbolArray,K=o.transform.width/o.transform.height,te=!1,H=0;H<X.length;H++){var ee=X.get(H);if(ee.hidden||ee.writingMode===h.WritingMode.vertical&&!te)Zi(ee.numGlyphs,U);else{te=!1;var oe=[ee.anchorX,ee.anchorY,0,1];if(h.transformMat4(oe,oe,s),en(oe,F)){var fe=cr(o.transform.cameraToCenterDistance,oe[3]),Ee=h.evaluateSizeForFeature(I,M,ee),xe=x?Ee/fe:Ee*fe,Ce=new h.Point(ee.anchorX,ee.anchorY),Be=$t(Ce,m).point,$e={},Ke=nc(ee,xe,!1,E,s,m,v,n.glyphOffsetArray,V,U,Be,Ce,$e,K);te=Ke.useVertical,(Ke.notEnoughRoom||te||Ke.needsFlipping&&nc(ee,xe,!0,E,s,m,v,n.glyphOffsetArray,V,U,Be,Ce,$e,K).notEnoughRoom)&&Zi(ee.numGlyphs,U)}else Zi(ee.numGlyphs,U)}}u?n.text.dynamicLayoutVertexBuffer.updateData(U):n.icon.dynamicLayoutVertexBuffer.updateData(U)}function xi(n,s,o,u,m,v,x,E,I,M,F){var U=E.glyphStartIndex+E.numGlyphs,V=E.lineStartIndex,X=E.lineStartIndex+E.lineLength,K=s.getoffsetX(E.glyphStartIndex),te=s.getoffsetX(U-1),H=Kr(n*K,o,u,m,v,x,E.segment,V,X,I,M,F);if(!H)return null;var ee=Kr(n*te,o,u,m,v,x,E.segment,V,X,I,M,F);return ee?{first:H,last:ee}:null}function tn(n,s,o,u){return n===h.WritingMode.horizontal&&Math.abs(o.y-s.y)>Math.abs(o.x-s.x)*u?{useVertical:!0}:(n===h.WritingMode.vertical?s.y<o.y:s.x>o.x)?{needsFlipping:!0}:null}function nc(n,s,o,u,m,v,x,E,I,M,F,U,V,X){var K,te=s/24,H=n.lineOffsetX*te,ee=n.lineOffsetY*te;if(n.numGlyphs>1){var oe=n.glyphStartIndex+n.numGlyphs,fe=n.lineStartIndex,Ee=n.lineStartIndex+n.lineLength,xe=xi(te,E,H,ee,o,F,U,n,I,v,V);if(!xe)return{notEnoughRoom:!0};var Ce=$t(xe.first.point,x).point,Be=$t(xe.last.point,x).point;if(u&&!o){var $e=tn(n.writingMode,Ce,Be,X);if($e)return $e}K=[xe.first];for(var Ke=n.glyphStartIndex+1;Ke<oe-1;Ke++)K.push(Kr(te*E.getoffsetX(Ke),H,ee,o,F,U,n.segment,fe,Ee,I,v,V));K.push(xe.last)}else{if(u&&!o){var ut=$t(U,m).point,wt=n.lineStartIndex+n.segment+1,Ct=new h.Point(I.getx(wt),I.gety(wt)),Tt=$t(Ct,m),ir=Tt.signedDistanceFromCamera>0?Tt.point:Os(U,Ct,ut,1,m),pt=tn(n.writingMode,ut,ir,X);if(pt)return pt}var Lt=Kr(te*E.getoffsetX(n.glyphStartIndex),H,ee,o,F,U,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,I,v,V);if(!Lt)return{notEnoughRoom:!0};K=[Lt]}for(var Ft=0,Mt=K;Ft<Mt.length;Ft+=1){var zt=Mt[Ft];h.addDynamicAttributes(M,zt.point,zt.angle)}return{}}function Os(n,s,o,u,m){var v=$t(n.add(n.sub(s)._unit()),m).point,x=o.sub(v);return o.add(x._mult(u/x.mag()))}function Kr(n,s,o,u,m,v,x,E,I,M,F,U){var V=u?n-s:n+s,X=V>0?1:-1,K=0;u&&(X*=-1,K=Math.PI),X<0&&(K+=Math.PI);for(var te=X>0?E+x:E+x+1,H=m,ee=m,oe=0,fe=0,Ee=Math.abs(V),xe=[];oe+fe<=Ee;){if((te+=X)<E||te>=I)return null;if(ee=H,xe.push(H),(H=U[te])===void 0){var Ce=new h.Point(M.getx(te),M.gety(te)),Be=$t(Ce,F);if(Be.signedDistanceFromCamera>0)H=U[te]=Be.point;else{var $e=te-X;H=Os(oe===0?v:new h.Point(M.getx($e),M.gety($e)),Ce,ee,Ee-oe+1,F)}}oe+=fe,fe=ee.dist(H)}var Ke=(Ee-oe)/fe,ut=H.sub(ee),wt=ut.mult(Ke)._add(ee);wt._add(ut._unit()._perp()._mult(o*X));var Ct=K+Math.atan2(H.y-ee.y,H.x-ee.x);return xe.push(wt),{point:wt,angle:Ct,path:xe}}hr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},hr.prototype.insert=function(n,s,o,u,m){this._forEachCell(s,o,u,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(m)},hr.prototype.insertCircle=function(n,s,o,u){this._forEachCell(s-u,o-u,s+u,o+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(o),this.circles.push(u)},hr.prototype._insertBoxCell=function(n,s,o,u,m,v){this.boxCells[m].push(v)},hr.prototype._insertCircleCell=function(n,s,o,u,m,v){this.circleCells[m].push(v)},hr.prototype._query=function(n,s,o,u,m,v){if(o<0||n>this.width||u<0||s>this.height)return!m&&[];var x=[];if(n<=0&&s<=0&&this.width<=o&&this.height<=u){if(m)return!0;for(var E=0;E<this.boxKeys.length;E++)x.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var I=0;I<this.circleKeys.length;I++){var M=this.circles[3*I],F=this.circles[3*I+1],U=this.circles[3*I+2];x.push({key:this.circleKeys[I],x1:M-U,y1:F-U,x2:M+U,y2:F+U})}return v?x.filter(v):x}return this._forEachCell(n,s,o,u,this._queryCell,x,{hitTest:m,seenUids:{box:{},circle:{}}},v),m?x.length>0:x},hr.prototype._queryCircle=function(n,s,o,u,m){var v=n-o,x=n+o,E=s-o,I=s+o;if(x<0||v>this.width||I<0||E>this.height)return!u&&[];var M=[];return this._forEachCell(v,E,x,I,this._queryCellCircle,M,{hitTest:u,circle:{x:n,y:s,radius:o},seenUids:{box:{},circle:{}}},m),u?M.length>0:M},hr.prototype.query=function(n,s,o,u,m){return this._query(n,s,o,u,!1,m)},hr.prototype.hitTest=function(n,s,o,u,m){return this._query(n,s,o,u,!0,m)},hr.prototype.hitTestCircle=function(n,s,o,u){return this._queryCircle(n,s,o,!0,u)},hr.prototype._queryCell=function(n,s,o,u,m,v,x,E){var I=x.seenUids,M=this.boxCells[m];if(M!==null)for(var F=this.bboxes,U=0,V=M;U<V.length;U+=1){var X=V[U];if(!I.box[X]){I.box[X]=!0;var K=4*X;if(n<=F[K+2]&&s<=F[K+3]&&o>=F[K+0]&&u>=F[K+1]&&(!E||E(this.boxKeys[X]))){if(x.hitTest)return v.push(!0),!0;v.push({key:this.boxKeys[X],x1:F[K],y1:F[K+1],x2:F[K+2],y2:F[K+3]})}}}var te=this.circleCells[m];if(te!==null)for(var H=this.circles,ee=0,oe=te;ee<oe.length;ee+=1){var fe=oe[ee];if(!I.circle[fe]){I.circle[fe]=!0;var Ee=3*fe;if(this._circleAndRectCollide(H[Ee],H[Ee+1],H[Ee+2],n,s,o,u)&&(!E||E(this.circleKeys[fe]))){if(x.hitTest)return v.push(!0),!0;var xe=H[Ee],Ce=H[Ee+1],Be=H[Ee+2];v.push({key:this.circleKeys[fe],x1:xe-Be,y1:Ce-Be,x2:xe+Be,y2:Ce+Be})}}}},hr.prototype._queryCellCircle=function(n,s,o,u,m,v,x,E){var I=x.circle,M=x.seenUids,F=this.boxCells[m];if(F!==null)for(var U=this.bboxes,V=0,X=F;V<X.length;V+=1){var K=X[V];if(!M.box[K]){M.box[K]=!0;var te=4*K;if(this._circleAndRectCollide(I.x,I.y,I.radius,U[te+0],U[te+1],U[te+2],U[te+3])&&(!E||E(this.boxKeys[K])))return v.push(!0),!0}}var H=this.circleCells[m];if(H!==null)for(var ee=this.circles,oe=0,fe=H;oe<fe.length;oe+=1){var Ee=fe[oe];if(!M.circle[Ee]){M.circle[Ee]=!0;var xe=3*Ee;if(this._circlesCollide(ee[xe],ee[xe+1],ee[xe+2],I.x,I.y,I.radius)&&(!E||E(this.circleKeys[Ee])))return v.push(!0),!0}}},hr.prototype._forEachCell=function(n,s,o,u,m,v,x,E){for(var I=this._convertToXCellCoord(n),M=this._convertToYCellCoord(s),F=this._convertToXCellCoord(o),U=this._convertToYCellCoord(u),V=I;V<=F;V++)for(var X=M;X<=U;X++)if(m.call(this,n,s,o,u,this.xCellCount*X+V,v,x,E))return},hr.prototype._convertToXCellCoord=function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))},hr.prototype._convertToYCellCoord=function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))},hr.prototype._circlesCollide=function(n,s,o,u,m,v){var x=u-n,E=m-s,I=o+v;return I*I>x*x+E*E},hr.prototype._circleAndRectCollide=function(n,s,o,u,m,v,x){var E=(v-u)/2,I=Math.abs(n-(u+E));if(I>E+o)return!1;var M=(x-m)/2,F=Math.abs(s-(m+M));if(F>M+o)return!1;if(I<=E||F<=M)return!0;var U=I-E,V=F-M;return U*U+V*V<=o*o};var Bs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zi(n,s){for(var o=0;o<n;o++){var u=s.length;s.resize(u+4),s.float32.set(Bs,3*u)}}function bi(n,s,o){var u=s[0],m=s[1];return n[0]=o[0]*u+o[4]*m+o[12],n[1]=o[1]*u+o[5]*m+o[13],n[3]=o[3]*u+o[7]*m+o[15],n}var Ln=function(n,s,o){s===void 0&&(s=new hr(n.width+200,n.height+200,25)),o===void 0&&(o=new hr(n.width+200,n.height+200,25)),this.transform=n,this.grid=s,this.ignoredGrid=o,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+100,this.screenBottomBoundary=n.height+100,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200};function zr(n,s,o){return s*(h.EXTENT/(n.tileSize*Math.pow(2,o-n.tileID.overscaledZ)))}Ln.prototype.placeCollisionBox=function(n,s,o,u,m){var v=this.projectAndGetPerspectiveRatio(u,n.anchorPointX,n.anchorPointY),x=o*v.perspectiveRatio,E=n.x1*x+v.point.x,I=n.y1*x+v.point.y,M=n.x2*x+v.point.x,F=n.y2*x+v.point.y;return!this.isInsideGrid(E,I,M,F)||!s&&this.grid.hitTest(E,I,M,F,m)?{box:[],offscreen:!1}:{box:[E,I,M,F],offscreen:this.isOffscreen(E,I,M,F)}},Ln.prototype.placeCollisionCircles=function(n,s,o,u,m,v,x,E,I,M,F,U,V){var X=[],K=new h.Point(s.anchorX,s.anchorY),te=$t(K,v),H=cr(this.transform.cameraToCenterDistance,te.signedDistanceFromCamera),ee=(M?m/H:m*H)/h.ONE_EM,oe=$t(K,x).point,fe=xi(ee,u,s.lineOffsetX*ee,s.lineOffsetY*ee,!1,oe,K,s,o,x,{}),Ee=!1,xe=!1,Ce=!0;if(fe){for(var Be=.5*U*H+V,$e=new h.Point(-100,-100),Ke=new h.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new qi,wt=fe.first,Ct=fe.last,Tt=[],ir=wt.path.length-1;ir>=1;ir--)Tt.push(wt.path[ir]);for(var pt=1;pt<Ct.path.length;pt++)Tt.push(Ct.path[pt]);var Lt=2.5*Be;if(E){var Ft=Tt.map(function(Nn){return $t(Nn,E)});Tt=Ft.some(function(Nn){return Nn.signedDistanceFromCamera<=0})?[]:Ft.map(function(Nn){return Nn.point})}var Mt=[];if(Tt.length>0){for(var zt=Tt[0].clone(),Bt=Tt[0].clone(),Pt=1;Pt<Tt.length;Pt++)zt.x=Math.min(zt.x,Tt[Pt].x),zt.y=Math.min(zt.y,Tt[Pt].y),Bt.x=Math.max(Bt.x,Tt[Pt].x),Bt.y=Math.max(Bt.y,Tt[Pt].y);Mt=zt.x>=$e.x&&Bt.x<=Ke.x&&zt.y>=$e.y&&Bt.y<=Ke.y?[Tt]:Bt.x<$e.x||zt.x>Ke.x||Bt.y<$e.y||zt.y>Ke.y?[]:h.clipLine([Tt],$e.x,$e.y,Ke.x,Ke.y)}for(var It=0,mi=Mt;It<mi.length;It+=1){var jr;ut.reset(mi[It],.25*Be),jr=ut.length<=.5*Be?1:Math.ceil(ut.paddedLength/Lt)+1;for(var Bi=0;Bi<jr;Bi++){var Ei=Bi/Math.max(jr-1,1),Nr=ut.lerp(Ei),$r=Nr.x+100,yn=Nr.y+100;X.push($r,yn,Be,0);var Ki=$r-Be,Yo=yn-Be,rn=$r+Be,ro=yn+Be;if(Ce=Ce&&this.isOffscreen(Ki,Yo,rn,ro),xe=xe||this.isInsideGrid(Ki,Yo,rn,ro),!n&&this.grid.hitTestCircle($r,yn,Be,F)&&(Ee=!0,!I))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!I&&Ee||!xe?[]:X,offscreen:Ce,collisionDetected:Ee}},Ln.prototype.queryRenderedSymbols=function(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],o=1/0,u=1/0,m=-1/0,v=-1/0,x=0,E=n;x<E.length;x+=1){var I=E[x],M=new h.Point(I.x+100,I.y+100);o=Math.min(o,M.x),u=Math.min(u,M.y),m=Math.max(m,M.x),v=Math.max(v,M.y),s.push(M)}for(var F={},U={},V=0,X=this.grid.query(o,u,m,v).concat(this.ignoredGrid.query(o,u,m,v));V<X.length;V+=1){var K=X[V],te=K.key;if(F[te.bucketInstanceId]===void 0&&(F[te.bucketInstanceId]={}),!F[te.bucketInstanceId][te.featureIndex]){var H=[new h.Point(K.x1,K.y1),new h.Point(K.x2,K.y1),new h.Point(K.x2,K.y2),new h.Point(K.x1,K.y2)];h.polygonIntersectsPolygon(s,H)&&(F[te.bucketInstanceId][te.featureIndex]=!0,U[te.bucketInstanceId]===void 0&&(U[te.bucketInstanceId]=[]),U[te.bucketInstanceId].push(te.featureIndex))}}return U},Ln.prototype.insertCollisionBox=function(n,s,o,u,m){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:o,featureIndex:u,collisionGroupID:m},n[0],n[1],n[2],n[3])},Ln.prototype.insertCollisionCircles=function(n,s,o,u,m){for(var v=s?this.ignoredGrid:this.grid,x={bucketInstanceId:o,featureIndex:u,collisionGroupID:m},E=0;E<n.length;E+=4)v.insertCircle(x,n[E],n[E+1],n[E+2])},Ln.prototype.projectAndGetPerspectiveRatio=function(n,s,o){var u=[s,o,0,1];return bi(u,u,n),{point:new h.Point((u[0]/u[3]+1)/2*this.transform.width+100,(-u[1]/u[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/u[3]*.5}},Ln.prototype.isOffscreen=function(n,s,o,u){return o<100||n>=this.screenRightBoundary||u<100||s>this.screenBottomBoundary},Ln.prototype.isInsideGrid=function(n,s,o,u){return o>=0&&n<this.gridRightBoundary&&u>=0&&s<this.gridBottomBoundary},Ln.prototype.getViewportMatrix=function(){var n=h.identity([]);return h.translate(n,n,[-100,-100,0]),n};var Xn=function(n,s,o,u){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):u&&o?1:0,this.placed=o};Xn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Tn=function(n,s,o,u,m){this.text=new Xn(n?n.text:null,s,o,m),this.icon=new Xn(n?n.icon:null,s,u,m)};Tn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Vp=function(n,s,o){this.text=n,this.icon=s,this.skipFade=o},Dn=function(){this.invProjMatrix=h.create(),this.viewportMatrix=h.create(),this.circles=[]},_d=function(n,s,o,u,m){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=o,this.bucketIndex=u,this.tileID=m},Co=function(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}};function ki(n,s,o,u,m){var v=h.getAnchorAlignment(n),x=-(v.horizontalAlign-.5)*s,E=-(v.verticalAlign-.5)*o,I=h.evaluateVariableOffset(n,u);return new h.Point(x+I[0]*m,E+I[1]*m)}function co(n,s,o,u,m,v){var x=n.x1,E=n.x2,I=n.y1,M=n.y2,F=n.anchorPointX,U=n.anchorPointY,V=new h.Point(s,o);return u&&V._rotate(m?v:-v),{x1:x+V.x,y1:I+V.y,x2:E+V.x,y2:M+V.y,anchorPointX:F,anchorPointY:U}}Co.prototype.get=function(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){var s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:function(o){return o.collisionGroupID===s}}}return this.collisionGroups[n]};var Hi=function(n,s,o,u){this.transform=n.clone(),this.collisionIndex=new Ln(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Co(o),this.collisionCircleArrays={},this.prevPlacement=u,u&&(u.prevPlacement=void 0),this.placedOrientations={}};function da(n,s,o,u,m){n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0),n.emplaceBack(s?1:0,o?1:0,u||0,m||0)}Hi.prototype.getBucketParts=function(n,s,o,u){var m=o.getBucket(s),v=o.latestFeatureIndex;if(m&&v&&s.id===m.layerIds[0]){var x=o.collisionBoxArray,E=m.layers[0].layout,I=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),M=o.tileSize/h.EXTENT,F=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),U=E.get("text-pitch-alignment")==="map",V=E.get("text-rotation-alignment")==="map",X=zr(o,1,this.transform.zoom),K=Wr(F,U,V,this.transform,X),te=null;if(U){var H=vr(F,U,V,this.transform,X);te=h.multiply([],this.transform.labelPlaneMatrix,H)}this.retainedQueryData[m.bucketInstanceId]=new _d(m.bucketInstanceId,v,m.sourceLayerIndex,m.index,o.tileID);var ee={bucket:m,layout:E,posMatrix:F,textLabelPlaneMatrix:K,labelToScreenMatrix:te,scale:I,textPixelRatio:M,holdingForFade:o.holdingForFade(),collisionBoxArray:x,partiallyEvaluatedTextSize:h.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(u)for(var oe=0,fe=m.sortKeyRanges;oe<fe.length;oe+=1){var Ee=fe[oe];n.push({sortKey:Ee.sortKey,symbolInstanceStart:Ee.symbolInstanceStart,symbolInstanceEnd:Ee.symbolInstanceEnd,parameters:ee})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:ee})}},Hi.prototype.attemptAnchorPlacement=function(n,s,o,u,m,v,x,E,I,M,F,U,V,X,K){var te,H=[U.textOffset0,U.textOffset1],ee=ki(n,o,u,H,m),oe=this.collisionIndex.placeCollisionBox(co(s,ee.x,ee.y,v,x,this.transform.angle),F,E,I,M.predicate);if(!K||this.collisionIndex.placeCollisionBox(co(K,ee.x,ee.y,v,x,this.transform.angle),F,E,I,M.predicate).box.length!==0)return oe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(te=this.prevPlacement.variableOffsets[U.crossTileID].anchor),this.variableOffsets[U.crossTileID]={textOffset:H,width:o,height:u,anchor:n,textBoxScale:m,prevAnchor:te},this.markUsedJustification(V,n,U,X),V.allowVerticalPlacement&&(this.markUsedOrientation(V,X,U),this.placedOrientations[U.crossTileID]=X),{shift:ee,placedGlyphBoxes:oe}):void 0},Hi.prototype.placeLayerBucketPart=function(n,s,o){var u=this,m=n.parameters,v=m.bucket,x=m.layout,E=m.posMatrix,I=m.textLabelPlaneMatrix,M=m.labelToScreenMatrix,F=m.textPixelRatio,U=m.holdingForFade,V=m.collisionBoxArray,X=m.partiallyEvaluatedTextSize,K=m.collisionGroup,te=x.get("text-optional"),H=x.get("icon-optional"),ee=x.get("text-allow-overlap"),oe=x.get("icon-allow-overlap"),fe=x.get("text-rotation-alignment")==="map",Ee=x.get("text-pitch-alignment")==="map",xe=x.get("icon-text-fit")!=="none",Ce=x.get("symbol-z-order")==="viewport-y",Be=ee&&(oe||!v.hasIconData()||H),$e=oe&&(ee||!v.hasTextData()||te);!v.collisionArrays&&V&&v.deserializeCollisionBoxes(V);var Ke=function(pt,Lt){if(!s[pt.crossTileID])if(U)u.placements[pt.crossTileID]=new Vp(!1,!1,!1);else{var Ft,Mt=!1,zt=!1,Bt=!0,Pt=null,It={box:null,offscreen:null},mi={box:null,offscreen:null},jr=null,Bi=null,Ei=0,Nr=0,$r=0;Lt.textFeatureIndex?Ei=Lt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(Ei=pt.featureIndex),Lt.verticalTextFeatureIndex&&(Nr=Lt.verticalTextFeatureIndex);var yn=Lt.textBox;if(yn){var Ki=function(pr){var An=h.WritingMode.horizontal;if(v.allowVerticalPlacement&&!pr&&u.prevPlacement){var nn=u.prevPlacement.placedOrientations[pt.crossTileID];nn&&(u.placedOrientations[pt.crossTileID]=nn,u.markUsedOrientation(v,An=nn,pt))}return An},Yo=function(pr,An){if(v.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Lt.verticalTextBox)for(var nn=0,Ma=v.writingModes;nn<Ma.length&&(Ma[nn]===h.WritingMode.vertical?(It=An(),mi=It):It=pr(),!(It&&It.box&&It.box.length));nn+=1);else It=pr()};if(x.get("text-variable-anchor")){var rn=x.get("text-variable-anchor");if(u.prevPlacement&&u.prevPlacement.variableOffsets[pt.crossTileID]){var ro=u.prevPlacement.variableOffsets[pt.crossTileID];rn.indexOf(ro.anchor)>0&&(rn=rn.filter(function(pr){return pr!==ro.anchor})).unshift(ro.anchor)}var Nn=function(pr,An,nn){for(var Ma=pr.x2-pr.x1,Ld=pr.y2-pr.y1,au=pt.textBoxScale,Dd=xe&&!oe?An:null,nl={box:[],offscreen:!1},vh=ee?2*rn.length:rn.length,us=0;us<vh;++us){var su=u.attemptAnchorPlacement(rn[us%rn.length],pr,Ma,Ld,au,fe,Ee,F,E,K,us>=rn.length,pt,v,nn,Dd);if(su&&(nl=su.placedGlyphBoxes)&&nl.box&&nl.box.length){Mt=!0,Pt=su.shift;break}}return nl};Yo(function(){return Nn(yn,Lt.iconBox,h.WritingMode.horizontal)},function(){var pr=Lt.verticalTextBox;return v.allowVerticalPlacement&&!(It&&It.box&&It.box.length)&&pt.numVerticalGlyphVertices>0&&pr?Nn(pr,Lt.verticalIconBox,h.WritingMode.vertical):{box:null,offscreen:null}}),It&&(Mt=It.box,Bt=It.offscreen);var tl=Ki(It&&It.box);if(!Mt&&u.prevPlacement){var ss=u.prevPlacement.variableOffsets[pt.crossTileID];ss&&(u.variableOffsets[pt.crossTileID]=ss,u.markUsedJustification(v,ss.anchor,pt,tl))}}else{var Qo=function(pr,An){var nn=u.collisionIndex.placeCollisionBox(pr,ee,F,E,K.predicate);return nn&&nn.box&&nn.box.length&&(u.markUsedOrientation(v,An,pt),u.placedOrientations[pt.crossTileID]=An),nn};Yo(function(){return Qo(yn,h.WritingMode.horizontal)},function(){var pr=Lt.verticalTextBox;return v.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&pr?Qo(pr,h.WritingMode.vertical):{box:null,offscreen:null}}),Ki(It&&It.box&&It.box.length)}}if(Mt=(Ft=It)&&Ft.box&&Ft.box.length>0,Bt=Ft&&Ft.offscreen,pt.useRuntimeCollisionCircles){var ls=v.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),rl=h.evaluateSizeForFeature(v.textSizeData,X,ls),mo=x.get("text-padding");jr=u.collisionIndex.placeCollisionCircles(ee,ls,v.lineVertexArray,v.glyphOffsetArray,rl,E,I,M,o,Ee,K.predicate,pt.collisionCircleDiameter,mo),Mt=ee||jr.circles.length>0&&!jr.collisionDetected,Bt=Bt&&jr.offscreen}if(Lt.iconFeatureIndex&&($r=Lt.iconFeatureIndex),Lt.iconBox){var il=function(pr){var An=xe&&Pt?co(pr,Pt.x,Pt.y,fe,Ee,u.transform.angle):pr;return u.collisionIndex.placeCollisionBox(An,oe,F,E,K.predicate)};zt=mi&&mi.box&&mi.box.length&&Lt.verticalIconBox?(Bi=il(Lt.verticalIconBox)).box.length>0:(Bi=il(Lt.iconBox)).box.length>0,Bt=Bt&&Bi.offscreen}var go=te||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,gi=H||pt.numIconVertices===0;if(go||gi?gi?go||(zt=zt&&Mt):Mt=zt&&Mt:zt=Mt=zt&&Mt,Mt&&Ft&&Ft.box&&u.collisionIndex.insertCollisionBox(Ft.box,x.get("text-ignore-placement"),v.bucketInstanceId,mi&&mi.box&&Nr?Nr:Ei,K.ID),zt&&Bi&&u.collisionIndex.insertCollisionBox(Bi.box,x.get("icon-ignore-placement"),v.bucketInstanceId,$r,K.ID),jr&&(Mt&&u.collisionIndex.insertCollisionCircles(jr.circles,x.get("text-ignore-placement"),v.bucketInstanceId,Ei,K.ID),o)){var Po=v.bucketInstanceId,ea=u.collisionCircleArrays[Po];ea===void 0&&(ea=u.collisionCircleArrays[Po]=new Dn);for(var za=0;za<jr.circles.length;za+=4)ea.circles.push(jr.circles[za+0]),ea.circles.push(jr.circles[za+1]),ea.circles.push(jr.circles[za+2]),ea.circles.push(jr.collisionDetected?1:0)}u.placements[pt.crossTileID]=new Vp(Mt||Be,zt||$e,Bt||v.justReloaded),s[pt.crossTileID]=!0}};if(Ce)for(var ut=v.getSortedSymbolIndexes(this.transform.angle),wt=ut.length-1;wt>=0;--wt){var Ct=ut[wt];Ke(v.symbolInstances.get(Ct),v.collisionArrays[Ct])}else for(var Tt=n.symbolInstanceStart;Tt<n.symbolInstanceEnd;Tt++)Ke(v.symbolInstances.get(Tt),v.collisionArrays[Tt]);if(o&&v.bucketInstanceId in this.collisionCircleArrays){var ir=this.collisionCircleArrays[v.bucketInstanceId];h.invert(ir.invProjMatrix,E),ir.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1},Hi.prototype.markUsedJustification=function(n,s,o,u){var m;m=u===h.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[h.getAnchorJustification(s)];for(var v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];v<x.length;v+=1){var E=x[v];E>=0&&(n.text.placedSymbolArray.get(E).crossTileID=m>=0&&E!==m?0:o.crossTileID)}},Hi.prototype.markUsedOrientation=function(n,s,o){for(var u=s===h.WritingMode.horizontal||s===h.WritingMode.horizontalOnly?s:0,m=s===h.WritingMode.vertical?s:0,v=0,x=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];v<x.length;v+=1)n.text.placedSymbolArray.get(x[v]).placedOrientation=u;o.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=m)},Hi.prototype.commit=function(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,o=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var u=s?s.symbolFadeChange(n):1,m=s?s.opacities:{},v=s?s.variableOffsets:{},x=s?s.placedOrientations:{};for(var E in this.placements){var I=this.placements[E],M=m[E];M?(this.opacities[E]=new Tn(M,u,I.text,I.icon),o=o||I.text!==M.text.placed||I.icon!==M.icon.placed):(this.opacities[E]=new Tn(null,u,I.text,I.icon,I.skipFade),o=o||I.text||I.icon)}for(var F in m){var U=m[F];if(!this.opacities[F]){var V=new Tn(U,u,!1,!1);V.isHidden()||(this.opacities[F]=V,o=o||U.text.placed||U.icon.placed)}}for(var X in v)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=v[X]);for(var K in x)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=x[K]);o?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)},Hi.prototype.updateLayerOpacities=function(n,s){for(var o={},u=0,m=s;u<m.length;u+=1){var v=m[u],x=v.getBucket(n);x&&v.latestFeatureIndex&&n.id===x.layerIds[0]&&this.updateBucketOpacities(x,o,v.collisionBoxArray)}},Hi.prototype.updateBucketOpacities=function(n,s,o){var u=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var m=n.layers[0].layout,v=new Tn(null,0,!1,!1,!0),x=m.get("text-allow-overlap"),E=m.get("icon-allow-overlap"),I=m.get("text-variable-anchor"),M=m.get("text-rotation-alignment")==="map",F=m.get("text-pitch-alignment")==="map",U=m.get("icon-text-fit")!=="none",V=new Tn(null,0,x&&(E||!n.hasIconData()||m.get("icon-optional")),E&&(x||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&o&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(o);for(var X=function(ee,oe,fe){for(var Ee=0;Ee<oe/4;Ee++)ee.opacityVertexArray.emplaceBack(fe)},K=function(ee){var oe=n.symbolInstances.get(ee),fe=oe.numHorizontalGlyphVertices,Ee=oe.numVerticalGlyphVertices,xe=oe.crossTileID,Ce=u.opacities[xe];s[xe]?Ce=v:Ce||(u.opacities[xe]=Ce=V),s[xe]=!0;var Be=oe.numIconVertices>0,$e=u.placedOrientations[oe.crossTileID],Ke=$e===h.WritingMode.vertical,ut=$e===h.WritingMode.horizontal||$e===h.WritingMode.horizontalOnly;if(fe>0||Ee>0){var wt=Zp(Ce.text);X(n.text,fe,Ke?Xa:wt),X(n.text,Ee,ut?Xa:wt);var Ct=Ce.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(function(It){It>=0&&(n.text.placedSymbolArray.get(It).hidden=Ct||Ke?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Ct||ut?1:0);var Tt=u.variableOffsets[oe.crossTileID];Tt&&u.markUsedJustification(n,Tt.anchor,oe,$e);var ir=u.placedOrientations[oe.crossTileID];ir&&(u.markUsedJustification(n,"left",oe,ir),u.markUsedOrientation(n,ir,oe))}if(Be){var pt=Zp(Ce.icon),Lt=!(U&&oe.verticalPlacedIconSymbolIndex&&Ke);oe.placedIconSymbolIndex>=0&&(X(n.icon,oe.numIconVertices,Lt?pt:Xa),n.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=Ce.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(X(n.icon,oe.numVerticalIconVertices,Lt?Xa:pt),n.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=Ce.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var Ft=n.collisionArrays[ee];if(Ft){var Mt=new h.Point(0,0);if(Ft.textBox||Ft.verticalTextBox){var zt=!0;if(I){var Bt=u.variableOffsets[xe];Bt?(Mt=ki(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),M&&Mt._rotate(F?u.transform.angle:-u.transform.angle)):zt=!1}Ft.textBox&&da(n.textCollisionBox.collisionVertexArray,Ce.text.placed,!zt||Ke,Mt.x,Mt.y),Ft.verticalTextBox&&da(n.textCollisionBox.collisionVertexArray,Ce.text.placed,!zt||ut,Mt.x,Mt.y)}var Pt=!!(!ut&&Ft.verticalIconBox);Ft.iconBox&&da(n.iconCollisionBox.collisionVertexArray,Ce.icon.placed,Pt,U?Mt.x:0,U?Mt.y:0),Ft.verticalIconBox&&da(n.iconCollisionBox.collisionVertexArray,Ce.icon.placed,!Pt,U?Mt.x:0,U?Mt.y:0)}}},te=0;te<n.symbolInstances.length;te++)K(te);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var H=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=H.invProjMatrix,n.placementViewportMatrix=H.viewportMatrix,n.collisionCircleArray=H.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},Hi.prototype.symbolFadeChange=function(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Hi.prototype.zoomAdjustment=function(n){return Math.max(0,(this.transform.zoom-n)/1.5)},Hi.prototype.hasTransitions=function(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration},Hi.prototype.stillRecent=function(n,s){var o=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*o>n},Hi.prototype.setStale=function(){this.stale=!0};var xd=Math.pow(2,25),bd=Math.pow(2,24),oc=Math.pow(2,17),wd=Math.pow(2,16),jp=Math.pow(2,9),Ed=Math.pow(2,8),qp=Math.pow(2,1);function Zp(n){if(n.opacity===0&&!n.placed)return 0;if(n.opacity===1&&n.placed)return 4294967295;var s=n.placed?1:0,o=Math.floor(127*n.opacity);return o*xd+s*bd+o*oc+s*wd+o*jp+s*Ed+o*qp+s}var Xa=0,ac=function(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ac.prototype.continuePlacement=function(n,s,o,u,m){for(var v=this._bucketParts;this._currentTileIndex<n.length;)if(s.getBucketParts(v,u,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,v.sort(function(x,E){return x.sortKey-E.sortKey}));this._currentPartIndex<v.length;)if(s.placeLayerBucketPart(v[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,m())return!0;return!1};var Fs=function(n,s,o,u,m,v,x){this.placement=new Hi(n,m,v,x),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=u,this._done=!1};Fs.prototype.isDone=function(){return this._done},Fs.prototype.continuePlacement=function(n,s,o){for(var u=this,m=h.browser.now(),v=function(){var I=h.browser.now()-m;return!u._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var x=s[n[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=E)&&(!x.maxzoom||x.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new ac(x)),this._inProgressLayer.continuePlacement(o[x.source],this.placement,this._showCollisionBoxes,x,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Fs.prototype.commit=function(n){return this.placement.commit(n),this.placement};var Hp=512/h.EXTENT/2,Ul=function(n,s,o){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var u=0;u<s.length;u++){var m=s.get(u),v=m.key;this.indexedSymbolInstances[v]||(this.indexedSymbolInstances[v]=[]),this.indexedSymbolInstances[v].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,n)})}};Ul.prototype.getScaledCoordinates=function(n,s){var o=Hp/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*h.EXTENT+n.anchorX)*o),y:Math.floor((s.canonical.y*h.EXTENT+n.anchorY)*o)}},Ul.prototype.findMatches=function(n,s,o){for(var u=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),m=0;m<n.length;m++){var v=n.get(m);if(!v.crossTileID){var x=this.indexedSymbolInstances[v.key];if(x)for(var E=this.getScaledCoordinates(v,s),I=0,M=x;I<M.length;I+=1){var F=M[I];if(Math.abs(F.coord.x-E.x)<=u&&Math.abs(F.coord.y-E.y)<=u&&!o[F.crossTileID]){o[F.crossTileID]=!0,v.crossTileID=F.crossTileID;break}}}}};var Rn=function(){this.maxCrossTileID=0};Rn.prototype.generate=function(){return++this.maxCrossTileID};var Fo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Fo.prototype.handleWrapJump=function(n){var s=Math.round((n-this.lng)/360);if(s!==0)for(var o in this.indexes){var u=this.indexes[o],m={};for(var v in u){var x=u[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),m[x.tileID.key]=x}this.indexes[o]=m}this.lng=n},Fo.prototype.addBucket=function(n,s,o){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(var u=0;u<s.symbolInstances.length;u++)s.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});var m=this.usedCrossTileIDs[n.overscaledZ];for(var v in this.indexes){var x=this.indexes[v];if(Number(v)>n.overscaledZ)for(var E in x){var I=x[E];I.tileID.isChildOf(n)&&I.findMatches(s.symbolInstances,n,m)}else{var M=x[n.scaledTo(Number(v)).key];M&&M.findMatches(s.symbolInstances,n,m)}}for(var F=0;F<s.symbolInstances.length;F++){var U=s.symbolInstances.get(F);U.crossTileID||(U.crossTileID=o.generate(),m[U.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Ul(n,s.symbolInstances,s.bucketInstanceId),!0},Fo.prototype.removeBucketCrossTileIDs=function(n,s){for(var o in s.indexedSymbolInstances)for(var u=0,m=s.indexedSymbolInstances[o];u<m.length;u+=1)delete this.usedCrossTileIDs[n][m[u].crossTileID]},Fo.prototype.removeStaleBuckets=function(n){var s=!1;for(var o in this.indexes){var u=this.indexes[o];for(var m in u)n[u[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,u[m]),delete u[m],s=!0)}return s};var No=function(){this.layerIndexes={},this.crossTileIDs=new Rn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};No.prototype.addLayer=function(n,s,o){var u=this.layerIndexes[n.id];u===void 0&&(u=this.layerIndexes[n.id]=new Fo);var m=!1,v={};u.handleWrapJump(o);for(var x=0,E=s;x<E.length;x+=1){var I=E[x],M=I.getBucket(n);M&&n.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(I.tileID,M,this.crossTileIDs)&&(m=!0),v[M.bucketInstanceId]=!0)}return u.removeStaleBuckets(v)&&(m=!0),m},No.prototype.pruneUnusedLayers=function(n){var s={};for(var o in n.forEach(function(u){s[u]=!0}),this.layerIndexes)s[o]||delete this.layerIndexes[o]};var ma=function(n,s){return h.emitValidationErrors(n,s&&s.filter(function(o){return o.identifier!=="source.canvas"}))},Uo=h.pick(nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vo=h.pick(nt,["setCenter","setZoom","setBearing","setPitch"]),Vl=function(){var n={},s=h.styleSpec.$version;for(var o in h.styleSpec.$root){var u,m=h.styleSpec.$root[o];m.required&&(u=o==="version"?s:m.type==="array"?[]:{})!=null&&(n[o]=u)}return n}(),pn=function(n){function s(o,u){var m=this;u===void 0&&(u={}),n.call(this),this.map=o,this.dispatcher=new oi(Ae(),this),this.imageManager=new Rt,this.imageManager.setEventedParent(this),this.glyphManager=new ni(o._requestManager,u.localIdeographFontFamily),this.lineAtlas=new dr(256,512),this.crossTileSymbolIndex=new No,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.getReferrer());var v=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(x){v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},function(E,I){if(h.triggerPluginCompletionEvent(E),I&&I.every(function(F){return F}))for(var M in v.sourceCaches)v.sourceCaches[M].reload()})}),this.on("data",function(x){if(x.dataType==="source"&&x.sourceDataType==="metadata"){var E=m.sourceCaches[x.sourceId];if(E){var I=E.getSource();if(I&&I.vectorLayerIds)for(var M in m._layers){var F=m._layers[M];F.source===I.id&&m._validateLayer(F)}}}})}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.loadURL=function(o,u){var m=this;u===void 0&&(u={}),this.fire(new h.Event("dataloading",{dataType:"style"}));var v=typeof u.validate=="boolean"?u.validate:!h.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,u.accessToken);var x=this.map._requestManager.transformRequest(o,h.ResourceType.Style);this._request=h.getJSON(x,function(E,I){m._request=null,E?m.fire(new h.ErrorEvent(E)):I&&m._load(I,v)})},s.prototype.loadJSON=function(o,u){var m=this;u===void 0&&(u={}),this.fire(new h.Event("dataloading",{dataType:"style"})),this._request=h.browser.frame(function(){m._request=null,m._load(o,u.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new h.Event("dataloading",{dataType:"style"})),this._load(Vl,!1)},s.prototype._load=function(o,u){if(!u||!ma(this,h.validateStyle(o))){for(var m in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(m,o.sources[m],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var v=tt(this.stylesheet.layers);this._order=v.map(function(M){return M.id}),this._layers={},this._serializedLayers={};for(var x=0,E=v;x<E.length;x+=1){var I=E[x];(I=h.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Kn(this.stylesheet.light),this.fire(new h.Event("data",{dataType:"style"})),this.fire(new h.Event("style.load"))}},s.prototype._loadSprite=function(o){var u=this;this._spriteRequest=function(m,v,x){var E,I,M,F=h.browser.devicePixelRatio>1?"@2x":"",U=h.getJSON(v.transformRequest(v.normalizeSpriteURL(m,F,".json"),h.ResourceType.SpriteJSON),function(K,te){U=null,M||(M=K,E=te,X())}),V=h.getImage(v.transformRequest(v.normalizeSpriteURL(m,F,".png"),h.ResourceType.SpriteImage),function(K,te){V=null,M||(M=K,I=te,X())});function X(){if(M)x(M);else if(E&&I){var K=h.browser.getImageData(I),te={};for(var H in E){var ee=E[H],oe=ee.width,fe=ee.height,Ee=ee.x,xe=ee.y,Ce=ee.sdf,Be=ee.pixelRatio,$e=ee.stretchX,Ke=ee.stretchY,ut=ee.content,wt=new h.RGBAImage({width:oe,height:fe});h.RGBAImage.copy(K,wt,{x:Ee,y:xe},{x:0,y:0},{width:oe,height:fe}),te[H]={data:wt,pixelRatio:Be,sdf:Ce,stretchX:$e,stretchY:Ke,content:ut}}x(null,te)}}return{cancel:function(){U&&(U.cancel(),U=null),V&&(V.cancel(),V=null)}}}(o,this.map._requestManager,function(m,v){if(u._spriteRequest=null,m)u.fire(new h.ErrorEvent(m));else if(v)for(var x in v)u.imageManager.addImage(x,v[x]);u.imageManager.setLoaded(!0),u._availableImages=u.imageManager.listImages(),u.dispatcher.broadcast("setImages",u._availableImages),u.fire(new h.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(o){var u=this.sourceCaches[o.source];if(u){var m=o.sourceLayer;if(m){var v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new h.ErrorEvent(new Error('Source layer "'+m+'" does not exist on source "'+v.id+'" as specified by style layer "'+o.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(o){for(var u=[],m=0,v=o;m<v.length;m+=1){var x=this._layers[v[m]];x.type!=="custom"&&u.push(x.serialize())}return u},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var u in this._layers)if(this._layers[u].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(o){if(this._loaded){var u=this._changed;if(this._changed){var m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);for(var x in(m.length||v.length)&&this._updateWorkerLayers(m,v),this._updatedSources){var E=this._updatedSources[x];E==="reload"?this._reloadSource(x):E==="clear"&&this._clearSource(x)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}var M={};for(var F in this.sourceCaches){var U=this.sourceCaches[F];M[F]=U.used,U.used=!1}for(var V=0,X=this._order;V<X.length;V+=1){var K=this._layers[X[V]];K.recalculate(o,this._availableImages),!K.isHidden(o.zoom)&&K.source&&(this.sourceCaches[K.source].used=!0)}for(var te in M){var H=this.sourceCaches[te];M[te]!==H.used&&H.fire(new h.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:te}))}this.light.recalculate(o),this.z=o.zoom,u&&this.fire(new h.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:u})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(o){var u=this;if(this._checkLoaded(),ma(this,h.validateStyle(o)))return!1;(o=h.clone$1(o)).layers=tt(o.layers);var m=function(x,E){if(!x)return[{command:nt.setStyle,args:[E]}];var I=[];try{if(!h.deepEqual(x.version,E.version))return[{command:nt.setStyle,args:[E]}];h.deepEqual(x.center,E.center)||I.push({command:nt.setCenter,args:[E.center]}),h.deepEqual(x.zoom,E.zoom)||I.push({command:nt.setZoom,args:[E.zoom]}),h.deepEqual(x.bearing,E.bearing)||I.push({command:nt.setBearing,args:[E.bearing]}),h.deepEqual(x.pitch,E.pitch)||I.push({command:nt.setPitch,args:[E.pitch]}),h.deepEqual(x.sprite,E.sprite)||I.push({command:nt.setSprite,args:[E.sprite]}),h.deepEqual(x.glyphs,E.glyphs)||I.push({command:nt.setGlyphs,args:[E.glyphs]}),h.deepEqual(x.transition,E.transition)||I.push({command:nt.setTransition,args:[E.transition]}),h.deepEqual(x.light,E.light)||I.push({command:nt.setLight,args:[E.light]});var M={},F=[];(function(V,X,K,te){var H;for(H in X=X||{},V=V||{})V.hasOwnProperty(H)&&(X.hasOwnProperty(H)||at(H,K,te));for(H in X)X.hasOwnProperty(H)&&(V.hasOwnProperty(H)?h.deepEqual(V[H],X[H])||(V[H].type==="geojson"&&X[H].type==="geojson"&&xr(V,X,H)?K.push({command:nt.setGeoJSONSourceData,args:[H,X[H].data]}):Xt(H,X,K,te)):Ut(H,X,K))})(x.sources,E.sources,F,M);var U=[];x.layers&&x.layers.forEach(function(V){M[V.source]?I.push({command:nt.removeLayer,args:[V.id]}):U.push(V)}),I=I.concat(F),function(V,X,K){X=X||[];var te,H,ee,oe,fe,Ee,xe,Ce=(V=V||[]).map(ur),Be=X.map(ur),$e=V.reduce(Yt,{}),Ke=X.reduce(Yt,{}),ut=Ce.slice(),wt=Object.create(null);for(te=0,H=0;te<Ce.length;te++)Ke.hasOwnProperty(ee=Ce[te])?H++:(K.push({command:nt.removeLayer,args:[ee]}),ut.splice(ut.indexOf(ee,H),1));for(te=0,H=0;te<Be.length;te++)ut[ut.length-1-te]!==(ee=Be[Be.length-1-te])&&($e.hasOwnProperty(ee)?(K.push({command:nt.removeLayer,args:[ee]}),ut.splice(ut.lastIndexOf(ee,ut.length-H),1)):H++,K.push({command:nt.addLayer,args:[Ke[ee],Ee=ut[ut.length-te]]}),ut.splice(ut.length-te,0,ee),wt[ee]=!0);for(te=0;te<Be.length;te++)if(oe=$e[ee=Be[te]],fe=Ke[ee],!wt[ee]&&!h.deepEqual(oe,fe))if(h.deepEqual(oe.source,fe.source)&&h.deepEqual(oe["source-layer"],fe["source-layer"])&&h.deepEqual(oe.type,fe.type)){for(xe in Ht(oe.layout,fe.layout,K,ee,null,nt.setLayoutProperty),Ht(oe.paint,fe.paint,K,ee,null,nt.setPaintProperty),h.deepEqual(oe.filter,fe.filter)||K.push({command:nt.setFilter,args:[ee,fe.filter]}),h.deepEqual(oe.minzoom,fe.minzoom)&&h.deepEqual(oe.maxzoom,fe.maxzoom)||K.push({command:nt.setLayerZoomRange,args:[ee,fe.minzoom,fe.maxzoom]}),oe)oe.hasOwnProperty(xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?Ht(oe[xe],fe[xe],K,ee,xe.slice(6),nt.setPaintProperty):h.deepEqual(oe[xe],fe[xe])||K.push({command:nt.setLayerProperty,args:[ee,xe,fe[xe]]}));for(xe in fe)fe.hasOwnProperty(xe)&&!oe.hasOwnProperty(xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?Ht(oe[xe],fe[xe],K,ee,xe.slice(6),nt.setPaintProperty):h.deepEqual(oe[xe],fe[xe])||K.push({command:nt.setLayerProperty,args:[ee,xe,fe[xe]]}))}else K.push({command:nt.removeLayer,args:[ee]}),Ee=ut[ut.lastIndexOf(ee)+1],K.push({command:nt.addLayer,args:[fe,Ee]})}(U,E.layers,I)}catch(V){console.warn("Unable to compute style diff:",V),I=[{command:nt.setStyle,args:[E]}]}return I}(this.serialize(),o).filter(function(x){return!(x.command in Vo)});if(m.length===0)return!1;var v=m.filter(function(x){return!(x.command in Uo)});if(v.length>0)throw new Error("Unimplemented: "+v.map(function(x){return x.command}).join(", ")+".");return m.forEach(function(x){x.command!=="setTransition"&&u[x.command].apply(u,x.args)}),this.stylesheet=o,!0},s.prototype.addImage=function(o,u){if(this.getImage(o))return this.fire(new h.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(o,u),this._afterImageUpdated(o)},s.prototype.updateImage=function(o,u){this.imageManager.updateImage(o,u)},s.prototype.getImage=function(o){return this.imageManager.getImage(o)},s.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new h.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(o),this._afterImageUpdated(o)},s.prototype._afterImageUpdated=function(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(o,u,m){var v=this;if(m===void 0&&(m={}),this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(u).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(h.validateStyle.source,"sources."+o,u,null,m))){this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);var x=this.sourceCaches[o]=new J(o,u,this.dispatcher);x.style=this,x.setEventedParent(this,function(){return{isSourceLoaded:v.loaded(),source:x.serialize(),sourceId:o}}),x.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(var u in this._layers)if(this._layers[u].source===o)return this.fire(new h.ErrorEvent(new Error('Source "'+o+'" cannot be removed while layer "'+u+'" is using it.')));var m=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],m.fire(new h.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),m.setEventedParent(null),m.clearTiles(),m.onRemove&&m.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,u){this._checkLoaded(),this.sourceCaches[o].getSource().setData(u),this._changed=!0},s.prototype.getSource=function(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()},s.prototype.addLayer=function(o,u,m){m===void 0&&(m={}),this._checkLoaded();var v=o.id;if(this.getLayer(v))this.fire(new h.ErrorEvent(new Error('Layer with id "'+v+'" already exists on this map')));else{var x;if(o.type==="custom"){if(ma(this,h.validateCustomStyleLayer(o)))return;x=h.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(v,o.source),o=h.clone$1(o),o=h.extend(o,{source:v})),this._validate(h.validateStyle.layer,"layers."+v,o,{arrayIndex:-1},m))return;x=h.createStyleLayer(o),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[x.id]=x.serialize()}var E=u?this._order.indexOf(u):this._order.length;if(u&&E===-1)this.fire(new h.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.')));else{if(this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=x,this._removedLayers[v]&&x.source&&x.type!=="custom"){var I=this._removedLayers[v];delete this._removedLayers[v],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}},s.prototype.moveLayer=function(o,u){if(this._checkLoaded(),this._changed=!0,this._layers[o]){if(o!==u){var m=this._order.indexOf(o);this._order.splice(m,1);var v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new h.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.'))):(this._order.splice(v,0,o),this._layerOrderChanged=!0)}}else this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(o){this._checkLoaded();var u=this._layers[o];if(u){u.setEventedParent(null);var m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=u,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],u.onRemove&&u.onRemove(this.map)}else this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(o){return this._layers[o]},s.prototype.hasLayer=function(o){return o in this._layers},s.prototype.setLayerZoomRange=function(o,u,m){this._checkLoaded();var v=this.getLayer(o);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(o,u,m){m===void 0&&(m={}),this._checkLoaded();var v=this.getLayer(o);if(v){if(!h.deepEqual(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(h.validateStyle.filter,"layers."+v.id+".filter",u,null,m)||(v.filter=h.clone$1(u),this._updateLayer(v)))}else this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(o){return h.clone$1(this.getLayer(o).filter)},s.prototype.setLayoutProperty=function(o,u,m,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?h.deepEqual(x.getLayoutProperty(u),m)||(x.setLayoutProperty(u,m,v),this._updateLayer(x)):this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(o,u){var m=this.getLayer(o);if(m)return m.getLayoutProperty(u);this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(o,u,m,v){v===void 0&&(v={}),this._checkLoaded();var x=this.getLayer(o);x?h.deepEqual(x.getPaintProperty(u),m)||(x.setPaintProperty(u,m,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new h.ErrorEvent(new Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(o,u){return this.getLayer(o).getPaintProperty(u)},s.prototype.setFeatureState=function(o,u){this._checkLoaded();var m=o.source,v=o.sourceLayer,x=this.sourceCaches[m];if(x!==void 0){var E=x.getSource().type;E==="geojson"&&v?this.fire(new h.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||v?(o.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(v,o.id,u)):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(o,u){this._checkLoaded();var m=o.source,v=this.sourceCaches[m];if(v!==void 0){var x=v.getSource().type,E=x==="vector"?o.sourceLayer:void 0;x!=="vector"||E?u&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new h.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(E,o.id,u):this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error("The source '"+m+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(o){this._checkLoaded();var u=o.source,m=o.sourceLayer,v=this.sourceCaches[u];if(v!==void 0){if(v.getSource().type!=="vector"||m)return o.id===void 0&&this.fire(new h.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,o.id);this.fire(new h.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new h.ErrorEvent(new Error("The source '"+u+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,function(o){return o.serialize()}),layers:this._serializeLayers(this._order)},function(o){return o!==void 0})},s.prototype._updateLayer=function(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(o){for(var u=this,m=function($e){return u._layers[$e].type==="fill-extrusion"},v={},x=[],E=this._order.length-1;E>=0;E--){var I=this._order[E];if(m(I)){v[I]=E;for(var M=0,F=o;M<F.length;M+=1){var U=F[M][I];if(U)for(var V=0,X=U;V<X.length;V+=1)x.push(X[V])}}}x.sort(function($e,Ke){return Ke.intersectionZ-$e.intersectionZ});for(var K=[],te=this._order.length-1;te>=0;te--){var H=this._order[te];if(m(H))for(var ee=x.length-1;ee>=0;ee--){var oe=x[ee].feature;if(v[oe.layer.id]<te)break;K.push(oe),x.pop()}else for(var fe=0,Ee=o;fe<Ee.length;fe+=1){var xe=Ee[fe][H];if(xe)for(var Ce=0,Be=xe;Ce<Be.length;Ce+=1)K.push(Be[Ce].feature)}}return K},s.prototype.queryRenderedFeatures=function(o,u,m){u&&u.filter&&this._validate(h.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);var v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new h.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var x=0,E=u.layers;x<E.length;x+=1){var I=E[x],M=this._layers[I];if(!M)return this.fire(new h.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];v[M.source]=!0}}var F=[];for(var U in u.availableImages=this._availableImages,this.sourceCaches)u.layers&&!v[U]||F.push(Ze(this.sourceCaches[U],this._layers,this._serializedLayers,o,u,m));return this.placement&&F.push(function(V,X,K,te,H,ee,oe){for(var fe={},Ee=ee.queryRenderedSymbols(te),xe=[],Ce=0,Be=Object.keys(Ee).map(Number);Ce<Be.length;Ce+=1)xe.push(oe[Be[Ce]]);xe.sort(ct);for(var $e=function(){var Tt=ut[Ke],ir=Tt.featureIndex.lookupSymbolFeatures(Ee[Tt.bucketInstanceId],X,Tt.bucketIndex,Tt.sourceLayerIndex,H.filter,H.layers,H.availableImages,V);for(var pt in ir){var Lt=fe[pt]=fe[pt]||[],Ft=ir[pt];Ft.sort(function(Bt,Pt){var It=Tt.featureSortOrder;if(It){var mi=It.indexOf(Bt.featureIndex);return It.indexOf(Pt.featureIndex)-mi}return Pt.featureIndex-Bt.featureIndex});for(var Mt=0,zt=Ft;Mt<zt.length;Mt+=1)Lt.push(zt[Mt])}},Ke=0,ut=xe;Ke<ut.length;Ke+=1)$e();var wt=function(Tt){fe[Tt].forEach(function(ir){var pt=ir.feature,Lt=K[V[Tt].source].getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=Lt})};for(var Ct in fe)wt(Ct);return fe}(this._layers,this._serializedLayers,this.sourceCaches,o,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(F)},s.prototype.querySourceFeatures=function(o,u){u&&u.filter&&this._validate(h.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);var m=this.sourceCaches[o];return m?function(v,x){for(var E=v.getRenderableIds().map(function(X){return v.getTileByID(X)}),I=[],M={},F=0;F<E.length;F++){var U=E[F],V=U.tileID.canonical.key;M[V]||(M[V]=!0,U.querySourceFeatures(I,x))}return I}(m,u):[]},s.prototype.addSourceType=function(o,u,m){return s.getSourceType(o)?m(new Error('A source type called "'+o+'" already exists.')):(s.setSourceType(o,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:u.workerSourceURL},m):m(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(o,u){u===void 0&&(u={}),this._checkLoaded();var m=this.light.getLight(),v=!1;for(var x in o)if(!h.deepEqual(o[x],m[x])){v=!0;break}if(v){var E={now:h.browser.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,u),this.light.updateTransitions(E)}},s.prototype._validate=function(o,u,m,v,x){return x===void 0&&(x={}),(!x||x.validate!==!1)&&ma(this,o.call(h.validateStyle,h.extend({key:u,style:this.serialize(),value:m,styleSpec:h.styleSpec},v)))},s.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var u in this.sourceCaches)this.sourceCaches[u].clearTiles(),this.sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(o){this.sourceCaches[o].clearTiles()},s.prototype._reloadSource=function(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()},s.prototype._updateSources=function(o){for(var u in this.sourceCaches)this.sourceCaches[u].update(o)},s.prototype._generateCollisionBoxes=function(){for(var o in this.sourceCaches)this._reloadSource(o)},s.prototype._updatePlacement=function(o,u,m,v,x){x===void 0&&(x=!1);for(var E=!1,I=!1,M={},F=0,U=this._order;F<U.length;F+=1){var V=this._layers[U[F]];if(V.type==="symbol"){if(!M[V.source]){var X=this.sourceCaches[V.source];M[V.source]=X.getRenderableIds(!0).map(function(oe){return X.getTileByID(oe)}).sort(function(oe,fe){return fe.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(fe.tileID)?-1:1)})}var K=this.crossTileSymbolIndex.addLayer(V,M[V.source],o.center.lng);E=E||K}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.browser.now(),o.zoom))&&(this.pauseablePlacement=new Fs(o,this._order,x,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.browser.now()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(var te=0,H=this._order;te<H.length;te+=1){var ee=this._layers[H[te]];ee.type==="symbol"&&this.placement.updateLayerOpacities(ee,M[ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()},s.prototype.getImages=function(o,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();var v=this.sourceCaches[u.source];v&&v.setDependencies(u.tileID.key,u.type,u.icons)},s.prototype.getGlyphs=function(o,u,m){this.glyphManager.getGlyphs(u.stacks,m)},s.prototype.getResource=function(o,u,m){return h.makeRequest(u,m)},s}(h.Evented);pn.getSourceType=function(n){return Te[n]},pn.setSourceType=function(n,s){Te[n]=s},pn.registerForPluginStateChange=h.registerForPluginStateChange;var ei=h.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ja=br(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Gp=br(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Sd=br(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Td=br(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),sc=br("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lc=br(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),uc=br(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),cc=br("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Wp=br("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Kp=br("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Cd=br(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ns=br(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Us=br(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),$p=br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Pi=br(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),pc=br(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),jo=br(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),qo=br(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ga=br(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ya=br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Zo=br(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),va=br(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),_a=br(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ho=br(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Xp=br(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Jp=br(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function br(n,s){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=s.match(/attribute ([\w]+) ([\w]+)/g),m=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=v?v.concat(m):m,E={};return{fragmentSource:n=n.replace(o,function(I,M,F,U,V){return E[V]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_`+V+`
varying `+F+" "+U+" "+V+`;
#else
uniform `+F+" "+U+" u_"+V+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+V+`
    `+F+" "+U+" "+V+" = u_"+V+`;
#endif
`}),vertexSource:s=s.replace(o,function(I,M,F,U,V){var X=U==="float"?"vec2":"vec4",K=V.match(/color/)?"color":X;return E[V]?M==="define"?`
#ifndef HAS_UNIFORM_u_`+V+`
uniform lowp float u_`+V+`_t;
attribute `+F+" "+X+" a_"+V+`;
varying `+F+" "+U+" "+V+`;
#else
uniform `+F+" "+U+" u_"+V+`;
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_`+V+`
    `+V+" = a_"+V+`;
#else
    `+F+" "+U+" "+V+" = u_"+V+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+V+`
    `+V+" = unpack_mix_"+K+"(a_"+V+", u_"+V+`_t);
#else
    `+F+" "+U+" "+V+" = u_"+V+`;
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_`+V+`
uniform lowp float u_`+V+`_t;
attribute `+F+" "+X+" a_"+V+`;
#else
uniform `+F+" "+U+" u_"+V+`;
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_`+V+`
    `+F+" "+U+" "+V+" = a_"+V+`;
#else
    `+F+" "+U+" "+V+" = u_"+V+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+V+`
    `+F+" "+U+" "+V+" = unpack_mix_"+K+"(a_"+V+", u_"+V+`_t);
#else
    `+F+" "+U+" "+V+" = u_"+V+`;
#endif
`}),staticAttributes:u,staticUniforms:x}}var Id=Object.freeze({__proto__:null,prelude:Ja,background:Gp,backgroundPattern:Sd,circle:Td,clippingMask:sc,heatmap:lc,heatmapTexture:uc,collisionBox:cc,collisionCircle:Wp,debug:Kp,fill:Cd,fillOutline:Ns,fillOutlinePattern:Us,fillPattern:$p,fillExtrusion:Pi,fillExtrusionPattern:pc,hillshadePrepare:jo,hillshade:qo,line:ga,lineGradient:ya,linePattern:Zo,lineSDF:va,raster:_a,symbolIcon:Ho,symbolSDF:Xp,symbolTextAndIcon:Jp}),jl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Yp(n){for(var s=[],o=0;o<n.length;o++)if(n[o]!==null){var u=n[o].split(" ");s.push(u.pop())}return s}jl.prototype.bind=function(n,s,o,u,m,v,x,E){this.context=n;for(var I=this.boundPaintVertexBuffers.length!==u.length,M=0;!I&&M<u.length;M++)this.boundPaintVertexBuffers[M]!==u[M]&&(I=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===o&&!I&&this.boundIndexBuffer===m&&this.boundVertexOffset===v&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===E?(n.bindVertexArrayOES.set(this.vao),x&&x.bind(),m&&m.dynamicDraw&&m.bind(),E&&E.bind()):this.freshBind(s,o,u,m,v,x,E)},jl.prototype.freshBind=function(n,s,o,u,m,v,x){var E,I=n.numAttributes,M=this.context,F=M.gl;if(M.extVertexArrayObject)this.vao&&this.destroy(),this.vao=M.extVertexArrayObject.createVertexArrayOES(),M.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=u,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=v,this.boundDynamicVertexBuffer2=x;else{E=M.currentNumAttributes||0;for(var U=I;U<E;U++)F.disableVertexAttribArray(U)}s.enableAttributes(F,n);for(var V=0,X=o;V<X.length;V+=1)X[V].enableAttributes(F,n);v&&v.enableAttributes(F,n),x&&x.enableAttributes(F,n),s.bind(),s.setVertexAttribPointers(F,n,m);for(var K=0,te=o;K<te.length;K+=1){var H=te[K];H.bind(),H.setVertexAttribPointers(F,n,m)}v&&(v.bind(),v.setVertexAttribPointers(F,n,m)),u&&u.bind(),x&&(x.bind(),x.setVertexAttribPointers(F,n,m)),M.currentNumAttributes=I},jl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Qp=function(n,s,o,u,m,v){var x=n.gl;this.program=x.createProgram();for(var E=Yp(o.staticAttributes),I=u?u.getBinderAttributes():[],M=E.concat(I),F=o.staticUniforms?Yp(o.staticUniforms):[],U=u?u.getBinderUniforms():[],V=[],X=0,K=F.concat(U);X<K.length;X+=1){var te=K[X];V.indexOf(te)<0&&V.push(te)}var H=u?u.defines():[];v&&H.push("#define OVERDRAW_INSPECTOR;");var ee=H.concat(Ja.fragmentSource,o.fragmentSource).join(`
`),oe=H.concat(Ja.vertexSource,o.vertexSource).join(`
`),fe=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(fe,ee),x.compileShader(fe),x.attachShader(this.program,fe);var Ee=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())this.failedToCreate=!0;else{x.shaderSource(Ee,oe),x.compileShader(Ee),x.attachShader(this.program,Ee),this.attributes={};var xe={};this.numAttributes=M.length;for(var Ce=0;Ce<this.numAttributes;Ce++)M[Ce]&&(x.bindAttribLocation(this.program,Ce,M[Ce]),this.attributes[M[Ce]]=Ce);x.linkProgram(this.program),x.deleteShader(Ee),x.deleteShader(fe);for(var Be=0;Be<V.length;Be++){var $e=V[Be];if($e&&!xe[$e]){var Ke=x.getUniformLocation(this.program,$e);Ke&&(xe[$e]=Ke)}}this.fixedUniforms=m(n,xe),this.binderUniforms=u?u.getUniforms(n,xe):[]}}};function eh(n,s,o){var u=1/zr(o,1,s.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),v=o.tileSize*Math.pow(2,s.transform.tileZoom)/m,x=v*(o.tileID.canonical.x+o.tileID.wrap*m),E=v*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[u,n.fromScale,n.toScale],u_fade:n.t,u_pixel_coord_upper:[x>>16,E>>16],u_pixel_coord_lower:[65535&x,65535&E]}}Qp.prototype.draw=function(n,s,o,u,m,v,x,E,I,M,F,U,V,X,K,te){var H,ee=n.gl;if(!this.failedToCreate){for(var oe in n.program.set(this.program),n.setDepthMode(o),n.setStencilMode(u),n.setColorMode(m),n.setCullFace(v),this.fixedUniforms)this.fixedUniforms[oe].set(x[oe]);X&&X.setUniforms(n,this.binderUniforms,U,{zoom:V});for(var fe=(H={},H[ee.LINES]=2,H[ee.TRIANGLES]=3,H[ee.LINE_STRIP]=1,H)[s],Ee=0,xe=F.get();Ee<xe.length;Ee+=1){var Ce=xe[Ee],Be=Ce.vaos||(Ce.vaos={});(Be[E]||(Be[E]=new jl)).bind(n,this,I,X?X.getPaintVertexBuffers():[],M,Ce.vertexOffset,K,te),ee.drawElements(s,Ce.primitiveLength*fe,ee.UNSIGNED_SHORT,Ce.primitiveOffset*fe*2)}}};var th=function(n,s,o,u){var m=s.style.light,v=m.properties.get("position"),x=[v.x,v.y,v.z],E=h.create$1();m.properties.get("anchor")==="viewport"&&h.fromRotation(E,-s.transform.angle),h.transformMat3(x,x,E);var I=m.properties.get("color");return{u_matrix:n,u_lightpos:x,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+o,u_opacity:u}},xa=function(n,s,o,u,m,v,x){return h.extend(th(n,s,o,u),eh(v,s,x),{u_height_factor:-Math.pow(2,m.overscaledZ)/x.tileSize/8})},Go=function(n){return{u_matrix:n}},ba=function(n,s,o,u){return h.extend(Go(n),eh(o,s,u))},rh=function(n,s){return{u_matrix:n,u_world:s}},ih=function(n,s,o,u,m){return h.extend(ba(n,s,o,u),{u_world:m})},hc=function(n,s,o,u){var m,v,x=n.transform;if(u.paint.get("circle-pitch-alignment")==="map"){var E=zr(o,1,x.zoom);m=!0,v=[E,E]}else m=!1,v=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:n.translatePosMatrix(s.posMatrix,o,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:h.browser.devicePixelRatio,u_extrude_scale:v}},wa=function(n,s,o){var u=zr(o,1,s.zoom),m=Math.pow(2,s.zoom-o.tileID.overscaledZ),v=o.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:u,u_extrude_scale:[s.pixelsToGLUnits[0]/(u*m),s.pixelsToGLUnits[1]/(u*m)],u_overscale_factor:v}},nh=function(n,s,o){return{u_matrix:n,u_inv_matrix:s,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}},Ea=function(n,s,o){return o===void 0&&(o=1),{u_matrix:n,u_color:s,u_overlay:0,u_overlay_scale:o}},Sa=function(n){return{u_matrix:n}},oh=function(n,s,o,u){return{u_matrix:n,u_extrude_scale:zr(s,1,o),u_intensity:u}},Vs=function(n,s,o){var u=n.transform;return{u_matrix:ah(n,s,o),u_ratio:1/zr(s,1,u.zoom),u_device_pixel_ratio:h.browser.devicePixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},Tr=function(n,s,o,u){return h.extend(Vs(n,s,o),{u_image:0,u_image_height:u})},ql=function(n,s,o,u){var m=n.transform,v=Ya(s,m);return{u_matrix:ah(n,s,o),u_texsize:s.imageAtlasTexture.size,u_ratio:1/zr(s,1,m.zoom),u_device_pixel_ratio:h.browser.devicePixelRatio,u_image:0,u_scale:[v,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ad=function(n,s,o,u,m){var v=n.lineAtlas,x=Ya(s,n.transform),E=o.layout.get("line-cap")==="round",I=v.getDash(u.from,E),M=v.getDash(u.to,E),F=I.width*m.fromScale,U=M.width*m.toScale;return h.extend(Vs(n,s,o),{u_patternscale_a:[x/F,-I.height/2],u_patternscale_b:[x/U,-M.height/2],u_sdfgamma:v.width/(256*Math.min(F,U)*h.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:M.y,u_mix:m.t})};function Ya(n,s){return 1/zr(n,1,s.tileZoom)}function ah(n,s,o){return n.translatePosMatrix(s.tileID.posMatrix,s,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var kd=function(n,s,o,u,m){return{u_matrix:n,u_tl_parent:s,u_scale_parent:o,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(x=m.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:sh(m.paint.get("raster-hue-rotate"))};var v,x};function sh(n){n*=Math.PI/180;var s=Math.sin(n),o=Math.cos(n);return[(2*o+1)/3,(-Math.sqrt(3)*s-o+1)/3,(Math.sqrt(3)*s-o+1)/3]}var Zl,Qa=function(n,s,o,u,m,v,x,E,I,M){var F=m.transform;return{u_is_size_zoom_constant:+(n==="constant"||n==="source"),u_is_size_feature_constant:+(n==="constant"||n==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:F.width/F.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:x,u_coord_matrix:E,u_is_text:+I,u_pitch_with_map:+u,u_texsize:M,u_texture:0}},js=function(n,s,o,u,m,v,x,E,I,M,F){var U=m.transform;return h.extend(Qa(n,s,o,u,m,v,x,E,I,M),{u_gamma_scale:u?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:h.browser.devicePixelRatio,u_is_halo:+F})},Hl=function(n,s,o,u,m,v,x,E,I,M){return h.extend(js(n,s,o,u,m,v,x,E,!0,I,!0),{u_texsize_icon:M,u_texture_icon:1})},qs=function(n,s,o){return{u_matrix:n,u_opacity:s,u_color:o}},es=function(n,s,o,u,m,v){return h.extend(function(x,E,I,M){var F=I.imageManager.getPattern(x.from.toString()),U=I.imageManager.getPattern(x.to.toString()),V=I.imageManager.getPixelSize(),X=V.width,K=V.height,te=Math.pow(2,M.tileID.overscaledZ),H=M.tileSize*Math.pow(2,I.transform.tileZoom)/te,ee=H*(M.tileID.canonical.x+M.tileID.wrap*te),oe=H*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,K],u_mix:E.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/zr(M,1,I.transform.tileZoom),u_pixel_coord_upper:[ee>>16,oe>>16],u_pixel_coord_lower:[65535&ee,65535&oe]}}(u,v,o,m),{u_matrix:n,u_opacity:s})},lh={fillExtrusion:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_lightpos:new h.Uniform3f(n,s.u_lightpos),u_lightintensity:new h.Uniform1f(n,s.u_lightintensity),u_lightcolor:new h.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new h.Uniform1f(n,s.u_vertical_gradient),u_opacity:new h.Uniform1f(n,s.u_opacity)}},fillExtrusionPattern:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_lightpos:new h.Uniform3f(n,s.u_lightpos),u_lightintensity:new h.Uniform1f(n,s.u_lightintensity),u_lightcolor:new h.Uniform3f(n,s.u_lightcolor),u_vertical_gradient:new h.Uniform1f(n,s.u_vertical_gradient),u_height_factor:new h.Uniform1f(n,s.u_height_factor),u_image:new h.Uniform1i(n,s.u_image),u_texsize:new h.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new h.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new h.Uniform3f(n,s.u_scale),u_fade:new h.Uniform1f(n,s.u_fade),u_opacity:new h.Uniform1f(n,s.u_opacity)}},fill:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix)}},fillPattern:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_image:new h.Uniform1i(n,s.u_image),u_texsize:new h.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new h.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new h.Uniform3f(n,s.u_scale),u_fade:new h.Uniform1f(n,s.u_fade)}},fillOutline:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_world:new h.Uniform2f(n,s.u_world)}},fillOutlinePattern:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_world:new h.Uniform2f(n,s.u_world),u_image:new h.Uniform1i(n,s.u_image),u_texsize:new h.Uniform2f(n,s.u_texsize),u_pixel_coord_upper:new h.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(n,s.u_pixel_coord_lower),u_scale:new h.Uniform3f(n,s.u_scale),u_fade:new h.Uniform1f(n,s.u_fade)}},circle:function(n,s){return{u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_scale_with_map:new h.Uniform1i(n,s.u_scale_with_map),u_pitch_with_map:new h.Uniform1i(n,s.u_pitch_with_map),u_extrude_scale:new h.Uniform2f(n,s.u_extrude_scale),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_matrix:new h.UniformMatrix4f(n,s.u_matrix)}},collisionBox:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_pixels_to_tile_units:new h.Uniform1f(n,s.u_pixels_to_tile_units),u_extrude_scale:new h.Uniform2f(n,s.u_extrude_scale),u_overscale_factor:new h.Uniform1f(n,s.u_overscale_factor)}},collisionCircle:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_inv_matrix:new h.UniformMatrix4f(n,s.u_inv_matrix),u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_viewport_size:new h.Uniform2f(n,s.u_viewport_size)}},debug:function(n,s){return{u_color:new h.UniformColor(n,s.u_color),u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_overlay:new h.Uniform1i(n,s.u_overlay),u_overlay_scale:new h.Uniform1f(n,s.u_overlay_scale)}},clippingMask:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix)}},heatmap:function(n,s){return{u_extrude_scale:new h.Uniform1f(n,s.u_extrude_scale),u_intensity:new h.Uniform1f(n,s.u_intensity),u_matrix:new h.UniformMatrix4f(n,s.u_matrix)}},heatmapTexture:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_world:new h.Uniform2f(n,s.u_world),u_image:new h.Uniform1i(n,s.u_image),u_color_ramp:new h.Uniform1i(n,s.u_color_ramp),u_opacity:new h.Uniform1f(n,s.u_opacity)}},hillshade:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_image:new h.Uniform1i(n,s.u_image),u_latrange:new h.Uniform2f(n,s.u_latrange),u_light:new h.Uniform2f(n,s.u_light),u_shadow:new h.UniformColor(n,s.u_shadow),u_highlight:new h.UniformColor(n,s.u_highlight),u_accent:new h.UniformColor(n,s.u_accent)}},hillshadePrepare:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_image:new h.Uniform1i(n,s.u_image),u_dimension:new h.Uniform2f(n,s.u_dimension),u_zoom:new h.Uniform1f(n,s.u_zoom),u_unpack:new h.Uniform4f(n,s.u_unpack)}},line:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_ratio:new h.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(n,s.u_units_to_pixels)}},lineGradient:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_ratio:new h.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(n,s.u_units_to_pixels),u_image:new h.Uniform1i(n,s.u_image),u_image_height:new h.Uniform1f(n,s.u_image_height)}},linePattern:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_texsize:new h.Uniform2f(n,s.u_texsize),u_ratio:new h.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_image:new h.Uniform1i(n,s.u_image),u_units_to_pixels:new h.Uniform2f(n,s.u_units_to_pixels),u_scale:new h.Uniform3f(n,s.u_scale),u_fade:new h.Uniform1f(n,s.u_fade)}},lineSDF:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_ratio:new h.Uniform1f(n,s.u_ratio),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_units_to_pixels:new h.Uniform2f(n,s.u_units_to_pixels),u_patternscale_a:new h.Uniform2f(n,s.u_patternscale_a),u_patternscale_b:new h.Uniform2f(n,s.u_patternscale_b),u_sdfgamma:new h.Uniform1f(n,s.u_sdfgamma),u_image:new h.Uniform1i(n,s.u_image),u_tex_y_a:new h.Uniform1f(n,s.u_tex_y_a),u_tex_y_b:new h.Uniform1f(n,s.u_tex_y_b),u_mix:new h.Uniform1f(n,s.u_mix)}},raster:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_tl_parent:new h.Uniform2f(n,s.u_tl_parent),u_scale_parent:new h.Uniform1f(n,s.u_scale_parent),u_buffer_scale:new h.Uniform1f(n,s.u_buffer_scale),u_fade_t:new h.Uniform1f(n,s.u_fade_t),u_opacity:new h.Uniform1f(n,s.u_opacity),u_image0:new h.Uniform1i(n,s.u_image0),u_image1:new h.Uniform1i(n,s.u_image1),u_brightness_low:new h.Uniform1f(n,s.u_brightness_low),u_brightness_high:new h.Uniform1f(n,s.u_brightness_high),u_saturation_factor:new h.Uniform1f(n,s.u_saturation_factor),u_contrast_factor:new h.Uniform1f(n,s.u_contrast_factor),u_spin_weights:new h.Uniform3f(n,s.u_spin_weights)}},symbolIcon:function(n,s){return{u_is_size_zoom_constant:new h.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new h.Uniform1f(n,s.u_size_t),u_size:new h.Uniform1f(n,s.u_size),u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new h.Uniform1f(n,s.u_pitch),u_rotate_symbol:new h.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new h.Uniform1f(n,s.u_fade_change),u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new h.Uniform1i(n,s.u_is_text),u_pitch_with_map:new h.Uniform1i(n,s.u_pitch_with_map),u_texsize:new h.Uniform2f(n,s.u_texsize),u_texture:new h.Uniform1i(n,s.u_texture)}},symbolSDF:function(n,s){return{u_is_size_zoom_constant:new h.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new h.Uniform1f(n,s.u_size_t),u_size:new h.Uniform1f(n,s.u_size),u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new h.Uniform1f(n,s.u_pitch),u_rotate_symbol:new h.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new h.Uniform1f(n,s.u_fade_change),u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new h.Uniform1i(n,s.u_is_text),u_pitch_with_map:new h.Uniform1i(n,s.u_pitch_with_map),u_texsize:new h.Uniform2f(n,s.u_texsize),u_texture:new h.Uniform1i(n,s.u_texture),u_gamma_scale:new h.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(n,s.u_is_halo)}},symbolTextAndIcon:function(n,s){return{u_is_size_zoom_constant:new h.Uniform1i(n,s.u_is_size_zoom_constant),u_is_size_feature_constant:new h.Uniform1i(n,s.u_is_size_feature_constant),u_size_t:new h.Uniform1f(n,s.u_size_t),u_size:new h.Uniform1f(n,s.u_size),u_camera_to_center_distance:new h.Uniform1f(n,s.u_camera_to_center_distance),u_pitch:new h.Uniform1f(n,s.u_pitch),u_rotate_symbol:new h.Uniform1i(n,s.u_rotate_symbol),u_aspect_ratio:new h.Uniform1f(n,s.u_aspect_ratio),u_fade_change:new h.Uniform1f(n,s.u_fade_change),u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_label_plane_matrix:new h.UniformMatrix4f(n,s.u_label_plane_matrix),u_coord_matrix:new h.UniformMatrix4f(n,s.u_coord_matrix),u_is_text:new h.Uniform1i(n,s.u_is_text),u_pitch_with_map:new h.Uniform1i(n,s.u_pitch_with_map),u_texsize:new h.Uniform2f(n,s.u_texsize),u_texsize_icon:new h.Uniform2f(n,s.u_texsize_icon),u_texture:new h.Uniform1i(n,s.u_texture),u_texture_icon:new h.Uniform1i(n,s.u_texture_icon),u_gamma_scale:new h.Uniform1f(n,s.u_gamma_scale),u_device_pixel_ratio:new h.Uniform1f(n,s.u_device_pixel_ratio),u_is_halo:new h.Uniform1i(n,s.u_is_halo)}},background:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_opacity:new h.Uniform1f(n,s.u_opacity),u_color:new h.UniformColor(n,s.u_color)}},backgroundPattern:function(n,s){return{u_matrix:new h.UniformMatrix4f(n,s.u_matrix),u_opacity:new h.Uniform1f(n,s.u_opacity),u_image:new h.Uniform1i(n,s.u_image),u_pattern_tl_a:new h.Uniform2f(n,s.u_pattern_tl_a),u_pattern_br_a:new h.Uniform2f(n,s.u_pattern_br_a),u_pattern_tl_b:new h.Uniform2f(n,s.u_pattern_tl_b),u_pattern_br_b:new h.Uniform2f(n,s.u_pattern_br_b),u_texsize:new h.Uniform2f(n,s.u_texsize),u_mix:new h.Uniform1f(n,s.u_mix),u_pattern_size_a:new h.Uniform2f(n,s.u_pattern_size_a),u_pattern_size_b:new h.Uniform2f(n,s.u_pattern_size_b),u_scale_a:new h.Uniform1f(n,s.u_scale_a),u_scale_b:new h.Uniform1f(n,s.u_scale_b),u_pixel_coord_upper:new h.Uniform2f(n,s.u_pixel_coord_upper),u_pixel_coord_lower:new h.Uniform2f(n,s.u_pixel_coord_lower),u_tile_units_to_pixels:new h.Uniform1f(n,s.u_tile_units_to_pixels)}}};function ts(n,s,o,u,m,v,x){for(var E=n.context,I=E.gl,M=n.useProgram("collisionBox"),F=[],U=0,V=0,X=0;X<u.length;X++){var K=u[X],te=s.getTile(K),H=te.getBucket(o);if(H){var ee=K.posMatrix;m[0]===0&&m[1]===0||(ee=n.translatePosMatrix(K.posMatrix,te,m,v));var oe=x?H.textCollisionBox:H.iconCollisionBox,fe=H.collisionCircleArray;if(fe.length>0){var Ee=h.create(),xe=ee;h.mul(Ee,H.placementInvProjMatrix,n.transform.glCoordMatrix),h.mul(Ee,Ee,H.placementViewportMatrix),F.push({circleArray:fe,circleOffset:V,transform:xe,invTransform:Ee}),V=U+=fe.length/4}oe&&M.draw(E,I.LINES,j.disabled,$.disabled,n.colorModeForRenderPass(),se.disabled,wa(ee,n.transform,te),o.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,null,n.transform.zoom,null,null,oe.collisionVertexBuffer)}}if(x&&F.length){var Ce=n.useProgram("collisionCircle"),Be=new h.StructArrayLayout2f1f2i16;Be.resize(4*U),Be._trim();for(var $e=0,Ke=0,ut=F;Ke<ut.length;Ke+=1)for(var wt=ut[Ke],Ct=0;Ct<wt.circleArray.length/4;Ct++){var Tt=4*Ct,ir=wt.circleArray[Tt+0],pt=wt.circleArray[Tt+1],Lt=wt.circleArray[Tt+2],Ft=wt.circleArray[Tt+3];Be.emplace($e++,ir,pt,Lt,Ft,0),Be.emplace($e++,ir,pt,Lt,Ft,1),Be.emplace($e++,ir,pt,Lt,Ft,2),Be.emplace($e++,ir,pt,Lt,Ft,3)}(!Zl||Zl.length<2*U)&&(Zl=function(jr){var Bi=2*jr,Ei=new h.StructArrayLayout3ui6;Ei.resize(Bi),Ei._trim();for(var Nr=0;Nr<Bi;Nr++){var $r=6*Nr;Ei.uint16[$r+0]=4*Nr+0,Ei.uint16[$r+1]=4*Nr+1,Ei.uint16[$r+2]=4*Nr+2,Ei.uint16[$r+3]=4*Nr+2,Ei.uint16[$r+4]=4*Nr+3,Ei.uint16[$r+5]=4*Nr+0}return Ei}(U));for(var Mt=E.createIndexBuffer(Zl,!0),zt=E.createVertexBuffer(Be,h.collisionCircleLayout.members,!0),Bt=0,Pt=F;Bt<Pt.length;Bt+=1){var It=Pt[Bt],mi=nh(It.transform,It.invTransform,n.transform);Ce.draw(E,I.TRIANGLES,j.disabled,$.disabled,n.colorModeForRenderPass(),se.disabled,mi,o.id,zt,Mt,h.SegmentVector.simpleSegment(0,2*It.circleOffset,It.circleArray.length,It.circleArray.length/2),null,n.transform.zoom,null,null,null)}zt.destroy(),Mt.destroy()}}var Jn=h.identity(new Float32Array(16));function uh(n,s,o,u,m,v){var x=h.getAnchorAlignment(n),E=-(x.horizontalAlign-.5)*s,I=-(x.verticalAlign-.5)*o,M=h.evaluateVariableOffset(n,u);return new h.Point((E/m+M[0])*v,(I/m+M[1])*v)}function ch(n,s,o,u,m,v,x,E,I,M,F){var U=n.text.placedSymbolArray,V=n.text.dynamicLayoutVertexArray,X=n.icon.dynamicLayoutVertexArray,K={};V.clear();for(var te=0;te<U.length;te++){var H=U.get(te),ee=H.hidden||!H.crossTileID||n.allowVerticalPlacement&&!H.placedOrientation?null:u[H.crossTileID];if(ee){var oe=new h.Point(H.anchorX,H.anchorY),fe=$t(oe,o?E:x),Ee=cr(v.cameraToCenterDistance,fe.signedDistanceFromCamera),xe=m.evaluateSizeForFeature(n.textSizeData,M,H)*Ee/h.ONE_EM;o&&(xe*=n.tilePixelRatio/I);for(var Ce=uh(ee.anchor,ee.width,ee.height,ee.textOffset,ee.textBoxScale,xe),Be=o?$t(oe.add(Ce),x).point:fe.point.add(s?Ce.rotate(-v.angle):Ce),$e=n.allowVerticalPlacement&&H.placedOrientation===h.WritingMode.vertical?Math.PI/2:0,Ke=0;Ke<H.numGlyphs;Ke++)h.addDynamicAttributes(V,Be,$e);F&&H.associatedIconIndex>=0&&(K[H.associatedIconIndex]={shiftedAnchor:Be,angle:$e})}else Zi(H.numGlyphs,V)}if(F){X.clear();for(var ut=n.icon.placedSymbolArray,wt=0;wt<ut.length;wt++){var Ct=ut.get(wt);if(Ct.hidden)Zi(Ct.numGlyphs,X);else{var Tt=K[wt];if(Tt)for(var ir=0;ir<Ct.numGlyphs;ir++)h.addDynamicAttributes(X,Tt.shiftedAnchor,Tt.angle);else Zi(Ct.numGlyphs,X)}}n.icon.dynamicLayoutVertexBuffer.updateData(X)}n.text.dynamicLayoutVertexBuffer.updateData(V)}function ph(n,s,o){return o.iconsInText&&s?"symbolTextAndIcon":n?"symbolSDF":"symbolIcon"}function Ta(n,s,o,u,m,v,x,E,I,M,F,U){for(var V=n.context,X=V.gl,K=n.transform,te=E==="map",H=I==="map",ee=te&&o.layout.get("symbol-placement")!=="point",oe=te&&!H&&!ee,fe=o.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ee=!1,xe=n.depthModeForSublayer(0,j.ReadOnly),Ce=o.layout.get("text-variable-anchor"),Be=[],$e=0,Ke=u;$e<Ke.length;$e+=1){var ut=Ke[$e],wt=s.getTile(ut),Ct=wt.getBucket(o);if(Ct){var Tt=m?Ct.text:Ct.icon;if(Tt&&Tt.segments.get().length){var ir=Tt.programConfigurations.get(o.id),pt=m||Ct.sdfIcons,Lt=m?Ct.textSizeData:Ct.iconSizeData,Ft=H||K.pitch!==0,Mt=n.useProgram(ph(pt,m,Ct),ir),zt=h.evaluateSizeForZoom(Lt,K.zoom),Bt=void 0,Pt=[0,0],It=void 0,mi=void 0,jr=null,Bi=void 0;if(m)It=wt.glyphAtlasTexture,mi=X.LINEAR,Bt=wt.glyphAtlasTexture.size,Ct.iconsInText&&(Pt=wt.imageAtlasTexture.size,jr=wt.imageAtlasTexture,Bi=Ft||n.options.rotating||n.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?X.LINEAR:X.NEAREST);else{var Ei=o.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;It=wt.imageAtlasTexture,mi=pt||n.options.rotating||n.options.zooming||Ei||Ft?X.LINEAR:X.NEAREST,Bt=wt.imageAtlasTexture.size}var Nr=zr(wt,1,n.transform.zoom),$r=Wr(ut.posMatrix,H,te,n.transform,Nr),yn=vr(ut.posMatrix,H,te,n.transform,Nr),Ki=Ce&&Ct.hasTextData(),Yo=o.layout.get("icon-text-fit")!=="none"&&Ki&&Ct.hasIconData();ee&&Rs(Ct,ut.posMatrix,n,m,$r,yn,H,M);var rn=n.translatePosMatrix(ut.posMatrix,wt,v,x),ro=ee||m&&Ce||Yo?Jn:$r,Nn=n.translatePosMatrix(yn,wt,v,x,!0),tl=pt&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ss={program:Mt,buffers:Tt,uniformValues:pt?Ct.iconsInText?Hl(Lt.kind,zt,oe,H,n,rn,ro,Nn,Bt,Pt):js(Lt.kind,zt,oe,H,n,rn,ro,Nn,m,Bt,!0):Qa(Lt.kind,zt,oe,H,n,rn,ro,Nn,m,Bt),atlasTexture:It,atlasTextureIcon:jr,atlasInterpolation:mi,atlasInterpolationIcon:Bi,isSDF:pt,hasHalo:tl};if(fe&&Ct.canOverlap){Ee=!0;for(var Qo=0,ls=Tt.segments.get();Qo<ls.length;Qo+=1){var rl=ls[Qo];Be.push({segments:new h.SegmentVector([rl]),sortKey:rl.sortKey,state:ss})}}else Be.push({segments:Tt.segments,sortKey:0,state:ss})}}}Ee&&Be.sort(function(ea,za){return ea.sortKey-za.sortKey});for(var mo=0,il=Be;mo<il.length;mo+=1){var go=il[mo],gi=go.state;if(V.activeTexture.set(X.TEXTURE0),gi.atlasTexture.bind(gi.atlasInterpolation,X.CLAMP_TO_EDGE),gi.atlasTextureIcon&&(V.activeTexture.set(X.TEXTURE1),gi.atlasTextureIcon&&gi.atlasTextureIcon.bind(gi.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),gi.isSDF){var Po=gi.uniformValues;gi.hasHalo&&(Po.u_is_halo=1,Zs(gi.buffers,go.segments,o,n,gi.program,xe,F,U,Po)),Po.u_is_halo=0}Zs(gi.buffers,go.segments,o,n,gi.program,xe,F,U,gi.uniformValues)}}function Zs(n,s,o,u,m,v,x,E,I){var M=u.context;m.draw(M,M.gl.TRIANGLES,v,x,E,se.disabled,I,o.id,n.layoutVertexBuffer,n.indexBuffer,s,o.paint,u.transform.zoom,n.programConfigurations.get(o.id),n.dynamicLayoutVertexBuffer,n.opacityVertexBuffer)}function Gl(n,s,o,u,m,v,x){var E,I,M,F,U,V=n.context.gl,X=o.paint.get("fill-pattern"),K=X&&X.constantOr(1),te=o.getCrossfadeParameters();x?(I=K&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=V.LINES):(I=K?"fillPattern":"fill",E=V.TRIANGLES);for(var H=0,ee=u;H<ee.length;H+=1){var oe=ee[H],fe=s.getTile(oe);if(!K||fe.patternsLoaded()){var Ee=fe.getBucket(o);if(Ee){var xe=Ee.programConfigurations.get(o.id),Ce=n.useProgram(I,xe);K&&(n.context.activeTexture.set(V.TEXTURE0),fe.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),xe.updatePaintBuffers(te));var Be=X.constantOr(null);if(Be&&fe.imageAtlas){var $e=fe.imageAtlas,Ke=$e.patternPositions[Be.to.toString()],ut=$e.patternPositions[Be.from.toString()];Ke&&ut&&xe.setConstantPatternPositions(Ke,ut)}var wt=n.translatePosMatrix(oe.posMatrix,fe,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(x){F=Ee.indexBuffer2,U=Ee.segments2;var Ct=[V.drawingBufferWidth,V.drawingBufferHeight];M=I==="fillOutlinePattern"&&K?ih(wt,n,te,fe,Ct):rh(wt,Ct)}else F=Ee.indexBuffer,U=Ee.segments,M=K?ba(wt,n,te,fe):Go(wt);Ce.draw(n.context,E,m,n.stencilModeForClipping(oe),v,se.disabled,M,o.id,Ee.layoutVertexBuffer,F,U,o.paint,n.transform.zoom,xe)}}}}function fc(n,s,o,u,m,v,x){for(var E=n.context,I=E.gl,M=o.paint.get("fill-extrusion-pattern"),F=M.constantOr(1),U=o.getCrossfadeParameters(),V=o.paint.get("fill-extrusion-opacity"),X=0,K=u;X<K.length;X+=1){var te=K[X],H=s.getTile(te),ee=H.getBucket(o);if(ee){var oe=ee.programConfigurations.get(o.id),fe=n.useProgram(F?"fillExtrusionPattern":"fillExtrusion",oe);F&&(n.context.activeTexture.set(I.TEXTURE0),H.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),oe.updatePaintBuffers(U));var Ee=M.constantOr(null);if(Ee&&H.imageAtlas){var xe=H.imageAtlas,Ce=xe.patternPositions[Ee.to.toString()],Be=xe.patternPositions[Ee.from.toString()];Ce&&Be&&oe.setConstantPatternPositions(Ce,Be)}var $e=n.translatePosMatrix(te.posMatrix,H,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Ke=o.paint.get("fill-extrusion-vertical-gradient"),ut=F?xa($e,n,Ke,V,te,U,H):th($e,n,Ke,V);fe.draw(E,E.gl.TRIANGLES,m,v,x,se.backCCW,ut,o.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,o.paint,n.transform.zoom,oe)}}}function Wl(n,s,o,u,m,v){var x=n.context,E=x.gl,I=s.fbo;if(I){var M=n.useProgram("hillshade");x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get());var F=function(U,V,X){var K=X.paint.get("hillshade-shadow-color"),te=X.paint.get("hillshade-highlight-color"),H=X.paint.get("hillshade-accent-color"),ee=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(ee-=U.transform.angle);var oe,fe,Ee,xe=!U.options.moving;return{u_matrix:U.transform.calculatePosMatrix(V.tileID.toUnwrapped(),xe),u_image:0,u_latrange:(oe=V.tileID,fe=Math.pow(2,oe.canonical.z),Ee=oe.canonical.y,[new h.MercatorCoordinate(0,Ee/fe).toLngLat().lat,new h.MercatorCoordinate(0,(Ee+1)/fe).toLngLat().lat]),u_light:[X.paint.get("hillshade-exaggeration"),ee],u_shadow:K,u_highlight:te,u_accent:H}}(n,s,o);M.draw(x,E.TRIANGLES,u,m,v,se.disabled,F,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}}function Pd(n,s,o,u,m,v){var x=n.context,E=x.gl,I=s.dem;if(I&&I.data){var M=I.dim,F=I.stride,U=I.getPixels();if(x.activeTexture.set(E.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||n.getTileTexture(F),s.demTexture){var V=s.demTexture;V.update(U,{premultiply:!1}),V.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else s.demTexture=new h.Texture(x,U,E.RGBA,{premultiply:!1}),s.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);x.activeTexture.set(E.TEXTURE0);var X=s.fbo;if(!X){var K=new h.Texture(x,{width:M,height:M,data:null},E.RGBA);K.bind(E.LINEAR,E.CLAMP_TO_EDGE),(X=s.fbo=x.createFramebuffer(M,M,!0)).colorAttachment.set(K.texture)}x.bindFramebuffer.set(X.framebuffer),x.viewport.set([0,0,M,M]),n.useProgram("hillshadePrepare").draw(x,E.TRIANGLES,u,m,v,se.disabled,function(te,H){var ee=H.stride,oe=h.create();return h.ortho(oe,0,h.EXTENT,-h.EXTENT,0,0,1),h.translate(oe,oe,[0,-h.EXTENT,0]),{u_matrix:oe,u_image:1,u_dimension:[ee,ee],u_zoom:te.overscaledZ,u_unpack:H.getUnpackVector()}}(s.tileID,I),o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Kl(n,s,o,u,m){var v=u.paint.get("raster-fade-duration");if(v>0){var x=h.browser.now(),E=(x-n.timeAdded)/v,I=s?(x-s.timeAdded)/v:-1,M=o.getSource(),F=m.coveringZoomLevel({tileSize:M.tileSize,roundZoom:M.roundZoom}),U=!s||Math.abs(s.tileID.overscaledZ-F)>Math.abs(n.tileID.overscaledZ-F),V=U&&n.refreshedUponExpiration?1:h.clamp(U?E:1-I,0,1);return n.refreshedUponExpiration&&E>=1&&(n.refreshedUponExpiration=!1),s?{opacity:1,mix:1-V}:{opacity:V,mix:0}}return{opacity:1,mix:0}}var dc=new h.Color(1,0,0,1),hh=new h.Color(0,1,0,1),fh=new h.Color(0,0,1,1),$l=new h.Color(1,0,1,1),mc=new h.Color(0,1,1,1);function gc(n,s,o,u){Hs(n,0,s+o/2,n.transform.width,o,u)}function yc(n,s,o,u){Hs(n,s-o/2,0,o,n.transform.height,u)}function Hs(n,s,o,u,m,v){var x=n.context,E=x.gl;E.enable(E.SCISSOR_TEST),E.scissor(s*h.browser.devicePixelRatio,o*h.browser.devicePixelRatio,u*h.browser.devicePixelRatio,m*h.browser.devicePixelRatio),x.clear({color:v}),E.disable(E.SCISSOR_TEST)}function dh(n,s,o){var u=n.context,m=u.gl,v=o.posMatrix,x=n.useProgram("debug"),E=j.disabled,I=$.disabled,M=n.colorModeForRenderPass();u.activeTexture.set(m.TEXTURE0),n.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),x.draw(u,m.LINE_STRIP,E,I,M,se.disabled,Ea(v,h.Color.red),"$debug",n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var F=s.getTileByID(o.key).latestRawTileData,U=Math.floor((F&&F.byteLength||0)/1024),V=s.getTile(o).tileSize,X=512/Math.min(V,512)*(o.overscaledZ/n.transform.zoom)*.5,K=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(K+=" => "+o.overscaledZ),function(te,H){te.initDebugOverlayCanvas();var ee=te.debugOverlayCanvas,oe=te.context.gl,fe=te.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,ee.width,ee.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(H,5,5),fe.strokeText(H,5,5),te.debugOverlayTexture.update(ee),te.debugOverlayTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE)}(n,K+" "+U+"kb"),x.draw(u,m.TRIANGLES,E,I,ne.alphaBlended,se.disabled,Ea(v,h.Color.transparent,X),"$debug",n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)}var Ca={symbol:function(n,s,o,u,m){if(n.renderPass==="translucent"){var v=$.disabled,x=n.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(E,I,M,F,U,V,X){for(var K=I.transform,te=U==="map",H=V==="map",ee=0,oe=E;ee<oe.length;ee+=1){var fe=oe[ee],Ee=F.getTile(fe),xe=Ee.getBucket(M);if(xe&&xe.text&&xe.text.segments.get().length){var Ce=h.evaluateSizeForZoom(xe.textSizeData,K.zoom),Be=zr(Ee,1,I.transform.zoom),$e=Wr(fe.posMatrix,H,te,I.transform,Be),Ke=M.layout.get("icon-text-fit")!=="none"&&xe.hasIconData();if(Ce){var ut=Math.pow(2,K.zoom-Ee.tileID.overscaledZ);ch(xe,te,H,X,h.symbolSize,K,$e,fe.posMatrix,ut,Ce,Ke)}}}}(u,n,o,s,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),m),o.paint.get("icon-opacity").constantOr(1)!==0&&Ta(n,s,o,u,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),v,x),o.paint.get("text-opacity").constantOr(1)!==0&&Ta(n,s,o,u,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),v,x),s.map.showCollisionBoxes&&(ts(n,s,o,u,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),ts(n,s,o,u,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))}},circle:function(n,s,o,u){if(n.renderPass==="translucent"){var m=o.paint.get("circle-opacity"),v=o.paint.get("circle-stroke-width"),x=o.paint.get("circle-stroke-opacity"),E=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(m.constantOr(1)!==0||v.constantOr(1)!==0&&x.constantOr(1)!==0){for(var I=n.context,M=I.gl,F=n.depthModeForSublayer(0,j.ReadOnly),U=$.disabled,V=n.colorModeForRenderPass(),X=[],K=0;K<u.length;K++){var te=u[K],H=s.getTile(te),ee=H.getBucket(o);if(ee){var oe=ee.programConfigurations.get(o.id),fe={programConfiguration:oe,program:n.useProgram("circle",oe),layoutVertexBuffer:ee.layoutVertexBuffer,indexBuffer:ee.indexBuffer,uniformValues:hc(n,te,H,o)};if(E)for(var Ee=0,xe=ee.segments.get();Ee<xe.length;Ee+=1){var Ce=xe[Ee];X.push({segments:new h.SegmentVector([Ce]),sortKey:Ce.sortKey,state:fe})}else X.push({segments:ee.segments,sortKey:0,state:fe})}}E&&X.sort(function(wt,Ct){return wt.sortKey-Ct.sortKey});for(var Be=0,$e=X;Be<$e.length;Be+=1){var Ke=$e[Be],ut=Ke.state;ut.program.draw(I,M.TRIANGLES,F,U,V,se.disabled,ut.uniformValues,o.id,ut.layoutVertexBuffer,ut.indexBuffer,Ke.segments,o.paint,n.transform.zoom,ut.programConfiguration)}}}},heatmap:function(n,s,o,u){if(o.paint.get("heatmap-opacity")!==0)if(n.renderPass==="offscreen"){var m=n.context,v=m.gl,x=$.disabled,E=new ne([v.ONE,v.ONE],h.Color.transparent,[!0,!0,!0,!0]);(function(X,K,te){var H=X.gl;X.activeTexture.set(H.TEXTURE1),X.viewport.set([0,0,K.width/4,K.height/4]);var ee=te.heatmapFbo;if(ee)H.bindTexture(H.TEXTURE_2D,ee.colorAttachment.get()),X.bindFramebuffer.set(ee.framebuffer);else{var oe=H.createTexture();H.bindTexture(H.TEXTURE_2D,oe),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),ee=te.heatmapFbo=X.createFramebuffer(K.width/4,K.height/4,!1),function(fe,Ee,xe,Ce){var Be=fe.gl;Be.texImage2D(Be.TEXTURE_2D,0,Be.RGBA,Ee.width/4,Ee.height/4,0,Be.RGBA,fe.extRenderToTextureHalfFloat?fe.extTextureHalfFloat.HALF_FLOAT_OES:Be.UNSIGNED_BYTE,null),Ce.colorAttachment.set(xe)}(X,K,oe,ee)}})(m,n,o),m.clear({color:h.Color.transparent});for(var I=0;I<u.length;I++){var M=u[I];if(!s.hasRenderableParent(M)){var F=s.getTile(M),U=F.getBucket(o);if(U){var V=U.programConfigurations.get(o.id);n.useProgram("heatmap",V).draw(m,v.TRIANGLES,j.disabled,x,E,se.disabled,oh(M.posMatrix,F,n.transform.zoom,o.paint.get("heatmap-intensity")),o.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,o.paint,n.transform.zoom,V)}}}m.viewport.set([0,0,n.width,n.height])}else n.renderPass==="translucent"&&(n.context.setColorMode(n.colorModeForRenderPass()),function(X,K){var te=X.context,H=te.gl,ee=K.heatmapFbo;if(ee){te.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,ee.colorAttachment.get()),te.activeTexture.set(H.TEXTURE1);var oe=K.colorRampTexture;oe||(oe=K.colorRampTexture=new h.Texture(te,K.colorRamp,H.RGBA)),oe.bind(H.LINEAR,H.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(te,H.TRIANGLES,j.disabled,$.disabled,X.colorModeForRenderPass(),se.disabled,function(fe,Ee,xe,Ce){var Be=h.create();h.ortho(Be,0,fe.width,fe.height,0,0,1);var $e=fe.context.gl;return{u_matrix:Be,u_world:[$e.drawingBufferWidth,$e.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ee.paint.get("heatmap-opacity")}}(X,K),K.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,K.paint,X.transform.zoom)}}(n,o))},line:function(n,s,o,u){if(n.renderPass==="translucent"){var m=o.paint.get("line-opacity"),v=o.paint.get("line-width");if(m.constantOr(1)!==0&&v.constantOr(1)!==0)for(var x=n.depthModeForSublayer(0,j.ReadOnly),E=n.colorModeForRenderPass(),I=o.paint.get("line-dasharray"),M=o.paint.get("line-pattern"),F=M.constantOr(1),U=o.paint.get("line-gradient"),V=o.getCrossfadeParameters(),X=F?"linePattern":I?"lineSDF":U?"lineGradient":"line",K=n.context,te=K.gl,H=!0,ee=0,oe=u;ee<oe.length;ee+=1){var fe=oe[ee],Ee=s.getTile(fe);if(!F||Ee.patternsLoaded()){var xe=Ee.getBucket(o);if(xe){var Ce=xe.programConfigurations.get(o.id),Be=n.context.program.get(),$e=n.useProgram(X,Ce),Ke=H||$e.program!==Be,ut=M.constantOr(null);if(ut&&Ee.imageAtlas){var wt=Ee.imageAtlas,Ct=wt.patternPositions[ut.to.toString()],Tt=wt.patternPositions[ut.from.toString()];Ct&&Tt&&Ce.setConstantPatternPositions(Ct,Tt)}var ir=F?ql(n,Ee,o,V):I?Ad(n,Ee,o,I,V):U?Tr(n,Ee,o,xe.lineClipsArray.length):Vs(n,Ee,o);if(F)K.activeTexture.set(te.TEXTURE0),Ee.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Ce.updatePaintBuffers(V);else if(I&&(Ke||n.lineAtlas.dirty))K.activeTexture.set(te.TEXTURE0),n.lineAtlas.bind(K);else if(U){var pt=xe.gradients[o.id],Lt=pt.texture;if(o.gradientVersion!==pt.version){var Ft=256;if(o.stepInterpolant){var Mt=s.getSource().maxzoom,zt=fe.canonical.z===Mt?Math.ceil(1<<n.transform.maxZoom-fe.canonical.z):1;Ft=h.clamp(h.nextPowerOfTwo(xe.maxLineLength/h.EXTENT*1024*zt),256,K.maxTextureSize)}pt.gradient=h.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:pt.gradient||void 0,clips:xe.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new h.Texture(K,pt.gradient,te.RGBA),pt.version=o.gradientVersion,Lt=pt.texture}K.activeTexture.set(te.TEXTURE0),Lt.bind(o.stepInterpolant?te.NEAREST:te.LINEAR,te.CLAMP_TO_EDGE)}$e.draw(K,te.TRIANGLES,x,n.stencilModeForClipping(fe),E,se.disabled,ir,o.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,o.paint,n.transform.zoom,Ce,xe.layoutVertexBuffer2),H=!1}}}}},fill:function(n,s,o,u){var m=o.paint.get("fill-color"),v=o.paint.get("fill-opacity");if(v.constantOr(1)!==0){var x=n.colorModeForRenderPass(),E=o.paint.get("fill-pattern"),I=n.opaquePassEnabledForLayer()&&!E.constantOr(1)&&m.constantOr(h.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(n.renderPass===I){var M=n.depthModeForSublayer(1,n.renderPass==="opaque"?j.ReadWrite:j.ReadOnly);Gl(n,s,o,u,M,x,!1)}if(n.renderPass==="translucent"&&o.paint.get("fill-antialias")){var F=n.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,j.ReadOnly);Gl(n,s,o,u,F,x,!0)}}},"fill-extrusion":function(n,s,o,u){var m=o.paint.get("fill-extrusion-opacity");if(m!==0&&n.renderPass==="translucent"){var v=new j(n.context.gl.LEQUAL,j.ReadWrite,n.depthRangeFor3D);if(m!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))fc(n,s,o,u,v,$.disabled,ne.disabled),fc(n,s,o,u,v,n.stencilModeFor3D(),n.colorModeForRenderPass());else{var x=n.colorModeForRenderPass();fc(n,s,o,u,v,$.disabled,x)}}},hillshade:function(n,s,o,u){if(n.renderPass==="offscreen"||n.renderPass==="translucent"){for(var m=n.context,v=n.depthModeForSublayer(0,j.ReadOnly),x=n.colorModeForRenderPass(),E=n.renderPass==="translucent"?n.stencilConfigForOverlap(u):[{},u],I=E[0],M=0,F=E[1];M<F.length;M+=1){var U=F[M],V=s.getTile(U);V.needsHillshadePrepare&&n.renderPass==="offscreen"?Pd(n,V,o,v,$.disabled,x):n.renderPass==="translucent"&&Wl(n,V,o,v,I[U.overscaledZ],x)}m.viewport.set([0,0,n.width,n.height])}},raster:function(n,s,o,u){if(n.renderPass==="translucent"&&o.paint.get("raster-opacity")!==0&&u.length)for(var m=n.context,v=m.gl,x=s.getSource(),E=n.useProgram("raster"),I=n.colorModeForRenderPass(),M=x instanceof we?[{},u]:n.stencilConfigForOverlap(u),F=M[0],U=M[1],V=U[U.length-1].overscaledZ,X=!n.options.moving,K=0,te=U;K<te.length;K+=1){var H=te[K],ee=n.depthModeForSublayer(H.overscaledZ-V,o.paint.get("raster-opacity")===1?j.ReadWrite:j.ReadOnly,v.LESS),oe=s.getTile(H),fe=n.transform.calculatePosMatrix(H.toUnwrapped(),X);oe.registerFadeDuration(o.paint.get("raster-fade-duration"));var Ee=s.findLoadedParent(H,0),xe=Kl(oe,Ee,s,o,n.transform),Ce=void 0,Be=void 0,$e=o.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;m.activeTexture.set(v.TEXTURE0),oe.texture.bind($e,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(v.TEXTURE1),Ee?(Ee.texture.bind($e,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),Ce=Math.pow(2,Ee.tileID.overscaledZ-oe.tileID.overscaledZ),Be=[oe.tileID.canonical.x*Ce%1,oe.tileID.canonical.y*Ce%1]):oe.texture.bind($e,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);var Ke=kd(fe,Be||[0,0],Ce||1,xe,o);x instanceof we?E.draw(m,v.TRIANGLES,ee,$.disabled,I,se.disabled,Ke,o.id,x.boundsBuffer,n.quadTriangleIndexBuffer,x.boundsSegments):E.draw(m,v.TRIANGLES,ee,F[H.overscaledZ],I,se.disabled,Ke,o.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(n,s,o){var u=o.paint.get("background-color"),m=o.paint.get("background-opacity");if(m!==0){var v=n.context,x=v.gl,E=n.transform,I=E.tileSize,M=o.paint.get("background-pattern");if(!n.isPatternMissing(M)){var F=!M&&u.a===1&&m===1&&n.opaquePassEnabledForLayer()?"opaque":"translucent";if(n.renderPass===F){var U=$.disabled,V=n.depthModeForSublayer(0,F==="opaque"?j.ReadWrite:j.ReadOnly),X=n.colorModeForRenderPass(),K=n.useProgram(M?"backgroundPattern":"background"),te=E.coveringTiles({tileSize:I});M&&(v.activeTexture.set(x.TEXTURE0),n.imageManager.bind(n.context));for(var H=o.getCrossfadeParameters(),ee=0,oe=te;ee<oe.length;ee+=1){var fe=oe[ee],Ee=n.transform.calculatePosMatrix(fe.toUnwrapped()),xe=M?es(Ee,m,n,M,{tileID:fe,tileSize:I},H):qs(Ee,m,u);K.draw(v,x.TRIANGLES,V,U,X,se.disabled,xe,o.id,n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}}}},debug:function(n,s,o){for(var u=0;u<o.length;u++)dh(n,s,o[u])},custom:function(n,s,o){var u=n.context,m=o.implementation;if(n.renderPass==="offscreen"){var v=m.prerender;v&&(n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),v.call(m,u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState())}else if(n.renderPass==="translucent"){n.setCustomLayerDefaults(),u.setColorMode(n.colorModeForRenderPass()),u.setStencilMode($.disabled);var x=m.renderingMode==="3d"?new j(n.context.gl.LEQUAL,j.ReadWrite,n.depthRangeFor3D):n.depthModeForSublayer(0,j.ReadOnly);u.setDepthMode(x),m.render(u.gl,n.transform.customLayerMatrix()),u.setDirty(),n.setBaseState(),u.bindFramebuffer.set(null)}}},Mr=function(n,s){this.context=new N(n),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new No,this.gpuTimers={}};Mr.prototype.resize=function(n,s){if(this.width=n*h.browser.devicePixelRatio,this.height=s*h.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var o=0,u=this.style._order;o<u.length;o+=1)this.style._layers[u[o]].resize()},Mr.prototype.setup=function(){var n=this.context,s=new h.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(h.EXTENT,0),s.emplaceBack(0,h.EXTENT),s.emplaceBack(h.EXTENT,h.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,ei.members),this.tileExtentSegments=h.SegmentVector.simpleSegment(0,0,4,2);var o=new h.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(h.EXTENT,0),o.emplaceBack(0,h.EXTENT),o.emplaceBack(h.EXTENT,h.EXTENT),this.debugBuffer=n.createVertexBuffer(o,ei.members),this.debugSegments=h.SegmentVector.simpleSegment(0,0,4,5);var u=new h.StructArrayLayout4i8;u.emplaceBack(0,0,0,0),u.emplaceBack(h.EXTENT,0,h.EXTENT,0),u.emplaceBack(0,h.EXTENT,0,h.EXTENT),u.emplaceBack(h.EXTENT,h.EXTENT,h.EXTENT,h.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(u,Je.members),this.rasterBoundsSegments=h.SegmentVector.simpleSegment(0,0,4,2);var m=new h.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(m,ei.members),this.viewportSegments=h.SegmentVector.simpleSegment(0,0,4,2);var v=new h.StructArrayLayout1ui2;v.emplaceBack(0),v.emplaceBack(1),v.emplaceBack(3),v.emplaceBack(2),v.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(v);var x=new h.StructArrayLayout3ui6;x.emplaceBack(0,1,2),x.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(x),this.emptyTexture=new h.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new $({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},Mr.prototype.clearStencil=function(){var n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var o=h.create();h.ortho(o,0,this.width,this.height,0,0,1),h.scale(o,o,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,j.disabled,this.stencilClearMode,ne.disabled,se.disabled,Sa(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Mr.prototype._renderTileClippingMasks=function(n,s){if(this.currentStencilSource!==n.source&&n.isTileClipped()&&s&&s.length){this.currentStencilSource=n.source;var o=this.context,u=o.gl;this.nextStencilID+s.length>256&&this.clearStencil(),o.setColorMode(ne.disabled),o.setDepthMode(j.disabled);var m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var v=0,x=s;v<x.length;v+=1){var E=x[v],I=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;m.draw(o,u.TRIANGLES,j.disabled,new $({func:u.ALWAYS,mask:0},I,255,u.KEEP,u.KEEP,u.REPLACE),ne.disabled,se.disabled,Sa(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Mr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var n=this.nextStencilID++,s=this.context.gl;return new $({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)},Mr.prototype.stencilModeForClipping=function(n){var s=this.context.gl;return new $({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)},Mr.prototype.stencilConfigForOverlap=function(n){var s,o=this.context.gl,u=n.sort(function(I,M){return M.overscaledZ-I.overscaledZ}),m=u[u.length-1].overscaledZ,v=u[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();for(var x={},E=0;E<v;E++)x[E+m]=new $({func:o.GEQUAL,mask:255},E+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=v,[x,u]}return[(s={},s[m]=$.disabled,s),u]},Mr.prototype.colorModeForRenderPass=function(){var n=this.context.gl;return this._showOverdrawInspector?new ne([n.CONSTANT_COLOR,n.ONE],new h.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ne.unblended:ne.alphaBlended},Mr.prototype.depthModeForSublayer=function(n,s,o){if(!this.opaquePassEnabledForLayer())return j.disabled;var u=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new j(o||this.context.gl.LEQUAL,s,[u,u])},Mr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Mr.prototype.render=function(n,s){var o=this;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(h.browser.now()),this.imageManager.beginFrame();var u=this.style._order,m=this.style.sourceCaches;for(var v in m){var x=m[v];x.used&&x.prepare(this.context)}var E,I,M={},F={},U={};for(var V in m){var X=m[V];M[V]=X.getVisibleCoordinates(),F[V]=M[V].slice().reverse(),U[V]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var K=0;K<u.length;K++)if(this.style._layers[u[K]].is3D()){this.opaquePassCutoff=K;break}this.renderPass="offscreen";for(var te=0,H=u;te<H.length;te+=1){var ee=this.style._layers[H[te]];if(ee.hasOffscreenPass()&&!ee.isHidden(this.transform.zoom)){var oe=F[ee.source];(ee.type==="custom"||oe.length)&&this.renderLayer(this,m[ee.source],ee,oe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?h.Color.black:h.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var fe=this.style._layers[u[this.currentLayer]],Ee=m[fe.source],xe=M[fe.source];this._renderTileClippingMasks(fe,xe),this.renderLayer(this,Ee,fe,xe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var Ce=this.style._layers[u[this.currentLayer]],Be=m[Ce.source],$e=(Ce.type==="symbol"?U:F)[Ce.source];this._renderTileClippingMasks(Ce,M[Ce.source]),this.renderLayer(this,Be,Ce,$e)}this.options.showTileBoundaries&&(h.values(this.style._layers).forEach(function(Ke){Ke.source&&!Ke.isHidden(o.transform.zoom)&&(Ke.source!==(I&&I.id)&&(I=o.style.sourceCaches[Ke.source]),(!E||E.getSource().maxzoom<I.getSource().maxzoom)&&(E=I))}),E&&Ca.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(Ke){var ut=Ke.transform.padding;gc(Ke,Ke.transform.height-(ut.top||0),3,dc),gc(Ke,ut.bottom||0,3,hh),yc(Ke,ut.left||0,3,fh),yc(Ke,Ke.transform.width-(ut.right||0),3,$l);var wt=Ke.transform.centerPoint;(function(Ct,Tt,ir,pt){Hs(Ct,Tt-1,ir-10,2,20,pt),Hs(Ct,Tt-10,ir-1,20,2,pt)})(Ke,wt.x,Ke.transform.height-wt.y,mc)}(this),this.context.setDefault()},Mr.prototype.renderLayer=function(n,s,o,u){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||u.length)&&(this.id=o.id,this.gpuTimingStart(o),Ca[o.type](n,s,o,u,this.style.placement.variableOffsets),this.gpuTimingEnd())},Mr.prototype.gpuTimingStart=function(n){if(this.options.gpuTiming){var s=this.context.extTimerQuery,o=this.gpuTimers[n.id];o||(o=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),o.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,o.query)}},Mr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}},Mr.prototype.collectGpuTimers=function(){var n=this.gpuTimers;return this.gpuTimers={},n},Mr.prototype.queryGpuTimers=function(n){var s={};for(var o in n){var u=n[o],m=this.context.extTimerQuery,v=m.getQueryObjectEXT(u.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u.query),s[o]=v}return s},Mr.prototype.translatePosMatrix=function(n,s,o,u,m){if(!o[0]&&!o[1])return n;var v=m?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(v){var x=Math.sin(v),E=Math.cos(v);o=[o[0]*E-o[1]*x,o[0]*x+o[1]*E]}var I=[m?o[0]:zr(s,o[0],this.transform.zoom),m?o[1]:zr(s,o[1],this.transform.zoom),0],M=new Float32Array(16);return h.translate(M,n,I),M},Mr.prototype.saveTileTexture=function(n){var s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]},Mr.prototype.getTileTexture=function(n){var s=this._tileTextures[n];return s&&s.length>0?s.pop():null},Mr.prototype.isPatternMissing=function(n){if(!n)return!1;if(!n.from||!n.to)return!0;var s=this.imageManager.getPattern(n.from.toString()),o=this.imageManager.getPattern(n.to.toString());return!s||!o},Mr.prototype.useProgram=function(n,s){this.cache=this.cache||{};var o=""+n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new Qp(this.context,n,Id[n],s,lh[n],this._showOverdrawInspector)),this.cache[o]},Mr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Mr.prototype.setBaseState=function(){var n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)},Mr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=h.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new h.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Mr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Xl=function(n,s){this.points=n,this.planes=s};Xl.fromInvProjectionMatrix=function(n,s,o){var u=Math.pow(2,o),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(x){return h.transformMat4([],x,n)}).map(function(x){return h.scale$1([],x,1/x[3]/s*u)}),v=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(x){var E=h.sub([],m[x[0]],m[x[1]]),I=h.sub([],m[x[2]],m[x[1]]),M=h.normalize([],h.cross([],E,I)),F=-h.dot(M,m[x[1]]);return M.concat(F)});return new Xl(m,v)};var Ia=function(n,s){this.min=n,this.max=s,this.center=h.scale$2([],h.add([],this.min,this.max),.5)};Ia.prototype.quadrant=function(n){for(var s=[n%2==0,n<2],o=h.clone$2(this.min),u=h.clone$2(this.max),m=0;m<s.length;m++)o[m]=s[m]?this.min[m]:this.center[m],u[m]=s[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new Ia(o,u)},Ia.prototype.distanceX=function(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]},Ia.prototype.distanceY=function(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]},Ia.prototype.intersects=function(n){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],o=!0,u=0;u<n.planes.length;u++){for(var m=n.planes[u],v=0,x=0;x<s.length;x++)v+=h.dot$1(m,s[x])>=0;if(v===0)return 0;v!==s.length&&(o=!1)}if(o)return 2;for(var E=0;E<3;E++){for(var I=Number.MAX_VALUE,M=-Number.MAX_VALUE,F=0;F<n.points.length;F++){var U=n.points[F][E]-this.min[E];I=Math.min(I,U),M=Math.max(M,U)}if(M<0||I>this.max[E]-this.min[E])return 0}return 1};var Wo=function(n,s,o,u){if(n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),u===void 0&&(u=0),isNaN(n)||n<0||isNaN(s)||s<0||isNaN(o)||o<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=o,this.right=u};Wo.prototype.interpolate=function(n,s,o){return s.top!=null&&n.top!=null&&(this.top=h.number(n.top,s.top,o)),s.bottom!=null&&n.bottom!=null&&(this.bottom=h.number(n.bottom,s.bottom,o)),s.left!=null&&n.left!=null&&(this.left=h.number(n.left,s.left,o)),s.right!=null&&n.right!=null&&(this.right=h.number(n.right,s.right,o)),this},Wo.prototype.getCenter=function(n,s){var o=h.clamp((this.left+n-this.right)/2,0,n),u=h.clamp((this.top+s-this.bottom)/2,0,s);return new h.Point(o,u)},Wo.prototype.equals=function(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right},Wo.prototype.clone=function(){return new Wo(this.top,this.bottom,this.left,this.right)},Wo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jt=function(n,s,o,u,m){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=m===void 0||m,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=o??0,this._maxPitch=u??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Cr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jt.prototype.clone=function(){var n=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n},Cr.minZoom.get=function(){return this._minZoom},Cr.minZoom.set=function(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))},Cr.maxZoom.get=function(){return this._maxZoom},Cr.maxZoom.set=function(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))},Cr.minPitch.get=function(){return this._minPitch},Cr.minPitch.set=function(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))},Cr.maxPitch.get=function(){return this._maxPitch},Cr.maxPitch.set=function(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))},Cr.renderWorldCopies.get=function(){return this._renderWorldCopies},Cr.renderWorldCopies.set=function(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n},Cr.worldSize.get=function(){return this.tileSize*this.scale},Cr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Cr.size.get=function(){return new h.Point(this.width,this.height)},Cr.bearing.get=function(){return-this.angle/Math.PI*180},Cr.bearing.set=function(n){var s=-h.wrap(n,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=h.create$2(),h.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Cr.pitch.get=function(){return this._pitch/Math.PI*180},Cr.pitch.set=function(n){var s=h.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Cr.fov.get=function(){return this._fov/Math.PI*180},Cr.fov.set=function(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())},Cr.zoom.get=function(){return this._zoom},Cr.zoom.set=function(n){var s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Cr.center.get=function(){return this._center},Cr.center.set=function(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())},Cr.padding.get=function(){return this._edgeInsets.toJSON()},Cr.padding.set=function(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())},Cr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jt.prototype.isPaddingEqual=function(n){return this._edgeInsets.equals(n)},Jt.prototype.interpolatePadding=function(n,s,o){this._unmodified=!1,this._edgeInsets.interpolate(n,s,o),this._constrain(),this._calcMatrices()},Jt.prototype.coveringZoomLevel=function(n){var s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)},Jt.prototype.getVisibleUnwrappedCoordinates=function(n){var s=[new h.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var o=this.pointCoordinate(new h.Point(0,0)),u=this.pointCoordinate(new h.Point(this.width,0)),m=this.pointCoordinate(new h.Point(this.width,this.height)),v=this.pointCoordinate(new h.Point(0,this.height)),x=Math.floor(Math.min(o.x,u.x,m.x,v.x)),E=Math.floor(Math.max(o.x,u.x,m.x,v.x)),I=x-1;I<=E+1;I++)I!==0&&s.push(new h.UnwrappedTileID(I,n));return s},Jt.prototype.coveringTiles=function(n){var s=this.coveringZoomLevel(n),o=s;if(n.minzoom!==void 0&&s<n.minzoom)return[];n.maxzoom!==void 0&&s>n.maxzoom&&(s=n.maxzoom);var u=h.MercatorCoordinate.fromLngLat(this.center),m=Math.pow(2,s),v=[m*u.x,m*u.y,0],x=Xl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),E=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=s);var I=function(Ke){return{aabb:new Ia([Ke*m,0,0],[(Ke+1)*m,m,0]),zoom:0,x:0,y:0,wrap:Ke,fullyVisible:!1}},M=[],F=[],U=s,V=n.reparseOverscaled?o:s;if(this._renderWorldCopies)for(var X=1;X<=3;X++)M.push(I(-X)),M.push(I(X));for(M.push(I(0));M.length>0;){var K=M.pop(),te=K.x,H=K.y,ee=K.fullyVisible;if(!ee){var oe=K.aabb.intersects(x);if(oe===0)continue;ee=oe===2}var fe=K.aabb.distanceX(v),Ee=K.aabb.distanceY(v),xe=Math.max(Math.abs(fe),Math.abs(Ee));if(K.zoom===U||xe>3+(1<<U-K.zoom)-2&&K.zoom>=E)F.push({tileID:new h.OverscaledTileID(K.zoom===U?V:K.zoom,K.wrap,K.zoom,te,H),distanceSq:h.sqrLen([v[0]-.5-te,v[1]-.5-H])});else for(var Ce=0;Ce<4;Ce++){var Be=(te<<1)+Ce%2,$e=(H<<1)+(Ce>>1);M.push({aabb:K.aabb.quadrant(Ce),zoom:K.zoom+1,x:Be,y:$e,wrap:K.wrap,fullyVisible:ee})}}return F.sort(function(Ke,ut){return Ke.distanceSq-ut.distanceSq}).map(function(Ke){return Ke.tileID})},Jt.prototype.resize=function(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()},Cr.unmodified.get=function(){return this._unmodified},Jt.prototype.zoomScale=function(n){return Math.pow(2,n)},Jt.prototype.scaleZoom=function(n){return Math.log(n)/Math.LN2},Jt.prototype.project=function(n){var s=h.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.Point(h.mercatorXfromLng(n.lng)*this.worldSize,h.mercatorYfromLat(s)*this.worldSize)},Jt.prototype.unproject=function(n){return new h.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},Cr.point.get=function(){return this.project(this.center)},Jt.prototype.setLocationAtPoint=function(n,s){var o=this.pointCoordinate(s),u=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(n),v=new h.MercatorCoordinate(m.x-(o.x-u.x),m.y-(o.y-u.y));this.center=this.coordinateLocation(v),this._renderWorldCopies&&(this.center=this.center.wrap())},Jt.prototype.locationPoint=function(n){return this.coordinatePoint(this.locationCoordinate(n))},Jt.prototype.pointLocation=function(n){return this.coordinateLocation(this.pointCoordinate(n))},Jt.prototype.locationCoordinate=function(n){return h.MercatorCoordinate.fromLngLat(n)},Jt.prototype.coordinateLocation=function(n){return n.toLngLat()},Jt.prototype.pointCoordinate=function(n){var s=[n.x,n.y,0,1],o=[n.x,n.y,1,1];h.transformMat4(s,s,this.pixelMatrixInverse),h.transformMat4(o,o,this.pixelMatrixInverse);var u=s[3],m=o[3],v=s[1]/u,x=o[1]/m,E=s[2]/u,I=o[2]/m,M=(0-E)/(I-E);return new h.MercatorCoordinate(h.number(s[0]/u,o[0]/m,M)/this.worldSize,h.number(v,x,M)/this.worldSize)},Jt.prototype.coordinatePoint=function(n){var s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return h.transformMat4(s,s,this.pixelMatrix),new h.Point(s[0]/s[3],s[1]/s[3])},Jt.prototype.getBounds=function(){return new h.LngLatBounds().extend(this.pointLocation(new h.Point(0,0))).extend(this.pointLocation(new h.Point(this.width,0))).extend(this.pointLocation(new h.Point(this.width,this.height))).extend(this.pointLocation(new h.Point(0,this.height)))},Jt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new h.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jt.prototype.setMaxBounds=function(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jt.prototype.calculatePosMatrix=function(n,s){s===void 0&&(s=!1);var o=n.key,u=s?this._alignedPosMatrixCache:this._posMatrixCache;if(u[o])return u[o];var m=n.canonical,v=this.worldSize/this.zoomScale(m.z),x=m.x+Math.pow(2,m.z)*n.wrap,E=h.identity(new Float64Array(16));return h.translate(E,E,[x*v,m.y*v,0]),h.scale(E,E,[v/h.EXTENT,v/h.EXTENT,1]),h.multiply(E,s?this.alignedProjMatrix:this.projMatrix,E),u[o]=new Float32Array(E),u[o]},Jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,s,o,u,m=-90,v=90,x=-180,E=180,I=this.size,M=this._unmodified;if(this.latRange){var F=this.latRange;m=h.mercatorYfromLat(F[1])*this.worldSize,n=(v=h.mercatorYfromLat(F[0])*this.worldSize)-m<I.y?I.y/(v-m):0}if(this.lngRange){var U=this.lngRange;x=h.mercatorXfromLng(U[0])*this.worldSize,s=(E=h.mercatorXfromLng(U[1])*this.worldSize)-x<I.x?I.x/(E-x):0}var V=this.point,X=Math.max(s||0,n||0);if(X)return this.center=this.unproject(new h.Point(s?(E+x)/2:V.x,n?(v+m)/2:V.y)),this.zoom+=this.scaleZoom(X),this._unmodified=M,void(this._constraining=!1);if(this.latRange){var K=V.y,te=I.y/2;K-te<m&&(u=m+te),K+te>v&&(u=v-te)}if(this.lngRange){var H=V.x,ee=I.x/2;H-ee<x&&(o=x+ee),H+ee>E&&(o=E-ee)}o===void 0&&u===void 0||(this.center=this.unproject(new h.Point(o!==void 0?o:V.x,u!==void 0?u:V.y))),this._unmodified=M,this._constraining=!1}},Jt.prototype._calcMatrices=function(){if(this.height){var n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,o=this._fov*(.5+n.y/this.height),u=Math.sin(o)*this.cameraToCenterDistance/Math.sin(h.clamp(Math.PI-s-o,.01,Math.PI-.01)),m=this.point,v=m.x,x=m.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance),I=this.height/50,M=new Float64Array(16);h.perspective(M,this._fov,this.width/this.height,I,E),M[8]=2*-n.x/this.width,M[9]=2*n.y/this.height,h.scale(M,M,[1,-1,1]),h.translate(M,M,[0,0,-this.cameraToCenterDistance]),h.rotateX(M,M,this._pitch),h.rotateZ(M,M,this.angle),h.translate(M,M,[-v,-x,0]),this.mercatorMatrix=h.scale([],M,[this.worldSize,this.worldSize,this.worldSize]),h.scale(M,M,[1,1,h.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=M,this.invProjMatrix=h.invert([],this.projMatrix);var F=this.width%2/2,U=this.height%2/2,V=Math.cos(this.angle),X=Math.sin(this.angle),K=v-Math.round(v)+V*F+X*U,te=x-Math.round(x)+V*U+X*F,H=new Float64Array(M);if(h.translate(H,H,[K>.5?K-1:K,te>.5?te-1:te,0]),this.alignedProjMatrix=H,M=h.create(),h.scale(M,M,[this.width/2,-this.height/2,1]),h.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=h.create(),h.scale(M,M,[1,-1,1]),h.translate(M,M,[-1,-1,0]),h.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=h.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(M=h.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=M,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new h.Point(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return h.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jt.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.Point(0,n))},Jt.prototype.getCameraQueryGeometry=function(n){var s=this.getCameraPoint();if(n.length===1)return[n[0],s];for(var o=s.x,u=s.y,m=s.x,v=s.y,x=0,E=n;x<E.length;x+=1){var I=E[x];o=Math.min(o,I.x),u=Math.min(u,I.y),m=Math.max(m,I.x),v=Math.max(v,I.y)}return[new h.Point(o,u),new h.Point(m,u),new h.Point(m,v),new h.Point(o,v),new h.Point(o,u)]},Object.defineProperties(Jt.prototype,Cr);var Cn=function(n){var s,o,u,m;this._hashName=n&&encodeURIComponent(n),h.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),o=!1,u=null,m=function(){u=null,o&&(s(),u=setTimeout(m,300),o=!1)},function(){return o=!0,u||m(),u})};Cn.prototype.addTo=function(n){return this._map=n,h.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Cn.prototype.remove=function(){return h.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Cn.prototype.getHashString=function(n){var s=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,u=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,u),v=Math.round(s.lng*m)/m,x=Math.round(s.lat*m)/m,E=this._map.getBearing(),I=this._map.getPitch(),M="";if(M+=n?"/"+v+"/"+x+"/"+o:o+"/"+x+"/"+v,(E||I)&&(M+="/"+Math.round(10*E)/10),I&&(M+="/"+Math.round(I)),this._hashName){var F=this._hashName,U=!1,V=h.window.location.hash.slice(1).split("&").map(function(X){var K=X.split("=")[0];return K===F?(U=!0,K+"="+M):X}).filter(function(X){return X});return U||V.push(F+"="+M),"#"+V.join("&")}return"#"+M},Cn.prototype._getCurrentHash=function(){var n,s=this,o=h.window.location.hash.replace("#","");return this._hashName?(o.split("&").map(function(u){return u.split("=")}).forEach(function(u){u[0]===s._hashName&&(n=u)}),(n&&n[1]||"").split("/")):o.split("/")},Cn.prototype._onHashChange=function(){var n=this._getCurrentHash();if(n.length>=3&&!n.some(function(o){return isNaN(o)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1},Cn.prototype._updateHashUnthrottled=function(){var n=h.window.location.href.replace(/(#.+)?$/,this.getHashString());try{h.window.history.replaceState(h.window.history.state,null,n)}catch{}};var Gs={linearity:.3,easing:h.bezier(0,0,.3,1)},rs=h.extend({deceleration:2500,maxSpeed:1400},Gs),Ws=h.extend({deceleration:20,maxSpeed:1400},Gs),zd=h.extend({deceleration:1e3,maxSpeed:360},Gs),Md=h.extend({deceleration:1e3,maxSpeed:90},Gs),Ks=function(n){this._map=n,this.clear()};function $s(n,s){(!n.duration||n.duration<s.duration)&&(n.duration=s.duration,n.easing=s.easing)}function Io(n,s,o){var u=o.maxSpeed,m=o.linearity,v=o.deceleration,x=h.clamp(n*m/(s/1e3),-u,u),E=Math.abs(x)/(v*m);return{easing:o.easing,duration:1e3*E,amount:x*(E/2)}}Ks.prototype.clear=function(){this._inertiaBuffer=[]},Ks.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.browser.now(),settings:n})},Ks.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,s=h.browser.now();n.length>0&&s-n[0].time>160;)n.shift()},Ks.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new h.Point(0,0),pinchAround:void 0,around:void 0},o=0,u=this._inertiaBuffer;o<u.length;o+=1){var m=u[o].settings;s.zoom+=m.zoomDelta||0,s.bearing+=m.bearingDelta||0,s.pitch+=m.pitchDelta||0,m.panDelta&&s.pan._add(m.panDelta),m.around&&(s.around=m.around),m.pinchAround&&(s.pinchAround=m.pinchAround)}var v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(s.pan.mag()){var E=Io(s.pan.mag(),v,h.extend({},rs,n||{}));x.offset=s.pan.mult(E.amount/s.pan.mag()),x.center=this._map.transform.center,$s(x,E)}if(s.zoom){var I=Io(s.zoom,v,Ws);x.zoom=this._map.transform.zoom+I.amount,$s(x,I)}if(s.bearing){var M=Io(s.bearing,v,zd);x.bearing=this._map.transform.bearing+h.clamp(M.amount,-179,179),$s(x,M)}if(s.pitch){var F=Io(s.pitch,v,Md);x.pitch=this._map.transform.pitch+F.amount,$s(x,F)}if(x.zoom||x.bearing){var U=s.pinchAround===void 0?s.around:s.pinchAround;x.around=U?this._map.unproject(U):this._map.getCenter()}return this.clear(),h.extend(x,{noMoveStart:!0})}};var si=function(n){function s(u,m,v,x){x===void 0&&(x={});var E=Y.mousePos(m.getCanvasContainer(),v),I=m.unproject(E);n.call(this,u,h.extend({point:E,lngLat:I,originalEvent:v},x)),this._defaultPrevented=!1,this.target=m}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(h.Event),Xs=function(n){function s(u,m,v){var x=u==="touchend"?v.changedTouches:v.touches,E=Y.touchPos(m.getCanvasContainer(),x),I=E.map(function(U){return m.unproject(U)}),M=E.reduce(function(U,V,X,K){return U.add(V.div(K.length))},new h.Point(0,0)),F=m.unproject(M);n.call(this,u,{points:E,point:M,lngLats:I,lngLat:F,originalEvent:v}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(h.Event),mh=function(n){function s(u,m,v){n.call(this,u,{originalEvent:v}),this._defaultPrevented=!1}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,o),s}(h.Event),ti=function(n,s){this._map=n,this._clickTolerance=s.clickTolerance};ti.prototype.reset=function(){delete this._mousedownPos},ti.prototype.wheel=function(n){return this._firePreventable(new mh(n.type,this._map,n))},ti.prototype.mousedown=function(n,s){return this._mousedownPos=s,this._firePreventable(new si(n.type,this._map,n))},ti.prototype.mouseup=function(n){this._map.fire(new si(n.type,this._map,n))},ti.prototype.click=function(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new si(n.type,this._map,n))},ti.prototype.dblclick=function(n){return this._firePreventable(new si(n.type,this._map,n))},ti.prototype.mouseover=function(n){this._map.fire(new si(n.type,this._map,n))},ti.prototype.mouseout=function(n){this._map.fire(new si(n.type,this._map,n))},ti.prototype.touchstart=function(n){return this._firePreventable(new Xs(n.type,this._map,n))},ti.prototype.touchmove=function(n){this._map.fire(new Xs(n.type,this._map,n))},ti.prototype.touchend=function(n){this._map.fire(new Xs(n.type,this._map,n))},ti.prototype.touchcancel=function(n){this._map.fire(new Xs(n.type,this._map,n))},ti.prototype._firePreventable=function(n){if(this._map.fire(n),n.defaultPrevented)return{}},ti.prototype.isEnabled=function(){return!0},ti.prototype.isActive=function(){return!1},ti.prototype.enable=function(){},ti.prototype.disable=function(){};var ft=function(n){this._map=n};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(n){this._map.fire(new si(n.type,this._map,n))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new si(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var hn=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1};function Jl(n,s){for(var o={},u=0;u<n.length;u++)o[n[u].identifier]=s[u];return o}hn.prototype.isEnabled=function(){return!!this._enabled},hn.prototype.isActive=function(){return!!this._active},hn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},hn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hn.prototype.mousedown=function(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(Y.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},hn.prototype.mousemoveWindow=function(n,s){if(this._active){var o=s;if(!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var u=this._startPos;this._lastPos=o,this._box||(this._box=Y.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));var m=Math.min(u.x,o.x),v=Math.max(u.x,o.x),x=Math.min(u.y,o.y),E=Math.max(u.y,o.y);Y.setTransform(this._box,"translate("+m+"px,"+x+"px)"),this._box.style.width=v-m+"px",this._box.style.height=E-x+"px"}}},hn.prototype.mouseupWindow=function(n,s){var o=this;if(this._active&&n.button===0){var u=this._startPos,m=s;if(this.reset(),Y.suppressClick(),u.x!==m.x||u.y!==m.y)return this._map.fire(new h.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(v){return v.fitScreenCoordinates(u,m,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},hn.prototype.keydown=function(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))},hn.prototype.blur=function(){this.reset()},hn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos},hn.prototype._fireEvent=function(n,s){return this._map.fire(new h.Event(n,{originalEvent:s}))};var is=function(n){this.reset(),this.numTouches=n.numTouches};is.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},is.prototype.touchstart=function(n,s,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),o.length===this.numTouches&&(this.centroid=function(u){for(var m=new h.Point(0,0),v=0,x=u;v<x.length;v+=1)m._add(x[v]);return m.div(u.length)}(s),this.touches=Jl(o,s)))},is.prototype.touchmove=function(n,s,o){if(!this.aborted&&this.centroid){var u=Jl(o,s);for(var m in this.touches){var v=u[m];(!v||v.dist(this.touches[m])>30)&&(this.aborted=!0)}}},is.prototype.touchend=function(n,s,o){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){var u=!this.aborted&&this.centroid;if(this.reset(),u)return u}};var Yn=function(n){this.singleTap=new is(n),this.numTaps=n.numTaps,this.reset()};Yn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Yn.prototype.touchstart=function(n,s,o){this.singleTap.touchstart(n,s,o)},Yn.prototype.touchmove=function(n,s,o){this.singleTap.touchmove(n,s,o)},Yn.prototype.touchend=function(n,s,o){var u=this.singleTap.touchend(n,s,o);if(u){var m=n.timeStamp-this.lastTime<500,v=!this.lastTap||this.lastTap.dist(u)<30;if(m&&v||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}};var fn=function(){this._zoomIn=new Yn({numTouches:1,numTaps:2}),this._zoomOut=new Yn({numTouches:2,numTaps:1}),this.reset()};fn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},fn.prototype.touchstart=function(n,s,o){this._zoomIn.touchstart(n,s,o),this._zoomOut.touchstart(n,s,o)},fn.prototype.touchmove=function(n,s,o){this._zoomIn.touchmove(n,s,o),this._zoomOut.touchmove(n,s,o)},fn.prototype.touchend=function(n,s,o){var u=this,m=this._zoomIn.touchend(n,s,o),v=this._zoomOut.touchend(n,s,o);return m?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(m)},{originalEvent:n})}}):v?(this._active=!0,n.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(x){return x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(v)},{originalEvent:n})}}):void 0},fn.prototype.touchcancel=function(){this.reset()},fn.prototype.enable=function(){this._enabled=!0},fn.prototype.disable=function(){this._enabled=!1,this.reset()},fn.prototype.isEnabled=function(){return this._enabled},fn.prototype.isActive=function(){return this._active};var vc={0:1,2:2},rt=function(n){this.reset(),this._clickTolerance=n.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(n,s){return!1},rt.prototype._move=function(n,s){return{}},rt.prototype.mousedown=function(n,s){if(!this._lastPoint){var o=Y.mouseButton(n);this._correctButton(n,o)&&(this._lastPoint=s,this._eventButton=o)}},rt.prototype.mousemoveWindow=function(n,s){var o=this._lastPoint;if(o){if(n.preventDefault(),function(u,m){var v=vc[m];return u.buttons===void 0||(u.buttons&v)!==v}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(o)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(o,s)}},rt.prototype.mouseupWindow=function(n){this._lastPoint&&Y.mouseButton(n)===this._eventButton&&(this._moved&&Y.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var _c=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.mousedown=function(o,u){n.prototype.mousedown.call(this,o,u),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(o,u){return u===0&&!o.ctrlKey},s.prototype._move=function(o,u){return{around:u,panDelta:u.sub(o)}},s}(rt),Yl=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,u){return u===0&&o.ctrlKey||u===2},s.prototype._move=function(o,u){var m=.8*(u.x-o.x);if(m)return this._active=!0,{bearingDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),xc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype._correctButton=function(o,u){return u===0&&o.ctrlKey||u===2},s.prototype._move=function(o,u){var m=-.5*(u.y-o.y);if(m)return this._active=!0,{pitchDelta:m}},s.prototype.contextmenu=function(o){o.preventDefault()},s}(rt),On=function(n){this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset()};On.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new h.Point(0,0)},On.prototype.touchstart=function(n,s,o){return this._calculateTransform(n,s,o)},On.prototype.touchmove=function(n,s,o){if(this._active&&!(o.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,o)},On.prototype.touchend=function(n,s,o){this._calculateTransform(n,s,o),this._active&&o.length<this._minTouches&&this.reset()},On.prototype.touchcancel=function(){this.reset()},On.prototype._calculateTransform=function(n,s,o){o.length>0&&(this._active=!0);var u=Jl(o,s),m=new h.Point(0,0),v=new h.Point(0,0),x=0;for(var E in u){var I=u[E],M=this._touches[E];M&&(m._add(I),v._add(I.sub(M)),x++,u[E]=I)}if(this._touches=u,!(x<this._minTouches)&&v.mag()){var F=v.div(x);if(this._sum._add(F),!(this._sum.mag()<this._clickTolerance))return{around:m.div(x),panDelta:F}}},On.prototype.enable=function(){this._enabled=!0},On.prototype.disable=function(){this._enabled=!1,this.reset()},On.prototype.isEnabled=function(){return this._enabled},On.prototype.isActive=function(){return this._active};var dn=function(){this.reset()};function Ql(n,s,o){for(var u=0;u<n.length;u++)if(n[u].identifier===o)return s[u]}function eu(n,s){return Math.log(n/s)/Math.LN2}dn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},dn.prototype._start=function(n){},dn.prototype._move=function(n,s,o){return{}},dn.prototype.touchstart=function(n,s,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([s[0],s[1]]))},dn.prototype.touchmove=function(n,s,o){if(this._firstTwoTouches){n.preventDefault();var u=this._firstTwoTouches,m=u[1],v=Ql(o,s,u[0]),x=Ql(o,s,m);if(v&&x){var E=this._aroundCenter?null:v.add(x).div(2);return this._move([v,x],E,n)}}},dn.prototype.touchend=function(n,s,o){if(this._firstTwoTouches){var u=this._firstTwoTouches,m=u[1],v=Ql(o,s,u[0]),x=Ql(o,s,m);v&&x||(this._active&&Y.suppressClick(),this.reset())}},dn.prototype.touchcancel=function(){this.reset()},dn.prototype.enable=function(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"},dn.prototype.disable=function(){this._enabled=!1,this.reset()},dn.prototype.isEnabled=function(){return this._enabled},dn.prototype.isActive=function(){return this._active};var mn=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(o){this._startDistance=this._distance=o[0].dist(o[1])},s.prototype._move=function(o,u){var m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(eu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:eu(this._distance,m),pinchAround:u}},s}(dn);function Ao(n,s){return 180*n.angleWith(s)/Math.PI}var gh=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])},s.prototype._move=function(o,u){var m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ao(this._vector,m),pinchAround:u}},s.prototype._isBelowThreshold=function(o){this._minDiameter=Math.min(this._minDiameter,o.mag());var u=25/(Math.PI*this._minDiameter)*360,m=Ao(o,this._startVector);return Math.abs(m)<u},s}(dn);function Js(n){return Math.abs(n.y)>Math.abs(n.x)}var bc=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.reset=function(){n.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(o){this._lastPoints=o,Js(o[0].sub(o[1]))&&(this._valid=!1)},s.prototype._move=function(o,u,m){var v=o[0].sub(this._lastPoints[0]),x=o[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,x,m.timeStamp),this._valid)return this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+x.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(o,u,m){if(this._valid!==void 0)return this._valid;var v=o.mag()>=2,x=u.mag()>=2;if(v||x){if(!v||!x)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;var E=o.y>0==u.y>0;return Js(o)&&Js(u)&&E}},s}(dn),wc={panStep:100,bearingStep:15,pitchStep:10},Qn=function(){var n=wc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1};function In(n){return n*(2-n)}Qn.prototype.blur=function(){this.reset()},Qn.prototype.reset=function(){this._active=!1},Qn.prototype.keydown=function(n){var s=this;if(!(n.altKey||n.ctrlKey||n.metaKey)){var o=0,u=0,m=0,v=0,x=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?u=-1:(n.preventDefault(),v=-1);break;case 39:n.shiftKey?u=1:(n.preventDefault(),v=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),x=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(u=0,m=0),{cameraAnimation:function(E){var I=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:In,zoom:o?Math.round(I)+o*(n.shiftKey?2:1):I,bearing:E.getBearing()+u*s._bearingStep,pitch:E.getPitch()+m*s._pitchStep,offset:[-v*s._panStep,-x*s._panStep],center:E.getCenter()},{originalEvent:n})}}}},Qn.prototype.enable=function(){this._enabled=!0},Qn.prototype.disable=function(){this._enabled=!1,this.reset()},Qn.prototype.isEnabled=function(){return this._enabled},Qn.prototype.isActive=function(){return this._active},Qn.prototype.disableRotation=function(){this._rotationDisabled=!0},Qn.prototype.enableRotation=function(){this._rotationDisabled=!1};var Gt=function(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,h.bindAll(["_onTimeout"],this)};Gt.prototype.setZoomRate=function(n){this._defaultZoomRate=n},Gt.prototype.setWheelZoomRate=function(n){this._wheelZoomRate=n},Gt.prototype.isEnabled=function(){return!!this._enabled},Gt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Gt.prototype.isZooming=function(){return!!this._zooming},Gt.prototype.enable=function(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")},Gt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gt.prototype.wheel=function(n){if(this.isEnabled()){var s=n.deltaMode===h.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,o=h.browser.now(),u=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(u*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}},Gt.prototype._onTimeout=function(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)},Gt.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=Y.mousePos(this._el,n);this._around=h.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Gt.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var o=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,u=2/(1+Math.exp(-Math.abs(this._delta*o)));this._delta<0&&u!==0&&(u=1/u);var m=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(m*u))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var v,x=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,E=this._startZoom,I=this._easing,M=!1;if(this._type==="wheel"&&E&&I){var F=Math.min((h.browser.now()-this._lastWheelEventTime)/200,1),U=I(F);v=h.number(E,x,U),F<1?this._frameId||(this._frameId=!0):M=!0}else v=x,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:v-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Gt.prototype._smoothOutEasing=function(n){var s=h.ease;if(this._prevEase){var o=this._prevEase,u=(h.browser.now()-o.start)/o.duration,m=o.easing(u+.01)-o.easing(u),v=.27/Math.sqrt(m*m+1e-4)*.01,x=Math.sqrt(.0729-v*v);s=h.bezier(v,x,.25,1)}return this._prevEase={start:h.browser.now(),duration:n,easing:s},s},Gt.prototype.blur=function(){this.reset()},Gt.prototype.reset=function(){this._active=!1};var po=function(n,s){this._clickZoom=n,this._tapZoom=s};po.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},po.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},po.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},po.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Bn=function(){this.reset()};Bn.prototype.reset=function(){this._active=!1},Bn.prototype.blur=function(){this.reset()},Bn.prototype.dblclick=function(n,s){return n.preventDefault(),{cameraAnimation:function(o){o.easeTo({duration:300,zoom:o.getZoom()+(n.shiftKey?-1:1),around:o.unproject(s)},{originalEvent:n})}}},Bn.prototype.enable=function(){this._enabled=!0},Bn.prototype.disable=function(){this._enabled=!1,this.reset()},Bn.prototype.isEnabled=function(){return this._enabled},Bn.prototype.isActive=function(){return this._active};var zi=function(){this._tap=new Yn({numTouches:1,numTaps:1}),this.reset()};zi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},zi.prototype.touchstart=function(n,s,o){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?o.length>0&&(this._swipePoint=s[0],this._swipeTouch=o[0].identifier):this._tap.touchstart(n,s,o))},zi.prototype.touchmove=function(n,s,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;var u=s[0],m=u.y-this._swipePoint.y;return this._swipePoint=u,n.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(n,s,o)},zi.prototype.touchend=function(n,s,o){this._tapTime?this._swipePoint&&o.length===0&&this.reset():this._tap.touchend(n,s,o)&&(this._tapTime=n.timeStamp)},zi.prototype.touchcancel=function(){this.reset()},zi.prototype.enable=function(){this._enabled=!0},zi.prototype.disable=function(){this._enabled=!1,this.reset()},zi.prototype.isEnabled=function(){return this._enabled},zi.prototype.isActive=function(){return this._active};var Aa=function(n,s,o){this._el=n,this._mousePan=s,this._touchPan=o};Aa.prototype.enable=function(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Aa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Aa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Aa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ko=function(n,s,o){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=o};Ko.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ko.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ko.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ko.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var eo=function(n,s,o,u){this._el=n,this._touchZoom=s,this._touchRotate=o,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0};eo.prototype.enable=function(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},eo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},eo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},eo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},eo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},eo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Gi=function(n){return n.zoom||n.drag||n.pitch||n.rotate},Ys=function(n){function s(){n.apply(this,arguments)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s}(h.Event);function bt(n){return n.panDelta&&n.panDelta.mag()||n.zoomDelta||n.bearingDelta||n.pitchDelta}var yt=function(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ks(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),h.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[h.window.document,"mousemove",{capture:!0}],[h.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[h.window,"blur",void 0]];for(var u=0,m=this._listeners;u<m.length;u+=1){var v=m[u],x=v[0];Y.addEventListener(x,v[1],x===h.window.document?this.handleWindowEvent:this.handleEvent,v[2])}};yt.prototype.destroy=function(){for(var n=0,s=this._listeners;n<s.length;n+=1){var o=s[n],u=o[0];Y.removeEventListener(u,o[1],u===h.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},yt.prototype._addDefaultHandlers=function(n){var s=this._map,o=s.getCanvasContainer();this._add("mapEvent",new ti(s,n));var u=s.boxZoom=new hn(s,n);this._add("boxZoom",u);var m=new fn,v=new Bn;s.doubleClickZoom=new po(v,m),this._add("tapZoom",m),this._add("clickZoom",v);var x=new zi;this._add("tapDragZoom",x);var E=s.touchPitch=new bc;this._add("touchPitch",E);var I=new Yl(n),M=new xc(n);s.dragRotate=new Ko(n,I,M),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",M,["mouseRotate"]);var F=new _c(n),U=new On(n);s.dragPan=new Aa(o,F,U),this._add("mousePan",F),this._add("touchPan",U,["touchZoom","touchRotate"]);var V=new gh,X=new mn;s.touchZoomRotate=new eo(o,X,V,x),this._add("touchRotate",V,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]);var K=s.scrollZoom=new Gt(s,this);this._add("scrollZoom",K,["mousePan"]);var te=s.keyboard=new Qn;this._add("keyboard",te),this._add("blockableMapEvent",new ft(s));for(var H=0,ee=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];H<ee.length;H+=1){var oe=ee[H];n.interactive&&n[oe]&&s[oe].enable(n[oe])}},yt.prototype._add=function(n,s,o){this._handlers.push({handlerName:n,handler:s,allowed:o}),this._handlersById[n]=s},yt.prototype.stop=function(n){if(!this._updatingCamera){for(var s=0,o=this._handlers;s<o.length;s+=1)o[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}},yt.prototype.isActive=function(){for(var n=0,s=this._handlers;n<s.length;n+=1)if(s[n].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return!!Gi(this._eventsInProgress)||this.isZooming()},yt.prototype._blockedByActive=function(n,s,o){for(var u in n)if(u!==o&&(!s||s.indexOf(u)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(n){this.handleEvent(n,n.type+"Window")},yt.prototype._getMapTouches=function(n){for(var s=[],o=0,u=n;o<u.length;o+=1){var m=u[o];this._el.contains(m.target)&&s.push(m)}return s},yt.prototype.handleEvent=function(n,s){this._updatingCamera=!0;for(var o=n.type==="renderFrame"?void 0:n,u={needsRenderFrame:!1},m={},v={},x=n.touches?this._getMapTouches(n.touches):void 0,E=x?Y.touchPos(this._el,x):Y.mousePos(this._el,n),I=0,M=this._handlers;I<M.length;I+=1){var F=M[I],U=F.handlerName,V=F.handler,X=F.allowed;if(V.isEnabled()){var K=void 0;this._blockedByActive(v,X,U)?V.reset():V[s||n.type]&&(K=V[s||n.type](n,E,x),this.mergeHandlerResult(u,m,K,U,o),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||V.isActive())&&(v[U]=V)}}var te={};for(var H in this._previousActiveHandlers)v[H]||(te[H]=o);this._previousActiveHandlers=v,(Object.keys(te).length||bt(u))&&(this._changes.push([u,m,te]),this._triggerRenderFrame()),(Object.keys(v).length||bt(u))&&this._map._stop(!0),this._updatingCamera=!1;var ee=u.cameraAnimation;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},yt.prototype.mergeHandlerResult=function(n,s,o,u,m){if(o){h.extend(n,o);var v={handlerName:u,originalEvent:o.originalEvent||m};o.zoomDelta!==void 0&&(s.zoom=v),o.panDelta!==void 0&&(s.drag=v),o.pitchDelta!==void 0&&(s.pitch=v),o.bearingDelta!==void 0&&(s.rotate=v)}},yt.prototype._applyChanges=function(){for(var n={},s={},o={},u=0,m=this._changes;u<m.length;u+=1){var v=m[u],x=v[0],E=v[1],I=v[2];x.panDelta&&(n.panDelta=(n.panDelta||new h.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(n.around=x.around),x.pinchAround!==void 0&&(n.pinchAround=x.pinchAround),x.noInertia&&(n.noInertia=x.noInertia),h.extend(s,E),h.extend(o,I)}this._updateMapTransform(n,s,o),this._changes=[]},yt.prototype._updateMapTransform=function(n,s,o){var u=this._map,m=u.transform;if(!bt(n))return this._fireEvents(s,o,!0);var v=n.panDelta,x=n.zoomDelta,E=n.bearingDelta,I=n.pitchDelta,M=n.around,F=n.pinchAround;F!==void 0&&(M=F),u._stop(!0),M=M||u.transform.centerPoint;var U=m.pointLocation(v?M.sub(v):M);E&&(m.bearing+=E),I&&(m.pitch+=I),x&&(m.zoom+=x),m.setLocationAtPoint(U,M),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,o,!0)},yt.prototype._fireEvents=function(n,s,o){var u=this,m=Gi(this._eventsInProgress),v=Gi(n),x={};for(var E in n)this._eventsInProgress[E]||(x[E+"start"]=n[E].originalEvent),this._eventsInProgress[E]=n[E];for(var I in!m&&v&&this._fireEvent("movestart",v.originalEvent),x)this._fireEvent(I,x[I]);for(var M in v&&this._fireEvent("move",v.originalEvent),n)this._fireEvent(M,n[M].originalEvent);var F,U={};for(var V in this._eventsInProgress){var X=this._eventsInProgress[V],K=X.handlerName,te=X.originalEvent;this._handlersById[K].isActive()||(delete this._eventsInProgress[V],U[V+"end"]=F=s[K]||te)}for(var H in U)this._fireEvent(H,U[H]);var ee=Gi(this._eventsInProgress);if(o&&(m||v)&&!ee){this._updatingCamera=!0;var oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=function(Ee){return Ee!==0&&-u._bearingSnap<Ee&&Ee<u._bearingSnap};oe?(fe(oe.bearing||this._map.getBearing())&&(oe.bearing=0),this._map.easeTo(oe,{originalEvent:F})):(this._map.fire(new h.Event("moveend",{originalEvent:F})),fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(n,s){this._map.fire(new h.Event(n,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var n=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete n._frameId,n.handleEvent(new Ys("renderFrame",{timeStamp:s})),n._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var tu=function(n){function s(o,u){n.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=u.bearingSnap,h.bindAll(["_renderFrameCallback"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.getCenter=function(){return new h.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(o,u){return this.jumpTo({center:o},u)},s.prototype.panBy=function(o,u,m){return o=h.Point.convert(o).mult(-1),this.panTo(this.transform.center,h.extend({offset:o},u),m)},s.prototype.panTo=function(o,u,m){return this.easeTo(h.extend({center:o},u),m)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(o,u){return this.jumpTo({zoom:o},u),this},s.prototype.zoomTo=function(o,u,m){return this.easeTo(h.extend({zoom:o},u),m)},s.prototype.zoomIn=function(o,u){return this.zoomTo(this.getZoom()+1,o,u),this},s.prototype.zoomOut=function(o,u){return this.zoomTo(this.getZoom()-1,o,u),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(o,u){return this.jumpTo({bearing:o},u),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(o,u){return this.jumpTo({padding:o},u),this},s.prototype.rotateTo=function(o,u,m){return this.easeTo(h.extend({bearing:o},u),m)},s.prototype.resetNorth=function(o,u){return this.rotateTo(0,h.extend({duration:1e3},o),u),this},s.prototype.resetNorthPitch=function(o,u){return this.easeTo(h.extend({bearing:0,pitch:0,duration:1e3},o),u),this},s.prototype.snapToNorth=function(o,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,u):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(o,u){return this.jumpTo({pitch:o},u),this},s.prototype.cameraForBounds=function(o,u){o=h.LngLatBounds.convert(o);var m=u&&u.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),m,u)},s.prototype._cameraForBoxAndBearing=function(o,u,m,v){var x={top:0,bottom:0,right:0,left:0};if(typeof(v=h.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){var E=v.padding;v.padding={top:E,bottom:E,right:E,left:E}}v.padding=h.extend(x,v.padding);var I=this.transform,M=I.padding,F=I.project(h.LngLat.convert(o)),U=I.project(h.LngLat.convert(u)),V=F.rotate(-m*Math.PI/180),X=U.rotate(-m*Math.PI/180),K=new h.Point(Math.max(V.x,X.x),Math.max(V.y,X.y)),te=new h.Point(Math.min(V.x,X.x),Math.min(V.y,X.y)),H=K.sub(te),ee=(I.width-(M.left+M.right+v.padding.left+v.padding.right))/H.x,oe=(I.height-(M.top+M.bottom+v.padding.top+v.padding.bottom))/H.y;if(!(oe<0||ee<0)){var fe=Math.min(I.scaleZoom(I.scale*Math.min(ee,oe)),v.maxZoom),Ee=typeof v.offset.x=="number"?new h.Point(v.offset.x,v.offset.y):h.Point.convert(v.offset),xe=new h.Point((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Ce=Ee.add(xe).mult(I.scale/I.zoomScale(fe));return{center:I.unproject(F.add(U).div(2).sub(Ce)),zoom:fe,bearing:m}}h.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(o,u,m){return this._fitInternal(this.cameraForBounds(o,u),u,m)},s.prototype.fitScreenCoordinates=function(o,u,m,v,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.Point.convert(o)),this.transform.pointLocation(h.Point.convert(u)),m,v),v,x)},s.prototype._fitInternal=function(o,u,m){return o?(delete(u=h.extend(o,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this},s.prototype.jumpTo=function(o,u){this.stop();var m=this.transform,v=!1,x=!1,E=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(v=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=h.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(x=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(E=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),this.fire(new h.Event("movestart",u)).fire(new h.Event("move",u)),v&&this.fire(new h.Event("zoomstart",u)).fire(new h.Event("zoom",u)).fire(new h.Event("zoomend",u)),x&&this.fire(new h.Event("rotatestart",u)).fire(new h.Event("rotate",u)).fire(new h.Event("rotateend",u)),E&&this.fire(new h.Event("pitchstart",u)).fire(new h.Event("pitch",u)).fire(new h.Event("pitchend",u)),this.fire(new h.Event("moveend",u))},s.prototype.easeTo=function(o,u){var m=this;this._stop(!1,o.easeId),((o=h.extend({offset:[0,0],duration:500,easing:h.ease},o)).animate===!1||!o.essential&&h.browser.prefersReducedMotion)&&(o.duration=0);var v=this.transform,x=this.getZoom(),E=this.getBearing(),I=this.getPitch(),M=this.getPadding(),F="zoom"in o?+o.zoom:x,U="bearing"in o?this._normalizeBearing(o.bearing,E):E,V="pitch"in o?+o.pitch:I,X="padding"in o?o.padding:v.padding,K=h.Point.convert(o.offset),te=v.centerPoint.add(K),H=v.pointLocation(te),ee=h.LngLat.convert(o.center||H);this._normalizeCenter(ee);var oe,fe,Ee=v.project(H),xe=v.project(ee).sub(Ee),Ce=v.zoomScale(F-x);o.around&&(oe=h.LngLat.convert(o.around),fe=v.locationPoint(oe));var Be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||F!==x,this._rotating=this._rotating||E!==U,this._pitching=this._pitching||V!==I,this._padding=!v.isPaddingEqual(X),this._easeId=o.easeId,this._prepareEase(u,o.noMoveStart,Be),this._ease(function($e){if(m._zooming&&(v.zoom=h.number(x,F,$e)),m._rotating&&(v.bearing=h.number(E,U,$e)),m._pitching&&(v.pitch=h.number(I,V,$e)),m._padding&&(v.interpolatePadding(M,X,$e),te=v.centerPoint.add(K)),oe)v.setLocationAtPoint(oe,fe);else{var Ke=v.zoomScale(v.zoom-x),ut=F>x?Math.min(2,Ce):Math.max(.5,Ce),wt=Math.pow(ut,1-$e),Ct=v.unproject(Ee.add(xe.mult($e*wt)).mult(Ke));v.setLocationAtPoint(v.renderWorldCopies?Ct.wrap():Ct,te)}m._fireMoveEvents(u)},function($e){m._afterEase(u,$e)},o),this},s.prototype._prepareEase=function(o,u,m){m===void 0&&(m={}),this._moving=!0,u||m.moving||this.fire(new h.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new h.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new h.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new h.Event("pitchstart",o))},s.prototype._fireMoveEvents=function(o){this.fire(new h.Event("move",o)),this._zooming&&this.fire(new h.Event("zoom",o)),this._rotating&&this.fire(new h.Event("rotate",o)),this._pitching&&this.fire(new h.Event("pitch",o))},s.prototype._afterEase=function(o,u){if(!this._easeId||!u||this._easeId!==u){delete this._easeId;var m=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new h.Event("zoomend",o)),v&&this.fire(new h.Event("rotateend",o)),x&&this.fire(new h.Event("pitchend",o)),this.fire(new h.Event("moveend",o))}},s.prototype.flyTo=function(o,u){var m=this;if(!o.essential&&h.browser.prefersReducedMotion){var v=h.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(v,u)}this.stop(),o=h.extend({offset:[0,0],speed:1.2,curve:1.42,easing:h.ease},o);var x=this.transform,E=this.getZoom(),I=this.getBearing(),M=this.getPitch(),F=this.getPadding(),U="zoom"in o?h.clamp(+o.zoom,x.minZoom,x.maxZoom):E,V="bearing"in o?this._normalizeBearing(o.bearing,I):I,X="pitch"in o?+o.pitch:M,K="padding"in o?o.padding:x.padding,te=x.zoomScale(U-E),H=h.Point.convert(o.offset),ee=x.centerPoint.add(H),oe=x.pointLocation(ee),fe=h.LngLat.convert(o.center||oe);this._normalizeCenter(fe);var Ee=x.project(oe),xe=x.project(fe).sub(Ee),Ce=o.curve,Be=Math.max(x.width,x.height),$e=Be/te,Ke=xe.mag();if("minZoom"in o){var ut=h.clamp(Math.min(o.minZoom,E,U),x.minZoom,x.maxZoom),wt=Be/x.zoomScale(ut-E);Ce=Math.sqrt(wt/Ke*2)}var Ct=Ce*Ce;function Tt(Pt){var It=($e*$e-Be*Be+(Pt?-1:1)*Ct*Ct*Ke*Ke)/(2*(Pt?$e:Be)*Ct*Ke);return Math.log(Math.sqrt(It*It+1)-It)}function ir(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function pt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}var Lt=Tt(0),Ft=function(Pt){return pt(Lt)/pt(Lt+Ce*Pt)},Mt=function(Pt){return Be*((pt(Lt)*(ir(It=Lt+Ce*Pt)/pt(It))-ir(Lt))/Ct)/Ke;var It},zt=(Tt(1)-Lt)/Ce;if(Math.abs(Ke)<1e-6||!isFinite(zt)){if(Math.abs(Be-$e)<1e-6)return this.easeTo(o,u);var Bt=$e<Be?-1:1;zt=Math.abs(Math.log($e/Be))/Ce,Mt=function(){return 0},Ft=function(Pt){return Math.exp(Bt*Ce*Pt)}}return o.duration="duration"in o?+o.duration:1e3*zt/("screenSpeed"in o?+o.screenSpeed/Ce:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=I!==V,this._pitching=X!==M,this._padding=!x.isPaddingEqual(K),this._prepareEase(u,!1),this._ease(function(Pt){var It=Pt*zt,mi=1/Ft(It);x.zoom=Pt===1?U:E+x.scaleZoom(mi),m._rotating&&(x.bearing=h.number(I,V,Pt)),m._pitching&&(x.pitch=h.number(M,X,Pt)),m._padding&&(x.interpolatePadding(F,K,Pt),ee=x.centerPoint.add(H));var jr=Pt===1?fe:x.unproject(Ee.add(xe.mult(Mt(It))).mult(mi));x.setLocationAtPoint(x.renderWorldCopies?jr.wrap():jr,ee),m._fireMoveEvents(u)},function(){return m._afterEase(u)},o),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(o,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!o){var v=this.handlers;v&&v.stop(!1)}return this},s.prototype._ease=function(o,u,m){m.animate===!1||m.duration===0?(o(1),u()):(this._easeStart=h.browser.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var o=Math.min((h.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(o,u){o=h.wrap(o,-180,180);var m=Math.abs(o-u);return Math.abs(o-360-u)<m&&(o-=360),Math.abs(o+360-u)<m&&(o+=360),o},s.prototype._normalizeCenter=function(o){var u=this.transform;if(u.renderWorldCopies&&!u.lngRange){var m=o.lng-u.center.lng;o.lng+=m>180?-360:m<-180?360:0}},s}(h.Evented),Wi=function(n){n===void 0&&(n={}),this.options=n,h.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Wi.prototype.getDefaultPosition=function(){return"bottom-right"},Wi.prototype.onAdd=function(n){var s=this.options&&this.options.compact;return this._map=n,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Wi.prototype.onRemove=function(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Wi.prototype._setElementTitle=function(n,s){var o=this._map._getUIString("AttributionControl."+s);n.title=o,n.setAttribute("aria-label",o)},Wi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Wi.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||h.config.ACCESS_TOKEN}];if(n){var o=s.reduce(function(u,m,v){return m.value&&(u+=m.key+"="+m.value+(v<s.length-1?"&":"")),u},"?");n.href=h.config.FEEDBACK_URL+"/"+o+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},Wi.prototype._updateData=function(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Wi.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(E){return typeof E!="string"?"":E})):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var o=this._map.style.sourceCaches;for(var u in o){var m=o[u];if(m.used){var v=m.getSource();v.attribution&&n.indexOf(v.attribution)<0&&n.push(v.attribution)}}n.sort(function(E,I){return E.length-I.length});var x=(n=n.filter(function(E,I){for(var M=I+1;M<n.length;M++)if(n[M].indexOf(E)>=0)return!1;return!0})).join(" | ");x!==this._attribHTML&&(this._attribHTML=x,n.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Wi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var to=function(){h.bindAll(["_updateLogo"],this),h.bindAll(["_updateCompact"],this)};to.prototype.onAdd=function(n){this._map=n,this._container=Y.create("div","mapboxgl-ctrl");var s=Y.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},to.prototype.onRemove=function(){Y.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},to.prototype.getDefaultPosition=function(){return"bottom-left"},to.prototype._updateLogo=function(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},to.prototype._logoRequired=function(){if(this._map.style){var n=this._map.style.sourceCaches;for(var s in n)if(n[s].getSource().mapbox_logo)return!0;return!1}},to.prototype._updateCompact=function(){var n=this._container.children;if(n.length){var s=n[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Mi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Mi.prototype.add=function(n){var s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s},Mi.prototype.remove=function(n){for(var s=this._currentlyRunning,o=0,u=s?this._queue.concat(s):this._queue;o<u.length;o+=1){var m=u[o];if(m.id===n)return void(m.cancelled=!0)}},Mi.prototype.run=function(n){n===void 0&&(n=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var o=0,u=s;o<u.length;o+=1){var m=u[o];if(!m.cancelled&&(m.callback(n),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Mi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ho={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ec=h.window.HTMLImageElement,ru=h.window.HTMLElement,fr=h.window.ImageBitmap,wi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},yh=function(n){function s(u){var m=this;if((u=h.extend({},wi,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var v=new Jt(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies);if(n.call(this,v,u),this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=u.collectResourceTiming,this._renderTaskQueue=new Mi,this._controls=[],this._mapId=h.uniqueId(),this._locale=h.extend({},ho,u.locale),this._clickTolerance=u.clickTolerance,this._requestManager=new h.RequestManager(u.transformRequest,u.accessToken),typeof u.container=="string"){if(this._container=h.window.document.getElementById(u.container),!this._container)throw new Error("Container '"+u.container+"' not found.")}else{if(!(u.container instanceof ru))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),h.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return m._update(!1)}),this.on("moveend",function(){return m._update(!1)}),this.on("zoom",function(){return m._update(!0)}),h.window!==void 0&&(h.window.addEventListener("online",this._onWindowOnline,!1),h.window.addEventListener("resize",this._onWindowResize,!1),h.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,u),this._hash=u.hash&&new Cn(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,h.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new Wi({customAttribution:u.customAttribution})),this.addControl(new to,u.logoPosition),this.on("style.load",function(){m.transform.unmodified&&m.jumpTo(m.style.stylesheet)}),this.on("data",function(x){m._update(x.dataType==="style"),m.fire(new h.Event(x.dataType+"data",x))}),this.on("dataloading",function(x){m.fire(new h.Event(x.dataType+"dataloading",x))})}n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(u,m){if(m===void 0&&(m=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var v=u.onAdd(this);this._controls.push(u);var x=this._controlPositions[m];return m.indexOf("bottom")!==-1?x.insertBefore(v,x.firstChild):x.appendChild(v),this},s.prototype.removeControl=function(u){if(!u||!u.onRemove)return this.fire(new h.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var m=this._controls.indexOf(u);return m>-1&&this._controls.splice(m,1),u.onRemove(this),this},s.prototype.hasControl=function(u){return this._controls.indexOf(u)>-1},s.prototype.resize=function(u){var m=this._containerDimensions(),v=m[0],x=m[1];if(v===this.transform.width&&x===this.transform.height)return this;this._resizeCanvas(v,x),this.transform.resize(v,x),this.painter.resize(v,x);var E=!this._moving;return E&&this.fire(new h.Event("movestart",u)).fire(new h.Event("move",u)),this.fire(new h.Event("resize",u)),E&&this.fire(new h.Event("moveend",u)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(u){return this.transform.setMaxBounds(h.LngLatBounds.convert(u)),this._update()},s.prototype.setMinZoom=function(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(u){if((u=u??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(u){return this.transform.renderWorldCopies=u,this._update()},s.prototype.project=function(u){return this.transform.locationPoint(h.LngLat.convert(u))},s.prototype.unproject=function(u){return this.transform.pointLocation(h.Point.convert(u))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(u,m,v){var x,E=this;if(u==="mouseenter"||u==="mouseover"){var I=!1;return{layer:m,listener:v,delegates:{mousemove:function(F){var U=E.getLayer(m)?E.queryRenderedFeatures(F.point,{layers:[m]}):[];U.length?I||(I=!0,v.call(E,new si(u,E,F.originalEvent,{features:U}))):I=!1},mouseout:function(){I=!1}}}}if(u==="mouseleave"||u==="mouseout"){var M=!1;return{layer:m,listener:v,delegates:{mousemove:function(F){(E.getLayer(m)?E.queryRenderedFeatures(F.point,{layers:[m]}):[]).length?M=!0:M&&(M=!1,v.call(E,new si(u,E,F.originalEvent)))},mouseout:function(F){M&&(M=!1,v.call(E,new si(u,E,F.originalEvent)))}}}}return{layer:m,listener:v,delegates:(x={},x[u]=function(F){var U=E.getLayer(m)?E.queryRenderedFeatures(F.point,{layers:[m]}):[];U.length&&(F.features=U,v.call(E,F),delete F.features)},x)}},s.prototype.on=function(u,m,v){if(v===void 0)return n.prototype.on.call(this,u,m);var x=this._createDelegatedListener(u,m,v);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(x),x.delegates)this.on(E,x.delegates[E]);return this},s.prototype.once=function(u,m,v){if(v===void 0)return n.prototype.once.call(this,u,m);var x=this._createDelegatedListener(u,m,v);for(var E in x.delegates)this.once(E,x.delegates[E]);return this},s.prototype.off=function(u,m,v){var x=this;return v===void 0?n.prototype.off.call(this,u,m):(this._delegatedListeners&&this._delegatedListeners[u]&&function(E){for(var I=E[u],M=0;M<I.length;M++){var F=I[M];if(F.layer===m&&F.listener===v){for(var U in F.delegates)x.off(U,F.delegates[U]);return I.splice(M,1),x}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(u,m){if(!this.style)return[];var v;if(m!==void 0||u===void 0||u instanceof h.Point||Array.isArray(u)||(m=u,u=void 0),m=m||{},(u=u||[[0,0],[this.transform.width,this.transform.height]])instanceof h.Point||typeof u[0]=="number")v=[h.Point.convert(u)];else{var x=h.Point.convert(u[0]),E=h.Point.convert(u[1]);v=[x,new h.Point(E.x,x.y),E,new h.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(v,m,this.transform)},s.prototype.querySourceFeatures=function(u,m){return this.style.querySourceFeatures(u,m)},s.prototype.setStyle=function(u,m){return(m=h.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},m)).diff!==!1&&m.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,m),this):(this._localIdeographFontFamily=m.localIdeographFontFamily,this._updateStyle(u,m))},s.prototype._getUIString=function(u){var m=this._locale[u];if(m==null)throw new Error("Missing UI string '"+u+"'");return m},s.prototype._updateStyle=function(u,m){return this.style&&(this.style.setEventedParent(null),this.style._remove()),u?(this.style=new pn(this,m||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u):this.style.loadJSON(u),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(u,m){var v=this;if(typeof u=="string"){var x=this._requestManager.normalizeStyleURL(u),E=this._requestManager.transformRequest(x,h.ResourceType.Style);h.getJSON(E,function(I,M){I?v.fire(new h.ErrorEvent(I)):M&&v._updateDiff(M,m)})}else typeof u=="object"&&this._updateDiff(u,m)},s.prototype._updateDiff=function(u,m){try{this.style.setState(u)&&this._update(!0)}catch(v){h.warnOnce("Unable to perform style diff: "+(v.message||v.error||v)+".  Rebuilding the style from scratch."),this._updateStyle(u,m)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():h.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(u,m){return this._lazyInitEmptyStyle(),this.style.addSource(u,m),this._update(!0)},s.prototype.isSourceLoaded=function(u){var m=this.style&&this.style.sourceCaches[u];if(m!==void 0)return m.loaded();this.fire(new h.ErrorEvent(new Error("There is no source with ID '"+u+"'")))},s.prototype.areTilesLoaded=function(){var u=this.style&&this.style.sourceCaches;for(var m in u){var v=u[m]._tiles;for(var x in v){var E=v[x];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(u,m,v){return this._lazyInitEmptyStyle(),this.style.addSourceType(u,m,v)},s.prototype.removeSource=function(u){return this.style.removeSource(u),this._update(!0)},s.prototype.getSource=function(u){return this.style.getSource(u)},s.prototype.addImage=function(u,m,v){v===void 0&&(v={});var x=v.pixelRatio;x===void 0&&(x=1);var E=v.sdf;E===void 0&&(E=!1);var I=v.stretchX,M=v.stretchY,F=v.content;if(this._lazyInitEmptyStyle(),m instanceof Ec||fr&&m instanceof fr){var U=h.browser.getImageData(m);this.style.addImage(u,{data:new h.RGBAImage({width:U.width,height:U.height},U.data),pixelRatio:x,stretchX:I,stretchY:M,content:F,sdf:E,version:0})}else{if(m.width===void 0||m.height===void 0)return this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var V=m;this.style.addImage(u,{data:new h.RGBAImage({width:m.width,height:m.height},new Uint8Array(m.data)),pixelRatio:x,stretchX:I,stretchY:M,content:F,sdf:E,version:0,userImage:V}),V.onAdd&&V.onAdd(this,u)}},s.prototype.updateImage=function(u,m){var v=this.style.getImage(u);if(!v)return this.fire(new h.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var x=m instanceof Ec||fr&&m instanceof fr?h.browser.getImageData(m):m,E=x.width,I=x.height,M=x.data;return E===void 0||I===void 0?this.fire(new h.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==v.data.width||I!==v.data.height?this.fire(new h.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(v.data.replace(M,!(m instanceof Ec||fr&&m instanceof fr)),void this.style.updateImage(u,v))},s.prototype.hasImage=function(u){return u?!!this.style.getImage(u):(this.fire(new h.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(u){this.style.removeImage(u)},s.prototype.loadImage=function(u,m){h.getImage(this._requestManager.transformRequest(u,h.ResourceType.Image),m)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(u,m){return this._lazyInitEmptyStyle(),this.style.addLayer(u,m),this._update(!0)},s.prototype.moveLayer=function(u,m){return this.style.moveLayer(u,m),this._update(!0)},s.prototype.removeLayer=function(u){return this.style.removeLayer(u),this._update(!0)},s.prototype.getLayer=function(u){return this.style.getLayer(u)},s.prototype.setLayerZoomRange=function(u,m,v){return this.style.setLayerZoomRange(u,m,v),this._update(!0)},s.prototype.setFilter=function(u,m,v){return v===void 0&&(v={}),this.style.setFilter(u,m,v),this._update(!0)},s.prototype.getFilter=function(u){return this.style.getFilter(u)},s.prototype.setPaintProperty=function(u,m,v,x){return x===void 0&&(x={}),this.style.setPaintProperty(u,m,v,x),this._update(!0)},s.prototype.getPaintProperty=function(u,m){return this.style.getPaintProperty(u,m)},s.prototype.setLayoutProperty=function(u,m,v,x){return x===void 0&&(x={}),this.style.setLayoutProperty(u,m,v,x),this._update(!0)},s.prototype.getLayoutProperty=function(u,m){return this.style.getLayoutProperty(u,m)},s.prototype.setLight=function(u,m){return m===void 0&&(m={}),this._lazyInitEmptyStyle(),this.style.setLight(u,m),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(u,m){return this.style.setFeatureState(u,m),this._update()},s.prototype.removeFeatureState=function(u,m){return this.style.removeFeatureState(u,m),this._update()},s.prototype.getFeatureState=function(u){return this.style.getFeatureState(u)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var u=0,m=0;return this._container&&(u=this._container.clientWidth||400,m=this._container.clientHeight||300),[u,m]},s.prototype._detectMissingCSS=function(){h.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&h.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y.create("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();var m=this._canvasContainer=Y.create("div","mapboxgl-canvas-container",u);this._interactive&&m.classList.add("mapboxgl-interactive"),this._canvas=Y.create("canvas","mapboxgl-canvas",m),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var v=this._containerDimensions();this._resizeCanvas(v[0],v[1]);var x=this._controlContainer=Y.create("div","mapboxgl-control-container",u),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){E[I]=Y.create("div","mapboxgl-ctrl-"+I,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(u,m){var v=h.browser.devicePixelRatio||1;this._canvas.width=v*u,this._canvas.height=v*m,this._canvas.style.width=u+"px",this._canvas.style.height=m+"px"},s.prototype._setupPainter=function(){var u=h.extend({},Me.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),m=this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);m?(this.painter=new Mr(m,this.transform),h.webpSupported.testSupport(m)):this.fire(new h.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.Event("webglcontextlost",{originalEvent:u}))},s.prototype._contextRestored=function(u){this._setupPainter(),this.resize(),this._update(),this.fire(new h.Event("webglcontextrestored",{originalEvent:u}))},s.prototype._onMapScroll=function(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(u){return this._update(),this._renderTaskQueue.add(u)},s.prototype._cancelRenderFrame=function(u){this._renderTaskQueue.remove(u)},s.prototype._render=function(u){var m,v=this,x=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(m=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,m),x=h.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var M=this.transform.zoom,F=h.browser.now();this.style.zoomHistory.update(M,F);var U=new h.EvaluationParameters(M,{now:F,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=U.crossFadingFactor();V===1&&V===this._crossFadingFactor||(I=!0,this._crossFadingFactor=V),this.style.update(U)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new h.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new h.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=h.browser.now()-x;E.endQueryEXT(E.TIME_ELAPSED_EXT,m),setTimeout(function(){var H=E.getQueryObjectEXT(m,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(m),v.fire(new h.Event("gpu-timing-frame",{cpuTime:X,gpuTime:H}))},50)}if(this.listens("gpu-timing-layer")){var K=this.painter.collectGpuTimers();setTimeout(function(){var H=v.painter.queryGpuTimers(K);v.fire(new h.Event("gpu-timing-layer",{layerTimes:H}))},50)}var te=this._sourcesDirty||this._styleDirty||this._placementDirty;return te||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.Event("idle")),!this._loaded||this._fullyLoaded||te||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var u=0,m=this._controls;u<m.length;u+=1)m[u].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),h.window!==void 0&&(h.window.removeEventListener("resize",this._onWindowResize,!1),h.window.removeEventListener("orientationchange",this._onWindowResize,!1),h.window.removeEventListener("online",this._onWindowOnline,!1));var v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),ka(this._canvasContainer),ka(this._controlContainer),ka(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new h.Event("remove"))},s.prototype.triggerRepaint=function(){var u=this;this.style&&!this._frame&&(this._frame=h.browser.frame(function(m){u._frame=null,u._render(m)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(u){this._trackResize&&this.resize({originalEvent:u})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(u){this._showPadding!==u&&(this._showPadding=u,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(u){this._vertices=u,this._update()},s.prototype._setCacheLimits=function(u,m){h.setCacheLimits(u,m)},o.version.get=function(){return h.version},Object.defineProperties(s.prototype,o),s}(tu);function ka(n){n.parentNode&&n.parentNode.removeChild(n)}var Sc={showCompass:!0,showZoom:!0,visualizePitch:!1},ko=function(n){var s=this;this.options=h.extend({},Sc,n),this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(o){return o.preventDefault()}),this.options.showZoom&&(h.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(o){return s._map.zoomIn({},{originalEvent:o})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(o){return s._map.zoomOut({},{originalEvent:o})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(h.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(o){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:o}):s._map.resetNorth({},{originalEvent:o})}),this._compassIcon=Y.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ko.prototype._updateZoomButtons=function(){var n=this._map.getZoom(),s=n===this._map.getMaxZoom(),o=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},ko.prototype._rotateCompassArrow=function(){var n=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=n},ko.prototype.onAdd=function(n){return this._map=n,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gn(this._map,this._compass,this.options.visualizePitch)),this._container},ko.prototype.onRemove=function(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ko.prototype._createButton=function(n,s){var o=Y.create("button",n,this._container);return o.type="button",o.addEventListener("click",s),o},ko.prototype._setButtonTitle=function(n,s){var o=this._map._getUIString("NavigationControl."+s);n.title=o,n.setAttribute("aria-label",o)};var gn=function(n,s,o){o===void 0&&(o=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Yl({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new xc({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),h.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Y.addEventListener(s,"mousedown",this.mousedown),Y.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(s,"touchmove",this.touchmove),Y.addEventListener(s,"touchend",this.touchend),Y.addEventListener(s,"touchcancel",this.reset)};function ns(n,s,o){if(n=new h.LngLat(n.lng,n.lat),s){var u=new h.LngLat(n.lng-360,n.lat),m=new h.LngLat(n.lng+360,n.lat),v=o.locationPoint(n).distSqr(s);o.locationPoint(u).distSqr(s)<v?n=u:o.locationPoint(m).distSqr(s)<v&&(n=m)}for(;Math.abs(n.lng-o.center.lng)>180;){var x=o.locationPoint(n);if(x.x>=0&&x.y>=0&&x.x<=o.width&&x.y<=o.height)break;n.lng>o.center.lng?n.lng-=360:n.lng+=360}return n}gn.prototype.down=function(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),Y.disableDrag()},gn.prototype.move=function(n,s){var o=this.map,u=this.mouseRotate.mousemoveWindow(n,s);if(u&&u.bearingDelta&&o.setBearing(o.getBearing()+u.bearingDelta),this.mousePitch){var m=this.mousePitch.mousemoveWindow(n,s);m&&m.pitchDelta&&o.setPitch(o.getPitch()+m.pitchDelta)}},gn.prototype.off=function(){var n=this.element;Y.removeEventListener(n,"mousedown",this.mousedown),Y.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(n,"touchmove",this.touchmove),Y.removeEventListener(n,"touchend",this.touchend),Y.removeEventListener(n,"touchcancel",this.reset),this.offTemp()},gn.prototype.offTemp=function(){Y.enableDrag(),Y.removeEventListener(h.window,"mousemove",this.mousemove),Y.removeEventListener(h.window,"mouseup",this.mouseup)},gn.prototype.mousedown=function(n){this.down(h.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),Y.mousePos(this.element,n)),Y.addEventListener(h.window,"mousemove",this.mousemove),Y.addEventListener(h.window,"mouseup",this.mouseup)},gn.prototype.mousemove=function(n){this.move(n,Y.mousePos(this.element,n))},gn.prototype.mouseup=function(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()},gn.prototype.touchstart=function(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return n.preventDefault()}},this._startPos))},gn.prototype.touchmove=function(n){n.targetTouches.length!==1?this.reset():(this._lastPos=Y.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:function(){return n.preventDefault()}},this._lastPos))},gn.prototype.touchend=function(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},gn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var fo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function iu(n,s,o){var u=n.classList;for(var m in fo)u.remove("mapboxgl-"+o+"-anchor-"+m);u.add("mapboxgl-"+o+"-anchor-"+s)}var os,Qs=function(n){function s(o,u){if(n.call(this),(o instanceof h.window.HTMLElement||u)&&(o=h.extend({element:o},u)),h.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,o&&o.element)this._element=o.element,this._offset=h.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div"),this._element.setAttribute("aria-label","Map marker");var m=Y.createNS("http://www.w3.org/2000/svg","svg");m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height","41px"),m.setAttributeNS(null,"width","27px"),m.setAttributeNS(null,"viewBox","0 0 27 41");var v=Y.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");var x=Y.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");var E=Y.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var I=0,M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<M.length;I+=1){var F=M[I],U=Y.createNS("http://www.w3.org/2000/svg","ellipse");U.setAttributeNS(null,"opacity","0.04"),U.setAttributeNS(null,"cx","10.5"),U.setAttributeNS(null,"cy","5.80029008"),U.setAttributeNS(null,"rx",F.rx),U.setAttributeNS(null,"ry",F.ry),E.appendChild(U)}var V=Y.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);var X=Y.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(X);var K=Y.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");var te=Y.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(te);var H=Y.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");var ee=Y.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");var oe=Y.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#000000"),oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962");var fe=Y.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),ee.appendChild(oe),ee.appendChild(fe),x.appendChild(E),x.appendChild(V),x.appendChild(K),x.appendChild(H),x.appendChild(ee),m.appendChild(x),m.setAttributeNS(null,"height",41*this._scale+"px"),m.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(m),this._offset=h.Point.convert(o&&o.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ee){Ee.preventDefault()}),this._element.addEventListener("mousedown",function(Ee){Ee.preventDefault()}),iu(this._element,this._anchor,"marker"),this._popup=null}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=h.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){var u=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(24.6+u)],"bottom-right":[-u,-1*(24.6+u)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(o){var u=o.code,m=o.charCode||o.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()},s.prototype._onMapClick=function(o){var u=o.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var o=this._popup;return o?(o.isOpen()?o.remove():o.addTo(this._map),this):this},s.prototype._update=function(o){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ns(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(u="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m="rotateX("+this._map.getPitch()+"deg)"),o&&o.type!=="moveend"||(this._pos=this._pos.round()),Y.setTransform(this._element,fo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+m+" "+u)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(o){return this._offset=h.Point.convert(o),this._update(),this},s.prototype._onMove=function(o){if(!this._isDragging){var u=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.Event("dragstart"))),this.fire(new h.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(o){this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(o){return this._rotation=o||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(o){return this._rotationAlignment=o||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(h.Evented),Tc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},as=0,Pa=!1,Cc=function(n){function s(o){n.call(this),this.options=h.extend({},Tc,o),h.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.onAdd=function(o){var u;return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,os!==void 0?u(os):h.window.navigator.permissions!==void 0?h.window.navigator.permissions.query({name:"geolocation"}).then(function(m){u(os=m.state!=="denied")}):u(os=!!h.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(h.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,as=0,Pa=!1},s.prototype._isOutOfMapMaxBounds=function(o){var u=this._map.getMaxBounds(),m=o.coords;return u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new h.Event("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("geolocate",o)),this._finish()}},s.prototype._updateCamera=function(o){var u=new h.LngLat(o.coords.longitude,o.coords.latitude),m=o.coords.accuracy,v=this._map.getBearing(),x=h.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),x,{geolocateSource:!0})},s.prototype._updateMarker=function(o){if(o){var u=new h.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var o=this._map._container.clientHeight/2,u=this._map.unproject([0,o]),m=this._map.unproject([1,o]),v=u.distanceTo(m),x=Math.ceil(2*this._accuracy/v);this._circleElement.style.width=x+"px",this._circleElement.style.height=x+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation)if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&Pa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new h.Event("error",o)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(o){var u=this;if(this._container.addEventListener("contextmenu",function(x){return x.preventDefault()}),this._geolocateButton=Y.create("button","mapboxgl-ctrl-geolocate",this._container),Y.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",o===!1){h.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{var v=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=v,this._geolocateButton.setAttribute("aria-label",v)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qs(this._dotElement),this._circleElement=Y.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(x){x.geolocateSource||u._watchState!=="ACTIVE_LOCK"||x.originalEvent&&x.originalEvent.type==="resize"||(u._watchState="BACKGROUND",u._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),u._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),u.fire(new h.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return h.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":as--,Pa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new h.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++as>1?(o={maximumAge:6e5,timeout:0},Pa=!0):(o=this.options.positionOptions,Pa=!1),this._geolocationWatchID=h.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else h.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){h.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(h.Evented),$o={maxWidth:100,unit:"metric"},Xo=function(n){this.options=h.extend({},$o,n),h.bindAll(["_onMove","setUnit"],this)};function nu(n,s,o){var u=o&&o.maxWidth||100,m=n._container.clientHeight/2,v=n.unproject([0,m]),x=n.unproject([u,m]),E=v.distanceTo(x);if(o&&o.unit==="imperial"){var I=3.2808*E;I>5280?Jo(s,u,I/5280,n._getUIString("ScaleControl.Miles")):Jo(s,u,I,n._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Jo(s,u,E/1852,n._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Jo(s,u,E/1e3,n._getUIString("ScaleControl.Kilometers")):Jo(s,u,E,n._getUIString("ScaleControl.Meters"))}function Jo(n,s,o,u){var m,v,x,E=(m=o,(v=Math.pow(10,(""+Math.floor(m)).length-1))*(x=(x=m/v)>=10?10:x>=5?5:x>=3?3:x>=2?2:x>=1?1:function(I){var M=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*M)/M}(x)));n.style.width=s*(E/o)+"px",n.innerHTML=E+"&nbsp;"+u}Xo.prototype.getDefaultPosition=function(){return"bottom-left"},Xo.prototype._onMove=function(){nu(this._map,this._container,this.options)},Xo.prototype.onAdd=function(n){return this._map=n,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",n.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Xo.prototype.onRemove=function(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Xo.prototype.setUnit=function(n){this.options.unit=n,nu(this._map,this._container,this.options)};var Fn=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof h.window.HTMLElement?this._container=n.container:h.warnOnce("Full screen control 'container' must be a DOM element.")),h.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in h.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in h.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in h.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in h.window.document&&(this._fullscreenchange="MSFullscreenChange")};Fn.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",h.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Fn.prototype.onRemove=function(){Y.remove(this._controlContainer),this._map=null,h.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Fn.prototype._checkFullscreenSupport=function(){return!!(h.window.document.fullscreenEnabled||h.window.document.mozFullScreenEnabled||h.window.document.msFullscreenEnabled||h.window.document.webkitFullscreenEnabled)},Fn.prototype._setupUI=function(){var n=this._fullscreenButton=Y.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),h.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Fn.prototype._updateTitle=function(){var n=this._getTitle();this._fullscreenButton.setAttribute("aria-label",n),this._fullscreenButton.title=n},Fn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Fn.prototype._isFullscreen=function(){return this._fullscreen},Fn.prototype._changeIcon=function(){(h.window.document.fullscreenElement||h.window.document.mozFullScreenElement||h.window.document.webkitFullscreenElement||h.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Fn.prototype._onClickFullscreen=function(){this._isFullscreen()?h.window.document.exitFullscreen?h.window.document.exitFullscreen():h.window.document.mozCancelFullScreen?h.window.document.mozCancelFullScreen():h.window.document.msExitFullscreen?h.window.document.msExitFullscreen():h.window.document.webkitCancelFullScreen&&h.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ic={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},el=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ac=function(n){function s(o){n.call(this),this.options=h.extend(Object.create(Ic),o),h.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(s.__proto__=n),(s.prototype=Object.create(n&&n.prototype)).constructor=s,s.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new h.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(o){return this._lngLat=h.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(o){return this.setDOMContent(h.window.document.createTextNode(o))},s.prototype.setHTML=function(o){var u,m=h.window.document.createDocumentFragment(),v=h.window.document.createElement("body");for(v.innerHTML=o;u=v.firstChild;)m.appendChild(u);return this.setDOMContent(m)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(o){return this.options.maxWidth=o,this._update(),this},s.prototype.setDOMContent=function(o){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(o),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(o){this._container&&this._container.classList.add(o)},s.prototype.removeClassName=function(o){this._container&&this._container.classList.remove(o)},s.prototype.setOffset=function(o){return this.options.offset=o,this._update(),this},s.prototype.toggleClassName=function(o){if(this._container)return this._container.classList.toggle(o)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Y.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(o){this._update(o.point)},s.prototype._onMouseMove=function(o){this._update(o.point)},s.prototype._onDrag=function(o){this._update(o.point)},s.prototype._update=function(o){var u=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Y.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Y.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(U){return u._container.classList.add(U)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ns(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var m=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),v=this.options.anchor,x=function U(V){if(V){if(typeof V=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(V,2)));return{center:new h.Point(0,0),top:new h.Point(0,V),"top-left":new h.Point(X,X),"top-right":new h.Point(-X,X),bottom:new h.Point(0,-V),"bottom-left":new h.Point(X,-X),"bottom-right":new h.Point(-X,-X),left:new h.Point(V,0),right:new h.Point(-V,0)}}if(V instanceof h.Point||Array.isArray(V)){var K=h.Point.convert(V);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}return{center:h.Point.convert(V.center||[0,0]),top:h.Point.convert(V.top||[0,0]),"top-left":h.Point.convert(V["top-left"]||[0,0]),"top-right":h.Point.convert(V["top-right"]||[0,0]),bottom:h.Point.convert(V.bottom||[0,0]),"bottom-left":h.Point.convert(V["bottom-left"]||[0,0]),"bottom-right":h.Point.convert(V["bottom-right"]||[0,0]),left:h.Point.convert(V.left||[0,0]),right:h.Point.convert(V.right||[0,0])}}return U(new h.Point(0,0))}(this.options.offset);if(!v){var E,I=this._container.offsetWidth,M=this._container.offsetHeight;E=m.y+x.bottom.y<M?["top"]:m.y>this._map.transform.height-M?["bottom"]:[],m.x<I/2?E.push("left"):m.x>this._map.transform.width-I/2&&E.push("right"),v=E.length===0?"bottom":E.join("-")}var F=m.add(x[v]).round();Y.setTransform(this._container,fo[v]+" translate("+F.x+"px,"+F.y+"px)"),iu(this._container,v,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var o=this._container.querySelector(el);o&&o.focus()}},s.prototype._onClose=function(){this.remove()},s}(h.Evented),ou={version:h.version,supported:Me,setRTLTextPlugin:h.setRTLTextPlugin,getRTLTextPluginStatus:h.getRTLTextPluginStatus,Map:yh,NavigationControl:ko,GeolocateControl:Cc,AttributionControl:Wi,ScaleControl:Xo,FullscreenControl:Fn,Popup:Ac,Marker:Qs,Style:pn,LngLat:h.LngLat,LngLatBounds:h.LngLatBounds,Point:h.Point,MercatorCoordinate:h.MercatorCoordinate,Evented:h.Evented,config:h.config,prewarm:function(){Ae().acquire(Ie)},clearPrewarmedResources:function(){var n=gt;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(Ie),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return h.config.ACCESS_TOKEN},set accessToken(n){h.config.ACCESS_TOKEN=n},get baseApiUrl(){return h.config.API_URL},set baseApiUrl(n){h.config.API_URL=n},get workerCount(){return Ue.workerCount},set workerCount(n){Ue.workerCount=n},get maxParallelImageRequests(){return h.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(n){h.config.MAX_PARALLEL_IMAGE_REQUESTS=n},clearStorage:function(n){h.clearTileCache(n)},workerUrl:""};return ou}),ve})})(w);var T=_;function k(ze){if(typeof ze=="string"){var he=ze;if(ze=document.getElementById(ze),!ze)throw new Error("No element with id "+he)}return ze}function L(ze){if(!/^#([0-9a-f]{3}){1,2}$/i.test(ze)&&!/^[a-z]+$/i.test(ze))throw new Error("Invalid color")}function q(ze,he){var ue=41,De=27,ve=2,je=new ze.Marker()._element.querySelector("svg");je.removeAttribute("display"),je.setAttribute("xmlns","http://www.w3.org/2000/svg"),je.setAttribute("height",ue),je.setAttribute("width",De),je.setAttribute("viewBox","0 0 "+De+" "+ue),L(he),je.querySelector("*[fill='#3FB1CE']").setAttribute("fill",he);var h=je.querySelectorAll("circle"),Me=h[h.length-1];if(h.length==1){var Y=Me.cloneNode();Y.setAttribute("fill","#000000"),Y.setAttribute("opacity",.25),Me.parentNode.insertBefore(Y,Me)}Me.setAttribute("r",4.5);var Fe=new Image(De*ve,ue*ve);return Fe.src="data:image/svg+xml;utf8,"+encodeURIComponent(je.outerHTML),Fe}var Z={},ae=function(he,ue,De,ve){var je=this;!Se.library&&typeof window<"u"&&(Se.library=window.mapboxgl||window.maplibregl||null);var h=Se.library;if(!h)throw new Error("No mapping library found");var Me,Y={},Fe={},ke=[],Xe=0;he=k(he),he.id&&(Z[he.id]=this);function ye(we,Pe,Le){var Te=new XMLHttpRequest;Te.open("GET",Pe,!0),Te.setRequestHeader("Content-Type","application/json"),Te.onload=function(){Te.status===200?Le(JSON.parse(Te.responseText)):tr(we,Te.statusText)},Te.send()}function mt(we){Me.loaded()?we():Me.on("load",we)}function et(we){return typeof we=="number"?we:new Date(we).getTime()/1e3}function Wt(we,Pe,Le){for(var Te=0;Te<Pe.length;Te++){var Ye=Pe[Te],Ze=et(Ye.time);Ze&&(Fe[Ze]||(Fe[Ze]=[]),Fe[Ze].push(Ye),Je.extend(En(Ye)))}for(var ct in Fe)Object.prototype.hasOwnProperty.call(Fe,ct)&&ke.push(parseInt(ct));ke.sort(),$n(we,Fe[ke[Xe]],Le),mt(function(){setTimeout(function(){Dt(we,Le)},100)})}function Dt(we,Pe){Xe++,un(we,Fe[ke[Xe]],Pe),Xe<ke.length-1&&setTimeout(function(){Dt(we,Pe)},100)}function tr(we,Pe){we.textContent=Pe}function Rt(we,Pe,Le,Te){try{Te(we,Pe,Le)}catch(Ye){throw tr(we,Ye.message),Ye}}function pi(we,Pe,Le,Te){typeof Pe=="string"?ye(we,Pe,function(Ye){Rt(we,Ye,Le,Te)}):typeof Pe=="function"?Pe(function(Ye){Rt(we,Ye,Le,Te)},function(Ye){tr(we,Ye)}):Rt(we,Pe,Le,Te)}function un(we,Pe,Le){Oe(function(){Le.trail&&(ni(Pe,Le.trail),Me.getSource("trails").setData(Qr(Pe))),Me.getSource("objects").setData(hi(Pe,Le))})}var Hr=new window.Map;function hi(we,Pe){for(var Le={type:"FeatureCollection",features:[]},Te=0;Te<we.length;Te++){var Ye=we[Te],Ze=Object.assign({},Ye),ct=void 0;if(ve==="point"){if(Ze.icon||(Ze.icon=Pe.defaultIcon||"mapkick"),Ze.mapkickIconSize=Ze.icon==="mapkick"?.5:1,Ze.mapkickIconAnchor=Ze.icon==="mapkick"?"bottom":"center",Ze.mapkickIconOffset=Ze.icon==="mapkick"?[0,10]:[0,0],Ze.icon==="mapkick"){var it=Ze.color||qe.color||"#f84d4d",At=Hr.get(it);At===void 0&&(At=Hr.size,L(it),Hr.set(it,At)),Ze.icon="mapkick-"+At}var Vt=En(Ye);if(!Vt[1])throw new Error("missing latitude (index: "+Te+")");if(!Vt[0])throw new Error("missing longitude (index: "+Te+")");ct={type:"Point",coordinates:Vt}}else{if(ct=Ye.geometry,!ct)throw new Error("missing geometry (index: "+Te+")");delete Ze.geometry,Ze.mapkickColor=Ze.color||qe.color||"#0090ff"}Le.features.push({type:"Feature",id:Te,geometry:ct,properties:Ze})}return Le}function En(we){return[we.longitude||we.lng||we.lon,we.latitude||we.lat]}function Mn(we){return we.id}function ni(we,Pe){for(var Le=0;Le<we.length;Le++){var Te=we[Le],Ye=Mn(Te);Y[Ye]||(Y[Ye]=[]),Y[Ye].push(En(Te)),Pe&&Pe.len&&Y[Ye].length>Pe.len&&Y[Ye].shift()}}function Qr(we){for(var Pe={type:"FeatureCollection",features:[]},Le=0;Le<we.length;Le++){var Te=we[Le];Pe.features.push({type:"Feature",geometry:{type:"LineString",coordinates:Y[Mn(Te)]}})}return Pe}function Ii(we){for(var Pe={type:"FeatureCollection",features:[]},Le=0;Le<we.features.length;Le++){var Te=we.features[Le],Ye=void 0,Ze=new h.LngLatBounds;if(oi(Ze,Te.geometry),!Ze.isEmpty()){var ct=Ze.getCenter();Ye=[ct.lng,ct.lat]}Ye&&Pe.features.push({type:"Feature",id:Le,geometry:{type:"Point",coordinates:Ye},properties:Te.properties})}return Pe}function Kn(we){for(var Pe=we.getStyle().layers,Le,Te=Pe.length-1;Te>=0;Te--){var Ye=Pe[Te];if(!(Ye.metadata&&Ye.metadata["mapbox:featureComponent"]==="place-labels"))break;Le=Ye.id}return Le}function dr(we,Pe){var Le={};if(Me.addSource(we,{type:"geojson",data:Pe}),ve==="point")Me.addLayer({id:we+"-text",source:we,type:"symbol",layout:{"text-field":"{label}","text-size":11,"text-anchor":"top","text-offset":[0,1]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}}),Me.addLayer({id:we,source:we,type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-size":{type:"identity",property:"mapkickIconSize"},"icon-anchor":{type:"identity",property:"mapkickIconAnchor"},"icon-offset":{type:"identity",property:"mapkickIconOffset"}}});else{var Te=Kn(Me),Ye=we+"-outline";Me.addLayer({id:Ye,source:we,type:"line",paint:{"line-color":{type:"identity",property:"mapkickColor"},"line-opacity":.7,"line-width":1}},Te),Me.addLayer({id:we,source:we,type:"fill",paint:{"fill-color":{type:"identity",property:"mapkickColor"},"fill-opacity":.3}},Ye);for(var Ze=we+"-text",ct=Ii(Pe),it=0;it<ct.features.length;it++){var At=ct.features[it];Le[At.id]=At.geometry.coordinates}Me.addSource(Ze,{type:"geojson",data:ct}),Me.addLayer({id:we+"-text",source:Ze,type:"symbol",layout:{"text-field":"{label}","text-size":11},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}})}var Vt=!("hover"in We)||We.hover,jt={closeButton:!1,closeOnClick:!1};Vt||(jt.anchor="bottom");var dt=new h.Popup(jt),kr=function(lr,rr){var fi=window.getComputedStyle(rr.getElement()),Oi=new DOMMatrixReadOnly(fi.transform),di=5,Qi=5,uo=Oi.m42,cn=Oi.m41;(uo<di||cn<di)&&lr.panBy([Math.min(cn-di-Qi,0),Math.min(uo-di-Qi,0)])},Pr=function(lr){var rr=Sn(lr),fi=rr.properties.tooltip;if(fi){ve==="point"&&rr.properties.icon.startsWith("mapkick-")?dt.options.offset={top:[0,14],"top-left":[0,14],"top-right":[0,14],bottom:[0,-44],"bottom-left":[0,-44],"bottom-right":[0,-44],left:[14,0],right:[-14,0]}:dt.options.offset=14;var Oi;ve==="point"?Oi=rr.geometry.coordinates:Oi=Le[rr.id],dt.setLngLat(Oi),We.html?dt.setHTML(fi):dt.setText(fi),dt.addTo(Me),dt._container.offsetWidth%2!==0&&(dt._container.style.width=dt._container.offsetWidth+1+"px"),ve!=="area"&&kr(Me,dt)}},ai=function(lr){return lr.geometry.coordinates[1]},Sn=function(lr){for(var rr=lr.features,fi=rr[0],Oi=1;Oi<rr.length;Oi++){var di=rr[Oi];ai(di)<ai(fi)&&(fi=di)}return fi};if(!Vt){var Ai=null;Me.on("click",we,function(lr){var rr=Sn(lr).id;rr!==Ai&&(Pr(lr),Ai=rr,lr.mapkickPopupOpened=!0)}),Me.on("click",function(lr){lr.mapkickPopupOpened||(dt.remove(),Ai=null)})}Me.on("mouseenter",we,function(lr){var rr=Sn(lr).properties.tooltip;rr&&(Me.getCanvas().style.cursor="pointer",Vt&&Pr(lr))}),Me.on("mouseleave",we,function(){Me.getCanvas().style.cursor="",Vt&&dt.remove()})}function oi(we,Pe){if(Pe.type==="Point")we.extend(Pe.coordinates);else if(Pe.type==="Polygon")for(var Le=Pe.coordinates[0],Te=0;Te<Le.length;Te++)we.extend(Le[Te]);else if(Pe.type==="MultiPolygon")for(var Ye=Pe.coordinates,Ze=0;Ze<Ye.length;Ze++)for(var ct=Ye[Ze][0],it=0;it<ct.length;it++)we.extend(ct[it])}var $n=function(we,Pe,Le){var Te=hi(Pe,Le);Le=Le||{};for(var Ye=0;Ye<Te.features.length;Ye++)oi(Je,Te.features[Ye].geometry);we.textContent="";var Ze=Le.style;if(!Ze){var ct=!("accessToken"in h)||/^1\.1[45]/.test(h.version);if(ct)throw new Error("style required for MapLibre");Ze="mapbox://styles/mapbox/streets-v12"}var it=Le.zoom,At=Le.center;At||(Je.isEmpty()?(At=[0,0],it||(it=1)):At=Je.getCenter());var Vt={container:we,style:Ze,dragRotate:!1,touchZoomRotate:!1,center:At,zoom:it||15};Le.style||(Vt.projection="mercator"),Le.accessToken&&(Vt.accessToken=Le.accessToken),Me=new h.Map(Vt),Le.controls&&Me.addControl(new h.NavigationControl({showCompass:!1})),Le.zoom||(Me.style.stylesheet||(Me.style.stylesheet={}),Je.isEmpty()||Me.fitBounds(Je,{padding:40,animate:!1,maxZoom:15})),je.map=Me,mt(function(){Le.trail&&(ni(Pe),Me.addSource("trails",{type:"geojson",data:Qr([])}),Me.addLayer({id:"trails",source:"trails",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}}));var jt=Hr.size;function dt(){if(jt!==0){jt--;return}dr("objects",Te),ie=!0;for(var kr;kr=pe.shift();)kr()}Hr.forEach(function(kr,Pr){var ai=q(h,Pr);ai.addEventListener("load",function(){Me.addImage("mapkick-"+kr+"-15",ai),dt()})}),dt()})},ie=!1,pe=[];function Oe(we){ie?we():pe.push(we)}De=De||{},De=Object.assign({},Se.options,De);var We=De.tooltips||{},qe=De.markers||{},Je=new h.LngLatBounds;De.replay?pi(he,ue,De,Wt):(pi(he,ue,De,$n),De.refresh&&(this.intervalId=setInterval(function(){pi(he,ue,De,un)},De.refresh*1e3)))};ae.prototype.getMapObject=function(){return this.map},ae.prototype.destroy=function(){this.stopRefresh(),this.map&&(this.map.remove(),this.map=null)},ae.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};var ce=function(ze){function he(ue,De,ve){ze.call(this,ue,De,ve,"point")}return ze&&(he.__proto__=ze),he.prototype=Object.create(ze&&ze.prototype),he.prototype.constructor=he,he}(ae),de=function(ze){function he(ue,De,ve){ze.call(this,ue,De,ve,"area")}return ze&&(he.__proto__=ze),he.prototype=Object.create(ze&&ze.prototype),he.prototype.constructor=he,he}(ae),Se={Map:ce,AreaMap:de,maps:Z,options:{},library:null};return Se.use=function(ze){Se.library=ze},typeof window<"u"&&!window.Mapkick&&(window.Mapkick=Se,setTimeout(function(){window.dispatchEvent(new Event("mapkick:load"))},0)),Se.use(T),Se})})(FT);function dx(r,a){return function(){return r.apply(a,arguments)}}const{toString:NT}=Object.prototype,{getPrototypeOf:iy}=Object,fd=(r=>a=>{const c=NT.call(a);return r[c]||(r[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),pa=r=>(r=r.toLowerCase(),a=>fd(a)===r),dd=r=>a=>typeof a===r,{isArray:ic}=Array,Ap=dd("undefined");function UT(r){return r!==null&&!Ap(r)&&r.constructor!==null&&!Ap(r.constructor)&&wo(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const mx=pa("ArrayBuffer");function VT(r){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(r):a=r&&r.buffer&&mx(r.buffer),a}const jT=dd("string"),wo=dd("function"),gx=dd("number"),md=r=>r!==null&&typeof r=="object",qT=r=>r===!0||r===!1,yf=r=>{if(fd(r)!=="object")return!1;const a=iy(r);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ZT=pa("Date"),HT=pa("File"),GT=pa("Blob"),WT=pa("FileList"),KT=r=>md(r)&&wo(r.pipe),$T=r=>{let a;return r&&(typeof FormData=="function"&&r instanceof FormData||wo(r.append)&&((a=fd(r))==="formdata"||a==="object"&&wo(r.toString)&&r.toString()==="[object FormData]"))},XT=pa("URLSearchParams"),JT=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Np(r,a,{allOwnKeys:c=!1}={}){if(r===null||typeof r>"u")return;let f,y;if(typeof r!="object"&&(r=[r]),ic(r))for(f=0,y=r.length;f<y;f++)a.call(null,r[f],f,r);else{const _=c?Object.getOwnPropertyNames(r):Object.keys(r),w=_.length;let T;for(f=0;f<w;f++)T=_[f],a.call(null,r[T],T,r)}}function yx(r,a){a=a.toLowerCase();const c=Object.keys(r);let f=c.length,y;for(;f-- >0;)if(y=c[f],a===y.toLowerCase())return y;return null}const vx=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),_x=r=>!Ap(r)&&r!==vx;function Qm(){const{caseless:r}=_x(this)&&this||{},a={},c=(f,y)=>{const _=r&&yx(a,y)||y;yf(a[_])&&yf(f)?a[_]=Qm(a[_],f):yf(f)?a[_]=Qm({},f):ic(f)?a[_]=f.slice():a[_]=f};for(let f=0,y=arguments.length;f<y;f++)arguments[f]&&Np(arguments[f],c);return a}const YT=(r,a,c,{allOwnKeys:f}={})=>(Np(a,(y,_)=>{c&&wo(y)?r[_]=dx(y,c):r[_]=y},{allOwnKeys:f}),r),QT=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),eC=(r,a,c,f)=>{r.prototype=Object.create(a.prototype,f),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:a.prototype}),c&&Object.assign(r.prototype,c)},tC=(r,a,c,f)=>{let y,_,w;const T={};if(a=a||{},r==null)return a;do{for(y=Object.getOwnPropertyNames(r),_=y.length;_-- >0;)w=y[_],(!f||f(w,r,a))&&!T[w]&&(a[w]=r[w],T[w]=!0);r=c!==!1&&iy(r)}while(r&&(!c||c(r,a))&&r!==Object.prototype);return a},rC=(r,a,c)=>{r=String(r),(c===void 0||c>r.length)&&(c=r.length),c-=a.length;const f=r.indexOf(a,c);return f!==-1&&f===c},iC=r=>{if(!r)return null;if(ic(r))return r;let a=r.length;if(!gx(a))return null;const c=new Array(a);for(;a-- >0;)c[a]=r[a];return c},nC=(r=>a=>r&&a instanceof r)(typeof Uint8Array<"u"&&iy(Uint8Array)),oC=(r,a)=>{const f=(r&&r[Symbol.iterator]).call(r);let y;for(;(y=f.next())&&!y.done;){const _=y.value;a.call(r,_[0],_[1])}},aC=(r,a)=>{let c;const f=[];for(;(c=r.exec(a))!==null;)f.push(c);return f},sC=pa("HTMLFormElement"),lC=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,f,y){return f.toUpperCase()+y}),L_=(({hasOwnProperty:r})=>(a,c)=>r.call(a,c))(Object.prototype),uC=pa("RegExp"),xx=(r,a)=>{const c=Object.getOwnPropertyDescriptors(r),f={};Np(c,(y,_)=>{a(y,_,r)!==!1&&(f[_]=y)}),Object.defineProperties(r,f)},cC=r=>{xx(r,(a,c)=>{if(wo(r)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const f=r[c];if(wo(f)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},pC=(r,a)=>{const c={},f=y=>{y.forEach(_=>{c[_]=!0})};return ic(r)?f(r):f(String(r).split(a)),c},hC=()=>{},fC=(r,a)=>(r=+r,Number.isFinite(r)?r:a),wm="abcdefghijklmnopqrstuvwxyz",D_="0123456789",bx={DIGIT:D_,ALPHA:wm,ALPHA_DIGIT:wm+wm.toUpperCase()+D_},dC=(r=16,a=bx.ALPHA_DIGIT)=>{let c="";const{length:f}=a;for(;r--;)c+=a[Math.random()*f|0];return c};function mC(r){return!!(r&&wo(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const gC=r=>{const a=new Array(10),c=(f,y)=>{if(md(f)){if(a.indexOf(f)>=0)return;if(!("toJSON"in f)){a[y]=f;const _=ic(f)?[]:{};return Np(f,(w,T)=>{const k=c(w,y+1);!Ap(k)&&(_[T]=k)}),a[y]=void 0,_}}return f};return c(r,0)},yC=pa("AsyncFunction"),vC=r=>r&&(md(r)||wo(r))&&wo(r.then)&&wo(r.catch),Ve={isArray:ic,isArrayBuffer:mx,isBuffer:UT,isFormData:$T,isArrayBufferView:VT,isString:jT,isNumber:gx,isBoolean:qT,isObject:md,isPlainObject:yf,isUndefined:Ap,isDate:ZT,isFile:HT,isBlob:GT,isRegExp:uC,isFunction:wo,isStream:KT,isURLSearchParams:XT,isTypedArray:nC,isFileList:WT,forEach:Np,merge:Qm,extend:YT,trim:JT,stripBOM:QT,inherits:eC,toFlatObject:tC,kindOf:fd,kindOfTest:pa,endsWith:rC,toArray:iC,forEachEntry:oC,matchAll:aC,isHTMLForm:sC,hasOwnProperty:L_,hasOwnProp:L_,reduceDescriptors:xx,freezeMethods:cC,toObjectSet:pC,toCamelCase:lC,noop:hC,toFiniteNumber:fC,findKey:yx,global:vx,isContextDefined:_x,ALPHABET:bx,generateString:dC,isSpecCompliantForm:mC,toJSONObject:gC,isAsyncFn:yC,isThenable:vC};function Sr(r,a,c,f,y){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",a&&(this.code=a),c&&(this.config=c),f&&(this.request=f),y&&(this.response=y)}Ve.inherits(Sr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ve.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const wx=Sr.prototype,Ex={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Ex[r]={value:r}});Object.defineProperties(Sr,Ex);Object.defineProperty(wx,"isAxiosError",{value:!0});Sr.from=(r,a,c,f,y,_)=>{const w=Object.create(wx);return Ve.toFlatObject(r,w,function(k){return k!==Error.prototype},T=>T!=="isAxiosError"),Sr.call(w,r.message,a,c,f,y),w.cause=r,w.name=r.name,_&&Object.assign(w,_),w};const _C=null;function eg(r){return Ve.isPlainObject(r)||Ve.isArray(r)}function Sx(r){return Ve.endsWith(r,"[]")?r.slice(0,-2):r}function R_(r,a,c){return r?r.concat(a).map(function(y,_){return y=Sx(y),!c&&_?"["+y+"]":y}).join(c?".":""):a}function xC(r){return Ve.isArray(r)&&!r.some(eg)}const bC=Ve.toFlatObject(Ve,{},null,function(a){return/^is[A-Z]/.test(a)});function gd(r,a,c){if(!Ve.isObject(r))throw new TypeError("target must be an object");a=a||new FormData,c=Ve.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Se,ze){return!Ve.isUndefined(ze[Se])});const f=c.metaTokens,y=c.visitor||q,_=c.dots,w=c.indexes,k=(c.Blob||typeof Blob<"u"&&Blob)&&Ve.isSpecCompliantForm(a);if(!Ve.isFunction(y))throw new TypeError("visitor must be a function");function L(de){if(de===null)return"";if(Ve.isDate(de))return de.toISOString();if(!k&&Ve.isBlob(de))throw new Sr("Blob is not supported. Use a Buffer instead.");return Ve.isArrayBuffer(de)||Ve.isTypedArray(de)?k&&typeof Blob=="function"?new Blob([de]):Buffer.from(de):de}function q(de,Se,ze){let he=de;if(de&&!ze&&typeof de=="object"){if(Ve.endsWith(Se,"{}"))Se=f?Se:Se.slice(0,-2),de=JSON.stringify(de);else if(Ve.isArray(de)&&xC(de)||(Ve.isFileList(de)||Ve.endsWith(Se,"[]"))&&(he=Ve.toArray(de)))return Se=Sx(Se),he.forEach(function(De,ve){!(Ve.isUndefined(De)||De===null)&&a.append(w===!0?R_([Se],ve,_):w===null?Se:Se+"[]",L(De))}),!1}return eg(de)?!0:(a.append(R_(ze,Se,_),L(de)),!1)}const Z=[],ae=Object.assign(bC,{defaultVisitor:q,convertValue:L,isVisitable:eg});function ce(de,Se){if(!Ve.isUndefined(de)){if(Z.indexOf(de)!==-1)throw Error("Circular reference detected in "+Se.join("."));Z.push(de),Ve.forEach(de,function(he,ue){(!(Ve.isUndefined(he)||he===null)&&y.call(a,he,Ve.isString(ue)?ue.trim():ue,Se,ae))===!0&&ce(he,Se?Se.concat(ue):[ue])}),Z.pop()}}if(!Ve.isObject(r))throw new TypeError("data must be an object");return ce(r),a}function O_(r){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(f){return a[f]})}function ny(r,a){this._pairs=[],r&&gd(r,this,a)}const Tx=ny.prototype;Tx.append=function(a,c){this._pairs.push([a,c])};Tx.toString=function(a){const c=a?function(f){return a.call(this,f,O_)}:O_;return this._pairs.map(function(y){return c(y[0])+"="+c(y[1])},"").join("&")};function wC(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cx(r,a,c){if(!a)return r;const f=c&&c.encode||wC,y=c&&c.serialize;let _;if(y?_=y(a,c):_=Ve.isURLSearchParams(a)?a.toString():new ny(a,c).toString(f),_){const w=r.indexOf("#");w!==-1&&(r=r.slice(0,w)),r+=(r.indexOf("?")===-1?"?":"&")+_}return r}class EC{constructor(){this.handlers=[]}use(a,c,f){return this.handlers.push({fulfilled:a,rejected:c,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Ve.forEach(this.handlers,function(f){f!==null&&a(f)})}}const B_=EC,Ix={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SC=typeof URLSearchParams<"u"?URLSearchParams:ny,TC=typeof FormData<"u"?FormData:null,CC=typeof Blob<"u"?Blob:null,IC=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),AC=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ua={isBrowser:!0,classes:{URLSearchParams:SC,FormData:TC,Blob:CC},isStandardBrowserEnv:IC,isStandardBrowserWebWorkerEnv:AC,protocols:["http","https","file","blob","url","data"]};function kC(r,a){return gd(r,new ua.classes.URLSearchParams,Object.assign({visitor:function(c,f,y,_){return ua.isNode&&Ve.isBuffer(c)?(this.append(f,c.toString("base64")),!1):_.defaultVisitor.apply(this,arguments)}},a))}function PC(r){return Ve.matchAll(/\w+|\[(\w*)]/g,r).map(a=>a[0]==="[]"?"":a[1]||a[0])}function zC(r){const a={},c=Object.keys(r);let f;const y=c.length;let _;for(f=0;f<y;f++)_=c[f],a[_]=r[_];return a}function Ax(r){function a(c,f,y,_){let w=c[_++];const T=Number.isFinite(+w),k=_>=c.length;return w=!w&&Ve.isArray(y)?y.length:w,k?(Ve.hasOwnProp(y,w)?y[w]=[y[w],f]:y[w]=f,!T):((!y[w]||!Ve.isObject(y[w]))&&(y[w]=[]),a(c,f,y[w],_)&&Ve.isArray(y[w])&&(y[w]=zC(y[w])),!T)}if(Ve.isFormData(r)&&Ve.isFunction(r.entries)){const c={};return Ve.forEachEntry(r,(f,y)=>{a(PC(f),y,c,0)}),c}return null}const MC={"Content-Type":void 0};function LC(r,a,c){if(Ve.isString(r))try{return(a||JSON.parse)(r),Ve.trim(r)}catch(f){if(f.name!=="SyntaxError")throw f}return(c||JSON.stringify)(r)}const yd={transitional:Ix,adapter:["xhr","http"],transformRequest:[function(a,c){const f=c.getContentType()||"",y=f.indexOf("application/json")>-1,_=Ve.isObject(a);if(_&&Ve.isHTMLForm(a)&&(a=new FormData(a)),Ve.isFormData(a))return y&&y?JSON.stringify(Ax(a)):a;if(Ve.isArrayBuffer(a)||Ve.isBuffer(a)||Ve.isStream(a)||Ve.isFile(a)||Ve.isBlob(a))return a;if(Ve.isArrayBufferView(a))return a.buffer;if(Ve.isURLSearchParams(a))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let T;if(_){if(f.indexOf("application/x-www-form-urlencoded")>-1)return kC(a,this.formSerializer).toString();if((T=Ve.isFileList(a))||f.indexOf("multipart/form-data")>-1){const k=this.env&&this.env.FormData;return gd(T?{"files[]":a}:a,k&&new k,this.formSerializer)}}return _||y?(c.setContentType("application/json",!1),LC(a)):a}],transformResponse:[function(a){const c=this.transitional||yd.transitional,f=c&&c.forcedJSONParsing,y=this.responseType==="json";if(a&&Ve.isString(a)&&(f&&!this.responseType||y)){const w=!(c&&c.silentJSONParsing)&&y;try{return JSON.parse(a)}catch(T){if(w)throw T.name==="SyntaxError"?Sr.from(T,Sr.ERR_BAD_RESPONSE,this,null,this.response):T}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ua.classes.FormData,Blob:ua.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ve.forEach(["delete","get","head"],function(a){yd.headers[a]={}});Ve.forEach(["post","put","patch"],function(a){yd.headers[a]=Ve.merge(MC)});const oy=yd,DC=Ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RC=r=>{const a={};let c,f,y;return r&&r.split(`
`).forEach(function(w){y=w.indexOf(":"),c=w.substring(0,y).trim().toLowerCase(),f=w.substring(y+1).trim(),!(!c||a[c]&&DC[c])&&(c==="set-cookie"?a[c]?a[c].push(f):a[c]=[f]:a[c]=a[c]?a[c]+", "+f:f)}),a},F_=Symbol("internals");function ip(r){return r&&String(r).trim().toLowerCase()}function vf(r){return r===!1||r==null?r:Ve.isArray(r)?r.map(vf):String(r)}function OC(r){const a=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=c.exec(r);)a[f[1]]=f[2];return a}const BC=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Em(r,a,c,f,y){if(Ve.isFunction(f))return f.call(this,a,c);if(y&&(a=c),!!Ve.isString(a)){if(Ve.isString(f))return a.indexOf(f)!==-1;if(Ve.isRegExp(f))return f.test(a)}}function FC(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,c,f)=>c.toUpperCase()+f)}function NC(r,a){const c=Ve.toCamelCase(" "+a);["get","set","has"].forEach(f=>{Object.defineProperty(r,f+c,{value:function(y,_,w){return this[f].call(this,a,y,_,w)},configurable:!0})})}class vd{constructor(a){a&&this.set(a)}set(a,c,f){const y=this;function _(T,k,L){const q=ip(k);if(!q)throw new Error("header name must be a non-empty string");const Z=Ve.findKey(y,q);(!Z||y[Z]===void 0||L===!0||L===void 0&&y[Z]!==!1)&&(y[Z||k]=vf(T))}const w=(T,k)=>Ve.forEach(T,(L,q)=>_(L,q,k));return Ve.isPlainObject(a)||a instanceof this.constructor?w(a,c):Ve.isString(a)&&(a=a.trim())&&!BC(a)?w(RC(a),c):a!=null&&_(c,a,f),this}get(a,c){if(a=ip(a),a){const f=Ve.findKey(this,a);if(f){const y=this[f];if(!c)return y;if(c===!0)return OC(y);if(Ve.isFunction(c))return c.call(this,y,f);if(Ve.isRegExp(c))return c.exec(y);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,c){if(a=ip(a),a){const f=Ve.findKey(this,a);return!!(f&&this[f]!==void 0&&(!c||Em(this,this[f],f,c)))}return!1}delete(a,c){const f=this;let y=!1;function _(w){if(w=ip(w),w){const T=Ve.findKey(f,w);T&&(!c||Em(f,f[T],T,c))&&(delete f[T],y=!0)}}return Ve.isArray(a)?a.forEach(_):_(a),y}clear(a){const c=Object.keys(this);let f=c.length,y=!1;for(;f--;){const _=c[f];(!a||Em(this,this[_],_,a,!0))&&(delete this[_],y=!0)}return y}normalize(a){const c=this,f={};return Ve.forEach(this,(y,_)=>{const w=Ve.findKey(f,_);if(w){c[w]=vf(y),delete c[_];return}const T=a?FC(_):String(_).trim();T!==_&&delete c[_],c[T]=vf(y),f[T]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const c=Object.create(null);return Ve.forEach(this,(f,y)=>{f!=null&&f!==!1&&(c[y]=a&&Ve.isArray(f)?f.join(", "):f)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,c])=>a+": "+c).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...c){const f=new this(a);return c.forEach(y=>f.set(y)),f}static accessor(a){const f=(this[F_]=this[F_]={accessors:{}}).accessors,y=this.prototype;function _(w){const T=ip(w);f[T]||(NC(y,w),f[T]=!0)}return Ve.isArray(a)?a.forEach(_):_(a),this}}vd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ve.freezeMethods(vd.prototype);Ve.freezeMethods(vd);const qa=vd;function Sm(r,a){const c=this||oy,f=a||c,y=qa.from(f.headers);let _=f.data;return Ve.forEach(r,function(T){_=T.call(c,_,y.normalize(),a?a.status:void 0)}),y.normalize(),_}function kx(r){return!!(r&&r.__CANCEL__)}function Up(r,a,c){Sr.call(this,r??"canceled",Sr.ERR_CANCELED,a,c),this.name="CanceledError"}Ve.inherits(Up,Sr,{__CANCEL__:!0});function UC(r,a,c){const f=c.config.validateStatus;!c.status||!f||f(c.status)?r(c):a(new Sr("Request failed with status code "+c.status,[Sr.ERR_BAD_REQUEST,Sr.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}const VC=ua.isStandardBrowserEnv?function(){return{write:function(c,f,y,_,w,T){const k=[];k.push(c+"="+encodeURIComponent(f)),Ve.isNumber(y)&&k.push("expires="+new Date(y).toGMTString()),Ve.isString(_)&&k.push("path="+_),Ve.isString(w)&&k.push("domain="+w),T===!0&&k.push("secure"),document.cookie=k.join("; ")},read:function(c){const f=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return f?decodeURIComponent(f[3]):null},remove:function(c){this.write(c,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function jC(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function qC(r,a){return a?r.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):r}function Px(r,a){return r&&!jC(a)?qC(r,a):a}const ZC=ua.isStandardBrowserEnv?function(){const a=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");let f;function y(_){let w=_;return a&&(c.setAttribute("href",w),w=c.href),c.setAttribute("href",w),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return f=y(window.location.href),function(w){const T=Ve.isString(w)?y(w):w;return T.protocol===f.protocol&&T.host===f.host}}():function(){return function(){return!0}}();function HC(r){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return a&&a[1]||""}function GC(r,a){r=r||10;const c=new Array(r),f=new Array(r);let y=0,_=0,w;return a=a!==void 0?a:1e3,function(k){const L=Date.now(),q=f[_];w||(w=L),c[y]=k,f[y]=L;let Z=_,ae=0;for(;Z!==y;)ae+=c[Z++],Z=Z%r;if(y=(y+1)%r,y===_&&(_=(_+1)%r),L-w<a)return;const ce=q&&L-q;return ce?Math.round(ae*1e3/ce):void 0}}function N_(r,a){let c=0;const f=GC(50,250);return y=>{const _=y.loaded,w=y.lengthComputable?y.total:void 0,T=_-c,k=f(T),L=_<=w;c=_;const q={loaded:_,total:w,progress:w?_/w:void 0,bytes:T,rate:k||void 0,estimated:k&&w&&L?(w-_)/k:void 0,event:y};q[a?"download":"upload"]=!0,r(q)}}const WC=typeof XMLHttpRequest<"u",KC=WC&&function(r){return new Promise(function(c,f){let y=r.data;const _=qa.from(r.headers).normalize(),w=r.responseType;let T;function k(){r.cancelToken&&r.cancelToken.unsubscribe(T),r.signal&&r.signal.removeEventListener("abort",T)}Ve.isFormData(y)&&(ua.isStandardBrowserEnv||ua.isStandardBrowserWebWorkerEnv?_.setContentType(!1):_.setContentType("multipart/form-data;",!1));let L=new XMLHttpRequest;if(r.auth){const ce=r.auth.username||"",de=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";_.set("Authorization","Basic "+btoa(ce+":"+de))}const q=Px(r.baseURL,r.url);L.open(r.method.toUpperCase(),Cx(q,r.params,r.paramsSerializer),!0),L.timeout=r.timeout;function Z(){if(!L)return;const ce=qa.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),Se={data:!w||w==="text"||w==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:ce,config:r,request:L};UC(function(he){c(he),k()},function(he){f(he),k()},Se),L=null}if("onloadend"in L?L.onloadend=Z:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(Z)},L.onabort=function(){L&&(f(new Sr("Request aborted",Sr.ECONNABORTED,r,L)),L=null)},L.onerror=function(){f(new Sr("Network Error",Sr.ERR_NETWORK,r,L)),L=null},L.ontimeout=function(){let de=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const Se=r.transitional||Ix;r.timeoutErrorMessage&&(de=r.timeoutErrorMessage),f(new Sr(de,Se.clarifyTimeoutError?Sr.ETIMEDOUT:Sr.ECONNABORTED,r,L)),L=null},ua.isStandardBrowserEnv){const ce=(r.withCredentials||ZC(q))&&r.xsrfCookieName&&VC.read(r.xsrfCookieName);ce&&_.set(r.xsrfHeaderName,ce)}y===void 0&&_.setContentType(null),"setRequestHeader"in L&&Ve.forEach(_.toJSON(),function(de,Se){L.setRequestHeader(Se,de)}),Ve.isUndefined(r.withCredentials)||(L.withCredentials=!!r.withCredentials),w&&w!=="json"&&(L.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&L.addEventListener("progress",N_(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&L.upload&&L.upload.addEventListener("progress",N_(r.onUploadProgress)),(r.cancelToken||r.signal)&&(T=ce=>{L&&(f(!ce||ce.type?new Up(null,r,L):ce),L.abort(),L=null)},r.cancelToken&&r.cancelToken.subscribe(T),r.signal&&(r.signal.aborted?T():r.signal.addEventListener("abort",T)));const ae=HC(q);if(ae&&ua.protocols.indexOf(ae)===-1){f(new Sr("Unsupported protocol "+ae+":",Sr.ERR_BAD_REQUEST,r));return}L.send(y||null)})},_f={http:_C,xhr:KC};Ve.forEach(_f,(r,a)=>{if(r){try{Object.defineProperty(r,"name",{value:a})}catch{}Object.defineProperty(r,"adapterName",{value:a})}});const $C={getAdapter:r=>{r=Ve.isArray(r)?r:[r];const{length:a}=r;let c,f;for(let y=0;y<a&&(c=r[y],!(f=Ve.isString(c)?_f[c.toLowerCase()]:c));y++);if(!f)throw f===!1?new Sr(`Adapter ${c} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Ve.hasOwnProp(_f,c)?`Adapter '${c}' is not available in the build`:`Unknown adapter '${c}'`);if(!Ve.isFunction(f))throw new TypeError("adapter is not a function");return f},adapters:_f};function Tm(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Up(null,r)}function U_(r){return Tm(r),r.headers=qa.from(r.headers),r.data=Sm.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),$C.getAdapter(r.adapter||oy.adapter)(r).then(function(f){return Tm(r),f.data=Sm.call(r,r.transformResponse,f),f.headers=qa.from(f.headers),f},function(f){return kx(f)||(Tm(r),f&&f.response&&(f.response.data=Sm.call(r,r.transformResponse,f.response),f.response.headers=qa.from(f.response.headers))),Promise.reject(f)})}const V_=r=>r instanceof qa?r.toJSON():r;function Qu(r,a){a=a||{};const c={};function f(L,q,Z){return Ve.isPlainObject(L)&&Ve.isPlainObject(q)?Ve.merge.call({caseless:Z},L,q):Ve.isPlainObject(q)?Ve.merge({},q):Ve.isArray(q)?q.slice():q}function y(L,q,Z){if(Ve.isUndefined(q)){if(!Ve.isUndefined(L))return f(void 0,L,Z)}else return f(L,q,Z)}function _(L,q){if(!Ve.isUndefined(q))return f(void 0,q)}function w(L,q){if(Ve.isUndefined(q)){if(!Ve.isUndefined(L))return f(void 0,L)}else return f(void 0,q)}function T(L,q,Z){if(Z in a)return f(L,q);if(Z in r)return f(void 0,L)}const k={url:_,method:_,data:_,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:T,headers:(L,q)=>y(V_(L),V_(q),!0)};return Ve.forEach(Object.keys(Object.assign({},r,a)),function(q){const Z=k[q]||y,ae=Z(r[q],a[q],q);Ve.isUndefined(ae)&&Z!==T||(c[q]=ae)}),c}const zx="1.4.0",ay={};["object","boolean","number","function","string","symbol"].forEach((r,a)=>{ay[r]=function(f){return typeof f===r||"a"+(a<1?"n ":" ")+r}});const j_={};ay.transitional=function(a,c,f){function y(_,w){return"[Axios v"+zx+"] Transitional option '"+_+"'"+w+(f?". "+f:"")}return(_,w,T)=>{if(a===!1)throw new Sr(y(w," has been removed"+(c?" in "+c:"")),Sr.ERR_DEPRECATED);return c&&!j_[w]&&(j_[w]=!0,console.warn(y(w," has been deprecated since v"+c+" and will be removed in the near future"))),a?a(_,w,T):!0}};function XC(r,a,c){if(typeof r!="object")throw new Sr("options must be an object",Sr.ERR_BAD_OPTION_VALUE);const f=Object.keys(r);let y=f.length;for(;y-- >0;){const _=f[y],w=a[_];if(w){const T=r[_],k=T===void 0||w(T,_,r);if(k!==!0)throw new Sr("option "+_+" must be "+k,Sr.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Sr("Unknown option "+_,Sr.ERR_BAD_OPTION)}}const tg={assertOptions:XC,validators:ay},ys=tg.validators;class Vf{constructor(a){this.defaults=a,this.interceptors={request:new B_,response:new B_}}request(a,c){typeof a=="string"?(c=c||{},c.url=a):c=a||{},c=Qu(this.defaults,c);const{transitional:f,paramsSerializer:y,headers:_}=c;f!==void 0&&tg.assertOptions(f,{silentJSONParsing:ys.transitional(ys.boolean),forcedJSONParsing:ys.transitional(ys.boolean),clarifyTimeoutError:ys.transitional(ys.boolean)},!1),y!=null&&(Ve.isFunction(y)?c.paramsSerializer={serialize:y}:tg.assertOptions(y,{encode:ys.function,serialize:ys.function},!0)),c.method=(c.method||this.defaults.method||"get").toLowerCase();let w;w=_&&Ve.merge(_.common,_[c.method]),w&&Ve.forEach(["delete","get","head","post","put","patch","common"],de=>{delete _[de]}),c.headers=qa.concat(w,_);const T=[];let k=!0;this.interceptors.request.forEach(function(Se){typeof Se.runWhen=="function"&&Se.runWhen(c)===!1||(k=k&&Se.synchronous,T.unshift(Se.fulfilled,Se.rejected))});const L=[];this.interceptors.response.forEach(function(Se){L.push(Se.fulfilled,Se.rejected)});let q,Z=0,ae;if(!k){const de=[U_.bind(this),void 0];for(de.unshift.apply(de,T),de.push.apply(de,L),ae=de.length,q=Promise.resolve(c);Z<ae;)q=q.then(de[Z++],de[Z++]);return q}ae=T.length;let ce=c;for(Z=0;Z<ae;){const de=T[Z++],Se=T[Z++];try{ce=de(ce)}catch(ze){Se.call(this,ze);break}}try{q=U_.call(this,ce)}catch(de){return Promise.reject(de)}for(Z=0,ae=L.length;Z<ae;)q=q.then(L[Z++],L[Z++]);return q}getUri(a){a=Qu(this.defaults,a);const c=Px(a.baseURL,a.url);return Cx(c,a.params,a.paramsSerializer)}}Ve.forEach(["delete","get","head","options"],function(a){Vf.prototype[a]=function(c,f){return this.request(Qu(f||{},{method:a,url:c,data:(f||{}).data}))}});Ve.forEach(["post","put","patch"],function(a){function c(f){return function(_,w,T){return this.request(Qu(T||{},{method:a,headers:f?{"Content-Type":"multipart/form-data"}:{},url:_,data:w}))}}Vf.prototype[a]=c(),Vf.prototype[a+"Form"]=c(!0)});const xf=Vf;class sy{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(_){c=_});const f=this;this.promise.then(y=>{if(!f._listeners)return;let _=f._listeners.length;for(;_-- >0;)f._listeners[_](y);f._listeners=null}),this.promise.then=y=>{let _;const w=new Promise(T=>{f.subscribe(T),_=T}).then(y);return w.cancel=function(){f.unsubscribe(_)},w},a(function(_,w,T){f.reason||(f.reason=new Up(_,w,T),c(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const c=this._listeners.indexOf(a);c!==-1&&this._listeners.splice(c,1)}static source(){let a;return{token:new sy(function(y){a=y}),cancel:a}}}const JC=sy;function YC(r){return function(c){return r.apply(null,c)}}function QC(r){return Ve.isObject(r)&&r.isAxiosError===!0}const rg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rg).forEach(([r,a])=>{rg[a]=r});const e5=rg;function Mx(r){const a=new xf(r),c=dx(xf.prototype.request,a);return Ve.extend(c,xf.prototype,a,{allOwnKeys:!0}),Ve.extend(c,a,null,{allOwnKeys:!0}),c.create=function(y){return Mx(Qu(r,y))},c}const ji=Mx(oy);ji.Axios=xf;ji.CanceledError=Up;ji.CancelToken=JC;ji.isCancel=kx;ji.VERSION=zx;ji.toFormData=gd;ji.AxiosError=Sr;ji.Cancel=ji.CanceledError;ji.all=function(a){return Promise.all(a)};ji.spread=YC;ji.isAxiosError=QC;ji.mergeConfig=Qu;ji.AxiosHeaders=qa;ji.formToJSON=r=>Ax(Ve.isHTMLForm(r)?new FormData(r):r);ji.HttpStatusCode=e5;ji.default=ji;const t5=ji;const Lx=(r,a)=>{const c=r.__vccOpts||r;for(const[f,y]of a)c[f]=y;return c},r5={data(){return{houses:[],access_token:this.$mapboxApiKey,map:{},features:[]}},mounted(){this.createMap()},computed:{renderedHouses(){return this.houses.filter(r=>r.fake_latitude!=null)}},methods:{createdAt(r){return console.log(r.created_at),r.created_at.slice(0,10)},async createMap(){try{this.map=q_(this.access_token,"streets"),t5.get("/properties",{headers:{"Content-Type":"application/json"}}).then(r=>{console.log("response",r.data),this.houses=JSON.parse(JSON.stringify(r.data)),this.drawHouses(JSON.parse(JSON.stringify(r.data)))})}catch(r){console.log("map error",r)}},drawHouses(r){const a=[],c=[];r.forEach(f=>{if(console.log(f),f.fake_longitude){const y=[f.longitude,f.latitude];c.push({type:"Feature",geometry:{type:"Point",coordinates:y}});const _=[f.fake_longitude,f.fake_latitude],w=this.createGeoJSONCircle(_,.5);a.push(w)}}),this.showMarkers("circles",a),this.showMarkers("houses",c)},showMarkers(r,a){const c=this;this.map.on("load",function(){c.map.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:a}});const f=r==="circles"?{id:r,type:"fill",source:r,paint:{"fill-color":"blue","fill-opacity":.6}}:{id:r,type:"circle",source:r,paint:{"circle-radius":3,"circle-color":"red"}};c.map.addLayer(f)})},createGeoJSONCircle(r,a,c){c||(c=64);for(var f={latitude:r[1],longitude:r[0]},y=a,_=[],w=y/(111.32*Math.cos(f.latitude*Math.PI/180)),T=y/110.574,k,L,q,Z=0;Z<c;Z++)k=Z/c*(2*Math.PI),L=w*Math.cos(k),q=T*Math.sin(k),_.push([f.longitude+L,f.latitude+q]);return _.push(_[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[_]}}}}},i5={class:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},n5=Oo("div",{class:"modal-dialog modal-dialog-centered",role:"document"},[Oo("div",{class:"modal-content"},[Oo("button",{type:"button",class:"btn btn-secondary btn-lg"},"See houses"),Oo("button",{type:"button",class:"btn btn-primary btn-lg"},"Add house")])],-1),o5=[n5];function a5(r,a,c,f,y,_){return Dl(),nd("div",i5,o5)}const s5=Lx(r5,[["render",a5]]);const l5={components:{Modal:s5},data(){return{access_token:this.$mapboxApiKey,map:{}}},mounted(){this.createMap()},methods:{async createMap(){try{this.map=q_(this.access_token,"globe",this.flyended);const r={center:[132.7445942,35.3665752],zoom:12.5,bearing:90,pitch:80},a=this;document.getElementById("fly").addEventListener("click",()=>{a.map.flyTo({...r,duration:5e3,essential:!0}),event.target.style.display="none"})}catch(r){console.log("map error",r)}},flyended(){console.log("ended!"),document.querySelector("#exampleModalCenter").modal("show")}}},u5={class:"main"},c5=Oo("div",{class:"map-wrapper"},[Oo("div",{id:"map"}),Oo("button",{class:"btn btn-light m-1",id:"fly"},"Let's go Izumo!")],-1);function p5(r,a,c,f,y,_){const w=M0("Modal");return Dl(),nd("div",u5,[c5,Vr(w)])}const h5=Lx(l5,[["render",p5]]);const f5={id:"app"},d5={__name:"App",setup(r){return(a,c)=>(Dl(),nd("div",f5,[Oo("main",null,[Vr(h5)])]))}},ly=A1(d5);ly.config.globalProperties.$mapboxApiKey="pk.eyJ1IjoiaXJpbmFzayIsImEiOiJjbDIwOHhrbm0wdWJlM2pxZDNvN3A5NHNzIn0.M37Dun7-7tjVc9C0O82lpw";ly.mount("#app");console.log("app",ly);
