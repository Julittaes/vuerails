/* empty css             */import{i as U2}from"./map-3726ebf8.js";function Yi(t,n){const l=Object.create(null),p=t.split(",");for(let m=0;m<p.length;m++)l[p[m]]=!0;return n?m=>!!l[m.toLowerCase()]:m=>!!l[m]}const Fr={},Ju=[],Di=()=>{},zf=()=>!1,V2=/^on[^a-z]/,ql=t=>V2.test(t),Og=t=>t.startsWith("onUpdate:"),yr=Object.assign,Dg=(t,n)=>{const l=t.indexOf(n);l>-1&&t.splice(l,1)},j2=Object.prototype.hasOwnProperty,Sr=(t,n)=>j2.call(t,n),xt=Array.isArray,Yu=t=>gc(t)==="[object Map]",Zl=t=>gc(t)==="[object Set]",f_=t=>gc(t)==="[object Date]",q2=t=>gc(t)==="[object RegExp]",Zt=t=>typeof t=="function",er=t=>typeof t=="string",zs=t=>typeof t=="symbol",Nr=t=>t!==null&&typeof t=="object",Bg=t=>Nr(t)&&Zt(t.then)&&Zt(t.catch),B0=Object.prototype.toString,gc=t=>B0.call(t),Z2=t=>gc(t).slice(8,-1),F0=t=>gc(t)==="[object Object]",Fg=t=>er(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ml=Yi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),H2=Yi("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),hd=t=>{const n=Object.create(null);return l=>n[l]||(n[l]=t(l))},G2=/-(\w)/g,Nn=hd(t=>t.replace(G2,(n,l)=>l?l.toUpperCase():"")),$2=/\B([A-Z])/g,ho=hd(t=>t.replace($2,"-$1").toLowerCase()),Hl=hd(t=>t.charAt(0).toUpperCase()+t.slice(1)),Qu=hd(t=>t?`on${Hl(t)}`:""),ac=(t,n)=>!Object.is(t,n),ec=(t,n)=>{for(let l=0;l<t.length;l++)t[l](n)},qf=(t,n,l)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:l})},Zf=t=>{const n=parseFloat(t);return isNaN(n)?t:n},Hf=t=>{const n=er(t)?Number(t):NaN;return isNaN(n)?t:n};let d_;const ng=()=>d_||(d_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),K2="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",W2=Yi(K2);function Wp(t){if(xt(t)){const n={};for(let l=0;l<t.length;l++){const p=t[l],m=er(p)?N0(p):Wp(p);if(m)for(const y in m)n[y]=m[y]}return n}else{if(er(t))return t;if(Nr(t))return t}}const X2=/;(?![^(]*\))/g,J2=/:([^]+)/,Y2=/\/\*[^]*?\*\//g;function N0(t){const n={};return t.replace(Y2,"").split(X2).forEach(l=>{if(l){const p=l.split(J2);p.length>1&&(n[p[0].trim()]=p[1].trim())}}),n}function yc(t){let n="";if(er(t))n=t;else if(xt(t))for(let l=0;l<t.length;l++){const p=yc(t[l]);p&&(n+=p+" ")}else if(Nr(t))for(const l in t)t[l]&&(n+=l+" ");return n.trim()}function Q2(t){if(!t)return null;let{class:n,style:l}=t;return n&&!er(n)&&(t.class=yc(n)),l&&(t.style=Wp(l)),t}const eE="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",tE="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",rE="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",nE=Yi(eE),iE=Yi(tE),oE=Yi(rE),aE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sE=Yi(aE);function U0(t){return!!t||t===""}function lE(t,n){if(t.length!==n.length)return!1;let l=!0;for(let p=0;l&&p<t.length;p++)l=Ls(t[p],n[p]);return l}function Ls(t,n){if(t===n)return!0;let l=f_(t),p=f_(n);if(l||p)return l&&p?t.getTime()===n.getTime():!1;if(l=zs(t),p=zs(n),l||p)return t===n;if(l=xt(t),p=xt(n),l||p)return l&&p?lE(t,n):!1;if(l=Nr(t),p=Nr(n),l||p){if(!l||!p)return!1;const m=Object.keys(t).length,y=Object.keys(n).length;if(m!==y)return!1;for(const x in t){const E=t.hasOwnProperty(x),C=n.hasOwnProperty(x);if(E&&!C||!E&&C||!Ls(t[x],n[x]))return!1}}return String(t)===String(n)}function fd(t,n){return t.findIndex(l=>Ls(l,n))}const Lf=t=>er(t)?t:t==null?"":xt(t)||Nr(t)&&(t.toString===B0||!Zt(t.toString))?JSON.stringify(t,V0,2):String(t),V0=(t,n)=>n&&n.__v_isRef?V0(t,n.value):Yu(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((l,[p,m])=>(l[`${p} =>`]=m,l),{})}:Zl(n)?{[`Set(${n.size})`]:[...n.values()]}:Nr(n)&&!xt(n)&&!F0(n)?String(n):n;let uo;class Ng{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=uo,!n&&uo&&(this.index=(uo.scopes||(uo.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const l=uo;try{return uo=this,n()}finally{uo=l}}}on(){uo=this}off(){uo=this.parent}stop(n){if(this._active){let l,p;for(l=0,p=this.effects.length;l<p;l++)this.effects[l].stop();for(l=0,p=this.cleanups.length;l<p;l++)this.cleanups[l]();if(this.scopes)for(l=0,p=this.scopes.length;l<p;l++)this.scopes[l].stop(!0);if(!this.detached&&this.parent&&!n){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function uE(t){return new Ng(t)}function j0(t,n=uo){n&&n.active&&n.effects.push(t)}function q0(){return uo}function cE(t){uo&&uo.cleanups.push(t)}const Ug=t=>{const n=new Set(t);return n.w=0,n.n=0,n},Z0=t=>(t.w&Rs)>0,H0=t=>(t.n&Rs)>0,pE=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=Rs},hE=t=>{const{deps:n}=t;if(n.length){let l=0;for(let p=0;p<n.length;p++){const m=n[p];Z0(m)&&!H0(m)?m.delete(t):n[l++]=m,m.w&=~Rs,m.n&=~Rs}n.length=l}},Gf=new WeakMap;let wp=0,Rs=1;const ig=30;let jo;const zl=Symbol(""),og=Symbol("");class Xp{constructor(n,l=null,p){this.fn=n,this.scheduler=l,this.active=!0,this.deps=[],this.parent=void 0,j0(this,p)}run(){if(!this.active)return this.fn();let n=jo,l=ks;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=jo,jo=this,ks=!0,Rs=1<<++wp,wp<=ig?pE(this):m_(this),this.fn()}finally{wp<=ig&&hE(this),Rs=1<<--wp,jo=this.parent,ks=l,this.parent=void 0,this.deferStop&&this.stop()}}stop(){jo===this?this.deferStop=!0:this.active&&(m_(this),this.onStop&&this.onStop(),this.active=!1)}}function m_(t){const{deps:n}=t;if(n.length){for(let l=0;l<n.length;l++)n[l].delete(t);n.length=0}}function fE(t,n){t.effect&&(t=t.effect.fn);const l=new Xp(t);n&&(yr(l,n),n.scope&&j0(l,n.scope)),(!n||!n.lazy)&&l.run();const p=l.run.bind(l);return p.effect=l,p}function dE(t){t.effect.stop()}let ks=!0;const G0=[];function vc(){G0.push(ks),ks=!1}function _c(){const t=G0.pop();ks=t===void 0?!0:t}function Ji(t,n,l){if(ks&&jo){let p=Gf.get(t);p||Gf.set(t,p=new Map);let m=p.get(l);m||p.set(l,m=Ug()),$0(m)}}function $0(t,n){let l=!1;wp<=ig?H0(t)||(t.n|=Rs,l=!Z0(t)):l=!t.has(jo),l&&(t.add(jo),jo.deps.push(t))}function Ya(t,n,l,p,m,y){const x=Gf.get(t);if(!x)return;let E=[];if(n==="clear")E=[...x.values()];else if(l==="length"&&xt(t)){const C=Number(p);x.forEach((P,B)=>{(B==="length"||B>=C)&&E.push(P)})}else switch(l!==void 0&&E.push(x.get(l)),n){case"add":xt(t)?Fg(l)&&E.push(x.get("length")):(E.push(x.get(zl)),Yu(t)&&E.push(x.get(og)));break;case"delete":xt(t)||(E.push(x.get(zl)),Yu(t)&&E.push(x.get(og)));break;case"set":Yu(t)&&E.push(x.get(zl));break}if(E.length===1)E[0]&&ag(E[0]);else{const C=[];for(const P of E)P&&C.push(...P);ag(Ug(C))}}function ag(t,n){const l=xt(t)?t:[...t];for(const p of l)p.computed&&g_(p);for(const p of l)p.computed||g_(p)}function g_(t,n){(t!==jo||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function mE(t,n){var l;return(l=Gf.get(t))==null?void 0:l.get(n)}const gE=Yi("__proto__,__v_isRef,__isVue"),K0=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(zs)),yE=dd(),vE=dd(!1,!0),_E=dd(!0),xE=dd(!0,!0),y_=bE();function bE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...l){const p=vr(this);for(let y=0,x=this.length;y<x;y++)Ji(p,"get",y+"");const m=p[n](...l);return m===-1||m===!1?p[n](...l.map(vr)):m}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...l){vc();const p=vr(this)[n].apply(this,l);return _c(),p}}),t}function wE(t){const n=vr(this);return Ji(n,"has",t),n.hasOwnProperty(t)}function dd(t=!1,n=!1){return function(p,m,y){if(m==="__v_isReactive")return!t;if(m==="__v_isReadonly")return t;if(m==="__v_isShallow")return n;if(m==="__v_raw"&&y===(t?n?t1:e1:n?Q0:Y0).get(p))return p;const x=xt(p);if(!t){if(x&&Sr(y_,m))return Reflect.get(y_,m,y);if(m==="hasOwnProperty")return wE}const E=Reflect.get(p,m,y);return(zs(m)?K0.has(m):gE(m))||(t||Ji(p,"get",m),n)?E:Hn(E)?x&&Fg(m)?E:E.value:Nr(E)?t?jg(E):yd(E):E}}const EE=W0(),SE=W0(!0);function W0(t=!1){return function(l,p,m,y){let x=l[p];if(Fl(x)&&Hn(x)&&!Hn(m))return!1;if(!t&&(!Lp(m)&&!Fl(m)&&(x=vr(x),m=vr(m)),!xt(l)&&Hn(x)&&!Hn(m)))return x.value=m,!0;const E=xt(l)&&Fg(p)?Number(p)<l.length:Sr(l,p),C=Reflect.set(l,p,m,y);return l===vr(y)&&(E?ac(m,x)&&Ya(l,"set",p,m):Ya(l,"add",p,m)),C}}function TE(t,n){const l=Sr(t,n);t[n];const p=Reflect.deleteProperty(t,n);return p&&l&&Ya(t,"delete",n,void 0),p}function CE(t,n){const l=Reflect.has(t,n);return(!zs(n)||!K0.has(n))&&Ji(t,"has",n),l}function AE(t){return Ji(t,"iterate",xt(t)?"length":zl),Reflect.ownKeys(t)}const X0={get:yE,set:EE,deleteProperty:TE,has:CE,ownKeys:AE},J0={get:_E,set(t,n){return!0},deleteProperty(t,n){return!0}},IE=yr({},X0,{get:vE,set:SE}),kE=yr({},J0,{get:xE}),Vg=t=>t,md=t=>Reflect.getPrototypeOf(t);function yf(t,n,l=!1,p=!1){t=t.__v_raw;const m=vr(t),y=vr(n);l||(n!==y&&Ji(m,"get",n),Ji(m,"get",y));const{has:x}=md(m),E=p?Vg:l?Hg:Rp;if(x.call(m,n))return E(t.get(n));if(x.call(m,y))return E(t.get(y));t!==m&&t.get(n)}function vf(t,n=!1){const l=this.__v_raw,p=vr(l),m=vr(t);return n||(t!==m&&Ji(p,"has",t),Ji(p,"has",m)),t===m?l.has(t):l.has(t)||l.has(m)}function _f(t,n=!1){return t=t.__v_raw,!n&&Ji(vr(t),"iterate",zl),Reflect.get(t,"size",t)}function v_(t){t=vr(t);const n=vr(this);return md(n).has.call(n,t)||(n.add(t),Ya(n,"add",t,t)),this}function __(t,n){n=vr(n);const l=vr(this),{has:p,get:m}=md(l);let y=p.call(l,t);y||(t=vr(t),y=p.call(l,t));const x=m.call(l,t);return l.set(t,n),y?ac(n,x)&&Ya(l,"set",t,n):Ya(l,"add",t,n),this}function x_(t){const n=vr(this),{has:l,get:p}=md(n);let m=l.call(n,t);m||(t=vr(t),m=l.call(n,t)),p&&p.call(n,t);const y=n.delete(t);return m&&Ya(n,"delete",t,void 0),y}function b_(){const t=vr(this),n=t.size!==0,l=t.clear();return n&&Ya(t,"clear",void 0,void 0),l}function xf(t,n){return function(p,m){const y=this,x=y.__v_raw,E=vr(x),C=n?Vg:t?Hg:Rp;return!t&&Ji(E,"iterate",zl),x.forEach((P,B)=>p.call(m,C(P),C(B),y))}}function bf(t,n,l){return function(...p){const m=this.__v_raw,y=vr(m),x=Yu(y),E=t==="entries"||t===Symbol.iterator&&x,C=t==="keys"&&x,P=m[t](...p),B=l?Vg:n?Hg:Rp;return!n&&Ji(y,"iterate",C?og:zl),{next(){const{value:U,done:ee}=P.next();return ee?{value:U,done:ee}:{value:E?[B(U[0]),B(U[1])]:B(U),done:ee}},[Symbol.iterator](){return this}}}}function ws(t){return function(...n){return t==="delete"?!1:this}}function PE(){const t={get(y){return yf(this,y)},get size(){return _f(this)},has:vf,add:v_,set:__,delete:x_,clear:b_,forEach:xf(!1,!1)},n={get(y){return yf(this,y,!1,!0)},get size(){return _f(this)},has:vf,add:v_,set:__,delete:x_,clear:b_,forEach:xf(!1,!0)},l={get(y){return yf(this,y,!0)},get size(){return _f(this,!0)},has(y){return vf.call(this,y,!0)},add:ws("add"),set:ws("set"),delete:ws("delete"),clear:ws("clear"),forEach:xf(!0,!1)},p={get(y){return yf(this,y,!0,!0)},get size(){return _f(this,!0)},has(y){return vf.call(this,y,!0)},add:ws("add"),set:ws("set"),delete:ws("delete"),clear:ws("clear"),forEach:xf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=bf(y,!1,!1),l[y]=bf(y,!0,!1),n[y]=bf(y,!1,!0),p[y]=bf(y,!0,!0)}),[t,l,n,p]}const[ME,zE,LE,RE]=PE();function gd(t,n){const l=n?t?RE:LE:t?zE:ME;return(p,m,y)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?p:Reflect.get(Sr(l,m)&&m in p?l:p,m,y)}const OE={get:gd(!1,!1)},DE={get:gd(!1,!0)},BE={get:gd(!0,!1)},FE={get:gd(!0,!0)},Y0=new WeakMap,Q0=new WeakMap,e1=new WeakMap,t1=new WeakMap;function NE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function UE(t){return t.__v_skip||!Object.isExtensible(t)?0:NE(Z2(t))}function yd(t){return Fl(t)?t:vd(t,!1,X0,OE,Y0)}function r1(t){return vd(t,!1,IE,DE,Q0)}function jg(t){return vd(t,!0,J0,BE,e1)}function VE(t){return vd(t,!0,kE,FE,t1)}function vd(t,n,l,p,m){if(!Nr(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const y=m.get(t);if(y)return y;const x=UE(t);if(x===0)return t;const E=new Proxy(t,x===2?p:l);return m.set(t,E),E}function Ll(t){return Fl(t)?Ll(t.__v_raw):!!(t&&t.__v_isReactive)}function Fl(t){return!!(t&&t.__v_isReadonly)}function Lp(t){return!!(t&&t.__v_isShallow)}function qg(t){return Ll(t)||Fl(t)}function vr(t){const n=t&&t.__v_raw;return n?vr(n):t}function Zg(t){return qf(t,"__v_skip",!0),t}const Rp=t=>Nr(t)?yd(t):t,Hg=t=>Nr(t)?jg(t):t;function Gg(t){ks&&jo&&(t=vr(t),$0(t.dep||(t.dep=Ug())))}function _d(t,n){t=vr(t);const l=t.dep;l&&ag(l)}function Hn(t){return!!(t&&t.__v_isRef===!0)}function tc(t){return n1(t,!1)}function jE(t){return n1(t,!0)}function n1(t,n){return Hn(t)?t:new qE(t,n)}class qE{constructor(n,l){this.__v_isShallow=l,this.dep=void 0,this.__v_isRef=!0,this._rawValue=l?n:vr(n),this._value=l?n:Rp(n)}get value(){return Gg(this),this._value}set value(n){const l=this.__v_isShallow||Lp(n)||Fl(n);n=l?n:vr(n),ac(n,this._rawValue)&&(this._rawValue=n,this._value=l?n:Rp(n),_d(this))}}function ZE(t){_d(t)}function $g(t){return Hn(t)?t.value:t}function HE(t){return Zt(t)?t():$g(t)}const GE={get:(t,n,l)=>$g(Reflect.get(t,n,l)),set:(t,n,l,p)=>{const m=t[n];return Hn(m)&&!Hn(l)?(m.value=l,!0):Reflect.set(t,n,l,p)}};function Kg(t){return Ll(t)?t:new Proxy(t,GE)}class $E{constructor(n){this.dep=void 0,this.__v_isRef=!0;const{get:l,set:p}=n(()=>Gg(this),()=>_d(this));this._get=l,this._set=p}get value(){return this._get()}set value(n){this._set(n)}}function KE(t){return new $E(t)}function WE(t){const n=xt(t)?new Array(t.length):{};for(const l in t)n[l]=i1(t,l);return n}class XE{constructor(n,l,p){this._object=n,this._key=l,this._defaultValue=p,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return mE(vr(this._object),this._key)}}class JE{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function YE(t,n,l){return Hn(t)?t:Zt(t)?new JE(t):Nr(t)&&arguments.length>1?i1(t,n,l):tc(t)}function i1(t,n,l){const p=t[n];return Hn(p)?p:new XE(t,n,l)}class QE{constructor(n,l,p,m){this._setter=l,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Xp(n,()=>{this._dirty||(this._dirty=!0,_d(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=p}get value(){const n=vr(this);return Gg(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function eS(t,n,l=!1){let p,m;const y=Zt(t);return y?(p=t,m=Di):(p=t.get,m=t.set),new QE(p,m,y||!m,l)}function tS(t,...n){}function rS(t,n){}function Xa(t,n,l,p){let m;try{m=p?t(...p):t()}catch(y){Gl(y,n,l)}return m}function mo(t,n,l,p){if(Zt(t)){const y=Xa(t,n,l,p);return y&&Bg(y)&&y.catch(x=>{Gl(x,n,l)}),y}const m=[];for(let y=0;y<t.length;y++)m.push(mo(t[y],n,l,p));return m}function Gl(t,n,l,p=!0){const m=n?n.vnode:null;if(n){let y=n.parent;const x=n.proxy,E=l;for(;y;){const P=y.ec;if(P){for(let B=0;B<P.length;B++)if(P[B](t,x,E)===!1)return}y=y.parent}const C=n.appContext.config.errorHandler;if(C){Xa(C,null,10,[t,x,E]);return}}nS(t,l,m,p)}function nS(t,n,l,p=!0){console.error(t)}let Op=!1,sg=!1;const Ei=[];let ma=0;const rc=[];let $a=null,Al=0;const o1=Promise.resolve();let Wg=null;function Xg(t){const n=Wg||o1;return t?n.then(this?t.bind(this):t):n}function iS(t){let n=ma+1,l=Ei.length;for(;n<l;){const p=n+l>>>1;Dp(Ei[p])<t?n=p+1:l=p}return n}function xd(t){(!Ei.length||!Ei.includes(t,Op&&t.allowRecurse?ma+1:ma))&&(t.id==null?Ei.push(t):Ei.splice(iS(t.id),0,t),a1())}function a1(){!Op&&!sg&&(sg=!0,Wg=o1.then(s1))}function oS(t){const n=Ei.indexOf(t);n>ma&&Ei.splice(n,1)}function Jg(t){xt(t)?rc.push(...t):(!$a||!$a.includes(t,t.allowRecurse?Al+1:Al))&&rc.push(t),a1()}function w_(t,n=Op?ma+1:0){for(;n<Ei.length;n++){const l=Ei[n];l&&l.pre&&(Ei.splice(n,1),n--,l())}}function $f(t){if(rc.length){const n=[...new Set(rc)];if(rc.length=0,$a){$a.push(...n);return}for($a=n,$a.sort((l,p)=>Dp(l)-Dp(p)),Al=0;Al<$a.length;Al++)$a[Al]();$a=null,Al=0}}const Dp=t=>t.id==null?1/0:t.id,aS=(t,n)=>{const l=Dp(t)-Dp(n);if(l===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return l};function s1(t){sg=!1,Op=!0,Ei.sort(aS);const n=Di;try{for(ma=0;ma<Ei.length;ma++){const l=Ei[ma];l&&l.active!==!1&&Xa(l,null,14)}}finally{ma=0,Ei.length=0,$f(),Op=!1,Wg=null,(Ei.length||rc.length)&&s1()}}let Ku,wf=[];function l1(t,n){var l,p;Ku=t,Ku?(Ku.enabled=!0,wf.forEach(({event:m,args:y})=>Ku.emit(m,...y)),wf=[]):typeof window<"u"&&window.HTMLElement&&!((p=(l=window.navigator)==null?void 0:l.userAgent)!=null&&p.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(y=>{l1(y,n)}),setTimeout(()=>{Ku||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,wf=[])},3e3)):wf=[]}function sS(t,n,...l){if(t.isUnmounted)return;const p=t.vnode.props||Fr;let m=l;const y=n.startsWith("update:"),x=y&&n.slice(7);if(x&&x in p){const B=`${x==="modelValue"?"model":x}Modifiers`,{number:U,trim:ee}=p[B]||Fr;ee&&(m=l.map(se=>er(se)?se.trim():se)),U&&(m=l.map(Zf))}let E,C=p[E=Qu(n)]||p[E=Qu(Nn(n))];!C&&y&&(C=p[E=Qu(ho(n))]),C&&mo(C,t,6,m);const P=p[E+"Once"];if(P){if(!t.emitted)t.emitted={};else if(t.emitted[E])return;t.emitted[E]=!0,mo(P,t,6,m)}}function u1(t,n,l=!1){const p=n.emitsCache,m=p.get(t);if(m!==void 0)return m;const y=t.emits;let x={},E=!1;if(!Zt(t)){const C=P=>{const B=u1(P,n,!0);B&&(E=!0,yr(x,B))};!l&&n.mixins.length&&n.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}return!y&&!E?(Nr(t)&&p.set(t,null),null):(xt(y)?y.forEach(C=>x[C]=null):yr(x,y),Nr(t)&&p.set(t,x),x)}function bd(t,n){return!t||!ql(n)?!1:(n=n.slice(2).replace(/Once$/,""),Sr(t,n[0].toLowerCase()+n.slice(1))||Sr(t,ho(n))||Sr(t,n))}let ni=null,wd=null;function Bp(t){const n=ni;return ni=t,wd=t&&t.type.__scopeId||null,n}function lS(t){wd=t}function uS(){wd=null}const cS=t=>Yg;function Yg(t,n=ni,l){if(!n||t._n)return t;const p=(...m)=>{p._d&&dg(-1);const y=Bp(n);let x;try{x=t(...m)}finally{Bp(y),p._d&&dg(1)}return x};return p._n=!0,p._c=!0,p._d=!0,p}function Rf(t){const{type:n,vnode:l,proxy:p,withProxy:m,props:y,propsOptions:[x],slots:E,attrs:C,emit:P,render:B,renderCache:U,data:ee,setupState:se,ctx:ne,inheritAttrs:ve}=t;let fe,pe;const ue=Bp(t);try{if(l.shapeFlag&4){const _e=m||p;fe=po(B.call(_e,_e,U,y,se,ee,ne)),pe=C}else{const _e=n;fe=po(_e.length>1?_e(y,{attrs:C,slots:E,emit:P}):_e(y,null)),pe=n.props?C:hS(C)}}catch(_e){Ip.length=0,Gl(_e,t,1),fe=qr(Ti)}let be=fe;if(pe&&ve!==!1){const _e=Object.keys(pe),{shapeFlag:Oe}=be;_e.length&&Oe&7&&(x&&_e.some(Og)&&(pe=fS(pe,x)),be=ya(be,pe))}return l.dirs&&(be=ya(be),be.dirs=be.dirs?be.dirs.concat(l.dirs):l.dirs),l.transition&&(be.transition=l.transition),fe=be,Bp(ue),fe}function pS(t){let n;for(let l=0;l<t.length;l++){const p=t[l];if(Os(p)){if(p.type!==Ti||p.children==="v-if"){if(n)return;n=p}}else return}return n}const hS=t=>{let n;for(const l in t)(l==="class"||l==="style"||ql(l))&&((n||(n={}))[l]=t[l]);return n},fS=(t,n)=>{const l={};for(const p in t)(!Og(p)||!(p.slice(9)in n))&&(l[p]=t[p]);return l};function dS(t,n,l){const{props:p,children:m,component:y}=t,{props:x,children:E,patchFlag:C}=n,P=y.emitsOptions;if(n.dirs||n.transition)return!0;if(l&&C>=0){if(C&1024)return!0;if(C&16)return p?E_(p,x,P):!!x;if(C&8){const B=n.dynamicProps;for(let U=0;U<B.length;U++){const ee=B[U];if(x[ee]!==p[ee]&&!bd(P,ee))return!0}}}else return(m||E)&&(!E||!E.$stable)?!0:p===x?!1:p?x?E_(p,x,P):!0:!!x;return!1}function E_(t,n,l){const p=Object.keys(n);if(p.length!==Object.keys(t).length)return!0;for(let m=0;m<p.length;m++){const y=p[m];if(n[y]!==t[y]&&!bd(l,y))return!0}return!1}function Qg({vnode:t,parent:n},l){for(;n&&n.subTree===t;)(t=n.vnode).el=l,n=n.parent}const c1=t=>t.__isSuspense,mS={name:"Suspense",__isSuspense:!0,process(t,n,l,p,m,y,x,E,C,P){t==null?yS(n,l,p,m,y,x,E,C,P):vS(t,n,l,p,m,x,E,C,P)},hydrate:_S,create:ey,normalize:xS},gS=mS;function Fp(t,n){const l=t.props&&t.props[n];Zt(l)&&l()}function yS(t,n,l,p,m,y,x,E,C){const{p:P,o:{createElement:B}}=C,U=B("div"),ee=t.suspense=ey(t,m,p,n,U,l,y,x,E,C);P(null,ee.pendingBranch=t.ssContent,U,null,p,ee,y,x),ee.deps>0?(Fp(t,"onPending"),Fp(t,"onFallback"),P(null,t.ssFallback,n,l,p,null,y,x),nc(ee,t.ssFallback)):ee.resolve(!1,!0)}function vS(t,n,l,p,m,y,x,E,{p:C,um:P,o:{createElement:B}}){const U=n.suspense=t.suspense;U.vnode=n,n.el=t.el;const ee=n.ssContent,se=n.ssFallback,{activeBranch:ne,pendingBranch:ve,isInFallback:fe,isHydrating:pe}=U;if(ve)U.pendingBranch=ee,qo(ee,ve)?(C(ve,ee,U.hiddenContainer,null,m,U,y,x,E),U.deps<=0?U.resolve():fe&&(C(ne,se,l,p,m,null,y,x,E),nc(U,se))):(U.pendingId++,pe?(U.isHydrating=!1,U.activeBranch=ve):P(ve,m,U),U.deps=0,U.effects.length=0,U.hiddenContainer=B("div"),fe?(C(null,ee,U.hiddenContainer,null,m,U,y,x,E),U.deps<=0?U.resolve():(C(ne,se,l,p,m,null,y,x,E),nc(U,se))):ne&&qo(ee,ne)?(C(ne,ee,l,p,m,U,y,x,E),U.resolve(!0)):(C(null,ee,U.hiddenContainer,null,m,U,y,x,E),U.deps<=0&&U.resolve()));else if(ne&&qo(ee,ne))C(ne,ee,l,p,m,U,y,x,E),nc(U,ee);else if(Fp(n,"onPending"),U.pendingBranch=ee,U.pendingId++,C(null,ee,U.hiddenContainer,null,m,U,y,x,E),U.deps<=0)U.resolve();else{const{timeout:ue,pendingId:be}=U;ue>0?setTimeout(()=>{U.pendingId===be&&U.fallback(se)},ue):ue===0&&U.fallback(se)}}function ey(t,n,l,p,m,y,x,E,C,P,B=!1){const{p:U,m:ee,um:se,n:ne,o:{parentNode:ve,remove:fe}}=P;let pe;const ue=bS(t);ue&&n!=null&&n.pendingBranch&&(pe=n.pendingId,n.deps++);const be=t.props?Hf(t.props.timeout):void 0,_e={vnode:t,parent:n,parentComponent:l,isSVG:x,container:p,hiddenContainer:m,anchor:y,deps:0,pendingId:0,timeout:typeof be=="number"?be:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:B,isUnmounted:!1,effects:[],resolve(Oe=!1,f=!1){const{vnode:ke,activeBranch:Y,pendingBranch:Fe,pendingId:ze,effects:Xe,parentComponent:xe,container:mt}=_e;if(_e.isHydrating)_e.isHydrating=!1;else if(!Oe){const Rt=Y&&Fe.transition&&Fe.transition.mode==="out-in";Rt&&(Y.transition.afterLeave=()=>{ze===_e.pendingId&&ee(Fe,mt,tr,0)});let{anchor:tr}=_e;Y&&(tr=ne(Y),se(Y,xe,_e,!0)),Rt||ee(Fe,mt,tr,0)}nc(_e,Fe),_e.pendingBranch=null,_e.isInFallback=!1;let et=_e.parent,$t=!1;for(;et;){if(et.pendingBranch){et.effects.push(...Xe),$t=!0;break}et=et.parent}$t||Jg(Xe),_e.effects=[],ue&&n&&n.pendingBranch&&pe===n.pendingId&&(n.deps--,n.deps===0&&!f&&n.resolve()),Fp(ke,"onResolve")},fallback(Oe){if(!_e.pendingBranch)return;const{vnode:f,activeBranch:ke,parentComponent:Y,container:Fe,isSVG:ze}=_e;Fp(f,"onFallback");const Xe=ne(ke),xe=()=>{_e.isInFallback&&(U(null,Oe,Fe,Xe,Y,null,ze,E,C),nc(_e,Oe))},mt=Oe.transition&&Oe.transition.mode==="out-in";mt&&(ke.transition.afterLeave=xe),_e.isInFallback=!0,se(ke,Y,null,!0),mt||xe()},move(Oe,f,ke){_e.activeBranch&&ee(_e.activeBranch,Oe,f,ke),_e.container=Oe},next(){return _e.activeBranch&&ne(_e.activeBranch)},registerDep(Oe,f){const ke=!!_e.pendingBranch;ke&&_e.deps++;const Y=Oe.vnode.el;Oe.asyncDep.catch(Fe=>{Gl(Fe,Oe,0)}).then(Fe=>{if(Oe.isUnmounted||_e.isUnmounted||_e.pendingId!==Oe.suspenseId)return;Oe.asyncResolved=!0;const{vnode:ze}=Oe;mg(Oe,Fe,!1),Y&&(ze.el=Y);const Xe=!Y&&Oe.subTree.el;f(Oe,ze,ve(Y||Oe.subTree.el),Y?null:ne(Oe.subTree),_e,x,C),Xe&&fe(Xe),Qg(Oe,ze.el),ke&&--_e.deps===0&&_e.resolve()})},unmount(Oe,f){_e.isUnmounted=!0,_e.activeBranch&&se(_e.activeBranch,l,Oe,f),_e.pendingBranch&&se(_e.pendingBranch,l,Oe,f)}};return _e}function _S(t,n,l,p,m,y,x,E,C){const P=n.suspense=ey(n,p,l,t.parentNode,document.createElement("div"),null,m,y,x,E,!0),B=C(t,P.pendingBranch=n.ssContent,l,P,y,x);return P.deps===0&&P.resolve(!1,!0),B}function xS(t){const{shapeFlag:n,children:l}=t,p=n&32;t.ssContent=S_(p?l.default:l),t.ssFallback=p?S_(l.fallback):qr(Ti)}function S_(t){let n;if(Zt(t)){const l=Vl&&t._c;l&&(t._d=!1,co()),t=t(),l&&(t._d=!0,n=Wi,V1())}return xt(t)&&(t=pS(t)),t=po(t),n&&!t.dynamicChildren&&(t.dynamicChildren=n.filter(l=>l!==t)),t}function p1(t,n){n&&n.pendingBranch?xt(t)?n.effects.push(...t):n.effects.push(t):Jg(t)}function nc(t,n){t.activeBranch=n;const{vnode:l,parentComponent:p}=t,m=l.el=n.el;p&&p.subTree===l&&(p.vnode.el=m,Qg(p,m))}function bS(t){var n;return((n=t.props)==null?void 0:n.suspensible)!=null&&t.props.suspensible!==!1}function wS(t,n){return Jp(t,null,n)}function h1(t,n){return Jp(t,null,{flush:"post"})}function ES(t,n){return Jp(t,null,{flush:"sync"})}const Ef={};function Rl(t,n,l){return Jp(t,n,l)}function Jp(t,n,{immediate:l,deep:p,flush:m,onTrack:y,onTrigger:x}=Fr){var E;const C=q0()===((E=Fn)==null?void 0:E.scope)?Fn:null;let P,B=!1,U=!1;if(Hn(t)?(P=()=>t.value,B=Lp(t)):Ll(t)?(P=()=>t,p=!0):xt(t)?(U=!0,B=t.some(_e=>Ll(_e)||Lp(_e)),P=()=>t.map(_e=>{if(Hn(_e))return _e.value;if(Ll(_e))return kl(_e);if(Zt(_e))return Xa(_e,C,2)})):Zt(t)?n?P=()=>Xa(t,C,2):P=()=>{if(!(C&&C.isUnmounted))return ee&&ee(),mo(t,C,3,[se])}:P=Di,n&&p){const _e=P;P=()=>kl(_e())}let ee,se=_e=>{ee=ue.onStop=()=>{Xa(_e,C,4)}},ne;if(lc)if(se=Di,n?l&&mo(n,C,3,[P(),U?[]:void 0,se]):P(),m==="sync"){const _e=tx();ne=_e.__watcherHandles||(_e.__watcherHandles=[])}else return Di;let ve=U?new Array(t.length).fill(Ef):Ef;const fe=()=>{if(ue.active)if(n){const _e=ue.run();(p||B||(U?_e.some((Oe,f)=>ac(Oe,ve[f])):ac(_e,ve)))&&(ee&&ee(),mo(n,C,3,[_e,ve===Ef?void 0:U&&ve[0]===Ef?[]:ve,se]),ve=_e)}else ue.run()};fe.allowRecurse=!!n;let pe;m==="sync"?pe=fe:m==="post"?pe=()=>pi(fe,C&&C.suspense):(fe.pre=!0,C&&(fe.id=C.uid),pe=()=>xd(fe));const ue=new Xp(P,pe);n?l?fe():ve=ue.run():m==="post"?pi(ue.run.bind(ue),C&&C.suspense):ue.run();const be=()=>{ue.stop(),C&&C.scope&&Dg(C.scope.effects,ue)};return ne&&ne.push(be),be}function SS(t,n,l){const p=this.proxy,m=er(t)?t.includes(".")?f1(p,t):()=>p[t]:t.bind(p,p);let y;Zt(n)?y=n:(y=n.handler,l=n);const x=Fn;Ds(this);const E=Jp(m,y.bind(p),l);return x?Ds(x):Ps(),E}function f1(t,n){const l=n.split(".");return()=>{let p=t;for(let m=0;m<l.length&&p;m++)p=p[l[m]];return p}}function kl(t,n){if(!Nr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),Hn(t))kl(t.value,n);else if(xt(t))for(let l=0;l<t.length;l++)kl(t[l],n);else if(Zl(t)||Yu(t))t.forEach(l=>{kl(l,n)});else if(F0(t))for(const l in t)kl(t[l],n);return t}function d1(t,n){const l=ni;if(l===null)return t;const p=Pd(l)||l.proxy,m=t.dirs||(t.dirs=[]);for(let y=0;y<n.length;y++){let[x,E,C,P=Fr]=n[y];x&&(Zt(x)&&(x={mounted:x,updated:x}),x.deep&&kl(E),m.push({dir:x,instance:p,value:E,oldValue:void 0,arg:C,modifiers:P}))}return t}function da(t,n,l,p){const m=t.dirs,y=n&&n.dirs;for(let x=0;x<m.length;x++){const E=m[x];y&&(E.oldValue=y[x].value);let C=E.dir[p];C&&(vc(),mo(C,l,8,[t.el,E,t,n]),_c())}}function ty(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qp(()=>{t.isMounted=!0}),Cd(()=>{t.isUnmounting=!0}),t}const Co=[Function,Array],ry={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Co,onEnter:Co,onAfterEnter:Co,onEnterCancelled:Co,onBeforeLeave:Co,onLeave:Co,onAfterLeave:Co,onLeaveCancelled:Co,onBeforeAppear:Co,onAppear:Co,onAfterAppear:Co,onAppearCancelled:Co},TS={name:"BaseTransition",props:ry,setup(t,{slots:n}){const l=es(),p=ty();let m;return()=>{const y=n.default&&Ed(n.default(),!0);if(!y||!y.length)return;let x=y[0];if(y.length>1){for(const ve of y)if(ve.type!==Ti){x=ve;break}}const E=vr(t),{mode:C}=E;if(p.isLeaving)return Bm(x);const P=T_(x);if(!P)return Bm(x);const B=sc(P,E,p,l);Nl(P,B);const U=l.subTree,ee=U&&T_(U);let se=!1;const{getTransitionKey:ne}=P.type;if(ne){const ve=ne();m===void 0?m=ve:ve!==m&&(m=ve,se=!0)}if(ee&&ee.type!==Ti&&(!qo(P,ee)||se)){const ve=sc(ee,E,p,l);if(Nl(ee,ve),C==="out-in")return p.isLeaving=!0,ve.afterLeave=()=>{p.isLeaving=!1,l.update.active!==!1&&l.update()},Bm(x);C==="in-out"&&P.type!==Ti&&(ve.delayLeave=(fe,pe,ue)=>{const be=g1(p,ee);be[String(ee.key)]=ee,fe._leaveCb=()=>{pe(),fe._leaveCb=void 0,delete B.delayedLeave},B.delayedLeave=ue})}return x}}},m1=TS;function g1(t,n){const{leavingVNodes:l}=t;let p=l.get(n.type);return p||(p=Object.create(null),l.set(n.type,p)),p}function sc(t,n,l,p){const{appear:m,mode:y,persisted:x=!1,onBeforeEnter:E,onEnter:C,onAfterEnter:P,onEnterCancelled:B,onBeforeLeave:U,onLeave:ee,onAfterLeave:se,onLeaveCancelled:ne,onBeforeAppear:ve,onAppear:fe,onAfterAppear:pe,onAppearCancelled:ue}=n,be=String(t.key),_e=g1(l,t),Oe=(Y,Fe)=>{Y&&mo(Y,p,9,Fe)},f=(Y,Fe)=>{const ze=Fe[1];Oe(Y,Fe),xt(Y)?Y.every(Xe=>Xe.length<=1)&&ze():Y.length<=1&&ze()},ke={mode:y,persisted:x,beforeEnter(Y){let Fe=E;if(!l.isMounted)if(m)Fe=ve||E;else return;Y._leaveCb&&Y._leaveCb(!0);const ze=_e[be];ze&&qo(t,ze)&&ze.el._leaveCb&&ze.el._leaveCb(),Oe(Fe,[Y])},enter(Y){let Fe=C,ze=P,Xe=B;if(!l.isMounted)if(m)Fe=fe||C,ze=pe||P,Xe=ue||B;else return;let xe=!1;const mt=Y._enterCb=et=>{xe||(xe=!0,et?Oe(Xe,[Y]):Oe(ze,[Y]),ke.delayedLeave&&ke.delayedLeave(),Y._enterCb=void 0)};Fe?f(Fe,[Y,mt]):mt()},leave(Y,Fe){const ze=String(t.key);if(Y._enterCb&&Y._enterCb(!0),l.isUnmounting)return Fe();Oe(U,[Y]);let Xe=!1;const xe=Y._leaveCb=mt=>{Xe||(Xe=!0,Fe(),mt?Oe(ne,[Y]):Oe(se,[Y]),Y._leaveCb=void 0,_e[ze]===t&&delete _e[ze])};_e[ze]=t,ee?f(ee,[Y,xe]):xe()},clone(Y){return sc(Y,n,l,p)}};return ke}function Bm(t){if(Yp(t))return t=ya(t),t.children=null,t}function T_(t){return Yp(t)?t.children?t.children[0]:void 0:t}function Nl(t,n){t.shapeFlag&6&&t.component?Nl(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function Ed(t,n=!1,l){let p=[],m=0;for(let y=0;y<t.length;y++){let x=t[y];const E=l==null?x.key:String(l)+String(x.key!=null?x.key:y);x.type===hi?(x.patchFlag&128&&m++,p=p.concat(Ed(x.children,n,E))):(n||x.type!==Ti)&&p.push(E!=null?ya(x,{key:E}):x)}if(m>1)for(let y=0;y<p.length;y++)p[y].patchFlag=-2;return p}function ny(t,n){return Zt(t)?(()=>yr({name:t.name},n,{setup:t}))():t}const Ol=t=>!!t.type.__asyncLoader;function CS(t){Zt(t)&&(t={loader:t});const{loader:n,loadingComponent:l,errorComponent:p,delay:m=200,timeout:y,suspensible:x=!0,onError:E}=t;let C=null,P,B=0;const U=()=>(B++,C=null,ee()),ee=()=>{let se;return C||(se=C=n().catch(ne=>{if(ne=ne instanceof Error?ne:new Error(String(ne)),E)return new Promise((ve,fe)=>{E(ne,()=>ve(U()),()=>fe(ne),B+1)});throw ne}).then(ne=>se!==C&&C?C:(ne&&(ne.__esModule||ne[Symbol.toStringTag]==="Module")&&(ne=ne.default),P=ne,ne)))};return ny({name:"AsyncComponentWrapper",__asyncLoader:ee,get __asyncResolved(){return P},setup(){const se=Fn;if(P)return()=>Fm(P,se);const ne=ue=>{C=null,Gl(ue,se,13,!p)};if(x&&se.suspense||lc)return ee().then(ue=>()=>Fm(ue,se)).catch(ue=>(ne(ue),()=>p?qr(p,{error:ue}):null));const ve=tc(!1),fe=tc(),pe=tc(!!m);return m&&setTimeout(()=>{pe.value=!1},m),y!=null&&setTimeout(()=>{if(!ve.value&&!fe.value){const ue=new Error(`Async component timed out after ${y}ms.`);ne(ue),fe.value=ue}},y),ee().then(()=>{ve.value=!0,se.parent&&Yp(se.parent.vnode)&&xd(se.parent.update)}).catch(ue=>{ne(ue),fe.value=ue}),()=>{if(ve.value&&P)return Fm(P,se);if(fe.value&&p)return qr(p,{error:fe.value});if(l&&!pe.value)return qr(l)}}})}function Fm(t,n){const{ref:l,props:p,children:m,ce:y}=n.vnode,x=qr(t,p,m);return x.ref=l,x.ce=y,delete n.vnode.ce,x}const Yp=t=>t.type.__isKeepAlive,AS={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:n}){const l=es(),p=l.ctx;if(!p.renderer)return()=>{const ue=n.default&&n.default();return ue&&ue.length===1?ue[0]:ue};const m=new Map,y=new Set;let x=null;const E=l.suspense,{renderer:{p:C,m:P,um:B,o:{createElement:U}}}=p,ee=U("div");p.activate=(ue,be,_e,Oe,f)=>{const ke=ue.component;P(ue,be,_e,0,E),C(ke.vnode,ue,be,_e,ke,E,Oe,ue.slotScopeIds,f),pi(()=>{ke.isDeactivated=!1,ke.a&&ec(ke.a);const Y=ue.props&&ue.props.onVnodeMounted;Y&&Ki(Y,ke.parent,ue)},E)},p.deactivate=ue=>{const be=ue.component;P(ue,ee,null,1,E),pi(()=>{be.da&&ec(be.da);const _e=ue.props&&ue.props.onVnodeUnmounted;_e&&Ki(_e,be.parent,ue),be.isDeactivated=!0},E)};function se(ue){Nm(ue),B(ue,l,E,!0)}function ne(ue){m.forEach((be,_e)=>{const Oe=yg(be.type);Oe&&(!ue||!ue(Oe))&&ve(_e)})}function ve(ue){const be=m.get(ue);!x||!qo(be,x)?se(be):x&&Nm(x),m.delete(ue),y.delete(ue)}Rl(()=>[t.include,t.exclude],([ue,be])=>{ue&&ne(_e=>Ep(ue,_e)),be&&ne(_e=>!Ep(be,_e))},{flush:"post",deep:!0});let fe=null;const pe=()=>{fe!=null&&m.set(fe,Um(l.subTree))};return Qp(pe),Td(pe),Cd(()=>{m.forEach(ue=>{const{subTree:be,suspense:_e}=l,Oe=Um(be);if(ue.type===Oe.type&&ue.key===Oe.key){Nm(Oe);const f=Oe.component.da;f&&pi(f,_e);return}se(ue)})}),()=>{if(fe=null,!n.default)return null;const ue=n.default(),be=ue[0];if(ue.length>1)return x=null,ue;if(!Os(be)||!(be.shapeFlag&4)&&!(be.shapeFlag&128))return x=null,be;let _e=Um(be);const Oe=_e.type,f=yg(Ol(_e)?_e.type.__asyncResolved||{}:Oe),{include:ke,exclude:Y,max:Fe}=t;if(ke&&(!f||!Ep(ke,f))||Y&&f&&Ep(Y,f))return x=_e,be;const ze=_e.key==null?Oe:_e.key,Xe=m.get(ze);return _e.el&&(_e=ya(_e),be.shapeFlag&128&&(be.ssContent=_e)),fe=ze,Xe?(_e.el=Xe.el,_e.component=Xe.component,_e.transition&&Nl(_e,_e.transition),_e.shapeFlag|=512,y.delete(ze),y.add(ze)):(y.add(ze),Fe&&y.size>parseInt(Fe,10)&&ve(y.values().next().value)),_e.shapeFlag|=256,x=_e,c1(be.type)?be:_e}}},IS=AS;function Ep(t,n){return xt(t)?t.some(l=>Ep(l,n)):er(t)?t.split(",").includes(n):q2(t)?t.test(n):!1}function y1(t,n){_1(t,"a",n)}function v1(t,n){_1(t,"da",n)}function _1(t,n,l=Fn){const p=t.__wdc||(t.__wdc=()=>{let m=l;for(;m;){if(m.isDeactivated)return;m=m.parent}return t()});if(Sd(n,p,l),l){let m=l.parent;for(;m&&m.parent;)Yp(m.parent.vnode)&&kS(p,n,l,m),m=m.parent}}function kS(t,n,l,p){const m=Sd(n,t,p,!0);Ad(()=>{Dg(p[n],m)},l)}function Nm(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Um(t){return t.shapeFlag&128?t.ssContent:t}function Sd(t,n,l=Fn,p=!1){if(l){const m=l[t]||(l[t]=[]),y=n.__weh||(n.__weh=(...x)=>{if(l.isUnmounted)return;vc(),Ds(l);const E=mo(n,l,t,x);return Ps(),_c(),E});return p?m.unshift(y):m.push(y),y}}const Qa=t=>(n,l=Fn)=>(!lc||t==="sp")&&Sd(t,(...p)=>n(...p),l),x1=Qa("bm"),Qp=Qa("m"),b1=Qa("bu"),Td=Qa("u"),Cd=Qa("bum"),Ad=Qa("um"),w1=Qa("sp"),E1=Qa("rtg"),S1=Qa("rtc");function T1(t,n=Fn){Sd("ec",t,n)}const iy="components",PS="directives";function oy(t,n){return ay(iy,t,!0,n)||t}const C1=Symbol.for("v-ndc");function MS(t){return er(t)?ay(iy,t,!1)||t:t||C1}function zS(t){return ay(PS,t)}function ay(t,n,l=!0,p=!1){const m=ni||Fn;if(m){const y=m.type;if(t===iy){const E=yg(y,!1);if(E&&(E===n||E===Nn(n)||E===Hl(Nn(n))))return y}const x=C_(m[t]||y[t],n)||C_(m.appContext[t],n);return!x&&p?y:x}}function C_(t,n){return t&&(t[n]||t[Nn(n)]||t[Hl(Nn(n))])}function LS(t,n,l,p){let m;const y=l&&l[p];if(xt(t)||er(t)){m=new Array(t.length);for(let x=0,E=t.length;x<E;x++)m[x]=n(t[x],x,void 0,y&&y[x])}else if(typeof t=="number"){m=new Array(t);for(let x=0;x<t;x++)m[x]=n(x+1,x,void 0,y&&y[x])}else if(Nr(t))if(t[Symbol.iterator])m=Array.from(t,(x,E)=>n(x,E,void 0,y&&y[E]));else{const x=Object.keys(t);m=new Array(x.length);for(let E=0,C=x.length;E<C;E++){const P=x[E];m[E]=n(t[P],P,E,y&&y[E])}}else m=[];return l&&(l[p]=m),m}function RS(t,n){for(let l=0;l<n.length;l++){const p=n[l];if(xt(p))for(let m=0;m<p.length;m++)t[p[m].name]=p[m].fn;else p&&(t[p.name]=p.key?(...m)=>{const y=p.fn(...m);return y&&(y.key=p.key),y}:p.fn)}return t}function OS(t,n,l={},p,m){if(ni.isCE||ni.parent&&Ol(ni.parent)&&ni.parent.isCE)return n!=="default"&&(l.name=n),qr("slot",l,p&&p());let y=t[n];y&&y._c&&(y._d=!1),co();const x=y&&A1(y(l)),E=Id(hi,{key:l.key||x&&x.key||`_${n}`},x||(p?p():[]),x&&t._===1?64:-2);return!m&&E.scopeId&&(E.slotScopeIds=[E.scopeId+"-s"]),y&&y._c&&(y._d=!0),E}function A1(t){return t.some(n=>Os(n)?!(n.type===Ti||n.type===hi&&!A1(n.children)):!0)?t:null}function DS(t,n){const l={};for(const p in t)l[n&&/[A-Z]/.test(p)?`on:${p}`:Qu(p)]=t[p];return l}const lg=t=>t?$1(t)?Pd(t)||t.proxy:lg(t.parent):null,Tp=yr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>lg(t.parent),$root:t=>lg(t.root),$emit:t=>t.emit,$options:t=>sy(t),$forceUpdate:t=>t.f||(t.f=()=>xd(t.update)),$nextTick:t=>t.n||(t.n=Xg.bind(t.proxy)),$watch:t=>SS.bind(t)}),Vm=(t,n)=>t!==Fr&&!t.__isScriptSetup&&Sr(t,n),ug={get({_:t},n){const{ctx:l,setupState:p,data:m,props:y,accessCache:x,type:E,appContext:C}=t;let P;if(n[0]!=="$"){const se=x[n];if(se!==void 0)switch(se){case 1:return p[n];case 2:return m[n];case 4:return l[n];case 3:return y[n]}else{if(Vm(p,n))return x[n]=1,p[n];if(m!==Fr&&Sr(m,n))return x[n]=2,m[n];if((P=t.propsOptions[0])&&Sr(P,n))return x[n]=3,y[n];if(l!==Fr&&Sr(l,n))return x[n]=4,l[n];cg&&(x[n]=0)}}const B=Tp[n];let U,ee;if(B)return n==="$attrs"&&Ji(t,"get",n),B(t);if((U=E.__cssModules)&&(U=U[n]))return U;if(l!==Fr&&Sr(l,n))return x[n]=4,l[n];if(ee=C.config.globalProperties,Sr(ee,n))return ee[n]},set({_:t},n,l){const{data:p,setupState:m,ctx:y}=t;return Vm(m,n)?(m[n]=l,!0):p!==Fr&&Sr(p,n)?(p[n]=l,!0):Sr(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(y[n]=l,!0)},has({_:{data:t,setupState:n,accessCache:l,ctx:p,appContext:m,propsOptions:y}},x){let E;return!!l[x]||t!==Fr&&Sr(t,x)||Vm(n,x)||(E=y[0])&&Sr(E,x)||Sr(p,x)||Sr(Tp,x)||Sr(m.config.globalProperties,x)},defineProperty(t,n,l){return l.get!=null?t._.accessCache[n]=0:Sr(l,"value")&&this.set(t,n,l.value,null),Reflect.defineProperty(t,n,l)}},BS=yr({},ug,{get(t,n){if(n!==Symbol.unscopables)return ug.get(t,n,t)},has(t,n){return n[0]!=="_"&&!W2(n)}});function FS(){return null}function NS(){return null}function US(t){}function VS(t){}function jS(){return null}function qS(){}function ZS(t,n){return null}function HS(){return I1().slots}function GS(){return I1().attrs}function $S(t,n,l){const p=es();if(l&&l.local){const m=tc(t[n]);return Rl(()=>t[n],y=>m.value=y),Rl(m,y=>{y!==t[n]&&p.emit(`update:${n}`,y)}),m}else return{__v_isRef:!0,get value(){return t[n]},set value(m){p.emit(`update:${n}`,m)}}}function I1(){const t=es();return t.setupContext||(t.setupContext=J1(t))}function Np(t){return xt(t)?t.reduce((n,l)=>(n[l]=null,n),{}):t}function KS(t,n){const l=Np(t);for(const p in n){if(p.startsWith("__skip"))continue;let m=l[p];m?xt(m)||Zt(m)?m=l[p]={type:m,default:n[p]}:m.default=n[p]:m===null&&(m=l[p]={default:n[p]}),m&&n[`__skip_${p}`]&&(m.skipFactory=!0)}return l}function WS(t,n){return!t||!n?t||n:xt(t)&&xt(n)?t.concat(n):yr({},Np(t),Np(n))}function XS(t,n){const l={};for(const p in t)n.includes(p)||Object.defineProperty(l,p,{enumerable:!0,get:()=>t[p]});return l}function JS(t){const n=es();let l=t();return Ps(),Bg(l)&&(l=l.catch(p=>{throw Ds(n),p})),[l,()=>Ds(n)]}let cg=!0;function YS(t){const n=sy(t),l=t.proxy,p=t.ctx;cg=!1,n.beforeCreate&&A_(n.beforeCreate,t,"bc");const{data:m,computed:y,methods:x,watch:E,provide:C,inject:P,created:B,beforeMount:U,mounted:ee,beforeUpdate:se,updated:ne,activated:ve,deactivated:fe,beforeDestroy:pe,beforeUnmount:ue,destroyed:be,unmounted:_e,render:Oe,renderTracked:f,renderTriggered:ke,errorCaptured:Y,serverPrefetch:Fe,expose:ze,inheritAttrs:Xe,components:xe,directives:mt,filters:et}=n;if(P&&QS(P,p,null),x)for(const tr in x){const Ot=x[tr];Zt(Ot)&&(p[tr]=Ot.bind(l))}if(m){const tr=m.call(l,l);Nr(tr)&&(t.data=yd(tr))}if(cg=!0,y)for(const tr in y){const Ot=y[tr],mn=Zt(Ot)?Ot.bind(l,l):Zt(Ot.get)?Ot.get.bind(l,l):Di,fi=!Zt(Ot)&&Zt(Ot.set)?Ot.set.bind(l):Di,Kr=Y1({get:mn,set:fi});Object.defineProperty(p,tr,{enumerable:!0,configurable:!0,get:()=>Kr.value,set:gn=>Kr.value=gn})}if(E)for(const tr in E)k1(E[tr],p,l,tr);if(C){const tr=Zt(C)?C.call(l):C;Reflect.ownKeys(tr).forEach(Ot=>{M1(Ot,tr[Ot])})}B&&A_(B,t,"c");function Rt(tr,Ot){xt(Ot)?Ot.forEach(mn=>tr(mn.bind(l))):Ot&&tr(Ot.bind(l))}if(Rt(x1,U),Rt(Qp,ee),Rt(b1,se),Rt(Td,ne),Rt(y1,ve),Rt(v1,fe),Rt(T1,Y),Rt(S1,f),Rt(E1,ke),Rt(Cd,ue),Rt(Ad,_e),Rt(w1,Fe),xt(ze))if(ze.length){const tr=t.exposed||(t.exposed={});ze.forEach(Ot=>{Object.defineProperty(tr,Ot,{get:()=>l[Ot],set:mn=>l[Ot]=mn})})}else t.exposed||(t.exposed={});Oe&&t.render===Di&&(t.render=Oe),Xe!=null&&(t.inheritAttrs=Xe),xe&&(t.components=xe),mt&&(t.directives=mt)}function QS(t,n,l=Di){xt(t)&&(t=pg(t));for(const p in t){const m=t[p];let y;Nr(m)?"default"in m?y=Cp(m.from||p,m.default,!0):y=Cp(m.from||p):y=Cp(m),Hn(y)?Object.defineProperty(n,p,{enumerable:!0,configurable:!0,get:()=>y.value,set:x=>y.value=x}):n[p]=y}}function A_(t,n,l){mo(xt(t)?t.map(p=>p.bind(n.proxy)):t.bind(n.proxy),n,l)}function k1(t,n,l,p){const m=p.includes(".")?f1(l,p):()=>l[p];if(er(t)){const y=n[t];Zt(y)&&Rl(m,y)}else if(Zt(t))Rl(m,t.bind(l));else if(Nr(t))if(xt(t))t.forEach(y=>k1(y,n,l,p));else{const y=Zt(t.handler)?t.handler.bind(l):n[t.handler];Zt(y)&&Rl(m,y,t)}}function sy(t){const n=t.type,{mixins:l,extends:p}=n,{mixins:m,optionsCache:y,config:{optionMergeStrategies:x}}=t.appContext,E=y.get(n);let C;return E?C=E:!m.length&&!l&&!p?C=n:(C={},m.length&&m.forEach(P=>Kf(C,P,x,!0)),Kf(C,n,x)),Nr(n)&&y.set(n,C),C}function Kf(t,n,l,p=!1){const{mixins:m,extends:y}=n;y&&Kf(t,y,l,!0),m&&m.forEach(x=>Kf(t,x,l,!0));for(const x in n)if(!(p&&x==="expose")){const E=e3[x]||l&&l[x];t[x]=E?E(t[x],n[x]):n[x]}return t}const e3={data:I_,props:k_,emits:k_,methods:Sp,computed:Sp,beforeCreate:Oi,created:Oi,beforeMount:Oi,mounted:Oi,beforeUpdate:Oi,updated:Oi,beforeDestroy:Oi,beforeUnmount:Oi,destroyed:Oi,unmounted:Oi,activated:Oi,deactivated:Oi,errorCaptured:Oi,serverPrefetch:Oi,components:Sp,directives:Sp,watch:r3,provide:I_,inject:t3};function I_(t,n){return n?t?function(){return yr(Zt(t)?t.call(this,this):t,Zt(n)?n.call(this,this):n)}:n:t}function t3(t,n){return Sp(pg(t),pg(n))}function pg(t){if(xt(t)){const n={};for(let l=0;l<t.length;l++)n[t[l]]=t[l];return n}return t}function Oi(t,n){return t?[...new Set([].concat(t,n))]:n}function Sp(t,n){return t?yr(Object.create(null),t,n):n}function k_(t,n){return t?xt(t)&&xt(n)?[...new Set([...t,...n])]:yr(Object.create(null),Np(t),Np(n??{})):n}function r3(t,n){if(!t)return n;if(!n)return t;const l=yr(Object.create(null),t);for(const p in n)l[p]=Oi(t[p],n[p]);return l}function P1(){return{app:null,config:{isNativeTag:zf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let n3=0;function i3(t,n){return function(p,m=null){Zt(p)||(p=yr({},p)),m!=null&&!Nr(m)&&(m=null);const y=P1(),x=new Set;let E=!1;const C=y.app={_uid:n3++,_component:p,_props:m,_container:null,_context:y,_instance:null,version:nx,get config(){return y.config},set config(P){},use(P,...B){return x.has(P)||(P&&Zt(P.install)?(x.add(P),P.install(C,...B)):Zt(P)&&(x.add(P),P(C,...B))),C},mixin(P){return y.mixins.includes(P)||y.mixins.push(P),C},component(P,B){return B?(y.components[P]=B,C):y.components[P]},directive(P,B){return B?(y.directives[P]=B,C):y.directives[P]},mount(P,B,U){if(!E){const ee=qr(p,m);return ee.appContext=y,B&&n?n(ee,P):t(ee,P,U),E=!0,C._container=P,P.__vue_app__=C,Pd(ee.component)||ee.component.proxy}},unmount(){E&&(t(null,C._container),delete C._container.__vue_app__)},provide(P,B){return y.provides[P]=B,C},runWithContext(P){Up=C;try{return P()}finally{Up=null}}};return C}}let Up=null;function M1(t,n){if(Fn){let l=Fn.provides;const p=Fn.parent&&Fn.parent.provides;p===l&&(l=Fn.provides=Object.create(p)),l[t]=n}}function Cp(t,n,l=!1){const p=Fn||ni;if(p||Up){const m=p?p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:Up._context.provides;if(m&&t in m)return m[t];if(arguments.length>1)return l&&Zt(n)?n.call(p&&p.proxy):n}}function o3(){return!!(Fn||ni||Up)}function a3(t,n,l,p=!1){const m={},y={};qf(y,kd,1),t.propsDefaults=Object.create(null),z1(t,n,m,y);for(const x in t.propsOptions[0])x in m||(m[x]=void 0);l?t.props=p?m:r1(m):t.type.props?t.props=m:t.props=y,t.attrs=y}function s3(t,n,l,p){const{props:m,attrs:y,vnode:{patchFlag:x}}=t,E=vr(m),[C]=t.propsOptions;let P=!1;if((p||x>0)&&!(x&16)){if(x&8){const B=t.vnode.dynamicProps;for(let U=0;U<B.length;U++){let ee=B[U];if(bd(t.emitsOptions,ee))continue;const se=n[ee];if(C)if(Sr(y,ee))se!==y[ee]&&(y[ee]=se,P=!0);else{const ne=Nn(ee);m[ne]=hg(C,E,ne,se,t,!1)}else se!==y[ee]&&(y[ee]=se,P=!0)}}}else{z1(t,n,m,y)&&(P=!0);let B;for(const U in E)(!n||!Sr(n,U)&&((B=ho(U))===U||!Sr(n,B)))&&(C?l&&(l[U]!==void 0||l[B]!==void 0)&&(m[U]=hg(C,E,U,void 0,t,!0)):delete m[U]);if(y!==E)for(const U in y)(!n||!Sr(n,U))&&(delete y[U],P=!0)}P&&Ya(t,"set","$attrs")}function z1(t,n,l,p){const[m,y]=t.propsOptions;let x=!1,E;if(n)for(let C in n){if(Ml(C))continue;const P=n[C];let B;m&&Sr(m,B=Nn(C))?!y||!y.includes(B)?l[B]=P:(E||(E={}))[B]=P:bd(t.emitsOptions,C)||(!(C in p)||P!==p[C])&&(p[C]=P,x=!0)}if(y){const C=vr(l),P=E||Fr;for(let B=0;B<y.length;B++){const U=y[B];l[U]=hg(m,C,U,P[U],t,!Sr(P,U))}}return x}function hg(t,n,l,p,m,y){const x=t[l];if(x!=null){const E=Sr(x,"default");if(E&&p===void 0){const C=x.default;if(x.type!==Function&&!x.skipFactory&&Zt(C)){const{propsDefaults:P}=m;l in P?p=P[l]:(Ds(m),p=P[l]=C.call(null,n),Ps())}else p=C}x[0]&&(y&&!E?p=!1:x[1]&&(p===""||p===ho(l))&&(p=!0))}return p}function L1(t,n,l=!1){const p=n.propsCache,m=p.get(t);if(m)return m;const y=t.props,x={},E=[];let C=!1;if(!Zt(t)){const B=U=>{C=!0;const[ee,se]=L1(U,n,!0);yr(x,ee),se&&E.push(...se)};!l&&n.mixins.length&&n.mixins.forEach(B),t.extends&&B(t.extends),t.mixins&&t.mixins.forEach(B)}if(!y&&!C)return Nr(t)&&p.set(t,Ju),Ju;if(xt(y))for(let B=0;B<y.length;B++){const U=Nn(y[B]);P_(U)&&(x[U]=Fr)}else if(y)for(const B in y){const U=Nn(B);if(P_(U)){const ee=y[B],se=x[U]=xt(ee)||Zt(ee)?{type:ee}:yr({},ee);if(se){const ne=L_(Boolean,se.type),ve=L_(String,se.type);se[0]=ne>-1,se[1]=ve<0||ne<ve,(ne>-1||Sr(se,"default"))&&E.push(U)}}}const P=[x,E];return Nr(t)&&p.set(t,P),P}function P_(t){return t[0]!=="$"}function M_(t){const n=t&&t.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:t===null?"null":""}function z_(t,n){return M_(t)===M_(n)}function L_(t,n){return xt(n)?n.findIndex(l=>z_(l,t)):Zt(n)&&z_(n,t)?0:-1}const R1=t=>t[0]==="_"||t==="$stable",ly=t=>xt(t)?t.map(po):[po(t)],l3=(t,n,l)=>{if(n._n)return n;const p=Yg((...m)=>ly(n(...m)),l);return p._c=!1,p},O1=(t,n,l)=>{const p=t._ctx;for(const m in t){if(R1(m))continue;const y=t[m];if(Zt(y))n[m]=l3(m,y,p);else if(y!=null){const x=ly(y);n[m]=()=>x}}},D1=(t,n)=>{const l=ly(n);t.slots.default=()=>l},u3=(t,n)=>{if(t.vnode.shapeFlag&32){const l=n._;l?(t.slots=vr(n),qf(n,"_",l)):O1(n,t.slots={})}else t.slots={},n&&D1(t,n);qf(t.slots,kd,1)},c3=(t,n,l)=>{const{vnode:p,slots:m}=t;let y=!0,x=Fr;if(p.shapeFlag&32){const E=n._;E?l&&E===1?y=!1:(yr(m,n),!l&&E===1&&delete m._):(y=!n.$stable,O1(n,m)),x=n}else n&&(D1(t,n),x={default:1});if(y)for(const E in m)!R1(E)&&!(E in x)&&delete m[E]};function Wf(t,n,l,p,m=!1){if(xt(t)){t.forEach((ee,se)=>Wf(ee,n&&(xt(n)?n[se]:n),l,p,m));return}if(Ol(p)&&!m)return;const y=p.shapeFlag&4?Pd(p.component)||p.component.proxy:p.el,x=m?null:y,{i:E,r:C}=t,P=n&&n.r,B=E.refs===Fr?E.refs={}:E.refs,U=E.setupState;if(P!=null&&P!==C&&(er(P)?(B[P]=null,Sr(U,P)&&(U[P]=null)):Hn(P)&&(P.value=null)),Zt(C))Xa(C,E,12,[x,B]);else{const ee=er(C),se=Hn(C);if(ee||se){const ne=()=>{if(t.f){const ve=ee?Sr(U,C)?U[C]:B[C]:C.value;m?xt(ve)&&Dg(ve,y):xt(ve)?ve.includes(y)||ve.push(y):ee?(B[C]=[y],Sr(U,C)&&(U[C]=B[C])):(C.value=[y],t.k&&(B[t.k]=C.value))}else ee?(B[C]=x,Sr(U,C)&&(U[C]=x)):se&&(C.value=x,t.k&&(B[t.k]=x))};x?(ne.id=-1,pi(ne,l)):ne()}}}let Es=!1;const Sf=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",Tf=t=>t.nodeType===8;function p3(t){const{mt:n,p:l,o:{patchProp:p,createText:m,nextSibling:y,parentNode:x,remove:E,insert:C,createComment:P}}=t,B=(pe,ue)=>{if(!ue.hasChildNodes()){l(null,pe,ue),$f(),ue._vnode=pe;return}Es=!1,U(ue.firstChild,pe,null,null,null),$f(),ue._vnode=pe,Es&&console.error("Hydration completed but contains mismatches.")},U=(pe,ue,be,_e,Oe,f=!1)=>{const ke=Tf(pe)&&pe.data==="[",Y=()=>ve(pe,ue,be,_e,Oe,ke),{type:Fe,ref:ze,shapeFlag:Xe,patchFlag:xe}=ue;let mt=pe.nodeType;ue.el=pe,xe===-2&&(f=!1,ue.dynamicChildren=null);let et=null;switch(Fe){case Ul:mt!==3?ue.children===""?(C(ue.el=m(""),x(pe),pe),et=pe):et=Y():(pe.data!==ue.children&&(Es=!0,pe.data=ue.children),et=y(pe));break;case Ti:mt!==8||ke?et=Y():et=y(pe);break;case Dl:if(ke&&(pe=y(pe),mt=pe.nodeType),mt===1||mt===3){et=pe;const $t=!ue.children.length;for(let Rt=0;Rt<ue.staticCount;Rt++)$t&&(ue.children+=et.nodeType===1?et.outerHTML:et.data),Rt===ue.staticCount-1&&(ue.anchor=et),et=y(et);return ke?y(et):et}else Y();break;case hi:ke?et=ne(pe,ue,be,_e,Oe,f):et=Y();break;default:if(Xe&1)mt!==1||ue.type.toLowerCase()!==pe.tagName.toLowerCase()?et=Y():et=ee(pe,ue,be,_e,Oe,f);else if(Xe&6){ue.slotScopeIds=Oe;const $t=x(pe);if(n(ue,$t,null,be,_e,Sf($t),f),et=ke?fe(pe):y(pe),et&&Tf(et)&&et.data==="teleport end"&&(et=y(et)),Ol(ue)){let Rt;ke?(Rt=qr(hi),Rt.anchor=et?et.previousSibling:$t.lastChild):Rt=pe.nodeType===3?cy(""):qr("div"),Rt.el=pe,ue.component.subTree=Rt}}else Xe&64?mt!==8?et=Y():et=ue.type.hydrate(pe,ue,be,_e,Oe,f,t,se):Xe&128&&(et=ue.type.hydrate(pe,ue,be,_e,Sf(x(pe)),Oe,f,t,U))}return ze!=null&&Wf(ze,null,_e,ue),et},ee=(pe,ue,be,_e,Oe,f)=>{f=f||!!ue.dynamicChildren;const{type:ke,props:Y,patchFlag:Fe,shapeFlag:ze,dirs:Xe}=ue,xe=ke==="input"&&Xe||ke==="option";if(xe||Fe!==-1){if(Xe&&da(ue,null,be,"created"),Y)if(xe||!f||Fe&48)for(const et in Y)(xe&&et.endsWith("value")||ql(et)&&!Ml(et))&&p(pe,et,null,Y[et],!1,void 0,be);else Y.onClick&&p(pe,"onClick",null,Y.onClick,!1,void 0,be);let mt;if((mt=Y&&Y.onVnodeBeforeMount)&&Ki(mt,be,ue),Xe&&da(ue,null,be,"beforeMount"),((mt=Y&&Y.onVnodeMounted)||Xe)&&p1(()=>{mt&&Ki(mt,be,ue),Xe&&da(ue,null,be,"mounted")},_e),ze&16&&!(Y&&(Y.innerHTML||Y.textContent))){let et=se(pe.firstChild,ue,pe,be,_e,Oe,f);for(;et;){Es=!0;const $t=et;et=et.nextSibling,E($t)}}else ze&8&&pe.textContent!==ue.children&&(Es=!0,pe.textContent=ue.children)}return pe.nextSibling},se=(pe,ue,be,_e,Oe,f,ke)=>{ke=ke||!!ue.dynamicChildren;const Y=ue.children,Fe=Y.length;for(let ze=0;ze<Fe;ze++){const Xe=ke?Y[ze]:Y[ze]=po(Y[ze]);if(pe)pe=U(pe,Xe,_e,Oe,f,ke);else{if(Xe.type===Ul&&!Xe.children)continue;Es=!0,l(null,Xe,be,null,_e,Oe,Sf(be),f)}}return pe},ne=(pe,ue,be,_e,Oe,f)=>{const{slotScopeIds:ke}=ue;ke&&(Oe=Oe?Oe.concat(ke):ke);const Y=x(pe),Fe=se(y(pe),ue,Y,be,_e,Oe,f);return Fe&&Tf(Fe)&&Fe.data==="]"?y(ue.anchor=Fe):(Es=!0,C(ue.anchor=P("]"),Y,Fe),Fe)},ve=(pe,ue,be,_e,Oe,f)=>{if(Es=!0,ue.el=null,f){const Fe=fe(pe);for(;;){const ze=y(pe);if(ze&&ze!==Fe)E(ze);else break}}const ke=y(pe),Y=x(pe);return E(pe),l(null,ue,Y,ke,be,_e,Sf(Y),Oe),ke},fe=pe=>{let ue=0;for(;pe;)if(pe=y(pe),pe&&Tf(pe)&&(pe.data==="["&&ue++,pe.data==="]")){if(ue===0)return y(pe);ue--}return pe};return[B,U]}const pi=p1;function B1(t){return N1(t)}function F1(t){return N1(t,p3)}function N1(t,n){const l=ng();l.__VUE__=!0;const{insert:p,remove:m,patchProp:y,createElement:x,createText:E,createComment:C,setText:P,setElementText:B,parentNode:U,nextSibling:ee,setScopeId:se=Di,insertStaticContent:ne}=t,ve=(oe,de,Be,$e=null,qe=null,Je=null,Te=!1,Le=null,Re=!!de.dynamicChildren)=>{if(oe===de)return;oe&&!qo(oe,de)&&($e=Mn(oe),gn(oe,qe,Je,!0),oe=null),de.patchFlag===-2&&(Re=!1,de.dynamicChildren=null);const{type:Ae,ref:Ye,shapeFlag:Ze}=de;switch(Ae){case Ul:fe(oe,de,Be,$e);break;case Ti:pe(oe,de,Be,$e);break;case Dl:oe==null&&ue(de,Be,$e,Te);break;case hi:xe(oe,de,Be,$e,qe,Je,Te,Le,Re);break;default:Ze&1?Oe(oe,de,Be,$e,qe,Je,Te,Le,Re):Ze&6?mt(oe,de,Be,$e,qe,Je,Te,Le,Re):(Ze&64||Ze&128)&&Ae.process(oe,de,Be,$e,qe,Je,Te,Le,Re,dr)}Ye!=null&&qe&&Wf(Ye,oe&&oe.ref,Je,de||oe,!de)},fe=(oe,de,Be,$e)=>{if(oe==null)p(de.el=E(de.children),Be,$e);else{const qe=de.el=oe.el;de.children!==oe.children&&P(qe,de.children)}},pe=(oe,de,Be,$e)=>{oe==null?p(de.el=C(de.children||""),Be,$e):de.el=oe.el},ue=(oe,de,Be,$e)=>{[oe.el,oe.anchor]=ne(oe.children,de,Be,$e,oe.el,oe.anchor)},be=({el:oe,anchor:de},Be,$e)=>{let qe;for(;oe&&oe!==de;)qe=ee(oe),p(oe,Be,$e),oe=qe;p(de,Be,$e)},_e=({el:oe,anchor:de})=>{let Be;for(;oe&&oe!==de;)Be=ee(oe),m(oe),oe=Be;m(de)},Oe=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{Te=Te||de.type==="svg",oe==null?f(de,Be,$e,qe,Je,Te,Le,Re):Fe(oe,de,qe,Je,Te,Le,Re)},f=(oe,de,Be,$e,qe,Je,Te,Le)=>{let Re,Ae;const{type:Ye,props:Ze,shapeFlag:ct,transition:nt,dirs:It}=oe;if(Re=oe.el=x(oe.type,Je,Ze&&Ze.is,Ze),ct&8?B(Re,oe.children):ct&16&&Y(oe.children,Re,null,$e,qe,Je&&Ye!=="foreignObject",Te,Le),It&&da(oe,null,$e,"created"),ke(Re,oe,oe.scopeId,Te,$e),Ze){for(const jt in Ze)jt!=="value"&&!Ml(jt)&&y(Re,jt,null,Ze[jt],Je,oe.children,$e,qe,rn);"value"in Ze&&y(Re,"value",null,Ze.value),(Ae=Ze.onVnodeBeforeMount)&&Ki(Ae,$e,oe)}It&&da(oe,null,$e,"beforeMount");const Vt=(!qe||qe&&!qe.pendingBranch)&&nt&&!nt.persisted;Vt&&nt.beforeEnter(Re),p(Re,de,Be),((Ae=Ze&&Ze.onVnodeMounted)||Vt||It)&&pi(()=>{Ae&&Ki(Ae,$e,oe),Vt&&nt.enter(Re),It&&da(oe,null,$e,"mounted")},qe)},ke=(oe,de,Be,$e,qe)=>{if(Be&&se(oe,Be),$e)for(let Je=0;Je<$e.length;Je++)se(oe,$e[Je]);if(qe){let Je=qe.subTree;if(de===Je){const Te=qe.vnode;ke(oe,Te,Te.scopeId,Te.slotScopeIds,qe.parent)}}},Y=(oe,de,Be,$e,qe,Je,Te,Le,Re=0)=>{for(let Ae=Re;Ae<oe.length;Ae++){const Ye=oe[Ae]=Le?Is(oe[Ae]):po(oe[Ae]);ve(null,Ye,de,Be,$e,qe,Je,Te,Le)}},Fe=(oe,de,Be,$e,qe,Je,Te)=>{const Le=de.el=oe.el;let{patchFlag:Re,dynamicChildren:Ae,dirs:Ye}=de;Re|=oe.patchFlag&16;const Ze=oe.props||Fr,ct=de.props||Fr;let nt;Be&&El(Be,!1),(nt=ct.onVnodeBeforeUpdate)&&Ki(nt,Be,de,oe),Ye&&da(de,oe,Be,"beforeUpdate"),Be&&El(Be,!0);const It=qe&&de.type!=="foreignObject";if(Ae?ze(oe.dynamicChildren,Ae,Le,Be,$e,It,Je):Te||Ot(oe,de,Le,null,Be,$e,It,Je,!1),Re>0){if(Re&16)Xe(Le,de,Ze,ct,Be,$e,qe);else if(Re&2&&Ze.class!==ct.class&&y(Le,"class",null,ct.class,qe),Re&4&&y(Le,"style",Ze.style,ct.style,qe),Re&8){const Vt=de.dynamicProps;for(let jt=0;jt<Vt.length;jt++){const dt=Vt[jt],Pr=Ze[dt],Mr=ct[dt];(Mr!==Pr||dt==="value")&&y(Le,dt,Pr,Mr,qe,oe.children,Be,$e,rn)}}Re&1&&oe.children!==de.children&&B(Le,de.children)}else!Te&&Ae==null&&Xe(Le,de,Ze,ct,Be,$e,qe);((nt=ct.onVnodeUpdated)||Ye)&&pi(()=>{nt&&Ki(nt,Be,de,oe),Ye&&da(de,oe,Be,"updated")},$e)},ze=(oe,de,Be,$e,qe,Je,Te)=>{for(let Le=0;Le<de.length;Le++){const Re=oe[Le],Ae=de[Le],Ye=Re.el&&(Re.type===hi||!qo(Re,Ae)||Re.shapeFlag&70)?U(Re.el):Be;ve(Re,Ae,Ye,null,$e,qe,Je,Te,!0)}},Xe=(oe,de,Be,$e,qe,Je,Te)=>{if(Be!==$e){if(Be!==Fr)for(const Le in Be)!Ml(Le)&&!(Le in $e)&&y(oe,Le,Be[Le],null,Te,de.children,qe,Je,rn);for(const Le in $e){if(Ml(Le))continue;const Re=$e[Le],Ae=Be[Le];Re!==Ae&&Le!=="value"&&y(oe,Le,Ae,Re,Te,de.children,qe,Je,rn)}"value"in $e&&y(oe,"value",Be.value,$e.value)}},xe=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{const Ae=de.el=oe?oe.el:E(""),Ye=de.anchor=oe?oe.anchor:E("");let{patchFlag:Ze,dynamicChildren:ct,slotScopeIds:nt}=de;nt&&(Le=Le?Le.concat(nt):nt),oe==null?(p(Ae,Be,$e),p(Ye,Be,$e),Y(de.children,Be,Ye,qe,Je,Te,Le,Re)):Ze>0&&Ze&64&&ct&&oe.dynamicChildren?(ze(oe.dynamicChildren,ct,Be,qe,Je,Te,Le),(de.key!=null||qe&&de===qe.subTree)&&uy(oe,de,!0)):Ot(oe,de,Be,Ye,qe,Je,Te,Le,Re)},mt=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{de.slotScopeIds=Le,oe==null?de.shapeFlag&512?qe.ctx.activate(de,Be,$e,Te,Re):et(de,Be,$e,qe,Je,Te,Re):$t(oe,de,Re)},et=(oe,de,Be,$e,qe,Je,Te)=>{const Le=oe.component=G1(oe,$e,qe);if(Yp(oe)&&(Le.ctx.renderer=dr),K1(Le),Le.asyncDep){if(qe&&qe.registerDep(Le,Rt),!oe.el){const Re=Le.subTree=qr(Ti);pe(null,Re,de,Be)}return}Rt(Le,oe,de,Be,qe,Je,Te)},$t=(oe,de,Be)=>{const $e=de.component=oe.component;if(dS(oe,de,Be))if($e.asyncDep&&!$e.asyncResolved){tr($e,de,Be);return}else $e.next=de,oS($e.update),$e.update();else de.el=oe.el,$e.vnode=de},Rt=(oe,de,Be,$e,qe,Je,Te)=>{const Le=()=>{if(oe.isMounted){let{next:Ye,bu:Ze,u:ct,parent:nt,vnode:It}=oe,Vt=Ye,jt;El(oe,!1),Ye?(Ye.el=It.el,tr(oe,Ye,Te)):Ye=It,Ze&&ec(Ze),(jt=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&Ki(jt,nt,Ye,It),El(oe,!0);const dt=Rf(oe),Pr=oe.subTree;oe.subTree=dt,ve(Pr,dt,U(Pr.el),Mn(Pr),oe,qe,Je),Ye.el=dt.el,Vt===null&&Qg(oe,dt.el),ct&&pi(ct,qe),(jt=Ye.props&&Ye.props.onVnodeUpdated)&&pi(()=>Ki(jt,nt,Ye,It),qe)}else{let Ye;const{el:Ze,props:ct}=de,{bm:nt,m:It,parent:Vt}=oe,jt=Ol(de);if(El(oe,!1),nt&&ec(nt),!jt&&(Ye=ct&&ct.onVnodeBeforeMount)&&Ki(Ye,Vt,de),El(oe,!0),Ze&&to){const dt=()=>{oe.subTree=Rf(oe),to(Ze,oe.subTree,oe,qe,null)};jt?de.type.__asyncLoader().then(()=>!oe.isUnmounted&&dt()):dt()}else{const dt=oe.subTree=Rf(oe);ve(null,dt,Be,$e,oe,qe,Je),de.el=dt.el}if(It&&pi(It,qe),!jt&&(Ye=ct&&ct.onVnodeMounted)){const dt=de;pi(()=>Ki(Ye,Vt,dt),qe)}(de.shapeFlag&256||Vt&&Ol(Vt.vnode)&&Vt.vnode.shapeFlag&256)&&oe.a&&pi(oe.a,qe),oe.isMounted=!0,de=Be=$e=null}},Re=oe.effect=new Xp(Le,()=>xd(Ae),oe.scope),Ae=oe.update=()=>Re.run();Ae.id=oe.uid,El(oe,!0),Ae()},tr=(oe,de,Be)=>{de.component=oe;const $e=oe.vnode.props;oe.vnode=de,oe.next=null,s3(oe,de.props,$e,Be),c3(oe,de.children,Be),vc(),w_(),_c()},Ot=(oe,de,Be,$e,qe,Je,Te,Le,Re=!1)=>{const Ae=oe&&oe.children,Ye=oe?oe.shapeFlag:0,Ze=de.children,{patchFlag:ct,shapeFlag:nt}=de;if(ct>0){if(ct&128){fi(Ae,Ze,Be,$e,qe,Je,Te,Le,Re);return}else if(ct&256){mn(Ae,Ze,Be,$e,qe,Je,Te,Le,Re);return}}nt&8?(Ye&16&&rn(Ae,qe,Je),Ze!==Ae&&B(Be,Ze)):Ye&16?nt&16?fi(Ae,Ze,Be,$e,qe,Je,Te,Le,Re):rn(Ae,qe,Je,!0):(Ye&8&&B(Be,""),nt&16&&Y(Ze,Be,$e,qe,Je,Te,Le,Re))},mn=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{oe=oe||Ju,de=de||Ju;const Ae=oe.length,Ye=de.length,Ze=Math.min(Ae,Ye);let ct;for(ct=0;ct<Ze;ct++){const nt=de[ct]=Re?Is(de[ct]):po(de[ct]);ve(oe[ct],nt,Be,null,qe,Je,Te,Le,Re)}Ae>Ye?rn(oe,qe,Je,!0,!1,Ze):Y(de,Be,$e,qe,Je,Te,Le,Re,Ze)},fi=(oe,de,Be,$e,qe,Je,Te,Le,Re)=>{let Ae=0;const Ye=de.length;let Ze=oe.length-1,ct=Ye-1;for(;Ae<=Ze&&Ae<=ct;){const nt=oe[Ae],It=de[Ae]=Re?Is(de[Ae]):po(de[Ae]);if(qo(nt,It))ve(nt,It,Be,null,qe,Je,Te,Le,Re);else break;Ae++}for(;Ae<=Ze&&Ae<=ct;){const nt=oe[Ze],It=de[ct]=Re?Is(de[ct]):po(de[ct]);if(qo(nt,It))ve(nt,It,Be,null,qe,Je,Te,Le,Re);else break;Ze--,ct--}if(Ae>Ze){if(Ae<=ct){const nt=ct+1,It=nt<Ye?de[nt].el:$e;for(;Ae<=ct;)ve(null,de[Ae]=Re?Is(de[Ae]):po(de[Ae]),Be,It,qe,Je,Te,Le,Re),Ae++}}else if(Ae>ct)for(;Ae<=Ze;)gn(oe[Ae],qe,Je,!0),Ae++;else{const nt=Ae,It=Ae,Vt=new Map;for(Ae=It;Ae<=ct;Ae++){const lr=de[Ae]=Re?Is(de[Ae]):po(de[Ae]);lr.key!=null&&Vt.set(lr.key,Ae)}let jt,dt=0;const Pr=ct-It+1;let Mr=!1,cn=0;const ki=new Array(Pr);for(Ae=0;Ae<Pr;Ae++)ki[Ae]=0;for(Ae=nt;Ae<=Ze;Ae++){const lr=oe[Ae];if(dt>=Pr){gn(lr,qe,Je,!0);continue}let rr;if(lr.key!=null)rr=Vt.get(lr.key);else for(jt=It;jt<=ct;jt++)if(ki[jt-It]===0&&qo(lr,de[jt])){rr=jt;break}rr===void 0?gn(lr,qe,Je,!0):(ki[rr-It]=Ae+1,rr>=cn?cn=rr:Mr=!0,ve(lr,de[rr],Be,null,qe,Je,Te,Le,Re),dt++)}const zn=Mr?h3(ki):Ju;for(jt=zn.length-1,Ae=Pr-1;Ae>=0;Ae--){const lr=It+Ae,rr=de[lr],yn=lr+1<Ye?de[lr+1].el:$e;ki[Ae]===0?ve(null,rr,Be,yn,qe,Je,Te,Le,Re):Mr&&(jt<0||Ae!==zn[jt]?Kr(rr,Be,yn,2):jt--)}}},Kr=(oe,de,Be,$e,qe=null)=>{const{el:Je,type:Te,transition:Le,children:Re,shapeFlag:Ae}=oe;if(Ae&6){Kr(oe.component.subTree,de,Be,$e);return}if(Ae&128){oe.suspense.move(de,Be,$e);return}if(Ae&64){Te.move(oe,de,Be,dr);return}if(Te===hi){p(Je,de,Be);for(let Ze=0;Ze<Re.length;Ze++)Kr(Re[Ze],de,Be,$e);p(oe.anchor,de,Be);return}if(Te===Dl){be(oe,de,Be);return}if($e!==2&&Ae&1&&Le)if($e===0)Le.beforeEnter(Je),p(Je,de,Be),pi(()=>Le.enter(Je),qe);else{const{leave:Ze,delayLeave:ct,afterLeave:nt}=Le,It=()=>p(Je,de,Be),Vt=()=>{Ze(Je,()=>{It(),nt&&nt()})};ct?ct(Je,It,Vt):Vt()}else p(Je,de,Be)},gn=(oe,de,Be,$e=!1,qe=!1)=>{const{type:Je,props:Te,ref:Le,children:Re,dynamicChildren:Ae,shapeFlag:Ye,patchFlag:Ze,dirs:ct}=oe;if(Le!=null&&Wf(Le,null,Be,oe,!0),Ye&256){de.ctx.deactivate(oe);return}const nt=Ye&1&&ct,It=!Ol(oe);let Vt;if(It&&(Vt=Te&&Te.onVnodeBeforeUnmount)&&Ki(Vt,de,oe),Ye&6)ln(oe.component,Be,$e);else{if(Ye&128){oe.suspense.unmount(Be,$e);return}nt&&da(oe,null,de,"beforeUnmount"),Ye&64?oe.type.remove(oe,de,Be,qe,dr,$e):Ae&&(Je!==hi||Ze>0&&Ze&64)?rn(Ae,de,Be,!1,!0):(Je===hi&&Ze&384||!qe&&Ye&16)&&rn(Re,de,Be),$e&&Ii(oe)}(It&&(Vt=Te&&Te.onVnodeUnmounted)||nt)&&pi(()=>{Vt&&Ki(Vt,de,oe),nt&&da(oe,null,de,"unmounted")},Be)},Ii=oe=>{const{type:de,el:Be,anchor:$e,transition:qe}=oe;if(de===hi){Bi(Be,$e);return}if(de===Dl){_e(oe);return}const Je=()=>{m(Be),qe&&!qe.persisted&&qe.afterLeave&&qe.afterLeave()};if(oe.shapeFlag&1&&qe&&!qe.persisted){const{leave:Te,delayLeave:Le}=qe,Re=()=>Te(Be,Je);Le?Le(oe.el,Je,Re):Re()}else Je()},Bi=(oe,de)=>{let Be;for(;oe!==de;)Be=ee(oe),m(oe),oe=Be;m(de)},ln=(oe,de,Be)=>{const{bum:$e,scope:qe,update:Je,subTree:Te,um:Le}=oe;$e&&ec($e),qe.stop(),Je&&(Je.active=!1,gn(Te,oe,de,Be)),Le&&pi(Le,de),pi(()=>{oe.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},rn=(oe,de,Be,$e=!1,qe=!1,Je=0)=>{for(let Te=Je;Te<oe.length;Te++)gn(oe[Te],de,Be,$e,qe)},Mn=oe=>oe.shapeFlag&6?Mn(oe.component.subTree):oe.shapeFlag&128?oe.suspense.next():ee(oe.anchor||oe.el),eo=(oe,de,Be)=>{oe==null?de._vnode&&gn(de._vnode,null,null,!0):ve(de._vnode||null,oe,de,null,null,null,Be),w_(),$f(),de._vnode=oe},dr={p:ve,um:gn,m:Kr,r:Ii,mt:et,mc:Y,pc:Ot,pbc:ze,n:Mn,o:t};let un,to;return n&&([un,to]=n(dr)),{render:eo,hydrate:un,createApp:i3(eo,un)}}function El({effect:t,update:n},l){t.allowRecurse=n.allowRecurse=l}function uy(t,n,l=!1){const p=t.children,m=n.children;if(xt(p)&&xt(m))for(let y=0;y<p.length;y++){const x=p[y];let E=m[y];E.shapeFlag&1&&!E.dynamicChildren&&((E.patchFlag<=0||E.patchFlag===32)&&(E=m[y]=Is(m[y]),E.el=x.el),l||uy(x,E)),E.type===Ul&&(E.el=x.el)}}function h3(t){const n=t.slice(),l=[0];let p,m,y,x,E;const C=t.length;for(p=0;p<C;p++){const P=t[p];if(P!==0){if(m=l[l.length-1],t[m]<P){n[p]=m,l.push(p);continue}for(y=0,x=l.length-1;y<x;)E=y+x>>1,t[l[E]]<P?y=E+1:x=E;P<t[l[y]]&&(y>0&&(n[p]=l[y-1]),l[y]=p)}}for(y=l.length,x=l[y-1];y-- >0;)l[y]=x,x=n[x];return l}const f3=t=>t.__isTeleport,Ap=t=>t&&(t.disabled||t.disabled===""),R_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,fg=(t,n)=>{const l=t&&t.to;return er(l)?n?n(l):null:l},d3={__isTeleport:!0,process(t,n,l,p,m,y,x,E,C,P){const{mc:B,pc:U,pbc:ee,o:{insert:se,querySelector:ne,createText:ve,createComment:fe}}=P,pe=Ap(n.props);let{shapeFlag:ue,children:be,dynamicChildren:_e}=n;if(t==null){const Oe=n.el=ve(""),f=n.anchor=ve("");se(Oe,l,p),se(f,l,p);const ke=n.target=fg(n.props,ne),Y=n.targetAnchor=ve("");ke&&(se(Y,ke),x=x||R_(ke));const Fe=(ze,Xe)=>{ue&16&&B(be,ze,Xe,m,y,x,E,C)};pe?Fe(l,f):ke&&Fe(ke,Y)}else{n.el=t.el;const Oe=n.anchor=t.anchor,f=n.target=t.target,ke=n.targetAnchor=t.targetAnchor,Y=Ap(t.props),Fe=Y?l:f,ze=Y?Oe:ke;if(x=x||R_(f),_e?(ee(t.dynamicChildren,_e,Fe,m,y,x,E),uy(t,n,!0)):C||U(t,n,Fe,ze,m,y,x,E,!1),pe)Y||Cf(n,l,Oe,P,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const Xe=n.target=fg(n.props,ne);Xe&&Cf(n,Xe,null,P,0)}else Y&&Cf(n,f,ke,P,1)}U1(n)},remove(t,n,l,p,{um:m,o:{remove:y}},x){const{shapeFlag:E,children:C,anchor:P,targetAnchor:B,target:U,props:ee}=t;if(U&&y(B),(x||!Ap(ee))&&(y(P),E&16))for(let se=0;se<C.length;se++){const ne=C[se];m(ne,n,l,!0,!!ne.dynamicChildren)}},move:Cf,hydrate:m3};function Cf(t,n,l,{o:{insert:p},m},y=2){y===0&&p(t.targetAnchor,n,l);const{el:x,anchor:E,shapeFlag:C,children:P,props:B}=t,U=y===2;if(U&&p(x,n,l),(!U||Ap(B))&&C&16)for(let ee=0;ee<P.length;ee++)m(P[ee],n,l,2);U&&p(E,n,l)}function m3(t,n,l,p,m,y,{o:{nextSibling:x,parentNode:E,querySelector:C}},P){const B=n.target=fg(n.props,C);if(B){const U=B._lpa||B.firstChild;if(n.shapeFlag&16)if(Ap(n.props))n.anchor=P(x(t),n,E(t),l,p,m,y),n.targetAnchor=U;else{n.anchor=x(t);let ee=U;for(;ee;)if(ee=x(ee),ee&&ee.nodeType===8&&ee.data==="teleport anchor"){n.targetAnchor=ee,B._lpa=n.targetAnchor&&x(n.targetAnchor);break}P(U,n,B,l,p,m,y)}U1(n)}return n.anchor&&x(n.anchor)}const g3=d3;function U1(t){const n=t.ctx;if(n&&n.ut){let l=t.children[0].el;for(;l!==t.targetAnchor;)l.nodeType===1&&l.setAttribute("data-v-owner",n.uid),l=l.nextSibling;n.ut()}}const hi=Symbol.for("v-fgt"),Ul=Symbol.for("v-txt"),Ti=Symbol.for("v-cmt"),Dl=Symbol.for("v-stc"),Ip=[];let Wi=null;function co(t=!1){Ip.push(Wi=t?null:[])}function V1(){Ip.pop(),Wi=Ip[Ip.length-1]||null}let Vl=1;function dg(t){Vl+=t}function j1(t){return t.dynamicChildren=Vl>0?Wi||Ju:null,V1(),Vl>0&&Wi&&Wi.push(t),t}function Ka(t,n,l,p,m,y){return j1(Zn(t,n,l,p,m,y,!0))}function Id(t,n,l,p,m){return j1(qr(t,n,l,p,m,!0))}function Os(t){return t?t.__v_isVNode===!0:!1}function qo(t,n){return t.type===n.type&&t.key===n.key}function y3(t){}const kd="__vInternal",q1=({key:t})=>t??null,Of=({ref:t,ref_key:n,ref_for:l})=>(typeof t=="number"&&(t=""+t),t!=null?er(t)||Hn(t)||Zt(t)?{i:ni,r:t,k:n,f:!!l}:t:null);function Zn(t,n=null,l=null,p=0,m=null,y=t===hi?0:1,x=!1,E=!1){const C={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&q1(n),ref:n&&Of(n),scopeId:wd,slotScopeIds:null,children:l,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:p,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:ni};return E?(py(C,l),y&128&&t.normalize(C)):l&&(C.shapeFlag|=er(l)?8:16),Vl>0&&!x&&Wi&&(C.patchFlag>0||y&6)&&C.patchFlag!==32&&Wi.push(C),C}const qr=v3;function v3(t,n=null,l=null,p=0,m=null,y=!1){if((!t||t===C1)&&(t=Ti),Os(t)){const E=ya(t,n,!0);return l&&py(E,l),Vl>0&&!y&&Wi&&(E.shapeFlag&6?Wi[Wi.indexOf(t)]=E:Wi.push(E)),E.patchFlag|=-2,E}if(T3(t)&&(t=t.__vccOpts),n){n=Z1(n);let{class:E,style:C}=n;E&&!er(E)&&(n.class=yc(E)),Nr(C)&&(qg(C)&&!xt(C)&&(C=yr({},C)),n.style=Wp(C))}const x=er(t)?1:c1(t)?128:f3(t)?64:Nr(t)?4:Zt(t)?2:0;return Zn(t,n,l,p,m,x,y,!0)}function Z1(t){return t?qg(t)||kd in t?yr({},t):t:null}function ya(t,n,l=!1){const{props:p,ref:m,patchFlag:y,children:x}=t,E=n?H1(p||{},n):p;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:E,key:E&&q1(E),ref:n&&n.ref?l&&m?xt(m)?m.concat(Of(n)):[m,Of(n)]:Of(n):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:x,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==hi?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ya(t.ssContent),ssFallback:t.ssFallback&&ya(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function cy(t=" ",n=0){return qr(Ul,null,t,n)}function _3(t,n){const l=qr(Dl,null,t);return l.staticCount=n,l}function Wu(t="",n=!1){return n?(co(),Id(Ti,null,t)):qr(Ti,null,t)}function po(t){return t==null||typeof t=="boolean"?qr(Ti):xt(t)?qr(hi,null,t.slice()):typeof t=="object"?Is(t):qr(Ul,null,String(t))}function Is(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ya(t)}function py(t,n){let l=0;const{shapeFlag:p}=t;if(n==null)n=null;else if(xt(n))l=16;else if(typeof n=="object")if(p&65){const m=n.default;m&&(m._c&&(m._d=!1),py(t,m()),m._c&&(m._d=!0));return}else{l=32;const m=n._;!m&&!(kd in n)?n._ctx=ni:m===3&&ni&&(ni.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Zt(n)?(n={default:n,_ctx:ni},l=32):(n=String(n),p&64?(l=16,n=[cy(n)]):l=8);t.children=n,t.shapeFlag|=l}function H1(...t){const n={};for(let l=0;l<t.length;l++){const p=t[l];for(const m in p)if(m==="class")n.class!==p.class&&(n.class=yc([n.class,p.class]));else if(m==="style")n.style=Wp([n.style,p.style]);else if(ql(m)){const y=n[m],x=p[m];x&&y!==x&&!(xt(y)&&y.includes(x))&&(n[m]=y?[].concat(y,x):x)}else m!==""&&(n[m]=p[m])}return n}function Ki(t,n,l,p=null){mo(t,n,7,[l,p])}const x3=P1();let b3=0;function G1(t,n,l){const p=t.type,m=(n?n.appContext:t.appContext)||x3,y={uid:b3++,vnode:t,type:p,parent:n,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ng(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:L1(p,m),emitsOptions:u1(p,m),emit:null,emitted:null,propsDefaults:Fr,inheritAttrs:p.inheritAttrs,ctx:Fr,data:Fr,props:Fr,attrs:Fr,slots:Fr,refs:Fr,setupState:Fr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:l,suspenseId:l?l.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=n?n.root:y,y.emit=sS.bind(null,y),t.ce&&t.ce(y),y}let Fn=null;const es=()=>Fn||ni;let hy,Gu,O_="__VUE_INSTANCE_SETTERS__";(Gu=ng()[O_])||(Gu=ng()[O_]=[]),Gu.push(t=>Fn=t),hy=t=>{Gu.length>1?Gu.forEach(n=>n(t)):Gu[0](t)};const Ds=t=>{hy(t),t.scope.on()},Ps=()=>{Fn&&Fn.scope.off(),hy(null)};function $1(t){return t.vnode.shapeFlag&4}let lc=!1;function K1(t,n=!1){lc=n;const{props:l,children:p}=t.vnode,m=$1(t);a3(t,l,m,n),u3(t,p);const y=m?w3(t,n):void 0;return lc=!1,y}function w3(t,n){const l=t.type;t.accessCache=Object.create(null),t.proxy=Zg(new Proxy(t.ctx,ug));const{setup:p}=l;if(p){const m=t.setupContext=p.length>1?J1(t):null;Ds(t),vc();const y=Xa(p,t,0,[t.props,m]);if(_c(),Ps(),Bg(y)){if(y.then(Ps,Ps),n)return y.then(x=>{mg(t,x,n)}).catch(x=>{Gl(x,t,0)});t.asyncDep=y}else mg(t,y,n)}else X1(t,n)}function mg(t,n,l){Zt(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Nr(n)&&(t.setupState=Kg(n)),X1(t,l)}let Xf,gg;function W1(t){Xf=t,gg=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,BS))}}const E3=()=>!Xf;function X1(t,n,l){const p=t.type;if(!t.render){if(!n&&Xf&&!p.render){const m=p.template||sy(t).template;if(m){const{isCustomElement:y,compilerOptions:x}=t.appContext.config,{delimiters:E,compilerOptions:C}=p,P=yr(yr({isCustomElement:y,delimiters:E},x),C);p.render=Xf(m,P)}}t.render=p.render||Di,gg&&gg(t)}Ds(t),vc(),YS(t),_c(),Ps()}function S3(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(n,l){return Ji(t,"get","$attrs"),n[l]}}))}function J1(t){const n=l=>{t.exposed=l||{}};return{get attrs(){return S3(t)},slots:t.slots,emit:t.emit,expose:n}}function Pd(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Kg(Zg(t.exposed)),{get(n,l){if(l in n)return n[l];if(l in Tp)return Tp[l](t)},has(n,l){return l in n||l in Tp}}))}function yg(t,n=!0){return Zt(t)?t.displayName||t.name:t.name||n&&t.__name}function T3(t){return Zt(t)&&"__vccOpts"in t}const Y1=(t,n)=>eS(t,n,lc);function Q1(t,n,l){const p=arguments.length;return p===2?Nr(n)&&!xt(n)?Os(n)?qr(t,null,[n]):qr(t,n):qr(t,null,n):(p>3?l=Array.prototype.slice.call(arguments,2):p===3&&Os(l)&&(l=[l]),qr(t,n,l))}const ex=Symbol.for("v-scx"),tx=()=>Cp(ex);function C3(){}function A3(t,n,l,p){const m=l[p];if(m&&rx(m,t))return m;const y=n();return y.memo=t.slice(),l[p]=y}function rx(t,n){const l=t.memo;if(l.length!=n.length)return!1;for(let p=0;p<l.length;p++)if(ac(l[p],n[p]))return!1;return Vl>0&&Wi&&Wi.push(t),!0}const nx="3.3.4",I3={createComponentInstance:G1,setupComponent:K1,renderComponentRoot:Rf,setCurrentRenderingInstance:Bp,isVNode:Os,normalizeVNode:po},k3=I3,P3=null,M3=null,z3="http://www.w3.org/2000/svg",Il=typeof document<"u"?document:null,D_=Il&&Il.createElement("template"),L3={insert:(t,n,l)=>{n.insertBefore(t,l||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,l,p)=>{const m=n?Il.createElementNS(z3,t):Il.createElement(t,l?{is:l}:void 0);return t==="select"&&p&&p.multiple!=null&&m.setAttribute("multiple",p.multiple),m},createText:t=>Il.createTextNode(t),createComment:t=>Il.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Il.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,l,p,m,y){const x=l?l.previousSibling:n.lastChild;if(m&&(m===y||m.nextSibling))for(;n.insertBefore(m.cloneNode(!0),l),!(m===y||!(m=m.nextSibling)););else{D_.innerHTML=p?`<svg>${t}</svg>`:t;const E=D_.content;if(p){const C=E.firstChild;for(;C.firstChild;)E.appendChild(C.firstChild);E.removeChild(C)}n.insertBefore(E,l)}return[x?x.nextSibling:n.firstChild,l?l.previousSibling:n.lastChild]}};function R3(t,n,l){const p=t._vtc;p&&(n=(n?[n,...p]:[...p]).join(" ")),n==null?t.removeAttribute("class"):l?t.setAttribute("class",n):t.className=n}function O3(t,n,l){const p=t.style,m=er(l);if(l&&!m){if(n&&!er(n))for(const y in n)l[y]==null&&vg(p,y,"");for(const y in l)vg(p,y,l[y])}else{const y=p.display;m?n!==l&&(p.cssText=l):n&&t.removeAttribute("style"),"_vod"in t&&(p.display=y)}}const B_=/\s*!important$/;function vg(t,n,l){if(xt(l))l.forEach(p=>vg(t,n,p));else if(l==null&&(l=""),n.startsWith("--"))t.setProperty(n,l);else{const p=D3(t,n);B_.test(l)?t.setProperty(ho(p),l.replace(B_,""),"important"):t[p]=l}}const F_=["Webkit","Moz","ms"],jm={};function D3(t,n){const l=jm[n];if(l)return l;let p=Nn(n);if(p!=="filter"&&p in t)return jm[n]=p;p=Hl(p);for(let m=0;m<F_.length;m++){const y=F_[m]+p;if(y in t)return jm[n]=y}return n}const N_="http://www.w3.org/1999/xlink";function B3(t,n,l,p,m){if(p&&n.startsWith("xlink:"))l==null?t.removeAttributeNS(N_,n.slice(6,n.length)):t.setAttributeNS(N_,n,l);else{const y=sE(n);l==null||y&&!U0(l)?t.removeAttribute(n):t.setAttribute(n,y?"":l)}}function F3(t,n,l,p,m,y,x){if(n==="innerHTML"||n==="textContent"){p&&x(p,m,y),t[n]=l??"";return}const E=t.tagName;if(n==="value"&&E!=="PROGRESS"&&!E.includes("-")){t._value=l;const P=E==="OPTION"?t.getAttribute("value"):t.value,B=l??"";P!==B&&(t.value=B),l==null&&t.removeAttribute(n);return}let C=!1;if(l===""||l==null){const P=typeof t[n];P==="boolean"?l=U0(l):l==null&&P==="string"?(l="",C=!0):P==="number"&&(l=0,C=!0)}try{t[n]=l}catch{}C&&t.removeAttribute(n)}function Wa(t,n,l,p){t.addEventListener(n,l,p)}function N3(t,n,l,p){t.removeEventListener(n,l,p)}function U3(t,n,l,p,m=null){const y=t._vei||(t._vei={}),x=y[n];if(p&&x)x.value=p;else{const[E,C]=V3(n);if(p){const P=y[n]=Z3(p,m);Wa(t,E,P,C)}else x&&(N3(t,E,x,C),y[n]=void 0)}}const U_=/(?:Once|Passive|Capture)$/;function V3(t){let n;if(U_.test(t)){n={};let p;for(;p=t.match(U_);)t=t.slice(0,t.length-p[0].length),n[p[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ho(t.slice(2)),n]}let qm=0;const j3=Promise.resolve(),q3=()=>qm||(j3.then(()=>qm=0),qm=Date.now());function Z3(t,n){const l=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=l.attached)return;mo(H3(p,l.value),n,5,[p])};return l.value=t,l.attached=q3(),l}function H3(t,n){if(xt(n)){const l=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{l.call(t),t._stopped=!0},n.map(p=>m=>!m._stopped&&p&&p(m))}else return n}const V_=/^on[a-z]/,G3=(t,n,l,p,m=!1,y,x,E,C)=>{n==="class"?R3(t,p,m):n==="style"?O3(t,l,p):ql(n)?Og(n)||U3(t,n,l,p,x):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):$3(t,n,p,m))?F3(t,n,p,y,x,E,C):(n==="true-value"?t._trueValue=p:n==="false-value"&&(t._falseValue=p),B3(t,n,p,m))};function $3(t,n,l,p){return p?!!(n==="innerHTML"||n==="textContent"||n in t&&V_.test(n)&&Zt(l)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||V_.test(n)&&er(l)?!1:n in t}function ix(t,n){const l=ny(t);class p extends Md{constructor(y){super(l,y,n)}}return p.def=l,p}const K3=t=>ix(t,xx),W3=typeof HTMLElement<"u"?HTMLElement:class{};class Md extends W3{constructor(n,l={},p){super(),this._def=n,this._props=l,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&p?p(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Xg(()=>{this._connected||(bg(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let p=0;p<this.attributes.length;p++)this._setAttr(this.attributes[p].name);new MutationObserver(p=>{for(const m of p)this._setAttr(m.attributeName)}).observe(this,{attributes:!0});const n=(p,m=!1)=>{const{props:y,styles:x}=p;let E;if(y&&!xt(y))for(const C in y){const P=y[C];(P===Number||P&&P.type===Number)&&(C in this._props&&(this._props[C]=Hf(this._props[C])),(E||(E=Object.create(null)))[Nn(C)]=!0)}this._numberProps=E,m&&this._resolveProps(p),this._applyStyles(x),this._update()},l=this._def.__asyncLoader;l?l().then(p=>n(p,!0)):n(this._def)}_resolveProps(n){const{props:l}=n,p=xt(l)?l:Object.keys(l||{});for(const m of Object.keys(this))m[0]!=="_"&&p.includes(m)&&this._setProp(m,this[m],!0,!1);for(const m of p.map(Nn))Object.defineProperty(this,m,{get(){return this._getProp(m)},set(y){this._setProp(m,y)}})}_setAttr(n){let l=this.getAttribute(n);const p=Nn(n);this._numberProps&&this._numberProps[p]&&(l=Hf(l)),this._setProp(p,l,!1)}_getProp(n){return this._props[n]}_setProp(n,l,p=!0,m=!0){l!==this._props[n]&&(this._props[n]=l,m&&this._instance&&this._update(),p&&(l===!0?this.setAttribute(ho(n),""):typeof l=="string"||typeof l=="number"?this.setAttribute(ho(n),l+""):l||this.removeAttribute(ho(n))))}_update(){bg(this._createVNode(),this.shadowRoot)}_createVNode(){const n=qr(this._def,yr({},this._props));return this._instance||(n.ce=l=>{this._instance=l,l.isCE=!0;const p=(y,x)=>{this.dispatchEvent(new CustomEvent(y,{detail:x}))};l.emit=(y,...x)=>{p(y,x),ho(y)!==y&&p(ho(y),x)};let m=this;for(;m=m&&(m.parentNode||m.host);)if(m instanceof Md){l.parent=m._instance,l.provides=m._instance.provides;break}}),n}_applyStyles(n){n&&n.forEach(l=>{const p=document.createElement("style");p.textContent=l,this.shadowRoot.appendChild(p)})}}function X3(t="$style"){{const n=es();if(!n)return Fr;const l=n.type.__cssModules;if(!l)return Fr;const p=l[t];return p||Fr}}function J3(t){const n=es();if(!n)return;const l=n.ut=(m=t(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(y=>xg(y,m))},p=()=>{const m=t(n.proxy);_g(n.subTree,m),l(m)};h1(p),Qp(()=>{const m=new MutationObserver(p);m.observe(n.subTree.el.parentNode,{childList:!0}),Ad(()=>m.disconnect())})}function _g(t,n){if(t.shapeFlag&128){const l=t.suspense;t=l.activeBranch,l.pendingBranch&&!l.isHydrating&&l.effects.push(()=>{_g(l.activeBranch,n)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)xg(t.el,n);else if(t.type===hi)t.children.forEach(l=>_g(l,n));else if(t.type===Dl){let{el:l,anchor:p}=t;for(;l&&(xg(l,n),l!==p);)l=l.nextSibling}}function xg(t,n){if(t.nodeType===1){const l=t.style;for(const p in n)l.setProperty(`--${p}`,n[p])}}const Ss="transition",vp="animation",fy=(t,{slots:n})=>Q1(m1,ax(t),n);fy.displayName="Transition";const ox={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Y3=fy.props=yr({},ry,ox),Sl=(t,n=[])=>{xt(t)?t.forEach(l=>l(...n)):t&&t(...n)},j_=t=>t?xt(t)?t.some(n=>n.length>1):t.length>1:!1;function ax(t){const n={};for(const xe in t)xe in ox||(n[xe]=t[xe]);if(t.css===!1)return n;const{name:l="v",type:p,duration:m,enterFromClass:y=`${l}-enter-from`,enterActiveClass:x=`${l}-enter-active`,enterToClass:E=`${l}-enter-to`,appearFromClass:C=y,appearActiveClass:P=x,appearToClass:B=E,leaveFromClass:U=`${l}-leave-from`,leaveActiveClass:ee=`${l}-leave-active`,leaveToClass:se=`${l}-leave-to`}=t,ne=Q3(m),ve=ne&&ne[0],fe=ne&&ne[1],{onBeforeEnter:pe,onEnter:ue,onEnterCancelled:be,onLeave:_e,onLeaveCancelled:Oe,onBeforeAppear:f=pe,onAppear:ke=ue,onAppearCancelled:Y=be}=n,Fe=(xe,mt,et)=>{As(xe,mt?B:E),As(xe,mt?P:x),et&&et()},ze=(xe,mt)=>{xe._isLeaving=!1,As(xe,U),As(xe,se),As(xe,ee),mt&&mt()},Xe=xe=>(mt,et)=>{const $t=xe?ke:ue,Rt=()=>Fe(mt,xe,et);Sl($t,[mt,Rt]),q_(()=>{As(mt,xe?C:y),Ga(mt,xe?B:E),j_($t)||Z_(mt,p,ve,Rt)})};return yr(n,{onBeforeEnter(xe){Sl(pe,[xe]),Ga(xe,y),Ga(xe,x)},onBeforeAppear(xe){Sl(f,[xe]),Ga(xe,C),Ga(xe,P)},onEnter:Xe(!1),onAppear:Xe(!0),onLeave(xe,mt){xe._isLeaving=!0;const et=()=>ze(xe,mt);Ga(xe,U),lx(),Ga(xe,ee),q_(()=>{xe._isLeaving&&(As(xe,U),Ga(xe,se),j_(_e)||Z_(xe,p,fe,et))}),Sl(_e,[xe,et])},onEnterCancelled(xe){Fe(xe,!1),Sl(be,[xe])},onAppearCancelled(xe){Fe(xe,!0),Sl(Y,[xe])},onLeaveCancelled(xe){ze(xe),Sl(Oe,[xe])}})}function Q3(t){if(t==null)return null;if(Nr(t))return[Zm(t.enter),Zm(t.leave)];{const n=Zm(t);return[n,n]}}function Zm(t){return Hf(t)}function Ga(t,n){n.split(/\s+/).forEach(l=>l&&t.classList.add(l)),(t._vtc||(t._vtc=new Set)).add(n)}function As(t,n){n.split(/\s+/).forEach(p=>p&&t.classList.remove(p));const{_vtc:l}=t;l&&(l.delete(n),l.size||(t._vtc=void 0))}function q_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let eT=0;function Z_(t,n,l,p){const m=t._endId=++eT,y=()=>{m===t._endId&&p()};if(l)return setTimeout(y,l);const{type:x,timeout:E,propCount:C}=sx(t,n);if(!x)return p();const P=x+"end";let B=0;const U=()=>{t.removeEventListener(P,ee),y()},ee=se=>{se.target===t&&++B>=C&&U()};setTimeout(()=>{B<C&&U()},E+1),t.addEventListener(P,ee)}function sx(t,n){const l=window.getComputedStyle(t),p=ne=>(l[ne]||"").split(", "),m=p(`${Ss}Delay`),y=p(`${Ss}Duration`),x=H_(m,y),E=p(`${vp}Delay`),C=p(`${vp}Duration`),P=H_(E,C);let B=null,U=0,ee=0;n===Ss?x>0&&(B=Ss,U=x,ee=y.length):n===vp?P>0&&(B=vp,U=P,ee=C.length):(U=Math.max(x,P),B=U>0?x>P?Ss:vp:null,ee=B?B===Ss?y.length:C.length:0);const se=B===Ss&&/\b(transform|all)(,|$)/.test(p(`${Ss}Property`).toString());return{type:B,timeout:U,propCount:ee,hasTransform:se}}function H_(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((l,p)=>G_(l)+G_(t[p])))}function G_(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function lx(){return document.body.offsetHeight}const ux=new WeakMap,cx=new WeakMap,px={name:"TransitionGroup",props:yr({},Y3,{tag:String,moveClass:String}),setup(t,{slots:n}){const l=es(),p=ty();let m,y;return Td(()=>{if(!m.length)return;const x=t.moveClass||`${t.name||"v"}-move`;if(!aT(m[0].el,l.vnode.el,x))return;m.forEach(nT),m.forEach(iT);const E=m.filter(oT);lx(),E.forEach(C=>{const P=C.el,B=P.style;Ga(P,x),B.transform=B.webkitTransform=B.transitionDuration="";const U=P._moveCb=ee=>{ee&&ee.target!==P||(!ee||/transform$/.test(ee.propertyName))&&(P.removeEventListener("transitionend",U),P._moveCb=null,As(P,x))};P.addEventListener("transitionend",U)})}),()=>{const x=vr(t),E=ax(x);let C=x.tag||hi;m=y,y=n.default?Ed(n.default()):[];for(let P=0;P<y.length;P++){const B=y[P];B.key!=null&&Nl(B,sc(B,E,p,l))}if(m)for(let P=0;P<m.length;P++){const B=m[P];Nl(B,sc(B,E,p,l)),ux.set(B,B.el.getBoundingClientRect())}return qr(C,null,y)}}},tT=t=>delete t.mode;px.props;const rT=px;function nT(t){const n=t.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function iT(t){cx.set(t,t.el.getBoundingClientRect())}function oT(t){const n=ux.get(t),l=cx.get(t),p=n.left-l.left,m=n.top-l.top;if(p||m){const y=t.el.style;return y.transform=y.webkitTransform=`translate(${p}px,${m}px)`,y.transitionDuration="0s",t}}function aT(t,n,l){const p=t.cloneNode();t._vtc&&t._vtc.forEach(x=>{x.split(/\s+/).forEach(E=>E&&p.classList.remove(E))}),l.split(/\s+/).forEach(x=>x&&p.classList.add(x)),p.style.display="none";const m=n.nodeType===1?n:n.parentNode;m.appendChild(p);const{hasTransform:y}=sx(p);return m.removeChild(p),y}const Bs=t=>{const n=t.props["onUpdate:modelValue"]||!1;return xt(n)?l=>ec(n,l):n};function sT(t){t.target.composing=!0}function $_(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Vp={created(t,{modifiers:{lazy:n,trim:l,number:p}},m){t._assign=Bs(m);const y=p||m.props&&m.props.type==="number";Wa(t,n?"change":"input",x=>{if(x.target.composing)return;let E=t.value;l&&(E=E.trim()),y&&(E=Zf(E)),t._assign(E)}),l&&Wa(t,"change",()=>{t.value=t.value.trim()}),n||(Wa(t,"compositionstart",sT),Wa(t,"compositionend",$_),Wa(t,"change",$_))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,modifiers:{lazy:l,trim:p,number:m}},y){if(t._assign=Bs(y),t.composing||document.activeElement===t&&t.type!=="range"&&(l||p&&t.value.trim()===n||(m||t.type==="number")&&Zf(t.value)===n))return;const x=n??"";t.value!==x&&(t.value=x)}},dy={deep:!0,created(t,n,l){t._assign=Bs(l),Wa(t,"change",()=>{const p=t._modelValue,m=uc(t),y=t.checked,x=t._assign;if(xt(p)){const E=fd(p,m),C=E!==-1;if(y&&!C)x(p.concat(m));else if(!y&&C){const P=[...p];P.splice(E,1),x(P)}}else if(Zl(p)){const E=new Set(p);y?E.add(m):E.delete(m),x(E)}else x(fx(t,y))})},mounted:K_,beforeUpdate(t,n,l){t._assign=Bs(l),K_(t,n,l)}};function K_(t,{value:n,oldValue:l},p){t._modelValue=n,xt(n)?t.checked=fd(n,p.props.value)>-1:Zl(n)?t.checked=n.has(p.props.value):n!==l&&(t.checked=Ls(n,fx(t,!0)))}const my={created(t,{value:n},l){t.checked=Ls(n,l.props.value),t._assign=Bs(l),Wa(t,"change",()=>{t._assign(uc(t))})},beforeUpdate(t,{value:n,oldValue:l},p){t._assign=Bs(p),n!==l&&(t.checked=Ls(n,p.props.value))}},hx={deep:!0,created(t,{value:n,modifiers:{number:l}},p){const m=Zl(n);Wa(t,"change",()=>{const y=Array.prototype.filter.call(t.options,x=>x.selected).map(x=>l?Zf(uc(x)):uc(x));t._assign(t.multiple?m?new Set(y):y:y[0])}),t._assign=Bs(p)},mounted(t,{value:n}){W_(t,n)},beforeUpdate(t,n,l){t._assign=Bs(l)},updated(t,{value:n}){W_(t,n)}};function W_(t,n){const l=t.multiple;if(!(l&&!xt(n)&&!Zl(n))){for(let p=0,m=t.options.length;p<m;p++){const y=t.options[p],x=uc(y);if(l)xt(n)?y.selected=fd(n,x)>-1:y.selected=n.has(x);else if(Ls(uc(y),n)){t.selectedIndex!==p&&(t.selectedIndex=p);return}}!l&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function uc(t){return"_value"in t?t._value:t.value}function fx(t,n){const l=n?"_trueValue":"_falseValue";return l in t?t[l]:n}const dx={created(t,n,l){Af(t,n,l,null,"created")},mounted(t,n,l){Af(t,n,l,null,"mounted")},beforeUpdate(t,n,l,p){Af(t,n,l,p,"beforeUpdate")},updated(t,n,l,p){Af(t,n,l,p,"updated")}};function mx(t,n){switch(t){case"SELECT":return hx;case"TEXTAREA":return Vp;default:switch(n){case"checkbox":return dy;case"radio":return my;default:return Vp}}}function Af(t,n,l,p,m){const x=mx(t.tagName,l.props&&l.props.type)[m];x&&x(t,n,l,p)}function lT(){Vp.getSSRProps=({value:t})=>({value:t}),my.getSSRProps=({value:t},n)=>{if(n.props&&Ls(n.props.value,t))return{checked:!0}},dy.getSSRProps=({value:t},n)=>{if(xt(t)){if(n.props&&fd(t,n.props.value)>-1)return{checked:!0}}else if(Zl(t)){if(n.props&&t.has(n.props.value))return{checked:!0}}else if(t)return{checked:!0}},dx.getSSRProps=(t,n)=>{if(typeof n.type!="string")return;const l=mx(n.type.toUpperCase(),n.props&&n.props.type);if(l.getSSRProps)return l.getSSRProps(t,n)}}const uT=["ctrl","shift","alt","meta"],cT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>uT.some(l=>t[`${l}Key`]&&!n.includes(l))},pT=(t,n)=>(l,...p)=>{for(let m=0;m<n.length;m++){const y=cT[n[m]];if(y&&y(l,n))return}return t(l,...p)},hT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fT=(t,n)=>l=>{if(!("key"in l))return;const p=ho(l.key);if(n.some(m=>m===p||hT[m]===p))return t(l)},gx={beforeMount(t,{value:n},{transition:l}){t._vod=t.style.display==="none"?"":t.style.display,l&&n?l.beforeEnter(t):_p(t,n)},mounted(t,{value:n},{transition:l}){l&&n&&l.enter(t)},updated(t,{value:n,oldValue:l},{transition:p}){!n!=!l&&(p?n?(p.beforeEnter(t),_p(t,!0),p.enter(t)):p.leave(t,()=>{_p(t,!1)}):_p(t,n))},beforeUnmount(t,{value:n}){_p(t,n)}};function _p(t,n){t.style.display=n?t._vod:"none"}function dT(){gx.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const yx=yr({patchProp:G3},L3);let kp,X_=!1;function vx(){return kp||(kp=B1(yx))}function _x(){return kp=X_?kp:F1(yx),X_=!0,kp}const bg=(...t)=>{vx().render(...t)},xx=(...t)=>{_x().hydrate(...t)},bx=(...t)=>{const n=vx().createApp(...t),{mount:l}=n;return n.mount=p=>{const m=wx(p);if(!m)return;const y=n._component;!Zt(y)&&!y.render&&!y.template&&(y.template=m.innerHTML),m.innerHTML="";const x=l(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),x},n},mT=(...t)=>{const n=_x().createApp(...t),{mount:l}=n;return n.mount=p=>{const m=wx(p);if(m)return l(m,!0,m instanceof SVGElement)},n};function wx(t){return er(t)?document.querySelector(t):t}let J_=!1;const gT=()=>{J_||(J_=!0,lT(),dT())},yT=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:m1,BaseTransitionPropsValidators:ry,Comment:Ti,EffectScope:Ng,Fragment:hi,KeepAlive:IS,ReactiveEffect:Xp,Static:Dl,Suspense:gS,Teleport:g3,Text:Ul,Transition:fy,TransitionGroup:rT,VueElement:Md,assertNumber:rS,callWithAsyncErrorHandling:mo,callWithErrorHandling:Xa,camelize:Nn,capitalize:Hl,cloneVNode:ya,compatUtils:M3,computed:Y1,createApp:bx,createBlock:Id,createCommentVNode:Wu,createElementBlock:Ka,createElementVNode:Zn,createHydrationRenderer:F1,createPropsRestProxy:XS,createRenderer:B1,createSSRApp:mT,createSlots:RS,createStaticVNode:_3,createTextVNode:cy,createVNode:qr,customRef:KE,defineAsyncComponent:CS,defineComponent:ny,defineCustomElement:ix,defineEmits:NS,defineExpose:US,defineModel:qS,defineOptions:VS,defineProps:FS,defineSSRCustomElement:K3,defineSlots:jS,get devtools(){return Ku},effect:fE,effectScope:uE,getCurrentInstance:es,getCurrentScope:q0,getTransitionRawChildren:Ed,guardReactiveProps:Z1,h:Q1,handleError:Gl,hasInjectionContext:o3,hydrate:xx,initCustomFormatter:C3,initDirectivesForSSR:gT,inject:Cp,isMemoSame:rx,isProxy:qg,isReactive:Ll,isReadonly:Fl,isRef:Hn,isRuntimeOnly:E3,isShallow:Lp,isVNode:Os,markRaw:Zg,mergeDefaults:KS,mergeModels:WS,mergeProps:H1,nextTick:Xg,normalizeClass:yc,normalizeProps:Q2,normalizeStyle:Wp,onActivated:y1,onBeforeMount:x1,onBeforeUnmount:Cd,onBeforeUpdate:b1,onDeactivated:v1,onErrorCaptured:T1,onMounted:Qp,onRenderTracked:S1,onRenderTriggered:E1,onScopeDispose:cE,onServerPrefetch:w1,onUnmounted:Ad,onUpdated:Td,openBlock:co,popScopeId:uS,provide:M1,proxyRefs:Kg,pushScopeId:lS,queuePostFlushCb:Jg,reactive:yd,readonly:jg,ref:tc,registerRuntimeCompiler:W1,render:bg,renderList:LS,renderSlot:OS,resolveComponent:oy,resolveDirective:zS,resolveDynamicComponent:MS,resolveFilter:P3,resolveTransitionHooks:sc,setBlockTracking:dg,setDevtoolsHook:l1,setTransitionHooks:Nl,shallowReactive:r1,shallowReadonly:VE,shallowRef:jE,ssrContextKey:ex,ssrUtils:k3,stop:dE,toDisplayString:Lf,toHandlerKey:Qu,toHandlers:DS,toRaw:vr,toRef:YE,toRefs:WE,toValue:HE,transformVNodeArgs:y3,triggerRef:ZE,unref:$g,useAttrs:GS,useCssModule:X3,useCssVars:J3,useModel:$S,useSSRContext:tx,useSlots:HS,useTransitionState:ty,vModelCheckbox:dy,vModelDynamic:dx,vModelRadio:my,vModelSelect:hx,vModelText:Vp,vShow:gx,version:nx,warn:tS,watch:Rl,watchEffect:wS,watchPostEffect:h1,watchSyncEffect:ES,withAsyncContext:JS,withCtx:Yg,withDefaults:ZS,withDirectives:d1,withKeys:fT,withMemo:A3,withModifiers:pT,withScopeId:cS},Symbol.toStringTag,{value:"Module"}));function gy(t){throw t}function Ex(t){}function sn(t,n,l,p){const m=t,y=new SyntaxError(String(m));return y.code=t,y.loc=n,y}const jp=Symbol(""),Pp=Symbol(""),yy=Symbol(""),Jf=Symbol(""),Sx=Symbol(""),jl=Symbol(""),Tx=Symbol(""),Cx=Symbol(""),vy=Symbol(""),_y=Symbol(""),eh=Symbol(""),xy=Symbol(""),Ax=Symbol(""),by=Symbol(""),Yf=Symbol(""),wy=Symbol(""),Ey=Symbol(""),Sy=Symbol(""),Ty=Symbol(""),Ix=Symbol(""),kx=Symbol(""),zd=Symbol(""),Qf=Symbol(""),Cy=Symbol(""),Ay=Symbol(""),qp=Symbol(""),th=Symbol(""),Iy=Symbol(""),wg=Symbol(""),vT=Symbol(""),Eg=Symbol(""),ed=Symbol(""),_T=Symbol(""),xT=Symbol(""),ky=Symbol(""),bT=Symbol(""),wT=Symbol(""),Py=Symbol(""),Px=Symbol(""),cc={[jp]:"Fragment",[Pp]:"Teleport",[yy]:"Suspense",[Jf]:"KeepAlive",[Sx]:"BaseTransition",[jl]:"openBlock",[Tx]:"createBlock",[Cx]:"createElementBlock",[vy]:"createVNode",[_y]:"createElementVNode",[eh]:"createCommentVNode",[xy]:"createTextVNode",[Ax]:"createStaticVNode",[by]:"resolveComponent",[Yf]:"resolveDynamicComponent",[wy]:"resolveDirective",[Ey]:"resolveFilter",[Sy]:"withDirectives",[Ty]:"renderList",[Ix]:"renderSlot",[kx]:"createSlots",[zd]:"toDisplayString",[Qf]:"mergeProps",[Cy]:"normalizeClass",[Ay]:"normalizeStyle",[qp]:"normalizeProps",[th]:"guardReactiveProps",[Iy]:"toHandlers",[wg]:"camelize",[vT]:"capitalize",[Eg]:"toHandlerKey",[ed]:"setBlockTracking",[_T]:"pushScopeId",[xT]:"popScopeId",[ky]:"withCtx",[bT]:"unref",[wT]:"isRef",[Py]:"withMemo",[Px]:"isMemoSame"};function ET(t){Object.getOwnPropertySymbols(t).forEach(n=>{cc[n]=t[n]})}const yo={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function ST(t,n=yo){return{type:0,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:n}}function Zp(t,n,l,p,m,y,x,E=!1,C=!1,P=!1,B=yo){return t&&(E?(t.helper(jl),t.helper(fc(t.inSSR,P))):t.helper(hc(t.inSSR,P)),x&&t.helper(Sy)),{type:13,tag:n,props:l,children:p,patchFlag:m,dynamicProps:y,directives:x,isBlock:E,disableTracking:C,isComponent:P,loc:B}}function rh(t,n=yo){return{type:17,loc:n,elements:t}}function Io(t,n=yo){return{type:15,loc:n,properties:t}}function En(t,n){return{type:16,loc:yo,key:er(t)?sr(t,!0):t,value:n}}function sr(t,n=!1,l=yo,p=0){return{type:4,loc:l,content:t,isStatic:n,constType:n?3:p}}function Zo(t,n=yo){return{type:8,loc:n,children:t}}function Bn(t,n=[],l=yo){return{type:14,loc:l,callee:t,arguments:n}}function pc(t,n=void 0,l=!1,p=!1,m=yo){return{type:18,params:t,returns:n,newline:l,isSlot:p,loc:m}}function Sg(t,n,l,p=!0){return{type:19,test:t,consequent:n,alternate:l,newline:p,loc:yo}}function TT(t,n,l=!1){return{type:20,index:t,value:n,isVNode:l,loc:yo}}function CT(t){return{type:21,body:t,loc:yo}}function hc(t,n){return t||n?vy:_y}function fc(t,n){return t||n?Tx:Cx}function My(t,{helper:n,removeHelper:l,inSSR:p}){t.isBlock||(t.isBlock=!0,l(hc(p,t.isComponent)),n(jl),n(fc(p,t.isComponent)))}const Xi=t=>t.type===4&&t.isStatic,Xu=(t,n)=>t===n||t===ho(n);function Mx(t){if(Xu(t,"Teleport"))return Pp;if(Xu(t,"Suspense"))return yy;if(Xu(t,"KeepAlive"))return Jf;if(Xu(t,"BaseTransition"))return Sx}const AT=/^\d|[^\$\w]/,zy=t=>!AT.test(t),IT=/[A-Za-z_$\xA0-\uFFFF]/,kT=/[\.\?\w$\xA0-\uFFFF]/,PT=/\s+[.[]\s*|\s*[.[]\s+/g,MT=t=>{t=t.trim().replace(PT,x=>x.trim());let n=0,l=[],p=0,m=0,y=null;for(let x=0;x<t.length;x++){const E=t.charAt(x);switch(n){case 0:if(E==="[")l.push(n),n=1,p++;else if(E==="(")l.push(n),n=2,m++;else if(!(x===0?IT:kT).test(E))return!1;break;case 1:E==="'"||E==='"'||E==="`"?(l.push(n),n=3,y=E):E==="["?p++:E==="]"&&(--p||(n=l.pop()));break;case 2:if(E==="'"||E==='"'||E==="`")l.push(n),n=3,y=E;else if(E==="(")m++;else if(E===")"){if(x===t.length-1)return!1;--m||(n=l.pop())}break;case 3:E===y&&(n=l.pop(),y=null);break}}return!p&&!m},zx=MT;function Lx(t,n,l){const m={source:t.source.slice(n,n+l),start:td(t.start,t.source,n),end:t.end};return l!=null&&(m.end=td(t.start,t.source,n+l)),m}function td(t,n,l=n.length){return rd(yr({},t),n,l)}function rd(t,n,l=n.length){let p=0,m=-1;for(let y=0;y<l;y++)n.charCodeAt(y)===10&&(p++,m=y);return t.offset+=l,t.line+=p,t.column=m===-1?t.column+l:l-m,t}function Ao(t,n,l=!1){for(let p=0;p<t.props.length;p++){const m=t.props[p];if(m.type===7&&(l||m.exp)&&(er(n)?m.name===n:n.test(m.name)))return m}}function Ld(t,n,l=!1,p=!1){for(let m=0;m<t.props.length;m++){const y=t.props[m];if(y.type===6){if(l)continue;if(y.name===n&&(y.value||p))return y}else if(y.name==="bind"&&(y.exp||p)&&Pl(y.arg,n))return y}}function Pl(t,n){return!!(t&&Xi(t)&&t.content===n)}function zT(t){return t.props.some(n=>n.type===7&&n.name==="bind"&&(!n.arg||n.arg.type!==4||!n.arg.isStatic))}function Hm(t){return t.type===5||t.type===2}function LT(t){return t.type===7&&t.name==="slot"}function nd(t){return t.type===1&&t.tagType===3}function id(t){return t.type===1&&t.tagType===2}const RT=new Set([qp,th]);function Rx(t,n=[]){if(t&&!er(t)&&t.type===14){const l=t.callee;if(!er(l)&&RT.has(l))return Rx(t.arguments[0],n.concat(t))}return[t,n]}function od(t,n,l){let p,m=t.type===13?t.props:t.arguments[2],y=[],x;if(m&&!er(m)&&m.type===14){const E=Rx(m);m=E[0],y=E[1],x=y[y.length-1]}if(m==null||er(m))p=Io([n]);else if(m.type===14){const E=m.arguments[0];!er(E)&&E.type===15?Y_(n,E)||E.properties.unshift(n):m.callee===Iy?p=Bn(l.helper(Qf),[Io([n]),m]):m.arguments.unshift(Io([n])),!p&&(p=m)}else m.type===15?(Y_(n,m)||m.properties.unshift(n),p=m):(p=Bn(l.helper(Qf),[Io([n]),m]),x&&x.callee===th&&(x=y[y.length-2]));t.type===13?x?x.arguments[0]=p:t.props=p:x?x.arguments[0]=p:t.arguments[2]=p}function Y_(t,n){let l=!1;if(t.key.type===4){const p=t.key.content;l=n.properties.some(m=>m.key.type===4&&m.key.content===p)}return l}function Hp(t,n){return`_${n}_${t.replace(/[^\w]/g,(l,p)=>l==="-"?"_":t.charCodeAt(p).toString())}`}function OT(t){return t.type===14&&t.callee===Py?t.arguments[1].returns:t}function Q_(t,n){const l=n.options?n.options.compatConfig:n.compatConfig,p=l&&l[t];return t==="MODE"?p||3:p}function Bl(t,n){const l=Q_("MODE",n),p=Q_(t,n);return l===3?p===!0:p!==!1}function Gp(t,n,l,...p){return Bl(t,n)}const DT=/&(gt|lt|amp|apos|quot);/g,BT={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},e0={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:zf,isPreTag:zf,isCustomElement:zf,decodeEntities:t=>t.replace(DT,(n,l)=>BT[l]),onError:gy,onWarn:Ex,comments:!1};function FT(t,n={}){const l=NT(t,n),p=go(l);return ST(Ly(l,0,[]),Mo(l,p))}function NT(t,n){const l=yr({},e0);let p;for(p in n)l[p]=n[p]===void 0?e0[p]:n[p];return{options:l,column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,onWarn:l.onWarn}}function Ly(t,n,l){const p=Rd(l),m=p?p.ns:0,y=[];for(;!KT(t,n,l);){const E=t.source;let C;if(n===0||n===1){if(!t.inVPre&&Si(E,t.options.delimiters[0]))C=GT(t,n);else if(n===0&&E[0]==="<")if(E.length===1)Br(t,5,1);else if(E[1]==="!")Si(E,"<!--")?C=VT(t):Si(E,"<!DOCTYPE")?C=xp(t):Si(E,"<![CDATA[")?m!==0?C=UT(t,l):(Br(t,1),C=xp(t)):(Br(t,11),C=xp(t));else if(E[1]==="/")if(E.length===2)Br(t,5,2);else if(E[2]===">"){Br(t,14,2),Gn(t,3);continue}else if(/[a-z]/i.test(E[2])){Br(t,23),Tg(t,ad.End,p);continue}else Br(t,12,2),C=xp(t);else/[a-z]/i.test(E[1])?(C=jT(t,l),Bl("COMPILER_NATIVE_TEMPLATE",t)&&C&&C.tag==="template"&&!C.props.some(P=>P.type===7&&Ox(P.name))&&(C=C.children)):E[1]==="?"?(Br(t,21,1),C=xp(t)):Br(t,12,1)}if(C||(C=$T(t,n)),xt(C))for(let P=0;P<C.length;P++)t0(y,C[P]);else t0(y,C)}let x=!1;if(n!==2&&n!==1){const E=t.options.whitespace!=="preserve";for(let C=0;C<y.length;C++){const P=y[C];if(P.type===2)if(t.inPre)P.content=P.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(P.content))E&&(P.content=P.content.replace(/[\t\r\n\f ]+/g," "));else{const B=y[C-1],U=y[C+1];!B||!U||E&&(B.type===3&&U.type===3||B.type===3&&U.type===1||B.type===1&&U.type===3||B.type===1&&U.type===1&&/[\r\n]/.test(P.content))?(x=!0,y[C]=null):P.content=" "}else P.type===3&&!t.options.comments&&(x=!0,y[C]=null)}if(t.inPre&&p&&t.options.isPreTag(p.tag)){const C=y[0];C&&C.type===2&&(C.content=C.content.replace(/^\r?\n/,""))}}return x?y.filter(Boolean):y}function t0(t,n){if(n.type===2){const l=Rd(t);if(l&&l.type===2&&l.loc.end.offset===n.loc.start.offset){l.content+=n.content,l.loc.end=n.loc.end,l.loc.source+=n.loc.source;return}}t.push(n)}function UT(t,n){Gn(t,9);const l=Ly(t,3,n);return t.source.length===0?Br(t,6):Gn(t,3),l}function VT(t){const n=go(t);let l;const p=/--(\!)?>/.exec(t.source);if(!p)l=t.source.slice(4),Gn(t,t.source.length),Br(t,7);else{p.index<=3&&Br(t,0),p[1]&&Br(t,10),l=t.source.slice(4,p.index);const m=t.source.slice(0,p.index);let y=1,x=0;for(;(x=m.indexOf("<!--",y))!==-1;)Gn(t,x-y+1),x+4<m.length&&Br(t,16),y=x+1;Gn(t,p.index+p[0].length-y+1)}return{type:3,content:l,loc:Mo(t,n)}}function xp(t){const n=go(t),l=t.source[1]==="?"?1:2;let p;const m=t.source.indexOf(">");return m===-1?(p=t.source.slice(l),Gn(t,t.source.length)):(p=t.source.slice(l,m),Gn(t,m+1)),{type:3,content:p,loc:Mo(t,n)}}function jT(t,n){const l=t.inPre,p=t.inVPre,m=Rd(n),y=Tg(t,ad.Start,m),x=t.inPre&&!l,E=t.inVPre&&!p;if(y.isSelfClosing||t.options.isVoidTag(y.tag))return x&&(t.inPre=!1),E&&(t.inVPre=!1),y;n.push(y);const C=t.options.getTextMode(y,m),P=Ly(t,C,n);n.pop();{const B=y.props.find(U=>U.type===6&&U.name==="inline-template");if(B&&Gp("COMPILER_INLINE_TEMPLATE",t,B.loc)){const U=Mo(t,y.loc.end);B.value={type:2,content:U.source,loc:U}}}if(y.children=P,Cg(t.source,y.tag))Tg(t,ad.End,m);else if(Br(t,24,0,y.loc.start),t.source.length===0&&y.tag.toLowerCase()==="script"){const B=P[0];B&&Si(B.loc.source,"<!--")&&Br(t,8)}return y.loc=Mo(t,y.loc.start),x&&(t.inPre=!1),E&&(t.inVPre=!1),y}var ad=(t=>(t[t.Start=0]="Start",t[t.End=1]="End",t))(ad||{});const Ox=Yi("if,else,else-if,for,slot");function Tg(t,n,l){const p=go(t),m=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),y=m[1],x=t.options.getNamespace(y,l);Gn(t,m[0].length),$p(t);const E=go(t),C=t.source;t.options.isPreTag(y)&&(t.inPre=!0);let P=r0(t,n);n===0&&!t.inVPre&&P.some(ee=>ee.type===7&&ee.name==="pre")&&(t.inVPre=!0,yr(t,E),t.source=C,P=r0(t,n).filter(ee=>ee.name!=="v-pre"));let B=!1;if(t.source.length===0?Br(t,9):(B=Si(t.source,"/>"),n===1&&B&&Br(t,4),Gn(t,B?2:1)),n===1)return;let U=0;return t.inVPre||(y==="slot"?U=2:y==="template"?P.some(ee=>ee.type===7&&Ox(ee.name))&&(U=3):qT(y,P,t)&&(U=1)),{type:1,ns:x,tag:y,tagType:U,props:P,isSelfClosing:B,children:[],loc:Mo(t,p),codegenNode:void 0}}function qT(t,n,l){const p=l.options;if(p.isCustomElement(t))return!1;if(t==="component"||/^[A-Z]/.test(t)||Mx(t)||p.isBuiltInComponent&&p.isBuiltInComponent(t)||p.isNativeTag&&!p.isNativeTag(t))return!0;for(let m=0;m<n.length;m++){const y=n[m];if(y.type===6){if(y.name==="is"&&y.value){if(y.value.content.startsWith("vue:"))return!0;if(Gp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}else{if(y.name==="is")return!0;if(y.name==="bind"&&Pl(y.arg,"is")&&Gp("COMPILER_IS_ON_ELEMENT",l,y.loc))return!0}}}function r0(t,n){const l=[],p=new Set;for(;t.source.length>0&&!Si(t.source,">")&&!Si(t.source,"/>");){if(Si(t.source,"/")){Br(t,22),Gn(t,1),$p(t);continue}n===1&&Br(t,3);const m=ZT(t,p);m.type===6&&m.value&&m.name==="class"&&(m.value.content=m.value.content.replace(/\s+/g," ").trim()),n===0&&l.push(m),/^[^\t\r\n\f />]/.test(t.source)&&Br(t,15),$p(t)}return l}function ZT(t,n){var l;const p=go(t),y=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];n.has(y)&&Br(t,2),n.add(y),y[0]==="="&&Br(t,19);{const C=/["'<]/g;let P;for(;P=C.exec(y);)Br(t,17,P.index)}Gn(t,y.length);let x;/^[\t\r\n\f ]*=/.test(t.source)&&($p(t),Gn(t,1),$p(t),x=HT(t),x||Br(t,13));const E=Mo(t,p);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(y)){const C=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(y);let P=Si(y,"."),B=C[1]||(P||Si(y,":")?"bind":Si(y,"@")?"on":"slot"),U;if(C[2]){const se=B==="slot",ne=y.lastIndexOf(C[2],y.length-(((l=C[3])==null?void 0:l.length)||0)),ve=Mo(t,n0(t,p,ne),n0(t,p,ne+C[2].length+(se&&C[3]||"").length));let fe=C[2],pe=!0;fe.startsWith("[")?(pe=!1,fe.endsWith("]")?fe=fe.slice(1,fe.length-1):(Br(t,27),fe=fe.slice(1))):se&&(fe+=C[3]||""),U={type:4,content:fe,isStatic:pe,constType:pe?3:0,loc:ve}}if(x&&x.isQuoted){const se=x.loc;se.start.offset++,se.start.column++,se.end=td(se.start,x.content),se.source=se.source.slice(1,-1)}const ee=C[3]?C[3].slice(1).split("."):[];return P&&ee.push("prop"),B==="bind"&&U&&ee.includes("sync")&&Gp("COMPILER_V_BIND_SYNC",t,E,U.loc.source)&&(B="model",ee.splice(ee.indexOf("sync"),1)),{type:7,name:B,exp:x&&{type:4,content:x.content,isStatic:!1,constType:0,loc:x.loc},arg:U,modifiers:ee,loc:E}}return!t.inVPre&&Si(y,"v-")&&Br(t,26),{type:6,name:y,value:x&&{type:2,content:x.content,loc:x.loc},loc:E}}function HT(t){const n=go(t);let l;const p=t.source[0],m=p==='"'||p==="'";if(m){Gn(t,1);const y=t.source.indexOf(p);y===-1?l=Mp(t,t.source.length,4):(l=Mp(t,y,4),Gn(t,1))}else{const y=/^[^\t\r\n\f >]+/.exec(t.source);if(!y)return;const x=/["'<=`]/g;let E;for(;E=x.exec(y[0]);)Br(t,18,E.index);l=Mp(t,y[0].length,4)}return{content:l,isQuoted:m,loc:Mo(t,n)}}function GT(t,n){const[l,p]=t.options.delimiters,m=t.source.indexOf(p,l.length);if(m===-1){Br(t,25);return}const y=go(t);Gn(t,l.length);const x=go(t),E=go(t),C=m-l.length,P=t.source.slice(0,C),B=Mp(t,C,n),U=B.trim(),ee=B.indexOf(U);ee>0&&rd(x,P,ee);const se=C-(B.length-U.length-ee);return rd(E,P,se),Gn(t,p.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:U,loc:Mo(t,x,E)},loc:Mo(t,y)}}function $T(t,n){const l=n===3?["]]>"]:["<",t.options.delimiters[0]];let p=t.source.length;for(let x=0;x<l.length;x++){const E=t.source.indexOf(l[x],1);E!==-1&&p>E&&(p=E)}const m=go(t);return{type:2,content:Mp(t,p,n),loc:Mo(t,m)}}function Mp(t,n,l){const p=t.source.slice(0,n);return Gn(t,n),l===2||l===3||!p.includes("&")?p:t.options.decodeEntities(p,l===4)}function go(t){const{column:n,line:l,offset:p}=t;return{column:n,line:l,offset:p}}function Mo(t,n,l){return l=l||go(t),{start:n,end:l,source:t.originalSource.slice(n.offset,l.offset)}}function Rd(t){return t[t.length-1]}function Si(t,n){return t.startsWith(n)}function Gn(t,n){const{source:l}=t;rd(t,l,n),t.source=l.slice(n)}function $p(t){const n=/^[\t\r\n\f ]+/.exec(t.source);n&&Gn(t,n[0].length)}function n0(t,n,l){return td(n,t.originalSource.slice(n.offset,l),l)}function Br(t,n,l,p=go(t)){l&&(p.offset+=l,p.column+=l),t.options.onError(sn(n,{start:p,end:p,source:""}))}function KT(t,n,l){const p=t.source;switch(n){case 0:if(Si(p,"</")){for(let m=l.length-1;m>=0;--m)if(Cg(p,l[m].tag))return!0}break;case 1:case 2:{const m=Rd(l);if(m&&Cg(p,m.tag))return!0;break}case 3:if(Si(p,"]]>"))return!0;break}return!p}function Cg(t,n){return Si(t,"</")&&t.slice(2,2+n.length).toLowerCase()===n.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+n.length]||">")}function WT(t,n){Df(t,n,Dx(t,t.children[0]))}function Dx(t,n){const{children:l}=t;return l.length===1&&n.type===1&&!id(n)}function Df(t,n,l=!1){const{children:p}=t,m=p.length;let y=0;for(let x=0;x<p.length;x++){const E=p[x];if(E.type===1&&E.tagType===0){const C=l?0:ko(E,n);if(C>0){if(C>=2){E.codegenNode.patchFlag="-1",E.codegenNode=n.hoist(E.codegenNode),y++;continue}}else{const P=E.codegenNode;if(P.type===13){const B=Ux(P);if((!B||B===512||B===1)&&Fx(E,n)>=2){const U=Nx(E);U&&(P.props=n.hoist(U))}P.dynamicProps&&(P.dynamicProps=n.hoist(P.dynamicProps))}}}if(E.type===1){const C=E.tagType===1;C&&n.scopes.vSlot++,Df(E,n),C&&n.scopes.vSlot--}else if(E.type===11)Df(E,n,E.children.length===1);else if(E.type===9)for(let C=0;C<E.branches.length;C++)Df(E.branches[C],n,E.branches[C].children.length===1)}y&&n.transformHoist&&n.transformHoist(p,n,t),y&&y===m&&t.type===1&&t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&xt(t.codegenNode.children)&&(t.codegenNode.children=n.hoist(rh(t.codegenNode.children)))}function ko(t,n){const{constantCache:l}=n;switch(t.type){case 1:if(t.tagType!==0)return 0;const p=l.get(t);if(p!==void 0)return p;const m=t.codegenNode;if(m.type!==13||m.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject")return 0;if(Ux(m))return l.set(t,0),0;{let E=3;const C=Fx(t,n);if(C===0)return l.set(t,0),0;C<E&&(E=C);for(let P=0;P<t.children.length;P++){const B=ko(t.children[P],n);if(B===0)return l.set(t,0),0;B<E&&(E=B)}if(E>1)for(let P=0;P<t.props.length;P++){const B=t.props[P];if(B.type===7&&B.name==="bind"&&B.exp){const U=ko(B.exp,n);if(U===0)return l.set(t,0),0;U<E&&(E=U)}}if(m.isBlock){for(let P=0;P<t.props.length;P++)if(t.props[P].type===7)return l.set(t,0),0;n.removeHelper(jl),n.removeHelper(fc(n.inSSR,m.isComponent)),m.isBlock=!1,n.helper(hc(n.inSSR,m.isComponent))}return l.set(t,E),E}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return ko(t.content,n);case 4:return t.constType;case 8:let x=3;for(let E=0;E<t.children.length;E++){const C=t.children[E];if(er(C)||zs(C))continue;const P=ko(C,n);if(P===0)return 0;P<x&&(x=P)}return x;default:return 0}}const XT=new Set([Cy,Ay,qp,th]);function Bx(t,n){if(t.type===14&&!er(t.callee)&&XT.has(t.callee)){const l=t.arguments[0];if(l.type===4)return ko(l,n);if(l.type===14)return Bx(l,n)}return 0}function Fx(t,n){let l=3;const p=Nx(t);if(p&&p.type===15){const{properties:m}=p;for(let y=0;y<m.length;y++){const{key:x,value:E}=m[y],C=ko(x,n);if(C===0)return C;C<l&&(l=C);let P;if(E.type===4?P=ko(E,n):E.type===14?P=Bx(E,n):P=0,P===0)return P;P<l&&(l=P)}}return l}function Nx(t){const n=t.codegenNode;if(n.type===13)return n.props}function Ux(t){const n=t.patchFlag;return n?parseInt(n,10):void 0}function JT(t,{filename:n="",prefixIdentifiers:l=!1,hoistStatic:p=!1,cacheHandlers:m=!1,nodeTransforms:y=[],directiveTransforms:x={},transformHoist:E=null,isBuiltInComponent:C=Di,isCustomElement:P=Di,expressionPlugins:B=[],scopeId:U=null,slotted:ee=!0,ssr:se=!1,inSSR:ne=!1,ssrCssVars:ve="",bindingMetadata:fe=Fr,inline:pe=!1,isTS:ue=!1,onError:be=gy,onWarn:_e=Ex,compatConfig:Oe}){const f=n.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),ke={selfName:f&&Hl(Nn(f[1])),prefixIdentifiers:l,hoistStatic:p,cacheHandlers:m,nodeTransforms:y,directiveTransforms:x,transformHoist:E,isBuiltInComponent:C,isCustomElement:P,expressionPlugins:B,scopeId:U,slotted:ee,ssr:se,inSSR:ne,ssrCssVars:ve,bindingMetadata:fe,inline:pe,isTS:ue,onError:be,onWarn:_e,compatConfig:Oe,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(Y){const Fe=ke.helpers.get(Y)||0;return ke.helpers.set(Y,Fe+1),Y},removeHelper(Y){const Fe=ke.helpers.get(Y);if(Fe){const ze=Fe-1;ze?ke.helpers.set(Y,ze):ke.helpers.delete(Y)}},helperString(Y){return`_${cc[ke.helper(Y)]}`},replaceNode(Y){ke.parent.children[ke.childIndex]=ke.currentNode=Y},removeNode(Y){const Fe=ke.parent.children,ze=Y?Fe.indexOf(Y):ke.currentNode?ke.childIndex:-1;!Y||Y===ke.currentNode?(ke.currentNode=null,ke.onNodeRemoved()):ke.childIndex>ze&&(ke.childIndex--,ke.onNodeRemoved()),ke.parent.children.splice(ze,1)},onNodeRemoved:()=>{},addIdentifiers(Y){},removeIdentifiers(Y){},hoist(Y){er(Y)&&(Y=sr(Y)),ke.hoists.push(Y);const Fe=sr(`_hoisted_${ke.hoists.length}`,!1,Y.loc,2);return Fe.hoisted=Y,Fe},cache(Y,Fe=!1){return TT(ke.cached++,Y,Fe)}};return ke.filters=new Set,ke}function YT(t,n){const l=JT(t,n);Od(t,l),n.hoistStatic&&WT(t,l),n.ssr||QT(t,l),t.helpers=new Set([...l.helpers.keys()]),t.components=[...l.components],t.directives=[...l.directives],t.imports=l.imports,t.hoists=l.hoists,t.temps=l.temps,t.cached=l.cached,t.filters=[...l.filters]}function QT(t,n){const{helper:l}=n,{children:p}=t;if(p.length===1){const m=p[0];if(Dx(t,m)&&m.codegenNode){const y=m.codegenNode;y.type===13&&My(y,n),t.codegenNode=y}else t.codegenNode=m}else if(p.length>1){let m=64;t.codegenNode=Zp(n,l(jp),void 0,t.children,m+"",void 0,void 0,!0,void 0,!1)}}function eC(t,n){let l=0;const p=()=>{l--};for(;l<t.children.length;l++){const m=t.children[l];er(m)||(n.parent=t,n.childIndex=l,n.onNodeRemoved=p,Od(m,n))}}function Od(t,n){n.currentNode=t;const{nodeTransforms:l}=n,p=[];for(let y=0;y<l.length;y++){const x=l[y](t,n);if(x&&(xt(x)?p.push(...x):p.push(x)),n.currentNode)t=n.currentNode;else return}switch(t.type){case 3:n.ssr||n.helper(eh);break;case 5:n.ssr||n.helper(zd);break;case 9:for(let y=0;y<t.branches.length;y++)Od(t.branches[y],n);break;case 10:case 11:case 1:case 0:eC(t,n);break}n.currentNode=t;let m=p.length;for(;m--;)p[m]()}function Vx(t,n){const l=er(t)?p=>p===t:p=>t.test(p);return(p,m)=>{if(p.type===1){const{props:y}=p;if(p.tagType===3&&y.some(LT))return;const x=[];for(let E=0;E<y.length;E++){const C=y[E];if(C.type===7&&l(C.name)){y.splice(E,1),E--;const P=n(p,C,m);P&&x.push(P)}}return x}}}const Dd="/*#__PURE__*/",jx=t=>`${cc[t]}: _${cc[t]}`;function i0(t,{mode:n="function",prefixIdentifiers:l=n==="module",sourceMap:p=!1,filename:m="template.vue.html",scopeId:y=null,optimizeImports:x=!1,runtimeGlobalName:E="Vue",runtimeModuleName:C="vue",ssrRuntimeModuleName:P="vue/server-renderer",ssr:B=!1,isTS:U=!1,inSSR:ee=!1}){const se={mode:n,prefixIdentifiers:l,sourceMap:p,filename:m,scopeId:y,optimizeImports:x,runtimeGlobalName:E,runtimeModuleName:C,ssrRuntimeModuleName:P,ssr:B,isTS:U,inSSR:ee,source:t.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(ve){return`_${cc[ve]}`},push(ve,fe){se.code+=ve},indent(){ne(++se.indentLevel)},deindent(ve=!1){ve?--se.indentLevel:ne(--se.indentLevel)},newline(){ne(se.indentLevel)}};function ne(ve){se.push(`
`+"  ".repeat(ve))}return se}function tC(t,n={}){const l=i0(t,n);n.onContextCreated&&n.onContextCreated(l);const{mode:p,push:m,prefixIdentifiers:y,indent:x,deindent:E,newline:C,scopeId:P,ssr:B}=l,U=Array.from(t.helpers),ee=U.length>0,se=!y&&p!=="module",ne=!1,ve=ne?i0(t,n):l;rC(t,ve);const fe=B?"ssrRender":"render",ue=(B?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(m(`function ${fe}(${ue}) {`),x(),se&&(m("with (_ctx) {"),x(),ee&&(m(`const { ${U.map(jx).join(", ")} } = _Vue`),m(`
`),C())),t.components.length&&(Gm(t.components,"component",l),(t.directives.length||t.temps>0)&&C()),t.directives.length&&(Gm(t.directives,"directive",l),t.temps>0&&C()),t.filters&&t.filters.length&&(C(),Gm(t.filters,"filter",l),C()),t.temps>0){m("let ");for(let be=0;be<t.temps;be++)m(`${be>0?", ":""}_temp${be}`)}return(t.components.length||t.directives.length||t.temps)&&(m(`
`),C()),B||m("return "),t.codegenNode?Ci(t.codegenNode,l):m("null"),se&&(E(),m("}")),E(),m("}"),{ast:t,code:l.code,preamble:ne?ve.code:"",map:l.map?l.map.toJSON():void 0}}function rC(t,n){const{ssr:l,prefixIdentifiers:p,push:m,newline:y,runtimeModuleName:x,runtimeGlobalName:E,ssrRuntimeModuleName:C}=n,P=E,B=Array.from(t.helpers);if(B.length>0&&(m(`const _Vue = ${P}
`),t.hoists.length)){const U=[vy,_y,eh,xy,Ax].filter(ee=>B.includes(ee)).map(jx).join(", ");m(`const { ${U} } = _Vue
`)}nC(t.hoists,n),y(),m("return ")}function Gm(t,n,{helper:l,push:p,newline:m,isTS:y}){const x=l(n==="filter"?Ey:n==="component"?by:wy);for(let E=0;E<t.length;E++){let C=t[E];const P=C.endsWith("__self");P&&(C=C.slice(0,-6)),p(`const ${Hp(C,n)} = ${x}(${JSON.stringify(C)}${P?", true":""})${y?"!":""}`),E<t.length-1&&m()}}function nC(t,n){if(!t.length)return;n.pure=!0;const{push:l,newline:p,helper:m,scopeId:y,mode:x}=n;p();for(let E=0;E<t.length;E++){const C=t[E];C&&(l(`const _hoisted_${E+1} = `),Ci(C,n),p())}n.pure=!1}function Ry(t,n){const l=t.length>3||!1;n.push("["),l&&n.indent(),nh(t,n,l),l&&n.deindent(),n.push("]")}function nh(t,n,l=!1,p=!0){const{push:m,newline:y}=n;for(let x=0;x<t.length;x++){const E=t[x];er(E)?m(E):xt(E)?Ry(E,n):Ci(E,n),x<t.length-1&&(l?(p&&m(","),y()):p&&m(", "))}}function Ci(t,n){if(er(t)){n.push(t);return}if(zs(t)){n.push(n.helper(t));return}switch(t.type){case 1:case 9:case 11:Ci(t.codegenNode,n);break;case 2:iC(t,n);break;case 4:qx(t,n);break;case 5:oC(t,n);break;case 12:Ci(t.codegenNode,n);break;case 8:Zx(t,n);break;case 3:sC(t,n);break;case 13:lC(t,n);break;case 14:cC(t,n);break;case 15:pC(t,n);break;case 17:hC(t,n);break;case 18:fC(t,n);break;case 19:dC(t,n);break;case 20:mC(t,n);break;case 21:nh(t.body,n,!0,!1);break}}function iC(t,n){n.push(JSON.stringify(t.content),t)}function qx(t,n){const{content:l,isStatic:p}=t;n.push(p?JSON.stringify(l):l,t)}function oC(t,n){const{push:l,helper:p,pure:m}=n;m&&l(Dd),l(`${p(zd)}(`),Ci(t.content,n),l(")")}function Zx(t,n){for(let l=0;l<t.children.length;l++){const p=t.children[l];er(p)?n.push(p):Ci(p,n)}}function aC(t,n){const{push:l}=n;if(t.type===8)l("["),Zx(t,n),l("]");else if(t.isStatic){const p=zy(t.content)?t.content:JSON.stringify(t.content);l(p,t)}else l(`[${t.content}]`,t)}function sC(t,n){const{push:l,helper:p,pure:m}=n;m&&l(Dd),l(`${p(eh)}(${JSON.stringify(t.content)})`,t)}function lC(t,n){const{push:l,helper:p,pure:m}=n,{tag:y,props:x,children:E,patchFlag:C,dynamicProps:P,directives:B,isBlock:U,disableTracking:ee,isComponent:se}=t;B&&l(p(Sy)+"("),U&&l(`(${p(jl)}(${ee?"true":""}), `),m&&l(Dd);const ne=U?fc(n.inSSR,se):hc(n.inSSR,se);l(p(ne)+"(",t),nh(uC([y,x,E,C,P]),n),l(")"),U&&l(")"),B&&(l(", "),Ci(B,n),l(")"))}function uC(t){let n=t.length;for(;n--&&t[n]==null;);return t.slice(0,n+1).map(l=>l||"null")}function cC(t,n){const{push:l,helper:p,pure:m}=n,y=er(t.callee)?t.callee:p(t.callee);m&&l(Dd),l(y+"(",t),nh(t.arguments,n),l(")")}function pC(t,n){const{push:l,indent:p,deindent:m,newline:y}=n,{properties:x}=t;if(!x.length){l("{}",t);return}const E=x.length>1||!1;l(E?"{":"{ "),E&&p();for(let C=0;C<x.length;C++){const{key:P,value:B}=x[C];aC(P,n),l(": "),Ci(B,n),C<x.length-1&&(l(","),y())}E&&m(),l(E?"}":" }")}function hC(t,n){Ry(t.elements,n)}function fC(t,n){const{push:l,indent:p,deindent:m}=n,{params:y,returns:x,body:E,newline:C,isSlot:P}=t;P&&l(`_${cc[ky]}(`),l("(",t),xt(y)?nh(y,n):y&&Ci(y,n),l(") => "),(C||E)&&(l("{"),p()),x?(C&&l("return "),xt(x)?Ry(x,n):Ci(x,n)):E&&Ci(E,n),(C||E)&&(m(),l("}")),P&&(t.isNonScopedSlot&&l(", undefined, true"),l(")"))}function dC(t,n){const{test:l,consequent:p,alternate:m,newline:y}=t,{push:x,indent:E,deindent:C,newline:P}=n;if(l.type===4){const U=!zy(l.content);U&&x("("),qx(l,n),U&&x(")")}else x("("),Ci(l,n),x(")");y&&E(),n.indentLevel++,y||x(" "),x("? "),Ci(p,n),n.indentLevel--,y&&P(),y||x(" "),x(": ");const B=m.type===19;B||n.indentLevel++,Ci(m,n),B||n.indentLevel--,y&&C(!0)}function mC(t,n){const{push:l,helper:p,indent:m,deindent:y,newline:x}=n;l(`_cache[${t.index}] || (`),t.isVNode&&(m(),l(`${p(ed)}(-1),`),x()),l(`_cache[${t.index}] = `),Ci(t.value,n),t.isVNode&&(l(","),x(),l(`${p(ed)}(1),`),x(),l(`_cache[${t.index}]`),y()),l(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const gC=Vx(/^(if|else|else-if)$/,(t,n,l)=>yC(t,n,l,(p,m,y)=>{const x=l.parent.children;let E=x.indexOf(p),C=0;for(;E-->=0;){const P=x[E];P&&P.type===9&&(C+=P.branches.length)}return()=>{if(y)p.codegenNode=a0(m,C,l);else{const P=vC(p.codegenNode);P.alternate=a0(m,C+p.branches.length-1,l)}}}));function yC(t,n,l,p){if(n.name!=="else"&&(!n.exp||!n.exp.content.trim())){const m=n.exp?n.exp.loc:t.loc;l.onError(sn(28,n.loc)),n.exp=sr("true",!1,m)}if(n.name==="if"){const m=o0(t,n),y={type:9,loc:t.loc,branches:[m]};if(l.replaceNode(y),p)return p(y,m,!0)}else{const m=l.parent.children;let y=m.indexOf(t);for(;y-->=-1;){const x=m[y];if(x&&x.type===3){l.removeNode(x);continue}if(x&&x.type===2&&!x.content.trim().length){l.removeNode(x);continue}if(x&&x.type===9){n.name==="else-if"&&x.branches[x.branches.length-1].condition===void 0&&l.onError(sn(30,t.loc)),l.removeNode();const E=o0(t,n);x.branches.push(E);const C=p&&p(x,E,!1);Od(E,l),C&&C(),l.currentNode=null}else l.onError(sn(30,t.loc));break}}}function o0(t,n){const l=t.tagType===3;return{type:10,loc:t.loc,condition:n.name==="else"?void 0:n.exp,children:l&&!Ao(t,"for")?t.children:[t],userKey:Ld(t,"key"),isTemplateIf:l}}function a0(t,n,l){return t.condition?Sg(t.condition,s0(t,n,l),Bn(l.helper(eh),['""',"true"])):s0(t,n,l)}function s0(t,n,l){const{helper:p}=l,m=En("key",sr(`${n}`,!1,yo,2)),{children:y}=t,x=y[0];if(y.length!==1||x.type!==1)if(y.length===1&&x.type===11){const C=x.codegenNode;return od(C,m,l),C}else{let C=64;return Zp(l,p(jp),Io([m]),y,C+"",void 0,void 0,!0,!1,!1,t.loc)}else{const C=x.codegenNode,P=OT(C);return P.type===13&&My(P,l),od(P,m,l),C}}function vC(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const _C=Vx("for",(t,n,l)=>{const{helper:p,removeHelper:m}=l;return xC(t,n,l,y=>{const x=Bn(p(Ty),[y.source]),E=nd(t),C=Ao(t,"memo"),P=Ld(t,"key"),B=P&&(P.type===6?sr(P.value.content,!0):P.exp),U=P?En("key",B):null,ee=y.source.type===4&&y.source.constType>0,se=ee?64:P?128:256;return y.codegenNode=Zp(l,p(jp),void 0,x,se+"",void 0,void 0,!0,!ee,!1,t.loc),()=>{let ne;const{children:ve}=y,fe=ve.length!==1||ve[0].type!==1,pe=id(t)?t:E&&t.children.length===1&&id(t.children[0])?t.children[0]:null;if(pe?(ne=pe.codegenNode,E&&U&&od(ne,U,l)):fe?ne=Zp(l,p(jp),U?Io([U]):void 0,t.children,"64",void 0,void 0,!0,void 0,!1):(ne=ve[0].codegenNode,E&&U&&od(ne,U,l),ne.isBlock!==!ee&&(ne.isBlock?(m(jl),m(fc(l.inSSR,ne.isComponent))):m(hc(l.inSSR,ne.isComponent))),ne.isBlock=!ee,ne.isBlock?(p(jl),p(fc(l.inSSR,ne.isComponent))):p(hc(l.inSSR,ne.isComponent))),C){const ue=pc(Ag(y.parseResult,[sr("_cached")]));ue.body=CT([Zo(["const _memo = (",C.exp,")"]),Zo(["if (_cached",...B?[" && _cached.key === ",B]:[],` && ${l.helperString(Px)}(_cached, _memo)) return _cached`]),Zo(["const _item = ",ne]),sr("_item.memo = _memo"),sr("return _item")]),x.arguments.push(ue,sr("_cache"),sr(String(l.cached++)))}else x.arguments.push(pc(Ag(y.parseResult),ne,!0))}})});function xC(t,n,l,p){if(!n.exp){l.onError(sn(31,n.loc));return}const m=Hx(n.exp);if(!m){l.onError(sn(32,n.loc));return}const{addIdentifiers:y,removeIdentifiers:x,scopes:E}=l,{source:C,value:P,key:B,index:U}=m,ee={type:11,loc:n.loc,source:C,valueAlias:P,keyAlias:B,objectIndexAlias:U,parseResult:m,children:nd(t)?t.children:[t]};l.replaceNode(ee),E.vFor++;const se=p&&p(ee);return()=>{E.vFor--,se&&se()}}const bC=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,l0=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,wC=/^\(|\)$/g;function Hx(t,n){const l=t.loc,p=t.content,m=p.match(bC);if(!m)return;const[,y,x]=m,E={source:If(l,x.trim(),p.indexOf(x,y.length)),value:void 0,key:void 0,index:void 0};let C=y.trim().replace(wC,"").trim();const P=y.indexOf(C),B=C.match(l0);if(B){C=C.replace(l0,"").trim();const U=B[1].trim();let ee;if(U&&(ee=p.indexOf(U,P+C.length),E.key=If(l,U,ee)),B[2]){const se=B[2].trim();se&&(E.index=If(l,se,p.indexOf(se,E.key?ee+U.length:P+C.length)))}}return C&&(E.value=If(l,C,P)),E}function If(t,n,l){return sr(n,!1,Lx(t,l,n.length))}function Ag({value:t,key:n,index:l},p=[]){return EC([t,n,l,...p])}function EC(t){let n=t.length;for(;n--&&!t[n];);return t.slice(0,n+1).map((l,p)=>l||sr("_".repeat(p+1),!1))}const u0=sr("undefined",!1),SC=(t,n)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const l=Ao(t,"slot");if(l)return l.exp,n.scopes.vSlot++,()=>{n.scopes.vSlot--}}},TC=(t,n,l)=>pc(t,n,!1,!0,n.length?n[0].loc:l);function CC(t,n,l=TC){n.helper(ky);const{children:p,loc:m}=t,y=[],x=[];let E=n.scopes.vSlot>0||n.scopes.vFor>0;const C=Ao(t,"slot",!0);if(C){const{arg:fe,exp:pe}=C;fe&&!Xi(fe)&&(E=!0),y.push(En(fe||sr("default",!0),l(pe,p,m)))}let P=!1,B=!1;const U=[],ee=new Set;let se=0;for(let fe=0;fe<p.length;fe++){const pe=p[fe];let ue;if(!nd(pe)||!(ue=Ao(pe,"slot",!0))){pe.type!==3&&U.push(pe);continue}if(C){n.onError(sn(37,ue.loc));break}P=!0;const{children:be,loc:_e}=pe,{arg:Oe=sr("default",!0),exp:f,loc:ke}=ue;let Y;Xi(Oe)?Y=Oe?Oe.content:"default":E=!0;const Fe=l(f,be,_e);let ze,Xe,xe;if(ze=Ao(pe,"if"))E=!0,x.push(Sg(ze.exp,kf(Oe,Fe,se++),u0));else if(Xe=Ao(pe,/^else(-if)?$/,!0)){let mt=fe,et;for(;mt--&&(et=p[mt],et.type===3););if(et&&nd(et)&&Ao(et,"if")){p.splice(fe,1),fe--;let $t=x[x.length-1];for(;$t.alternate.type===19;)$t=$t.alternate;$t.alternate=Xe.exp?Sg(Xe.exp,kf(Oe,Fe,se++),u0):kf(Oe,Fe,se++)}else n.onError(sn(30,Xe.loc))}else if(xe=Ao(pe,"for")){E=!0;const mt=xe.parseResult||Hx(xe.exp);mt?x.push(Bn(n.helper(Ty),[mt.source,pc(Ag(mt),kf(Oe,Fe),!0)])):n.onError(sn(32,xe.loc))}else{if(Y){if(ee.has(Y)){n.onError(sn(38,ke));continue}ee.add(Y),Y==="default"&&(B=!0)}y.push(En(Oe,Fe))}}if(!C){const fe=(pe,ue)=>{const be=l(pe,ue,m);return n.compatConfig&&(be.isNonScopedSlot=!0),En("default",be)};P?U.length&&U.some(pe=>Gx(pe))&&(B?n.onError(sn(39,U[0].loc)):y.push(fe(void 0,U))):y.push(fe(void 0,p))}const ne=E?2:Bf(t.children)?3:1;let ve=Io(y.concat(En("_",sr(ne+"",!1))),m);return x.length&&(ve=Bn(n.helper(kx),[ve,rh(x)])),{slots:ve,hasDynamicSlots:E}}function kf(t,n,l){const p=[En("name",t),En("fn",n)];return l!=null&&p.push(En("key",sr(String(l),!0))),Io(p)}function Bf(t){for(let n=0;n<t.length;n++){const l=t[n];switch(l.type){case 1:if(l.tagType===2||Bf(l.children))return!0;break;case 9:if(Bf(l.branches))return!0;break;case 10:case 11:if(Bf(l.children))return!0;break}}return!1}function Gx(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():Gx(t.content)}const $x=new WeakMap,AC=(t,n)=>function(){if(t=n.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:p,props:m}=t,y=t.tagType===1;let x=y?IC(t,n):`"${p}"`;const E=Nr(x)&&x.callee===Yf;let C,P,B,U=0,ee,se,ne,ve=E||x===Pp||x===yy||!y&&(p==="svg"||p==="foreignObject");if(m.length>0){const fe=Kx(t,n,void 0,y,E);C=fe.props,U=fe.patchFlag,se=fe.dynamicPropNames;const pe=fe.directives;ne=pe&&pe.length?rh(pe.map(ue=>PC(ue,n))):void 0,fe.shouldUseBlock&&(ve=!0)}if(t.children.length>0)if(x===Jf&&(ve=!0,U|=1024),y&&x!==Pp&&x!==Jf){const{slots:pe,hasDynamicSlots:ue}=CC(t,n);P=pe,ue&&(U|=1024)}else if(t.children.length===1&&x!==Pp){const pe=t.children[0],ue=pe.type,be=ue===5||ue===8;be&&ko(pe,n)===0&&(U|=1),be||ue===2?P=pe:P=t.children}else P=t.children;U!==0&&(B=String(U),se&&se.length&&(ee=MC(se))),t.codegenNode=Zp(n,x,C,P,B,ee,ne,!!ve,!1,y,t.loc)};function IC(t,n,l=!1){let{tag:p}=t;const m=Ig(p),y=Ld(t,"is");if(y)if(m||Bl("COMPILER_IS_ON_ELEMENT",n)){const C=y.type===6?y.value&&sr(y.value.content,!0):y.exp;if(C)return Bn(n.helper(Yf),[C])}else y.type===6&&y.value.content.startsWith("vue:")&&(p=y.value.content.slice(4));const x=!m&&Ao(t,"is");if(x&&x.exp)return Bn(n.helper(Yf),[x.exp]);const E=Mx(p)||n.isBuiltInComponent(p);return E?(l||n.helper(E),E):(n.helper(by),n.components.add(p),Hp(p,"component"))}function Kx(t,n,l=t.props,p,m,y=!1){const{tag:x,loc:E,children:C}=t;let P=[];const B=[],U=[],ee=C.length>0;let se=!1,ne=0,ve=!1,fe=!1,pe=!1,ue=!1,be=!1,_e=!1;const Oe=[],f=Fe=>{P.length&&(B.push(Io(c0(P),E)),P=[]),Fe&&B.push(Fe)},ke=({key:Fe,value:ze})=>{if(Xi(Fe)){const Xe=Fe.content,xe=ql(Xe);if(xe&&(!p||m)&&Xe.toLowerCase()!=="onclick"&&Xe!=="onUpdate:modelValue"&&!Ml(Xe)&&(ue=!0),xe&&Ml(Xe)&&(_e=!0),ze.type===20||(ze.type===4||ze.type===8)&&ko(ze,n)>0)return;Xe==="ref"?ve=!0:Xe==="class"?fe=!0:Xe==="style"?pe=!0:Xe!=="key"&&!Oe.includes(Xe)&&Oe.push(Xe),p&&(Xe==="class"||Xe==="style")&&!Oe.includes(Xe)&&Oe.push(Xe)}else be=!0};for(let Fe=0;Fe<l.length;Fe++){const ze=l[Fe];if(ze.type===6){const{loc:Xe,name:xe,value:mt}=ze;let et=!0;if(xe==="ref"&&(ve=!0,n.scopes.vFor>0&&P.push(En(sr("ref_for",!0),sr("true")))),xe==="is"&&(Ig(x)||mt&&mt.content.startsWith("vue:")||Bl("COMPILER_IS_ON_ELEMENT",n)))continue;P.push(En(sr(xe,!0,Lx(Xe,0,xe.length)),sr(mt?mt.content:"",et,mt?mt.loc:Xe)))}else{const{name:Xe,arg:xe,exp:mt,loc:et}=ze,$t=Xe==="bind",Rt=Xe==="on";if(Xe==="slot"){p||n.onError(sn(40,et));continue}if(Xe==="once"||Xe==="memo"||Xe==="is"||$t&&Pl(xe,"is")&&(Ig(x)||Bl("COMPILER_IS_ON_ELEMENT",n))||Rt&&y)continue;if(($t&&Pl(xe,"key")||Rt&&ee&&Pl(xe,"vue:before-update"))&&(se=!0),$t&&Pl(xe,"ref")&&n.scopes.vFor>0&&P.push(En(sr("ref_for",!0),sr("true"))),!xe&&($t||Rt)){if(be=!0,mt)if($t){if(f(),Bl("COMPILER_V_BIND_OBJECT_ORDER",n)){B.unshift(mt);continue}B.push(mt)}else f({type:14,loc:et,callee:n.helper(Iy),arguments:p?[mt]:[mt,"true"]});else n.onError(sn($t?34:35,et));continue}const tr=n.directiveTransforms[Xe];if(tr){const{props:Ot,needRuntime:mn}=tr(ze,t,n);!y&&Ot.forEach(ke),Rt&&xe&&!Xi(xe)?f(Io(Ot,E)):P.push(...Ot),mn&&(U.push(ze),zs(mn)&&$x.set(ze,mn))}else H2(Xe)||(U.push(ze),ee&&(se=!0))}}let Y;if(B.length?(f(),B.length>1?Y=Bn(n.helper(Qf),B,E):Y=B[0]):P.length&&(Y=Io(c0(P),E)),be?ne|=16:(fe&&!p&&(ne|=2),pe&&!p&&(ne|=4),Oe.length&&(ne|=8),ue&&(ne|=32)),!se&&(ne===0||ne===32)&&(ve||_e||U.length>0)&&(ne|=512),!n.inSSR&&Y)switch(Y.type){case 15:let Fe=-1,ze=-1,Xe=!1;for(let et=0;et<Y.properties.length;et++){const $t=Y.properties[et].key;Xi($t)?$t.content==="class"?Fe=et:$t.content==="style"&&(ze=et):$t.isHandlerKey||(Xe=!0)}const xe=Y.properties[Fe],mt=Y.properties[ze];Xe?Y=Bn(n.helper(qp),[Y]):(xe&&!Xi(xe.value)&&(xe.value=Bn(n.helper(Cy),[xe.value])),mt&&(pe||mt.value.type===4&&mt.value.content.trim()[0]==="["||mt.value.type===17)&&(mt.value=Bn(n.helper(Ay),[mt.value])));break;case 14:break;default:Y=Bn(n.helper(qp),[Bn(n.helper(th),[Y])]);break}return{props:Y,directives:U,patchFlag:ne,dynamicPropNames:Oe,shouldUseBlock:se}}function c0(t){const n=new Map,l=[];for(let p=0;p<t.length;p++){const m=t[p];if(m.key.type===8||!m.key.isStatic){l.push(m);continue}const y=m.key.content,x=n.get(y);x?(y==="style"||y==="class"||ql(y))&&kC(x,m):(n.set(y,m),l.push(m))}return l}function kC(t,n){t.value.type===17?t.value.elements.push(n.value):t.value=rh([t.value,n.value],t.loc)}function PC(t,n){const l=[],p=$x.get(t);p?l.push(n.helperString(p)):(n.helper(wy),n.directives.add(t.name),l.push(Hp(t.name,"directive")));const{loc:m}=t;if(t.exp&&l.push(t.exp),t.arg&&(t.exp||l.push("void 0"),l.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||l.push("void 0"),l.push("void 0"));const y=sr("true",!1,m);l.push(Io(t.modifiers.map(x=>En(x,y)),m))}return rh(l,t.loc)}function MC(t){let n="[";for(let l=0,p=t.length;l<p;l++)n+=JSON.stringify(t[l]),l<p-1&&(n+=", ");return n+"]"}function Ig(t){return t==="component"||t==="Component"}const zC=(t,n)=>{if(id(t)){const{children:l,loc:p}=t,{slotName:m,slotProps:y}=LC(t,n),x=[n.prefixIdentifiers?"_ctx.$slots":"$slots",m,"{}","undefined","true"];let E=2;y&&(x[2]=y,E=3),l.length&&(x[3]=pc([],l,!1,!1,p),E=4),n.scopeId&&!n.slotted&&(E=5),x.splice(E),t.codegenNode=Bn(n.helper(Ix),x,p)}};function LC(t,n){let l='"default"',p;const m=[];for(let y=0;y<t.props.length;y++){const x=t.props[y];x.type===6?x.value&&(x.name==="name"?l=JSON.stringify(x.value.content):(x.name=Nn(x.name),m.push(x))):x.name==="bind"&&Pl(x.arg,"name")?x.exp&&(l=x.exp):(x.name==="bind"&&x.arg&&Xi(x.arg)&&(x.arg.content=Nn(x.arg.content)),m.push(x))}if(m.length>0){const{props:y,directives:x}=Kx(t,n,m,!1,!1);p=y,x.length&&n.onError(sn(36,x[0].loc))}return{slotName:l,slotProps:p}}const RC=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Wx=(t,n,l,p)=>{const{loc:m,modifiers:y,arg:x}=t;!t.exp&&!y.length&&l.onError(sn(35,m));let E;if(x.type===4)if(x.isStatic){let U=x.content;U.startsWith("vue:")&&(U=`vnode-${U.slice(4)}`);const ee=n.tagType!==0||U.startsWith("vnode")||!/[A-Z]/.test(U)?Qu(Nn(U)):`on:${U}`;E=sr(ee,!0,x.loc)}else E=Zo([`${l.helperString(Eg)}(`,x,")"]);else E=x,E.children.unshift(`${l.helperString(Eg)}(`),E.children.push(")");let C=t.exp;C&&!C.content.trim()&&(C=void 0);let P=l.cacheHandlers&&!C&&!l.inVOnce;if(C){const U=zx(C.content),ee=!(U||RC.test(C.content)),se=C.content.includes(";");(ee||P&&U)&&(C=Zo([`${ee?"$event":"(...args)"} => ${se?"{":"("}`,C,se?"}":")"]))}let B={props:[En(E,C||sr("() => {}",!1,m))]};return p&&(B=p(B)),P&&(B.props[0].value=l.cache(B.props[0].value)),B.props.forEach(U=>U.key.isHandlerKey=!0),B},OC=(t,n,l)=>{const{exp:p,modifiers:m,loc:y}=t,x=t.arg;return x.type!==4?(x.children.unshift("("),x.children.push(') || ""')):x.isStatic||(x.content=`${x.content} || ""`),m.includes("camel")&&(x.type===4?x.isStatic?x.content=Nn(x.content):x.content=`${l.helperString(wg)}(${x.content})`:(x.children.unshift(`${l.helperString(wg)}(`),x.children.push(")"))),l.inSSR||(m.includes("prop")&&p0(x,"."),m.includes("attr")&&p0(x,"^")),!p||p.type===4&&!p.content.trim()?(l.onError(sn(34,y)),{props:[En(x,sr("",!0,y))]}):{props:[En(x,p)]}},p0=(t,n)=>{t.type===4?t.isStatic?t.content=n+t.content:t.content=`\`${n}\${${t.content}}\``:(t.children.unshift(`'${n}' + (`),t.children.push(")"))},DC=(t,n)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const l=t.children;let p,m=!1;for(let y=0;y<l.length;y++){const x=l[y];if(Hm(x)){m=!0;for(let E=y+1;E<l.length;E++){const C=l[E];if(Hm(C))p||(p=l[y]=Zo([x],x.loc)),p.children.push(" + ",C),l.splice(E,1),E--;else{p=void 0;break}}}}if(!(!m||l.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(y=>y.type===7&&!n.directiveTransforms[y.name])&&t.tag!=="template")))for(let y=0;y<l.length;y++){const x=l[y];if(Hm(x)||x.type===8){const E=[];(x.type!==2||x.content!==" ")&&E.push(x),!n.ssr&&ko(x,n)===0&&E.push("1"),l[y]={type:12,content:x,loc:x.loc,codegenNode:Bn(n.helper(xy),E)}}}}},h0=new WeakSet,BC=(t,n)=>{if(t.type===1&&Ao(t,"once",!0))return h0.has(t)||n.inVOnce||n.inSSR?void 0:(h0.add(t),n.inVOnce=!0,n.helper(ed),()=>{n.inVOnce=!1;const l=n.currentNode;l.codegenNode&&(l.codegenNode=n.cache(l.codegenNode,!0))})},Xx=(t,n,l)=>{const{exp:p,arg:m}=t;if(!p)return l.onError(sn(41,t.loc)),Pf();const y=p.loc.source,x=p.type===4?p.content:y,E=l.bindingMetadata[y];if(E==="props"||E==="props-aliased")return l.onError(sn(44,p.loc)),Pf();const C=!1;if(!x.trim()||!zx(x)&&!C)return l.onError(sn(42,p.loc)),Pf();const P=m||sr("modelValue",!0),B=m?Xi(m)?`onUpdate:${Nn(m.content)}`:Zo(['"onUpdate:" + ',m]):"onUpdate:modelValue";let U;const ee=l.isTS?"($event: any)":"$event";U=Zo([`${ee} => ((`,p,") = $event)"]);const se=[En(P,t.exp),En(B,U)];if(t.modifiers.length&&n.tagType===1){const ne=t.modifiers.map(fe=>(zy(fe)?fe:JSON.stringify(fe))+": true").join(", "),ve=m?Xi(m)?`${m.content}Modifiers`:Zo([m,' + "Modifiers"']):"modelModifiers";se.push(En(ve,sr(`{ ${ne} }`,!1,t.loc,2)))}return Pf(se)};function Pf(t=[]){return{props:t}}const FC=/[\w).+\-_$\]]/,NC=(t,n)=>{Bl("COMPILER_FILTER",n)&&(t.type===5&&sd(t.content,n),t.type===1&&t.props.forEach(l=>{l.type===7&&l.name!=="for"&&l.exp&&sd(l.exp,n)}))};function sd(t,n){if(t.type===4)f0(t,n);else for(let l=0;l<t.children.length;l++){const p=t.children[l];typeof p=="object"&&(p.type===4?f0(p,n):p.type===8?sd(t,n):p.type===5&&sd(p.content,n))}}function f0(t,n){const l=t.content;let p=!1,m=!1,y=!1,x=!1,E=0,C=0,P=0,B=0,U,ee,se,ne,ve=[];for(se=0;se<l.length;se++)if(ee=U,U=l.charCodeAt(se),p)U===39&&ee!==92&&(p=!1);else if(m)U===34&&ee!==92&&(m=!1);else if(y)U===96&&ee!==92&&(y=!1);else if(x)U===47&&ee!==92&&(x=!1);else if(U===124&&l.charCodeAt(se+1)!==124&&l.charCodeAt(se-1)!==124&&!E&&!C&&!P)ne===void 0?(B=se+1,ne=l.slice(0,se).trim()):fe();else{switch(U){case 34:m=!0;break;case 39:p=!0;break;case 96:y=!0;break;case 40:P++;break;case 41:P--;break;case 91:C++;break;case 93:C--;break;case 123:E++;break;case 125:E--;break}if(U===47){let pe=se-1,ue;for(;pe>=0&&(ue=l.charAt(pe),ue===" ");pe--);(!ue||!FC.test(ue))&&(x=!0)}}ne===void 0?ne=l.slice(0,se).trim():B!==0&&fe();function fe(){ve.push(l.slice(B,se).trim()),B=se+1}if(ve.length){for(se=0;se<ve.length;se++)ne=UC(ne,ve[se],n);t.content=ne}}function UC(t,n,l){l.helper(Ey);const p=n.indexOf("(");if(p<0)return l.filters.add(n),`${Hp(n,"filter")}(${t})`;{const m=n.slice(0,p),y=n.slice(p+1);return l.filters.add(m),`${Hp(m,"filter")}(${t}${y!==")"?","+y:y}`}}const d0=new WeakSet,VC=(t,n)=>{if(t.type===1){const l=Ao(t,"memo");return!l||d0.has(t)?void 0:(d0.add(t),()=>{const p=t.codegenNode||n.currentNode.codegenNode;p&&p.type===13&&(t.tagType!==1&&My(p,n),t.codegenNode=Bn(n.helper(Py),[l.exp,pc(void 0,p),"_cache",String(n.cached++)]))})}};function jC(t){return[[BC,gC,VC,_C,NC,zC,AC,SC,DC],{on:Wx,bind:OC,model:Xx}]}function qC(t,n={}){const l=n.onError||gy,p=n.mode==="module";n.prefixIdentifiers===!0?l(sn(47)):p&&l(sn(48));const m=!1;n.cacheHandlers&&l(sn(49)),n.scopeId&&!p&&l(sn(50));const y=er(t)?FT(t,n):t,[x,E]=jC();return YT(y,yr({},n,{prefixIdentifiers:m,nodeTransforms:[...x,...n.nodeTransforms||[]],directiveTransforms:yr({},E,n.directiveTransforms||{})})),tC(y,yr({},n,{prefixIdentifiers:m}))}const ZC=()=>({props:[]}),Jx=Symbol(""),Yx=Symbol(""),Qx=Symbol(""),eb=Symbol(""),kg=Symbol(""),tb=Symbol(""),rb=Symbol(""),nb=Symbol(""),ib=Symbol(""),ob=Symbol("");ET({[Jx]:"vModelRadio",[Yx]:"vModelCheckbox",[Qx]:"vModelText",[eb]:"vModelSelect",[kg]:"vModelDynamic",[tb]:"withModifiers",[rb]:"withKeys",[nb]:"vShow",[ib]:"Transition",[ob]:"TransitionGroup"});let $u;function HC(t,n=!1){return $u||($u=document.createElement("div")),n?($u.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,$u.children[0].getAttribute("foo")):($u.innerHTML=t,$u.textContent)}const GC=Yi("style,iframe,script,noscript",!0),$C={isVoidTag:oE,isNativeTag:t=>nE(t)||iE(t),isPreTag:t=>t==="pre",decodeEntities:HC,isBuiltInComponent:t=>{if(Xu(t,"Transition"))return ib;if(Xu(t,"TransitionGroup"))return ob},getNamespace(t,n){let l=n?n.ns:0;if(n&&l===2)if(n.tag==="annotation-xml"){if(t==="svg")return 1;n.props.some(p=>p.type===6&&p.name==="encoding"&&p.value!=null&&(p.value.content==="text/html"||p.value.content==="application/xhtml+xml"))&&(l=0)}else/^m(?:[ions]|text)$/.test(n.tag)&&t!=="mglyph"&&t!=="malignmark"&&(l=0);else n&&l===1&&(n.tag==="foreignObject"||n.tag==="desc"||n.tag==="title")&&(l=0);if(l===0){if(t==="svg")return 1;if(t==="math")return 2}return l},getTextMode({tag:t,ns:n}){if(n===0){if(t==="textarea"||t==="title")return 1;if(GC(t))return 2}return 0}},KC=t=>{t.type===1&&t.props.forEach((n,l)=>{n.type===6&&n.name==="style"&&n.value&&(t.props[l]={type:7,name:"bind",arg:sr("style",!0,n.loc),exp:WC(n.value.content,n.loc),modifiers:[],loc:n.loc})})},WC=(t,n)=>{const l=N0(t);return sr(JSON.stringify(l),!1,n,3)};function Ms(t,n){return sn(t,n)}const XC=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ms(53,m)),n.children.length&&(l.onError(Ms(54,m)),n.children.length=0),{props:[En(sr("innerHTML",!0,m),p||sr("",!0))]}},JC=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ms(55,m)),n.children.length&&(l.onError(Ms(56,m)),n.children.length=0),{props:[En(sr("textContent",!0),p?ko(p,l)>0?p:Bn(l.helperString(zd),[p],m):sr("",!0))]}},YC=(t,n,l)=>{const p=Xx(t,n,l);if(!p.props.length||n.tagType===1)return p;t.arg&&l.onError(Ms(58,t.arg.loc));const{tag:m}=n,y=l.isCustomElement(m);if(m==="input"||m==="textarea"||m==="select"||y){let x=Qx,E=!1;if(m==="input"||y){const C=Ld(n,"type");if(C){if(C.type===7)x=kg;else if(C.value)switch(C.value.content){case"radio":x=Jx;break;case"checkbox":x=Yx;break;case"file":E=!0,l.onError(Ms(59,t.loc));break}}else zT(n)&&(x=kg)}else m==="select"&&(x=eb);E||(p.needRuntime=l.helper(x))}else l.onError(Ms(57,t.loc));return p.props=p.props.filter(x=>!(x.key.type===4&&x.key.content==="modelValue")),p},QC=Yi("passive,once,capture"),e5=Yi("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),t5=Yi("left,right"),ab=Yi("onkeyup,onkeydown,onkeypress",!0),r5=(t,n,l,p)=>{const m=[],y=[],x=[];for(let E=0;E<n.length;E++){const C=n[E];C==="native"&&Gp("COMPILER_V_ON_NATIVE",l)||QC(C)?x.push(C):t5(C)?Xi(t)?ab(t.content)?m.push(C):y.push(C):(m.push(C),y.push(C)):e5(C)?y.push(C):m.push(C)}return{keyModifiers:m,nonKeyModifiers:y,eventOptionModifiers:x}},m0=(t,n)=>Xi(t)&&t.content.toLowerCase()==="onclick"?sr(n,!0):t.type!==4?Zo(["(",t,`) === "onClick" ? "${n}" : (`,t,")"]):t,n5=(t,n,l)=>Wx(t,n,l,p=>{const{modifiers:m}=t;if(!m.length)return p;let{key:y,value:x}=p.props[0];const{keyModifiers:E,nonKeyModifiers:C,eventOptionModifiers:P}=r5(y,m,l,t.loc);if(C.includes("right")&&(y=m0(y,"onContextmenu")),C.includes("middle")&&(y=m0(y,"onMouseup")),C.length&&(x=Bn(l.helper(tb),[x,JSON.stringify(C)])),E.length&&(!Xi(y)||ab(y.content))&&(x=Bn(l.helper(rb),[x,JSON.stringify(E)])),P.length){const B=P.map(Hl).join("");y=Xi(y)?sr(`${y.content}${B}`,!0):Zo(["(",y,`) + "${B}"`])}return{props:[En(y,x)]}}),i5=(t,n,l)=>{const{exp:p,loc:m}=t;return p||l.onError(Ms(61,m)),{props:[],needRuntime:l.helper(nb)}},o5=(t,n)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&n.removeNode()},a5=[KC],s5={cloak:ZC,html:XC,text:JC,model:YC,on:n5,show:i5};function l5(t,n={}){return qC(t,yr({},$C,n,{nodeTransforms:[o5,...a5,...n.nodeTransforms||[]],directiveTransforms:yr({},s5,n.directiveTransforms||{}),transformHoist:null}))}const g0=Object.create(null);function u5(t,n){if(!er(t))if(t.nodeType)t=t.innerHTML;else return Di;const l=t,p=g0[l];if(p)return p;if(t[0]==="#"){const E=document.querySelector(t);t=E?E.innerHTML:""}const m=yr({hoistStatic:!0,onError:void 0,onWarn:Di},n);!m.isCustomElement&&typeof customElements<"u"&&(m.isCustomElement=E=>!!customElements.get(E));const{code:y}=l5(t,m),x=new Function("Vue",y)(yT);return x._rc=!0,g0[l]=x}W1(u5);var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function p5(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var l=function p(){if(this instanceof p){var m=[null];m.push.apply(m,arguments);var y=Function.bind.apply(n,m);return new y}return n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(t).forEach(function(p){var m=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(l,p,m.get?m:{enumerable:!0,get:function(){return t[p]}})}),l}var h5={exports:{}};(function(t,n){(function(l,p){t.exports=p()})(fo,function(){function l(fe,pe){pe===void 0&&(pe={});var ue=pe.insertAt;if(!(!fe||typeof document>"u")){var be=document.head||document.getElementsByTagName("head")[0],_e=document.createElement("style");_e.type="text/css",ue==="top"&&be.firstChild?be.insertBefore(_e,be.firstChild):be.appendChild(_e),_e.styleSheet?_e.styleSheet.cssText=fe:_e.appendChild(document.createTextNode(fe))}}var p=`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`;l(p);var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof fo<"u"?fo:typeof self<"u"?self:{},y={},x={get exports(){return y},set exports(fe){y=fe}};(function(fe,pe){(function(ue,be){fe.exports=be()})(m,function(){var ue,be,_e;function Oe(f,ke){if(!ue)ue=ke;else if(!be)be=ke;else{var Y="var sharedChunk = {}; ("+ue+")(sharedChunk); ("+be+")(sharedChunk);",Fe={};ue(Fe),_e=ke(Fe),typeof window<"u"&&(_e.workerUrl=window.URL.createObjectURL(new Blob([Y],{type:"text/javascript"})))}}return Oe(["exports"],function(f){function ke(e,r){return e(r={exports:{}},r.exports),r.exports}var Y=Fe;function Fe(e,r,i,u){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=i,this.p2y=u}Fe.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Fe.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Fe.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Fe.prototype.solveCurveX=function(e,r){var i,u,h,d,v;for(r===void 0&&(r=1e-6),h=e,v=0;v<8;v++){if(d=this.sampleCurveX(h)-e,Math.abs(d)<r)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=d/w}if((h=e)<(i=0))return i;if(h>(u=1))return u;for(;i<u;){if(d=this.sampleCurveX(h),Math.abs(d-e)<r)return h;e>d?i=h:u=h,h=.5*(u-i)+i}return h},Fe.prototype.solve=function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))};var ze=Xe;function Xe(e,r){this.x=e,this.y=r}Xe.prototype={clone:function(){return new Xe(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,i=e.y-this.y;return r*r+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),i=Math.sin(e),u=i*this.x+r*this.y;return this.x=r*this.x-i*this.y,this.y=u,this},_rotateAround:function(e,r){var i=Math.cos(e),u=Math.sin(e),h=r.y+u*(this.x-r.x)+i*(this.y-r.y);return this.x=r.x+i*(this.x-r.x)-u*(this.y-r.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Xe.convert=function(e){return e instanceof Xe?e:Array.isArray(e)?new Xe(e[0],e[1]):e};var xe=typeof self<"u"?self:{},mt=Math.pow(2,53)-1;function et(e,r,i,u){var h=new Y(e,r,i,u);return function(d){return h.solve(d)}}var $t=et(.25,.1,.25,1);function Rt(e,r,i){return Math.min(i,Math.max(r,e))}function tr(e,r,i){var u=i-r,h=((e-r)%u+u)%u+r;return h===r?i:h}function Ot(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,d=i;h<d.length;h+=1){var v=d[h];for(var w in v)e[w]=v[w]}return e}var mn=1;function fi(){return mn++}function Kr(){return function e(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function gn(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Ii(e,r){e.forEach(function(i){r[i]&&(r[i]=r[i].bind(r))})}function Bi(e,r){return e.indexOf(r,e.length-r.length)!==-1}function ln(e,r,i){var u={};for(var h in e)u[h]=r.call(i||this,e[h],h,e);return u}function rn(e,r,i){var u={};for(var h in e)r.call(i||this,e[h],h,e)&&(u[h]=e[h]);return u}function Mn(e){return Array.isArray(e)?e.map(Mn):typeof e=="object"&&e?ln(e,Mn):e}var eo={};function dr(e){eo[e]||(typeof console<"u"&&console.warn(e),eo[e]=!0)}function un(e,r,i){return(i.y-e.y)*(r.x-e.x)>(r.y-e.y)*(i.x-e.x)}function to(e){for(var r=0,i=0,u=e.length,h=u-1,d=void 0,v=void 0;i<u;h=i++)r+=((v=e[h]).x-(d=e[i]).x)*(d.y+v.y);return r}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function de(e){var r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,h,d,v){var w=d||v;return r[h]=!w||w.toLowerCase(),""}),r["max-age"]){var i=parseInt(r["max-age"],10);isNaN(i)?delete r["max-age"]:r["max-age"]=i}return r}var Be=null;function $e(e){if(Be==null){var r=e.navigator?e.navigator.userAgent:null;Be=!!e.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Be}function qe(e){try{var r=xe[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Je,Te,Le,Re,Ae=xe.performance&&xe.performance.now?xe.performance.now.bind(xe.performance):Date.now.bind(Date),Ye=xe.requestAnimationFrame||xe.mozRequestAnimationFrame||xe.webkitRequestAnimationFrame||xe.msRequestAnimationFrame,Ze=xe.cancelAnimationFrame||xe.mozCancelAnimationFrame||xe.webkitCancelAnimationFrame||xe.msCancelAnimationFrame,ct={now:Ae,frame:function(e){var r=Ye(e);return{cancel:function(){return Ze(r)}}},getImageData:function(e,r){r===void 0&&(r=0);var i=xe.document.createElement("canvas"),u=i.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-r,-r,e.width+2*r,e.height+2*r)},resolveURL:function(e){return Je||(Je=xe.document.createElement("a")),Je.href=e,Je.href},hardwareConcurrency:xe.navigator&&xe.navigator.hardwareConcurrency||4,get devicePixelRatio(){return xe.devicePixelRatio},get prefersReducedMotion(){return!!xe.matchMedia&&(Te==null&&(Te=xe.matchMedia("(prefers-reduced-motion: reduce)")),Te.matches)}},nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},It={supported:!1,testSupport:function(e){!Vt&&Re&&(jt?dt(e):Le=e)}},Vt=!1,jt=!1;function dt(e){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Re),e.isContextLost())return;It.supported=!0}catch{}e.deleteTexture(r),Vt=!0}xe.document&&((Re=xe.document.createElement("img")).onload=function(){Le&&dt(Le),Le=null,jt=!0},Re.onerror=function(){Vt=!0,Le=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Pr="01",Mr=function(e,r){this._transformRequestFn=e,this._customAccessToken=r,this._createSkuToken()};function cn(e){return e.indexOf("mapbox:")===0}Mr.prototype._createSkuToken=function(){var e=function(){for(var r="",i=0;i<10;i++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Pr,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Mr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Mr.prototype.transformRequest=function(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}},Mr.prototype.normalizeStyleURL=function(e,r){if(!cn(e))return e;var i=rr(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},Mr.prototype.normalizeGlyphsURL=function(e,r){if(!cn(e))return e;var i=rr(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||r)},Mr.prototype.normalizeSourceURL=function(e,r){if(!cn(e))return e;var i=rr(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||r)},Mr.prototype.normalizeSpriteURL=function(e,r,i,u){var h=rr(e);return cn(e)?(h.path="/styles/v1"+h.path+"/sprite"+r+i,this._makeAPIURL(h,this._customAccessToken||u)):(h.path+=""+r+i,yn(h))},Mr.prototype.normalizeTileURL=function(e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!cn(e))return e;var i=rr(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ct.devicePixelRatio>=2||r===512?"@2x":"")+(It.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var u=this._customAccessToken||function(h){for(var d=0,v=h;d<v.length;d+=1){var w=v[d].match(/^access_token=(.*)$/);if(w)return w[1]}return null}(i.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,u)},Mr.prototype.canonicalizeTileURL=function(e,r){var i=rr(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=i.path.replace("/v4/","");var h=i.params;return r&&(h=h.filter(function(d){return!d.match(/^access_token=/)})),h.length&&(u+="?"+h.join("&")),u},Mr.prototype.canonicalizeTileset=function(e,r){for(var i=!!r&&cn(r),u=[],h=0,d=e.tiles||[];h<d.length;h+=1){var v=d[h];zn(v)?u.push(this.canonicalizeTileURL(v,i)):u.push(v)}return u},Mr.prototype._makeAPIURL=function(e,r){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=rr(nt.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(u.path!=="/"&&(e.path=""+u.path+e.path),!nt.REQUIRE_ACCESS_TOKEN)return yn(e);if(!(r=r||nt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(function(d){return d.indexOf("access_token")===-1}),e.params.push("access_token="+r),yn(e)};var ki=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function zn(e){return ki.test(e)}var lr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function rr(e){var r=e.match(lr);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function yn(e){var r=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+r}function Un(e){if(!e)return null;var r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(xe.atob(r[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var vn=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};vn.prototype.getStorageKey=function(e){var r,i=Un(nt.ACCESS_TOKEN);return r=i&&i.u?xe.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(u,h){return String.fromCharCode(+("0x"+h))})):nt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},vn.prototype.fetchEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var u=xe.localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));var h=xe.localStorage.getItem(i);h&&(this.anonId=h)}catch{dr("Unable to read from LocalStorage")}},vn.prototype.saveEventData=function(){var e=qe("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{xe.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&xe.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{dr("Unable to write to LocalStorage")}},vn.prototype.processRequests=function(e){},vn.prototype.postEvent=function(e,r,i,u){var h=this;if(nt.EVENTS_URL){var d=rr(nt.EVENTS_URL);d.params.push("access_token="+(u||nt.ACCESS_TOKEN||""));var v={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Pr,userId:this.anonId},w=r?Ot(v,r):v,T={url:yn(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=Wr(T,function(A){h.pendingRequest=null,i(A),h.saveEventData(),h.processRequests(u)})}},vn.prototype.queueRequest=function(e,r){this.queue.push(e),this.processRequests(r)};var ii,vo,di=function(e){function r(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(i,u,h,d){this.skuToken=h;var v=!(!d&&!nt.ACCESS_TOKEN),w=Array.isArray(i)&&i.some(function(T){return cn(T)||zn(T)});nt.EVENTS_URL&&v&&w&&this.queueRequest({id:u,timestamp:Date.now()},d)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),d=h.id,v=h.timestamp;d&&this.success[d]||(this.anonId||this.fetchEventData(),gn(this.anonId)||(this.anonId=Kr()),this.postEvent(v,{skuToken:this.skuToken},function(w){w||d&&(u.success[d]=!0)},i))}},r}(vn),$l=new(function(e){function r(i){e.call(this,"appUserTurnstile"),this._customAccessToken=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(i,u){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(h){return cn(h)||zn(h)})&&this.queueRequest(Date.now(),u)},r.prototype.processRequests=function(i){var u=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=Un(nt.ACCESS_TOKEN),d=h?h.u:nt.ACCESS_TOKEN,v=d!==this.eventData.tokenU;gn(this.anonId)||(this.anonId=Kr(),v=!0);var w=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),A=new Date(w),k=(w-this.eventData.lastSuccess)/864e5;v=v||k>=1||k<-1||T.getDate()!==A.getDate()}else v=!0;if(!v)return this.processRequests();this.postEvent(w,{"enabled.telemetry":!1},function(M){M||(u.eventData.lastSuccess=w,u.eventData.tokenU=d)},i)}},r}(vn)),Kl=$l.postTurnstileEvent.bind($l),Us=new di,Vs=Us.postMapLoadEvent.bind(Us),ts=500,Wl=50;function rs(){xe.caches&&!ii&&(ii=xe.caches.open("mapbox-tiles"))}function js(e){var r=e.indexOf("?");return r<0?e:e.slice(0,r)}var _a,qs=1/0;function Zs(){return _a==null&&(_a=xe.OffscreenCanvas&&new xe.OffscreenCanvas(1,1).getContext("2d")&&typeof xe.createImageBitmap=="function"),_a}var Xl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Xl);var Jl=function(e){function r(i,u,h){u===401&&zn(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,i),this.status=u,this.url=h,this.name=this.constructor.name,this.message=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),xa=oe()?function(){return self.worker&&self.worker.referrer}:function(){return(xe.location.protocol==="blob:"?xe.parent:xe).location.href},zo,Lo,ns=function(e,r){if(!(/^file:/.test(i=e.url)||/^file:/.test(xa())&&!/^\w+:/.test(i))){if(xe.fetch&&xe.Request&&xe.AbortController&&xe.Request.prototype.hasOwnProperty("signal"))return function(u,h){var d,v=new xe.AbortController,w=new xe.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:xa(),signal:v.signal}),T=!1,A=!1,k=(d=w.url).indexOf("sku=")>0&&zn(d);u.type==="json"&&w.headers.set("Accept","application/json");var M=function(F,G,$){if(!A){if(F&&F.message!=="SecurityError"&&dr(F),G&&$)return O(G);var ie=Date.now();xe.fetch(w).then(function(Q){if(Q.ok){var he=k?Q.clone():null;return O(Q,he,ie)}return h(new Jl(Q.statusText,Q.status,u.url))}).catch(function(Q){Q.code!==20&&h(new Error(Q.message))})}},O=function(F,G,$){(u.type==="arrayBuffer"?F.arrayBuffer():u.type==="json"?F.json():F.text()).then(function(ie){A||(G&&$&&function(Q,he,ye){if(rs(),ii){var we={status:he.status,statusText:he.statusText,headers:new xe.Headers};he.headers.forEach(function(De,Ge){return we.headers.set(Ge,De)});var Se=de(he.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&we.headers.set("Expires",new Date(ye+1e3*Se["max-age"]).toUTCString()),new Date(we.headers.get("Expires")).getTime()-ye<42e4||function(De,Ge){if(vo===void 0)try{new Response(new ReadableStream),vo=!0}catch{vo=!1}vo?Ge(De.body):De.blob().then(Ge)}(he,function(De){var Ge=new xe.Response(De,we);rs(),ii&&ii.then(function(Qe){return Qe.put(js(Q.url),Ge)}).catch(function(Qe){return dr(Qe.message)})}))}}(w,G,$),T=!0,h(null,ie,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(function(ie){A||h(new Error(ie.message))})};return k?function(F,G){if(rs(),!ii)return G(null);var $=js(F.url);ii.then(function(ie){ie.match($).then(function(Q){var he=function(ye){if(!ye)return!1;var we=new Date(ye.headers.get("Expires")||0),Se=de(ye.headers.get("Cache-Control")||"");return we>Date.now()&&!Se["no-cache"]}(Q);ie.delete($),he&&ie.put($,Q.clone()),G(null,Q,he)}).catch(G)}).catch(G)}(w,M):M(null,null),{cancel:function(){A=!0,T||v.abort()}}}(e,r);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var i;return function(u,h){var d=new xe.XMLHttpRequest;for(var v in d.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(d.responseType="arraybuffer"),u.headers)d.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=u.credentials==="include",d.onerror=function(){h(new Error(d.statusText))},d.onload=function(){if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){var w=d.response;if(u.type==="json")try{w=JSON.parse(d.response)}catch(T){return h(T)}h(null,w,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else h(new Jl(d.statusText,d.status,u.url))},d.send(u.body),{cancel:function(){return d.abort()}}}(e,r)},Hs=function(e,r){return ns(Ot(e,{type:"arrayBuffer"}),r)},Wr=function(e,r){return ns(Ot(e,{method:"POST"}),r)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";zo=[],Lo=0;var R=function(e,r){if(It.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Lo>=nt.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return zo.push(i),i}Lo++;var u=!1,h=function(){if(!u)for(u=!0,Lo--;zo.length&&Lo<nt.MAX_PARALLEL_IMAGE_REQUESTS;){var v=zo.shift();v.cancelled||(v.cancel=R(v.requestParameters,v.callback).cancel)}},d=Hs(e,function(v,w,T,A){h(),v?r(v):w&&(Zs()?function(k,M){var O=new xe.Blob([new Uint8Array(k)],{type:"image/png"});xe.createImageBitmap(O).then(function(F){M(null,F)}).catch(function(F){M(new Error("Could not load image because of "+F.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(w,r):function(k,M,O,F){var G=new xe.Image,$=xe.URL;G.onload=function(){M(null,G),$.revokeObjectURL(G.src),G.onload=null,xe.requestAnimationFrame(function(){G.src=z})},G.onerror=function(){return M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ie=new xe.Blob([new Uint8Array(k)],{type:"image/png"});G.cacheControl=O,G.expires=F,G.src=k.byteLength?$.createObjectURL(ie):z}(w,r,T,A))});return{cancel:function(){d.cancel(),h()}}};function D(e,r,i){i[e]&&i[e].indexOf(r)!==-1||(i[e]=i[e]||[],i[e].push(r))}function Z(e,r,i){if(i&&i[e]){var u=i[e].indexOf(r);u!==-1&&i[e].splice(u,1)}}var W=function(e,r){r===void 0&&(r={}),Ot(this,r),this.type=e},ae=function(e){function r(i,u){u===void 0&&(u={}),e.call(this,"error",Ot({error:i},u))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(W),ce=function(){};ce.prototype.on=function(e,r){return this._listeners=this._listeners||{},D(e,r,this._listeners),this},ce.prototype.off=function(e,r){return Z(e,r,this._listeners),Z(e,r,this._oneTimeListeners),this},ce.prototype.once=function(e,r){return this._oneTimeListeners=this._oneTimeListeners||{},D(e,r,this._oneTimeListeners),this},ce.prototype.fire=function(e,r){typeof e=="string"&&(e=new W(e,r||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var u=0,h=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];u<h.length;u+=1)h[u].call(this,e);for(var d=0,v=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];d<v.length;d+=1){var w=v[d];Z(i,w,this._oneTimeListeners),w.call(this,e)}var T=this._eventedParent;T&&(Ot(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof ae&&console.error(e.error);return this},ce.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ce.prototype.setEventedParent=function(e,r){return this._eventedParent=e,this._eventedParentData=r,this};var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},J=function(e,r,i,u){this.message=(e?e+": ":"")+i,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)};function ge(e){var r=e.value;return r?[new J(e.key,r,"constants have been deprecated as of v8")]:[]}function Ue(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];for(var h=0,d=i;h<d.length;h+=1){var v=d[h];for(var w in v)e[w]=v[w]}return e}function He(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pe(e){if(Array.isArray(e))return e.map(Pe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var r={};for(var i in e)r[i]=Pe(e[i]);return r}return He(e)}var Ve=function(e){function r(i,u){e.call(this,u),this.message=u,this.key=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Error),gt=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var i=0,u=r;i<u.length;i+=1){var h=u[i];this.bindings[h[0]]=h[1]}};gt.prototype.concat=function(e){return new gt(this,e)},gt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},gt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var ht={kind:"null"},Me={kind:"number"},lt={kind:"string"},tt={kind:"boolean"},it={kind:"color"},Ut={kind:"object"},at={kind:"value"},Xt={kind:"collator"},br={kind:"formatted"},Ht={kind:"resolvedImage"};function ur(e,r){return{kind:"array",itemType:e,N:r}}function Yt(e){if(e.kind==="array"){var r=Yt(e.itemType);return typeof e.N=="number"?"array<"+r+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+r+">"}return e.kind}var Kn=[ht,Me,lt,tt,it,br,Ut,ur(at),Ht];function hr(e,r){if(r.kind==="error")return null;if(e.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!hr(e.itemType,r.itemType))&&(typeof e.N!="number"||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if(e.kind==="value"){for(var i=0,u=Kn;i<u.length;i+=1)if(!hr(u[i],r))return null}}return"Expected "+Yt(e)+" but found "+Yt(r)+" instead."}function Xr(e,r){return r.some(function(i){return i.kind===e.kind})}function _r(e,r){return r.some(function(i){return i==="null"?e===null:i==="array"?Array.isArray(e):i==="object"?e&&!Array.isArray(e)&&typeof e=="object":i===typeof e})}var Wt=ke(function(e,r){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(w){return(w=Math.round(w))<0?0:w>255?255:w}function h(w){return u(w[w.length-1]==="%"?parseFloat(w)/100*255:parseInt(w))}function d(w){return(T=w[w.length-1]==="%"?parseFloat(w)/100:parseFloat(w))<0?0:T>1?1:T;var T}function v(w,T,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?w+(T-w)*A*6:2*A<1?T:3*A<2?w+(T-w)*(2/3-A)*6:w}try{r.parseCSSColor=function(w){var T,A=w.replace(/ /g,"").toLowerCase();if(A in i)return i[A].slice();if(A[0]==="#")return A.length===4?(T=parseInt(A.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:A.length===7&&(T=parseInt(A.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var k=A.indexOf("("),M=A.indexOf(")");if(k!==-1&&M+1===A.length){var O=A.substr(0,k),F=A.substr(k+1,M-(k+1)).split(","),G=1;switch(O){case"rgba":if(F.length!==4)return null;G=d(F.pop());case"rgb":return F.length!==3?null:[h(F[0]),h(F[1]),h(F[2]),G];case"hsla":if(F.length!==4)return null;G=d(F.pop());case"hsl":if(F.length!==3)return null;var $=(parseFloat(F[0])%360+360)%360/360,ie=d(F[1]),Q=d(F[2]),he=Q<=.5?Q*(ie+1):Q+ie-Q*ie,ye=2*Q-he;return[u(255*v(ye,he,$+1/3)),u(255*v(ye,he,$)),u(255*v(ye,he,$-1/3)),G];default:return null}}return null}}catch{}}).parseCSSColor,cr=function(e,r,i,u){u===void 0&&(u=1),this.r=e,this.g=r,this.b=i,this.a=u};cr.parse=function(e){if(e){if(e instanceof cr)return e;if(typeof e=="string"){var r=Wt(e);if(r)return new cr(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},cr.prototype.toString=function(){var e=this.toArray(),r=e[1],i=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(r)+","+Math.round(i)+","+u+")"},cr.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var oi=function(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oi.prototype.compare=function(e,r){return this.collator.compare(e,r)},oi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Gs=function(e,r,i,u,h){this.text=e,this.image=r,this.scale=i,this.fontStack=u,this.textColor=h},Sn=function(e){this.sections=e};Sn.fromString=function(e){return new Sn([new Gs(e,null,null,null,null)])},Sn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Sn.factory=function(e){return e instanceof Sn?e:Sn.fromString(e)},Sn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Sn.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var h={};u.fontStack&&(h["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(h["font-scale"]=u.scale),u.textColor&&(h["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(h)}}return e};var ai=function(e){this.name=e.name,this.available=e.available};function wc(e,r,i,u){return typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,r,i,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof u=="number"?[e,r,i,u]:[e,r,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function $s(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof cr||e instanceof oi||e instanceof Sn||e instanceof ai)return!0;if(Array.isArray(e)){for(var r=0,i=e;r<i.length;r+=1)if(!$s(i[r]))return!1;return!0}if(typeof e=="object"){for(var u in e)if(!$s(e[u]))return!1;return!0}return!1}function Jr(e){if(e===null)return ht;if(typeof e=="string")return lt;if(typeof e=="boolean")return tt;if(typeof e=="number")return Me;if(e instanceof cr)return it;if(e instanceof oi)return Xt;if(e instanceof Sn)return br;if(e instanceof ai)return Ht;if(Array.isArray(e)){for(var r,i=e.length,u=0,h=e;u<h.length;u+=1){var d=Jr(h[u]);if(r){if(r===d)continue;r=at;break}r=d}return ur(r||at,i)}return Ut}function Ks(e){var r=typeof e;return e===null?"":r==="string"||r==="number"||r==="boolean"?String(e):e instanceof cr||e instanceof Sn||e instanceof ai?e.toString():JSON.stringify(e)}ai.prototype.toString=function(){return this.name},ai.fromString=function(e){return e?new ai({name:e,available:!1}):null},ai.prototype.serialize=function(){return["image",this.name]};var Wn=function(e,r){this.type=e,this.value=r};Wn.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!$s(e[1]))return r.error("invalid value");var i=e[1],u=Jr(i),h=r.expectedType;return u.kind!=="array"||u.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(u=h),new Wn(u,i)},Wn.prototype.evaluate=function(){return this.value},Wn.prototype.eachChild=function(){},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof Sn?this.value.serialize():this.value};var Tn=function(e){this.name="ExpressionEvaluationError",this.message=e};Tn.prototype.toJSON=function(){return this.message};var Fi={string:lt,number:Me,boolean:tt,object:Ut},zr=function(e,r){this.type=e,this.args=r};zr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i,u=1,h=e[0];if(h==="array"){var d,v;if(e.length>2){var w=e[1];if(typeof w!="string"||!(w in Fi)||w==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);d=Fi[w],u++}else d=at;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);v=e[2],u++}i=ur(d,v)}else i=Fi[h];for(var T=[];u<e.length;u++){var A=r.parse(e[u],u,at);if(!A)return null;T.push(A)}return new zr(i,T)},zr.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var i=this.args[r].evaluate(e);if(!hr(this.type,Jr(i)))return i;if(r===this.args.length-1)throw new Tn("Expected value to be of type "+Yt(this.type)+", but found "+Yt(Jr(i))+" instead.")}return null},zr.prototype.eachChild=function(e){this.args.forEach(e)},zr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},zr.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);var u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(function(h){return h.serialize()}))};var ro=function(e){this.type=br,this.sections=e};ro.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");for(var u=[],h=!1,d=1;d<=e.length-1;++d){var v=e[d];if(h&&typeof v=="object"&&!Array.isArray(v)){h=!1;var w=null;if(v["font-scale"]&&!(w=r.parse(v["font-scale"],1,Me)))return null;var T=null;if(v["text-font"]&&!(T=r.parse(v["text-font"],1,ur(lt))))return null;var A=null;if(v["text-color"]&&!(A=r.parse(v["text-color"],1,it)))return null;var k=u[u.length-1];k.scale=w,k.font=T,k.textColor=A}else{var M=r.parse(e[d],1,at);if(!M)return null;var O=M.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,u.push({content:M,scale:null,font:null,textColor:null})}}return new ro(u)},ro.prototype.evaluate=function(e){return new Sn(this.sections.map(function(r){var i=r.content.evaluate(e);return Jr(i)===Ht?new Gs("",i,null,null,null):new Gs(Ks(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))},ro.prototype.eachChild=function(e){for(var r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){for(var e=["format"],r=0,i=this.sections;r<i.length;r+=1){var u=i[r];e.push(u.content.serialize());var h={};u.scale&&(h["font-scale"]=u.scale.serialize()),u.font&&(h["text-font"]=u.font.serialize()),u.textColor&&(h["text-color"]=u.textColor.serialize()),e.push(h)}return e};var Pi=function(e){this.type=Ht,this.input=e};Pi.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var i=r.parse(e[1],1,lt);return i?new Pi(i):r.error("No image name provided.")},Pi.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=ai.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i},Pi.prototype.eachChild=function(e){e(this.input)},Pi.prototype.outputDefined=function(){return!1},Pi.prototype.serialize=function(){return["image",this.input.serialize()]};var ah={"to-boolean":tt,"to-color":it,"to-number":Me,"to-string":lt},Ni=function(e,r){this.type=e,this.args=r};Ni.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var u=ah[i],h=[],d=1;d<e.length;d++){var v=r.parse(e[d],d,at);if(!v)return null;h.push(v)}return new Ni(u,h)},Ni.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var r,i,u=0,h=this.args;u<h.length;u+=1){if(i=null,(r=h[u].evaluate(e))instanceof cr)return r;if(typeof r=="string"){var d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&!(i=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":wc(r[0],r[1],r[2],r[3])))return new cr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Tn(i||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var v=null,w=0,T=this.args;w<T.length;w+=1){if((v=T[w].evaluate(e))===null)return 0;var A=Number(v);if(!isNaN(A))return A}throw new Tn("Could not convert "+JSON.stringify(v)+" to number.")}return this.type.kind==="formatted"?Sn.fromString(Ks(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ai.fromString(Ks(this.args[0].evaluate(e))):Ks(this.args[0].evaluate(e))},Ni.prototype.eachChild=function(e){this.args.forEach(e)},Ni.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ni.prototype.serialize=function(){if(this.type.kind==="formatted")return new ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Pi(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var Hd=["Unknown","Point","LineString","Polygon"],Ro=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ro.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ro.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Hd[this.feature.type]:this.feature.type:null},Ro.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ro.prototype.canonicalID=function(){return this.canonical},Ro.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ro.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=cr.parse(e)),r};var Ln=function(e,r,i,u){this.name=e,this.type=r,this._evaluate=i,this.args=u};Ln.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Ln.prototype.eachChild=function(e){this.args.forEach(e)},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Ln.parse=function(e,r){var i,u=e[0],h=Ln.definitions[u];if(!h)return r.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var d=Array.isArray(h)?h[0]:h.type,v=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,w=v.filter(function(Et){var st=Et[0];return!Array.isArray(st)||st.length===e.length-1}),T=null,A=0,k=w;A<k.length;A+=1){var M=k[A],O=M[0],F=M[1];T=new Ko(r.registry,r.path,null,r.scope);for(var G=[],$=!1,ie=1;ie<e.length;ie++){var Q=e[ie],he=Array.isArray(O)?O[ie-1]:O.type,ye=T.parse(Q,1+G.length,he);if(!ye){$=!0;break}G.push(ye)}if(!$)if(Array.isArray(O)&&O.length!==G.length)T.error("Expected "+O.length+" arguments, but found "+G.length+" instead.");else{for(var we=0;we<G.length;we++){var Se=Array.isArray(O)?O[we]:O.type,De=G[we];T.concat(we+1).checkSubtype(Se,De.type)}if(T.errors.length===0)return new Ln(u,d,F,G)}}if(w.length===1)(i=r.errors).push.apply(i,T.errors);else{for(var Ge=(w.length?w:v).map(function(Et){var st;return st=Et[0],Array.isArray(st)?"("+st.map(Yt).join(", ")+")":"("+Yt(st.type)+"...)"}).join(" | "),Qe=[],_t=1;_t<e.length;_t++){var ot=r.parse(e[_t],1+Qe.length);if(!ot)return null;Qe.push(Yt(ot.type))}r.error("Expected arguments of type "+Ge+", but found ("+Qe.join(", ")+") instead.")}return null},Ln.register=function(e,r){for(var i in Ln.definitions=r,r)e[i]=Ln};var _o=function(e,r,i){this.type=Xt,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r};function Xn(e,r){e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1])}function ba(e,r){return!(e[0]<=r[0]||e[2]>=r[2]||e[1]<=r[1]||e[3]>=r[3])}function Gd(e,r){var i=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,r.z);return[Math.round(i*h*8192),Math.round(u*h*8192)]}function $d(e,r,i){return r[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-r[0])*(e[1]-r[1])/(i[1]-r[1])+r[0]}function Ec(e,r){for(var i,u,h,d,v,w,T,A=!1,k=0,M=r.length;k<M;k++)for(var O=r[k],F=0,G=O.length;F<G-1;F++){if((d=(i=e)[0]-(u=O[F])[0])*(T=i[1]-(h=O[F+1])[1])-(w=i[0]-h[0])*(v=i[1]-u[1])==0&&d*w<=0&&v*T<=0)return!1;$d(e,O[F],O[F+1])&&(A=!A)}return A}function Kd(e,r){for(var i=0;i<r.length;i++)if(Ec(e,r[i]))return!0;return!1}function sh(e,r,i,u){var h=u[0]-i[0],d=u[1]-i[1],v=(e[0]-i[0])*d-h*(e[1]-i[1]),w=(r[0]-i[0])*d-h*(r[1]-i[1]);return v>0&&w<0||v<0&&w>0}function Wd(e,r,i){for(var u=0,h=i;u<h.length;u+=1)for(var d=h[u],v=0;v<d.length-1;++v)if((M=[(k=d[v+1])[0]-(A=d[v])[0],k[1]-A[1]])[0]*(O=[(T=r)[0]-(w=e)[0],T[1]-w[1]])[1]-M[1]*O[0]!=0&&sh(w,T,A,k)&&sh(A,k,w,T))return!0;var w,T,A,k,M,O;return!1}function lh(e,r){for(var i=0;i<e.length;++i)if(!Ec(e[i],r))return!1;for(var u=0;u<e.length-1;++u)if(Wd(e[u],e[u+1],r))return!1;return!0}function uh(e,r){for(var i=0;i<r.length;i++)if(lh(e,r[i]))return!0;return!1}function is(e,r,i){for(var u=[],h=0;h<e.length;h++){for(var d=[],v=0;v<e[h].length;v++){var w=Gd(e[h][v],i);Xn(r,w),d.push(w)}u.push(d)}return u}function Sc(e,r,i){for(var u=[],h=0;h<e.length;h++){var d=is(e[h],r,i);u.push(d)}return u}function Ws(e,r,i,u){if(e[0]<i[0]||e[0]>i[2]){var h=.5*u,d=e[0]-i[0]>h?-u:i[0]-e[0]>h?u:0;d===0&&(d=e[0]-i[2]>h?-u:i[2]-e[0]>h?u:0),e[0]+=d}Xn(r,e)}function ch(e,r,i,u){for(var h=8192*Math.pow(2,u.z),d=[8192*u.x,8192*u.y],v=[],w=0,T=e;w<T.length;w+=1)for(var A=0,k=T[w];A<k.length;A+=1){var M=k[A],O=[M.x+d[0],M.y+d[1]];Ws(O,r,i,h),v.push(O)}return v}function Yl(e,r,i,u){for(var h,d=8192*Math.pow(2,u.z),v=[8192*u.x,8192*u.y],w=[],T=0,A=e;T<A.length;T+=1){for(var k=[],M=0,O=A[T];M<O.length;M+=1){var F=O[M],G=[F.x+v[0],F.y+v[1]];Xn(r,G),k.push(G)}w.push(k)}if(r[2]-r[0]<=d/2){(h=r)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var $=0,ie=w;$<ie.length;$+=1)for(var Q=0,he=ie[$];Q<he.length;Q+=1)Ws(he[Q],r,i,d)}return w}_o.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");var u=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,tt);if(!u)return null;var h=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,tt);if(!h)return null;var d=null;return i.locale&&!(d=r.parse(i.locale,1,lt))?null:new _o(u,h,d)},_o.prototype.evaluate=function(e){return new oi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},_o.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},_o.prototype.outputDefined=function(){return!1},_o.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ui=function(e,r){this.type=tt,this.geojson=e,this.geometries=r};function Ho(e){if(e instanceof Ln&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Ui)return!1;var r=!0;return e.eachChild(function(i){r&&!Ho(i)&&(r=!1)}),r}function Go(e){if(e instanceof Ln&&e.name==="feature-state")return!1;var r=!0;return e.eachChild(function(i){r&&!Go(i)&&(r=!1)}),r}function wa(e,r){if(e instanceof Ln&&r.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(u){i&&!wa(u,r)&&(i=!1)}),i}Ui.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if($s(e[1])){var i=e[1];if(i.type==="FeatureCollection")for(var u=0;u<i.features.length;++u){var h=i.features[u].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Ui(i,i.features[u].geometry)}else if(i.type==="Feature"){var d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ui(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Ui(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ui.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=is(i.coordinates,h,d),w=ch(r.geometry(),u,h,d);if(!ba(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!Ec(A[T],v))return!1}if(i.type==="MultiPolygon"){var k=Sc(i.coordinates,h,d),M=ch(r.geometry(),u,h,d);if(!ba(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!Kd(F[O],k))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){var u=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=r.canonicalID();if(i.type==="Polygon"){var v=is(i.coordinates,h,d),w=Yl(r.geometry(),u,h,d);if(!ba(u,h))return!1;for(var T=0,A=w;T<A.length;T+=1)if(!lh(A[T],v))return!1}if(i.type==="MultiPolygon"){var k=Sc(i.coordinates,h,d),M=Yl(r.geometry(),u,h,d);if(!ba(u,h))return!1;for(var O=0,F=M;O<F.length;O+=1)if(!uh(F[O],k))return!1}return!0}(e,this.geometries)}return!1},Ui.prototype.eachChild=function(){},Ui.prototype.outputDefined=function(){return!0},Ui.prototype.serialize=function(){return["within",this.geojson]};var $o=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};$o.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var i=e[1];return r.scope.has(i)?new $o(i,r.scope.get(i)):r.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},$o.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},$o.prototype.eachChild=function(){},$o.prototype.outputDefined=function(){return!1},$o.prototype.serialize=function(){return["var",this.name]};var Ko=function(e,r,i,u,h){r===void 0&&(r=[]),u===void 0&&(u=new gt),h===void 0&&(h=[]),this.registry=e,this.path=r,this.key=r.map(function(d){return"["+d+"]"}).join(""),this.scope=u,this.errors=h,this.expectedType=i};function Ql(e,r){for(var i,u=e.length-1,h=0,d=u,v=0;h<=d;)if((i=e[v=Math.floor((h+d)/2)])<=r){if(v===u||r<e[v+1])return v;h=v+1}else{if(!(i>r))throw new Tn("Input is not a number.");d=v-1}return 0}Ko.prototype.parse=function(e,r,i,u,h){return h===void 0&&(h={}),r?this.concat(r,i,u)._parse(e,h):this._parse(e,h)},Ko.prototype._parse=function(e,r){function i(A,k,M){return M==="assert"?new zr(k,[A]):M==="coerce"?new Ni(k,[A]):A}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if(typeof u!="string")return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[u];if(h){var d=h.parse(e,this);if(!d)return null;if(this.expectedType){var v=this.expectedType,w=d.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||w.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(v,w))return null}else d=i(d,v,r.typeAnnotation||"coerce");else d=i(d,v,r.typeAnnotation||"assert")}if(!(d instanceof Wn)&&d.type.kind!=="resolvedImage"&&function A(k){if(k instanceof $o)return A(k.boundExpression);if(k instanceof Ln&&k.name==="error"||k instanceof _o||k instanceof Ui)return!1;var M=k instanceof Ni||k instanceof zr,O=!0;return k.eachChild(function(F){O=M?O&&A(F):O&&F instanceof Wn}),!!O&&Ho(k)&&wa(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(d)){var T=new Ro;try{d=new Wn(d.type,d.evaluate(T))}catch(A){return this.error(A.message),null}}return d}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ko.prototype.concat=function(e,r,i){var u=typeof e=="number"?this.path.concat(e):this.path,h=i?this.scope.concat(i):this.scope;return new Ko(this.registry,u,r||null,h,this.errors)},Ko.prototype.error=function(e){for(var r=arguments,i=[],u=arguments.length-1;u-- >0;)i[u]=r[u+1];var h=""+this.key+i.map(function(d){return"["+d+"]"}).join("");this.errors.push(new Ve(h,e))},Ko.prototype.checkSubtype=function(e,r){var i=hr(e,r);return i&&this.error(i),i};var mi=function(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var u=0,h=i;u<h.length;u+=1){var d=h[u],v=d[1];this.labels.push(d[0]),this.outputs.push(v)}};function nn(e,r,i){return e*(1-i)+r*i}mi.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=[],h=null;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);for(var d=1;d<e.length;d+=2){var v=d===1?-1/0:e[d],w=e[d+1],T=d,A=d+1;if(typeof v!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=v)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var k=r.parse(w,A,h);if(!k)return null;h=h||k.type,u.push([v,k])}return new mi(h,i,u)},mi.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;return u>=r[h-1]?i[h-1].evaluate(e):i[Ql(r,u)].evaluate(e)},mi.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},mi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},mi.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var os=Object.freeze({__proto__:null,number:nn,color:function(e,r,i){return new cr(nn(e.r,r.r,i),nn(e.g,r.g,i),nn(e.b,r.b,i),nn(e.a,r.a,i))},array:function(e,r,i){return e.map(function(u,h){return nn(u,r[h],i)})}}),ph=6/29*3*(6/29),Xd=Math.PI/180,Jd=180/Math.PI;function Tc(e){return e>.008856451679035631?Math.pow(e,1/3):e/ph+4/29}function Cc(e){return e>6/29?e*e*e:ph*(e-4/29)}function Ac(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ic(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hh(e){var r=Ic(e.r),i=Ic(e.g),u=Ic(e.b),h=Tc((.4124564*r+.3575761*i+.1804375*u)/.95047),d=Tc((.2126729*r+.7151522*i+.072175*u)/1);return{l:116*d-16,a:500*(h-d),b:200*(d-Tc((.0193339*r+.119192*i+.9503041*u)/1.08883)),alpha:e.a}}function fh(e){var r=(e.l+16)/116,i=isNaN(e.a)?r:r+e.a/500,u=isNaN(e.b)?r:r-e.b/200;return r=1*Cc(r),i=.95047*Cc(i),u=1.08883*Cc(u),new cr(Ac(3.2404542*i-1.5371385*r-.4985314*u),Ac(-.969266*i+1.8760108*r+.041556*u),Ac(.0556434*i-.2040259*r+1.0572252*u),e.alpha)}function Yd(e,r,i){var u=r-e;return e+i*(u>180||u<-180?u-360*Math.round(u/360):u)}var Xs={forward:hh,reverse:fh,interpolate:function(e,r,i){return{l:nn(e.l,r.l,i),a:nn(e.a,r.a,i),b:nn(e.b,r.b,i),alpha:nn(e.alpha,r.alpha,i)}}},Js={forward:function(e){var r=hh(e),i=r.l,u=r.a,h=r.b,d=Math.atan2(h,u)*Jd;return{h:d<0?d+360:d,c:Math.sqrt(u*u+h*h),l:i,alpha:e.a}},reverse:function(e){var r=e.h*Xd,i=e.c;return fh({l:e.l,a:Math.cos(r)*i,b:Math.sin(r)*i,alpha:e.alpha})},interpolate:function(e,r,i){return{h:Yd(e.h,r.h,i),c:nn(e.c,r.c,i),l:nn(e.l,r.l,i),alpha:nn(e.alpha,r.alpha,i)}}},dh=Object.freeze({__proto__:null,lab:Xs,hcl:Js}),Rn=function(e,r,i,u,h){this.type=e,this.operator=r,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(var d=0,v=h;d<v.length;d+=1){var w=v[d],T=w[1];this.labels.push(w[0]),this.outputs.push(T)}};function kc(e,r,i,u){var h=u-i,d=e-i;return h===0?0:r===1?d/h:(Math.pow(r,d)-1)/(Math.pow(r,h)-1)}Rn.interpolationFactor=function(e,r,i,u){var h=0;if(e.name==="exponential")h=kc(r,e.base,i,u);else if(e.name==="linear")h=kc(r,1,i,u);else if(e.name==="cubic-bezier"){var d=e.controlPoints;h=new Y(d[0],d[1],d[2],d[3]).solve(kc(r,1,i,u))}return h},Rn.parse=function(e,r){var i=e[0],u=e[1],h=e[2],d=e.slice(3);if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){var v=u[1];if(typeof v!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:v}}else{if(u[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(u[0]),1,0);var w=u.slice(1);if(w.length!==4||w.some(function(ie){return typeof ie!="number"||ie<0||ie>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(h=r.parse(h,2,Me)))return null;var T=[],A=null;i==="interpolate-hcl"||i==="interpolate-lab"?A=it:r.expectedType&&r.expectedType.kind!=="value"&&(A=r.expectedType);for(var k=0;k<d.length;k+=2){var M=d[k],O=d[k+1],F=k+3,G=k+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(T.length&&T[T.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);var $=r.parse(O,G,A);if(!$)return null;A=A||$.type,T.push([M,$])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Rn(A,i,u,h,T):r.error("Type "+Yt(A)+" is not interpolatable.")},Rn.prototype.evaluate=function(e){var r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);var u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);var h=r.length;if(u>=r[h-1])return i[h-1].evaluate(e);var d=Ql(r,u),v=Rn.interpolationFactor(this.interpolation,u,r[d],r[d+1]),w=i[d].evaluate(e),T=i[d+1].evaluate(e);return this.operator==="interpolate"?os[this.type.kind.toLowerCase()](w,T,v):this.operator==="interpolate-hcl"?Js.reverse(Js.interpolate(Js.forward(w),Js.forward(T),v)):Xs.reverse(Xs.interpolate(Xs.forward(w),Xs.forward(T),v))},Rn.prototype.eachChild=function(e){e(this.input);for(var r=0,i=this.outputs;r<i.length;r+=1)e(i[r])},Rn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Rn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r};var Wo=function(e,r){this.type=e,this.args=r};Wo.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var i=null,u=r.expectedType;u&&u.kind!=="value"&&(i=u);for(var h=[],d=0,v=e.slice(1);d<v.length;d+=1){var w=r.parse(v[d],1+h.length,i,void 0,{typeAnnotation:"omit"});if(!w)return null;i=i||w.type,h.push(w)}var T=u&&h.some(function(A){return hr(u,A.type)});return new Wo(T?at:i,h)},Wo.prototype.evaluate=function(e){for(var r,i=null,u=0,h=0,d=this.args;h<d.length&&(u++,(i=d[h].evaluate(e))&&i instanceof ai&&!i.available&&(r||(r=i.name),i=null,u===this.args.length&&(i=r)),i===null);h+=1);return i},Wo.prototype.eachChild=function(e){this.args.forEach(e)},Wo.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Wo.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Xo=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};Xo.prototype.evaluate=function(e){return this.result.evaluate(e)},Xo.prototype.eachChild=function(e){for(var r=0,i=this.bindings;r<i.length;r+=1)e(i[r][1]);e(this.result)},Xo.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],u=1;u<e.length-1;u+=2){var h=e[u];if(typeof h!="string")return r.error("Expected string, but found "+typeof h+" instead.",u);if(/[^a-zA-Z0-9_]/.test(h))return r.error("Variable names must contain only alphanumeric characters or '_'.",u);var d=r.parse(e[u+1],u+1);if(!d)return null;i.push([h,d])}var v=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return v?new Xo(i,v):null},Xo.prototype.outputDefined=function(){return this.result.outputDefined()},Xo.prototype.serialize=function(){for(var e=["let"],r=0,i=this.bindings;r<i.length;r+=1){var u=i[r];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var Ea=function(e,r,i){this.type=e,this.index=r,this.input=i};Ea.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,Me),u=r.parse(e[2],2,ur(r.expectedType||at));return i&&u?new Ea(u.type.itemType,i,u):null},Ea.prototype.evaluate=function(e){var r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new Tn("Array index out of bounds: "+r+" < 0.");if(r>=i.length)throw new Tn("Array index out of bounds: "+r+" > "+(i.length-1)+".");if(r!==Math.floor(r))throw new Tn("Array index must be an integer, but found "+r+" instead.");return i[r]},Ea.prototype.eachChild=function(e){e(this.index),e(this.input)},Ea.prototype.outputDefined=function(){return!1},Ea.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Sa=function(e,r){this.type=tt,this.needle=e,this.haystack=r};Sa.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);return i&&u?Xr(i.type,[tt,lt,Me,ht,at])?new Sa(i,u):r.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(i.type)+" instead"):null},Sa.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!_r(r,["boolean","string","number","null"]))throw new Tn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Jr(r))+" instead.");if(!_r(i,["string","array"]))throw new Tn("Expected second argument to be of type array or string, but found "+Yt(Jr(i))+" instead.");return i.indexOf(r)>=0},Sa.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Sa.prototype.outputDefined=function(){return!0},Sa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Jo=function(e,r,i){this.type=Me,this.needle=e,this.haystack=r,this.fromIndex=i};Jo.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,at);if(!i||!u)return null;if(!Xr(i.type,[tt,lt,Me,ht,at]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new Jo(i,u,h):null}return new Jo(i,u)},Jo.prototype.evaluate=function(e){var r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!_r(r,["boolean","string","number","null"]))throw new Tn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Jr(r))+" instead.");if(!_r(i,["string","array"]))throw new Tn("Expected second argument to be of type array or string, but found "+Yt(Jr(i))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return i.indexOf(r,u)}return i.indexOf(r)},Jo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Jo.prototype.outputDefined=function(){return!1},Jo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ta=function(e,r,i,u,h,d){this.inputType=e,this.type=r,this.input=i,this.cases=u,this.outputs=h,this.otherwise=d};Ta.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return r.error("Expected an even number of arguments.");var i,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);for(var h={},d=[],v=2;v<e.length-1;v+=2){var w=e[v],T=e[v+1];Array.isArray(w)||(w=[w]);var A=r.concat(v);if(w.length===0)return A.error("Expected at least one branch label.");for(var k=0,M=w;k<M.length;k+=1){var O=M[k];if(typeof O!="number"&&typeof O!="string")return A.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof O=="number"&&Math.floor(O)!==O)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,Jr(O)))return null}else i=Jr(O);if(h[String(O)]!==void 0)return A.error("Branch labels must be unique.");h[String(O)]=d.length}var F=r.parse(T,v,u);if(!F)return null;u=u||F.type,d.push(F)}var G=r.parse(e[1],1,at);if(!G)return null;var $=r.parse(e[e.length-1],e.length-1,u);return $?G.type.kind!=="value"&&r.concat(1).checkSubtype(i,G.type)?null:new Ta(i,u,G,h,d,$):null},Ta.prototype.evaluate=function(e){var r=this.input.evaluate(e);return(Jr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)},Ta.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Ta.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Ta.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],i=[],u={},h=0,d=Object.keys(this.cases).sort();h<d.length;h+=1){var v=d[h];(M=u[this.cases[v]])===void 0?(u[this.cases[v]]=i.length,i.push([this.cases[v],[v]])):i[M][1].push(v)}for(var w=function(F){return e.inputType.kind==="number"?Number(F):F},T=0,A=i;T<A.length;T+=1){var k=A[T],M=k[0],O=k[1];r.push(O.length===1?w(O[0]):O.map(w)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var Ca=function(e,r,i){this.type=e,this.branches=r,this.otherwise=i};Ca.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);for(var u=[],h=1;h<e.length-1;h+=2){var d=r.parse(e[h],h,tt);if(!d)return null;var v=r.parse(e[h+1],h+1,i);if(!v)return null;u.push([d,v]),i=i||v.type}var w=r.parse(e[e.length-1],e.length-1,i);return w?new Ca(i,u,w):null},Ca.prototype.evaluate=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];if(u[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},Ca.prototype.eachChild=function(e){for(var r=0,i=this.branches;r<i.length;r+=1){var u=i[r],h=u[1];e(u[0]),e(h)}e(this.otherwise)},Ca.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},Ca.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Yo=function(e,r,i,u){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=u};function mh(e,r){return e==="=="||e==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function gh(e,r,i,u){return u.compare(r,i)===0}function wr(e,r,i){var u=e!=="=="&&e!=="!=";return function(){function h(d,v,w){this.type=tt,this.lhs=d,this.rhs=v,this.collator=w,this.hasUntypedArgument=d.type.kind==="value"||v.type.kind==="value"}return h.parse=function(d,v){if(d.length!==3&&d.length!==4)return v.error("Expected two or three arguments.");var w=d[0],T=v.parse(d[1],1,at);if(!T)return null;if(!mh(w,T.type))return v.concat(1).error('"'+w+`" comparisons are not supported for type '`+Yt(T.type)+"'.");var A=v.parse(d[2],2,at);if(!A)return null;if(!mh(w,A.type))return v.concat(2).error('"'+w+`" comparisons are not supported for type '`+Yt(A.type)+"'.");if(T.type.kind!==A.type.kind&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot compare types '"+Yt(T.type)+"' and '"+Yt(A.type)+"'.");u&&(T.type.kind==="value"&&A.type.kind!=="value"?T=new zr(A.type,[T]):T.type.kind!=="value"&&A.type.kind==="value"&&(A=new zr(T.type,[A])));var k=null;if(d.length===4){if(T.type.kind!=="string"&&A.type.kind!=="string"&&T.type.kind!=="value"&&A.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(!(k=v.parse(d[3],3,Xt)))return null}return new h(T,A,k)},h.prototype.evaluate=function(d){var v=this.lhs.evaluate(d),w=this.rhs.evaluate(d);if(u&&this.hasUntypedArgument){var T=Jr(v),A=Jr(w);if(T.kind!==A.kind||T.kind!=="string"&&T.kind!=="number")throw new Tn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var k=Jr(v),M=Jr(w);if(k.kind!=="string"||M.kind!=="string")return r(d,v,w)}return this.collator?i(d,v,w,this.collator.evaluate(d)):r(d,v,w)},h.prototype.eachChild=function(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var d=[e];return this.eachChild(function(v){d.push(v.serialize())}),d},h}()}Yo.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1,at),u=r.parse(e[2],2,Me);if(!i||!u)return null;if(!Xr(i.type,[ur(at),lt,at]))return r.error("Expected first argument to be of type array or string, but found "+Yt(i.type)+" instead");if(e.length===4){var h=r.parse(e[3],3,Me);return h?new Yo(i.type,i,u,h):null}return new Yo(i.type,i,u)},Yo.prototype.evaluate=function(e){var r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!_r(r,["string","array"]))throw new Tn("Expected first argument to be of type array or string, but found "+Yt(Jr(r))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return r.slice(i,u)}return r.slice(i)},Yo.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Qd=wr("==",function(e,r,i){return r===i},gh),eu=wr("!=",function(e,r,i){return r!==i},function(e,r,i,u){return!gh(0,r,i,u)}),yh=wr("<",function(e,r,i){return r<i},function(e,r,i,u){return u.compare(r,i)<0}),vh=wr(">",function(e,r,i){return r>i},function(e,r,i,u){return u.compare(r,i)>0}),_h=wr("<=",function(e,r,i){return r<=i},function(e,r,i,u){return u.compare(r,i)<=0}),xh=wr(">=",function(e,r,i){return r>=i},function(e,r,i,u){return u.compare(r,i)>=0}),Aa=function(e,r,i,u,h){this.type=lt,this.number=e,this.locale=r,this.currency=i,this.minFractionDigits=u,this.maxFractionDigits=h};Aa.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var i=r.parse(e[1],1,Me);if(!i)return null;var u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");var h=null;if(u.locale&&!(h=r.parse(u.locale,1,lt)))return null;var d=null;if(u.currency&&!(d=r.parse(u.currency,1,lt)))return null;var v=null;if(u["min-fraction-digits"]&&!(v=r.parse(u["min-fraction-digits"],1,Me)))return null;var w=null;return u["max-fraction-digits"]&&!(w=r.parse(u["max-fraction-digits"],1,Me))?null:new Aa(i,h,d,v,w)},Aa.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Aa.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Aa.prototype.outputDefined=function(){return!1},Aa.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Qo=function(e){this.type=Me,this.input=e};Qo.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+Yt(i.type)+" instead."):new Qo(i):null},Qo.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Tn("Expected value to be of type string or array, but found "+Yt(Jr(r))+" instead.")},Qo.prototype.eachChild=function(e){e(this.input)},Qo.prototype.outputDefined=function(){return!1},Qo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Ia={"==":Qd,"!=":eu,">":vh,"<":yh,">=":xh,"<=":_h,array:zr,at:Ea,boolean:zr,case:Ca,coalesce:Wo,collator:_o,format:ro,image:Pi,in:Sa,"index-of":Jo,interpolate:Rn,"interpolate-hcl":Rn,"interpolate-lab":Rn,length:Qo,let:Xo,literal:Wn,match:Ta,number:zr,"number-format":Aa,object:zr,slice:Yo,step:mi,string:zr,"to-boolean":Ni,"to-color":Ni,"to-number":Ni,"to-string":Ni,var:$o,within:Ui};function bh(e,r){var i=r[0],u=r[1],h=r[2],d=r[3];i=i.evaluate(e),u=u.evaluate(e),h=h.evaluate(e);var v=d?d.evaluate(e):1,w=wc(i,u,h,v);if(w)throw new Tn(w);return new cr(i/255*v,u/255*v,h/255*v,v)}function wh(e,r){return e in r}function Pc(e,r){var i=r[e];return i===void 0?null:i}function ka(e){return{type:e}}function Eh(e){return{result:"success",value:e}}function Pa(e){return{result:"error",value:e}}function Ma(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Sh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ys(e){return!!e.expression&&e.expression.interpolated}function Cr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function tu(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function em(e){return e}function as(e,r,i){return e!==void 0?e:r!==void 0?r:i!==void 0?i:void 0}function Th(e,r,i,u,h){return as(typeof i===h?u[i]:void 0,e.default,r.default)}function tm(e,r,i){if(Cr(i)!=="number")return as(e.default,r.default);var u=e.stops.length;if(u===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[u-1][0])return e.stops[u-1][1];var h=Ql(e.stops.map(function(d){return d[0]}),i);return e.stops[h][1]}function Ch(e,r,i){var u=e.base!==void 0?e.base:1;if(Cr(i)!=="number")return as(e.default,r.default);var h=e.stops.length;if(h===1||i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[h-1][0])return e.stops[h-1][1];var d=Ql(e.stops.map(function(M){return M[0]}),i),v=function(M,O,F,G){var $=G-F,ie=M-F;return $===0?0:O===1?ie/$:(Math.pow(O,ie)-1)/(Math.pow(O,$)-1)}(i,u,e.stops[d][0],e.stops[d+1][0]),w=e.stops[d][1],T=e.stops[d+1][1],A=os[r.type]||em;if(e.colorSpace&&e.colorSpace!=="rgb"){var k=dh[e.colorSpace];A=function(M,O){return k.reverse(k.interpolate(k.forward(M),k.forward(O),v))}}return typeof w.evaluate=="function"?{evaluate:function(){for(var M=arguments,O=[],F=arguments.length;F--;)O[F]=M[F];var G=w.evaluate.apply(void 0,O),$=T.evaluate.apply(void 0,O);if(G!==void 0&&$!==void 0)return A(G,$,v)}}:A(w,T,v)}function ru(e,r,i){return r.type==="color"?i=cr.parse(i):r.type==="formatted"?i=Sn.fromString(i.toString()):r.type==="resolvedImage"?i=ai.fromString(i.toString()):Cr(i)===r.type||r.type==="enum"&&r.values[i]||(i=void 0),as(i,e.default,r.default)}Ln.register(Ia,{error:[{kind:"error"},[lt],function(e,r){throw new Tn(r[0].evaluate(e))}],typeof:[lt,[at],function(e,r){return Yt(Jr(r[0].evaluate(e)))}],"to-rgba":[ur(Me,4),[it],function(e,r){return r[0].evaluate(e).toArray()}],rgb:[it,[Me,Me,Me],bh],rgba:[it,[Me,Me,Me,Me],bh],has:{type:tt,overloads:[[[lt],function(e,r){return wh(r[0].evaluate(e),e.properties())}],[[lt,Ut],function(e,r){var i=r[1];return wh(r[0].evaluate(e),i.evaluate(e))}]]},get:{type:at,overloads:[[[lt],function(e,r){return Pc(r[0].evaluate(e),e.properties())}],[[lt,Ut],function(e,r){var i=r[1];return Pc(r[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[at,[lt],function(e,r){return Pc(r[0].evaluate(e),e.featureState||{})}],properties:[Ut,[],function(e){return e.properties()}],"geometry-type":[lt,[],function(e){return e.geometryType()}],id:[at,[],function(e){return e.id()}],zoom:[Me,[],function(e){return e.globals.zoom}],"heatmap-density":[Me,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Me,[],function(e){return e.globals.lineProgress||0}],accumulated:[at,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[Me,ka(Me),function(e,r){for(var i=0,u=0,h=r;u<h.length;u+=1)i+=h[u].evaluate(e);return i}],"*":[Me,ka(Me),function(e,r){for(var i=1,u=0,h=r;u<h.length;u+=1)i*=h[u].evaluate(e);return i}],"-":{type:Me,overloads:[[[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)-i.evaluate(e)}],[[Me],function(e,r){return-r[0].evaluate(e)}]]},"/":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)/i.evaluate(e)}],"%":[Me,[Me,Me],function(e,r){var i=r[1];return r[0].evaluate(e)%i.evaluate(e)}],ln2:[Me,[],function(){return Math.LN2}],pi:[Me,[],function(){return Math.PI}],e:[Me,[],function(){return Math.E}],"^":[Me,[Me,Me],function(e,r){var i=r[1];return Math.pow(r[0].evaluate(e),i.evaluate(e))}],sqrt:[Me,[Me],function(e,r){return Math.sqrt(r[0].evaluate(e))}],log10:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN10}],ln:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))}],log2:[Me,[Me],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN2}],sin:[Me,[Me],function(e,r){return Math.sin(r[0].evaluate(e))}],cos:[Me,[Me],function(e,r){return Math.cos(r[0].evaluate(e))}],tan:[Me,[Me],function(e,r){return Math.tan(r[0].evaluate(e))}],asin:[Me,[Me],function(e,r){return Math.asin(r[0].evaluate(e))}],acos:[Me,[Me],function(e,r){return Math.acos(r[0].evaluate(e))}],atan:[Me,[Me],function(e,r){return Math.atan(r[0].evaluate(e))}],min:[Me,ka(Me),function(e,r){return Math.min.apply(Math,r.map(function(i){return i.evaluate(e)}))}],max:[Me,ka(Me),function(e,r){return Math.max.apply(Math,r.map(function(i){return i.evaluate(e)}))}],abs:[Me,[Me],function(e,r){return Math.abs(r[0].evaluate(e))}],round:[Me,[Me],function(e,r){var i=r[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Me,[Me],function(e,r){return Math.floor(r[0].evaluate(e))}],ceil:[Me,[Me],function(e,r){return Math.ceil(r[0].evaluate(e))}],"filter-==":[tt,[lt,at],function(e,r){var i=r[0],u=r[1];return e.properties()[i.value]===u.value}],"filter-id-==":[tt,[at],function(e,r){var i=r[0];return e.id()===i.value}],"filter-type-==":[tt,[lt],function(e,r){var i=r[0];return e.geometryType()===i.value}],"filter-<":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h<d}],"filter-id-<":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<h}],"filter->":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h>d}],"filter-id->":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>h}],"filter-<=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u<=h}],"filter->=":[tt,[lt,at],function(e,r){var i=r[0],u=r[1],h=e.properties()[i.value],d=u.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[tt,[at],function(e,r){var i=r[0],u=e.id(),h=i.value;return typeof u==typeof h&&u>=h}],"filter-has":[tt,[at],function(e,r){return r[0].value in e.properties()}],"filter-has-id":[tt,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[tt,[ur(lt)],function(e,r){return r[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[tt,[ur(at)],function(e,r){return r[0].value.indexOf(e.id())>=0}],"filter-in-small":[tt,[lt,ur(at)],function(e,r){var i=r[0];return r[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[tt,[lt,ur(at)],function(e,r){var i=r[0],u=r[1];return function(h,d,v,w){for(;v<=w;){var T=v+w>>1;if(d[T]===h)return!0;d[T]>h?w=T-1:v=T+1}return!1}(e.properties()[i.value],u.value,0,u.value.length-1)}],all:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)&&i.evaluate(e)}],[ka(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(!u[i].evaluate(e))return!1;return!0}]]},any:{type:tt,overloads:[[[tt,tt],function(e,r){var i=r[1];return r[0].evaluate(e)||i.evaluate(e)}],[ka(tt),function(e,r){for(var i=0,u=r;i<u.length;i+=1)if(u[i].evaluate(e))return!0;return!1}]]},"!":[tt,[tt],function(e,r){return!r[0].evaluate(e)}],"is-supported-script":[tt,[lt],function(e,r){var i=e.globals&&e.globals.isSupportedScript;return!i||i(r[0].evaluate(e))}],upcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toUpperCase()}],downcase:[lt,[lt],function(e,r){return r[0].evaluate(e).toLowerCase()}],concat:[lt,ka(at),function(e,r){return r.map(function(i){return Ks(i.evaluate(e))}).join("")}],"resolved-locale":[lt,[Xt],function(e,r){return r[0].evaluate(e).resolvedLocale()}]});var ss=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Ro,this._defaultValue=r?function(i){return i.type==="color"&&tu(i.default)?new cr(0,0,0,0):i.type==="color"?cr.parse(i.default)||null:i.default===void 0?null:i.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function Qs(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Ia}function nu(e,r){var i=new Ko(Ia,[],r?function(h){var d={color:it,string:lt,number:Me,enum:lt,boolean:tt,formatted:br,resolvedImage:Ht};return h.type==="array"?ur(d[h.value]||at,h.length):d[h.type]}(r):void 0),u=i.parse(e,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Eh(new ss(u,r)):Pa(i.errors)}ss.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)},ss.prototype.evaluate=function(e,r,i,u,h,d){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{var v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Tn("Expected value to be one of "+Object.keys(this._enumValues).map(function(w){return JSON.stringify(w)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}};var el=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Go(r.expression)};el.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,d)},el.prototype.evaluate=function(e,r,i,u,h,d){return this._styleExpression.evaluate(e,r,i,u,h,d)};var ls=function(e,r,i,u){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Go(r.expression),this.interpolationType=u};function Ah(e,r){if((e=nu(e,r)).result==="error")return e;var i=e.value.expression,u=Ho(i);if(!u&&!Ma(r))return Pa([new Ve("","data expressions not supported")]);var h=wa(i,["zoom"]);if(!h&&!Sh(r))return Pa([new Ve("","zoom expressions not supported")]);var d=function v(w){var T=null;if(w instanceof Xo)T=v(w.result);else if(w instanceof Wo)for(var A=0,k=w.args;A<k.length&&!(T=v(k[A]));A+=1);else(w instanceof mi||w instanceof Rn)&&w.input instanceof Ln&&w.input.name==="zoom"&&(T=w);return T instanceof Ve||w.eachChild(function(M){var O=v(M);O instanceof Ve?T=O:!T&&O?T=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&O&&T!==O&&(T=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(i);return d||h?d instanceof Ve?Pa([d]):d instanceof Rn&&!Ys(r)?Pa([new Ve("",'"interpolate" expressions cannot be used with this property')]):Eh(d?new ls(u?"camera":"composite",e.value,d.labels,d instanceof Rn?d.interpolation:void 0):new el(u?"constant":"source",e.value)):Pa([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ls.prototype.evaluateWithoutErrorHandling=function(e,r,i,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,h,d)},ls.prototype.evaluate=function(e,r,i,u,h,d){return this._styleExpression.evaluate(e,r,i,u,h,d)},ls.prototype.interpolationFactor=function(e,r,i){return this.interpolationType?Rn.interpolationFactor(this.interpolationType,e,r,i):0};var us=function(e,r){this._parameters=e,this._specification=r,Ue(this,function i(u,h){var d,v,w,T=h.type==="color",A=u.stops&&typeof u.stops[0][0]=="object",k=A||!(A||u.property!==void 0),M=u.type||(Ys(h)?"exponential":"interval");if(T&&((u=Ue({},u)).stops&&(u.stops=u.stops.map(function(ot){return[ot[0],cr.parse(ot[1])]})),u.default=cr.parse(u.default?u.default:h.default)),u.colorSpace&&u.colorSpace!=="rgb"&&!dh[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if(M==="exponential")d=Ch;else if(M==="interval")d=tm;else if(M==="categorical"){d=Th,v=Object.create(null);for(var O=0,F=u.stops;O<F.length;O+=1){var G=F[O];v[G[0]]=G[1]}w=typeof u.stops[0][0]}else{if(M!=="identity")throw new Error('Unknown function type "'+M+'"');d=ru}if(A){for(var $={},ie=[],Q=0;Q<u.stops.length;Q++){var he=u.stops[Q],ye=he[0].zoom;$[ye]===void 0&&($[ye]={zoom:ye,type:u.type,property:u.property,default:u.default,stops:[]},ie.push(ye)),$[ye].stops.push([he[0].value,he[1]])}for(var we=[],Se=0,De=ie;Se<De.length;Se+=1){var Ge=De[Se];we.push([$[Ge].zoom,i($[Ge],h)])}var Qe={name:"linear"};return{kind:"composite",interpolationType:Qe,interpolationFactor:Rn.interpolationFactor.bind(void 0,Qe),zoomStops:we.map(function(ot){return ot[0]}),evaluate:function(ot,Et){var st=ot.zoom;return Ch({stops:we,base:u.base},h,st).evaluate(st,Et)}}}if(k){var _t=M==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:_t,interpolationFactor:Rn.interpolationFactor.bind(void 0,_t),zoomStops:u.stops.map(function(ot){return ot[0]}),evaluate:function(ot){return d(u,h,ot.zoom,v,w)}}}return{kind:"source",evaluate:function(ot,Et){var st=Et&&Et.properties?Et.properties[u.property]:void 0;return st===void 0?as(u.default,h.default):d(u,h,st,v,w)}}}(this._parameters,this._specification))};function no(e){var r=e.key,i=e.value,u=e.valueSpec||{},h=e.objectElementValidators||{},d=e.style,v=e.styleSpec,w=[],T=Cr(i);if(T!=="object")return[new J(r,i,"object expected, "+T+" found")];for(var A in i){var k=A.split(".")[0],M=u[k]||u["*"],O=void 0;if(h[k])O=h[k];else if(u[k])O=Jt;else if(h["*"])O=h["*"];else{if(!u["*"]){w.push(new J(r,i[A],'unknown property "'+A+'"'));continue}O=Jt}w=w.concat(O({key:(r&&r+".")+A,value:i[A],valueSpec:M,style:d,styleSpec:v,object:i,objectKey:A},i))}for(var F in u)h[F]||u[F].required&&u[F].default===void 0&&i[F]===void 0&&w.push(new J(r,i,'missing required property "'+F+'"'));return w}function Ih(e){var r=e.value,i=e.valueSpec,u=e.style,h=e.styleSpec,d=e.key,v=e.arrayElementValidator||Jt;if(Cr(r)!=="array")return[new J(d,r,"array expected, "+Cr(r)+" found")];if(i.length&&r.length!==i.length)return[new J(d,r,"array length "+i.length+" expected, length "+r.length+" found")];if(i["min-length"]&&r.length<i["min-length"])return[new J(d,r,"array length at least "+i["min-length"]+" expected, length "+r.length+" found")];var w={type:i.value,values:i.values};h.$version<7&&(w.function=i.function),Cr(i.value)==="object"&&(w=i.value);for(var T=[],A=0;A<r.length;A++)T=T.concat(v({array:r,arrayIndex:A,value:r[A],valueSpec:w,style:u,styleSpec:h,key:d+"["+A+"]"}));return T}function kh(e){var r=e.key,i=e.value,u=e.valueSpec,h=Cr(i);return h==="number"&&i!=i&&(h="NaN"),h!=="number"?[new J(r,i,"number expected, "+h+" found")]:"minimum"in u&&i<u.minimum?[new J(r,i,i+" is less than the minimum value "+u.minimum)]:"maximum"in u&&i>u.maximum?[new J(r,i,i+" is greater than the maximum value "+u.maximum)]:[]}function Ph(e){var r,i,u,h=e.valueSpec,d=He(e.value.type),v={},w=d!=="categorical"&&e.value.property===void 0,T=!w,A=Cr(e.value.stops)==="array"&&Cr(e.value.stops[0])==="array"&&Cr(e.value.stops[0][0])==="object",k=no({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(F){if(d==="identity")return[new J(F.key,F.value,'identity function may not have a "stops" property')];var G=[],$=F.value;return G=G.concat(Ih({key:F.key,value:$,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:M})),Cr($)==="array"&&$.length===0&&G.push(new J(F.key,$,"array must have at least one stop")),G},default:function(F){return Jt({key:F.key,value:F.value,valueSpec:h,style:F.style,styleSpec:F.styleSpec})}}});return d==="identity"&&w&&k.push(new J(e.key,e.value,'missing required property "property"')),d==="identity"||e.value.stops||k.push(new J(e.key,e.value,'missing required property "stops"')),d==="exponential"&&e.valueSpec.expression&&!Ys(e.valueSpec)&&k.push(new J(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!Ma(e.valueSpec)?k.push(new J(e.key,e.value,"property functions not supported")):w&&!Sh(e.valueSpec)&&k.push(new J(e.key,e.value,"zoom functions not supported"))),d!=="categorical"&&!A||e.value.property!==void 0||k.push(new J(e.key,e.value,'"property" property is required')),k;function M(F){var G=[],$=F.value,ie=F.key;if(Cr($)!=="array")return[new J(ie,$,"array expected, "+Cr($)+" found")];if($.length!==2)return[new J(ie,$,"array length 2 expected, length "+$.length+" found")];if(A){if(Cr($[0])!=="object")return[new J(ie,$,"object expected, "+Cr($[0])+" found")];if($[0].zoom===void 0)return[new J(ie,$,"object stop key must have zoom")];if($[0].value===void 0)return[new J(ie,$,"object stop key must have value")];if(u&&u>He($[0].zoom))return[new J(ie,$[0].zoom,"stop zoom values must appear in ascending order")];He($[0].zoom)!==u&&(u=He($[0].zoom),i=void 0,v={}),G=G.concat(no({key:ie+"[0]",value:$[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:kh,value:O}}))}else G=G.concat(O({key:ie+"[0]",value:$[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},$));return Qs(Pe($[1]))?G.concat([new J(ie+"[1]",$[1],"expressions are not allowed in function stops.")]):G.concat(Jt({key:ie+"[1]",value:$[1],valueSpec:h,style:F.style,styleSpec:F.styleSpec}))}function O(F,G){var $=Cr(F.value),ie=He(F.value),Q=F.value!==null?F.value:G;if(r){if($!==r)return[new J(F.key,Q,$+" stop domain type must match previous stop domain type "+r)]}else r=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new J(F.key,Q,"stop domain value must be a number, string, or boolean")];if($!=="number"&&d!=="categorical"){var he="number expected, "+$+" found";return Ma(h)&&d===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new J(F.key,Q,he)]}return d!=="categorical"||$!=="number"||isFinite(ie)&&Math.floor(ie)===ie?d!=="categorical"&&$==="number"&&i!==void 0&&ie<i?[new J(F.key,Q,"stop domain values must appear in ascending order")]:(i=ie,d==="categorical"&&ie in v?[new J(F.key,Q,"stop domain values must be unique")]:(v[ie]=!0,[])):[new J(F.key,Q,"integer expected, found "+ie)]}}function za(e){var r=(e.expressionContext==="property"?Ah:nu)(Pe(e.value),e.valueSpec);if(r.result==="error")return r.value.map(function(u){return new J(""+e.key+u.key,e.value,u.message)});var i=r.value.expression||r.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!i.outputDefined())return[new J(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Go(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Go(i))return[new J(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!wa(i,["zoom","feature-state"]))return[new J(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ho(i))return[new J(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tl(e){var r=e.key,i=e.value,u=e.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(He(i))===-1&&h.push(new J(r,i,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(i)+" found")):Object.keys(u.values).indexOf(He(i))===-1&&h.push(new J(r,i,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(i)+" found")),h}function iu(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var r=0,i=e.slice(1);r<i.length;r+=1){var u=i[r];if(!iu(u)&&typeof u!="boolean")return!1}return!0;default:return!0}}us.deserialize=function(e){return new us(e._parameters,e._specification)},us.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Mc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ou(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};iu(e)||(e=au(e));var r=nu(e,Mc);if(r.result==="error")throw new Error(r.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,u,h){return r.value.evaluate(i,u,{},h)},needGeometry:function i(u){if(!Array.isArray(u))return!1;if(u[0]==="within")return!0;for(var h=1;h<u.length;h++)if(i(u[h]))return!0;return!1}(e)}}function rm(e,r){return e<r?-1:e>r?1:0}function au(e){if(!e)return!0;var r,i=e[0];return e.length<=1?i!=="any":i==="=="?zc(e[1],e[2],"=="):i==="!="?su(zc(e[1],e[2],"==")):i==="<"||i===">"||i==="<="||i===">="?zc(e[1],e[2],i):i==="any"?(r=e.slice(1),["any"].concat(r.map(au))):i==="all"?["all"].concat(e.slice(1).map(au)):i==="none"?["all"].concat(e.slice(1).map(au).map(su)):i==="in"?Mh(e[1],e.slice(2)):i==="!in"?su(Mh(e[1],e.slice(2))):i==="has"?zh(e[1]):i==="!has"?su(zh(e[1])):i!=="within"||e}function zc(e,r,i){switch(e){case"$type":return["filter-type-"+i,r];case"$id":return["filter-id-"+i,r];default:return["filter-"+i,e,r]}}function Mh(e,r){if(r.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(i){return typeof i!=typeof r[0]})?["filter-in-large",e,["literal",r.sort(rm)]]:["filter-in-small",e,["literal",r]]}}function zh(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function su(e){return["!",e]}function Lc(e){return iu(Pe(e.value))?za(Ue({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(i){var u=i.value,h=i.key;if(Cr(u)!=="array")return[new J(h,u,"array expected, "+Cr(u)+" found")];var d,v=i.styleSpec,w=[];if(u.length<1)return[new J(h,u,"filter array must have at least 1 element")];switch(w=w.concat(tl({key:h+"[0]",value:u[0],valueSpec:v.filter_operator,style:i.style,styleSpec:i.styleSpec})),He(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&He(u[1])==="$type"&&w.push(new J(h,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":u.length!==3&&w.push(new J(h,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&(d=Cr(u[1]))!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+d+" found"));for(var T=2;T<u.length;T++)d=Cr(u[T]),He(u[1])==="$type"?w=w.concat(tl({key:h+"["+T+"]",value:u[T],valueSpec:v.geometry_type,style:i.style,styleSpec:i.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&w.push(new J(h+"["+T+"]",u[T],"string, number, or boolean expected, "+d+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)w=w.concat(r({key:h+"["+A+"]",value:u[A],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":d=Cr(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="string"&&w.push(new J(h+"[1]",u[1],"string expected, "+d+" found"));break;case"within":d=Cr(u[1]),u.length!==2?w.push(new J(h,u,'filter array for "'+u[0]+'" operator must have 2 elements')):d!=="object"&&w.push(new J(h+"[1]",u[1],"object expected, "+d+" found"))}return w}(e)}function Rc(e,r){var i=e.key,u=e.style,h=e.styleSpec,d=e.value,v=e.objectKey,w=h[r+"_"+e.layerType];if(!w)return[];var T=v.match(/^(.*)-transition$/);if(r==="paint"&&T&&w[T[1]]&&w[T[1]].transition)return Jt({key:i,value:d,valueSpec:h.transition,style:u,styleSpec:h});var A,k=e.valueSpec||w[v];if(!k)return[new J(i,d,'unknown property "'+v+'"')];if(Cr(d)==="string"&&Ma(k)&&!k.tokens&&(A=/^{([^}]+)}$/.exec(d)))return[new J(i,d,'"'+v+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var M=[];return e.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&M.push(new J(i,d,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&tu(Pe(d))&&He(d.type)==="identity"&&M.push(new J(i,d,'"text-font" does not support identity functions'))),M.concat(Jt({key:e.key,value:d,valueSpec:k,style:u,styleSpec:h,expressionContext:"property",propertyType:r,propertyKey:v}))}function Oc(e){return Rc(e,"paint")}function rl(e){return Rc(e,"layout")}function Lh(e){var r=[],i=e.value,u=e.key,h=e.style,d=e.styleSpec;i.type||i.ref||r.push(new J(u,i,'either "type" or "ref" is required'));var v,w=He(i.type),T=He(i.ref);if(i.id)for(var A=He(i.id),k=0;k<e.arrayIndex;k++){var M=h.layers[k];He(M.id)===A&&r.push(new J(u,i.id,'duplicate layer id "'+i.id+'", previously used at line '+M.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(G){G in i&&r.push(new J(u,i[G],'"'+G+'" is prohibited for ref layers'))}),h.layers.forEach(function(G){He(G.id)===T&&(v=G)}),v?v.ref?r.push(new J(u,i.ref,"ref cannot reference another ref layer")):w=He(v.type):r.push(new J(u,i.ref,'ref layer "'+T+'" not found'));else if(w!=="background")if(i.source){var O=h.sources&&h.sources[i.source],F=O&&He(O.type);O?F==="vector"&&w==="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a raster source')):F==="raster"&&w!=="raster"?r.push(new J(u,i.source,'layer "'+i.id+'" requires a vector source')):F!=="vector"||i["source-layer"]?F==="raster-dem"&&w!=="hillshade"?r.push(new J(u,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!i.paint||!i.paint["line-gradient"]||F==="geojson"&&O.lineMetrics||r.push(new J(u,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new J(u,i,'layer "'+i.id+'" must specify a "source-layer"')):r.push(new J(u,i.source,'source "'+i.source+'" not found'))}else r.push(new J(u,i,'missing required property "source"'));return r=r.concat(no({key:u,value:i,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Jt({key:u+".type",value:i.type,valueSpec:d.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:Lc,layout:function(G){return no({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function($){return rl(Ue({layerType:w},$))}}})},paint:function(G){return no({layer:i,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{"*":function($){return Oc(Ue({layerType:w},$))}}})}}}))}function La(e){var r=e.value,i=e.key,u=Cr(r);return u!=="string"?[new J(i,r,"string expected, "+u+" found")]:[]}var Lr={promoteId:function(e){var r=e.key,i=e.value;if(Cr(i)==="string")return La({key:r,value:i});var u=[];for(var h in i)u.push.apply(u,La({key:r+"."+h,value:i[h]}));return u}};function lu(e){var r=e.value,i=e.key,u=e.styleSpec,h=e.style;if(!r.type)return[new J(i,r,'"type" is required')];var d,v=He(r.type);switch(v){case"vector":case"raster":case"raster-dem":return no({key:i,value:r,valueSpec:u["source_"+v.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Lr});case"geojson":if(d=no({key:i,value:r,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Lr}),r.cluster)for(var w in r.clusterProperties){var T=r.clusterProperties[w],A=T[0],k=typeof A=="string"?[A,["accumulated"],["get",w]]:A;d.push.apply(d,za({key:i+"."+w+".map",value:T[1],expressionContext:"cluster-map"})),d.push.apply(d,za({key:i+"."+w+".reduce",value:k,expressionContext:"cluster-reduce"}))}return d;case"video":return no({key:i,value:r,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return no({key:i,value:r,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new J(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tl({key:i+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:u})}}function Ra(e){var r=e.value,i=e.styleSpec,u=i.light,h=e.style,d=[],v=Cr(r);if(r===void 0)return d;if(v!=="object")return d.concat([new J("light",r,"object expected, "+v+" found")]);for(var w in r){var T=w.match(/^(.*)-transition$/);d=d.concat(T&&u[T[1]]&&u[T[1]].transition?Jt({key:w,value:r[w],valueSpec:i.transition,style:h,styleSpec:i}):u[w]?Jt({key:w,value:r[w],valueSpec:u[w],style:h,styleSpec:i}):[new J(w,r[w],'unknown property "'+w+'"')])}return d}var ea={"*":function(){return[]},array:Ih,boolean:function(e){var r=e.value,i=e.key,u=Cr(r);return u!=="boolean"?[new J(i,r,"boolean expected, "+u+" found")]:[]},number:kh,color:function(e){var r=e.key,i=e.value,u=Cr(i);return u!=="string"?[new J(r,i,"color expected, "+u+" found")]:Wt(i)===null?[new J(r,i,'color expected, "'+i+'" found')]:[]},constants:ge,enum:tl,filter:Lc,function:Ph,layer:Lh,object:no,source:lu,light:Ra,string:La,formatted:function(e){return La(e).length===0?[]:za(e)},resolvedImage:function(e){return La(e).length===0?[]:za(e)}};function Jt(e){var r=e.value,i=e.valueSpec,u=e.styleSpec;return i.expression&&tu(He(r))?Ph(e):i.expression&&Qs(Pe(r))?za(e):i.type&&ea[i.type]?ea[i.type](e):no(Ue({},e,{valueSpec:i.type?u[i.type]:i}))}function Ar(e){var r=e.value,i=e.key,u=La(e);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new J(i,r,'"glyphs" url must include a "{range}" token'))),u}function Mi(e,r){r===void 0&&(r=V);var i=[];return i=i.concat(Jt({key:"",value:e,valueSpec:r.$root,styleSpec:r,style:e,objectElementValidators:{glyphs:Ar,"*":function(){return[]}}})),e.constants&&(i=i.concat(ge({key:"constants",value:e.constants,style:e,styleSpec:r}))),nl(i)}function nl(e){return[].concat(e).sort(function(r,i){return r.line-i.line})}function cs(e){return function(){for(var r=arguments,i=[],u=arguments.length;u--;)i[u]=r[u];return nl(e.apply(this,i))}}Mi.source=cs(lu),Mi.light=cs(Ra),Mi.layer=cs(Lh),Mi.filter=cs(Lc),Mi.paintProperty=cs(Oc),Mi.layoutProperty=cs(rl);var il=Mi,nm=il.light,im=il.paintProperty,ol=il.layoutProperty;function al(e,r){var i=!1;if(r&&r.length)for(var u=0,h=r;u<h.length;u+=1)e.fire(new ae(new Error(h[u].message))),i=!0;return i}var Oo=pn;function pn(e,r,i){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(r=h[1])+2*(i=h[2]);for(var d=0;d<this.d*this.d;d++){var v=h[3+d],w=h[3+d+1];u.push(v===w?null:h.subarray(v,w))}var T=h[3+u.length+1];this.keys=h.subarray(h[3+u.length],T),this.bboxes=h.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*i;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=i,this.scale=r/e,this.uid=0;var k=i/r*e;this.min=-k,this.max=e+k}pn.prototype.insert=function(e,r,i,u,h){this._forEachCell(r,i,u,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(h)},pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pn.prototype._insertCell=function(e,r,i,u,h,d){this.cells[h].push(d)},pn.prototype.query=function(e,r,i,u,h){var d=this.min,v=this.max;if(e<=d&&r<=d&&v<=i&&v<=u&&!h)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(e,r,i,u,this._queryCell,w,{},h),w},pn.prototype._queryCell=function(e,r,i,u,h,d,v,w){var T=this.cells[h];if(T!==null)for(var A=this.keys,k=this.bboxes,M=0;M<T.length;M++){var O=T[M];if(v[O]===void 0){var F=4*O;(w?w(k[F+0],k[F+1],k[F+2],k[F+3]):e<=k[F+2]&&r<=k[F+3]&&i>=k[F+0]&&u>=k[F+1])?(v[O]=!0,d.push(A[O])):v[O]=!1}}},pn.prototype._forEachCell=function(e,r,i,u,h,d,v,w){for(var T=this._convertToCellCoord(e),A=this._convertToCellCoord(r),k=this._convertToCellCoord(i),M=this._convertToCellCoord(u),O=T;O<=k;O++)for(var F=A;F<=M;F++){var G=this.d*F+O;if((!w||w(this._convertFromCellCoord(O),this._convertFromCellCoord(F),this._convertFromCellCoord(O+1),this._convertFromCellCoord(F+1)))&&h.call(this,e,r,i,u,G,d,v,w))return}},pn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},pn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,r=3+this.cells.length+1+1,i=0,u=0;u<this.cells.length;u++)i+=this.cells[u].length;var h=new Int32Array(r+i+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var d=r,v=0;v<e.length;v++){var w=e[v];h[3+v]=d,h.set(w,d),d+=w.length}return h[3+e.length]=d,h.set(this.keys,d),h[3+e.length+1]=d+=this.keys.length,h.set(this.bboxes,d),d+=this.bboxes.length,h.buffer};var sl=xe.ImageData,Rh=xe.ImageBitmap,on={};function ft(e,r,i){i===void 0&&(i={}),Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),on[e]={klass:r,omit:i.omit||[],shallow:i.shallow||[]}}for(var gi in ft("Object",Object),Oo.serialize=function(e,r){var i=e.toArrayBuffer();return r&&r.push(i),{buffer:i}},Oo.deserialize=function(e){return new Oo(e.buffer)},ft("Grid",Oo),ft("Color",cr),ft("Error",Error),ft("ResolvedImage",ai),ft("StylePropertyFunction",us),ft("StyleExpression",ss,{omit:["_evaluator"]}),ft("ZoomDependentExpression",ls),ft("ZoomConstantExpression",el),ft("CompoundExpression",Ln,{omit:["_evaluate"]}),Ia)Ia[gi]._classRegistryKey||ft("Expression_"+gi,Ia[gi]);function uu(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function ps(e){return Rh&&e instanceof Rh}function io(e,r){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(uu(e)||ps(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return r&&r.push(i.buffer),i}if(e instanceof sl)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],h=0,d=e;h<d.length;h+=1)u.push(io(d[h],r));return u}if(typeof e=="object"){var v=e.constructor,w=v._classRegistryKey;if(!w)throw new Error("can't serialize object of unregistered class");var T=v.serialize?v.serialize(e,r):{};if(!v.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(on[w].omit.indexOf(A)>=0)){var k=e[A];T[A]=on[w].shallow.indexOf(A)>=0?k:io(k,r)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return w!=="Object"&&(T.$name=w),T}throw new Error("can't serialize object of type "+typeof e)}function yi(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||uu(e)||ps(e)||ArrayBuffer.isView(e)||e instanceof sl)return e;if(Array.isArray(e))return e.map(yi);if(typeof e=="object"){var r=e.$name||"Object",i=on[r].klass;if(!i)throw new Error("can't deserialize unregistered class "+r);if(i.deserialize)return i.deserialize(e);for(var u=Object.create(i.prototype),h=0,d=Object.keys(e);h<d.length;h+=1){var v=d[h];if(v!=="$name"){var w=e[v];u[v]=on[r].shallow.indexOf(v)>=0?w:yi(w)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var Dc=function(){this.first=!0};Dc.prototype.update=function(e,r){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var rt={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Bc(e){for(var r=0,i=e;r<i.length;r+=1)if(cu(i[r].charCodeAt(0)))return!0;return!1}function cu(e){return!(e!==746&&e!==747&&(e<4352||!(rt["Bopomofo Extended"](e)||rt.Bopomofo(e)||rt["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||rt["CJK Compatibility Ideographs"](e)||rt["CJK Compatibility"](e)||rt["CJK Radicals Supplement"](e)||rt["CJK Strokes"](e)||!(!rt["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||rt["CJK Unified Ideographs Extension A"](e)||rt["CJK Unified Ideographs"](e)||rt["Enclosed CJK Letters and Months"](e)||rt["Hangul Compatibility Jamo"](e)||rt["Hangul Jamo Extended-A"](e)||rt["Hangul Jamo Extended-B"](e)||rt["Hangul Jamo"](e)||rt["Hangul Syllables"](e)||rt.Hiragana(e)||rt["Ideographic Description Characters"](e)||rt.Kanbun(e)||rt["Kangxi Radicals"](e)||rt["Katakana Phonetic Extensions"](e)||rt.Katakana(e)&&e!==12540||!(!rt["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!rt["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||rt["Unified Canadian Aboriginal Syllabics"](e)||rt["Unified Canadian Aboriginal Syllabics Extended"](e)||rt["Vertical Forms"](e)||rt["Yijing Hexagram Symbols"](e)||rt["Yi Syllables"](e)||rt["Yi Radicals"](e))))}function Fc(e){return!(cu(e)||function(r){return!!(rt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||rt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||rt["Letterlike Symbols"](r)||rt["Number Forms"](r)||rt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||rt["Control Pictures"](r)&&r!==9251||rt["Optical Character Recognition"](r)||rt["Enclosed Alphanumerics"](r)||rt["Geometric Shapes"](r)||rt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||rt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||rt["CJK Symbols and Punctuation"](r)||rt.Katakana(r)||rt["Private Use Area"](r)||rt["CJK Compatibility Forms"](r)||rt["Small Form Variants"](r)||rt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(e))}function Vi(e){return e>=1424&&e<=2303||rt["Arabic Presentation Forms-A"](e)||rt["Arabic Presentation Forms-B"](e)}function vi(e,r){return!(!r&&Vi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||rt.Khmer(e))}function pu(e){for(var r=0,i=e;r<i.length;r+=1)if(Vi(i[r].charCodeAt(0)))return!0;return!1}var hu=null,_i="unavailable",Do=null,Oh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(_i="error"),hu&&hu(e)};function ll(){Nc.fire(new W("pluginStateChange",{pluginStatus:_i,pluginURL:Do}))}var Nc=new ce,Uc=function(){return _i},oo=function(){if(_i!=="deferred"||!Do)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_i="loading",ll(),Do&&Hs({url:Do},function(e){e?Oh(e):(_i="loaded",ll())})},zi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _i==="loaded"||zi.applyArabicShaping!=null},isLoading:function(){return _i==="loading"},setState:function(e){_i=e.pluginStatus,Do=e.pluginURL},isParsed:function(){return zi.applyArabicShaping!=null&&zi.processBidirectionalText!=null&&zi.processStyledBidirectionalText!=null},getPluginURL:function(){return Do}},Gt=function(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Dc,this.transition={})};Gt.prototype.isSupportedScript=function(e){return function(r,i){for(var u=0,h=r;u<h.length;u+=1)if(!vi(h[u].charCodeAt(0),i))return!1;return!0}(e,zi.isLoaded())},Gt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Gt.prototype.getCrossfadeParameters=function(){var e=this.zoom,r=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*r}};var xo=function(e,r){this.property=e,this.value=r,this.expression=function(i,u){if(tu(i))return new us(i,u);if(Qs(i)){var h=Ah(i,u);if(h.result==="error")throw new Error(h.value.map(function(v){return v.key+": "+v.message}).join(", "));return h.value}var d=i;return typeof i=="string"&&u.type==="color"&&(d=cr.parse(i)),{kind:"constant",evaluate:function(){return d}}}(r===void 0?e.specification.default:r,e.specification)};xo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},xo.prototype.possiblyEvaluate=function(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)};var ji=function(e){this.property=e,this.value=new xo(e,void 0)};ji.prototype.transitioned=function(e,r){return new Oa(this.property,this.value,r,Ot({},e.transition,this.transition),e.now)},ji.prototype.untransitioned=function(){return new Oa(this.property,this.value,null,{},0)};var On=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};On.prototype.getValue=function(e){return Mn(this._values[e].value.value)},On.prototype.setValue=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new ji(this._values[e].property)),this._values[e].value=new xo(this._values[e].property,r===null?void 0:Mn(r))},On.prototype.getTransition=function(e){return Mn(this._values[e].transition)},On.prototype.setTransition=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new ji(this._values[e].property)),this._values[e].transition=Mn(r)||void 0},On.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h);var d=this.getTransition(u);d!==void 0&&(e[u+"-transition"]=d)}return e},On.prototype.transitioned=function(e,r){for(var i=new ta(this._properties),u=0,h=Object.keys(this._values);u<h.length;u+=1){var d=h[u];i._values[d]=this._values[d].transitioned(e,r._values[d])}return i},On.prototype.untransitioned=function(){for(var e=new ta(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r];e._values[u]=this._values[u].untransitioned()}return e};var Oa=function(e,r,i,u,h){this.property=e,this.value=r,this.begin=h+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)};Oa.prototype.possiblyEvaluate=function(e,r,i){var u=e.now||0,h=this.value.possiblyEvaluate(e,r,i),d=this.prior;if(d){if(u>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(u<this.begin)return d.possiblyEvaluate(e,r,i);var v=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,r,i),h,function(w){if(w<=0)return 0;if(w>=1)return 1;var T=w*w,A=T*w;return 4*(w<.5?A:3*(w-T)+A-.75)}(v))}return h};var ta=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};ta.prototype.possiblyEvaluate=function(e,r,i){for(var u=new ul(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u},ta.prototype.hasTransition=function(){for(var e=0,r=Object.keys(this._values);e<r.length;e+=1)if(this._values[r[e]].prior)return!0;return!1};var ao=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ao.prototype.getValue=function(e){return Mn(this._values[e].value)},ao.prototype.setValue=function(e,r){this._values[e]=new xo(this._values[e].property,r===null?void 0:Mn(r))},ao.prototype.serialize=function(){for(var e={},r=0,i=Object.keys(this._values);r<i.length;r+=1){var u=i[r],h=this.getValue(u);h!==void 0&&(e[u]=h)}return e},ao.prototype.possiblyEvaluate=function(e,r,i){for(var u=new ul(this._properties),h=0,d=Object.keys(this._values);h<d.length;h+=1){var v=d[h];u._values[v]=this._values[v].possiblyEvaluate(e,r,i)}return u};var Jn=function(e,r,i){this.property=e,this.value=r,this.parameters=i};Jn.prototype.isConstant=function(){return this.value.kind==="constant"},Jn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Jn.prototype.evaluate=function(e,r,i,u){return this.property.evaluate(this.value,this.parameters,e,r,i,u)};var ul=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};ul.prototype.get=function(e){return this._values[e]};var bt=function(e){this.specification=e};bt.prototype.possiblyEvaluate=function(e,r){return e.expression.evaluate(r)},bt.prototype.interpolate=function(e,r,i){var u=os[this.specification.type];return u?u(e,r,i):e};var yt=function(e,r){this.specification=e,this.overrides=r};yt.prototype.possiblyEvaluate=function(e,r,i,u){return new Jn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,u)}:e.expression,r)},yt.prototype.interpolate=function(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Jn(this,{kind:"constant",value:void 0},e.parameters);var u=os[this.specification.type];return u?new Jn(this,{kind:"constant",value:u(e.value.value,r.value.value,i)},e.parameters):e},yt.prototype.evaluate=function(e,r,i,u,h,d){return e.kind==="constant"?e.value:e.evaluate(r,i,u,h,d)};var fu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u,h,d){if(i.value===void 0)return new Jn(this,{kind:"constant",value:void 0},u);if(i.expression.kind==="constant"){var v=i.expression.evaluate(u,null,{},h,d),w=i.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(w,w,w,u);return new Jn(this,{kind:"constant",value:T},u)}if(i.expression.kind==="camera"){var A=this._calculate(i.expression.evaluate({zoom:u.zoom-1}),i.expression.evaluate({zoom:u.zoom}),i.expression.evaluate({zoom:u.zoom+1}),u);return new Jn(this,{kind:"constant",value:A},u)}return new Jn(this,i.expression,u)},r.prototype.evaluate=function(i,u,h,d,v,w){if(i.kind==="source"){var T=i.evaluate(u,h,d,v,w);return this._calculate(T,T,T,u)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(u.zoom)-1},h,d),i.evaluate({zoom:Math.floor(u.zoom)},h,d),i.evaluate({zoom:Math.floor(u.zoom)+1},h,d),u):i.value},r.prototype._calculate=function(i,u,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:i,to:u}:{from:h,to:u}},r.prototype.interpolate=function(i){return i},r}(yt),Yn=function(e){this.specification=e};Yn.prototype.possiblyEvaluate=function(e,r,i,u){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(r,null,{},i,u);return this._calculate(h,h,h,r)}return this._calculate(e.expression.evaluate(new Gt(Math.floor(r.zoom-1),r)),e.expression.evaluate(new Gt(Math.floor(r.zoom),r)),e.expression.evaluate(new Gt(Math.floor(r.zoom+1),r)),r)}},Yn.prototype._calculate=function(e,r,i,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:i,to:r}},Yn.prototype.interpolate=function(e){return e};var so=function(e){this.specification=e};so.prototype.possiblyEvaluate=function(e,r,i,u){return!!e.expression.evaluate(r,null,{},i,u)},so.prototype.interpolate=function(){return!1};var Dn=function(e){for(var r in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[r];i.specification.overridable&&this.overridableProperties.push(r);var u=this.defaultPropertyValues[r]=new xo(i,void 0),h=this.defaultTransitionablePropertyValues[r]=new ji(i);this.defaultTransitioningPropertyValues[r]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=u.possiblyEvaluate({})}};ft("DataDrivenProperty",yt),ft("DataConstantProperty",bt),ft("CrossFadedDataDrivenProperty",fu),ft("CrossFadedProperty",Yn),ft("ColorRampProperty",so);var bo=function(e){function r(i,u){if(e.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new ao(u.layout)),u.paint)){for(var h in this._transitionablePaint=new On(u.paint),i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(var d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ul(u.paint)}}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)},r.prototype.setLayoutProperty=function(i,u,h){h===void 0&&(h={}),u!=null&&this._validate(ol,"layers."+this.id+".layout."+i,i,u,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)},r.prototype.getPaintProperty=function(i){return Bi(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},r.prototype.setPaintProperty=function(i,u,h){if(h===void 0&&(h={}),u!=null&&this._validate(im,"layers."+this.id+".paint."+i,i,u,h))return!1;if(Bi(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;var d=this._transitionablePaint._values[i],v=d.property.specification["property-type"]==="cross-faded-data-driven",w=d.value.isDataDriven(),T=d.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);var A=this._transitionablePaint._values[i].value;return A.isDataDriven()||w||v||this._handleOverridablePaintPropertyUpdate(i,T,A)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!1},r.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(i,u){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)},r.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),rn(i,function(u,h){return!(u===void 0||h==="layout"&&!Object.keys(u).length||h==="paint"&&!Object.keys(u).length)})},r.prototype._validate=function(i,u,h,d,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&al(this,i.call(il,{key:u,layerType:this.type,objectKey:h,value:d,styleSpec:V,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var i in this.paint._values){var u=this.paint.get(i);if(u instanceof Jn&&Ma(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1},r}(ce),Vc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},du=function(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},fr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Cn(e,r){r===void 0&&(r=1);var i=0,u=0;return{members:e.map(function(h){var d=Vc[h.type].BYTES_PER_ELEMENT,v=i=Dh(i,Math.max(r,d)),w=h.components||1;return u=Math.max(u,d),i+=d*w,{name:h.name,type:h.type,components:w,offset:v}}),size:Dh(i,Math.max(u,r)),alignment:r}}function Dh(e,r){return Math.ceil(e/r)*r}fr.serialize=function(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},fr.deserialize=function(e){var r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},fr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},fr.prototype.clear=function(){this.length=0},fr.prototype.resize=function(e){this.reserve(e),this.length=e},fr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},fr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Da=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.int16[d+0]=u,this.int16[d+1]=h,i},r}(fr);Da.prototype.bytesPerElement=4,ft("StructArrayLayout2i4",Da);var jc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=4*i;return this.int16[w+0]=u,this.int16[w+1]=h,this.int16[w+2]=d,this.int16[w+3]=v,i},r}(fr);jc.prototype.bytesPerElement=8,ft("StructArrayLayout4i8",jc);var Bo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=d,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(fr);Bo.prototype.bytesPerElement=12,ft("StructArrayLayout2i4i12",Bo);var xi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=4*i,k=8*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.uint8[k+4]=d,this.uint8[k+5]=v,this.uint8[k+6]=w,this.uint8[k+7]=T,i},r}(fr);xi.prototype.bytesPerElement=8,ft("StructArrayLayout2i4ub8",xi);var hs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.float32[d+0]=u,this.float32[d+1]=h,i},r}(fr);hs.prototype.bytesPerElement=8,ft("StructArrayLayout2f8",hs);var wo=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,k,M){var O=this.length;return this.resize(O+1),this.emplace(O,i,u,h,d,v,w,T,A,k,M)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,k,M,O){var F=10*i;return this.uint16[F+0]=u,this.uint16[F+1]=h,this.uint16[F+2]=d,this.uint16[F+3]=v,this.uint16[F+4]=w,this.uint16[F+5]=T,this.uint16[F+6]=A,this.uint16[F+7]=k,this.uint16[F+8]=M,this.uint16[F+9]=O,i},r}(fr);wo.prototype.bytesPerElement=20,ft("StructArrayLayout10ui20",wo);var mu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,k,M,O,F){var G=this.length;return this.resize(G+1),this.emplace(G,i,u,h,d,v,w,T,A,k,M,O,F)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,k,M,O,F,G){var $=12*i;return this.int16[$+0]=u,this.int16[$+1]=h,this.int16[$+2]=d,this.int16[$+3]=v,this.uint16[$+4]=w,this.uint16[$+5]=T,this.uint16[$+6]=A,this.uint16[$+7]=k,this.int16[$+8]=M,this.int16[$+9]=O,this.int16[$+10]=F,this.int16[$+11]=G,i},r}(fr);mu.prototype.bytesPerElement=24,ft("StructArrayLayout4i4ui4i24",mu);var fs=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.float32[v+0]=u,this.float32[v+1]=h,this.float32[v+2]=d,i},r}(fr);fs.prototype.bytesPerElement=12,ft("StructArrayLayout3f12",fs);var cl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint32[1*i+0]=u,i},r}(fr);cl.prototype.bytesPerElement=4,ft("StructArrayLayout1ul4",cl);var qc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,k){var M=this.length;return this.resize(M+1),this.emplace(M,i,u,h,d,v,w,T,A,k)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,k,M){var O=10*i,F=5*i;return this.int16[O+0]=u,this.int16[O+1]=h,this.int16[O+2]=d,this.int16[O+3]=v,this.int16[O+4]=w,this.int16[O+5]=T,this.uint32[F+3]=A,this.uint16[O+8]=k,this.uint16[O+9]=M,i},r}(fr);qc.prototype.bytesPerElement=20,ft("StructArrayLayout6i1ul2ui20",qc);var ds=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w){var T=this.length;return this.resize(T+1),this.emplace(T,i,u,h,d,v,w)},r.prototype.emplace=function(i,u,h,d,v,w,T){var A=6*i;return this.int16[A+0]=u,this.int16[A+1]=h,this.int16[A+2]=d,this.int16[A+3]=v,this.int16[A+4]=w,this.int16[A+5]=T,i},r}(fr);ds.prototype.bytesPerElement=12,ft("StructArrayLayout2i2i2i12",ds);var Ba=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v){var w=this.length;return this.resize(w+1),this.emplace(w,i,u,h,d,v)},r.prototype.emplace=function(i,u,h,d,v,w){var T=4*i,A=8*i;return this.float32[T+0]=u,this.float32[T+1]=h,this.float32[T+2]=d,this.int16[A+6]=v,this.int16[A+7]=w,i},r}(fr);Ba.prototype.bytesPerElement=16,ft("StructArrayLayout2f1f2i16",Ba);var Zc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=12*i,T=3*i;return this.uint8[w+0]=u,this.uint8[w+1]=h,this.float32[T+1]=d,this.float32[T+2]=v,i},r}(fr);Zc.prototype.bytesPerElement=12,ft("StructArrayLayout2ub2f12",Zc);var ra=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.uint16[v+0]=u,this.uint16[v+1]=h,this.uint16[v+2]=d,i},r}(fr);ra.prototype.bytesPerElement=6,ft("StructArrayLayout3ui6",ra);var na=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he,ye){var we=24*i,Se=12*i,De=48*i;return this.int16[we+0]=u,this.int16[we+1]=h,this.uint16[we+2]=d,this.uint16[we+3]=v,this.uint32[Se+2]=w,this.uint32[Se+3]=T,this.uint32[Se+4]=A,this.uint16[we+10]=k,this.uint16[we+11]=M,this.uint16[we+12]=O,this.float32[Se+7]=F,this.float32[Se+8]=G,this.uint8[De+36]=$,this.uint8[De+37]=ie,this.uint8[De+38]=Q,this.uint32[Se+10]=he,this.int16[we+22]=ye,i},r}(fr);na.prototype.bytesPerElement=48,ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",na);var gu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Nt){var kt=this.length;return this.resize(kt+1),this.emplace(kt,i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Nt)},r.prototype.emplace=function(i,u,h,d,v,w,T,A,k,M,O,F,G,$,ie,Q,he,ye,we,Se,De,Ge,Qe,_t,ot,Et,st,Nt,kt){var vt=34*i,qt=17*i;return this.int16[vt+0]=u,this.int16[vt+1]=h,this.int16[vt+2]=d,this.int16[vt+3]=v,this.int16[vt+4]=w,this.int16[vt+5]=T,this.int16[vt+6]=A,this.int16[vt+7]=k,this.uint16[vt+8]=M,this.uint16[vt+9]=O,this.uint16[vt+10]=F,this.uint16[vt+11]=G,this.uint16[vt+12]=$,this.uint16[vt+13]=ie,this.uint16[vt+14]=Q,this.uint16[vt+15]=he,this.uint16[vt+16]=ye,this.uint16[vt+17]=we,this.uint16[vt+18]=Se,this.uint16[vt+19]=De,this.uint16[vt+20]=Ge,this.uint16[vt+21]=Qe,this.uint16[vt+22]=_t,this.uint32[qt+12]=ot,this.float32[qt+13]=Et,this.float32[qt+14]=st,this.float32[qt+15]=Nt,this.float32[qt+16]=kt,i},r}(fr);gu.prototype.bytesPerElement=68,ft("StructArrayLayout8i15ui1ul4f68",gu);var ia=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.float32[1*i+0]=u,i},r}(fr);ia.prototype.bytesPerElement=4,ft("StructArrayLayout1f4",ia);var qi=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=3*i;return this.int16[v+0]=u,this.int16[v+1]=h,this.int16[v+2]=d,i},r}(fr);qi.prototype.bytesPerElement=6,ft("StructArrayLayout3i6",qi);var Hc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h){var d=this.length;return this.resize(d+1),this.emplace(d,i,u,h)},r.prototype.emplace=function(i,u,h,d){var v=4*i;return this.uint32[2*i+0]=u,this.uint16[v+2]=h,this.uint16[v+3]=d,i},r}(fr);Hc.prototype.bytesPerElement=8,ft("StructArrayLayout1ul2ui8",Hc);var pl=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u){var h=this.length;return this.resize(h+1),this.emplace(h,i,u)},r.prototype.emplace=function(i,u,h){var d=2*i;return this.uint16[d+0]=u,this.uint16[d+1]=h,i},r}(fr);pl.prototype.bytesPerElement=4,ft("StructArrayLayout2ui4",pl);var Gc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i){var u=this.length;return this.resize(u+1),this.emplace(u,i)},r.prototype.emplace=function(i,u){return this.uint16[1*i+0]=u,i},r}(fr);Gc.prototype.bytesPerElement=2,ft("StructArrayLayout1ui2",Gc);var yu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(i,u,h,d){var v=this.length;return this.resize(v+1),this.emplace(v,i,u,h,d)},r.prototype.emplace=function(i,u,h,d,v){var w=4*i;return this.float32[w+0]=u,this.float32[w+1]=h,this.float32[w+2]=d,this.float32[w+3]=v,i},r}(fr);yu.prototype.bytesPerElement=16,ft("StructArrayLayout4f16",yu);var o=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new ze(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,i),r}(du);o.prototype.size=20;var s=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new o(this,i)},r}(qc);ft("CollisionBoxArray",s);var a=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,i),r}(du);a.prototype.size=48;var c=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new a(this,i)},r}(na);ft("PlacedSymbolArray",c);var g=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,i),r}(du);g.prototype.size=68;var _=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new g(this,i)},r}(gu);ft("SymbolInstanceArray",_);var b=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getoffsetX=function(i){return this.float32[1*i+0]},r}(ia);ft("GlyphOffsetArray",b);var S=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getx=function(i){return this.int16[3*i+0]},r.prototype.gety=function(i){return this.int16[3*i+1]},r.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},r}(qi);ft("SymbolLineVertexArray",S);var I=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,i),r}(du);I.prototype.size=8;var L=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(i){return new I(this,i)},r}(Hc);ft("FeatureIndexArray",L);var N=Cn([{name:"a_pos",components:2,type:"Int16"}],4).members,j=function(e){e===void 0&&(e=[]),this.segments=e};function q(e,r){return 256*(e=Rt(Math.floor(e),0,255))+Rt(Math.floor(r),0,255)}j.prototype.prepareSegment=function(e,r,i,u){var h=this.segments[this.segments.length-1];return e>j.MAX_VERTEX_ARRAY_LENGTH&&dr("Max vertices per segment is "+j.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>j.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==u)&&(h={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},u!==void 0&&(h.sortKey=u),this.segments.push(h)),h},j.prototype.get=function(){return this.segments},j.prototype.destroy=function(){for(var e=0,r=this.segments;e<r.length;e+=1){var i=r[e];for(var u in i.vaos)i.vaos[u].destroy()}},j.simpleSegment=function(e,r,i,u){return new j([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])},j.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ft("SegmentVector",j);var X=Cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),K=ke(function(e){e.exports=function(r,i){var u,h,d,v,w,T,A,k;for(h=r.length-(u=3&r.length),d=i,w=3432918353,T=461845907,k=0;k<h;)A=255&r.charCodeAt(k)|(255&r.charCodeAt(++k))<<8|(255&r.charCodeAt(++k))<<16|(255&r.charCodeAt(++k))<<24,++k,d=27492+(65535&(v=5*(65535&(d=(d^=A=(65535&(A=(A=(65535&A)*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&r.charCodeAt(k+2))<<16;case 2:A^=(255&r.charCodeAt(k+1))<<8;case 1:d^=A=(65535&(A=(A=(65535&(A^=255&r.charCodeAt(k)))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return d^=r.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0}}),re=ke(function(e){e.exports=function(r,i){for(var u,h=r.length,d=i^h,v=0;h>=4;)u=1540483477*(65535&(u=255&r.charCodeAt(v)|(255&r.charCodeAt(++v))<<8|(255&r.charCodeAt(++v))<<16|(255&r.charCodeAt(++v))<<24))+((1540483477*(u>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:d^=(255&r.charCodeAt(v+2))<<16;case 2:d^=(255&r.charCodeAt(v+1))<<8;case 1:d=1540483477*(65535&(d^=255&r.charCodeAt(v)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0}}),H=K,te=re;H.murmur3=K,H.murmur2=te;var le=function(){this.ids=[],this.positions=[],this.indexed=!1};le.prototype.add=function(e,r,i,u){this.ids.push(Ce(e)),this.positions.push(r,i,u)},le.prototype.getPositions=function(e){for(var r=Ce(e),i=0,u=this.ids.length-1;i<u;){var h=i+u>>1;this.ids[h]>=r?u=h:i=h+1}for(var d=[];this.ids[i]===r;)d.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return d},le.serialize=function(e,r){var i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function h(d,v,w,T){for(;w<T;){for(var A=d[w+T>>1],k=w-1,M=T+1;;){do k++;while(d[k]<A);do M--;while(d[M]>A);if(k>=M)break;Ee(d,k,M),Ee(v,3*k,3*M),Ee(v,3*k+1,3*M+1),Ee(v,3*k+2,3*M+2)}M-w<T-M?(h(d,v,w,M),w=M+1):(h(d,v,M+1,T),T=M)}}(i,u,0,i.length-1),r&&r.push(i.buffer,u.buffer),{ids:i,positions:u}},le.deserialize=function(e){var r=new le;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r};var me=Math.pow(2,53)-1;function Ce(e){var r=+e;return!isNaN(r)&&r<=me?r:H(String(e))}function Ee(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}ft("FeaturePositionMap",le);var Ie=function(e,r){this.gl=e.gl,this.location=r},Ne=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},r}(Ie),We=function(e){function r(i,u){e.call(this,i,u),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},r}(Ie),Ke=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},r}(Ie),ut=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},r}(Ie),wt=function(e){function r(i,u){e.call(this,i,u),this.current=[0,0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},r}(Ie),Ct=function(e){function r(i,u){e.call(this,i,u),this.current=cr.transparent}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},r}(Ie),Tt=new Float32Array(16),nr=function(e){function r(i,u){e.call(this,i,u),this.current=Tt}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},r}(Ie);function pt(e){return[q(255*e.r,255*e.g),q(255*e.b,255*e.a)]}var Lt=function(e,r,i){this.value=e,this.uniformNames=r.map(function(u){return"u_"+u}),this.type=i};Lt.prototype.setUniform=function(e,r,i){e.set(i.constantOr(this.value))},Lt.prototype.getBinding=function(e,r,i){return this.type==="color"?new Ct(e,r):new We(e,r)};var Ft=function(e,r){this.uniformNames=r.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ft.prototype.setConstantPatternPositions=function(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr},Ft.prototype.setUniform=function(e,r,i,u){var h=u==="u_pattern_to"?this.patternTo:u==="u_pattern_from"?this.patternFrom:u==="u_pixel_ratio_to"?this.pixelRatioTo:u==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},Ft.prototype.getBinding=function(e,r,i){return i.substr(0,9)==="u_pattern"?new wt(e,r):new We(e,r)};var zt=function(e,r,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(function(h){return{name:"a_"+h,type:"Float32",components:i==="color"?2:1,offset:0}}),this.paintVertexArray=new u};zt.prototype.populatePaintArray=function(e,r,i,u,h){var d=this.paintVertexArray.length,v=this.expression.evaluate(new Gt(0),r,{},u,[],h);this.paintVertexArray.resize(e),this._setPaintValue(d,e,v)},zt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:0},i,u);this._setPaintValue(e,r,h)},zt.prototype._setPaintValue=function(e,r,i){if(this.type==="color")for(var u=pt(i),h=e;h<r;h++)this.paintVertexArray.emplace(h,u[0],u[1]);else{for(var d=e;d<r;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},zt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Mt=function(e,r,i,u,h,d){this.expression=e,this.uniformNames=r.map(function(v){return"u_"+v+"_t"}),this.type=i,this.useIntegerZoom=u,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:i==="color"?4:2,offset:0}}),this.paintVertexArray=new d};Mt.prototype.populatePaintArray=function(e,r,i,u,h){var d=this.expression.evaluate(new Gt(this.zoom),r,{},u,[],h),v=this.expression.evaluate(new Gt(this.zoom+1),r,{},u,[],h),w=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(w,e,d,v)},Mt.prototype.updatePaintArray=function(e,r,i,u){var h=this.expression.evaluate({zoom:this.zoom},i,u),d=this.expression.evaluate({zoom:this.zoom+1},i,u);this._setPaintValue(e,r,h,d)},Mt.prototype._setPaintValue=function(e,r,i,u){if(this.type==="color")for(var h=pt(i),d=pt(u),v=e;v<r;v++)this.paintVertexArray.emplace(v,h[0],h[1],d[0],d[1]);else{for(var w=e;w<r;w++)this.paintVertexArray.emplace(w,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}},Mt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Mt.prototype.setUniform=function(e,r){var i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,u=Rt(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(u)},Mt.prototype.getBinding=function(e,r,i){return new We(e,r)};var Bt=function(e,r,i,u,h,d){this.expression=e,this.type=r,this.useIntegerZoom=i,this.zoom=u,this.layerId=d,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};Bt.prototype.populatePaintArray=function(e,r,i){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],i)},Bt.prototype.updatePaintArray=function(e,r,i,u,h){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],h)},Bt.prototype._setPaintValues=function(e,r,i,u){if(u&&i){var h=u[i.min],d=u[i.mid],v=u[i.max];if(h&&d&&v)for(var w=e;w<r;w++)this.zoomInPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],d.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(w,d.tl[0],d.tl[1],d.br[0],d.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],d.pixelRatio,v.pixelRatio)}},Bt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,X.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,X.members,this.expression.isStateDependent))},Bt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Pt=function(e,r,i){this.binders={},this._buffers=[];var u=[];for(var h in e.paint._values)if(i(h)){var d=e.paint.get(h);if(d instanceof Jn&&Ma(d.property.specification)){var v=_n(h,e.type),w=d.value,T=d.property.specification.type,A=d.property.useIntegerZoom,k=d.property.specification["property-type"],M=k==="cross-faded"||k==="cross-faded-data-driven";if(w.kind==="constant")this.binders[h]=M?new Ft(w.value,v):new Lt(w.value,v,T),u.push("/u_"+h);else if(w.kind==="source"||M){var O=Zr(h,T,"source");this.binders[h]=M?new Bt(w,T,A,r,O,e.id):new zt(w,v,T,O),u.push("/a_"+h)}else{var F=Zr(h,T,"composite");this.binders[h]=new Mt(w,v,T,A,r,F),u.push("/z_"+h)}}}this.cacheKey=u.sort().join("")};Pt.prototype.getMaxValue=function(e){var r=this.binders[e];return r instanceof zt||r instanceof Mt?r.maxValue:0},Pt.prototype.populatePaintArrays=function(e,r,i,u,h){for(var d in this.binders){var v=this.binders[d];(v instanceof zt||v instanceof Mt||v instanceof Bt)&&v.populatePaintArray(e,r,i,u,h)}},Pt.prototype.setConstantPatternPositions=function(e,r){for(var i in this.binders){var u=this.binders[i];u instanceof Ft&&u.setConstantPatternPositions(e,r)}},Pt.prototype.updatePaintArrays=function(e,r,i,u,h){var d=!1;for(var v in e)for(var w=0,T=r.getPositions(v);w<T.length;w+=1){var A=T[w],k=i.feature(A.index);for(var M in this.binders){var O=this.binders[M];if((O instanceof zt||O instanceof Mt||O instanceof Bt)&&O.expression.isStateDependent===!0){var F=u.paint.get(M);O.expression=F.value,O.updatePaintArray(A.start,A.end,k,e[v],h),d=!0}}}return d},Pt.prototype.defines=function(){var e=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Lt||i instanceof Ft)&&e.push.apply(e,i.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},Pt.prototype.getBinderAttributes=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof zt||i instanceof Mt)for(var u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name);else if(i instanceof Bt)for(var h=0;h<X.members.length;h++)e.push(X.members[h].name)}return e},Pt.prototype.getBinderUniforms=function(){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Lt||i instanceof Ft||i instanceof Mt)for(var u=0,h=i.uniformNames;u<h.length;u+=1)e.push(h[u])}return e},Pt.prototype.getPaintVertexBuffers=function(){return this._buffers},Pt.prototype.getUniforms=function(e,r){var i=[];for(var u in this.binders){var h=this.binders[u];if(h instanceof Lt||h instanceof Ft||h instanceof Mt)for(var d=0,v=h.uniformNames;d<v.length;d+=1){var w=v[d];if(r[w]){var T=h.getBinding(e,r[w],w);i.push({name:w,property:u,binding:T})}}}return i},Pt.prototype.setUniforms=function(e,r,i,u){for(var h=0,d=r;h<d.length;h+=1){var v=d[h],w=v.name,T=v.property;this.binders[T].setUniform(v.binding,u,i.get(T),w)}},Pt.prototype.updatePaintBuffers=function(e){for(var r in this._buffers=[],this.binders){var i=this.binders[r];if(e&&i instanceof Bt){var u=e.fromScale===2?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(i instanceof zt||i instanceof Mt)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Pt.prototype.upload=function(e){for(var r in this.binders){var i=this.binders[r];(i instanceof zt||i instanceof Mt||i instanceof Bt)&&i.upload(e)}this.updatePaintBuffers()},Pt.prototype.destroy=function(){for(var e in this.binders){var r=this.binders[e];(r instanceof zt||r instanceof Mt||r instanceof Bt)&&r.destroy()}};var At=function(e,r,i){i===void 0&&(i=function(){return!0}),this.programConfigurations={};for(var u=0,h=e;u<h.length;u+=1){var d=h[u];this.programConfigurations[d.id]=new Pt(d,r,i)}this.needsUpload=!1,this._featureMap=new le,this._bufferOffset=0};function _n(e,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(r+"-","").replace(/-/g,"_")]}function Zr(e,r,i){var u={color:{source:hs,composite:yu},number:{source:ia,composite:hs}},h=function(d){return{"line-pattern":{source:wo,composite:wo},"fill-pattern":{source:wo,composite:wo},"fill-extrusion-pattern":{source:wo,composite:wo}}[d]}(e);return h&&h[i]||u[r][i]}At.prototype.populatePaintArrays=function(e,r,i,u,h,d){for(var v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,r,u,h,d);r.id!==void 0&&this._featureMap.add(r.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},At.prototype.updatePaintArrays=function(e,r,i,u){for(var h=0,d=i;h<d.length;h+=1){var v=d[h];this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(e,this._featureMap,r,v,u)||this.needsUpload}},At.prototype.get=function(e){return this.programConfigurations[e]},At.prototype.upload=function(e){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}},At.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},ft("ConstantBinder",Lt),ft("CrossFadedConstantBinder",Ft),ft("SourceExpressionBinder",zt),ft("CrossFadedCompositeBinder",Bt),ft("CompositeExpressionBinder",Mt),ft("ProgramConfiguration",Pt,{omit:["_buffers"]}),ft("ProgramConfigurationSet",At);var Vn=Math.pow(2,14)-1,An=-Vn-1;function Vr(e){for(var r=8192/e.extent,i=e.loadGeometry(),u=0;u<i.length;u++)for(var h=i[u],d=0;d<h.length;d++){var v=h[d],w=Math.round(v.x*r),T=Math.round(v.y*r);v.x=Rt(w,An,Vn),v.y=Rt(T,An,Vn),(w<v.x||w>v.x+1||T<v.y||T>v.y+1)&&dr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Yr(e,r){return{type:e.type,id:e.id,properties:e.properties,geometry:r?Vr(e):[]}}function bi(e,r,i,u,h){e.emplaceBack(2*r+(u+1)/2,2*i+(h+1)/2)}var Qn=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new ra,this.segments=new j,this.programConfigurations=new At(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function oa(e,r){for(var i=0;i<e.length;i++)if(Eo(r,e[i]))return!0;for(var u=0;u<r.length;u++)if(Eo(e,r[u]))return!0;return!!hl(e,r)}function si(e,r,i){return!!Eo(e,r)||!!aa(r,e,i)}function lo(e,r){if(e.length===1)return fl(r,e[0]);for(var i=0;i<r.length;i++)for(var u=r[i],h=0;h<u.length;h++)if(Eo(e,u[h]))return!0;for(var d=0;d<e.length;d++)if(fl(r,e[d]))return!0;for(var v=0;v<r.length;v++)if(hl(e,r[v]))return!0;return!1}function Zi(e,r,i){if(e.length>1){if(hl(e,r))return!0;for(var u=0;u<r.length;u++)if(aa(r[u],e,i))return!0}for(var h=0;h<e.length;h++)if(aa(e[h],r,i))return!0;return!1}function hl(e,r){if(e.length===0||r.length===0)return!1;for(var i=0;i<e.length-1;i++)for(var u=e[i],h=e[i+1],d=0;d<r.length-1;d++)if(ms(u,h,r[d],r[d+1]))return!0;return!1}function ms(e,r,i,u){return un(e,i,u)!==un(r,i,u)&&un(e,r,i)!==un(e,r,u)}function aa(e,r,i){var u=i*i;if(r.length===1)return e.distSqr(r[0])<u;for(var h=1;h<r.length;h++)if(gs(e,r[h-1],r[h])<u)return!0;return!1}function gs(e,r,i){var u=r.distSqr(i);if(u===0)return e.distSqr(r);var h=((e.x-r.x)*(i.x-r.x)+(e.y-r.y)*(i.y-r.y))/u;return e.distSqr(h<0?r:h>1?i:i.sub(r)._mult(h)._add(r))}function fl(e,r){for(var i,u,h,d=!1,v=0;v<e.length;v++)for(var w=0,T=(i=e[v]).length-1;w<i.length;T=w++)(u=i[w]).y>r.y!=(h=i[T]).y>r.y&&r.x<(h.x-u.x)*(r.y-u.y)/(h.y-u.y)+u.x&&(d=!d);return d}function Eo(e,r){for(var i=!1,u=0,h=e.length-1;u<e.length;h=u++){var d=e[u],v=e[h];d.y>r.y!=v.y>r.y&&r.x<(v.x-d.x)*(r.y-d.y)/(v.y-d.y)+d.x&&(i=!i)}return i}function dl(e,r,i){var u=i[0],h=i[2];if(e.x<u.x&&r.x<u.x||e.x>h.x&&r.x>h.x||e.y<u.y&&r.y<u.y||e.y>h.y&&r.y>h.y)return!1;var d=un(e,r,i[0]);return d!==un(e,r,i[1])||d!==un(e,r,i[2])||d!==un(e,r,i[3])}function So(e,r,i){var u=r.paint.get(e).value;return u.kind==="constant"?u.value:i.programConfigurations.get(r.id).getMaxValue(e)}function xn(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Fo(e,r,i,u,h){if(!r[0]&&!r[1])return e;var d=ze.convert(r)._mult(h);i==="viewport"&&d._rotate(-u);for(var v=[],w=0;w<e.length;w++)v.push(e[w].sub(d));return v}Qn.prototype.populate=function(e,r,i){var u=this.layers[0],h=[],d=null;u.type==="circle"&&(d=u.layout.get("circle-sort-key"));for(var v=0,w=e;v<w.length;v+=1){var T=w[v],A=T.feature,k=T.id,M=T.index,O=T.sourceLayerIndex,F=this.layers[0]._featureFilter.needGeometry,G=Yr(A,F);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),G,i)){var $=d?d.evaluate(G,{},i):void 0,ie={id:k,properties:A.properties,type:A.type,sourceLayerIndex:O,index:M,geometry:F?G.geometry:Vr(A),patterns:{},sortKey:$};h.push(ie)}}d&&h.sort(function(Qe,_t){return Qe.sortKey-_t.sortKey});for(var Q=0,he=h;Q<he.length;Q+=1){var ye=he[Q],we=ye.geometry,Se=ye.index,De=ye.sourceLayerIndex,Ge=e[Se].feature;this.addFeature(ye,we,Se,i),r.featureIndex.insert(Ge,we,Se,De,this.index)}},Qn.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Qn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qn.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,N),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Qn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qn.prototype.addFeature=function(e,r,i,u){for(var h=0,d=r;h<d.length;h+=1)for(var v=0,w=d[h];v<w.length;v+=1){var T=w[v],A=T.x,k=T.y;if(!(A<0||A>=8192||k<0||k>=8192)){var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=M.vertexLength;bi(this.layoutVertexArray,A,k,-1,-1),bi(this.layoutVertexArray,A,k,1,-1),bi(this.layoutVertexArray,A,k,1,1),bi(this.layoutVertexArray,A,k,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),M.vertexLength+=4,M.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u)},ft("CircleBucket",Qn,{omit:["layers"]});var sa=new Dn({"circle-sort-key":new yt(V.layout_circle["circle-sort-key"])}),Fa={paint:new Dn({"circle-radius":new yt(V.paint_circle["circle-radius"]),"circle-color":new yt(V.paint_circle["circle-color"]),"circle-blur":new yt(V.paint_circle["circle-blur"]),"circle-opacity":new yt(V.paint_circle["circle-opacity"]),"circle-translate":new bt(V.paint_circle["circle-translate"]),"circle-translate-anchor":new bt(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bt(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bt(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(V.paint_circle["circle-stroke-opacity"])}),layout:sa},pr=typeof Float32Array<"u"?Float32Array:Array;function Li(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function li(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3],w=r[4],T=r[5],A=r[6],k=r[7],M=r[8],O=r[9],F=r[10],G=r[11],$=r[12],ie=r[13],Q=r[14],he=r[15],ye=i[0],we=i[1],Se=i[2],De=i[3];return e[0]=ye*u+we*w+Se*M+De*$,e[1]=ye*h+we*T+Se*O+De*ie,e[2]=ye*d+we*A+Se*F+De*Q,e[3]=ye*v+we*k+Se*G+De*he,e[4]=(ye=i[4])*u+(we=i[5])*w+(Se=i[6])*M+(De=i[7])*$,e[5]=ye*h+we*T+Se*O+De*ie,e[6]=ye*d+we*A+Se*F+De*Q,e[7]=ye*v+we*k+Se*G+De*he,e[8]=(ye=i[8])*u+(we=i[9])*w+(Se=i[10])*M+(De=i[11])*$,e[9]=ye*h+we*T+Se*O+De*ie,e[10]=ye*d+we*A+Se*F+De*Q,e[11]=ye*v+we*k+Se*G+De*he,e[12]=(ye=i[12])*u+(we=i[13])*w+(Se=i[14])*M+(De=i[15])*$,e[13]=ye*h+we*T+Se*O+De*ie,e[14]=ye*d+we*A+Se*F+De*Q,e[15]=ye*v+we*k+Se*G+De*he,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,r=0,i=arguments.length;i--;)r+=e[i]*e[i];return Math.sqrt(r)});var Na,om=li;function vu(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3];return e[0]=i[0]*u+i[4]*h+i[8]*d+i[12]*v,e[1]=i[1]*u+i[5]*h+i[9]*d+i[13]*v,e[2]=i[2]*u+i[6]*h+i[10]*d+i[14]*v,e[3]=i[3]*u+i[7]*h+i[11]*d+i[15]*v,e}Na=new pr(3),pr!=Float32Array&&(Na[0]=0,Na[1]=0,Na[2]=0),function(){var e=new pr(4);pr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var am=(function(){var e=new pr(2);pr!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function r(i){e.call(this,i,Fa)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new Qn(i)},r.prototype.queryRadius=function(i){var u=i;return So("circle-radius",this,u)+So("circle-stroke-width",this,u)+xn(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T,A){for(var k=Fo(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),M=this.paint.get("circle-radius").evaluate(u,h)+this.paint.get("circle-stroke-width").evaluate(u,h),O=this.paint.get("circle-pitch-alignment")==="map",F=O?k:function(Ge,Qe){return Ge.map(function(_t){return ml(_t,Qe)})}(k,A),G=O?M*T:M,$=0,ie=d;$<ie.length;$+=1)for(var Q=0,he=ie[$];Q<he.length;Q+=1){var ye=he[Q],we=O?ye:ml(ye,A),Se=G,De=vu([],[ye.x,ye.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Se*=De[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Se*=w.cameraToCenterDistance/De[3]),si(F,we,Se))return!0}return!1},r}(bo));function ml(e,r){var i=vu([],[e.x,e.y,0,1],r);return new ze(i[0]/i[3],i[1]/i[3])}var Bh=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Qn);function ys(e,r,i,u){var h=r.width,d=r.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==h*d*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(h*d*i);return e.width=h,e.height=d,e.data=u,e}function _u(e,r,i){var u=r.width,h=r.height;if(u!==e.width||h!==e.height){var d=ys({},{width:u,height:h},i);sm(e,d,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,h)},i),e.width=u,e.height=h,e.data=d.data}}function sm(e,r,i,u,h,d){if(h.width===0||h.height===0)return r;if(h.width>e.width||h.height>e.height||i.x>e.width-h.width||i.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>r.width||h.height>r.height||u.x>r.width-h.width||u.y>r.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var v=e.data,w=r.data,T=0;T<h.height;T++)for(var A=((i.y+T)*e.width+i.x)*d,k=((u.y+T)*r.width+u.x)*d,M=0;M<h.width*d;M++)w[k+M]=v[A+M];return r}ft("HeatmapBucket",Bh,{omit:["layers"]});var gl=function(e,r){ys(this,e,1,r)};gl.prototype.resize=function(e){_u(this,e,1)},gl.prototype.clone=function(){return new gl({width:this.width,height:this.height},new Uint8Array(this.data))},gl.copy=function(e,r,i,u,h){sm(e,r,i,u,h,1)};var wi=function(e,r){ys(this,e,4,r)};wi.prototype.resize=function(e){_u(this,e,4)},wi.prototype.replace=function(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},wi.prototype.clone=function(){return new wi({width:this.width,height:this.height},new Uint8Array(this.data))},wi.copy=function(e,r,i,u,h){sm(e,r,i,u,h,4)},ft("AlphaImage",gl),ft("RGBAImage",wi);var lw={paint:new Dn({"heatmap-radius":new yt(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bt(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new so(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bt(V.paint_heatmap["heatmap-opacity"])})};function $y(e){var r={},i=e.resolution||256,u=e.clips?e.clips.length:1,h=e.image||new wi({width:i,height:u}),d=function(G,$,ie){r[e.evaluationKey]=ie;var Q=e.expression.evaluate(r);h.data[G+$+0]=Math.floor(255*Q.r/Q.a),h.data[G+$+1]=Math.floor(255*Q.g/Q.a),h.data[G+$+2]=Math.floor(255*Q.b/Q.a),h.data[G+$+3]=Math.floor(255*Q.a)};if(e.clips)for(var v=0,w=0;v<u;++v,w+=4*i)for(var T=0,A=0;T<i;T++,A+=4){var k=T/(i-1),M=e.clips[v];d(w,A,M.start*(1-k)+M.end*k)}else for(var O=0,F=0;O<i;O++,F+=4)d(0,F,O/(i-1));return h}var uw=function(e){function r(i){e.call(this,i,lw),this._updateColorRamp()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new Bh(i)},r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=$y({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(bo),cw={paint:new Dn({"hillshade-illumination-direction":new bt(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bt(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bt(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bt(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bt(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bt(V.paint_hillshade["hillshade-accent-color"])})},pw=function(e){function r(i){e.call(this,i,cw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(bo),hw=Cn([{name:"a_pos",components:2,type:"Int16"}],4).members,lm=Fh,fw=Fh;function Fh(e,r,i){i=i||2;var u,h,d,v,w,T,A,k=r&&r.length,M=k?r[0]*i:e.length,O=Ky(e,0,M,i,!0),F=[];if(!O||O.next===O.prev)return F;if(k&&(O=function($,ie,Q,he){var ye,we,Se,De=[];for(ye=0,we=ie.length;ye<we;ye++)(Se=Ky($,ie[ye]*he,ye<we-1?ie[ye+1]*he:$.length,he,!1))===Se.next&&(Se.steiner=!0),De.push(bw(Se));for(De.sort(vw),ye=0;ye<De.length;ye++)_w(De[ye],Q),Q=vs(Q,Q.next);return Q}(e,r,O,i)),e.length>80*i){u=d=e[0],h=v=e[1];for(var G=i;G<M;G+=i)(w=e[G])<u&&(u=w),(T=e[G+1])<h&&(h=T),w>d&&(d=w),T>v&&(v=T);A=(A=Math.max(d-u,v-h))!==0?1/A:0}return $c(O,F,i,u,h,A),F}function Ky(e,r,i,u,h){var d,v;if(h===pm(e,r,i,u)>0)for(d=r;d<i;d+=u)v=Jy(d,e[d],e[d+1],v);else for(d=i-u;d>=r;d-=u)v=Jy(d,e[d],e[d+1],v);return v&&Nh(v,v.next)&&(Wc(v),v=v.next),v}function vs(e,r){if(!e)return e;r||(r=e);var i,u=e;do if(i=!1,u.steiner||!Nh(u,u.next)&&hn(u.prev,u,u.next)!==0)u=u.next;else{if(Wc(u),(u=r=u.prev)===u.next)break;i=!0}while(i||u!==r);return r}function $c(e,r,i,u,h,d,v){if(e){!v&&d&&function(k,M,O,F){var G=k;do G.z===null&&(G.z=um(G.x,G.y,M,O,F)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==k);G.prevZ.nextZ=null,G.prevZ=null,function($){var ie,Q,he,ye,we,Se,De,Ge,Qe=1;do{for(Q=$,$=null,we=null,Se=0;Q;){for(Se++,he=Q,De=0,ie=0;ie<Qe&&(De++,he=he.nextZ);ie++);for(Ge=Qe;De>0||Ge>0&&he;)De!==0&&(Ge===0||!he||Q.z<=he.z)?(ye=Q,Q=Q.nextZ,De--):(ye=he,he=he.nextZ,Ge--),we?we.nextZ=ye:$=ye,ye.prevZ=we,we=ye;Q=he}we.nextZ=null,Qe*=2}while(Se>1)}(G)}(e,u,h,d);for(var w,T,A=e;e.prev!==e.next;)if(w=e.prev,T=e.next,d?mw(e,u,h,d):dw(e))r.push(w.i/i),r.push(e.i/i),r.push(T.i/i),Wc(e),e=T.next,A=T.next;else if((e=T)===A){v?v===1?$c(e=gw(vs(e),r,i),r,i,u,h,d,2):v===2&&yw(e,r,i,u,h,d):$c(vs(e),r,i,u,h,d,1);break}}}function dw(e){var r=e.prev,i=e,u=e.next;if(hn(r,i,u)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(xu(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&hn(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function mw(e,r,i,u){var h=e.prev,d=e,v=e.next;if(hn(h,d,v)>=0)return!1;for(var w=h.x>d.x?h.x>v.x?h.x:v.x:d.x>v.x?d.x:v.x,T=h.y>d.y?h.y>v.y?h.y:v.y:d.y>v.y?d.y:v.y,A=um(h.x<d.x?h.x<v.x?h.x:v.x:d.x<v.x?d.x:v.x,h.y<d.y?h.y<v.y?h.y:v.y:d.y<v.y?d.y:v.y,r,i,u),k=um(w,T,r,i,u),M=e.prevZ,O=e.nextZ;M&&M.z>=A&&O&&O.z<=k;){if(M!==e.prev&&M!==e.next&&xu(h.x,h.y,d.x,d.y,v.x,v.y,M.x,M.y)&&hn(M.prev,M,M.next)>=0||(M=M.prevZ,O!==e.prev&&O!==e.next&&xu(h.x,h.y,d.x,d.y,v.x,v.y,O.x,O.y)&&hn(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;M&&M.z>=A;){if(M!==e.prev&&M!==e.next&&xu(h.x,h.y,d.x,d.y,v.x,v.y,M.x,M.y)&&hn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;O&&O.z<=k;){if(O!==e.prev&&O!==e.next&&xu(h.x,h.y,d.x,d.y,v.x,v.y,O.x,O.y)&&hn(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function gw(e,r,i){var u=e;do{var h=u.prev,d=u.next.next;!Nh(h,d)&&Wy(h,u,u.next,d)&&Kc(h,d)&&Kc(d,h)&&(r.push(h.i/i),r.push(u.i/i),r.push(d.i/i),Wc(u),Wc(u.next),u=e=d),u=u.next}while(u!==e);return vs(u)}function yw(e,r,i,u,h,d){var v=e;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&ww(v,w)){var T=Xy(v,w);return v=vs(v,v.next),T=vs(T,T.next),$c(v,r,i,u,h,d),void $c(T,r,i,u,h,d)}w=w.next}v=v.next}while(v!==e)}function vw(e,r){return e.x-r.x}function _w(e,r){if(r=function(u,h){var d,v=h,w=u.x,T=u.y,A=-1/0;do{if(T<=v.y&&T>=v.next.y&&v.next.y!==v.y){var k=v.x+(T-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(k<=w&&k>A){if(A=k,k===w){if(T===v.y)return v;if(T===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(w===A)return d;var M,O=d,F=d.x,G=d.y,$=1/0;v=d;do w>=v.x&&v.x>=F&&w!==v.x&&xu(T<G?w:A,T,F,G,T<G?A:w,T,v.x,v.y)&&(M=Math.abs(T-v.y)/(w-v.x),Kc(v,u)&&(M<$||M===$&&(v.x>d.x||v.x===d.x&&xw(d,v)))&&(d=v,$=M)),v=v.next;while(v!==O);return d}(e,r)){var i=Xy(r,e);vs(r,r.next),vs(i,i.next)}}function xw(e,r){return hn(e.prev,e,r.prev)<0&&hn(r.next,e,e.next)<0}function um(e,r,i,u,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-u)*h)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function bw(e){var r=e,i=e;do(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next;while(r!==e);return i}function xu(e,r,i,u,h,d,v,w){return(h-v)*(r-w)-(e-v)*(d-w)>=0&&(e-v)*(u-w)-(i-v)*(r-w)>=0&&(i-v)*(d-w)-(h-v)*(u-w)>=0}function ww(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(i,u){var h=i;do{if(h.i!==i.i&&h.next.i!==i.i&&h.i!==u.i&&h.next.i!==u.i&&Wy(h,h.next,i,u))return!0;h=h.next}while(h!==i);return!1}(e,r)&&(Kc(e,r)&&Kc(r,e)&&function(i,u){var h=i,d=!1,v=(i.x+u.x)/2,w=(i.y+u.y)/2;do h.y>w!=h.next.y>w&&h.next.y!==h.y&&v<(h.next.x-h.x)*(w-h.y)/(h.next.y-h.y)+h.x&&(d=!d),h=h.next;while(h!==i);return d}(e,r)&&(hn(e.prev,e,r.prev)||hn(e,r.prev,r))||Nh(e,r)&&hn(e.prev,e,e.next)>0&&hn(r.prev,r,r.next)>0)}function hn(e,r,i){return(r.y-e.y)*(i.x-r.x)-(r.x-e.x)*(i.y-r.y)}function Nh(e,r){return e.x===r.x&&e.y===r.y}function Wy(e,r,i,u){var h=Vh(hn(e,r,i)),d=Vh(hn(e,r,u)),v=Vh(hn(i,u,e)),w=Vh(hn(i,u,r));return h!==d&&v!==w||!(h!==0||!Uh(e,i,r))||!(d!==0||!Uh(e,u,r))||!(v!==0||!Uh(i,e,u))||!(w!==0||!Uh(i,r,u))}function Uh(e,r,i){return r.x<=Math.max(e.x,i.x)&&r.x>=Math.min(e.x,i.x)&&r.y<=Math.max(e.y,i.y)&&r.y>=Math.min(e.y,i.y)}function Vh(e){return e>0?1:e<0?-1:0}function Kc(e,r){return hn(e.prev,e,e.next)<0?hn(e,r,e.next)>=0&&hn(e,e.prev,r)>=0:hn(e,r,e.prev)<0||hn(e,e.next,r)<0}function Xy(e,r){var i=new cm(e.i,e.x,e.y),u=new cm(r.i,r.x,r.y),h=e.next,d=r.prev;return e.next=r,r.prev=e,i.next=h,h.prev=i,u.next=i,i.prev=u,d.next=u,u.prev=d,u}function Jy(e,r,i,u){var h=new cm(e,r,i);return u?(h.next=u.next,h.prev=u,u.next.prev=h,u.next=h):(h.prev=h,h.next=h),h}function Wc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function cm(e,r,i){this.i=e,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pm(e,r,i,u){for(var h=0,d=r,v=i-u;d<i;d+=u)h+=(e[v]-e[d])*(e[d+1]+e[v+1]),v=d;return h}function Ew(e,r,i,u,h){(function d(v,w,T,A,k){for(;A>T;){if(A-T>600){var M=A-T+1,O=w-T+1,F=Math.log(M),G=.5*Math.exp(2*F/3),$=.5*Math.sqrt(F*G*(M-G)/M)*(O-M/2<0?-1:1);d(v,w,Math.max(T,Math.floor(w-O*G/M+$)),Math.min(A,Math.floor(w+(M-O)*G/M+$)),k)}var ie=v[w],Q=T,he=A;for(Xc(v,T,w),k(v[A],ie)>0&&Xc(v,T,A);Q<he;){for(Xc(v,Q,he),Q++,he--;k(v[Q],ie)<0;)Q++;for(;k(v[he],ie)>0;)he--}k(v[T],ie)===0?Xc(v,T,he):Xc(v,++he,A),he<=w&&(T=he+1),w<=he&&(A=he-1)}})(e,r,i||0,u||e.length-1,h||Sw)}function Xc(e,r,i){var u=e[r];e[r]=e[i],e[i]=u}function Sw(e,r){return e<r?-1:e>r?1:0}function hm(e,r){var i=e.length;if(i<=1)return[e];for(var u,h,d=[],v=0;v<i;v++){var w=to(e[v]);w!==0&&(e[v].area=Math.abs(w),h===void 0&&(h=w<0),h===w<0?(u&&d.push(u),u=[e[v]]):u.push(e[v]))}if(u&&d.push(u),r>1)for(var T=0;T<d.length;T++)d[T].length<=r||(Ew(d[T],r,1,d[T].length-1,Tw),d[T]=d[T].slice(0,r));return d}function Tw(e,r){return r.area-e.area}function fm(e,r,i){for(var u=i.patternDependencies,h=!1,d=0,v=r;d<v.length;d+=1){var w=v[d].paint.get(e+"-pattern");w.isConstant()||(h=!0);var T=w.constantOr(null);T&&(h=!0,u[T.to]=!0,u[T.from]=!0)}return h}function dm(e,r,i,u,h){for(var d=h.patternDependencies,v=0,w=r;v<w.length;v+=1){var T=w[v],A=T.paint.get(e+"-pattern").value;if(A.kind!=="constant"){var k=A.evaluate({zoom:u-1},i,{},h.availableImages),M=A.evaluate({zoom:u},i,{},h.availableImages),O=A.evaluate({zoom:u+1},i,{},h.availableImages);M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,d[k=k&&k.name?k.name:k]=!0,d[M]=!0,d[O]=!0,i.patterns[T.id]={min:k,mid:M,max:O}}}return i}Fh.deviation=function(e,r,i,u){var h=r&&r.length,d=Math.abs(pm(e,0,h?r[0]*i:e.length,i));if(h)for(var v=0,w=r.length;v<w;v++)d-=Math.abs(pm(e,r[v]*i,v<w-1?r[v+1]*i:e.length,i));var T=0;for(v=0;v<u.length;v+=3){var A=u[v]*i,k=u[v+1]*i,M=u[v+2]*i;T+=Math.abs((e[A]-e[M])*(e[k+1]-e[A+1])-(e[A]-e[k])*(e[M+1]-e[A+1]))}return d===0&&T===0?0:Math.abs((T-d)/d)},Fh.flatten=function(e){for(var r=e[0][0].length,i={vertices:[],holes:[],dimensions:r},u=0,h=0;h<e.length;h++){for(var d=0;d<e[h].length;d++)for(var v=0;v<r;v++)i.vertices.push(e[h][d][v]);h>0&&i.holes.push(u+=e[h-1].length)}return i},lm.default=fw;var No=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Da,this.indexArray=new ra,this.indexArray2=new pl,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.segments2=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};No.prototype.populate=function(e,r,i){this.hasPattern=fm("fill",this.layers,r);for(var u=this.layers[0].layout.get("fill-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var w=v[d],T=w.feature,A=w.id,k=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Yr(T,O);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),F,i)){var G=u?u.evaluate(F,{},i,r.availableImages):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:k,geometry:O?F.geometry:Vr(T),patterns:{},sortKey:G};h.push($)}}u&&h.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=dm("fill",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},No.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},No.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},No.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},No.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},No.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hw),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},No.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},No.prototype.addFeature=function(e,r,i,u,h){for(var d=0,v=hm(r,500);d<v.length;d+=1){for(var w=v[d],T=0,A=0,k=w;A<k.length;A+=1)T+=k[A].length;for(var M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=M.vertexLength,F=[],G=[],$=0,ie=w;$<ie.length;$+=1){var Q=ie[$];if(Q.length!==0){Q!==w[0]&&G.push(F.length/2);var he=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),ye=he.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(ye+Q.length-1,ye),F.push(Q[0].x),F.push(Q[0].y);for(var we=1;we<Q.length;we++)this.layoutVertexArray.emplaceBack(Q[we].x,Q[we].y),this.indexArray2.emplaceBack(ye+we-1,ye+we),F.push(Q[we].x),F.push(Q[we].y);he.vertexLength+=Q.length,he.primitiveLength+=Q.length}}for(var Se=lm(F,G),De=0;De<Se.length;De+=3)this.indexArray.emplaceBack(O+Se[De],O+Se[De+1],O+Se[De+2]);M.vertexLength+=T,M.primitiveLength+=Se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillBucket",No,{omit:["layers","patternFeatures"]});var Cw=new Dn({"fill-sort-key":new yt(V.layout_fill["fill-sort-key"])}),Aw={paint:new Dn({"fill-antialias":new bt(V.paint_fill["fill-antialias"]),"fill-opacity":new yt(V.paint_fill["fill-opacity"]),"fill-color":new yt(V.paint_fill["fill-color"]),"fill-outline-color":new yt(V.paint_fill["fill-outline-color"]),"fill-translate":new bt(V.paint_fill["fill-translate"]),"fill-translate-anchor":new bt(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new fu(V.paint_fill["fill-pattern"])}),layout:Cw},Iw=function(e){function r(i){e.call(this,i,Aw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(i){return new No(i)},r.prototype.queryRadius=function(){return xn(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T){return lo(Fo(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),d)},r.prototype.isTileClipped=function(){return!0},r}(bo),kw=Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Yy=bu;function bu(e,r,i,u,h){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=h,e.readFields(Pw,this,r)}function Pw(e,r,i){e==1?r.id=i.readVarint():e==2?function(u,h){for(var d=u.readVarint()+u.pos;u.pos<d;){var v=h._keys[u.readVarint()],w=h._values[u.readVarint()];h.properties[v]=w}}(i,r):e==3?r.type=i.readVarint():e==4&&(r._geometry=i.pos)}function Mw(e){for(var r,i,u=0,h=0,d=e.length,v=d-1;h<d;v=h++)u+=((i=e[v]).x-(r=e[h]).x)*(r.y+i.y);return u}bu.types=["Unknown","Point","LineString","Polygon"],bu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,i=e.readVarint()+e.pos,u=1,h=0,d=0,v=0,w=[];e.pos<i;){if(h<=0){var T=e.readVarint();u=7&T,h=T>>3}if(h--,u===1||u===2)d+=e.readSVarint(),v+=e.readSVarint(),u===1&&(r&&w.push(r),r=[]),r.push(new ze(d,v));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&w.push(r),w},bu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var r=e.readVarint()+e.pos,i=1,u=0,h=0,d=0,v=1/0,w=-1/0,T=1/0,A=-1/0;e.pos<r;){if(u<=0){var k=e.readVarint();i=7&k,u=k>>3}if(u--,i===1||i===2)(h+=e.readSVarint())<v&&(v=h),h>w&&(w=h),(d+=e.readSVarint())<T&&(T=d),d>A&&(A=d);else if(i!==7)throw new Error("unknown command "+i)}return[v,T,w,A]},bu.prototype.toGeoJSON=function(e,r,i){var u,h,d=this.extent*Math.pow(2,i),v=this.extent*e,w=this.extent*r,T=this.loadGeometry(),A=bu.types[this.type];function k(F){for(var G=0;G<F.length;G++){var $=F[G];F[G]=[360*($.x+v)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+w)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var M=[];for(u=0;u<T.length;u++)M[u]=T[u][0];k(T=M);break;case 2:for(u=0;u<T.length;u++)k(T[u]);break;case 3:for(T=function(F){var G=F.length;if(G<=1)return[F];for(var $,ie,Q=[],he=0;he<G;he++){var ye=Mw(F[he]);ye!==0&&(ie===void 0&&(ie=ye<0),ie===ye<0?($&&Q.push($),$=[F[he]]):$.push(F[he]))}return $&&Q.push($),Q}(T),u=0;u<T.length;u++)for(h=0;h<T[u].length;h++)k(T[u][h])}T.length===1?T=T[0]:A="Multi"+A;var O={type:"Feature",geometry:{type:A,coordinates:T},properties:this.properties};return"id"in this&&(O.id=this.id),O};var Qy=ev;function ev(e,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(zw,this,r),this.length=this._features.length}function zw(e,r,i){e===15?r.version=i.readVarint():e===1?r.name=i.readString():e===5?r.extent=i.readVarint():e===2?r._features.push(i.pos):e===3?r._keys.push(i.readString()):e===4&&r._values.push(function(u){for(var h=null,d=u.readVarint()+u.pos;u.pos<d;){var v=u.readVarint()>>3;h=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return h}(i))}function Lw(e,r,i){if(e===3){var u=new Qy(i,i.readVarint()+i.pos);u.length&&(r[u.name]=u)}}ev.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var r=this._pbf.readVarint()+this._pbf.pos;return new Yy(this._pbf,r,this.extent,this._keys,this._values)};var wu={VectorTile:function(e,r){this.layers=e.readFields(Lw,{},r)},VectorTileFeature:Yy,VectorTileLayer:Qy},Rw=wu.VectorTileFeature.types,mm=Math.pow(2,13);function Jc(e,r,i,u,h,d,v,w){e.emplaceBack(r,i,2*Math.floor(u*mm)+v,h*mm*2,d*mm*2,Math.round(w))}var Uo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Bo,this.indexArray=new ra,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Ow(e,r){return e.x===r.x&&(e.x<0||e.x>8192)||e.y===r.y&&(e.y<0||e.y>8192)}Uo.prototype.populate=function(e,r,i){this.features=[],this.hasPattern=fm("fill-extrusion",this.layers,r);for(var u=0,h=e;u<h.length;u+=1){var d=h[u],v=d.feature,w=d.id,T=d.index,A=d.sourceLayerIndex,k=this.layers[0]._featureFilter.needGeometry,M=Yr(v,k);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),M,i)){var O={id:w,sourceLayerIndex:A,index:T,geometry:k?M.geometry:Vr(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(dm("fill-extrusion",this.layers,O,this.zoom,r)):this.addFeature(O,O.geometry,T,i,{}),r.featureIndex.insert(v,O.geometry,T,A,this.index,!0)}}},Uo.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.features;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},Uo.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},Uo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Uo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Uo.prototype.addFeature=function(e,r,i,u,h){for(var d=0,v=hm(r,500);d<v.length;d+=1){for(var w=v[d],T=0,A=0,k=w;A<k.length;A+=1)T+=k[A].length;for(var M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),O=0,F=w;O<F.length;O+=1){var G=F[O];if(G.length!==0&&!((qt=G).every(function(Dt){return Dt.x<0})||qt.every(function(Dt){return Dt.x>8192})||qt.every(function(Dt){return Dt.y<0})||qt.every(function(Dt){return Dt.y>8192})))for(var $=0,ie=0;ie<G.length;ie++){var Q=G[ie];if(ie>=1){var he=G[ie-1];if(!Ow(Q,he)){M.vertexLength+4>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ye=Q.sub(he)._perp()._unit(),we=he.dist(Q);$+we>32768&&($=0),Jc(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,0,$),Jc(this.layoutVertexArray,Q.x,Q.y,ye.x,ye.y,0,1,$),Jc(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,0,$+=we),Jc(this.layoutVertexArray,he.x,he.y,ye.x,ye.y,0,1,$);var Se=M.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+T>j.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),Rw[e.type]==="Polygon"){for(var De=[],Ge=[],Qe=M.vertexLength,_t=0,ot=w;_t<ot.length;_t+=1){var Et=ot[_t];if(Et.length!==0){Et!==w[0]&&Ge.push(De.length/2);for(var st=0;st<Et.length;st++){var Nt=Et[st];Jc(this.layoutVertexArray,Nt.x,Nt.y,0,0,1,1,0),De.push(Nt.x),De.push(Nt.y)}}}for(var kt=lm(De,Ge),vt=0;vt<kt.length;vt+=3)this.indexArray.emplaceBack(Qe+kt[vt],Qe+kt[vt+2],Qe+kt[vt+1]);M.primitiveLength+=kt.length/3,M.vertexLength+=T}}var qt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ft("FillExtrusionBucket",Uo,{omit:["layers","features"]});var Dw={paint:new Dn({"fill-extrusion-opacity":new bt(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bt(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bt(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new fu(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bt(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bw=function(e){function r(i){e.call(this,i,Dw)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(i){return new Uo(i)},r.prototype.queryRadius=function(){return xn(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T,A){var k=Fo(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),M=this.paint.get("fill-extrusion-height").evaluate(u,h),O=this.paint.get("fill-extrusion-base").evaluate(u,h),F=function($,ie,Q,he){for(var ye=[],we=0,Se=$;we<Se.length;we+=1){var De=Se[we],Ge=[De.x,De.y,0,1];vu(Ge,Ge,ie),ye.push(new ze(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return ye}(k,A),G=function($,ie,Q,he){for(var ye=[],we=[],Se=he[8]*ie,De=he[9]*ie,Ge=he[10]*ie,Qe=he[11]*ie,_t=he[8]*Q,ot=he[9]*Q,Et=he[10]*Q,st=he[11]*Q,Nt=0,kt=$;Nt<kt.length;Nt+=1){for(var vt=[],qt=[],Dt=0,Qt=kt[Nt];Dt<Qt.length;Dt+=1){var St=Qt[Dt],or=St.x,Or=St.y,Hr=he[0]*or+he[4]*Or+he[12],jr=he[1]*or+he[5]*Or+he[13],Dr=he[2]*or+he[6]*Or+he[14],Gr=he[3]*or+he[7]*Or+he[15],bn=Dr+Ge,wn=Gr+Qe,ti=Hr+_t,kn=jr+ot,ri=Dr+Et,Qr=Gr+st,Pn=new ze((Hr+Se)/wn,(jr+De)/wn);Pn.z=bn/wn,vt.push(Pn);var Kt=new ze(ti/Qr,kn/Qr);Kt.z=ri/Qr,qt.push(Kt)}ye.push(vt),we.push(qt)}return[ye,we]}(d,O,M,A);return function($,ie,Q){var he=1/0;lo(Q,ie)&&(he=tv(Q,ie[0]));for(var ye=0;ye<ie.length;ye++)for(var we=ie[ye],Se=$[ye],De=0;De<we.length-1;De++){var Ge=we[De],Qe=[Ge,we[De+1],Se[De+1],Se[De],Ge];oa(Q,Qe)&&(he=Math.min(he,tv(Q,Qe)))}return he!==1/0&&he}(G[0],G[1],F)},r}(bo);function Yc(e,r){return e.x*r.x+e.y*r.y}function tv(e,r){if(e.length===1){for(var i,u=0,h=r[u++];!i||h.equals(i);)if(!(i=r[u++]))return 1/0;for(;u<r.length;u++){var d=r[u],v=e[0],w=i.sub(h),T=d.sub(h),A=v.sub(h),k=Yc(w,w),M=Yc(w,T),O=Yc(T,T),F=Yc(A,w),G=Yc(A,T),$=k*O-M*M,ie=(O*F-M*G)/$,Q=(k*G-M*F)/$,he=h.z*(1-ie-Q)+i.z*ie+d.z*Q;if(isFinite(he))return he}return 1/0}for(var ye=1/0,we=0,Se=r;we<Se.length;we+=1)ye=Math.min(ye,Se[we].z);return ye}var Fw=Cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Nw=Cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Uw=wu.VectorTileFeature.types,Vw=Math.cos(Math.PI/180*37.5),rv=Math.pow(2,14)/.5,ui=function(e){var r=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){r.gradients[i.id]={}}),this.layoutVertexArray=new xi,this.layoutVertexArray2=new hs,this.indexArray=new ra,this.programConfigurations=new At(e.layers,e.zoom),this.segments=new j,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ui.prototype.populate=function(e,r,i){this.hasPattern=fm("line",this.layers,r);for(var u=this.layers[0].layout.get("line-sort-key"),h=[],d=0,v=e;d<v.length;d+=1){var w=v[d],T=w.feature,A=w.id,k=w.index,M=w.sourceLayerIndex,O=this.layers[0]._featureFilter.needGeometry,F=Yr(T,O);if(this.layers[0]._featureFilter.filter(new Gt(this.zoom),F,i)){var G=u?u.evaluate(F,{},i):void 0,$={id:A,properties:T.properties,type:T.type,sourceLayerIndex:M,index:k,geometry:O?F.geometry:Vr(T),patterns:{},sortKey:G};h.push($)}}u&&h.sort(function(Ge,Qe){return Ge.sortKey-Qe.sortKey});for(var ie=0,Q=h;ie<Q.length;ie+=1){var he=Q[ie],ye=he.geometry,we=he.index,Se=he.sourceLayerIndex;if(this.hasPattern){var De=dm("line",this.layers,he,this.zoom,r);this.patternFeatures.push(De)}else this.addFeature(he,ye,we,i,{});r.featureIndex.insert(e[we].feature,ye,we,Se,this.index)}},ui.prototype.update=function(e,r,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i)},ui.prototype.addFeatures=function(e,r,i){for(var u=0,h=this.patternFeatures;u<h.length;u+=1){var d=h[u];this.addFeature(d,d.geometry,d.index,r,i)}},ui.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ui.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ui.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Nw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Fw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ui.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ui.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},ui.prototype.addFeature=function(e,r,i,u,h){var d=this.layers[0].layout,v=d.get("line-join").evaluate(e,{}),w=d.get("line-cap"),T=d.get("line-miter-limit"),A=d.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var k=0,M=r;k<M.length;k+=1)this.addLine(M[k],e,v,w,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,u)},ui.prototype.addLine=function(e,r,i,u,h,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var w=Uw[r.type]==="Polygon",T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var A=0;A<T-1&&e[A].equals(e[A+1]);)A++;if(!(T<(w?3:2))){i==="bevel"&&(h=1.05);var k,M=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),F=void 0,G=void 0,$=void 0,ie=void 0;this.e1=this.e2=-1,w&&(ie=e[A].sub(k=e[T-2])._unit()._perp());for(var Q=A;Q<T;Q++)if(!(G=Q===T-1?w?e[A+1]:void 0:e[Q+1])||!e[Q].equals(G)){ie&&($=ie),k&&(F=k),k=e[Q],ie=G?G.sub(k)._unit()._perp():$;var he=($=$||ie).add(ie);he.x===0&&he.y===0||he._unit();var ye=$.x*ie.x+$.y*ie.y,we=he.x*ie.x+he.y*ie.y,Se=we!==0?1/we:1/0,De=2*Math.sqrt(2-2*we),Ge=we<Vw&&F&&G,Qe=$.x*ie.y-$.y*ie.x>0;if(Ge&&Q>A){var _t=k.dist(F);if(_t>2*M){var ot=k.sub(k.sub(F)._mult(M/_t)._round());this.updateDistance(F,ot),this.addCurrentVertex(ot,$,0,0,O),F=ot}}var Et=F&&G,st=Et?i:w?"butt":u;if(Et&&st==="round"&&(Se<d?st="miter":Se<=2&&(st="fakeround")),st==="miter"&&Se>h&&(st="bevel"),st==="bevel"&&(Se>2&&(st="flipbevel"),Se<h&&(st="miter")),F&&this.updateDistance(F,k),st==="miter")he._mult(Se),this.addCurrentVertex(k,he,0,0,O);else if(st==="flipbevel"){if(Se>100)he=ie.mult(-1);else{var Nt=Se*$.add(ie).mag()/$.sub(ie).mag();he._perp()._mult(Nt*(Qe?-1:1))}this.addCurrentVertex(k,he,0,0,O),this.addCurrentVertex(k,he.mult(-1),0,0,O)}else if(st==="bevel"||st==="fakeround"){var kt=-Math.sqrt(Se*Se-1),vt=Qe?kt:0,qt=Qe?0:kt;if(F&&this.addCurrentVertex(k,$,vt,qt,O),st==="fakeround")for(var Dt=Math.round(180*De/Math.PI/20),Qt=1;Qt<Dt;Qt++){var St=Qt/Dt;if(St!==.5){var or=St-.5;St+=St*or*(St-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*or*or+(.848013+ye*(.215638*ye-1.06021)))}var Or=ie.sub($)._mult(St)._add($)._unit()._mult(Qe?-1:1);this.addHalfVertex(k,Or.x,Or.y,!1,Qe,0,O)}G&&this.addCurrentVertex(k,ie,-vt,-qt,O)}else if(st==="butt")this.addCurrentVertex(k,he,0,0,O);else if(st==="square"){var Hr=F?1:-1;this.addCurrentVertex(k,he,Hr,Hr,O)}else st==="round"&&(F&&(this.addCurrentVertex(k,$,0,0,O),this.addCurrentVertex(k,$,1,1,O,!0)),G&&(this.addCurrentVertex(k,ie,-1,-1,O,!0),this.addCurrentVertex(k,ie,0,0,O)));if(Ge&&Q<T-1){var jr=k.dist(G);if(jr>2*M){var Dr=k.add(G.sub(k)._mult(M/jr)._round());this.updateDistance(k,Dr),this.addCurrentVertex(Dr,ie,0,0,O),k=Dr}}}}},ui.prototype.addCurrentVertex=function(e,r,i,u,h,d){d===void 0&&(d=!1);var v=r.y*u-r.x,w=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,d,!1,i,h),this.addHalfVertex(e,v,w,d,!0,-u,h),this.distance>rv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,r,i,u,h,d))},ui.prototype.addHalfVertex=function(e,r,i,u,h,d,v){var w=.5*(this.lineClips?this.scaledDistance*(rv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(h?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(d===0?0:d<0?-1:1)|(63&w)<<2,w>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=v.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),v.primitiveLength++),h?this.e2=T:this.e1=T},ui.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ui.prototype.updateDistance=function(e,r){this.distance+=e.dist(r),this.updateScaledDistance()},ft("LineBucket",ui,{omit:["layers","patternFeatures"]});var jw=new Dn({"line-cap":new bt(V.layout_line["line-cap"]),"line-join":new yt(V.layout_line["line-join"]),"line-miter-limit":new bt(V.layout_line["line-miter-limit"]),"line-round-limit":new bt(V.layout_line["line-round-limit"]),"line-sort-key":new yt(V.layout_line["line-sort-key"])}),nv={paint:new Dn({"line-opacity":new yt(V.paint_line["line-opacity"]),"line-color":new yt(V.paint_line["line-color"]),"line-translate":new bt(V.paint_line["line-translate"]),"line-translate-anchor":new bt(V.paint_line["line-translate-anchor"]),"line-width":new yt(V.paint_line["line-width"]),"line-gap-width":new yt(V.paint_line["line-gap-width"]),"line-offset":new yt(V.paint_line["line-offset"]),"line-blur":new yt(V.paint_line["line-blur"]),"line-dasharray":new Yn(V.paint_line["line-dasharray"]),"line-pattern":new fu(V.paint_line["line-pattern"]),"line-gradient":new so(V.paint_line["line-gradient"])}),layout:jw},iv=new(function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(i,u){return u=new Gt(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,i,u)},r.prototype.evaluate=function(i,u,h,d){return u=Ot({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,i,u,h,d)},r}(yt))(nv.paint.properties["line-width"].specification);iv.useIntegerZoom=!0;var qw=function(e){function r(i){e.call(this,i,nv),this.gradientVersion=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof mi,this.gradientVersion=(this.gradientVersion+1)%mt)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(i,u){e.prototype.recalculate.call(this,i,u),this.paint._values["line-floorwidth"]=iv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},r.prototype.createBucket=function(i){return new ui(i)},r.prototype.queryRadius=function(i){var u=i,h=ov(So("line-width",this,u),So("line-gap-width",this,u)),d=So("line-offset",this,u);return h/2+Math.abs(d)+xn(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(i,u,h,d,v,w,T){var A=Fo(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),k=T/2*ov(this.paint.get("line-width").evaluate(u,h),this.paint.get("line-gap-width").evaluate(u,h)),M=this.paint.get("line-offset").evaluate(u,h);return M&&(d=function(O,F){for(var G=[],$=new ze(0,0),ie=0;ie<O.length;ie++){for(var Q=O[ie],he=[],ye=0;ye<Q.length;ye++){var we=Q[ye],Se=Q[ye+1],De=ye===0?$:we.sub(Q[ye-1])._unit()._perp(),Ge=ye===Q.length-1?$:Se.sub(we)._unit()._perp(),Qe=De._add(Ge)._unit();Qe._mult(1/(Qe.x*Ge.x+Qe.y*Ge.y)),he.push(Qe._mult(F)._add(we))}G.push(he)}return G}(d,M*T)),function(O,F,G){for(var $=0;$<F.length;$++){var ie=F[$];if(O.length>=3){for(var Q=0;Q<ie.length;Q++)if(Eo(O,ie[Q]))return!0}if(Zi(O,ie,G))return!0}return!1}(A,d,k)},r.prototype.isTileClipped=function(){return!0},r}(bo);function ov(e,r){return r>0?r+2*e:e}var Zw=Cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hw=Cn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Gw=(Cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),av=(Cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),$w=Cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kw(e,r,i){return e.sections.forEach(function(u){u.text=function(h,d,v){var w=d.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?h=h.toLocaleUpperCase():w==="lowercase"&&(h=h.toLocaleLowerCase()),zi.applyArabicShaping&&(h=zi.applyArabicShaping(h)),h}(u.text,r,i)}),e}Cn([{name:"triangle",components:3,type:"Uint16"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Cn([{type:"Float32",name:"offsetX"}]),Cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Qc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},sv=function(e,r,i,u,h){var d,v,w=8*h-u-1,T=(1<<w)-1,A=T>>1,k=-7,M=i?h-1:0,O=i?-1:1,F=e[r+M];for(M+=O,d=F&(1<<-k)-1,F>>=-k,k+=w;k>0;d=256*d+e[r+M],M+=O,k-=8);for(v=d&(1<<-k)-1,d>>=-k,k+=u;k>0;v=256*v+e[r+M],M+=O,k-=8);if(d===0)d=1-A;else{if(d===T)return v?NaN:1/0*(F?-1:1);v+=Math.pow(2,u),d-=A}return(F?-1:1)*v*Math.pow(2,d-u)},lv=function(e,r,i,u,h,d){var v,w,T,A=8*d-h-1,k=(1<<A)-1,M=k>>1,O=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=u?0:d-1,G=u?1:-1,$=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,v=k):(v=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-v))<1&&(v--,T*=2),(r+=v+M>=1?O/T:O*Math.pow(2,1-M))*T>=2&&(v++,T/=2),v+M>=k?(w=0,v=k):v+M>=1?(w=(r*T-1)*Math.pow(2,h),v+=M):(w=r*Math.pow(2,M-1)*Math.pow(2,h),v=0));h>=8;e[i+F]=255&w,F+=G,w/=256,h-=8);for(v=v<<h|w,A+=h;A>0;e[i+F]=255&v,F+=G,v/=256,A-=8);e[i+F-G]|=128*$},jh=Ir;function Ir(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ir.Varint=0,Ir.Fixed64=1,Ir.Bytes=2,Ir.Fixed32=5;var uv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ua(e){return e.type===Ir.Bytes?e.readVarint()+e.pos:e.pos+1}function Eu(e,r,i){return i?4294967296*r+(e>>>0):4294967296*(r>>>0)+(e>>>0)}function cv(e,r,i){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));i.realloc(u);for(var h=i.pos-1;h>=e;h--)i.buf[h+u]=i.buf[h]}function Ww(e,r){for(var i=0;i<e.length;i++)r.writeVarint(e[i])}function Xw(e,r){for(var i=0;i<e.length;i++)r.writeSVarint(e[i])}function Jw(e,r){for(var i=0;i<e.length;i++)r.writeFloat(e[i])}function Yw(e,r){for(var i=0;i<e.length;i++)r.writeDouble(e[i])}function Qw(e,r){for(var i=0;i<e.length;i++)r.writeBoolean(e[i])}function e2(e,r){for(var i=0;i<e.length;i++)r.writeFixed32(e[i])}function t2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed32(e[i])}function r2(e,r){for(var i=0;i<e.length;i++)r.writeFixed64(e[i])}function n2(e,r){for(var i=0;i<e.length;i++)r.writeSFixed64(e[i])}function qh(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+16777216*e[r+3]}function Su(e,r,i){e[i]=r,e[i+1]=r>>>8,e[i+2]=r>>>16,e[i+3]=r>>>24}function pv(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function i2(e,r,i){e===1&&i.readMessage(o2,r)}function o2(e,r,i){if(e===3){var u=i.readMessage(a2,{}),h=u.width,d=u.height,v=u.left,w=u.top,T=u.advance;r.push({id:u.id,bitmap:new gl({width:h+6,height:d+6},u.bitmap),metrics:{width:h,height:d,left:v,top:w,advance:T}})}}function a2(e,r,i){e===1?r.id=i.readVarint():e===2?r.bitmap=i.readBytes():e===3?r.width=i.readVarint():e===4?r.height=i.readVarint():e===5?r.left=i.readSVarint():e===6?r.top=i.readSVarint():e===7&&(r.advance=i.readVarint())}function hv(e){for(var r=0,i=0,u=0,h=e;u<h.length;u+=1){var d=h[u];r+=d.w*d.h,i=Math.max(i,d.w)}e.sort(function($,ie){return ie.h-$.h});for(var v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),i),h:1/0}],w=0,T=0,A=0,k=e;A<k.length;A+=1)for(var M=k[A],O=v.length-1;O>=0;O--){var F=v[O];if(!(M.w>F.w||M.h>F.h)){if(M.x=F.x,M.y=F.y,T=Math.max(T,M.y+M.h),w=Math.max(w,M.x+M.w),M.w===F.w&&M.h===F.h){var G=v.pop();O<v.length&&(v[O]=G)}else M.h===F.h?(F.x+=M.w,F.w-=M.w):M.w===F.w?(F.y+=M.h,F.h-=M.h):(v.push({x:F.x+M.w,y:F.y,w:F.w-M.w,h:M.h}),F.y+=M.h,F.h-=M.h);break}}return{w,h:T,fill:r/(w*T)||0}}Ir.prototype={destroy:function(){this.buf=null},readFields:function(e,r,i){for(i=i||this.length;this.pos<i;){var u=this.readVarint(),h=u>>3,d=this.pos;this.type=7&u,e(h,r,this),this.pos===d&&this.skip(u)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=qh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=pv(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=qh(this.buf,this.pos)+4294967296*qh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=qh(this.buf,this.pos)+4294967296*pv(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=sv(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=sv(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r,i,u=this.buf;return r=127&(i=u[this.pos++]),i<128?r:(r|=(127&(i=u[this.pos++]))<<7,i<128?r:(r|=(127&(i=u[this.pos++]))<<14,i<128?r:(r|=(127&(i=u[this.pos++]))<<21,i<128?r:function(h,d,v){var w,T,A=v.buf;if(w=(112&(T=A[v.pos++]))>>4,T<128||(w|=(127&(T=A[v.pos++]))<<3,T<128)||(w|=(127&(T=A[v.pos++]))<<10,T<128)||(w|=(127&(T=A[v.pos++]))<<17,T<128)||(w|=(127&(T=A[v.pos++]))<<24,T<128)||(w|=(1&(T=A[v.pos++]))<<31,T<128))return Eu(h,w,d);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(i=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&uv?function(i,u,h){return uv.decode(i.subarray(u,h))}(this.buf,r,e):function(i,u,h){for(var d="",v=u;v<h;){var w,T,A,k=i[v],M=null,O=k>239?4:k>223?3:k>191?2:1;if(v+O>h)break;O===1?k<128&&(M=k):O===2?(192&(w=i[v+1]))==128&&(M=(31&k)<<6|63&w)<=127&&(M=null):O===3?(T=i[v+2],(192&(w=i[v+1]))==128&&(192&T)==128&&((M=(15&k)<<12|(63&w)<<6|63&T)<=2047||M>=55296&&M<=57343)&&(M=null)):O===4&&(T=i[v+2],A=i[v+3],(192&(w=i[v+1]))==128&&(192&T)==128&&(192&A)==128&&((M=(15&k)<<18|(63&w)<<12|(63&T)<<6|63&A)<=65535||M>=1114112)&&(M=null)),M===null?(M=65533,O=1):M>65535&&(M-=65536,d+=String.fromCharCode(M>>>10&1023|55296),M=56320|1023&M),d+=String.fromCharCode(M),v+=O}return d}(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==Ir.Bytes)return e.push(this.readVarint(r));var i=Ua(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSVarint());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ir.Bytes)return e.push(this.readBoolean());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFloat());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ir.Bytes)return e.push(this.readDouble());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed32());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed32());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readFixed64());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ir.Bytes)return e.push(this.readSFixed64());var r=Ua(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===Ir.Varint)for(;this.buf[this.pos++]>127;);else if(r===Ir.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Ir.Fixed32)this.pos+=4;else{if(r!==Ir.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var i=new Uint8Array(r);i.set(this.buf),this.buf=i,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Su(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Su(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Su(this.buf,-1&e,this.pos),Su(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Su(this.buf,-1&e,this.pos),Su(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(r,i){var u,h;if(r>=0?(u=r%4294967296|0,h=r/4294967296|0):(h=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,h=h+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(d,v,w){w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,d>>>=7,w.buf[w.pos++]=127&d|128,w.buf[w.pos]=127&(d>>>=7)}(u,0,i),function(d,v){var w=(7&d)<<4;v.buf[v.pos++]|=w|((d>>>=3)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d|((d>>>=7)?128:0),d&&(v.buf[v.pos++]=127&d)))))}(h,i)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var r=this.pos;this.pos=function(u,h,d){for(var v,w,T=0;T<h.length;T++){if((v=h.charCodeAt(T))>55295&&v<57344){if(!w){v>56319||T+1===h.length?(u[d++]=239,u[d++]=191,u[d++]=189):w=v;continue}if(v<56320){u[d++]=239,u[d++]=191,u[d++]=189,w=v;continue}v=w-55296<<10|v-56320|65536,w=null}else w&&(u[d++]=239,u[d++]=191,u[d++]=189,w=null);v<128?u[d++]=v:(v<2048?u[d++]=v>>6|192:(v<65536?u[d++]=v>>12|224:(u[d++]=v>>18|240,u[d++]=v>>12&63|128),u[d++]=v>>6&63|128),u[d++]=63&v|128)}return d}(this.buf,e,this.pos);var i=this.pos-r;i>=128&&cv(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),lv(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),lv(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var i=0;i<r;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,r){this.pos++;var i=this.pos;e(r,this);var u=this.pos-i;u>=128&&cv(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,r,i){this.writeTag(e,Ir.Bytes),this.writeRawMessage(r,i)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,Ww,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,Xw,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,Qw,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,Jw,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,Yw,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,e2,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,t2,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,r2,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,n2,r)},writeBytesField:function(e,r){this.writeTag(e,Ir.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,Ir.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,Ir.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,Ir.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,Ir.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,Ir.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,Ir.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,Ir.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,Ir.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,Ir.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,!!r)}};var Zh=function(e,r){var i=r.pixelRatio,u=r.version,h=r.stretchX,d=r.stretchY,v=r.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=h,this.stretchY=d,this.content=v,this.version=u},ep={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ep.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ep.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ep.tlbr.get=function(){return this.tl.concat(this.br)},ep.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Zh.prototype,ep);var tp=function(e,r){var i={},u={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,i,h),this.addImages(r,u,h);var d=hv(h),v=new wi({width:d.w||1,height:d.h||1});for(var w in e){var T=e[w],A=i[w].paddedRect;wi.copy(T.data,v,{x:0,y:0},{x:A.x+1,y:A.y+1},T.data)}for(var k in r){var M=r[k],O=u[k].paddedRect,F=O.x+1,G=O.y+1,$=M.data.width,ie=M.data.height;wi.copy(M.data,v,{x:0,y:0},{x:F,y:G},M.data),wi.copy(M.data,v,{x:0,y:ie-1},{x:F,y:G-1},{width:$,height:1}),wi.copy(M.data,v,{x:0,y:0},{x:F,y:G+ie},{width:$,height:1}),wi.copy(M.data,v,{x:$-1,y:0},{x:F-1,y:G},{width:1,height:ie}),wi.copy(M.data,v,{x:0,y:0},{x:F+$,y:G},{width:1,height:ie})}this.image=v,this.iconPositions=i,this.patternPositions=u};tp.prototype.addImages=function(e,r,i){for(var u in e){var h=e[u],d={x:0,y:0,w:h.data.width+2,h:h.data.height+2};i.push(d),r[u]=new Zh(d,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},tp.prototype.patchUpdatedImages=function(e,r){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),r)},tp.prototype.patchUpdatedImage=function(e,r,i){if(e&&r&&e.version!==r.version){e.version=r.version;var u=e.tl;i.update(r.data,void 0,{x:u[0],y:u[1]})}},ft("ImagePosition",Zh),ft("ImageAtlas",tp);var Hi={horizontal:1,vertical:2,horizontalOnly:3},Tu=function(){this.scale=1,this.fontStack="",this.imageName=null};Tu.forText=function(e,r){var i=new Tu;return i.scale=e||1,i.fontStack=r,i},Tu.forImage=function(e){var r=new Tu;return r.imageName=e,r};var ei=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Hh(e,r,i,u,h,d,v,w,T,A,k,M,O,F,G,$){var ie,Q=ei.fromFeature(e,h);M===Hi.vertical&&Q.verticalizePunctuation();var he=zi.processBidirectionalText,ye=zi.processStyledBidirectionalText;if(he&&Q.sections.length===1){ie=[];for(var we=0,Se=he(Q.toString(),gm(Q,A,d,r,u,F,G));we<Se.length;we+=1){var De=Se[we],Ge=new ei;Ge.text=De,Ge.sections=Q.sections;for(var Qe=0;Qe<De.length;Qe++)Ge.sectionIndex.push(0);ie.push(Ge)}}else if(ye){ie=[];for(var _t=0,ot=ye(Q.text,Q.sectionIndex,gm(Q,A,d,r,u,F,G));_t<ot.length;_t+=1){var Et=ot[_t],st=new ei;st.text=Et[0],st.sectionIndex=Et[1],st.sections=Q.sections,ie.push(st)}}else ie=function(vt,qt){for(var Dt=[],Qt=vt.text,St=0,or=0,Or=qt;or<Or.length;or+=1){var Hr=Or[or];Dt.push(vt.substring(St,Hr)),St=Hr}return St<Qt.length&&Dt.push(vt.substring(St,Qt.length)),Dt}(Q,gm(Q,A,d,r,u,F,G));var Nt=[],kt={positionedLines:Nt,text:Q.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:M,iconsInText:!1,verticalizable:!1};return function(vt,qt,Dt,Qt,St,or,Or,Hr,jr,Dr,Gr,bn){for(var wn=0,ti=-17,kn=0,ri=0,Qr=Hr==="right"?1:Hr==="left"?0:.5,Pn=0,Kt=0,Er=St;Kt<Er.length;Kt+=1){var mr=Er[Kt];mr.trim();var ir=mr.getMaxScale(),ci=24*(ir-1),jn={positionedGlyphs:[],lineOffset:0};vt.positionedLines[Pn]=jn;var kr=jn.positionedGlyphs,an=0;if(mr.length()){for(var qn=0;qn<mr.length();qn++){var ar=mr.getSection(qn),la=mr.getSectionIndex(qn),Gi=mr.getCharCode(qn),ua=0,en=null,ca=null,To=null,Lu=24,xl=!(jr===Hi.horizontal||!Gr&&!cu(Gi)||Gr&&(Gh[Gi]||(Za=Gi,rt.Arabic(Za)||rt["Arabic Supplement"](Za)||rt["Arabic Extended-A"](Za)||rt["Arabic Presentation Forms-A"](Za)||rt["Arabic Presentation Forms-B"](Za))));if(ar.imageName){var Ru=Qt[ar.imageName];if(!Ru)continue;To=ar.imageName,vt.iconsInText=vt.iconsInText||!0,ca=Ru.paddedRect;var qa=Ru.displaySize;ar.scale=24*ar.scale/bn,ua=ci+(24-qa[1]*ar.scale),Lu=(en={width:qa[0],height:qa[1],left:1,top:-3,advance:xl?qa[1]:qa[0]}).advance;var Ou=xl?qa[0]*ar.scale-24*ir:qa[1]*ar.scale-24*ir;Ou>0&&Ou>an&&(an=Ou)}else{var tf=Dt[ar.fontStack],Du=tf&&tf[Gi];if(Du&&Du.rect)ca=Du.rect,en=Du.metrics;else{var ip=qt[ar.fontStack],rf=ip&&ip[Gi];if(!rf)continue;en=rf.metrics}ua=24*(ir-ar.scale)}xl?(vt.verticalizable=!0,kr.push({glyph:Gi,imageName:To,x:wn,y:ti+ua,vertical:xl,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:la,metrics:en,rect:ca}),wn+=Lu*ar.scale+Dr):(kr.push({glyph:Gi,imageName:To,x:wn,y:ti+ua,vertical:xl,scale:ar.scale,fontStack:ar.fontStack,sectionIndex:la,metrics:en,rect:ca}),wn+=en.advance*ar.scale+Dr)}kr.length!==0&&(kn=Math.max(wn-Dr,kn),l2(kr,0,kr.length-1,Qr,an)),wn=0;var nf=or*ir+an;jn.lineOffset=Math.max(an,ci),ti+=nf,ri=Math.max(nf,ri),++Pn}else ti+=or,++Pn}var Za,op=ti- -17,Bu=ym(Or),xs=Bu.horizontalAlign,Fu=Bu.verticalAlign;(function(of,af,ap,sp,sf,lp,up,cp,lf){var Nu,uf=(af-ap)*sf;Nu=lp!==up?-cp*sp- -17:(-sp*lf+.5)*up;for(var Uu=0,pp=of;Uu<pp.length;Uu+=1)for(var bl=0,hp=pp[Uu].positionedGlyphs;bl<hp.length;bl+=1){var Vu=hp[bl];Vu.x+=uf,Vu.y+=Nu}})(vt.positionedLines,Qr,xs,Fu,kn,ri,or,op,St.length),vt.top+=-Fu*op,vt.bottom=vt.top+op,vt.left+=-xs*kn,vt.right=vt.left+kn}(kt,r,i,u,ie,v,w,T,M,A,O,$),!function(vt){for(var qt=0,Dt=vt;qt<Dt.length;qt+=1)if(Dt[qt].positionedGlyphs.length!==0)return!1;return!0}(Nt)&&kt}ei.fromFeature=function(e,r){for(var i=new ei,u=0;u<e.sections.length;u++){var h=e.sections[u];h.image?i.addImageSection(h):i.addTextSection(h,r)}return i},ei.prototype.length=function(){return this.text.length},ei.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ei.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},ei.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ei.prototype.verticalizePunctuation=function(){this.text=function(e){for(var r="",i=0;i<e.length;i++){var u=e.charCodeAt(i+1)||null,h=e.charCodeAt(i-1)||null;r+=u&&Fc(u)&&!Qc[e[i+1]]||h&&Fc(h)&&!Qc[e[i-1]]||!Qc[e[i]]?e[i]:Qc[e[i]]}return r}(this.text)},ei.prototype.trim=function(){for(var e=0,r=0;r<this.text.length&&Gh[this.text.charCodeAt(r)];r++)e++;for(var i=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Gh[this.text.charCodeAt(u)];u--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},ei.prototype.substring=function(e,r){var i=new ei;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i},ei.prototype.toString=function(){return this.text},ei.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(r,i){return Math.max(r,e.sections[i].scale)},0)},ei.prototype.addTextSection=function(e,r){this.text+=e.text,this.sections.push(Tu.forText(e.scale,e.fontStack||r));for(var i=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(i)},ei.prototype.addImageSection=function(e){var r=e.image?e.image.name:"";if(r.length!==0){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Tu.forImage(r)),this.sectionIndex.push(this.sections.length-1)):dr("Reached maximum number of images 6401")}else dr("Can't add FormattedSection with an empty image.")},ei.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Gh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ri={};function fv(e,r,i,u,h,d){if(r.imageName){var v=u[r.imageName];return v?v.displaySize[0]*r.scale*24/d+h:0}var w=i[r.fontStack],T=w&&w[e];return T?T.metrics.advance*r.scale+h:0}function dv(e,r,i,u){var h=Math.pow(e-r,2);return u?e<r?h/2:2*h:h+Math.abs(i)*i}function s2(e,r,i){var u=0;return e===10&&(u-=1e4),i&&(u+=150),e!==40&&e!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function mv(e,r,i,u,h,d){for(var v=null,w=dv(r,i,h,d),T=0,A=u;T<A.length;T+=1){var k=A[T],M=dv(r-k.x,i,h,d)+k.badness;M<=w&&(v=k,w=M)}return{index:e,x:r,priorBreak:v,badness:w}}function gm(e,r,i,u,h,d,v){if(d!=="point")return[];if(!e)return[];for(var w,T=[],A=function(ie,Q,he,ye,we,Se){for(var De=0,Ge=0;Ge<ie.length();Ge++){var Qe=ie.getSection(Ge);De+=fv(ie.getCharCode(Ge),Qe,ye,we,Q,Se)}return De/Math.max(1,Math.ceil(De/he))}(e,r,i,u,h,v),k=e.text.indexOf("​")>=0,M=0,O=0;O<e.length();O++){var F=e.getSection(O),G=e.getCharCode(O);if(Gh[G]||(M+=fv(G,F,u,h,r,v)),O<e.length()-1){var $=!((w=G)<11904||!(rt["Bopomofo Extended"](w)||rt.Bopomofo(w)||rt["CJK Compatibility Forms"](w)||rt["CJK Compatibility Ideographs"](w)||rt["CJK Compatibility"](w)||rt["CJK Radicals Supplement"](w)||rt["CJK Strokes"](w)||rt["CJK Symbols and Punctuation"](w)||rt["CJK Unified Ideographs Extension A"](w)||rt["CJK Unified Ideographs"](w)||rt["Enclosed CJK Letters and Months"](w)||rt["Halfwidth and Fullwidth Forms"](w)||rt.Hiragana(w)||rt["Ideographic Description Characters"](w)||rt["Kangxi Radicals"](w)||rt["Katakana Phonetic Extensions"](w)||rt.Katakana(w)||rt["Vertical Forms"](w)||rt["Yi Radicals"](w)||rt["Yi Syllables"](w)));(Ri[G]||$||F.imageName)&&T.push(mv(O+1,M,A,T,s2(G,e.getCharCode(O+1),$&&k),!1))}}return function ie(Q){return Q?ie(Q.priorBreak).concat(Q.index):[]}(mv(e.length(),M,A,T,0,!0))}function ym(e){var r=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:r,verticalAlign:i}}function l2(e,r,i,u,h){if(u||h)for(var d=e[i],v=(e[i].x+d.metrics.advance*d.scale)*u,w=r;w<=i;w++)e[w].x-=v,e[w].y+=h}function gv(e,r,i,u,h,d){var v,w=e.image;if(w.content){var T=w.content,A=w.pixelRatio||1;v=[T[0]/A,T[1]/A,w.displaySize[0]-T[2]/A,w.displaySize[1]-T[3]/A]}var k,M,O,F,G=r.left*d,$=r.right*d;i==="width"||i==="both"?(F=h[0]+G-u[3],M=h[0]+$+u[1]):M=(F=h[0]+(G+$-w.displaySize[0])/2)+w.displaySize[0];var ie=r.top*d,Q=r.bottom*d;return i==="height"||i==="both"?(k=h[1]+ie-u[0],O=h[1]+Q+u[2]):O=(k=h[1]+(ie+Q-w.displaySize[1])/2)+w.displaySize[1],{image:w,top:k,right:M,bottom:O,left:F,collisionPadding:v}}Ri[10]=!0,Ri[32]=!0,Ri[38]=!0,Ri[40]=!0,Ri[41]=!0,Ri[43]=!0,Ri[45]=!0,Ri[47]=!0,Ri[173]=!0,Ri[183]=!0,Ri[8203]=!0,Ri[8208]=!0,Ri[8211]=!0,Ri[8231]=!0;var Cu=function(e){function r(i,u,h,d){e.call(this,i,u),this.angle=h,d!==void 0&&(this.segment=d)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(ze);function vm(e,r){var i=r.expression;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new Gt(e+1))};if(i.kind==="source")return{kind:"source"};for(var u=i.zoomStops,h=i.interpolationType,d=0;d<u.length&&u[d]<=e;)d++;for(var v=d=Math.max(0,d-1);v<u.length&&u[v]<e+1;)v++;v=Math.min(u.length-1,v);var w=u[d],T=u[v];return i.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:h}:{kind:"camera",minZoom:w,maxZoom:T,minSize:i.evaluate(new Gt(w)),maxSize:i.evaluate(new Gt(T)),interpolationType:h}}function yv(e,r,i){var u=r.uSize,h=i.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?nn(h/128,i.upperSize/128,r.uSizeT):u}function vv(e,r){var i=0,u=0;if(e.kind==="constant")u=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,d=h?Rt(Rn.interpolationFactor(h,r,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?u=nn(e.minSize,e.maxSize,d):i=d}return{uSizeT:i,uSize:u}}ft("Anchor",Cu);var u2=Object.freeze({__proto__:null,getSizeData:vm,evaluateSizeForFeature:yv,evaluateSizeForZoom:vv,SIZE_PACK_FACTOR:128});function _v(e,r,i,u,h){if(r.segment===void 0)return!0;for(var d=r,v=r.segment+1,w=0;w>-i/2;){if(--v<0)return!1;w-=e[v].dist(d),d=e[v]}w+=e[v].dist(e[v+1]),v++;for(var T=[],A=0;w<i/2;){var k=e[v],M=e[v+1];if(!M)return!1;var O=e[v-1].angleTo(k)-k.angleTo(M);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:O}),A+=O;w-T[0].distance>u;)A-=T.shift().angleDelta;if(A>h)return!1;v++,w+=k.dist(M)}return!0}function xv(e){for(var r=0,i=0;i<e.length-1;i++)r+=e[i].dist(e[i+1]);return r}function bv(e,r,i){return e?.6*r*i:0}function wv(e,r){return Math.max(e?e.right-e.left:0,r?r.right-r.left:0)}function c2(e,r,i,u,h,d){for(var v=bv(i,h,d),w=wv(i,u)*d,T=0,A=xv(e)/2,k=0;k<e.length-1;k++){var M=e[k],O=e[k+1],F=M.dist(O);if(T+F>A){var G=(A-T)/F,$=nn(M.x,O.x,G),ie=nn(M.y,O.y,G),Q=new Cu($,ie,O.angleTo(M),k);return Q._round(),!v||_v(e,Q,w,v,r)?Q:void 0}T+=F}}function p2(e,r,i,u,h,d,v,w,T){var A=bv(u,d,v),k=wv(u,h),M=k*v,O=e[0].x===0||e[0].x===T||e[0].y===0||e[0].y===T;return r-M<r/4&&(r=M+r/4),function F(G,$,ie,Q,he,ye,we,Se,De){for(var Ge=ye/2,Qe=xv(G),_t=0,ot=$-ie,Et=[],st=0;st<G.length-1;st++){for(var Nt=G[st],kt=G[st+1],vt=Nt.dist(kt),qt=kt.angleTo(Nt);ot+ie<_t+vt;){var Dt=((ot+=ie)-_t)/vt,Qt=nn(Nt.x,kt.x,Dt),St=nn(Nt.y,kt.y,Dt);if(Qt>=0&&Qt<De&&St>=0&&St<De&&ot-Ge>=0&&ot+Ge<=Qe){var or=new Cu(Qt,St,qt,st);or._round(),Q&&!_v(G,or,ye,Q,he)||Et.push(or)}}_t+=vt}return Se||Et.length||we||(Et=F(G,_t/2,ie,Q,he,ye,we,!0,De)),Et}(e,O?r/2*w%r:(k/2+2*d)*v*w%r,r,A,i,M,O,!1,T)}function Ev(e,r,i,u,h){for(var d=[],v=0;v<e.length;v++)for(var w=e[v],T=void 0,A=0;A<w.length-1;A++){var k=w[A],M=w[A+1];k.x<r&&M.x<r||(k.x<r?k=new ze(r,k.y+(r-k.x)/(M.x-k.x)*(M.y-k.y))._round():M.x<r&&(M=new ze(r,k.y+(r-k.x)/(M.x-k.x)*(M.y-k.y))._round()),k.y<i&&M.y<i||(k.y<i?k=new ze(k.x+(i-k.y)/(M.y-k.y)*(M.x-k.x),i)._round():M.y<i&&(M=new ze(k.x+(i-k.y)/(M.y-k.y)*(M.x-k.x),i)._round()),k.x>=u&&M.x>=u||(k.x>=u?k=new ze(u,k.y+(u-k.x)/(M.x-k.x)*(M.y-k.y))._round():M.x>=u&&(M=new ze(u,k.y+(u-k.x)/(M.x-k.x)*(M.y-k.y))._round()),k.y>=h&&M.y>=h||(k.y>=h?k=new ze(k.x+(h-k.y)/(M.y-k.y)*(M.x-k.x),h)._round():M.y>=h&&(M=new ze(k.x+(h-k.y)/(M.y-k.y)*(M.x-k.x),h)._round()),T&&k.equals(T[T.length-1])||d.push(T=[k]),T.push(M)))))}return d}function Sv(e,r,i,u){var h=[],d=e.image,v=d.pixelRatio,w=d.paddedRect.w-2,T=d.paddedRect.h-2,A=e.right-e.left,k=e.bottom-e.top,M=d.stretchX||[[0,w]],O=d.stretchY||[[0,T]],F=function(Qt,St){return Qt+St[1]-St[0]},G=M.reduce(F,0),$=O.reduce(F,0),ie=w-G,Q=T-$,he=0,ye=G,we=0,Se=$,De=0,Ge=ie,Qe=0,_t=Q;if(d.content&&u){var ot=d.content;he=$h(M,0,ot[0]),we=$h(O,0,ot[1]),ye=$h(M,ot[0],ot[2]),Se=$h(O,ot[1],ot[3]),De=ot[0]-he,Qe=ot[1]-we,Ge=ot[2]-ot[0]-ye,_t=ot[3]-ot[1]-Se}var Et=function(Qt,St,or,Or){var Hr=Kh(Qt.stretch-he,ye,A,e.left),jr=Wh(Qt.fixed-De,Ge,Qt.stretch,G),Dr=Kh(St.stretch-we,Se,k,e.top),Gr=Wh(St.fixed-Qe,_t,St.stretch,$),bn=Kh(or.stretch-he,ye,A,e.left),wn=Wh(or.fixed-De,Ge,or.stretch,G),ti=Kh(Or.stretch-we,Se,k,e.top),kn=Wh(Or.fixed-Qe,_t,Or.stretch,$),ri=new ze(Hr,Dr),Qr=new ze(bn,Dr),Pn=new ze(bn,ti),Kt=new ze(Hr,ti),Er=new ze(jr/v,Gr/v),mr=new ze(wn/v,kn/v),ir=r*Math.PI/180;if(ir){var ci=Math.sin(ir),jn=Math.cos(ir),kr=[jn,-ci,ci,jn];ri._matMult(kr),Qr._matMult(kr),Kt._matMult(kr),Pn._matMult(kr)}var an=Qt.stretch+Qt.fixed,qn=St.stretch+St.fixed;return{tl:ri,tr:Qr,bl:Kt,br:Pn,tex:{x:d.paddedRect.x+1+an,y:d.paddedRect.y+1+qn,w:or.stretch+or.fixed-an,h:Or.stretch+Or.fixed-qn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Er,pixelOffsetBR:mr,minFontScaleX:Ge/v/A,minFontScaleY:_t/v/k,isSDF:i}};if(u&&(d.stretchX||d.stretchY))for(var st=Tv(M,ie,G),Nt=Tv(O,Q,$),kt=0;kt<st.length-1;kt++)for(var vt=st[kt],qt=st[kt+1],Dt=0;Dt<Nt.length-1;Dt++)h.push(Et(vt,Nt[Dt],qt,Nt[Dt+1]));else h.push(Et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return h}function $h(e,r,i){for(var u=0,h=0,d=e;h<d.length;h+=1){var v=d[h];u+=Math.max(r,Math.min(i,v[1]))-Math.max(r,Math.min(i,v[0]))}return u}function Tv(e,r,i){for(var u=[{fixed:-1,stretch:0}],h=0,d=e;h<d.length;h+=1){var v=d[h],w=v[0],T=v[1],A=u[u.length-1];u.push({fixed:w-A.stretch,stretch:A.stretch}),u.push({fixed:w-A.stretch,stretch:A.stretch+(T-w)})}return u.push({fixed:r+1,stretch:i}),u}function Kh(e,r,i,u){return e/r*i+u}function Wh(e,r,i,u){return e-r*i/u}var Xh=function(e,r,i,u,h,d,v,w,T,A){if(this.boxStartIndex=e.length,T){var k=d.top,M=d.bottom,O=d.collisionPadding;O&&(k-=O[1],M+=O[3]);var F=M-k;F>0&&(F=Math.max(10,F),this.circleDiameter=F)}else{var G=d.top*v-w,$=d.bottom*v+w,ie=d.left*v-w,Q=d.right*v+w,he=d.collisionPadding;if(he&&(ie-=he[0]*v,G-=he[1]*v,Q+=he[2]*v,$+=he[3]*v),A){var ye=new ze(ie,G),we=new ze(Q,G),Se=new ze(ie,$),De=new ze(Q,$),Ge=A*Math.PI/180;ye._rotate(Ge),we._rotate(Ge),Se._rotate(Ge),De._rotate(Ge),ie=Math.min(ye.x,we.x,Se.x,De.x),Q=Math.max(ye.x,we.x,Se.x,De.x),G=Math.min(ye.y,we.y,Se.y,De.y),$=Math.max(ye.y,we.y,Se.y,De.y)}e.emplaceBack(r.x,r.y,ie,G,Q,$,i,u,h)}this.boxEndIndex=e.length},Au=function(e,r){if(e===void 0&&(e=[]),r===void 0&&(r=h2),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function h2(e,r){return e<r?-1:e>r?1:0}function f2(e,r,i){r===void 0&&(r=1),i===void 0&&(i=!1);for(var u=1/0,h=1/0,d=-1/0,v=-1/0,w=e[0],T=0;T<w.length;T++){var A=w[T];(!T||A.x<u)&&(u=A.x),(!T||A.y<h)&&(h=A.y),(!T||A.x>d)&&(d=A.x),(!T||A.y>v)&&(v=A.y)}var k=Math.min(d-u,v-h),M=k/2,O=new Au([],d2);if(k===0)return new ze(u,h);for(var F=u;F<d;F+=k)for(var G=h;G<v;G+=k)O.push(new Iu(F+M,G+M,M,e));for(var $=function(he){for(var ye=0,we=0,Se=0,De=he[0],Ge=0,Qe=De.length,_t=Qe-1;Ge<Qe;_t=Ge++){var ot=De[Ge],Et=De[_t],st=ot.x*Et.y-Et.x*ot.y;we+=(ot.x+Et.x)*st,Se+=(ot.y+Et.y)*st,ye+=3*st}return new Iu(we/ye,Se/ye,0,he)}(e),ie=O.length;O.length;){var Q=O.pop();(Q.d>$.d||!$.d)&&($=Q,i&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,ie)),Q.max-$.d<=r||(O.push(new Iu(Q.p.x-(M=Q.h/2),Q.p.y-M,M,e)),O.push(new Iu(Q.p.x+M,Q.p.y-M,M,e)),O.push(new Iu(Q.p.x-M,Q.p.y+M,M,e)),O.push(new Iu(Q.p.x+M,Q.p.y+M,M,e)),ie+=4)}return i&&(console.log("num probes: "+ie),console.log("best distance: "+$.d)),$.p}function d2(e,r){return r.max-e.max}function Iu(e,r,i,u){this.p=new ze(e,r),this.h=i,this.d=function(h,d){for(var v=!1,w=1/0,T=0;T<d.length;T++)for(var A=d[T],k=0,M=A.length,O=M-1;k<M;O=k++){var F=A[k],G=A[O];F.y>h.y!=G.y>h.y&&h.x<(G.x-F.x)*(h.y-F.y)/(G.y-F.y)+F.x&&(v=!v),w=Math.min(w,gs(h,F,G))}return(v?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}Au.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Au.prototype.pop=function(){if(this.length!==0){var e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}},Au.prototype.peek=function(){return this.data[0]},Au.prototype._up=function(e){for(var r=this.data,i=this.compare,u=r[e];e>0;){var h=e-1>>1,d=r[h];if(i(u,d)>=0)break;r[e]=d,e=h}r[e]=u},Au.prototype._down=function(e){for(var r=this.data,i=this.compare,u=this.length>>1,h=r[e];e<u;){var d=1+(e<<1),v=r[d],w=d+1;if(w<this.length&&i(r[w],v)<0&&(d=w,v=r[w]),i(v,h)>=0)break;r[e]=v,e=d}r[e]=h};var _m=Number.POSITIVE_INFINITY;function Cv(e,r){return r[1]!==_m?function(i,u,h){var d=0,v=0;switch(u=Math.abs(u),h=Math.abs(h),i){case"top-right":case"top-left":case"top":v=h-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-h}switch(i){case"top-right":case"bottom-right":case"right":d=-u;break;case"top-left":case"bottom-left":case"left":d=u}return[d,v]}(e,r[0],r[1]):function(i,u){var h=0,d=0;u<0&&(u=0);var v=u/Math.sqrt(2);switch(i){case"top-right":case"top-left":d=v-7;break;case"bottom-right":case"bottom-left":d=7-v;break;case"bottom":d=7-u;break;case"top":d=u-7}switch(i){case"top-right":case"bottom-right":h=-v;break;case"top-left":case"bottom-left":h=v;break;case"left":h=u;break;case"right":h=-u}return[h,d]}(e,r[0])}function xm(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Av(e,r,i,u,h,d,v,w,T,A,k,M,O,F,G){var $=function(we,Se,De,Ge,Qe,_t,ot,Et){for(var st=Ge.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,Nt=[],kt=0,vt=Se.positionedLines;kt<vt.length;kt+=1)for(var qt=vt[kt],Dt=0,Qt=qt.positionedGlyphs;Dt<Qt.length;Dt+=1){var St=Qt[Dt];if(St.rect){var or=St.rect||{},Or=4,Hr=!0,jr=1,Dr=0,Gr=(Qe||Et)&&St.vertical,bn=St.metrics.advance*St.scale/2;if(Et&&Se.verticalizable&&(Dr=qt.lineOffset/2-(St.imageName?-(24-St.metrics.width*St.scale)/2:24*(St.scale-1))),St.imageName){var wn=ot[St.imageName];Hr=wn.sdf,Or=1/(jr=wn.pixelRatio)}var ti=Qe?[St.x+bn,St.y]:[0,0],kn=Qe?[0,0]:[St.x+bn+De[0],St.y+De[1]-Dr],ri=[0,0];Gr&&(ri=kn,kn=[0,0]);var Qr=(St.metrics.left-Or)*St.scale-bn+kn[0],Pn=(-St.metrics.top-Or)*St.scale+kn[1],Kt=Qr+or.w*St.scale/jr,Er=Pn+or.h*St.scale/jr,mr=new ze(Qr,Pn),ir=new ze(Kt,Pn),ci=new ze(Qr,Er),jn=new ze(Kt,Er);if(Gr){var kr=new ze(-bn,bn- -17),an=-Math.PI/2,qn=12-bn,ar=new ze(22-qn,-(St.imageName?qn:0)),la=new(Function.prototype.bind.apply(ze,[null].concat(ri)));mr._rotateAround(an,kr)._add(ar)._add(la),ir._rotateAround(an,kr)._add(ar)._add(la),ci._rotateAround(an,kr)._add(ar)._add(la),jn._rotateAround(an,kr)._add(ar)._add(la)}if(st){var Gi=Math.sin(st),ua=Math.cos(st),en=[ua,-Gi,Gi,ua];mr._matMult(en),ir._matMult(en),ci._matMult(en),jn._matMult(en)}var ca=new ze(0,0),To=new ze(0,0);Nt.push({tl:mr,tr:ir,bl:ci,br:jn,tex:or,writingMode:Se.writingMode,glyphOffset:ti,sectionIndex:St.sectionIndex,isSDF:Hr,pixelOffsetTL:ca,pixelOffsetBR:To,minFontScaleX:0,minFontScaleY:0})}}return Nt}(0,i,w,h,d,v,u,e.allowVerticalPlacement),ie=e.textSizeData,Q=null;ie.kind==="source"?(Q=[128*h.layout.get("text-size").evaluate(v,{})])[0]>32640&&dr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ie.kind==="composite"&&((Q=[128*F.compositeTextSizes[0].evaluate(v,{},G),128*F.compositeTextSizes[1].evaluate(v,{},G)])[0]>32640||Q[1]>32640)&&dr(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,$,Q,w,d,v,A,r,T.lineStartIndex,T.lineLength,O,G);for(var he=0,ye=k;he<ye.length;he+=1)M[ye[he]]=e.text.placedSymbolArray.length-1;return 4*$.length}function Iv(e){for(var r in e)return e[r];return null}function m2(e,r,i,u){var h=e.compareText;if(r in h){for(var d=h[r],v=d.length-1;v>=0;v--)if(u.dist(d[v])<i)return!0}else h[r]=[];return h[r].push(u),!1}var g2=wu.VectorTileFeature.types,y2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jh(e,r,i,u,h,d,v,w,T,A,k,M,O){var F=w?Math.min(32640,Math.round(w[0])):0,G=w?Math.min(32640,Math.round(w[1])):0;e.emplaceBack(r,i,Math.round(32*u),Math.round(32*h),d,v,(F<<1)+(T?1:0),G,16*A,16*k,256*M,256*O)}function bm(e,r,i){e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i),e.emplaceBack(r.x,r.y,i)}function v2(e){for(var r=0,i=e.sections;r<i.length;r+=1)if(pu(i[r].text))return!0;return!1}var ku=function(e){this.layoutVertexArray=new mu,this.indexArray=new ra,this.programConfigurations=e,this.segments=new j,this.dynamicLayoutVertexArray=new fs,this.opacityVertexArray=new cl,this.placedSymbolArray=new c};ku.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},ku.prototype.upload=function(e,r,i,u){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Zw.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Hw.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,y2,!0),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))},ku.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ft("SymbolBuffers",ku);var rp=function(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new j,this.collisionVertexArray=new Zc};rp.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Gw.members,!0)},rp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ft("CollisionBuffers",rp);var xr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Li([]),this.placementViewportMatrix=Li([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vm(this.zoom,r["text-size"]),this.iconSizeData=vm(this.zoom,r["icon-size"]);var i=this.layers[0].layout,u=i.get("symbol-sort-key"),h=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(function(d){return Hi[d]})),this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id}),this.sourceID=e.sourceID};xr.prototype.createArrays=function(){this.text=new ku(new At(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new ku(new At(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new b,this.lineVertexArray=new S,this.symbolInstances=new _},xr.prototype.calculateGlyphDependencies=function(e,r,i,u,h){for(var d=0;d<e.length;d++)if(r[e.charCodeAt(d)]=!0,(i||u)&&h){var v=Qc[e.charAt(d)];v&&(r[v.charCodeAt(0)]=!0)}},xr.prototype.populate=function(e,r,i){var u=this.layers[0],h=u.layout,d=h.get("text-font"),v=h.get("text-field"),w=h.get("icon-image"),T=(v.value.kind!=="constant"||v.value.value instanceof Sn&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(d.value.kind!=="constant"||d.value.value.length>0),A=w.value.kind!=="constant"||!!w.value.value||Object.keys(w.parameters).length>0,k=h.get("symbol-sort-key");if(this.features=[],T||A){for(var M=r.iconDependencies,O=r.glyphDependencies,F=r.availableImages,G=new Gt(this.zoom),$=0,ie=e;$<ie.length;$+=1){var Q=ie[$],he=Q.feature,ye=Q.id,we=Q.index,Se=Q.sourceLayerIndex,De=u._featureFilter.needGeometry,Ge=Yr(he,De);if(u._featureFilter.filter(G,Ge,i)){De||(Ge.geometry=Vr(he));var Qe=void 0;if(T){var _t=u.getValueAndResolveTokens("text-field",Ge,i,F),ot=Sn.factory(_t);v2(ot)&&(this.hasRTLText=!0),(!this.hasRTLText||Uc()==="unavailable"||this.hasRTLText&&zi.isParsed())&&(Qe=Kw(ot,u,Ge))}var Et=void 0;if(A){var st=u.getValueAndResolveTokens("icon-image",Ge,i,F);Et=st instanceof ai?st:ai.fromString(st)}if(Qe||Et){var Nt=this.sortFeaturesByKey?k.evaluate(Ge,{},i):void 0;if(this.features.push({id:ye,text:Qe,icon:Et,index:we,sourceLayerIndex:Se,geometry:Ge.geometry,properties:he.properties,type:g2[he.type],sortKey:Nt}),Et&&(M[Et.name]=!0),Qe){var kt=d.evaluate(Ge,{},i).join(","),vt=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hi.vertical)>=0;for(var qt=0,Dt=Qe.sections;qt<Dt.length;qt+=1){var Qt=Dt[qt];if(Qt.image)M[Qt.image.name]=!0;else{var St=Bc(Qe.toString()),or=Qt.fontStack||kt,Or=O[or]=O[or]||{};this.calculateGlyphDependencies(Qt.text,Or,vt,this.allowVerticalPlacement,St)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(Hr){var jr={},Dr={},Gr=[],bn=0;function wn(kr){Gr.push(Hr[kr]),bn++}function ti(kr,an,qn){var ar=Dr[kr];return delete Dr[kr],Dr[an]=ar,Gr[ar].geometry[0].pop(),Gr[ar].geometry[0]=Gr[ar].geometry[0].concat(qn[0]),ar}function kn(kr,an,qn){var ar=jr[an];return delete jr[an],jr[kr]=ar,Gr[ar].geometry[0].shift(),Gr[ar].geometry[0]=qn[0].concat(Gr[ar].geometry[0]),ar}function ri(kr,an,qn){var ar=qn?an[0][an[0].length-1]:an[0][0];return kr+":"+ar.x+":"+ar.y}for(var Qr=0;Qr<Hr.length;Qr++){var Pn=Hr[Qr],Kt=Pn.geometry,Er=Pn.text?Pn.text.toString():null;if(Er){var mr=ri(Er,Kt),ir=ri(Er,Kt,!0);if(mr in Dr&&ir in jr&&Dr[mr]!==jr[ir]){var ci=kn(mr,ir,Kt),jn=ti(mr,ir,Gr[ci].geometry);delete jr[mr],delete Dr[ir],Dr[ri(Er,Gr[jn].geometry,!0)]=jn,Gr[ci].geometry=null}else mr in Dr?ti(mr,ir,Kt):ir in jr?kn(mr,ir,Kt):(wn(Qr),jr[mr]=bn-1,Dr[ir]=bn-1)}else wn(Qr)}return Gr.filter(function(kr){return kr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Hr,jr){return Hr.sortKey-jr.sortKey})}},xr.prototype.update=function(e,r,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,i))},xr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},xr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},xr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},xr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},xr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},xr.prototype.addToLineVertexArray=function(e,r){var i=this.lineVertexArray.length;if(e.segment!==void 0){for(var u=e.dist(r[e.segment+1]),h=e.dist(r[e.segment]),d={},v=e.segment+1;v<r.length;v++)d[v]={x:r[v].x,y:r[v].y,tileUnitDistanceFromAnchor:u},v<r.length-1&&(u+=r[v+1].dist(r[v]));for(var w=e.segment||0;w>=0;w--)d[w]={x:r[w].x,y:r[w].y,tileUnitDistanceFromAnchor:h},w>0&&(h+=r[w-1].dist(r[w]));for(var T=0;T<r.length;T++){var A=d[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},xr.prototype.addSymbols=function(e,r,i,u,h,d,v,w,T,A,k,M){for(var O=e.indexArray,F=e.layoutVertexArray,G=e.segments.prepareSegment(4*r.length,F,O,this.canOverlap?d.sortKey:void 0),$=this.glyphOffsetArray.length,ie=G.vertexLength,Q=this.allowVerticalPlacement&&v===Hi.vertical?Math.PI/2:0,he=d.text&&d.text.sections,ye=0;ye<r.length;ye++){var we=r[ye],Se=we.tl,De=we.tr,Ge=we.bl,Qe=we.br,_t=we.tex,ot=we.pixelOffsetTL,Et=we.pixelOffsetBR,st=we.minFontScaleX,Nt=we.minFontScaleY,kt=we.glyphOffset,vt=we.isSDF,qt=we.sectionIndex,Dt=G.vertexLength,Qt=kt[1];Jh(F,w.x,w.y,Se.x,Qt+Se.y,_t.x,_t.y,i,vt,ot.x,ot.y,st,Nt),Jh(F,w.x,w.y,De.x,Qt+De.y,_t.x+_t.w,_t.y,i,vt,Et.x,ot.y,st,Nt),Jh(F,w.x,w.y,Ge.x,Qt+Ge.y,_t.x,_t.y+_t.h,i,vt,ot.x,Et.y,st,Nt),Jh(F,w.x,w.y,Qe.x,Qt+Qe.y,_t.x+_t.w,_t.y+_t.h,i,vt,Et.x,Et.y,st,Nt),bm(e.dynamicLayoutVertexArray,w,Q),O.emplaceBack(Dt,Dt+1,Dt+2),O.emplaceBack(Dt+1,Dt+2,Dt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kt[0]),ye!==r.length-1&&qt===r[ye+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,d,d.index,{},M,he&&he[qt])}e.placedSymbolArray.emplaceBack(w.x,w.y,$,this.glyphOffsetArray.length-$,ie,T,A,w.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],v,0,!1,0,k)},xr.prototype._addCollisionDebugVertex=function(e,r,i,u,h,d){return r.emplaceBack(0,0),e.emplaceBack(i.x,i.y,u,h,Math.round(d.x),Math.round(d.y))},xr.prototype.addCollisionDebugVertices=function(e,r,i,u,h,d,v){var w=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),T=w.vertexLength,A=h.layoutVertexArray,k=h.collisionVertexArray,M=v.anchorX,O=v.anchorY;this._addCollisionDebugVertex(A,k,d,M,O,new ze(e,r)),this._addCollisionDebugVertex(A,k,d,M,O,new ze(i,r)),this._addCollisionDebugVertex(A,k,d,M,O,new ze(i,u)),this._addCollisionDebugVertex(A,k,d,M,O,new ze(e,u)),w.vertexLength+=4;var F=h.indexArray;F.emplaceBack(T,T+1),F.emplaceBack(T+1,T+2),F.emplaceBack(T+2,T+3),F.emplaceBack(T+3,T),w.primitiveLength+=4},xr.prototype.addDebugCollisionBoxes=function(e,r,i,u){for(var h=e;h<r;h++){var d=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(d.x1,d.y1,d.x2,d.y2,u?this.textCollisionBox:this.iconCollisionBox,d.anchorPoint,i)}},xr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rp(ds,av.members,pl),this.iconCollisionBox=new rp(ds,av.members,pl);for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},xr.prototype._deserializeCollisionBoxesForSymbol=function(e,r,i,u,h,d,v,w,T){for(var A={},k=r;k<i;k++){var M=e.get(k);A.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},A.textFeatureIndex=M.featureIndex;break}for(var O=u;O<h;O++){var F=e.get(O);A.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},A.verticalTextFeatureIndex=F.featureIndex;break}for(var G=d;G<v;G++){var $=e.get(G);A.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},A.iconFeatureIndex=$.featureIndex;break}for(var ie=w;ie<T;ie++){var Q=e.get(ie);A.verticalIconBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},A.verticalIconFeatureIndex=Q.featureIndex;break}return A},xr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},xr.prototype.hasTextData=function(){return this.text.segments.get().length>0},xr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},xr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},xr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},xr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},xr.prototype.addIndicesForPlacedSymbol=function(e,r){for(var i=e.placedSymbolArray.get(r),u=i.vertexStartIndex+4*i.numGlyphs,h=i.vertexStartIndex;h<u;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},xr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(e),i=Math.cos(e),u=[],h=[],d=[],v=0;v<this.symbolInstances.length;++v){d.push(v);var w=this.symbolInstances.get(v);u.push(0|Math.round(r*w.anchorX+i*w.anchorY)),h.push(w.featureIndex)}return d.sort(function(T,A){return u[T]-u[A]||h[A]-h[T]}),d},xr.prototype.addToSortKeyRanges=function(e,r){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})},xr.prototype.sortFeatures=function(e){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,u=this.symbolInstanceIndexes;i<u.length;i+=1){var h=this.symbolInstances.get(u[i]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(d,v,w){d>=0&&w.indexOf(d)===v&&r.addIndicesForPlacedSymbol(r.text,d)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ft("SymbolBucket",xr,{omit:["layers","collisionBoxArray","features","compareText"]}),xr.MAX_GLYPHS=65535,xr.addDynamicAttributes=bm;var _2=new Dn({"symbol-placement":new bt(V.layout_symbol["symbol-placement"]),"symbol-spacing":new bt(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bt(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bt(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bt(V.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bt(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new bt(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bt(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(V.layout_symbol["icon-size"]),"icon-text-fit":new bt(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bt(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(V.layout_symbol["icon-image"]),"icon-rotate":new yt(V.layout_symbol["icon-rotate"]),"icon-padding":new bt(V.layout_symbol["icon-padding"]),"icon-keep-upright":new bt(V.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(V.layout_symbol["icon-offset"]),"icon-anchor":new yt(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bt(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bt(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bt(V.layout_symbol["text-rotation-alignment"]),"text-field":new yt(V.layout_symbol["text-field"]),"text-font":new yt(V.layout_symbol["text-font"]),"text-size":new yt(V.layout_symbol["text-size"]),"text-max-width":new yt(V.layout_symbol["text-max-width"]),"text-line-height":new bt(V.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(V.layout_symbol["text-letter-spacing"]),"text-justify":new yt(V.layout_symbol["text-justify"]),"text-radial-offset":new yt(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bt(V.layout_symbol["text-variable-anchor"]),"text-anchor":new yt(V.layout_symbol["text-anchor"]),"text-max-angle":new bt(V.layout_symbol["text-max-angle"]),"text-writing-mode":new bt(V.layout_symbol["text-writing-mode"]),"text-rotate":new yt(V.layout_symbol["text-rotate"]),"text-padding":new bt(V.layout_symbol["text-padding"]),"text-keep-upright":new bt(V.layout_symbol["text-keep-upright"]),"text-transform":new yt(V.layout_symbol["text-transform"]),"text-offset":new yt(V.layout_symbol["text-offset"]),"text-allow-overlap":new bt(V.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bt(V.layout_symbol["text-ignore-placement"]),"text-optional":new bt(V.layout_symbol["text-optional"])}),wm={paint:new Dn({"icon-opacity":new yt(V.paint_symbol["icon-opacity"]),"icon-color":new yt(V.paint_symbol["icon-color"]),"icon-halo-color":new yt(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(V.paint_symbol["icon-halo-blur"]),"icon-translate":new bt(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new bt(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(V.paint_symbol["text-opacity"]),"text-color":new yt(V.paint_symbol["text-color"],{runtimeType:it,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new yt(V.paint_symbol["text-halo-color"]),"text-halo-width":new yt(V.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(V.paint_symbol["text-halo-blur"]),"text-translate":new bt(V.paint_symbol["text-translate"]),"text-translate-anchor":new bt(V.paint_symbol["text-translate-anchor"])}),layout:_2},Pu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ht,this.defaultValue=e};Pu.prototype.evaluate=function(e){if(e.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Pu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Pu.prototype.outputDefined=function(){return!1},Pu.prototype.serialize=function(){return null},ft("FormatSectionOverride",Pu,{omit:["defaultValue"]});var x2=function(e){function r(i){e.call(this,i,wm)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(i,u){if(e.prototype.recalculate.call(this,i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var d=[],v=0,w=h;v<w.length;v+=1){var T=w[v];d.indexOf(T)<0&&d.push(T)}this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(i,u,h,d){var v=this.layout.get(i).evaluate(u,{},h,d),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Qs(w.value)||!v?v:function(T,A){return A.replace(/{([^{}]+)}/g,function(k,M){return M in T?String(T[M]):""})}(u.properties,v)},r.prototype.createBucket=function(i){return new xr(i)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var i=0,u=wm.paint.overridableProperties;i<u.length;i+=1){var h=u[i];if(r.hasPaintOverride(this.layout,h)){var d,v=this.paint.get(h),w=new Pu(v),T=new ss(w,v.property.specification);d=v.value.kind==="constant"||v.value.kind==="source"?new el("source",T):new ls("composite",T,v.value.zoomStops,v.value._interpolationType),this.paint._values[h]=new Jn(v.property,d,v.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(i,u,h){return!(!this.layout||u.isDataDriven()||h.isDataDriven())&&r.hasPaintOverride(this.layout,i)},r.hasPaintOverride=function(i,u){var h=i.get("text-field"),d=wm.paint.properties[u],v=!1,w=function(k){for(var M=0,O=k;M<O.length;M+=1)if(d.overrides&&d.overrides.hasOverride(O[M]))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Sn)w(h.value.value.sections);else if(h.value.kind==="source"){var T=function(k){v||(k instanceof Wn&&Jr(k.value)===br?w(k.value.sections):k instanceof ro?w(k.sections):k.eachChild(T))},A=h.value;A._styleExpression&&T(A._styleExpression.expression)}return v},r}(bo),b2={paint:new Dn({"background-color":new bt(V.paint_background["background-color"]),"background-pattern":new Yn(V.paint_background["background-pattern"]),"background-opacity":new bt(V.paint_background["background-opacity"])})},w2=function(e){function r(i){e.call(this,i,b2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(bo),E2={paint:new Dn({"raster-opacity":new bt(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new bt(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bt(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bt(V.paint_raster["raster-brightness-max"]),"raster-saturation":new bt(V.paint_raster["raster-saturation"]),"raster-contrast":new bt(V.paint_raster["raster-contrast"]),"raster-resampling":new bt(V.paint_raster["raster-resampling"]),"raster-fade-duration":new bt(V.paint_raster["raster-fade-duration"])})},S2=function(e){function r(i){e.call(this,i,E2)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(bo),T2=function(e){function r(i){e.call(this,i,{}),this.implementation=i}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},r.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},r}(bo),C2={circle:am,heatmap:uw,hillshade:pw,fill:Iw,"fill-extrusion":Bw,line:qw,symbol:x2,background:w2,raster:S2},kv=xe.HTMLImageElement,Pv=xe.HTMLCanvasElement,Mv=xe.HTMLVideoElement,zv=xe.ImageData,Yh=xe.ImageBitmap,yl=function(e,r,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,u)};yl.prototype.update=function(e,r,i){var u=e.width,h=e.height,d=!(this.size&&this.size[0]===u&&this.size[1]===h||i),v=this.context,w=v.gl;if(this.useMipmap=!!(r&&r.useMipmap),w.bindTexture(w.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!r||r.premultiply!==!1)),d)this.size=[u,h],e instanceof kv||e instanceof Pv||e instanceof Mv||e instanceof zv||Yh&&e instanceof Yh?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,e):w.texImage2D(w.TEXTURE_2D,0,this.format,u,h,0,this.format,w.UNSIGNED_BYTE,e.data);else{var T=i||{x:0,y:0},A=T.x,k=T.y;e instanceof kv||e instanceof Pv||e instanceof Mv||e instanceof zv||Yh&&e instanceof Yh?w.texSubImage2D(w.TEXTURE_2D,0,A,k,w.RGBA,w.UNSIGNED_BYTE,e):w.texSubImage2D(w.TEXTURE_2D,0,A,k,u,h,w.RGBA,w.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&w.generateMipmap(w.TEXTURE_2D)},yl.prototype.bind=function(e,r,i){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),i!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,i||e),this.filter=e),r!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrap=r)},yl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},yl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Em=function(e){var r=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};Em.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Em.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mu=function(e,r,i){this.target=e,this.parent=r,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ii(["receive","process"],this),this.invoker=new Em(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?e:xe};function Lv(e,r,i){var u=2*Math.PI*6378137/256/Math.pow(2,i);return[e*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}Mu.prototype.send=function(e,r,i,u,h){var d=this;h===void 0&&(h=!1);var v=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[v]=i);var w=$e(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:e,hasCallback:!!i,targetMapId:u,mustQueue:h,sourceMapId:this.mapId,data:io(r,w)},w),{cancel:function(){i&&delete d.callbacks[v],d.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:d.mapId})}}},Mu.prototype.receive=function(e){var r=e.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[i];var u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u()}else oe()||r.mustQueue?(this.tasks[i]=r,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,r)},Mu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(e,r)}},Mu.prototype.processTask=function(e,r){var i=this;if(r.type==="<response>"){var u=this.callbacks[e];delete this.callbacks[e],u&&(r.error?u(yi(r.error)):u(null,yi(r.data)))}else{var h=!1,d=$e(this.globalScope)?void 0:[],v=r.hasCallback?function(k,M){h=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:k?io(k):null,data:io(M,d)},d)}:function(k){h=!0},w=null,T=yi(r.data);if(this.parent[r.type])w=this.parent[r.type](r.sourceMapId,T,v);else if(this.parent.getWorkerSource){var A=r.type.split(".");w=this.parent.getWorkerSource(r.sourceMapId,A[0],T.source)[A[1]](T,v)}else v(new Error("Could not find function "+r.type));!h&&w&&w.cancel&&(this.cancelCallbacks[e]=w.cancel)}},Mu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var fn=function(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};fn.prototype.setNorthEast=function(e){return this._ne=e instanceof Rr?new Rr(e.lng,e.lat):Rr.convert(e),this},fn.prototype.setSouthWest=function(e){return this._sw=e instanceof Rr?new Rr(e.lng,e.lat):Rr.convert(e),this},fn.prototype.extend=function(e){var r,i,u=this._sw,h=this._ne;if(e instanceof Rr)r=e,i=e;else{if(!(e instanceof fn))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(fn.convert(e)):this.extend(Rr.convert(e)):this;if(i=e._ne,!(r=e._sw)||!i)return this}return u||h?(u.lng=Math.min(r.lng,u.lng),u.lat=Math.min(r.lat,u.lat),h.lng=Math.max(i.lng,h.lng),h.lat=Math.max(i.lat,h.lat)):(this._sw=new Rr(r.lng,r.lat),this._ne=new Rr(i.lng,i.lat)),this},fn.prototype.getCenter=function(){return new Rr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},fn.prototype.getSouthWest=function(){return this._sw},fn.prototype.getNorthEast=function(){return this._ne},fn.prototype.getNorthWest=function(){return new Rr(this.getWest(),this.getNorth())},fn.prototype.getSouthEast=function(){return new Rr(this.getEast(),this.getSouth())},fn.prototype.getWest=function(){return this._sw.lng},fn.prototype.getSouth=function(){return this._sw.lat},fn.prototype.getEast=function(){return this._ne.lng},fn.prototype.getNorth=function(){return this._ne.lat},fn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},fn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},fn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},fn.prototype.contains=function(e){var r=Rr.convert(e),i=r.lng,u=r.lat,h=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&h},fn.convert=function(e){return!e||e instanceof fn?e:new fn(e)};var Rr=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid LngLat object: ("+e+", "+r+")");if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Rr.prototype.wrap=function(){return new Rr(tr(this.lng,-180,180),this.lat)},Rr.prototype.toArray=function(){return[this.lng,this.lat]},Rr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Rr.prototype.distanceTo=function(e){var r=Math.PI/180,i=this.lat*r,u=e.lat*r,h=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(h,1))},Rr.prototype.toBounds=function(e){e===void 0&&(e=0);var r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new fn(new Rr(this.lng-i,this.lat-r),new Rr(this.lng+i,this.lat+r))},Rr.convert=function(e){if(e instanceof Rr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Rr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Rr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Rv=2*Math.PI*63710088e-1;function Ov(e){return Rv*Math.cos(e*Math.PI/180)}function Dv(e){return(180+e)/360}function Bv(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Fv(e,r){return e/Ov(r)}function Sm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var vl=function(e,r,i){i===void 0&&(i=0),this.x=+e,this.y=+r,this.z=+i};vl.fromLngLat=function(e,r){r===void 0&&(r=0);var i=Rr.convert(e);return new vl(Dv(i.lng),Bv(i.lat),Fv(r,i.lat))},vl.prototype.toLngLat=function(){return new Rr(360*this.x-180,Sm(this.y))},vl.prototype.toAltitude=function(){return this.z*Ov(Sm(this.y))},vl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Rv*(e=Sm(this.y),1/Math.cos(e*Math.PI/180));var e};var _l=function(e,r,i){this.z=e,this.x=r,this.y=i,this.key=np(0,e,e,r,i)};_l.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},_l.prototype.url=function(e,r){var i,u,h,d,v,w=(u=this.y,h=this.z,d=Lv(256*(i=this.x),256*(u=Math.pow(2,h)-u-1),h),v=Lv(256*(i+1),256*(u+1),h),d[0]+","+d[1]+","+v[0]+","+v[1]),T=function(A,k,M){for(var O,F="",G=A;G>0;G--)F+=(k&(O=1<<G-1)?1:0)+(M&O?2:0);return F}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",w)},_l.prototype.getTilePoint=function(e){var r=Math.pow(2,this.z);return new ze(8192*(e.x*r-this.x),8192*(e.y*r-this.y))},_l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nv=function(e,r){this.wrap=e,this.canonical=r,this.key=np(e,r.z,r.z,r.x,r.y)},dn=function(e,r,i,u,h){this.overscaledZ=e,this.wrap=r,this.canonical=new _l(i,+u,+h),this.key=np(r,e,i,u,h)};function np(e,r,i,u,h){(e*=2)<0&&(e=-1*e-1);var d=1<<i;return(d*d*e+d*h+u).toString(36)+i.toString(36)+r.toString(36)}dn.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},dn.prototype.scaledTo=function(e){var r=this.canonical.z-e;return e>this.canonical.z?new dn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new dn(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)},dn.prototype.calculateScaledKey=function(e,r){var i=this.canonical.z-e;return e>this.canonical.z?np(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):np(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)},dn.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r},dn.prototype.children=function(e){if(this.overscaledZ>=e)return[new dn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new dn(r,this.wrap,r,i,u),new dn(r,this.wrap,r,i+1,u),new dn(r,this.wrap,r,i,u+1),new dn(r,this.wrap,r,i+1,u+1)]},dn.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},dn.prototype.wrapped=function(){return new dn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},dn.prototype.unwrapTo=function(e){return new dn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},dn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},dn.prototype.toUnwrapped=function(){return new Nv(this.wrap,this.canonical)},dn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},dn.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new vl(e.x-this.wrap,e.y))},ft("CanonicalTileID",_l),ft("OverscaledTileID",dn,{omit:["posMatrix"]});var Va=function(e,r,i){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return dr('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var u=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=i||"mapbox";for(var h=0;h<u;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(u,h)]=this.data[this._idx(u-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,u)]=this.data[this._idx(h,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Va.prototype.get=function(e,r){var i=new Uint8Array(this.data.buffer),u=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(i[u],i[u+1],i[u+2])},Va.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Va.prototype._idx=function(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)},Va.prototype._unpackMapbox=function(e,r,i){return(256*e*256+256*r+i)/10-1e4},Va.prototype._unpackTerrarium=function(e,r,i){return 256*e+r+i/256-32768},Va.prototype.getPixels=function(){return new wi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Va.prototype.backfillBorder=function(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=r*this.dim,h=r*this.dim+this.dim,d=i*this.dim,v=i*this.dim+this.dim;switch(r){case-1:u=h-1;break;case 1:h=u+1}switch(i){case-1:d=v-1;break;case 1:v=d+1}for(var w=-r*this.dim,T=-i*this.dim,A=d;A<v;A++)for(var k=u;k<h;k++)this.data[this._idx(k,A)]=e.data[this._idx(k+w,A+T)]},ft("DEMData",Va);var Qh=function(e){this._stringToNumber={},this._numberToString=[];for(var r=0;r<e.length;r++){var i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}};Qh.prototype.encode=function(e){return this._stringToNumber[e]},Qh.prototype.decode=function(e){return this._numberToString[e]};var ef=function(e,r,i,u,h){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=i,e._y=u,this.properties=e.properties,this.id=h},Tm={geometry:{configurable:!0}};Tm.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Tm.geometry.set=function(e){this._geometry=e},ef.prototype.toJSON=function(){var e={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e},Object.defineProperties(ef.prototype,Tm);var zu=function(){this.state={},this.stateChanges={},this.deletedStates={}};zu.prototype.updateState=function(e,r,i){var u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Ot(this.stateChanges[e][u],i),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==u&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][u]===null)for(var d in this.deletedStates[e][u]={},this.state[e][u])i[d]||(this.deletedStates[e][u][d]=null);else for(var v in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][v]===null&&delete this.deletedStates[e][u][v]},zu.prototype.removeFeatureState=function(e,r,i){if(this.deletedStates[e]!==null){var u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},zu.prototype.getState=function(e,r){var i=String(r),u=Ot({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][r];if(h===null)return{};for(var d in h)delete u[d]}return u},zu.prototype.initializeTileState=function(e,r){e.setFeatureState(this.state,r)},zu.prototype.coalesceChanges=function(e,r){var i={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var h={};for(var d in this.stateChanges[u])this.state[u][d]||(this.state[u][d]={}),Ot(this.state[u][d],this.stateChanges[u][d]),h[d]=this.state[u][d];i[u]=h}for(var v in this.deletedStates){this.state[v]=this.state[v]||{};var w={};if(this.deletedStates[v]===null)for(var T in this.state[v])w[T]={},this.state[v][T]={};else for(var A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else for(var k=0,M=Object.keys(this.deletedStates[v][A]);k<M.length;k+=1)delete this.state[v][A][M[k]];w[A]=this.state[v][A]}i[v]=i[v]||{},Ot(i[v],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(var O in e)e[O].setFeatureState(i,r)};var ja=function(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Oo(8192,16,0),this.grid3D=new Oo(8192,16,0),this.featureIndexArray=new L,this.promoteId=r};function Uv(e,r,i,u,h){return ln(e,function(d,v){var w=r instanceof ul?r.get(v):null;return w&&w.evaluate?w.evaluate(i,u,h):w})}function Vv(e){for(var r=1/0,i=1/0,u=-1/0,h=-1/0,d=0,v=e;d<v.length;d+=1){var w=v[d];r=Math.min(r,w.x),i=Math.min(i,w.y),u=Math.max(u,w.x),h=Math.max(h,w.y)}return{minX:r,minY:i,maxX:u,maxY:h}}function A2(e,r){return r-e}ja.prototype.insert=function(e,r,i,u,h,d){var v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,h);for(var w=d?this.grid3D:this.grid,T=0;T<r.length;T++){for(var A=r[T],k=[1/0,1/0,-1/0,-1/0],M=0;M<A.length;M++){var O=A[M];k[0]=Math.min(k[0],O.x),k[1]=Math.min(k[1],O.y),k[2]=Math.max(k[2],O.x),k[3]=Math.max(k[3],O.y)}k[0]<8192&&k[1]<8192&&k[2]>=0&&k[3]>=0&&w.insert(v,k[0],k[1],k[2],k[3])}},ja.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new wu.VectorTile(new jh(this.rawTileData)).layers,this.sourceLayerCoder=new Qh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ja.prototype.query=function(e,r,i,u){var h=this;this.loadVTLayers();for(var d=e.params||{},v=8192/e.tileSize/e.scale,w=ou(d.filter),T=e.queryGeometry,A=e.queryPadding*v,k=Vv(T),M=this.grid.query(k.minX-A,k.minY-A,k.maxX+A,k.maxY+A),O=Vv(e.cameraQueryGeometry),F=this.grid3D.query(O.minX-A,O.minY-A,O.maxX+A,O.maxY+A,function(we,Se,De,Ge){return function(Qe,_t,ot,Et,st){for(var Nt=0,kt=Qe;Nt<kt.length;Nt+=1){var vt=kt[Nt];if(_t<=vt.x&&ot<=vt.y&&Et>=vt.x&&st>=vt.y)return!0}var qt=[new ze(_t,ot),new ze(_t,st),new ze(Et,st),new ze(Et,ot)];if(Qe.length>2){for(var Dt=0,Qt=qt;Dt<Qt.length;Dt+=1)if(Eo(Qe,Qt[Dt]))return!0}for(var St=0;St<Qe.length-1;St++)if(dl(Qe[St],Qe[St+1],qt))return!0;return!1}(e.cameraQueryGeometry,we-A,Se-A,De+A,Ge+A)}),G=0,$=F;G<$.length;G+=1)M.push($[G]);M.sort(A2);for(var ie,Q={},he=function(we){var Se=M[we];if(Se!==ie){ie=Se;var De=h.featureIndexArray.get(Se),Ge=null;h.loadMatchingFeature(Q,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,w,d.layers,d.availableImages,r,i,u,function(Qe,_t,ot){return Ge||(Ge=Vr(Qe)),_t.queryIntersectsFeature(T,Qe,ot,Ge,h.z,e.transform,v,e.pixelPosMatrix)})}},ye=0;ye<M.length;ye++)he(ye);return Q},ja.prototype.loadMatchingFeature=function(e,r,i,u,h,d,v,w,T,A,k){var M=this.bucketLayerIDs[r];if(!d||function(Qe,_t){for(var ot=0;ot<Qe.length;ot++)if(_t.indexOf(Qe[ot])>=0)return!0;return!1}(d,M)){var O=this.sourceLayerCoder.decode(i),F=this.vtLayers[O].feature(u);if(h.needGeometry){var G=Yr(F,!0);if(!h.filter(new Gt(this.tileID.overscaledZ),G,this.tileID.canonical))return}else if(!h.filter(new Gt(this.tileID.overscaledZ),F))return;for(var $=this.getId(F,O),ie=0;ie<M.length;ie++){var Q=M[ie];if(!(d&&d.indexOf(Q)<0)){var he=w[Q];if(he){var ye={};$!==void 0&&A&&(ye=A.getState(he.sourceLayer||"_geojsonTileLayer",$));var we=Ot({},T[Q]);we.paint=Uv(we.paint,he.paint,F,ye,v),we.layout=Uv(we.layout,he.layout,F,ye,v);var Se=!k||k(F,he,ye);if(Se){var De=new ef(F,this.z,this.x,this.y,$);De.layer=we;var Ge=e[Q];Ge===void 0&&(Ge=e[Q]=[]),Ge.push({featureIndex:u,feature:De,intersectionZ:Se})}}}}}},ja.prototype.lookupSymbolFeatures=function(e,r,i,u,h,d,v,w){var T={};this.loadVTLayers();for(var A=ou(h),k=0,M=e;k<M.length;k+=1)this.loadMatchingFeature(T,i,u,M[k],A,d,v,w,r);return T},ja.prototype.hasLayer=function(e){for(var r=0,i=this.bucketLayerIDs;r<i.length;r+=1)for(var u=0,h=i[r];u<h.length;u+=1)if(e===h[u])return!0;return!1},ja.prototype.getId=function(e,r){var i=e.id;return this.promoteId&&typeof(i=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(i=Number(i)),i},ft("FeatureIndex",ja,{omit:["rawTileData","sourceLayerCoder"]});var In=function(e,r){this.tileID=e,this.uid=fi(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};In.prototype.registerFadeDuration=function(e){var r=e+this.timeAdded;r<ct.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},In.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},In.prototype.loadVectorData=function(e,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,k){var M={};if(!k)return M;for(var O=function(){var $=G[F],ie=$.layerIds.map(function(ye){return k.getLayer(ye)}).filter(Boolean);if(ie.length!==0){$.layers=ie,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(ye){return ie.filter(function(we){return we.id===ye})[0]}));for(var Q=0,he=ie;Q<he.length;Q+=1)M[he[Q].id]=$}},F=0,G=A;F<G.length;F+=1)O();return M}(e.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[u];if(h instanceof xr){if(this.hasSymbolBuckets=!0,!i)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var d in this.buckets){var v=this.buckets[d];if(v instanceof xr&&v.hasRTLText){this.hasRTLText=!0,zi.isLoading()||zi.isLoaded()||Uc()!=="deferred"||oo();break}}for(var w in this.queryPadding=0,this.buckets){var T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(w).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},In.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},In.prototype.getBucket=function(e){return this.buckets[e.id]},In.prototype.upload=function(e){for(var r in this.buckets){var i=this.buckets[r];i.uploadPending()&&i.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yl(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yl(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},In.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},In.prototype.queryRenderedFeatures=function(e,r,i,u,h,d,v,w,T,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:h,scale:d,tileSize:this.tileSize,pixelPosMatrix:A,transform:w,params:v,queryPadding:this.queryPadding*T},e,r,i):{}},In.prototype.querySourceFeatures=function(e,r){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var u=i.loadVTLayers(),h=r?r.sourceLayer:"",d=u._geojsonTileLayer||u[h];if(d)for(var v=ou(r&&r.filter),w=this.tileID.canonical,T=w.z,A=w.x,k=w.y,M={z:T,x:A,y:k},O=0;O<d.length;O++){var F=d.feature(O);if(v.needGeometry){var G=Yr(F,!0);if(!v.filter(new Gt(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!v.filter(new Gt(this.tileID.overscaledZ),F))continue;var $=i.getId(F,h),ie=new ef(F,T,A,k,$);ie.tile=M,e.push(ie)}}},In.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},In.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},In.prototype.setExpiryData=function(e){var r=this.expirationTime;if(e.cacheControl){var i=de(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),h=!1;if(this.expirationTime>u)h=!1;else if(r)if(this.expirationTime<r)h=!0;else{var d=this.expirationTime-r;d?this.expirationTime=u+Math.max(d,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},In.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},In.prototype.setFeatureState=function(e,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var i=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(r.style.hasLayer(u)){var h=this.buckets[u],d=h.layers[0].sourceLayer||"_geojsonTileLayer",v=i[d],w=e[d];if(v&&w&&Object.keys(w).length!==0){h.update(w,v,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=r&&r.style&&r.style.getLayer(u);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(h)))}}}},In.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},In.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ct.now()},In.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},In.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=ct.now()+e},In.prototype.setDependencies=function(e,r){for(var i={},u=0,h=r;u<h.length;u+=1)i[h[u]]=!0;this.dependencies[e]=i},In.prototype.hasDependency=function(e,r){for(var i=0,u=e;i<u.length;i+=1){var h=this.dependencies[u[i]];if(h){for(var d=0,v=r;d<v.length;d+=1)if(h[v[d]])return!0}}return!1};var _s=xe.performance,jv=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},_s.mark(this._marks.start)};jv.prototype.finish=function(){_s.mark(this._marks.end);var e=_s.getEntriesByName(this._marks.measure);return e.length===0&&(_s.measure(this._marks.measure,this._marks.start,this._marks.end),e=_s.getEntriesByName(this._marks.measure),_s.clearMarks(this._marks.start),_s.clearMarks(this._marks.end),_s.clearMeasures(this._marks.measure)),e},f.Actor=Mu,f.AlphaImage=gl,f.CanonicalTileID=_l,f.CollisionBoxArray=s,f.Color=cr,f.DEMData=Va,f.DataConstantProperty=bt,f.DictionaryCoder=Qh,f.EXTENT=8192,f.ErrorEvent=ae,f.EvaluationParameters=Gt,f.Event=W,f.Evented=ce,f.FeatureIndex=ja,f.FillBucket=No,f.FillExtrusionBucket=Uo,f.ImageAtlas=tp,f.ImagePosition=Zh,f.LineBucket=ui,f.LngLat=Rr,f.LngLatBounds=fn,f.MercatorCoordinate=vl,f.ONE_EM=24,f.OverscaledTileID=dn,f.Point=ze,f.Point$1=ze,f.Properties=Dn,f.Protobuf=jh,f.RGBAImage=wi,f.RequestManager=Mr,f.RequestPerformance=jv,f.ResourceType=Xl,f.SegmentVector=j,f.SourceFeatureState=zu,f.StructArrayLayout1ui2=Gc,f.StructArrayLayout2f1f2i16=Ba,f.StructArrayLayout2i4=Da,f.StructArrayLayout3ui6=ra,f.StructArrayLayout4i8=jc,f.SymbolBucket=xr,f.Texture=yl,f.Tile=In,f.Transitionable=On,f.Uniform1f=We,f.Uniform1i=Ne,f.Uniform2f=Ke,f.Uniform3f=ut,f.Uniform4f=wt,f.UniformColor=Ct,f.UniformMatrix4f=nr,f.UnwrappedTileID=Nv,f.ValidationError=J,f.WritingMode=Hi,f.ZoomHistory=Dc,f.add=function(e,r,i){return e[0]=r[0]+i[0],e[1]=r[1]+i[1],e[2]=r[2]+i[2],e},f.addDynamicAttributes=bm,f.asyncAll=function(e,r,i){if(!e.length)return i(null,[]);var u=e.length,h=new Array(e.length),d=null;e.forEach(function(v,w){r(v,function(T,A){T&&(d=T),h[w]=A,--u==0&&i(d,h)})})},f.bezier=et,f.bindAll=Ii,f.browser=ct,f.cacheEntryPossiblyAdded=function(e){++qs>Wl&&(e.getActor().send("enforceCacheSizeLimit",ts),qs=0)},f.clamp=Rt,f.clearTileCache=function(e){var r=xe.caches.delete("mapbox-tiles");e&&r.catch(e).then(function(){return e()})},f.clipLine=Ev,f.clone=function(e){var r=new pr(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.clone$1=Mn,f.clone$2=function(e){var r=new pr(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},f.collisionCircleLayout=$w,f.config=nt,f.create=function(){var e=new pr(16);return pr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},f.create$1=function(){var e=new pr(9);return pr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},f.create$2=function(){var e=new pr(4);return pr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},f.createCommonjsModule=ke,f.createExpression=nu,f.createLayout=Cn,f.createStyleLayer=function(e){return e.type==="custom"?new T2(e):new C2[e.type](e)},f.cross=function(e,r,i){var u=r[0],h=r[1],d=r[2],v=i[0],w=i[1],T=i[2];return e[0]=h*T-d*w,e[1]=d*v-u*T,e[2]=u*w-h*v,e},f.deepEqual=function e(r,i){if(Array.isArray(r)){if(!Array.isArray(i)||r.length!==i.length)return!1;for(var u=0;u<r.length;u++)if(!e(r[u],i[u]))return!1;return!0}if(typeof r=="object"&&r!==null&&i!==null){if(typeof i!="object"||Object.keys(r).length!==Object.keys(i).length)return!1;for(var h in r)if(!e(r[h],i[h]))return!1;return!0}return r===i},f.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},f.dot$1=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},f.ease=$t,f.emitValidationErrors=al,f.endsWith=Bi,f.enforceCacheSizeLimit=function(e){rs(),ii&&ii.then(function(r){r.keys().then(function(i){for(var u=0;u<i.length-e;u++)r.delete(i[u])})})},f.evaluateSizeForFeature=yv,f.evaluateSizeForZoom=vv,f.evaluateVariableOffset=Cv,f.evented=Nc,f.extend=Ot,f.featureFilter=ou,f.filterObject=rn,f.fromRotation=function(e,r){var i=Math.sin(r),u=Math.cos(r);return e[0]=u,e[1]=i,e[2]=0,e[3]=-i,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.getAnchorAlignment=ym,f.getAnchorJustification=xm,f.getArrayBuffer=Hs,f.getImage=R,f.getJSON=function(e,r){return ns(Ot(e,{type:"json"}),r)},f.getRTLTextPluginStatus=Uc,f.getReferrer=xa,f.getVideo=function(e,r){var i,u,h=xe.document.createElement("video");h.muted=!0,h.onloadstart=function(){r(null,h)};for(var d=0;d<e.length;d++){var v=xe.document.createElement("source");i=e[d],u=void 0,(u=xe.document.createElement("a")).href=i,(u.protocol!==xe.document.location.protocol||u.host!==xe.document.location.host)&&(h.crossOrigin="Anonymous"),v.src=e[d],h.appendChild(v)}return{cancel:function(){}}},f.identity=Li,f.invert=function(e,r){var i=r[0],u=r[1],h=r[2],d=r[3],v=r[4],w=r[5],T=r[6],A=r[7],k=r[8],M=r[9],O=r[10],F=r[11],G=r[12],$=r[13],ie=r[14],Q=r[15],he=i*w-u*v,ye=i*T-h*v,we=i*A-d*v,Se=u*T-h*w,De=u*A-d*w,Ge=h*A-d*T,Qe=k*$-M*G,_t=k*ie-O*G,ot=k*Q-F*G,Et=M*ie-O*$,st=M*Q-F*$,Nt=O*Q-F*ie,kt=he*Nt-ye*st+we*Et+Se*ot-De*_t+Ge*Qe;return kt?(e[0]=(w*Nt-T*st+A*Et)*(kt=1/kt),e[1]=(h*st-u*Nt-d*Et)*kt,e[2]=($*Ge-ie*De+Q*Se)*kt,e[3]=(O*De-M*Ge-F*Se)*kt,e[4]=(T*ot-v*Nt-A*_t)*kt,e[5]=(i*Nt-h*ot+d*_t)*kt,e[6]=(ie*we-G*Ge-Q*ye)*kt,e[7]=(k*Ge-O*we+F*ye)*kt,e[8]=(v*st-w*ot+A*Qe)*kt,e[9]=(u*ot-i*st-d*Qe)*kt,e[10]=(G*De-$*we+Q*he)*kt,e[11]=(M*we-k*De-F*he)*kt,e[12]=(w*_t-v*Et-T*Qe)*kt,e[13]=(i*Et-u*_t+h*Qe)*kt,e[14]=($*ye-G*Se-ie*he)*kt,e[15]=(k*Se-M*ye+O*he)*kt,e):null},f.isChar=rt,f.isMapboxURL=cn,f.keysDifference=function(e,r){var i=[];for(var u in e)u in r||i.push(u);return i},f.makeRequest=ns,f.mapObject=ln,f.mercatorXfromLng=Dv,f.mercatorYfromLat=Bv,f.mercatorZfromAltitude=Fv,f.mul=om,f.multiply=li,f.mvt=wu,f.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},f.normalize=function(e,r){var i=r[0],u=r[1],h=r[2],d=i*i+u*u+h*h;return d>0&&(d=1/Math.sqrt(d)),e[0]=r[0]*d,e[1]=r[1]*d,e[2]=r[2]*d,e},f.number=nn,f.offscreenCanvasSupported=Zs,f.ortho=function(e,r,i,u,h,d,v){var w=1/(r-i),T=1/(u-h),A=1/(d-v);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(r+i)*w,e[13]=(h+u)*T,e[14]=(v+d)*A,e[15]=1,e},f.parseGlyphPBF=function(e){return new jh(e).readFields(i2,[])},f.pbf=jh,f.performSymbolLayout=function(e,r,i,u,h,d,v){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var w=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,A={};if(e.textSizeData.kind==="composite"){var k=e.textSizeData,M=k.maxZoom;A.compositeTextSizes=[T["text-size"].possiblyEvaluate(new Gt(k.minZoom),v),T["text-size"].possiblyEvaluate(new Gt(M),v)]}if(e.iconSizeData.kind==="composite"){var O=e.iconSizeData,F=O.maxZoom;A.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new Gt(O.minZoom),v),T["icon-size"].possiblyEvaluate(new Gt(F),v)]}A.layoutTextSize=T["text-size"].possiblyEvaluate(new Gt(e.zoom+1),v),A.layoutIconSize=T["icon-size"].possiblyEvaluate(new Gt(e.zoom+1),v),A.textMaxSize=T["text-size"].possiblyEvaluate(new Gt(18));for(var G=24*w.get("text-line-height"),$=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point",ie=w.get("text-keep-upright"),Q=w.get("text-size"),he=function(){var Se=we[ye],De=w.get("text-font").evaluate(Se,{},v).join(","),Ge=Q.evaluate(Se,{},v),Qe=A.layoutTextSize.evaluate(Se,{},v),_t=A.layoutIconSize.evaluate(Se,{},v),ot={horizontal:{},vertical:void 0},Et=Se.text,st=[0,0];if(Et){var Nt=Et.toString(),kt=24*w.get("text-letter-spacing").evaluate(Se,{},v),vt=function(Kt){for(var Er=0,mr=Kt;Er<mr.length;Er+=1)if(ir=mr[Er].charCodeAt(0),rt.Arabic(ir)||rt["Arabic Supplement"](ir)||rt["Arabic Extended-A"](ir)||rt["Arabic Presentation Forms-A"](ir)||rt["Arabic Presentation Forms-B"](ir))return!1;var ir;return!0}(Nt)?kt:0,qt=w.get("text-anchor").evaluate(Se,{},v),Dt=w.get("text-variable-anchor");if(!Dt){var Qt=w.get("text-radial-offset").evaluate(Se,{},v);st=Qt?Cv(qt,[24*Qt,_m]):w.get("text-offset").evaluate(Se,{},v).map(function(Kt){return 24*Kt})}var St=$?"center":w.get("text-justify").evaluate(Se,{},v),or=w.get("symbol-placement"),Or=or==="point"?24*w.get("text-max-width").evaluate(Se,{},v):0,Hr=function(){e.allowVerticalPlacement&&Bc(Nt)&&(ot.vertical=Hh(Et,r,i,h,De,Or,G,qt,"left",vt,st,Hi.vertical,!0,or,Qe,Ge))};if(!$&&Dt){for(var jr=St==="auto"?Dt.map(function(Kt){return xm(Kt)}):[St],Dr=!1,Gr=0;Gr<jr.length;Gr++){var bn=jr[Gr];if(!ot.horizontal[bn])if(Dr)ot.horizontal[bn]=ot.horizontal[0];else{var wn=Hh(Et,r,i,h,De,Or,G,"center",bn,vt,st,Hi.horizontal,!1,or,Qe,Ge);wn&&(ot.horizontal[bn]=wn,Dr=wn.positionedLines.length===1)}}Hr()}else{St==="auto"&&(St=xm(qt));var ti=Hh(Et,r,i,h,De,Or,G,qt,St,vt,st,Hi.horizontal,!1,or,Qe,Ge);ti&&(ot.horizontal[St]=ti),Hr(),Bc(Nt)&&$&&ie&&(ot.vertical=Hh(Et,r,i,h,De,Or,G,qt,St,vt,st,Hi.vertical,!1,or,Qe,Ge))}}var kn=void 0,ri=!1;if(Se.icon&&Se.icon.name){var Qr=u[Se.icon.name];Qr&&(kn=function(Kt,Er,mr){var ir=ym(mr),ci=Er[0]-Kt.displaySize[0]*ir.horizontalAlign,jn=Er[1]-Kt.displaySize[1]*ir.verticalAlign;return{image:Kt,top:jn,bottom:jn+Kt.displaySize[1],left:ci,right:ci+Kt.displaySize[0]}}(h[Se.icon.name],w.get("icon-offset").evaluate(Se,{},v),w.get("icon-anchor").evaluate(Se,{},v)),ri=Qr.sdf,e.sdfIcons===void 0?e.sdfIcons=Qr.sdf:e.sdfIcons!==Qr.sdf&&dr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qr.pixelRatio!==e.pixelRatio||w.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Pn=Iv(ot.horizontal)||ot.vertical;e.iconsInText=!!Pn&&Pn.iconsInText,(Pn||kn)&&function(Kt,Er,mr,ir,ci,jn,kr,an,qn,ar,la){var Gi=jn.textMaxSize.evaluate(Er,{});Gi===void 0&&(Gi=kr);var ua,en=Kt.layers[0].layout,ca=en.get("icon-offset").evaluate(Er,{},la),To=Iv(mr.horizontal),Lu=kr/24,xl=Kt.tilePixelRatio*Lu,Ru=Kt.tilePixelRatio*Gi/24,qa=Kt.tilePixelRatio*an,Ou=Kt.tilePixelRatio*en.get("symbol-spacing"),tf=en.get("text-padding")*Kt.tilePixelRatio,Du=en.get("icon-padding")*Kt.tilePixelRatio,ip=en.get("text-max-angle")/180*Math.PI,rf=en.get("text-rotation-alignment")==="map"&&en.get("symbol-placement")!=="point",nf=en.get("icon-rotation-alignment")==="map"&&en.get("symbol-placement")!=="point",Za=en.get("symbol-placement"),op=Ou/2,Bu=en.get("icon-text-fit");ir&&Bu!=="none"&&(Kt.allowVerticalPlacement&&mr.vertical&&(ua=gv(ir,mr.vertical,Bu,en.get("icon-text-fit-padding"),ca,Lu)),To&&(ir=gv(ir,To,Bu,en.get("icon-text-fit-padding"),ca,Lu)));var xs=function(I2,fp){fp.x<0||fp.x>=8192||fp.y<0||fp.y>=8192||function(tn,Vo,k2,bs,km,Hv,cf,pa,pf,dp,hf,ff,Pm,Gv,mp,$v,Kv,Wv,Xv,Jv,$i,df,Yv,ha,P2){var Qv,wl,ju,qu,Zu,Hu=tn.addToLineVertexArray(Vo,k2),e_=0,t_=0,r_=0,n_=0,Mm=-1,zm=-1,Ha={},i_=H(""),Lm=0,Rm=0;if(pa._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Lm=(Qv=pa.layout.get("text-offset").evaluate($i,{},ha).map(function(yp){return 24*yp}))[0],Rm=Qv[1]):(Lm=24*pa.layout.get("text-radial-offset").evaluate($i,{},ha),Rm=_m),tn.allowVerticalPlacement&&bs.vertical){var o_=pa.layout.get("text-rotate").evaluate($i,{},ha)+90;qu=new Xh(pf,Vo,dp,hf,ff,bs.vertical,Pm,Gv,mp,o_),cf&&(Zu=new Xh(pf,Vo,dp,hf,ff,cf,Kv,Wv,mp,o_))}if(km){var Om=pa.layout.get("icon-rotate").evaluate($i,{}),a_=pa.layout.get("icon-text-fit")!=="none",s_=Sv(km,Om,Yv,a_),Dm=cf?Sv(cf,Om,Yv,a_):void 0;ju=new Xh(pf,Vo,dp,hf,ff,km,Kv,Wv,!1,Om),e_=4*s_.length;var l_=tn.iconSizeData,gp=null;l_.kind==="source"?(gp=[128*pa.layout.get("icon-size").evaluate($i,{})])[0]>32640&&dr(tn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):l_.kind==="composite"&&((gp=[128*df.compositeIconSizes[0].evaluate($i,{},ha),128*df.compositeIconSizes[1].evaluate($i,{},ha)])[0]>32640||gp[1]>32640)&&dr(tn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),tn.addSymbols(tn.icon,s_,gp,Jv,Xv,$i,!1,Vo,Hu.lineStartIndex,Hu.lineLength,-1,ha),Mm=tn.icon.placedSymbolArray.length-1,Dm&&(t_=4*Dm.length,tn.addSymbols(tn.icon,Dm,gp,Jv,Xv,$i,Hi.vertical,Vo,Hu.lineStartIndex,Hu.lineLength,-1,ha),zm=tn.icon.placedSymbolArray.length-1)}for(var u_ in bs.horizontal){var mf=bs.horizontal[u_];if(!wl){i_=H(mf.text);var M2=pa.layout.get("text-rotate").evaluate($i,{},ha);wl=new Xh(pf,Vo,dp,hf,ff,mf,Pm,Gv,mp,M2)}var c_=mf.positionedLines.length===1;if(r_+=Av(tn,Vo,mf,Hv,pa,mp,$i,$v,Hu,bs.vertical?Hi.horizontal:Hi.horizontalOnly,c_?Object.keys(bs.horizontal):[u_],Ha,Mm,df,ha),c_)break}bs.vertical&&(n_+=Av(tn,Vo,bs.vertical,Hv,pa,mp,$i,$v,Hu,Hi.vertical,["vertical"],Ha,zm,df,ha));var z2=wl?wl.boxStartIndex:tn.collisionBoxArray.length,L2=wl?wl.boxEndIndex:tn.collisionBoxArray.length,R2=qu?qu.boxStartIndex:tn.collisionBoxArray.length,O2=qu?qu.boxEndIndex:tn.collisionBoxArray.length,D2=ju?ju.boxStartIndex:tn.collisionBoxArray.length,B2=ju?ju.boxEndIndex:tn.collisionBoxArray.length,F2=Zu?Zu.boxStartIndex:tn.collisionBoxArray.length,N2=Zu?Zu.boxEndIndex:tn.collisionBoxArray.length,fa=-1,gf=function(yp,h_){return yp&&yp.circleDiameter?Math.max(yp.circleDiameter,h_):h_};fa=gf(wl,fa),fa=gf(qu,fa),fa=gf(ju,fa);var p_=(fa=gf(Zu,fa))>-1?1:0;p_&&(fa*=P2/24),tn.glyphOffsetArray.length>=xr.MAX_GLYPHS&&dr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$i.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,$i.sortKey),tn.symbolInstances.emplaceBack(Vo.x,Vo.y,Ha.right>=0?Ha.right:-1,Ha.center>=0?Ha.center:-1,Ha.left>=0?Ha.left:-1,Ha.vertical||-1,Mm,zm,i_,z2,L2,R2,O2,D2,B2,F2,N2,dp,r_,n_,e_,t_,p_,0,Pm,Lm,Rm,fa)}(Kt,fp,I2,mr,ir,ci,ua,Kt.layers[0],Kt.collisionBoxArray,Er.index,Er.sourceLayerIndex,Kt.index,xl,tf,rf,qn,qa,Du,nf,ca,Er,jn,ar,la,kr)};if(Za==="line")for(var Fu=0,of=Ev(Er.geometry,0,0,8192,8192);Fu<of.length;Fu+=1)for(var af=of[Fu],ap=0,sp=p2(af,Ou,ip,mr.vertical||To,ir,24,Ru,Kt.overscaling,8192);ap<sp.length;ap+=1){var sf=sp[ap];To&&m2(Kt,To.text,op,sf)||xs(af,sf)}else if(Za==="line-center")for(var lp=0,up=Er.geometry;lp<up.length;lp+=1){var cp=up[lp];if(cp.length>1){var lf=c2(cp,ip,mr.vertical||To,ir,24,Ru);lf&&xs(cp,lf)}}else if(Er.type==="Polygon")for(var Nu=0,uf=hm(Er.geometry,0);Nu<uf.length;Nu+=1){var Uu=uf[Nu],pp=f2(Uu,16);xs(Uu[0],new Cu(pp.x,pp.y,0))}else if(Er.type==="LineString")for(var bl=0,hp=Er.geometry;bl<hp.length;bl+=1){var Vu=hp[bl];xs(Vu,new Cu(Vu[0].x,Vu[0].y,0))}else if(Er.type==="Point")for(var Cm=0,qv=Er.geometry;Cm<qv.length;Cm+=1)for(var Am=0,Zv=qv[Cm];Am<Zv.length;Am+=1){var Im=Zv[Am];xs([Im],new Cu(Im.x,Im.y,0))}}(e,Se,ot,kn,u,A,Qe,_t,st,ri,v)},ye=0,we=e.features;ye<we.length;ye+=1)he();d&&e.generateCollisionDebugBuffers()},f.perspective=function(e,r,i,u,h){var d,v=1/Math.tan(r/2);return e[0]=v/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+u)*(d=1/(u-h)),e[14]=2*h*u*d):(e[10]=-1,e[14]=-2*u),e},f.pick=function(e,r){for(var i={},u=0;u<r.length;u++){var h=r[u];h in e&&(i[h]=e[h])}return i},f.plugin=zi,f.polygonIntersectsPolygon=oa,f.postMapLoadEvent=Vs,f.postTurnstileEvent=Kl,f.potpack=hv,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=ft,f.registerForPluginStateChange=function(e){return e({pluginStatus:_i,pluginURL:Do}),Nc.on("pluginStateChange",e),e},f.renderColorRamp=$y,f.rotate=function(e,r,i){var u=r[0],h=r[1],d=r[2],v=r[3],w=Math.sin(i),T=Math.cos(i);return e[0]=u*T+d*w,e[1]=h*T+v*w,e[2]=u*-w+d*T,e[3]=h*-w+v*T,e},f.rotateX=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),d=r[4],v=r[5],w=r[6],T=r[7],A=r[8],k=r[9],M=r[10],O=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=d*h+A*u,e[5]=v*h+k*u,e[6]=w*h+M*u,e[7]=T*h+O*u,e[8]=A*h-d*u,e[9]=k*h-v*u,e[10]=M*h-w*u,e[11]=O*h-T*u,e},f.rotateZ=function(e,r,i){var u=Math.sin(i),h=Math.cos(i),d=r[0],v=r[1],w=r[2],T=r[3],A=r[4],k=r[5],M=r[6],O=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=d*h+A*u,e[1]=v*h+k*u,e[2]=w*h+M*u,e[3]=T*h+O*u,e[4]=A*h-d*u,e[5]=k*h-v*u,e[6]=M*h-w*u,e[7]=O*h-T*u,e},f.scale=function(e,r,i){var u=i[0],h=i[1],d=i[2];return e[0]=r[0]*u,e[1]=r[1]*u,e[2]=r[2]*u,e[3]=r[3]*u,e[4]=r[4]*h,e[5]=r[5]*h,e[6]=r[6]*h,e[7]=r[7]*h,e[8]=r[8]*d,e[9]=r[9]*d,e[10]=r[10]*d,e[11]=r[11]*d,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.scale$1=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e},f.scale$2=function(e,r,i){return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e},f.setCacheLimits=function(e,r){ts=e,Wl=r},f.setRTLTextPlugin=function(e,r,i){if(i===void 0&&(i=!1),_i==="deferred"||_i==="loading"||_i==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Do=ct.resolveURL(e),_i="deferred",hu=r,ll(),i||oo()},f.sphericalToCartesian=function(e){var r=e[0],i=e[1],u=e[2];return i+=90,i*=Math.PI/180,u*=Math.PI/180,{x:r*Math.cos(i)*Math.sin(u),y:r*Math.sin(i)*Math.sin(u),z:r*Math.cos(u)}},f.sqrLen=function(e){var r=e[0],i=e[1];return r*r+i*i},f.styleSpec=V,f.sub=function(e,r,i){return e[0]=r[0]-i[0],e[1]=r[1]-i[1],e[2]=r[2]-i[2],e},f.symbolSize=u2,f.transformMat3=function(e,r,i){var u=r[0],h=r[1],d=r[2];return e[0]=u*i[0]+h*i[3]+d*i[6],e[1]=u*i[1]+h*i[4]+d*i[7],e[2]=u*i[2]+h*i[5]+d*i[8],e},f.transformMat4=vu,f.translate=function(e,r,i){var u,h,d,v,w,T,A,k,M,O,F,G,$=i[0],ie=i[1],Q=i[2];return r===e?(e[12]=r[0]*$+r[4]*ie+r[8]*Q+r[12],e[13]=r[1]*$+r[5]*ie+r[9]*Q+r[13],e[14]=r[2]*$+r[6]*ie+r[10]*Q+r[14],e[15]=r[3]*$+r[7]*ie+r[11]*Q+r[15]):(h=r[1],d=r[2],v=r[3],w=r[4],T=r[5],A=r[6],k=r[7],M=r[8],O=r[9],F=r[10],G=r[11],e[0]=u=r[0],e[1]=h,e[2]=d,e[3]=v,e[4]=w,e[5]=T,e[6]=A,e[7]=k,e[8]=M,e[9]=O,e[10]=F,e[11]=G,e[12]=u*$+w*ie+M*Q+r[12],e[13]=h*$+T*ie+O*Q+r[13],e[14]=d*$+A*ie+F*Q+r[14],e[15]=v*$+k*ie+G*Q+r[15]),e},f.triggerPluginCompletionEvent=Oh,f.uniqueId=fi,f.validateCustomStyleLayer=function(e){var r=[],i=e.id;return i===void 0&&r.push({message:"layers."+i+': missing required property "id"'}),e.render===void 0&&r.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&r.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),r},f.validateLight=nm,f.validateStyle=il,f.values=function(e){var r=[];for(var i in e)r.push(e[i]);return r},f.vectorTile=wu,f.version="1.13.3",f.warnOnce=dr,f.webpSupported=It,f.window=xe,f.wrap=tr}),Oe(["./shared"],function(f){function ke(z){var R=typeof z;if(R==="number"||R==="boolean"||R==="string"||z==null)return JSON.stringify(z);if(Array.isArray(z)){for(var D="[",Z=0,W=z;Z<W.length;Z+=1)D+=ke(W[Z])+",";return D+"]"}for(var ae=Object.keys(z).sort(),ce="{",V=0;V<ae.length;V++)ce+=JSON.stringify(ae[V])+":"+ke(z[ae[V]])+",";return ce+"}"}function Y(z){for(var R="",D=0,Z=f.refProperties;D<Z.length;D+=1)R+="/"+ke(z[Z[D]]);return R}var Fe=function(z){this.keyCache={},z&&this.replace(z)};Fe.prototype.replace=function(z){this._layerConfigs={},this._layers={},this.update(z,[])},Fe.prototype.update=function(z,R){for(var D=this,Z=0,W=z;Z<W.length;Z+=1){var ae=W[Z];this._layerConfigs[ae.id]=ae;var ce=this._layers[ae.id]=f.createStyleLayer(ae);ce._featureFilter=f.featureFilter(ce.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(var V=0,J=R;V<J.length;V+=1){var ge=J[V];delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge]}this.familiesBySource={};for(var Ue=0,He=function(tt,it){for(var Ut={},at=0;at<tt.length;at++){var Xt=it&&it[tt[at].id]||Y(tt[at]);it&&(it[tt[at].id]=Xt);var br=Ut[Xt];br||(br=Ut[Xt]=[]),br.push(tt[at])}var Ht=[];for(var ur in Ut)Ht.push(Ut[ur]);return Ht}(f.values(this._layerConfigs),this.keyCache);Ue<He.length;Ue+=1){var Pe=He[Ue].map(function(tt){return D._layers[tt.id]}),Ve=Pe[0];if(Ve.visibility!=="none"){var gt=Ve.source||"",ht=this.familiesBySource[gt];ht||(ht=this.familiesBySource[gt]={});var Me=Ve.sourceLayer||"_geojsonTileLayer",lt=ht[Me];lt||(lt=ht[Me]=[]),lt.push(Pe)}}};var ze=function(z){var R={},D=[];for(var Z in z){var W=z[Z],ae=R[Z]={};for(var ce in W){var V=W[+ce];if(V&&V.bitmap.width!==0&&V.bitmap.height!==0){var J={x:0,y:0,w:V.bitmap.width+2,h:V.bitmap.height+2};D.push(J),ae[ce]={rect:J,metrics:V.metrics}}}}var ge=f.potpack(D),Ue=new f.AlphaImage({width:ge.w||1,height:ge.h||1});for(var He in z){var Pe=z[He];for(var Ve in Pe){var gt=Pe[+Ve];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var ht=R[He][Ve].rect;f.AlphaImage.copy(gt.bitmap,Ue,{x:0,y:0},{x:ht.x+1,y:ht.y+1},gt.bitmap)}}}this.image=Ue,this.positions=R};f.register("GlyphAtlas",ze);var Xe=function(z){this.tileID=new f.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId};function xe(z,R,D){for(var Z=new f.EvaluationParameters(R),W=0,ae=z;W<ae.length;W+=1)ae[W].recalculate(Z,D)}function mt(z,R){var D=f.getArrayBuffer(z.request,function(Z,W,ae,ce){Z?R(Z):W&&R(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(W)),rawData:W,cacheControl:ae,expires:ce})});return function(){D.cancel(),R()}}Xe.prototype.parse=function(z,R,D,Z,W){var ae=this;this.status="parsing",this.data=z,this.collisionBoxArray=new f.CollisionBoxArray;var ce=new f.DictionaryCoder(Object.keys(z.layers).sort()),V=new f.FeatureIndex(this.tileID,this.promoteId);V.bucketLayerIDs=[];var J,ge,Ue,He,Pe={},Ve={featureIndex:V,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:D},gt=R.familiesBySource[this.source];for(var ht in gt){var Me=z.layers[ht];if(Me){Me.version===1&&f.warnOnce('Vector tile source "'+this.source+'" layer "'+ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var lt=ce.encode(ht),tt=[],it=0;it<Me.length;it++){var Ut=Me.feature(it),at=V.getId(Ut,ht);tt.push({feature:Ut,id:at,index:it,sourceLayerIndex:lt})}for(var Xt=0,br=gt[ht];Xt<br.length;Xt+=1){var Ht=br[Xt],ur=Ht[0];ur.minzoom&&this.zoom<Math.floor(ur.minzoom)||ur.maxzoom&&this.zoom>=ur.maxzoom||ur.visibility!=="none"&&(xe(Ht,this.zoom,D),(Pe[ur.id]=ur.createBucket({index:V.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lt,sourceID:this.source})).populate(tt,Ve,this.tileID.canonical),V.bucketLayerIDs.push(Ht.map(function(_r){return _r.id})))}}}var Yt=f.mapObject(Ve.glyphDependencies,function(_r){return Object.keys(_r).map(Number)});Object.keys(Yt).length?Z.send("getGlyphs",{uid:this.uid,stacks:Yt},function(_r,Wt){J||(J=_r,ge=Wt,Xr.call(ae))}):ge={};var Kn=Object.keys(Ve.iconDependencies);Kn.length?Z.send("getImages",{icons:Kn,source:this.source,tileID:this.tileID,type:"icons"},function(_r,Wt){J||(J=_r,Ue=Wt,Xr.call(ae))}):Ue={};var hr=Object.keys(Ve.patternDependencies);function Xr(){if(J)return W(J);if(ge&&Ue&&He){var _r=new ze(ge),Wt=new f.ImageAtlas(Ue,He);for(var cr in Pe){var oi=Pe[cr];oi instanceof f.SymbolBucket?(xe(oi.layers,this.zoom,D),f.performSymbolLayout(oi,ge,_r.positions,Ue,Wt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):oi.hasPattern&&(oi instanceof f.LineBucket||oi instanceof f.FillBucket||oi instanceof f.FillExtrusionBucket)&&(xe(oi.layers,this.zoom,D),oi.addFeatures(Ve,this.tileID.canonical,Wt.patternPositions))}this.status="done",W(null,{buckets:f.values(Pe).filter(function(Gs){return!Gs.isEmpty()}),featureIndex:V,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_r.image,imageAtlas:Wt,glyphMap:this.returnDependencies?ge:null,iconMap:this.returnDependencies?Ue:null,glyphPositions:this.returnDependencies?_r.positions:null})}}hr.length?Z.send("getImages",{icons:hr,source:this.source,tileID:this.tileID,type:"patterns"},function(_r,Wt){J||(J=_r,He=Wt,Xr.call(ae))}):He={},Xr.call(this)};var et=function(z,R,D,Z){this.actor=z,this.layerIndex=R,this.availableImages=D,this.loadVectorData=Z||mt,this.loading={},this.loaded={}};et.prototype.loadTile=function(z,R){var D=this,Z=z.uid;this.loading||(this.loading={});var W=!!(z&&z.request&&z.request.collectResourceTiming)&&new f.RequestPerformance(z.request),ae=this.loading[Z]=new Xe(z);ae.abort=this.loadVectorData(z,function(ce,V){if(delete D.loading[Z],ce||!V)return ae.status="done",D.loaded[Z]=ae,R(ce);var J=V.rawData,ge={};V.expires&&(ge.expires=V.expires),V.cacheControl&&(ge.cacheControl=V.cacheControl);var Ue={};if(W){var He=W.finish();He&&(Ue.resourceTiming=JSON.parse(JSON.stringify(He)))}ae.vectorTile=V.vectorTile,ae.parse(V.vectorTile,D.layerIndex,D.availableImages,D.actor,function(Pe,Ve){if(Pe||!Ve)return R(Pe);R(null,f.extend({rawTileData:J.slice(0)},Ve,ge,Ue))}),D.loaded=D.loaded||{},D.loaded[Z]=ae})},et.prototype.reloadTile=function(z,R){var D=this,Z=this.loaded,W=z.uid,ae=this;if(Z&&Z[W]){var ce=Z[W];ce.showCollisionBoxes=z.showCollisionBoxes;var V=function(J,ge){var Ue=ce.reloadCallback;Ue&&(delete ce.reloadCallback,ce.parse(ce.vectorTile,ae.layerIndex,D.availableImages,ae.actor,Ue)),R(J,ge)};ce.status==="parsing"?ce.reloadCallback=V:ce.status==="done"&&(ce.vectorTile?ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}},et.prototype.abortTile=function(z,R){var D=this.loading,Z=z.uid;D&&D[Z]&&D[Z].abort&&(D[Z].abort(),delete D[Z]),R()},et.prototype.removeTile=function(z,R){var D=this.loaded,Z=z.uid;D&&D[Z]&&delete D[Z],R()};var $t=f.window.ImageBitmap,Rt=function(){this.loaded={}};function tr(z,R){if(z.length!==0){Ot(z[0],R);for(var D=1;D<z.length;D++)Ot(z[D],!R)}}function Ot(z,R){for(var D=0,Z=0,W=0,ae=z.length,ce=ae-1;W<ae;ce=W++){var V=(z[W][0]-z[ce][0])*(z[ce][1]+z[W][1]),J=D+V;Z+=Math.abs(D)>=Math.abs(V)?D-J+V:V-J+D,D=J}D+Z>=0!=!!R&&z.reverse()}Rt.prototype.loadTile=function(z,R){var D=z.uid,Z=z.encoding,W=z.rawImageData,ae=$t&&W instanceof $t?this.getImageData(W):W,ce=new f.DEMData(D,ae,Z);this.loaded=this.loaded||{},this.loaded[D]=ce,R(null,ce)},Rt.prototype.getImageData=function(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);var R=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:R.width,height:R.height},R.data)},Rt.prototype.removeTile=function(z){var R=this.loaded,D=z.uid;R&&R[D]&&delete R[D]};var mn=f.vectorTile.VectorTileFeature.prototype.toGeoJSON,fi=function(z){this._feature=z,this.extent=f.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))};fi.prototype.loadGeometry=function(){if(this._feature.type===1){for(var z=[],R=0,D=this._feature.geometry;R<D.length;R+=1){var Z=D[R];z.push([new f.Point$1(Z[0],Z[1])])}return z}for(var W=[],ae=0,ce=this._feature.geometry;ae<ce.length;ae+=1){for(var V=[],J=0,ge=ce[ae];J<ge.length;J+=1){var Ue=ge[J];V.push(new f.Point$1(Ue[0],Ue[1]))}W.push(V)}return W},fi.prototype.toGeoJSON=function(z,R,D){return mn.call(this,z,R,D)};var Kr=function(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=z.length,this._features=z};Kr.prototype.feature=function(z){return new fi(this._features[z])};var gn=f.vectorTile.VectorTileFeature,Ii=Bi;function Bi(z,R){this.options=R||{},this.features=z,this.length=z.length}function ln(z,R){this.id=typeof z.id=="number"?z.id:void 0,this.type=z.type,this.rawGeometry=z.type===1?[z.geometry]:z.geometry,this.properties=z.tags,this.extent=R||4096}Bi.prototype.feature=function(z){return new ln(this.features[z],this.options.extent)},ln.prototype.loadGeometry=function(){var z=this.rawGeometry;this.geometry=[];for(var R=0;R<z.length;R++){for(var D=z[R],Z=[],W=0;W<D.length;W++)Z.push(new f.Point$1(D[W][0],D[W][1]));this.geometry.push(Z)}return this.geometry},ln.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var z=this.geometry,R=1/0,D=-1/0,Z=1/0,W=-1/0,ae=0;ae<z.length;ae++)for(var ce=z[ae],V=0;V<ce.length;V++){var J=ce[V];R=Math.min(R,J.x),D=Math.max(D,J.x),Z=Math.min(Z,J.y),W=Math.max(W,J.y)}return[R,Z,D,W]},ln.prototype.toGeoJSON=gn.prototype.toGeoJSON;var rn=eo,Mn=Ii;function eo(z){var R=new f.pbf;return function(D,Z){for(var W in D.layers)Z.writeMessage(3,dr,D.layers[W])}(z,R),R.finish()}function dr(z,R){var D;R.writeVarintField(15,z.version||1),R.writeStringField(1,z.name||""),R.writeVarintField(5,z.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(D=0;D<z.length;D++)Z.feature=z.feature(D),R.writeMessage(2,un,Z);var W=Z.keys;for(D=0;D<W.length;D++)R.writeStringField(3,W[D]);var ae=Z.values;for(D=0;D<ae.length;D++)R.writeMessage(4,$e,ae[D])}function un(z,R){var D=z.feature;D.id!==void 0&&R.writeVarintField(1,D.id),R.writeMessage(2,to,z),R.writeVarintField(3,D.type),R.writeMessage(4,Be,D)}function to(z,R){var D=z.feature,Z=z.keys,W=z.values,ae=z.keycache,ce=z.valuecache;for(var V in D.properties){var J=ae[V];J===void 0&&(Z.push(V),ae[V]=J=Z.length-1),R.writeVarint(J);var ge=D.properties[V],Ue=typeof ge;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(ge=JSON.stringify(ge));var He=Ue+":"+ge,Pe=ce[He];Pe===void 0&&(W.push(ge),ce[He]=Pe=W.length-1),R.writeVarint(Pe)}}function oe(z,R){return(R<<3)+(7&z)}function de(z){return z<<1^z>>31}function Be(z,R){for(var D=z.loadGeometry(),Z=z.type,W=0,ae=0,ce=D.length,V=0;V<ce;V++){var J=D[V],ge=1;Z===1&&(ge=J.length),R.writeVarint(oe(1,ge));for(var Ue=Z===3?J.length-1:J.length,He=0;He<Ue;He++){He===1&&Z!==1&&R.writeVarint(oe(2,Ue-1));var Pe=J[He].x-W,Ve=J[He].y-ae;R.writeVarint(de(Pe)),R.writeVarint(de(Ve)),W+=Pe,ae+=Ve}Z===3&&R.writeVarint(oe(7,1))}}function $e(z,R){var D=typeof z;D==="string"?R.writeStringField(1,z):D==="boolean"?R.writeBooleanField(7,z):D==="number"&&(z%1!=0?R.writeDoubleField(3,z):z<0?R.writeSVarintField(6,z):R.writeVarintField(5,z))}function qe(z,R,D,Z){Je(z,D,Z),Je(R,2*D,2*Z),Je(R,2*D+1,2*Z+1)}function Je(z,R,D){var Z=z[R];z[R]=z[D],z[D]=Z}function Te(z,R,D,Z){var W=z-D,ae=R-Z;return W*W+ae*ae}rn.fromVectorTileJs=eo,rn.fromGeojsonVt=function(z,R){R=R||{};var D={};for(var Z in z)D[Z]=new Ii(z[Z].features,R),D[Z].name=Z,D[Z].version=R.version,D[Z].extent=R.extent;return eo({layers:D})},rn.GeoJSONWrapper=Mn;var Le=function(z){return z[0]},Re=function(z){return z[1]},Ae=function(z,R,D,Z,W){R===void 0&&(R=Le),D===void 0&&(D=Re),Z===void 0&&(Z=64),W===void 0&&(W=Float64Array),this.nodeSize=Z,this.points=z;for(var ae=z.length<65536?Uint16Array:Uint32Array,ce=this.ids=new ae(z.length),V=this.coords=new W(2*z.length),J=0;J<z.length;J++)ce[J]=J,V[2*J]=R(z[J]),V[2*J+1]=D(z[J]);(function ge(Ue,He,Pe,Ve,gt,ht){if(!(gt-Ve<=Pe)){var Me=Ve+gt>>1;(function lt(tt,it,Ut,at,Xt,br){for(;Xt>at;){if(Xt-at>600){var Ht=Xt-at+1,ur=Ut-at+1,Yt=Math.log(Ht),Kn=.5*Math.exp(2*Yt/3),hr=.5*Math.sqrt(Yt*Kn*(Ht-Kn)/Ht)*(ur-Ht/2<0?-1:1);lt(tt,it,Ut,Math.max(at,Math.floor(Ut-ur*Kn/Ht+hr)),Math.min(Xt,Math.floor(Ut+(Ht-ur)*Kn/Ht+hr)),br)}var Xr=it[2*Ut+br],_r=at,Wt=Xt;for(qe(tt,it,at,Ut),it[2*Xt+br]>Xr&&qe(tt,it,at,Xt);_r<Wt;){for(qe(tt,it,_r,Wt),_r++,Wt--;it[2*_r+br]<Xr;)_r++;for(;it[2*Wt+br]>Xr;)Wt--}it[2*at+br]===Xr?qe(tt,it,at,Wt):qe(tt,it,++Wt,Xt),Wt<=Ut&&(at=Wt+1),Ut<=Wt&&(Xt=Wt-1)}})(Ue,He,Me,Ve,gt,ht%2),ge(Ue,He,Pe,Ve,Me-1,ht+1),ge(Ue,He,Pe,Me+1,gt,ht+1)}})(ce,V,Z,0,ce.length-1,0)};Ae.prototype.range=function(z,R,D,Z){return function(W,ae,ce,V,J,ge,Ue){for(var He,Pe,Ve=[0,W.length-1,0],gt=[];Ve.length;){var ht=Ve.pop(),Me=Ve.pop(),lt=Ve.pop();if(Me-lt<=Ue)for(var tt=lt;tt<=Me;tt++)Pe=ae[2*tt+1],(He=ae[2*tt])>=ce&&He<=J&&Pe>=V&&Pe<=ge&&gt.push(W[tt]);else{var it=Math.floor((lt+Me)/2);Pe=ae[2*it+1],(He=ae[2*it])>=ce&&He<=J&&Pe>=V&&Pe<=ge&&gt.push(W[it]);var Ut=(ht+1)%2;(ht===0?ce<=He:V<=Pe)&&(Ve.push(lt),Ve.push(it-1),Ve.push(Ut)),(ht===0?J>=He:ge>=Pe)&&(Ve.push(it+1),Ve.push(Me),Ve.push(Ut))}}return gt}(this.ids,this.coords,z,R,D,Z,this.nodeSize)},Ae.prototype.within=function(z,R,D){return function(Z,W,ae,ce,V,J){for(var ge=[0,Z.length-1,0],Ue=[],He=V*V;ge.length;){var Pe=ge.pop(),Ve=ge.pop(),gt=ge.pop();if(Ve-gt<=J)for(var ht=gt;ht<=Ve;ht++)Te(W[2*ht],W[2*ht+1],ae,ce)<=He&&Ue.push(Z[ht]);else{var Me=Math.floor((gt+Ve)/2),lt=W[2*Me],tt=W[2*Me+1];Te(lt,tt,ae,ce)<=He&&Ue.push(Z[Me]);var it=(Pe+1)%2;(Pe===0?ae-V<=lt:ce-V<=tt)&&(ge.push(gt),ge.push(Me-1),ge.push(it)),(Pe===0?ae+V>=lt:ce+V>=tt)&&(ge.push(Me+1),ge.push(Ve),ge.push(it))}}return Ue}(this.ids,this.coords,z,R,D,this.nodeSize)};var Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(z){return z}},Ze=function(z){this.options=Pr(Object.create(Ye),z),this.trees=new Array(this.options.maxZoom+1)};function ct(z,R,D,Z,W){return{x:z,y:R,zoom:1/0,id:D,parentId:-1,numPoints:Z,properties:W}}function nt(z,R){var D=z.geometry.coordinates,Z=D[1];return{x:jt(D[0]),y:dt(Z),zoom:1/0,index:R,parentId:-1}}function It(z){return{type:"Feature",id:z.id,properties:Vt(z),geometry:{type:"Point",coordinates:[(Z=z.x,360*(Z-.5)),(R=z.y,D=(180-360*R)*Math.PI/180,360*Math.atan(Math.exp(D))/Math.PI-90)]}};var R,D,Z}function Vt(z){var R=z.numPoints,D=R>=1e4?Math.round(R/1e3)+"k":R>=1e3?Math.round(R/100)/10+"k":R;return Pr(Pr({},z.properties),{cluster:!0,cluster_id:z.id,point_count:R,point_count_abbreviated:D})}function jt(z){return z/360+.5}function dt(z){var R=Math.sin(z*Math.PI/180),D=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return D<0?0:D>1?1:D}function Pr(z,R){for(var D in R)z[D]=R[D];return z}function Mr(z){return z.x}function cn(z){return z.y}function ki(z,R,D,Z,W,ae){var ce=W-D,V=ae-Z;if(ce!==0||V!==0){var J=((z-D)*ce+(R-Z)*V)/(ce*ce+V*V);J>1?(D=W,Z=ae):J>0&&(D+=ce*J,Z+=V*J)}return(ce=z-D)*ce+(V=R-Z)*V}function zn(z,R,D,Z){var W={id:z===void 0?null:z,type:R,geometry:D,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var ce=ae.geometry,V=ae.type;if(V==="Point"||V==="MultiPoint"||V==="LineString")lr(ae,ce);else if(V==="Polygon"||V==="MultiLineString")for(var J=0;J<ce.length;J++)lr(ae,ce[J]);else if(V==="MultiPolygon")for(J=0;J<ce.length;J++)for(var ge=0;ge<ce[J].length;ge++)lr(ae,ce[J][ge])}(W),W}function lr(z,R){for(var D=0;D<R.length;D+=3)z.minX=Math.min(z.minX,R[D]),z.minY=Math.min(z.minY,R[D+1]),z.maxX=Math.max(z.maxX,R[D]),z.maxY=Math.max(z.maxY,R[D+1])}function rr(z,R,D,Z){if(R.geometry){var W=R.geometry.coordinates,ae=R.geometry.type,ce=Math.pow(D.tolerance/((1<<D.maxZoom)*D.extent),2),V=[],J=R.id;if(D.promoteId?J=R.properties[D.promoteId]:D.generateId&&(J=Z||0),ae==="Point")yn(W,V);else if(ae==="MultiPoint")for(var ge=0;ge<W.length;ge++)yn(W[ge],V);else if(ae==="LineString")Un(W,V,ce,!1);else if(ae==="MultiLineString"){if(D.lineMetrics){for(ge=0;ge<W.length;ge++)Un(W[ge],V=[],ce,!1),z.push(zn(J,"LineString",V,R.properties));return}vn(W,V,ce,!1)}else if(ae==="Polygon")vn(W,V,ce,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ge=0;ge<R.geometry.geometries.length;ge++)rr(z,{id:J,geometry:R.geometry.geometries[ge],properties:R.properties},D,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ge=0;ge<W.length;ge++){var Ue=[];vn(W[ge],Ue,ce,!0),V.push(Ue)}}z.push(zn(J,ae,V,R.properties))}}function yn(z,R){R.push(ii(z[0])),R.push(vo(z[1])),R.push(0)}function Un(z,R,D,Z){for(var W,ae,ce=0,V=0;V<z.length;V++){var J=ii(z[V][0]),ge=vo(z[V][1]);R.push(J),R.push(ge),R.push(0),V>0&&(ce+=Z?(W*ge-J*ae)/2:Math.sqrt(Math.pow(J-W,2)+Math.pow(ge-ae,2))),W=J,ae=ge}var Ue=R.length-3;R[2]=1,function He(Pe,Ve,gt,ht){for(var Me,lt=ht,tt=gt-Ve>>1,it=gt-Ve,Ut=Pe[Ve],at=Pe[Ve+1],Xt=Pe[gt],br=Pe[gt+1],Ht=Ve+3;Ht<gt;Ht+=3){var ur=ki(Pe[Ht],Pe[Ht+1],Ut,at,Xt,br);if(ur>lt)Me=Ht,lt=ur;else if(ur===lt){var Yt=Math.abs(Ht-tt);Yt<it&&(Me=Ht,it=Yt)}}lt>ht&&(Me-Ve>3&&He(Pe,Ve,Me,ht),Pe[Me+2]=lt,gt-Me>3&&He(Pe,Me,gt,ht))}(R,0,Ue,D),R[Ue+2]=1,R.size=Math.abs(ce),R.start=0,R.end=R.size}function vn(z,R,D,Z){for(var W=0;W<z.length;W++){var ae=[];Un(z[W],ae,D,Z),R.push(ae)}}function ii(z){return z/360+.5}function vo(z){var R=Math.sin(z*Math.PI/180),D=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return D<0?0:D>1?1:D}function di(z,R,D,Z,W,ae,ce,V){if(Z/=R,ae>=(D/=R)&&ce<Z)return z;if(ce<D||ae>=Z)return null;for(var J=[],ge=0;ge<z.length;ge++){var Ue=z[ge],He=Ue.geometry,Pe=Ue.type,Ve=W===0?Ue.minX:Ue.minY,gt=W===0?Ue.maxX:Ue.maxY;if(Ve>=D&&gt<Z)J.push(Ue);else if(!(gt<D||Ve>=Z)){var ht=[];if(Pe==="Point"||Pe==="MultiPoint")$l(He,ht,D,Z,W);else if(Pe==="LineString")Kl(He,ht,D,Z,W,!1,V.lineMetrics);else if(Pe==="MultiLineString")Vs(He,ht,D,Z,W,!1);else if(Pe==="Polygon")Vs(He,ht,D,Z,W,!0);else if(Pe==="MultiPolygon")for(var Me=0;Me<He.length;Me++){var lt=[];Vs(He[Me],lt,D,Z,W,!0),lt.length&&ht.push(lt)}if(ht.length){if(V.lineMetrics&&Pe==="LineString"){for(Me=0;Me<ht.length;Me++)J.push(zn(Ue.id,Pe,ht[Me],Ue.tags));continue}Pe!=="LineString"&&Pe!=="MultiLineString"||(ht.length===1?(Pe="LineString",ht=ht[0]):Pe="MultiLineString"),Pe!=="Point"&&Pe!=="MultiPoint"||(Pe=ht.length===3?"Point":"MultiPoint"),J.push(zn(Ue.id,Pe,ht,Ue.tags))}}}return J.length?J:null}function $l(z,R,D,Z,W){for(var ae=0;ae<z.length;ae+=3){var ce=z[ae+W];ce>=D&&ce<=Z&&(R.push(z[ae]),R.push(z[ae+1]),R.push(z[ae+2]))}}function Kl(z,R,D,Z,W,ae,ce){for(var V,J,ge=Us(z),Ue=W===0?Wl:rs,He=z.start,Pe=0;Pe<z.length-3;Pe+=3){var Ve=z[Pe],gt=z[Pe+1],ht=z[Pe+2],Me=z[Pe+3],lt=z[Pe+4],tt=W===0?Ve:gt,it=W===0?Me:lt,Ut=!1;ce&&(V=Math.sqrt(Math.pow(Ve-Me,2)+Math.pow(gt-lt,2))),tt<D?it>D&&(J=Ue(ge,Ve,gt,Me,lt,D),ce&&(ge.start=He+V*J)):tt>Z?it<Z&&(J=Ue(ge,Ve,gt,Me,lt,Z),ce&&(ge.start=He+V*J)):ts(ge,Ve,gt,ht),it<D&&tt>=D&&(J=Ue(ge,Ve,gt,Me,lt,D),Ut=!0),it>Z&&tt<=Z&&(J=Ue(ge,Ve,gt,Me,lt,Z),Ut=!0),!ae&&Ut&&(ce&&(ge.end=He+V*J),R.push(ge),ge=Us(z)),ce&&(He+=V)}var at=z.length-3;Ve=z[at],gt=z[at+1],ht=z[at+2],(tt=W===0?Ve:gt)>=D&&tt<=Z&&ts(ge,Ve,gt,ht),at=ge.length-3,ae&&at>=3&&(ge[at]!==ge[0]||ge[at+1]!==ge[1])&&ts(ge,ge[0],ge[1],ge[2]),ge.length&&R.push(ge)}function Us(z){var R=[];return R.size=z.size,R.start=z.start,R.end=z.end,R}function Vs(z,R,D,Z,W,ae){for(var ce=0;ce<z.length;ce++)Kl(z[ce],R,D,Z,W,ae,!1)}function ts(z,R,D,Z){z.push(R),z.push(D),z.push(Z)}function Wl(z,R,D,Z,W,ae){var ce=(ae-R)/(Z-R);return z.push(ae),z.push(D+(W-D)*ce),z.push(1),ce}function rs(z,R,D,Z,W,ae){var ce=(ae-D)/(W-D);return z.push(R+(Z-R)*ce),z.push(ae),z.push(1),ce}function js(z,R){for(var D=[],Z=0;Z<z.length;Z++){var W,ae=z[Z],ce=ae.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")W=_a(ae.geometry,R);else if(ce==="MultiLineString"||ce==="Polygon"){W=[];for(var V=0;V<ae.geometry.length;V++)W.push(_a(ae.geometry[V],R))}else if(ce==="MultiPolygon")for(W=[],V=0;V<ae.geometry.length;V++){for(var J=[],ge=0;ge<ae.geometry[V].length;ge++)J.push(_a(ae.geometry[V][ge],R));W.push(J)}D.push(zn(ae.id,ce,W,ae.tags))}return D}function _a(z,R){var D=[];D.size=z.size,z.start!==void 0&&(D.start=z.start,D.end=z.end);for(var Z=0;Z<z.length;Z+=3)D.push(z[Z]+R,z[Z+1],z[Z+2]);return D}function qs(z,R){if(z.transformed)return z;var D,Z,W,ae=1<<z.z,ce=z.x,V=z.y;for(D=0;D<z.features.length;D++){var J=z.features[D],ge=J.geometry,Ue=J.type;if(J.geometry=[],Ue===1)for(Z=0;Z<ge.length;Z+=2)J.geometry.push(Zs(ge[Z],ge[Z+1],R,ae,ce,V));else for(Z=0;Z<ge.length;Z++){var He=[];for(W=0;W<ge[Z].length;W+=2)He.push(Zs(ge[Z][W],ge[Z][W+1],R,ae,ce,V));J.geometry.push(He)}}return z.transformed=!0,z}function Zs(z,R,D,Z,W,ae){return[Math.round(D*(z*Z-W)),Math.round(D*(R*Z-ae))]}function Xl(z,R,D,Z,W){for(var ae=R===W.maxZoom?0:W.tolerance/((1<<R)*W.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:D,y:Z,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},V=0;V<z.length;V++){ce.numFeatures++,Jl(ce,z[V],ae,W);var J=z[V].minX,ge=z[V].minY,Ue=z[V].maxX,He=z[V].maxY;J<ce.minX&&(ce.minX=J),ge<ce.minY&&(ce.minY=ge),Ue>ce.maxX&&(ce.maxX=Ue),He>ce.maxY&&(ce.maxY=He)}return ce}function Jl(z,R,D,Z){var W=R.geometry,ae=R.type,ce=[];if(ae==="Point"||ae==="MultiPoint")for(var V=0;V<W.length;V+=3)ce.push(W[V]),ce.push(W[V+1]),z.numPoints++,z.numSimplified++;else if(ae==="LineString")xa(ce,W,z,D,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(V=0;V<W.length;V++)xa(ce,W[V],z,D,ae==="Polygon",V===0);else if(ae==="MultiPolygon")for(var J=0;J<W.length;J++){var ge=W[J];for(V=0;V<ge.length;V++)xa(ce,ge[V],z,D,!0,V===0)}if(ce.length){var Ue=R.tags||null;if(ae==="LineString"&&Z.lineMetrics){for(var He in Ue={},R.tags)Ue[He]=R.tags[He];Ue.mapbox_clip_start=W.start/W.size,Ue.mapbox_clip_end=W.end/W.size}var Pe={geometry:ce,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ue};R.id!==null&&(Pe.id=R.id),z.features.push(Pe)}}function xa(z,R,D,Z,W,ae){var ce=Z*Z;if(Z>0&&R.size<(W?ce:Z))D.numPoints+=R.length/3;else{for(var V=[],J=0;J<R.length;J+=3)(Z===0||R[J+2]>ce)&&(D.numSimplified++,V.push(R[J]),V.push(R[J+1])),D.numPoints++;W&&function(ge,Ue){for(var He=0,Pe=0,Ve=ge.length,gt=Ve-2;Pe<Ve;gt=Pe,Pe+=2)He+=(ge[Pe]-ge[gt])*(ge[Pe+1]+ge[gt+1]);if(He>0===Ue)for(Pe=0,Ve=ge.length;Pe<Ve/2;Pe+=2){var ht=ge[Pe],Me=ge[Pe+1];ge[Pe]=ge[Ve-2-Pe],ge[Pe+1]=ge[Ve-1-Pe],ge[Ve-2-Pe]=ht,ge[Ve-1-Pe]=Me}}(V,ae),z.push(V)}}function zo(z,R){var D=(R=this.options=function(W,ae){for(var ce in ae)W[ce]=ae[ce];return W}(Object.create(this.options),R)).debug;if(D&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(W,ae){var ce=[];if(W.type==="FeatureCollection")for(var V=0;V<W.features.length;V++)rr(ce,W.features[V],ae,V);else rr(ce,W.type==="Feature"?W:{geometry:W},ae);return ce}(z,R);this.tiles={},this.tileCoords=[],D&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Z=function(W,ae){var ce=ae.buffer/ae.extent,V=W,J=di(W,1,-1-ce,ce,0,-1,2,ae),ge=di(W,1,1-ce,2+ce,0,-1,2,ae);return(J||ge)&&(V=di(W,1,-ce,1+ce,0,-1,2,ae)||[],J&&(V=js(J,1).concat(V)),ge&&(V=V.concat(js(ge,-1)))),V}(Z,R)).length&&this.splitTile(Z,0,0,0),D&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Lo(z,R,D){return 32*((1<<z)*D+R)+z}function ns(z,R){var D=z.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);var Z=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!Z)return R(null,null);var W=new Kr(Z.features),ae=rn(W);ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),R(null,{vectorTile:W,rawData:ae.buffer})}Ze.prototype.load=function(z){var R=this.options,D=R.log,Z=R.minZoom,W=R.maxZoom,ae=R.nodeSize;D&&console.time("total time");var ce="prepare "+z.length+" points";D&&console.time(ce),this.points=z;for(var V=[],J=0;J<z.length;J++)z[J].geometry&&V.push(nt(z[J],J));this.trees[W+1]=new Ae(V,Mr,cn,ae,Float32Array),D&&console.timeEnd(ce);for(var ge=W;ge>=Z;ge--){var Ue=+Date.now();V=this._cluster(V,ge),this.trees[ge]=new Ae(V,Mr,cn,ae,Float32Array),D&&console.log("z%d: %d clusters in %dms",ge,V.length,+Date.now()-Ue)}return D&&console.timeEnd("total time"),this},Ze.prototype.getClusters=function(z,R){var D=((z[0]+180)%360+360)%360-180,Z=Math.max(-90,Math.min(90,z[1])),W=z[2]===180?180:((z[2]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)D=-180,W=180;else if(D>W){var ce=this.getClusters([D,Z,180,ae],R),V=this.getClusters([-180,Z,W,ae],R);return ce.concat(V)}for(var J=this.trees[this._limitZoom(R)],ge=[],Ue=0,He=J.range(jt(D),dt(ae),jt(W),dt(Z));Ue<He.length;Ue+=1){var Pe=J.points[He[Ue]];ge.push(Pe.numPoints?It(Pe):this.points[Pe.index])}return ge},Ze.prototype.getChildren=function(z){var R=this._getOriginId(z),D=this._getOriginZoom(z),Z="No cluster with the specified id.",W=this.trees[D];if(!W)throw new Error(Z);var ae=W.points[R];if(!ae)throw new Error(Z);for(var ce=this.options.radius/(this.options.extent*Math.pow(2,D-1)),V=[],J=0,ge=W.within(ae.x,ae.y,ce);J<ge.length;J+=1){var Ue=W.points[ge[J]];Ue.parentId===z&&V.push(Ue.numPoints?It(Ue):this.points[Ue.index])}if(V.length===0)throw new Error(Z);return V},Ze.prototype.getLeaves=function(z,R,D){var Z=[];return this._appendLeaves(Z,z,R=R||10,D=D||0,0),Z},Ze.prototype.getTile=function(z,R,D){var Z=this.trees[this._limitZoom(z)],W=Math.pow(2,z),ae=this.options,ce=ae.radius/ae.extent,V=(D-ce)/W,J=(D+1+ce)/W,ge={features:[]};return this._addTileFeatures(Z.range((R-ce)/W,V,(R+1+ce)/W,J),Z.points,R,D,W,ge),R===0&&this._addTileFeatures(Z.range(1-ce/W,V,1,J),Z.points,W,D,W,ge),R===W-1&&this._addTileFeatures(Z.range(0,V,ce/W,J),Z.points,-1,D,W,ge),ge.features.length?ge:null},Ze.prototype.getClusterExpansionZoom=function(z){for(var R=this._getOriginZoom(z)-1;R<=this.options.maxZoom;){var D=this.getChildren(z);if(R++,D.length!==1)break;z=D[0].properties.cluster_id}return R},Ze.prototype._appendLeaves=function(z,R,D,Z,W){for(var ae=0,ce=this.getChildren(R);ae<ce.length;ae+=1){var V=ce[ae],J=V.properties;if(J&&J.cluster?W+J.point_count<=Z?W+=J.point_count:W=this._appendLeaves(z,J.cluster_id,D,Z,W):W<Z?W++:z.push(V),z.length===D)break}return W},Ze.prototype._addTileFeatures=function(z,R,D,Z,W,ae){for(var ce=0,V=z;ce<V.length;ce+=1){var J=R[V[ce]],ge=J.numPoints,Ue={type:1,geometry:[[Math.round(this.options.extent*(J.x*W-D)),Math.round(this.options.extent*(J.y*W-Z))]],tags:ge?Vt(J):this.points[J.index].properties},He=void 0;ge?He=J.id:this.options.generateId?He=J.index:this.points[J.index].id&&(He=this.points[J.index].id),He!==void 0&&(Ue.id=He),ae.features.push(Ue)}},Ze.prototype._limitZoom=function(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))},Ze.prototype._cluster=function(z,R){for(var D=[],Z=this.options,W=Z.reduce,ae=Z.minPoints,ce=Z.radius/(Z.extent*Math.pow(2,R)),V=0;V<z.length;V++){var J=z[V];if(!(J.zoom<=R)){J.zoom=R;for(var ge=this.trees[R+1],Ue=ge.within(J.x,J.y,ce),He=J.numPoints||1,Pe=He,Ve=0,gt=Ue;Ve<gt.length;Ve+=1){var ht=ge.points[gt[Ve]];ht.zoom>R&&(Pe+=ht.numPoints||1)}if(Pe>=ae){for(var Me=J.x*He,lt=J.y*He,tt=W&&He>1?this._map(J,!0):null,it=(V<<5)+(R+1)+this.points.length,Ut=0,at=Ue;Ut<at.length;Ut+=1){var Xt=ge.points[at[Ut]];if(!(Xt.zoom<=R)){Xt.zoom=R;var br=Xt.numPoints||1;Me+=Xt.x*br,lt+=Xt.y*br,Xt.parentId=it,W&&(tt||(tt=this._map(J,!0)),W(tt,this._map(Xt)))}}J.parentId=it,D.push(ct(Me/Pe,lt/Pe,it,Pe,tt))}else if(D.push(J),Pe>1)for(var Ht=0,ur=Ue;Ht<ur.length;Ht+=1){var Yt=ge.points[ur[Ht]];Yt.zoom<=R||(Yt.zoom=R,D.push(Yt))}}}return D},Ze.prototype._getOriginId=function(z){return z-this.points.length>>5},Ze.prototype._getOriginZoom=function(z){return(z-this.points.length)%32},Ze.prototype._map=function(z,R){if(z.numPoints)return R?Pr({},z.properties):z.properties;var D=this.points[z.index].properties,Z=this.options.map(D);return R&&Z===D?Pr({},Z):Z},zo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zo.prototype.splitTile=function(z,R,D,Z,W,ae,ce){for(var V=[z,R,D,Z],J=this.options,ge=J.debug;V.length;){Z=V.pop(),D=V.pop(),R=V.pop(),z=V.pop();var Ue=1<<R,He=Lo(R,D,Z),Pe=this.tiles[He];if(!Pe&&(ge>1&&console.time("creation"),Pe=this.tiles[He]=Xl(z,R,D,Z,J),this.tileCoords.push({z:R,x:D,y:Z}),ge)){ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,D,Z,Pe.numFeatures,Pe.numPoints,Pe.numSimplified),console.timeEnd("creation"));var Ve="z"+R;this.stats[Ve]=(this.stats[Ve]||0)+1,this.total++}if(Pe.source=z,W){if(R===J.maxZoom||R===W)continue;var gt=1<<W-R;if(D!==Math.floor(ae/gt)||Z!==Math.floor(ce/gt))continue}else if(R===J.indexMaxZoom||Pe.numPoints<=J.indexMaxPoints)continue;if(Pe.source=null,z.length!==0){ge>1&&console.time("clipping");var ht,Me,lt,tt,it,Ut,at=.5*J.buffer/J.extent,Xt=.5-at,br=.5+at,Ht=1+at;ht=Me=lt=tt=null,it=di(z,Ue,D-at,D+br,0,Pe.minX,Pe.maxX,J),Ut=di(z,Ue,D+Xt,D+Ht,0,Pe.minX,Pe.maxX,J),z=null,it&&(ht=di(it,Ue,Z-at,Z+br,1,Pe.minY,Pe.maxY,J),Me=di(it,Ue,Z+Xt,Z+Ht,1,Pe.minY,Pe.maxY,J),it=null),Ut&&(lt=di(Ut,Ue,Z-at,Z+br,1,Pe.minY,Pe.maxY,J),tt=di(Ut,Ue,Z+Xt,Z+Ht,1,Pe.minY,Pe.maxY,J),Ut=null),ge>1&&console.timeEnd("clipping"),V.push(ht||[],R+1,2*D,2*Z),V.push(Me||[],R+1,2*D,2*Z+1),V.push(lt||[],R+1,2*D+1,2*Z),V.push(tt||[],R+1,2*D+1,2*Z+1)}}},zo.prototype.getTile=function(z,R,D){var Z=this.options,W=Z.extent,ae=Z.debug;if(z<0||z>24)return null;var ce=1<<z,V=Lo(z,R=(R%ce+ce)%ce,D);if(this.tiles[V])return qs(this.tiles[V],W);ae>1&&console.log("drilling down to z%d-%d-%d",z,R,D);for(var J,ge=z,Ue=R,He=D;!J&&ge>0;)ge--,Ue=Math.floor(Ue/2),He=Math.floor(He/2),J=this.tiles[Lo(ge,Ue,He)];return J&&J.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ge,Ue,He),ae>1&&console.time("drilling down"),this.splitTile(J.source,ge,Ue,He,z,R,D),ae>1&&console.timeEnd("drilling down"),this.tiles[V]?qs(this.tiles[V],W):null):null};var Hs=function(z){function R(D,Z,W,ae){z.call(this,D,Z,W,ns),ae&&(this.loadGeoJSON=ae)}return z&&(R.__proto__=z),(R.prototype=Object.create(z&&z.prototype)).constructor=R,R.prototype.loadData=function(D,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Z,this._pendingLoadDataParams=D,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},R.prototype._loadData=function(){var D=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Z=this._pendingCallback,W=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ae=!!(W&&W.request&&W.request.collectResourceTiming)&&new f.RequestPerformance(W.request);this.loadGeoJSON(W,function(ce,V){if(ce||!V)return Z(ce);if(typeof V!="object")return Z(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."));(function Pe(Ve,gt){var ht,Me=Ve&&Ve.type;if(Me==="FeatureCollection")for(ht=0;ht<Ve.features.length;ht++)Pe(Ve.features[ht],gt);else if(Me==="GeometryCollection")for(ht=0;ht<Ve.geometries.length;ht++)Pe(Ve.geometries[ht],gt);else if(Me==="Feature")Pe(Ve.geometry,gt);else if(Me==="Polygon")tr(Ve.coordinates,gt);else if(Me==="MultiPolygon")for(ht=0;ht<Ve.coordinates.length;ht++)tr(Ve.coordinates[ht],gt);return Ve})(V,!0);try{if(W.filter){var J=f.createExpression(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));var ge=V.features.filter(function(Pe){return J.value.evaluate({zoom:0},Pe)});V={type:"FeatureCollection",features:ge}}D._geoJSONIndex=W.cluster?new Ze(function(Pe){var Ve=Pe.superclusterOptions,gt=Pe.clusterProperties;if(!gt||!Ve)return Ve;for(var ht={},Me={},lt={accumulated:null,zoom:0},tt={properties:null},it=Object.keys(gt),Ut=0,at=it;Ut<at.length;Ut+=1){var Xt=at[Ut],br=gt[Xt],Ht=br[0],ur=f.createExpression(br[1]),Yt=f.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",Xt]]:Ht);ht[Xt]=ur.value,Me[Xt]=Yt.value}return Ve.map=function(Kn){tt.properties=Kn;for(var hr={},Xr=0,_r=it;Xr<_r.length;Xr+=1){var Wt=_r[Xr];hr[Wt]=ht[Wt].evaluate(lt,tt)}return hr},Ve.reduce=function(Kn,hr){tt.properties=hr;for(var Xr=0,_r=it;Xr<_r.length;Xr+=1){var Wt=_r[Xr];lt.accumulated=Kn[Wt],Kn[Wt]=Me[Wt].evaluate(lt,tt)}},Ve}(W)).load(V.features):function(Pe,Ve){return new zo(Pe,Ve)}(V,W.geojsonVtOptions)}catch(Pe){return Z(Pe)}D.loaded={};var Ue={};if(ae){var He=ae.finish();He&&(Ue.resourceTiming={},Ue.resourceTiming[W.source]=JSON.parse(JSON.stringify(He)))}Z(null,Ue)})}},R.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},R.prototype.reloadTile=function(D,Z){var W=this.loaded;return W&&W[D.uid]?z.prototype.reloadTile.call(this,D,Z):this.loadTile(D,Z)},R.prototype.loadGeoJSON=function(D,Z){if(D.request)f.getJSON(D.request,Z);else{if(typeof D.data!="string")return Z(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."));try{return Z(null,JSON.parse(D.data))}catch{return Z(new Error("Input data given to '"+D.source+"' is not a valid GeoJSON object."))}}},R.prototype.removeSource=function(D,Z){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Z()},R.prototype.getClusterExpansionZoom=function(D,Z){try{Z(null,this._geoJSONIndex.getClusterExpansionZoom(D.clusterId))}catch(W){Z(W)}},R.prototype.getClusterChildren=function(D,Z){try{Z(null,this._geoJSONIndex.getChildren(D.clusterId))}catch(W){Z(W)}},R.prototype.getClusterLeaves=function(D,Z){try{Z(null,this._geoJSONIndex.getLeaves(D.clusterId,D.limit,D.offset))}catch(W){Z(W)}},R}(et),Wr=function(z){var R=this;this.self=z,this.actor=new f.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:et,geojson:Hs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(D,Z){if(R.workerSourceTypes[D])throw new Error('Worker source with name "'+D+'" already registered.');R.workerSourceTypes[D]=Z},this.self.registerRTLTextPlugin=function(D){if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=D.applyArabicShaping,f.plugin.processBidirectionalText=D.processBidirectionalText,f.plugin.processStyledBidirectionalText=D.processStyledBidirectionalText}};return Wr.prototype.setReferrer=function(z,R){this.referrer=R},Wr.prototype.setImages=function(z,R,D){for(var Z in this.availableImages[z]=R,this.workerSources[z]){var W=this.workerSources[z][Z];for(var ae in W)W[ae].availableImages=R}D()},Wr.prototype.setLayers=function(z,R,D){this.getLayerIndex(z).replace(R),D()},Wr.prototype.updateLayers=function(z,R,D){this.getLayerIndex(z).update(R.layers,R.removedIds),D()},Wr.prototype.loadTile=function(z,R,D){this.getWorkerSource(z,R.type,R.source).loadTile(R,D)},Wr.prototype.loadDEMTile=function(z,R,D){this.getDEMWorkerSource(z,R.source).loadTile(R,D)},Wr.prototype.reloadTile=function(z,R,D){this.getWorkerSource(z,R.type,R.source).reloadTile(R,D)},Wr.prototype.abortTile=function(z,R,D){this.getWorkerSource(z,R.type,R.source).abortTile(R,D)},Wr.prototype.removeTile=function(z,R,D){this.getWorkerSource(z,R.type,R.source).removeTile(R,D)},Wr.prototype.removeDEMTile=function(z,R){this.getDEMWorkerSource(z,R.source).removeTile(R)},Wr.prototype.removeSource=function(z,R,D){if(this.workerSources[z]&&this.workerSources[z][R.type]&&this.workerSources[z][R.type][R.source]){var Z=this.workerSources[z][R.type][R.source];delete this.workerSources[z][R.type][R.source],Z.removeSource!==void 0?Z.removeSource(R,D):D()}},Wr.prototype.loadWorkerSource=function(z,R,D){try{this.self.importScripts(R.url),D()}catch(Z){D(Z.toString())}},Wr.prototype.syncRTLPluginState=function(z,R,D){try{f.plugin.setState(R);var Z=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&Z!=null){this.self.importScripts(Z);var W=f.plugin.isParsed();D(W?void 0:new Error("RTL Text Plugin failed to import scripts from "+Z),W)}}catch(ae){D(ae.toString())}},Wr.prototype.getAvailableImages=function(z){var R=this.availableImages[z];return R||(R=[]),R},Wr.prototype.getLayerIndex=function(z){var R=this.layerIndexes[z];return R||(R=this.layerIndexes[z]=new Fe),R},Wr.prototype.getWorkerSource=function(z,R,D){var Z=this;return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][R]||(this.workerSources[z][R]={}),this.workerSources[z][R][D]||(this.workerSources[z][R][D]=new this.workerSourceTypes[R]({send:function(W,ae,ce){Z.actor.send(W,ae,ce,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][R][D]},Wr.prototype.getDEMWorkerSource=function(z,R){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][R]||(this.demWorkerSources[z][R]=new Rt),this.demWorkerSources[z][R]},Wr.prototype.enforceCacheSizeLimit=function(z,R){f.enforceCacheSizeLimit(R)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Wr(self)),Wr}),Oe(["./shared"],function(f){var ke=f.createCommonjsModule(function(o){function s(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,I=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(I);try{S=new Worker(L),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(L),b}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var I=S.getImageData(0,0,1,1);return I&&I.width===b.width}()?(c[_=g&&g.failIfMajorPerformanceCaveat]===void 0&&(c[_]=function(b){var S=function(L){var N=document.createElement("canvas"),j=Object.create(s.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=L,N.probablySupportsContext?N.probablySupportsContext("webgl",j)||N.probablySupportsContext("experimental-webgl",j):N.supportsContext?N.supportsContext("webgl",j)||N.supportsContext("experimental-webgl",j):N.getContext("webgl",j)||N.getContext("experimental-webgl",j)}(b);if(!S)return!1;var I=S.createShader(S.VERTEX_SHADER);return!(!I||S.isContextLost())&&(S.shaderSource(I,"void main() {}"),S.compileShader(I),S.getShaderParameter(I,S.COMPILE_STATUS)===!0)}(_)),c[_]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var c={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Y={create:function(o,s,a){var c=f.window.document.createElement(o);return s!==void 0&&(c.className=s),a&&a.appendChild(c),c},createNS:function(o,s){return f.window.document.createElementNS(o,s)}},Fe=f.window.document&&f.window.document.documentElement.style;function ze(o){if(!Fe)return o[0];for(var s=0;s<o.length;s++)if(o[s]in Fe)return o[s];return o[0]}var Xe,xe=ze(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Y.disableDrag=function(){Fe&&xe&&(Xe=Fe[xe],Fe[xe]="none")},Y.enableDrag=function(){Fe&&xe&&(Fe[xe]=Xe)};var mt=ze(["transform","WebkitTransform"]);Y.setTransform=function(o,s){o.style[mt]=s};var et=!1;try{var $t=Object.defineProperty({},"passive",{get:function(){et=!0}});f.window.addEventListener("test",$t,$t),f.window.removeEventListener("test",$t,$t)}catch{et=!1}Y.addEventListener=function(o,s,a,c){c===void 0&&(c={}),o.addEventListener(s,a,"passive"in c&&et?c:c.capture)},Y.removeEventListener=function(o,s,a,c){c===void 0&&(c={}),o.removeEventListener(s,a,"passive"in c&&et?c:c.capture)};var Rt=function(o){o.preventDefault(),o.stopPropagation(),f.window.removeEventListener("click",Rt,!0)};function tr(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}Y.suppressClick=function(){f.window.addEventListener("click",Rt,!0),f.window.setTimeout(function(){f.window.removeEventListener("click",Rt,!0)},0)},Y.mousePos=function(o,s){var a=o.getBoundingClientRect();return new f.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},Y.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),c=[],g=0;g<s.length;g++)c.push(new f.Point(s[g].clientX-a.left-o.clientLeft,s[g].clientY-a.top-o.clientTop));return c},Y.mouseButton=function(o){return f.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},Y.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var Ot=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var c=0,g=this.requestors;c<g.length;c+=1){var _=g[c];this._notify(_.ids,_.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,c){this._validate(a,c)&&(this.images[a]=c)},s.prototype._validate=function(a,c){var g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),g=!1),this._validateContent(c.content,c)||(this.fire(new f.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),g=!1),g},s.prototype._validateStretch=function(a,c){if(!a)return!0;for(var g=0,_=0,b=a;_<b.length;_+=1){var S=b[_];if(S[0]<g||S[1]<S[0]||c<S[1])return!1;g=S[1]}return!0},s.prototype._validateContent=function(a,c){return!(a&&(a.length!==4||a[0]<0||c.data.width<a[0]||a[1]<0||c.data.height<a[1]||a[2]<0||c.data.width<a[2]||a[3]<0||c.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,c){c.version=this.images[a].version+1,this.images[a]=c,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,c){var g=!0;if(!this.isLoaded())for(var _=0,b=a;_<b.length;_+=1)this.images[b[_]]||(g=!1);this.isLoaded()||g?this._notify(a,c):this.requestors.push({ids:a,callback:c})},s.prototype._notify=function(a,c){for(var g={},_=0,b=a;_<b.length;_+=1){var S=b[_];this.images[S]||this.fire(new f.Event("styleimagemissing",{id:S}));var I=this.images[S];I?g[S]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:f.warnOnce('Image "'+S+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,g)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var c=this.patterns[a],g=this.getImage(a);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{var _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new f.ImagePosition(_,g);this.patterns[a]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var c in this.patterns)a.push(this.patterns[c].bin);var g=f.potpack(a),_=g.w,b=g.h,S=this.atlasImage;for(var I in S.resize({width:_||1,height:b||1}),this.patterns){var L=this.patterns[I].bin,N=L.x+1,j=L.y+1,q=this.images[I].data,X=q.width,K=q.height;f.RGBAImage.copy(q,S,{x:0,y:0},{x:N,y:j},{width:X,height:K}),f.RGBAImage.copy(q,S,{x:0,y:K-1},{x:N,y:j-1},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:N,y:j+K},{width:X,height:1}),f.RGBAImage.copy(q,S,{x:X-1,y:0},{x:N-1,y:j},{width:1,height:K}),f.RGBAImage.copy(q,S,{x:0,y:0},{x:N+X,y:j},{width:1,height:K})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var c=0,g=a;c<g.length;c+=1){var _=g[c];if(!this.callbackDispatchedThisFrame[_]){this.callbackDispatchedThisFrame[_]=!0;var b=this.images[_];tr(b)&&this.updateImage(_,b)}}},s}(f.Evented),mn=gn,fi=gn,Kr=1e20;function gn(o,s,a,c,g,_){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=g||"sans-serif",this.fontWeight=_||"normal",this.radius=a||8;var b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=b,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.d=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Int16Array(b),this.middle=Math.round(b/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ii(o,s,a,c,g,_,b){for(var S=0;S<s;S++){for(var I=0;I<a;I++)c[I]=o[I*s+S];for(Bi(c,g,_,b,a),I=0;I<a;I++)o[I*s+S]=g[I]}for(I=0;I<a;I++){for(S=0;S<s;S++)c[S]=o[I*s+S];for(Bi(c,g,_,b,s),S=0;S<s;S++)o[I*s+S]=Math.sqrt(g[S])}}function Bi(o,s,a,c,g){a[0]=0,c[0]=-Kr,c[1]=+Kr;for(var _=1,b=0;_<g;_++){for(var S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);S<=c[b];)b--,S=(o[_]+_*_-(o[a[b]]+a[b]*a[b]))/(2*_-2*a[b]);a[++b]=_,c[b]=S,c[b+1]=+Kr}for(_=0,b=0;_<g;_++){for(;c[b+1]<_;)b++;s[_]=(_-a[b])*(_-a[b])+o[a[b]]}}gn.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var g=s.data[4*c+3]/255;this.gridOuter[c]=g===1?0:g===0?Kr:Math.pow(Math.max(0,.5-g),2),this.gridInner[c]=g===1?Kr:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(Ii(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ii(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a},mn.default=fi;var ln=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};ln.prototype.setURL=function(o){this.url=o},ln.prototype.getGlyphs=function(o,s){var a=this,c=[];for(var g in o)for(var _=0,b=o[g];_<b.length;_+=1)c.push({stack:g,id:b[_]});f.asyncAll(c,function(S,I){var L=S.stack,N=S.id,j=a.entries[L];j||(j=a.entries[L]={glyphs:{},requests:{},ranges:{}});var q=j.glyphs[N];if(q===void 0){if(q=a._tinySDF(j,L,N))return j.glyphs[N]=q,void I(null,{stack:L,id:N,glyph:q});var X=Math.floor(N/256);if(256*X>65535)I(new Error("glyphs > 65535 not supported"));else if(j.ranges[X])I(null,{stack:L,id:N,glyph:q});else{var K=j.requests[X];K||(K=j.requests[X]=[],ln.loadGlyphRange(L,X,a.url,a.requestManager,function(re,H){if(H){for(var te in H)a._doesCharSupportLocalGlyph(+te)||(j.glyphs[+te]=H[+te]);j.ranges[X]=!0}for(var le=0,me=K;le<me.length;le+=1)(0,me[le])(re,H);delete j.requests[X]})),K.push(function(re,H){re?I(re):H&&I(null,{stack:L,id:N,glyph:H[N]||null})})}}else I(null,{stack:L,id:N,glyph:q})},function(S,I){if(S)s(S);else if(I){for(var L={},N=0,j=I;N<j.length;N+=1){var q=j[N],X=q.stack,K=q.id,re=q.glyph;(L[X]||(L[X]={}))[K]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics}}s(null,L)}})},ln.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(f.isChar["CJK Unified Ideographs"](o)||f.isChar["Hangul Syllables"](o)||f.isChar.Hiragana(o)||f.isChar.Katakana(o))},ln.prototype._tinySDF=function(o,s,a){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(a)){var g=o.tinySDF;if(!g){var _="400";/bold/i.test(s)?_="900":/medium/i.test(s)?_="500":/light/i.test(s)&&(_="200"),g=o.tinySDF=new ln.TinySDF(24,3,8,.25,c,_)}return{id:a,bitmap:new f.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ln.loadGlyphRange=function(o,s,a,c,g){var _=256*s,b=_+255,S=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",_+"-"+b),f.ResourceType.Glyphs);f.getArrayBuffer(S,function(I,L){if(I)g(I);else if(L){for(var N={},j=0,q=f.parseGlyphPBF(L);j<q.length;j+=1){var X=q[j];N[X.id]=X}g(null,N)}})},ln.TinySDF=mn;var rn=function(){this.specification=f.styleSpec.light.position};rn.prototype.possiblyEvaluate=function(o,s){return f.sphericalToCartesian(o.expression.evaluate(s))},rn.prototype.interpolate=function(o,s,a){return{x:f.number(o.x,s.x,a),y:f.number(o.y,s.y,a),z:f.number(o.z,s.z,a)}};var Mn=new f.Properties({anchor:new f.DataConstantProperty(f.styleSpec.light.anchor),position:new rn,color:new f.DataConstantProperty(f.styleSpec.light.color),intensity:new f.DataConstantProperty(f.styleSpec.light.intensity)}),eo=function(o){function s(a){o.call(this),this._transitionable=new f.Transitionable(Mn),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,c){if(c===void 0&&(c={}),!this._validate(f.validateLight,a,c))for(var g in a){var _=a[g];f.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,c,g){return(!g||g.validate!==!1)&&f.emitValidationErrors(this,a.call(f.validateStyle,f.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:f.styleSpec})))},s}(f.Evented),dr=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};dr.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},dr.prototype.getDashRanges=function(o,s,a){var c=[],g=o.length%2==1?-o[o.length-1]*a:0,_=o[0]*a,b=!0;c.push({left:g,right:_,isDash:b,zeroLength:o[0]===0});for(var S=o[0],I=1;I<o.length;I++){var L=o[I];c.push({left:g=S*a,right:_=(S+=L)*a,isDash:b=!b,zeroLength:L===0})}return c},dr.prototype.addRoundDash=function(o,s,a){for(var c=s/2,g=-a;g<=a;g++)for(var _=this.width*(this.nextRow+a+g),b=0,S=o[b],I=0;I<this.width;I++){I/S.right>1&&(S=o[++b]);var L=Math.abs(I-S.left),N=Math.abs(I-S.right),j=Math.min(L,N),q=void 0,X=g/a*(c+1);if(S.isDash){var K=c-Math.abs(X);q=Math.sqrt(j*j+K*K)}else q=c-Math.sqrt(j*j+X*X);this.data[_+I]=Math.max(0,Math.min(255,q+128))}},dr.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],c=o[s+1];a.zeroLength?o.splice(s,1):c&&c.isDash===a.isDash&&(c.left=a.left,o.splice(s,1))}var g=o[0],_=o[o.length-1];g.isDash===_.isDash&&(g.left=_.left-this.width,_.right=g.right+this.width);for(var b=this.width*this.nextRow,S=0,I=o[S],L=0;L<this.width;L++){L/I.right>1&&(I=o[++S]);var N=Math.abs(L-I.left),j=Math.abs(L-I.right),q=Math.min(N,j);this.data[b+L]=Math.max(0,Math.min(255,(I.isDash?q:-q)+128))}},dr.prototype.addDash=function(o,s){var a=s?7:0,c=2*a+1;if(this.nextRow+c>this.height)return f.warnOnce("LineAtlas out of space"),null;for(var g=0,_=0;_<o.length;_++)g+=o[_];if(g!==0){var b=this.width/g,S=this.getDashRanges(o,this.width,b);s?this.addRoundDash(S,b,a):this.addRegularDash(S)}var I={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:g};return this.nextRow+=c,this.dirty=!0,I},dr.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var un=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=f.uniqueId();for(var c=this.workerPool.acquire(this.id),g=0;g<c.length;g++){var _=new o.Actor(c[g],a,this.id);_.name="Worker "+g,this.actors.push(_)}};function to(o,s,a){var c=function(g,_){if(g)return a(g);if(_){var b=f.pick(f.extend(_,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(b.vectorLayers=_.vector_layers,b.vectorLayerIds=b.vectorLayers.map(function(S){return S.id})),b.tiles=s.canonicalizeTileset(b,o.url),a(null,b)}};return o.url?f.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),f.ResourceType.Source),c):f.browser.frame(function(){return c(null,o)})}un.prototype.broadcast=function(o,s,a){f.asyncAll(this.actors,function(c,g){c.send(o,s,g)},a=a||function(){})},un.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},un.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},un.Actor=f.Actor;var oe=function(o,s,a){this.bounds=f.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};oe.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},oe.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*s),c=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*s),g=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*s),_=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<g&&o.y>=c&&o.y<_};var de=function(o){function s(a,c,g,_){if(o.call(this),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(c,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=to(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles,a.map._requestManager._customAccessToken),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var c=this;return this.setSourceProperty(function(){c._options.tiles=a}),this},s.prototype.setUrl=function(a){var c=this;return this.setSourceProperty(function(){c.url=a,c._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,f.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(S,I){return delete a.request,a.aborted?c(null):S&&S.status!==404?c(S):(I&&I.resourceTiming&&(a.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&a.setExpiryData(I),a.loadVectorData(I,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=c:a.request=a.actor.send("reloadTile",_,b.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",_,b.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Be=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},c),f.extend(this,f.pick(c,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=to(this._options,this.map._requestManager,function(c,g){a._tileJSONRequest=null,a._loaded=!0,c?a.fire(new f.ErrorEvent(c)):g&&(f.extend(a,g),g.bounds&&(a.tileBounds=new oe(g.bounds,a.minzoom,a.maxzoom)),f.postTurnstileEvent(g.tiles),f.postMapLoadEvent(g.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return f.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,c){var g=this,_=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=f.getImage(this.map._requestManager.transformRequest(_,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){g.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=g.map.painter.context,L=I.gl;a.texture=g.map.painter.getTileTexture(S.width),a.texture?a.texture.update(S,{useMipmap:!0}):(a.texture=new f.Texture(I,S,L.RGBA,{useMipmap:!0}),a.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),a.state="loaded",f.cacheEntryPossiblyAdded(g.dispatcher),c(null)}})},s.prototype.abortTile=function(a,c){a.request&&(a.request.cancel(),delete a.request),c()},s.prototype.unloadTile=function(a,c){a.texture&&this.map.painter.saveTileTexture(a.texture),c()},s.prototype.hasTransition=function(){return!1},s}(f.Evented),$e=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,c){var g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function _(b,S){b&&(a.state="errored",c(b)),S&&(a.dem=S,a.needsHillshadePrepare=!0,a.state="loaded",c(null))}a.request=f.getImage(this.map._requestManager.transformRequest(g,f.ResourceType.Tile),function(b,S){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(S){this.map._refreshExpiredTiles&&a.setExpiryData(S),delete S.cacheControl,delete S.expires;var I=f.window.ImageBitmap&&S instanceof f.window.ImageBitmap&&f.offscreenCanvasSupported()?S:f.browser.getImageData(S,1),L={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:I,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",L,_.bind(this)))}}.bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var c=a.canonical,g=Math.pow(2,c.z),_=(c.x-1+g)%g,b=c.x===0?a.wrap-1:a.wrap,S=(c.x+1+g)%g,I=c.x+1===g?a.wrap+1:a.wrap,L={};return L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<g&&(L[new f.OverscaledTileID(a.overscaledZ,b,c.z,_,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},L[new f.OverscaledTileID(a.overscaledZ,I,c.z,S,c.y+1).key]={backfilled:!1}),L},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(Be),qe=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(_),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var b=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(c.clusterRadius||50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)a.fire(new f.ErrorEvent(c));else{var g={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(g.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new f.Event("data",g))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)c.fire(new f.ErrorEvent(g));else{var _={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new f.Event("data",_))}}),this},s.prototype.getClusterExpansionZoom=function(a,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},c),this},s.prototype.getClusterChildren=function(a,c){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},c),this},s.prototype.getClusterLeaves=function(a,c,g,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:c,offset:g},_),this},s.prototype._updateWorkerData=function(a){var c=this;this._loaded=!1;var g=f.extend({},this.workerOptions),_=this._data;typeof _=="string"?(g.request=this.map._requestManager.transformRequest(f.browser.resolveURL(_),f.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(_),this.actor.send(this.type+".loadData",g,function(b,S){c._removed||S&&S.abandoned||(c._loaded=!0,S&&S.resourceTiming&&S.resourceTiming[c.id]&&(c._resourceTiming=S.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:g.source},null),a(b))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,c){var g=this,_=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(_,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(b,S){return delete a.request,a.unloadVectorData(),a.aborted?c(null):b?c(b):(a.loadVectorData(S,g.map.painter,_==="reloadTile"),c(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return f.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Je=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Te=function(o){function s(a,c,g,_){o.call(this),this.id=a,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,c){var g=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),function(_,b){g._loaded=!0,_?g.fire(new f.ErrorEvent(_)):b&&(g.image=b,a&&(g.coordinates=a),c&&c(),g._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var c=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){c.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var c=this;this.coordinates=a;var g=a.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(b){for(var S=1/0,I=1/0,L=-1/0,N=-1/0,j=0,q=b;j<q.length;j+=1){var X=q[j];S=Math.min(S,X.x),I=Math.min(I,X.y),L=Math.max(L,X.x),N=Math.max(N,X.y)}var K=Math.max(L-S,N-I),re=Math.max(0,Math.floor(-Math.log(K)/Math.LN2)),H=Math.pow(2,re);return new f.CanonicalTileID(re,Math.floor((S+L)/2*H),Math.floor((I+N)/2*H))}(g),this.minzoom=this.maxzoom=this.tileID.z;var _=g.map(function(b){return c.tileID.getTilePoint(b)._round()});return this._boundsArray=new f.StructArrayLayout4i8,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f.Texture(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.loadTile=function(a,c){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},c(null)):(a.state="errored",c(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(f.Evented),Le=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),this.roundZoom=!0,this.type="video",this.options=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var c=this.options;this.urls=[];for(var g=0,_=c.urls;g<_.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(_[g],f.ResourceType.Source).url);f.getVideo(this.urls,function(b,S){a._loaded=!0,b?a.fire(new f.ErrorEvent(b)):S&&(a.video=S,a.video.loop=!0,a.video.setAttribute("playsinline",""),a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,c=a.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Te),Re=function(o){function s(a,c,g,_){o.call(this,a,c,g,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(function(b){return!Array.isArray(b)||b.length!==2||b.some(function(S){return typeof S!="number"})})||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var c=this.map.painter.context,g=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Je.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(c,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,c=[this.canvas.width,this.canvas.height];a<c.length;a+=1){var g=c[a];if(isNaN(g)||g<=0)return!0}return!1},s}(Te),Ae={vector:de,raster:Be,"raster-dem":$e,geojson:qe,video:Le,image:Te,canvas:Re};function Ye(o,s){var a=f.identity([]);return f.translate(a,a,[1,1,0]),f.scale(a,a,[.5*o.width,.5*o.height,1]),f.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function Ze(o,s,a,c,g,_){var b=function(re,H,te){if(re)for(var le=0,me=re;le<me.length;le+=1){var Ce=H[me[le]];if(Ce&&Ce.source===te&&Ce.type==="fill-extrusion")return!0}else for(var Ee in H){var Ie=H[Ee];if(Ie.source===te&&Ie.type==="fill-extrusion")return!0}return!1}(g&&g.layers,s,o.id),S=_.maxPitchScaleFactor(),I=o.tilesIn(c,S,b);I.sort(ct);for(var L=[],N=0,j=I;N<j.length;N+=1){var q=j[N];L.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(s,a,o._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,_,S,Ye(o.transform,q.tileID))})}var X=function(re){for(var H={},te={},le=0,me=re;le<me.length;le+=1){var Ce=me[le],Ee=Ce.queryResults,Ie=Ce.wrappedTileID,Ne=te[Ie]=te[Ie]||{};for(var We in Ee)for(var Ke=Ee[We],ut=Ne[We]=Ne[We]||{},wt=H[We]=H[We]||[],Ct=0,Tt=Ke;Ct<Tt.length;Ct+=1){var nr=Tt[Ct];ut[nr.featureIndex]||(ut[nr.featureIndex]=!0,wt.push(nr))}}return H}(L);for(var K in X)X[K].forEach(function(re){var H=re.feature,te=o.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=te});return X}function ct(o,s){var a=o.tileID,c=s.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}var nt=function(o,s){this.max=o,this.onRemove=s,this.reset()};nt.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var c=a[s];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},nt.prototype.add=function(o,s,a){var c=this,g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var _={value:s,timeout:void 0};if(a!==void 0&&(_.timeout=setTimeout(function(){c.remove(o,_)},a)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){var b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this},nt.prototype.has=function(o){return o.wrapped().key in this.data},nt.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},nt.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},nt.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},nt.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},nt.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,c=s===void 0?0:this.data[a].indexOf(s),g=this.data[a][c];return this.data[a].splice(c,1),g.timeout&&clearTimeout(g.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(g.value),this.order.splice(this.order.indexOf(a),1),this},nt.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},nt.prototype.filter=function(o){var s=[];for(var a in this.data)for(var c=0,g=this.data[a];c<g.length;c+=1){var _=g[c];o(_.value)||s.push(_)}for(var b=0,S=s;b<S.length;b+=1){var I=S[b];this.remove(I.value.tileID,I)}};var It=function(o,s,a){this.context=o;var c=o.gl;this.buffer=c.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};It.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},It.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},It.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Vt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},jt=function(o,s,a,c){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=c,this.context=o;var g=o.gl;this.buffer=g.createBuffer(),o.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};jt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},jt.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},jt.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var c=s.attributes[this.attributes[a].name];c!==void 0&&o.enableVertexAttribArray(c)}},jt.prototype.setVertexAttribPointers=function(o,s,a){for(var c=0;c<this.attributes.length;c++){var g=this.attributes[c],_=s.attributes[g.name];_!==void 0&&o.vertexAttribPointer(_,g.components,o[Vt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(a||0))}},jt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var dt=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};dt.prototype.get=function(){return this.current},dt.prototype.set=function(o){},dt.prototype.getDefault=function(){return this.default},dt.prototype.setDefault=function(){this.set(this.default)};var Pr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),Mr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(dt),cn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(dt),ki=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),zn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(dt),lr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(dt),rr=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(dt),yn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(dt),Un=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(dt),vn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),ii=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(dt),vo=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(dt),di=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}},s}(dt),$l=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(dt),Kl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return f.Color.transparent},s.prototype.set=function(a){var c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(dt),Us=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(dt),Vs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}},s}(dt),ts=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(dt),Wl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(dt),rs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(dt),js=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(dt),_a=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(dt),qs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),Zs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(dt),Xl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(dt),Jl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(dt),xa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(dt),zo=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(dt),Lo=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(dt),ns=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Hs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(dt),Wr=function(o){function s(a,c){o.call(this,a),this.context=a,this.parent=c}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(dt),z=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(Wr),R=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(Wr),D=function(o,s,a,c){this.context=o,this.width=s,this.height=a;var g=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new z(o,g),c&&(this.depthAttachment=new R(o,g))};D.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var Z=function(o,s,a){this.func=o,this.mask=s,this.range=a};Z.ReadOnly=!1,Z.ReadWrite=!0,Z.disabled=new Z(519,Z.ReadOnly,[0,1]);var W=function(o,s,a,c,g,_){this.test=o,this.ref=s,this.mask=a,this.fail=c,this.depthFail=g,this.pass=_};W.disabled=new W({func:519,mask:0},0,0,7680,7680,7680);var ae=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};ae.disabled=new ae(ae.Replace=[1,0],f.Color.transparent,[!1,!1,!1,!1]),ae.unblended=new ae(ae.Replace,f.Color.transparent,[!0,!0,!0,!0]),ae.alphaBlended=new ae([1,771],f.Color.transparent,[!0,!0,!0,!0]);var ce=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};ce.disabled=new ce(!1,1029,2305),ce.backCCW=new ce(!0,1029,2305);var V=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Pr(this),this.clearDepth=new Mr(this),this.clearStencil=new cn(this),this.colorMask=new ki(this),this.depthMask=new zn(this),this.stencilMask=new lr(this),this.stencilFunc=new rr(this),this.stencilOp=new yn(this),this.stencilTest=new Un(this),this.depthRange=new vn(this),this.depthTest=new ii(this),this.depthFunc=new vo(this),this.blend=new di(this),this.blendFunc=new $l(this),this.blendColor=new Kl(this),this.blendEquation=new Us(this),this.cullFace=new Vs(this),this.cullFaceSide=new ts(this),this.frontFace=new Wl(this),this.program=new rs(this),this.activeTexture=new js(this),this.viewport=new _a(this),this.bindFramebuffer=new qs(this),this.bindRenderbuffer=new Zs(this),this.bindTexture=new Xl(this),this.bindVertexBuffer=new Jl(this),this.bindElementBuffer=new xa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zo(this),this.pixelStoreUnpack=new Lo(this),this.pixelStoreUnpackPremultiplyAlpha=new ns(this),this.pixelStoreUnpackFlipY=new Hs(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};V.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},V.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},V.prototype.createIndexBuffer=function(o,s){return new It(this,o,s)},V.prototype.createVertexBuffer=function(o,s,a){return new jt(this,o,s,a)},V.prototype.createRenderbuffer=function(o,s,a){var c=this.gl,g=c.createRenderbuffer();return this.bindRenderbuffer.set(g),c.renderbufferStorage(c.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),g},V.prototype.createFramebuffer=function(o,s,a){return new D(this,o,s,a)},V.prototype.clear=function(o){var s=o.color,a=o.depth,c=this.gl,g=0;s&&(g|=c.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(g|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c.clear(g)},V.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},V.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},V.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},V.prototype.setColorMode=function(o){f.deepEqual(o.blendFunction,ae.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},V.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var J=function(o){function s(a,c,g){var _=this;o.call(this),this.id=a,this.dispatcher=g,this.on("data",function(b){b.dataType==="source"&&b.sourceDataType==="metadata"&&(_._sourceLoaded=!0),_._sourceLoaded&&!_._paused&&b.dataType==="source"&&b.sourceDataType==="content"&&(_.reload(),_.transform&&_.update(_.transform))}),this.on("error",function(){_._sourceErrored=!0}),this._source=function(b,S,I,L){var N=new Ae[S.type](b,S,I,L);if(N.id!==b)throw new Error("Expected Source id to be "+b+" instead of "+N.id);return f.bindAll(["load","abort","unload","serialize","prepare"],N),N}(a,c,g,this),this._tiles={},this._cache=new nt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new f.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,c){return this._source.loadTile(a,c)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[c];g.upload(a),g.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return f.values(this._tiles).map(function(a){return a.tileID}).sort(ge).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var c=this,g=[];for(var _ in this._tiles)this._isIdRenderable(_,a)&&g.push(this._tiles[_]);return a?g.sort(function(b,S){var I=b.tileID,L=S.tileID,N=new f.Point(I.canonical.x,I.canonical.y)._rotate(c.transform.angle),j=new f.Point(L.canonical.x,L.canonical.y)._rotate(c.transform.angle);return I.overscaledZ-L.overscaledZ||j.y-N.y||j.x-N.x}).map(function(b){return b.tileID.key}):g.map(function(b){return b.tileID}).sort(ge).map(function(b){return b.key})},s.prototype.hasRenderableParent=function(a){var c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)},s.prototype._isIdRenderable=function(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,c){var g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,a,c)))},s.prototype._tileLoaded=function(a,c,g,_){if(_)return a.state="errored",void(_.status!==404?this._source.fire(new f.ErrorEvent(_,{tile:a})):this.update(this.transform));a.timeAdded=f.browser.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new f.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var c=this.getRenderableIds(),g=0;g<c.length;g++){var _=c[g];if(a.neighboringTiles&&a.neighboringTiles[_]){var b=this.getTileByID(_);S(a,b),S(b,a)}}function S(I,L){I.needsHillshadePrepare=!0;var N=L.tileID.canonical.x-I.tileID.canonical.x,j=L.tileID.canonical.y-I.tileID.canonical.y,q=Math.pow(2,I.tileID.canonical.z),X=L.tileID.key;N===0&&j===0||Math.abs(j)>1||(Math.abs(N)>1&&(Math.abs(N+q)===1?N+=q:Math.abs(N-q)===1&&(N-=q)),L.dem&&I.dem&&(I.dem.backfillBorder(L.dem,N,j),I.neighboringTiles&&I.neighboringTiles[X]&&(I.neighboringTiles[X].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,c,g,_){for(var b in this._tiles){var S=this._tiles[b];if(!(_[b]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>g)){for(var I=S.tileID;S&&S.tileID.overscaledZ>c+1;){var L=S.tileID.scaledTo(S.tileID.overscaledZ-1);(S=this._tiles[L.key])&&S.hasData()&&(I=L)}for(var N=I;N.overscaledZ>c;)if(a[(N=N.scaledTo(N.overscaledZ-1)).key]){_[I.key]=I;break}}}},s.prototype.findLoadedParent=function(a,c){if(a.key in this._loadedParentTiles){var g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=c?g:null}for(var _=a.overscaledZ-1;_>=c;_--){var b=a.scaledTo(_),S=this._getLoadedTile(b);if(S)return S}},s.prototype._getLoadedTile=function(a){var c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var c=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(c*g*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)},s.prototype.handleWrapJump=function(a){var c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){var g={};for(var _ in this._tiles){var b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+c),g[b.tileID.key]=b}for(var S in this._tiles=g,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}},s.prototype.update=function(a){var c=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ne){return new f.OverscaledTileID(Ne.canonical.z,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y)}):(g=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ne){return c._source.hasTile(Ne)}))):g=[];var _=a.coveringZoomLevel(this._source),b=Math.max(_-s.maxOverzooming,this._source.minzoom),S=Math.max(_+s.maxUnderzooming,this._source.minzoom),I=this._updateRetainedTiles(g,_);if(Ue(this._source.type)){for(var L={},N={},j=0,q=Object.keys(I);j<q.length;j+=1){var X=q[j],K=I[X],re=this._tiles[X];if(re&&!(re.fadeEndTime&&re.fadeEndTime<=f.browser.now())){var H=this.findLoadedParent(K,b);H&&(this._addTile(H.tileID),L[H.tileID.key]=H.tileID),N[X]=K}}for(var te in this._retainLoadedChildren(N,_,S,I),L)I[te]||(this._coveredTiles[te]=!0,I[te]=L[te])}for(var le in I)this._tiles[le].clearFadeHold();for(var me=0,Ce=f.keysDifference(this._tiles,I);me<Ce.length;me+=1){var Ee=Ce[me],Ie=this._tiles[Ee];Ie.hasSymbolBuckets&&!Ie.holdingForFade()?Ie.setHoldDuration(this.map._fadeDuration):Ie.hasSymbolBuckets&&!Ie.symbolFadeFinished()||this._removeTile(Ee)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,c){for(var g={},_={},b=Math.max(c-s.maxOverzooming,this._source.minzoom),S=Math.max(c+s.maxUnderzooming,this._source.minzoom),I={},L=0,N=a;L<N.length;L+=1){var j=N[L],q=this._addTile(j);g[j.key]=j,q.hasData()||c<this._source.maxzoom&&(I[j.key]=j)}this._retainLoadedChildren(I,c,S,g);for(var X=0,K=a;X<K.length;X+=1){var re=K[X],H=this._tiles[re.key];if(!H.hasData()){if(c+1>this._source.maxzoom){var te=re.children(this._source.maxzoom)[0],le=this.getTile(te);if(le&&le.hasData()){g[te.key]=te;continue}}else{var me=re.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}for(var Ce=H.wasRequested(),Ee=re.overscaledZ-1;Ee>=b;--Ee){var Ie=re.scaledTo(Ee);if(_[Ie.key]||(_[Ie.key]=!0,!(H=this.getTile(Ie))&&Ce&&(H=this._addTile(Ie)),H&&(g[Ie.key]=Ie,Ce=H.wasRequested(),H.hasData())))break}}}return g},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var c=[],g=void 0,_=this._tiles[a].tileID;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}c.push(_.key);var b=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(b))break;_=b}for(var S=0,I=c;S<I.length;S+=1)this._loadedParentTiles[I[S]]=g}},s.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));var g=!!c;return g||(c=new f.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,g||this._source.fire(new f.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},s.prototype._setTileReloadTimer=function(a,c){var g=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var _=c.getExpiryTimeout();_&&(this._timers[a]=setTimeout(function(){g._reloadTile(a,"expired"),delete g._timers[a]},_))},s.prototype._removeTile=function(a){var c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,c,g){var _=this,b=[],S=this.transform;if(!S)return b;for(var I=g?S.getCameraQueryGeometry(a):a,L=a.map(function(Ee){return S.pointCoordinate(Ee)}),N=I.map(function(Ee){return S.pointCoordinate(Ee)}),j=this.getIds(),q=1/0,X=1/0,K=-1/0,re=-1/0,H=0,te=N;H<te.length;H+=1){var le=te[H];q=Math.min(q,le.x),X=Math.min(X,le.y),K=Math.max(K,le.x),re=Math.max(re,le.y)}for(var me=function(Ee){var Ie=_._tiles[j[Ee]];if(!Ie.holdingForFade()){var Ne=Ie.tileID,We=Math.pow(2,S.zoom-Ie.tileID.overscaledZ),Ke=c*Ie.queryPadding*f.EXTENT/Ie.tileSize/We,ut=[Ne.getTilePoint(new f.MercatorCoordinate(q,X)),Ne.getTilePoint(new f.MercatorCoordinate(K,re))];if(ut[0].x-Ke<f.EXTENT&&ut[0].y-Ke<f.EXTENT&&ut[1].x+Ke>=0&&ut[1].y+Ke>=0){var wt=L.map(function(Tt){return Ne.getTilePoint(Tt)}),Ct=N.map(function(Tt){return Ne.getTilePoint(Tt)});b.push({tile:Ie,tileID:Ne,queryGeometry:wt,cameraQueryGeometry:Ct,scale:We})}}},Ce=0;Ce<j.length;Ce++)me(Ce);return b},s.prototype.getVisibleCoordinates=function(a){for(var c=this,g=this.getRenderableIds(a).map(function(I){return c._tiles[I].tileID}),_=0,b=g;_<b.length;_+=1){var S=b[_];S.posMatrix=this.transform.calculatePosMatrix(S.toUnwrapped())}return g},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ue(this._source.type))for(var a in this._tiles){var c=this._tiles[a];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=f.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,c,g){this._state.updateState(a=a||"_geojsonTileLayer",c,g)},s.prototype.removeFeatureState=function(a,c,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,g)},s.prototype.getFeatureState=function(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)},s.prototype.setDependencies=function(a,c,g){var _=this._tiles[a];_&&_.setDependencies(c,g)},s.prototype.reloadTilesForDependencies=function(a,c){for(var g in this._tiles)this._tiles[g].hasDependency(a,c)&&this._reloadTile(g,"reloading");this._cache.filter(function(_){return!_.hasDependency(a,c)})},s}(f.Evented);function ge(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),c=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||c-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function Ue(o){return o==="raster"||o==="image"||o==="video"}function He(){return new f.window.Worker(yu.workerUrl)}J.maxOverzooming=10,J.maxUnderzooming=3;var Pe="mapboxgl_preloaded_worker_pool",Ve=function(){this.active={}};Ve.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new He);return this.active[o]=!0,this.workers.slice()},Ve.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Ve.prototype.isPreloaded=function(){return!!this.active[Pe]},Ve.prototype.numActive=function(){return Object.keys(this.active).length};var gt,ht=Math.floor(f.browser.hardwareConcurrency/2);function Me(){return gt||(gt=new Ve),gt}function lt(o,s){var a={};for(var c in o)c!=="ref"&&(a[c]=o[c]);return f.refProperties.forEach(function(g){g in s&&(a[g]=s[g])}),a}function tt(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var c=0;c<o.length;c++)"ref"in o[c]&&(o[c]=lt(o[c],s[o[c].ref]));return o}Ve.workerCount=Math.max(Math.min(ht,6),1);var it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(o,s,a){a.push({command:it.addSource,args:[o,s[o]]})}function at(o,s,a){s.push({command:it.removeSource,args:[o]}),a[o]=!0}function Xt(o,s,a,c){at(o,a,c),Ut(o,s,a)}function br(o,s,a){var c;for(c in o[a])if(o[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;for(c in s[a])if(s[a].hasOwnProperty(c)&&c!=="data"&&!f.deepEqual(o[a][c],s[a][c]))return!1;return!0}function Ht(o,s,a,c,g,_){var b;for(b in s=s||{},o=o||{})o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}));for(b in s)s.hasOwnProperty(b)&&!o.hasOwnProperty(b)&&(f.deepEqual(o[b],s[b])||a.push({command:_,args:[c,b,s[b],g]}))}function ur(o){return o.id}function Yt(o,s){return o[s.id]=s,o}var Kn=function(o,s){this.reset(o,s)};Kn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=f.clamp(o,0,1);for(var s=1,a=this._distances[s],c=o*this.paddedLength+this.padding;a<c&&s<this._distances.length;)a=this._distances[++s];var g=s-1,_=this._distances[g],b=a-_,S=b>0?(c-_)/b:0;return this.points[g].mult(1-S).add(this.points[s].mult(S))};var hr=function(o,s,a){var c=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var _=0;_<this.xCellCount*this.yCellCount;_++)c.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Xr(o,s,a,c,g){var _=f.create();return s?(f.scale(_,_,[1/g,1/g,1]),a||f.rotateZ(_,_,c.angle)):f.multiply(_,c.labelPlaneMatrix,o),_}function _r(o,s,a,c,g){if(s){var _=f.clone(o);return f.scale(_,_,[g,g,1]),a||f.rotateZ(_,_,-c.angle),_}return c.glCoordMatrix}function Wt(o,s){var a=[o.x,o.y,0,1];Tn(a,a,s);var c=a[3];return{point:new f.Point(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function cr(o,s){return .5+o/s*.5}function oi(o,s){var a=o[0]/o[3],c=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&c>=-s[1]&&c<=s[1]}function Gs(o,s,a,c,g,_,b,S){var I=c?o.textSizeData:o.iconSizeData,L=f.evaluateSizeForZoom(I,a.transform.zoom),N=[256/a.width*2+1,256/a.height*2+1],j=c?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;j.clear();for(var q=o.lineVertexArray,X=c?o.text.placedSymbolArray:o.icon.placedSymbolArray,K=a.transform.width/a.transform.height,re=!1,H=0;H<X.length;H++){var te=X.get(H);if(te.hidden||te.writingMode===f.WritingMode.vertical&&!re)Wn(te.numGlyphs,j);else{re=!1;var le=[te.anchorX,te.anchorY,0,1];if(f.transformMat4(le,le,s),oi(le,N)){var me=cr(a.transform.cameraToCenterDistance,le[3]),Ce=f.evaluateSizeForFeature(I,L,te),Ee=b?Ce/me:Ce*me,Ie=new f.Point(te.anchorX,te.anchorY),Ne=Wt(Ie,g).point,We={},Ke=wc(te,Ee,!1,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,We,K);re=Ke.useVertical,(Ke.notEnoughRoom||re||Ke.needsFlipping&&wc(te,Ee,!0,S,s,g,_,o.glyphOffsetArray,q,j,Ne,Ie,We,K).notEnoughRoom)&&Wn(te.numGlyphs,j)}else Wn(te.numGlyphs,j)}}c?o.text.dynamicLayoutVertexBuffer.updateData(j):o.icon.dynamicLayoutVertexBuffer.updateData(j)}function Sn(o,s,a,c,g,_,b,S,I,L,N){var j=S.glyphStartIndex+S.numGlyphs,q=S.lineStartIndex,X=S.lineStartIndex+S.lineLength,K=s.getoffsetX(S.glyphStartIndex),re=s.getoffsetX(j-1),H=Jr(o*K,a,c,g,_,b,S.segment,q,X,I,L,N);if(!H)return null;var te=Jr(o*re,a,c,g,_,b,S.segment,q,X,I,L,N);return te?{first:H,last:te}:null}function ai(o,s,a,c){return o===f.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*c?{useVertical:!0}:(o===f.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function wc(o,s,a,c,g,_,b,S,I,L,N,j,q,X){var K,re=s/24,H=o.lineOffsetX*re,te=o.lineOffsetY*re;if(o.numGlyphs>1){var le=o.glyphStartIndex+o.numGlyphs,me=o.lineStartIndex,Ce=o.lineStartIndex+o.lineLength,Ee=Sn(re,S,H,te,a,N,j,o,I,_,q);if(!Ee)return{notEnoughRoom:!0};var Ie=Wt(Ee.first.point,b).point,Ne=Wt(Ee.last.point,b).point;if(c&&!a){var We=ai(o.writingMode,Ie,Ne,X);if(We)return We}K=[Ee.first];for(var Ke=o.glyphStartIndex+1;Ke<le-1;Ke++)K.push(Jr(re*S.getoffsetX(Ke),H,te,a,N,j,o.segment,me,Ce,I,_,q));K.push(Ee.last)}else{if(c&&!a){var ut=Wt(j,g).point,wt=o.lineStartIndex+o.segment+1,Ct=new f.Point(I.getx(wt),I.gety(wt)),Tt=Wt(Ct,g),nr=Tt.signedDistanceFromCamera>0?Tt.point:$s(j,Ct,ut,1,g),pt=ai(o.writingMode,ut,nr,X);if(pt)return pt}var Lt=Jr(re*S.getoffsetX(o.glyphStartIndex),H,te,a,N,j,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,I,_,q);if(!Lt)return{notEnoughRoom:!0};K=[Lt]}for(var Ft=0,zt=K;Ft<zt.length;Ft+=1){var Mt=zt[Ft];f.addDynamicAttributes(L,Mt.point,Mt.angle)}return{}}function $s(o,s,a,c,g){var _=Wt(o.add(o.sub(s)._unit()),g).point,b=a.sub(_);return a.add(b._mult(c/b.mag()))}function Jr(o,s,a,c,g,_,b,S,I,L,N,j){var q=c?o-s:o+s,X=q>0?1:-1,K=0;c&&(X*=-1,K=Math.PI),X<0&&(K+=Math.PI);for(var re=X>0?S+b:S+b+1,H=g,te=g,le=0,me=0,Ce=Math.abs(q),Ee=[];le+me<=Ce;){if((re+=X)<S||re>=I)return null;if(te=H,Ee.push(H),(H=j[re])===void 0){var Ie=new f.Point(L.getx(re),L.gety(re)),Ne=Wt(Ie,N);if(Ne.signedDistanceFromCamera>0)H=j[re]=Ne.point;else{var We=re-X;H=$s(le===0?_:new f.Point(L.getx(We),L.gety(We)),Ie,te,Ce-le+1,N)}}le+=me,me=te.dist(H)}var Ke=(Ce-le)/me,ut=H.sub(te),wt=ut.mult(Ke)._add(te);wt._add(ut._unit()._perp()._mult(a*X));var Ct=K+Math.atan2(H.y-te.y,H.x-te.x);return Ee.push(wt),{point:wt,angle:Ct,path:Ee}}hr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},hr.prototype.insert=function(o,s,a,c,g){this._forEachCell(s,a,c,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(g)},hr.prototype.insertCircle=function(o,s,a,c){this._forEachCell(s-c,a-c,s+c,a+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(c)},hr.prototype._insertBoxCell=function(o,s,a,c,g,_){this.boxCells[g].push(_)},hr.prototype._insertCircleCell=function(o,s,a,c,g,_){this.circleCells[g].push(_)},hr.prototype._query=function(o,s,a,c,g,_){if(a<0||o>this.width||c<0||s>this.height)return!g&&[];var b=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=c){if(g)return!0;for(var S=0;S<this.boxKeys.length;S++)b.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(var I=0;I<this.circleKeys.length;I++){var L=this.circles[3*I],N=this.circles[3*I+1],j=this.circles[3*I+2];b.push({key:this.circleKeys[I],x1:L-j,y1:N-j,x2:L+j,y2:N+j})}return _?b.filter(_):b}return this._forEachCell(o,s,a,c,this._queryCell,b,{hitTest:g,seenUids:{box:{},circle:{}}},_),g?b.length>0:b},hr.prototype._queryCircle=function(o,s,a,c,g){var _=o-a,b=o+a,S=s-a,I=s+a;if(b<0||_>this.width||I<0||S>this.height)return!c&&[];var L=[];return this._forEachCell(_,S,b,I,this._queryCellCircle,L,{hitTest:c,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},g),c?L.length>0:L},hr.prototype.query=function(o,s,a,c,g){return this._query(o,s,a,c,!1,g)},hr.prototype.hitTest=function(o,s,a,c,g){return this._query(o,s,a,c,!0,g)},hr.prototype.hitTestCircle=function(o,s,a,c){return this._queryCircle(o,s,a,!0,c)},hr.prototype._queryCell=function(o,s,a,c,g,_,b,S){var I=b.seenUids,L=this.boxCells[g];if(L!==null)for(var N=this.bboxes,j=0,q=L;j<q.length;j+=1){var X=q[j];if(!I.box[X]){I.box[X]=!0;var K=4*X;if(o<=N[K+2]&&s<=N[K+3]&&a>=N[K+0]&&c>=N[K+1]&&(!S||S(this.boxKeys[X]))){if(b.hitTest)return _.push(!0),!0;_.push({key:this.boxKeys[X],x1:N[K],y1:N[K+1],x2:N[K+2],y2:N[K+3]})}}}var re=this.circleCells[g];if(re!==null)for(var H=this.circles,te=0,le=re;te<le.length;te+=1){var me=le[te];if(!I.circle[me]){I.circle[me]=!0;var Ce=3*me;if(this._circleAndRectCollide(H[Ce],H[Ce+1],H[Ce+2],o,s,a,c)&&(!S||S(this.circleKeys[me]))){if(b.hitTest)return _.push(!0),!0;var Ee=H[Ce],Ie=H[Ce+1],Ne=H[Ce+2];_.push({key:this.circleKeys[me],x1:Ee-Ne,y1:Ie-Ne,x2:Ee+Ne,y2:Ie+Ne})}}}},hr.prototype._queryCellCircle=function(o,s,a,c,g,_,b,S){var I=b.circle,L=b.seenUids,N=this.boxCells[g];if(N!==null)for(var j=this.bboxes,q=0,X=N;q<X.length;q+=1){var K=X[q];if(!L.box[K]){L.box[K]=!0;var re=4*K;if(this._circleAndRectCollide(I.x,I.y,I.radius,j[re+0],j[re+1],j[re+2],j[re+3])&&(!S||S(this.boxKeys[K])))return _.push(!0),!0}}var H=this.circleCells[g];if(H!==null)for(var te=this.circles,le=0,me=H;le<me.length;le+=1){var Ce=me[le];if(!L.circle[Ce]){L.circle[Ce]=!0;var Ee=3*Ce;if(this._circlesCollide(te[Ee],te[Ee+1],te[Ee+2],I.x,I.y,I.radius)&&(!S||S(this.circleKeys[Ce])))return _.push(!0),!0}}},hr.prototype._forEachCell=function(o,s,a,c,g,_,b,S){for(var I=this._convertToXCellCoord(o),L=this._convertToYCellCoord(s),N=this._convertToXCellCoord(a),j=this._convertToYCellCoord(c),q=I;q<=N;q++)for(var X=L;X<=j;X++)if(g.call(this,o,s,a,c,this.xCellCount*X+q,_,b,S))return},hr.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},hr.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},hr.prototype._circlesCollide=function(o,s,a,c,g,_){var b=c-o,S=g-s,I=a+_;return I*I>b*b+S*S},hr.prototype._circleAndRectCollide=function(o,s,a,c,g,_,b){var S=(_-c)/2,I=Math.abs(o-(c+S));if(I>S+a)return!1;var L=(b-g)/2,N=Math.abs(s-(g+L));if(N>L+a)return!1;if(I<=S||N<=L)return!0;var j=I-S,q=N-L;return j*j+q*q<=a*a};var Ks=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wn(o,s){for(var a=0;a<o;a++){var c=s.length;s.resize(c+4),s.float32.set(Ks,3*c)}}function Tn(o,s,a){var c=s[0],g=s[1];return o[0]=a[0]*c+a[4]*g+a[12],o[1]=a[1]*c+a[5]*g+a[13],o[3]=a[3]*c+a[7]*g+a[15],o}var Fi=function(o,s,a){s===void 0&&(s=new hr(o.width+200,o.height+200,25)),a===void 0&&(a=new hr(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function zr(o,s,a){return s*(f.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}Fi.prototype.placeCollisionBox=function(o,s,a,c,g){var _=this.projectAndGetPerspectiveRatio(c,o.anchorPointX,o.anchorPointY),b=a*_.perspectiveRatio,S=o.x1*b+_.point.x,I=o.y1*b+_.point.y,L=o.x2*b+_.point.x,N=o.y2*b+_.point.y;return!this.isInsideGrid(S,I,L,N)||!s&&this.grid.hitTest(S,I,L,N,g)?{box:[],offscreen:!1}:{box:[S,I,L,N],offscreen:this.isOffscreen(S,I,L,N)}},Fi.prototype.placeCollisionCircles=function(o,s,a,c,g,_,b,S,I,L,N,j,q){var X=[],K=new f.Point(s.anchorX,s.anchorY),re=Wt(K,_),H=cr(this.transform.cameraToCenterDistance,re.signedDistanceFromCamera),te=(L?g/H:g*H)/f.ONE_EM,le=Wt(K,b).point,me=Sn(te,c,s.lineOffsetX*te,s.lineOffsetY*te,!1,le,K,s,a,b,{}),Ce=!1,Ee=!1,Ie=!0;if(me){for(var Ne=.5*j*H+q,We=new f.Point(-100,-100),Ke=new f.Point(this.screenRightBoundary,this.screenBottomBoundary),ut=new Kn,wt=me.first,Ct=me.last,Tt=[],nr=wt.path.length-1;nr>=1;nr--)Tt.push(wt.path[nr]);for(var pt=1;pt<Ct.path.length;pt++)Tt.push(Ct.path[pt]);var Lt=2.5*Ne;if(S){var Ft=Tt.map(function(Zi){return Wt(Zi,S)});Tt=Ft.some(function(Zi){return Zi.signedDistanceFromCamera<=0})?[]:Ft.map(function(Zi){return Zi.point})}var zt=[];if(Tt.length>0){for(var Mt=Tt[0].clone(),Bt=Tt[0].clone(),Pt=1;Pt<Tt.length;Pt++)Mt.x=Math.min(Mt.x,Tt[Pt].x),Mt.y=Math.min(Mt.y,Tt[Pt].y),Bt.x=Math.max(Bt.x,Tt[Pt].x),Bt.y=Math.max(Bt.y,Tt[Pt].y);zt=Mt.x>=We.x&&Bt.x<=Ke.x&&Mt.y>=We.y&&Bt.y<=Ke.y?[Tt]:Bt.x<We.x||Mt.x>Ke.x||Bt.y<We.y||Mt.y>Ke.y?[]:f.clipLine([Tt],We.x,We.y,Ke.x,Ke.y)}for(var At=0,_n=zt;At<_n.length;At+=1){var Zr;ut.reset(_n[At],.25*Ne),Zr=ut.length<=.5*Ne?1:Math.ceil(ut.paddedLength/Lt)+1;for(var Vn=0;Vn<Zr;Vn++){var An=Vn/Math.max(Zr-1,1),Vr=ut.lerp(An),Yr=Vr.x+100,bi=Vr.y+100;X.push(Yr,bi,Ne,0);var Qn=Yr-Ne,oa=bi-Ne,si=Yr+Ne,lo=bi+Ne;if(Ie=Ie&&this.isOffscreen(Qn,oa,si,lo),Ee=Ee||this.isInsideGrid(Qn,oa,si,lo),!o&&this.grid.hitTestCircle(Yr,bi,Ne,N)&&(Ce=!0,!I))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!I&&Ce||!Ee?[]:X,offscreen:Ie,collisionDetected:Ce}},Fi.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,c=1/0,g=-1/0,_=-1/0,b=0,S=o;b<S.length;b+=1){var I=S[b],L=new f.Point(I.x+100,I.y+100);a=Math.min(a,L.x),c=Math.min(c,L.y),g=Math.max(g,L.x),_=Math.max(_,L.y),s.push(L)}for(var N={},j={},q=0,X=this.grid.query(a,c,g,_).concat(this.ignoredGrid.query(a,c,g,_));q<X.length;q+=1){var K=X[q],re=K.key;if(N[re.bucketInstanceId]===void 0&&(N[re.bucketInstanceId]={}),!N[re.bucketInstanceId][re.featureIndex]){var H=[new f.Point(K.x1,K.y1),new f.Point(K.x2,K.y1),new f.Point(K.x2,K.y2),new f.Point(K.x1,K.y2)];f.polygonIntersectsPolygon(s,H)&&(N[re.bucketInstanceId][re.featureIndex]=!0,j[re.bucketInstanceId]===void 0&&(j[re.bucketInstanceId]=[]),j[re.bucketInstanceId].push(re.featureIndex))}}return j},Fi.prototype.insertCollisionBox=function(o,s,a,c,g){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:c,collisionGroupID:g},o[0],o[1],o[2],o[3])},Fi.prototype.insertCollisionCircles=function(o,s,a,c,g){for(var _=s?this.ignoredGrid:this.grid,b={bucketInstanceId:a,featureIndex:c,collisionGroupID:g},S=0;S<o.length;S+=4)_.insertCircle(b,o[S],o[S+1],o[S+2])},Fi.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var c=[s,a,0,1];return Tn(c,c,o),{point:new f.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},Fi.prototype.isOffscreen=function(o,s,a,c){return a<100||o>=this.screenRightBoundary||c<100||s>this.screenBottomBoundary},Fi.prototype.isInsideGrid=function(o,s,a,c){return a>=0&&o<this.gridRightBoundary&&c>=0&&s<this.gridBottomBoundary},Fi.prototype.getViewportMatrix=function(){var o=f.identity([]);return f.translate(o,o,[-100,-100,0]),o};var ro=function(o,s,a,c){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):c&&a?1:0,this.placed=a};ro.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Pi=function(o,s,a,c,g){this.text=new ro(o?o.text:null,s,a,g),this.icon=new ro(o?o.icon:null,s,c,g)};Pi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ah=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},Ni=function(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]},Hd=function(o,s,a,c,g){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=c,this.tileID=g},Ro=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function Ln(o,s,a,c,g){var _=f.getAnchorAlignment(o),b=-(_.horizontalAlign-.5)*s,S=-(_.verticalAlign-.5)*a,I=f.evaluateVariableOffset(o,c);return new f.Point(b+I[0]*g,S+I[1]*g)}function _o(o,s,a,c,g,_){var b=o.x1,S=o.x2,I=o.y1,L=o.y2,N=o.anchorPointX,j=o.anchorPointY,q=new f.Point(s,a);return c&&q._rotate(g?_:-_),{x1:b+q.x,y1:I+q.y,x2:S+q.x,y2:L+q.y,anchorPointX:N,anchorPointY:j}}Ro.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var Xn=function(o,s,a,c){this.transform=o.clone(),this.collisionIndex=new Fi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new Ro(a),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function ba(o,s,a,c,g){o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0),o.emplaceBack(s?1:0,a?1:0,c||0,g||0)}Xn.prototype.getBucketParts=function(o,s,a,c){var g=a.getBucket(s),_=a.latestFeatureIndex;if(g&&_&&s.id===g.layerIds[0]){var b=a.collisionBoxArray,S=g.layers[0].layout,I=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),L=a.tileSize/f.EXTENT,N=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),j=S.get("text-pitch-alignment")==="map",q=S.get("text-rotation-alignment")==="map",X=zr(a,1,this.transform.zoom),K=Xr(N,j,q,this.transform,X),re=null;if(j){var H=_r(N,j,q,this.transform,X);re=f.multiply([],this.transform.labelPlaneMatrix,H)}this.retainedQueryData[g.bucketInstanceId]=new Hd(g.bucketInstanceId,_,g.sourceLayerIndex,g.index,a.tileID);var te={bucket:g,layout:S,posMatrix:N,textLabelPlaneMatrix:K,labelToScreenMatrix:re,scale:I,textPixelRatio:L,holdingForFade:a.holdingForFade(),collisionBoxArray:b,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(c)for(var le=0,me=g.sortKeyRanges;le<me.length;le+=1){var Ce=me[le];o.push({sortKey:Ce.sortKey,symbolInstanceStart:Ce.symbolInstanceStart,symbolInstanceEnd:Ce.symbolInstanceEnd,parameters:te})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:te})}},Xn.prototype.attemptAnchorPlacement=function(o,s,a,c,g,_,b,S,I,L,N,j,q,X,K){var re,H=[j.textOffset0,j.textOffset1],te=Ln(o,a,c,H,g),le=this.collisionIndex.placeCollisionBox(_o(s,te.x,te.y,_,b,this.transform.angle),N,S,I,L.predicate);if(!K||this.collisionIndex.placeCollisionBox(_o(K,te.x,te.y,_,b,this.transform.angle),N,S,I,L.predicate).box.length!==0)return le.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(re=this.prevPlacement.variableOffsets[j.crossTileID].anchor),this.variableOffsets[j.crossTileID]={textOffset:H,width:a,height:c,anchor:o,textBoxScale:g,prevAnchor:re},this.markUsedJustification(q,o,j,X),q.allowVerticalPlacement&&(this.markUsedOrientation(q,X,j),this.placedOrientations[j.crossTileID]=X),{shift:te,placedGlyphBoxes:le}):void 0},Xn.prototype.placeLayerBucketPart=function(o,s,a){var c=this,g=o.parameters,_=g.bucket,b=g.layout,S=g.posMatrix,I=g.textLabelPlaneMatrix,L=g.labelToScreenMatrix,N=g.textPixelRatio,j=g.holdingForFade,q=g.collisionBoxArray,X=g.partiallyEvaluatedTextSize,K=g.collisionGroup,re=b.get("text-optional"),H=b.get("icon-optional"),te=b.get("text-allow-overlap"),le=b.get("icon-allow-overlap"),me=b.get("text-rotation-alignment")==="map",Ce=b.get("text-pitch-alignment")==="map",Ee=b.get("icon-text-fit")!=="none",Ie=b.get("symbol-z-order")==="viewport-y",Ne=te&&(le||!_.hasIconData()||H),We=le&&(te||!_.hasTextData()||re);!_.collisionArrays&&q&&_.deserializeCollisionBoxes(q);var Ke=function(pt,Lt){if(!s[pt.crossTileID])if(j)c.placements[pt.crossTileID]=new ah(!1,!1,!1);else{var Ft,zt=!1,Mt=!1,Bt=!0,Pt=null,At={box:null,offscreen:null},_n={box:null,offscreen:null},Zr=null,Vn=null,An=0,Vr=0,Yr=0;Lt.textFeatureIndex?An=Lt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(An=pt.featureIndex),Lt.verticalTextFeatureIndex&&(Vr=Lt.verticalTextFeatureIndex);var bi=Lt.textBox;if(bi){var Qn=function(pr){var Li=f.WritingMode.horizontal;if(_.allowVerticalPlacement&&!pr&&c.prevPlacement){var li=c.prevPlacement.placedOrientations[pt.crossTileID];li&&(c.placedOrientations[pt.crossTileID]=li,c.markUsedOrientation(_,Li=li,pt))}return Li},oa=function(pr,Li){if(_.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Lt.verticalTextBox)for(var li=0,Na=_.writingModes;li<Na.length&&(Na[li]===f.WritingMode.vertical?(At=Li(),_n=At):At=pr(),!(At&&At.box&&At.box.length));li+=1);else At=pr()};if(b.get("text-variable-anchor")){var si=b.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[pt.crossTileID]){var lo=c.prevPlacement.variableOffsets[pt.crossTileID];si.indexOf(lo.anchor)>0&&(si=si.filter(function(pr){return pr!==lo.anchor})).unshift(lo.anchor)}var Zi=function(pr,Li,li){for(var Na=pr.x2-pr.x1,om=pr.y2-pr.y1,vu=pt.textBoxScale,am=Ee&&!le?Li:null,ml={box:[],offscreen:!1},Bh=te?2*si.length:si.length,ys=0;ys<Bh;++ys){var _u=c.attemptAnchorPlacement(si[ys%si.length],pr,Na,om,vu,me,Ce,N,S,K,ys>=si.length,pt,_,li,am);if(_u&&(ml=_u.placedGlyphBoxes)&&ml.box&&ml.box.length){zt=!0,Pt=_u.shift;break}}return ml};oa(function(){return Zi(bi,Lt.iconBox,f.WritingMode.horizontal)},function(){var pr=Lt.verticalTextBox;return _.allowVerticalPlacement&&!(At&&At.box&&At.box.length)&&pt.numVerticalGlyphVertices>0&&pr?Zi(pr,Lt.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),At&&(zt=At.box,Bt=At.offscreen);var hl=Qn(At&&At.box);if(!zt&&c.prevPlacement){var ms=c.prevPlacement.variableOffsets[pt.crossTileID];ms&&(c.variableOffsets[pt.crossTileID]=ms,c.markUsedJustification(_,ms.anchor,pt,hl))}}else{var aa=function(pr,Li){var li=c.collisionIndex.placeCollisionBox(pr,te,N,S,K.predicate);return li&&li.box&&li.box.length&&(c.markUsedOrientation(_,Li,pt),c.placedOrientations[pt.crossTileID]=Li),li};oa(function(){return aa(bi,f.WritingMode.horizontal)},function(){var pr=Lt.verticalTextBox;return _.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&pr?aa(pr,f.WritingMode.vertical):{box:null,offscreen:null}}),Qn(At&&At.box&&At.box.length)}}if(zt=(Ft=At)&&Ft.box&&Ft.box.length>0,Bt=Ft&&Ft.offscreen,pt.useRuntimeCollisionCircles){var gs=_.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),fl=f.evaluateSizeForFeature(_.textSizeData,X,gs),Eo=b.get("text-padding");Zr=c.collisionIndex.placeCollisionCircles(te,gs,_.lineVertexArray,_.glyphOffsetArray,fl,S,I,L,a,Ce,K.predicate,pt.collisionCircleDiameter,Eo),zt=te||Zr.circles.length>0&&!Zr.collisionDetected,Bt=Bt&&Zr.offscreen}if(Lt.iconFeatureIndex&&(Yr=Lt.iconFeatureIndex),Lt.iconBox){var dl=function(pr){var Li=Ee&&Pt?_o(pr,Pt.x,Pt.y,me,Ce,c.transform.angle):pr;return c.collisionIndex.placeCollisionBox(Li,le,N,S,K.predicate)};Mt=_n&&_n.box&&_n.box.length&&Lt.verticalIconBox?(Vn=dl(Lt.verticalIconBox)).box.length>0:(Vn=dl(Lt.iconBox)).box.length>0,Bt=Bt&&Vn.offscreen}var So=re||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,xn=H||pt.numIconVertices===0;if(So||xn?xn?So||(Mt=Mt&&zt):zt=Mt&&zt:Mt=zt=Mt&&zt,zt&&Ft&&Ft.box&&c.collisionIndex.insertCollisionBox(Ft.box,b.get("text-ignore-placement"),_.bucketInstanceId,_n&&_n.box&&Vr?Vr:An,K.ID),Mt&&Vn&&c.collisionIndex.insertCollisionBox(Vn.box,b.get("icon-ignore-placement"),_.bucketInstanceId,Yr,K.ID),Zr&&(zt&&c.collisionIndex.insertCollisionCircles(Zr.circles,b.get("text-ignore-placement"),_.bucketInstanceId,An,K.ID),a)){var Fo=_.bucketInstanceId,sa=c.collisionCircleArrays[Fo];sa===void 0&&(sa=c.collisionCircleArrays[Fo]=new Ni);for(var Fa=0;Fa<Zr.circles.length;Fa+=4)sa.circles.push(Zr.circles[Fa+0]),sa.circles.push(Zr.circles[Fa+1]),sa.circles.push(Zr.circles[Fa+2]),sa.circles.push(Zr.collisionDetected?1:0)}c.placements[pt.crossTileID]=new ah(zt||Ne,Mt||We,Bt||_.justReloaded),s[pt.crossTileID]=!0}};if(Ie)for(var ut=_.getSortedSymbolIndexes(this.transform.angle),wt=ut.length-1;wt>=0;--wt){var Ct=ut[wt];Ke(_.symbolInstances.get(Ct),_.collisionArrays[Ct])}else for(var Tt=o.symbolInstanceStart;Tt<o.symbolInstanceEnd;Tt++)Ke(_.symbolInstances.get(Tt),_.collisionArrays[Tt]);if(a&&_.bucketInstanceId in this.collisionCircleArrays){var nr=this.collisionCircleArrays[_.bucketInstanceId];f.invert(nr.invProjMatrix,S),nr.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1},Xn.prototype.markUsedJustification=function(o,s,a,c){var g;g=c===f.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(s)];for(var _=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];_<b.length;_+=1){var S=b[_];S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=g>=0&&S!==g?0:a.crossTileID)}},Xn.prototype.markUsedOrientation=function(o,s,a){for(var c=s===f.WritingMode.horizontal||s===f.WritingMode.horizontalOnly?s:0,g=s===f.WritingMode.vertical?s:0,_=0,b=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];_<b.length;_+=1)o.text.placedSymbolArray.get(b[_]).placedOrientation=c;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=g)},Xn.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var c=s?s.symbolFadeChange(o):1,g=s?s.opacities:{},_=s?s.variableOffsets:{},b=s?s.placedOrientations:{};for(var S in this.placements){var I=this.placements[S],L=g[S];L?(this.opacities[S]=new Pi(L,c,I.text,I.icon),a=a||I.text!==L.text.placed||I.icon!==L.icon.placed):(this.opacities[S]=new Pi(null,c,I.text,I.icon,I.skipFade),a=a||I.text||I.icon)}for(var N in g){var j=g[N];if(!this.opacities[N]){var q=new Pi(j,c,!1,!1);q.isHidden()||(this.opacities[N]=q,a=a||j.text.placed||j.icon.placed)}}for(var X in _)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=_[X]);for(var K in b)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=b[K]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},Xn.prototype.updateLayerOpacities=function(o,s){for(var a={},c=0,g=s;c<g.length;c+=1){var _=g[c],b=_.getBucket(o);b&&_.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,a,_.collisionBoxArray)}},Xn.prototype.updateBucketOpacities=function(o,s,a){var c=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var g=o.layers[0].layout,_=new Pi(null,0,!1,!1,!0),b=g.get("text-allow-overlap"),S=g.get("icon-allow-overlap"),I=g.get("text-variable-anchor"),L=g.get("text-rotation-alignment")==="map",N=g.get("text-pitch-alignment")==="map",j=g.get("icon-text-fit")!=="none",q=new Pi(null,0,b&&(S||!o.hasIconData()||g.get("icon-optional")),S&&(b||!o.hasTextData()||g.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var X=function(te,le,me){for(var Ce=0;Ce<le/4;Ce++)te.opacityVertexArray.emplaceBack(me)},K=function(te){var le=o.symbolInstances.get(te),me=le.numHorizontalGlyphVertices,Ce=le.numVerticalGlyphVertices,Ee=le.crossTileID,Ie=c.opacities[Ee];s[Ee]?Ie=_:Ie||(c.opacities[Ee]=Ie=q),s[Ee]=!0;var Ne=le.numIconVertices>0,We=c.placedOrientations[le.crossTileID],Ke=We===f.WritingMode.vertical,ut=We===f.WritingMode.horizontal||We===f.WritingMode.horizontalOnly;if(me>0||Ce>0){var wt=uh(Ie.text);X(o.text,me,Ke?is:wt),X(o.text,Ce,ut?is:wt);var Ct=Ie.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(function(At){At>=0&&(o.text.placedSymbolArray.get(At).hidden=Ct||Ke?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=Ct||ut?1:0);var Tt=c.variableOffsets[le.crossTileID];Tt&&c.markUsedJustification(o,Tt.anchor,le,We);var nr=c.placedOrientations[le.crossTileID];nr&&(c.markUsedJustification(o,"left",le,nr),c.markUsedOrientation(o,nr,le))}if(Ne){var pt=uh(Ie.icon),Lt=!(j&&le.verticalPlacedIconSymbolIndex&&Ke);le.placedIconSymbolIndex>=0&&(X(o.icon,le.numIconVertices,Lt?pt:is),o.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(X(o.icon,le.numVerticalIconVertices,Lt?is:pt),o.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var Ft=o.collisionArrays[te];if(Ft){var zt=new f.Point(0,0);if(Ft.textBox||Ft.verticalTextBox){var Mt=!0;if(I){var Bt=c.variableOffsets[Ee];Bt?(zt=Ln(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),L&&zt._rotate(N?c.transform.angle:-c.transform.angle)):Mt=!1}Ft.textBox&&ba(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!Mt||Ke,zt.x,zt.y),Ft.verticalTextBox&&ba(o.textCollisionBox.collisionVertexArray,Ie.text.placed,!Mt||ut,zt.x,zt.y)}var Pt=!!(!ut&&Ft.verticalIconBox);Ft.iconBox&&ba(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Pt,j?zt.x:0,j?zt.y:0),Ft.verticalIconBox&&ba(o.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Pt,j?zt.x:0,j?zt.y:0)}}},re=0;re<o.symbolInstances.length;re++)K(re);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var H=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=H.invProjMatrix,o.placementViewportMatrix=H.viewportMatrix,o.collisionCircleArray=H.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Xn.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Xn.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},Xn.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},Xn.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},Xn.prototype.setStale=function(){this.stale=!0};var Gd=Math.pow(2,25),$d=Math.pow(2,24),Ec=Math.pow(2,17),Kd=Math.pow(2,16),sh=Math.pow(2,9),Wd=Math.pow(2,8),lh=Math.pow(2,1);function uh(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*Gd+s*$d+a*Ec+s*Kd+a*sh+s*Wd+a*lh+s}var is=0,Sc=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Sc.prototype.continuePlacement=function(o,s,a,c,g){for(var _=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(_,c,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort(function(b,S){return b.sortKey-S.sortKey}));this._currentPartIndex<_.length;)if(s.placeLayerBucketPart(_[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,g())return!0;return!1};var Ws=function(o,s,a,c,g,_,b){this.placement=new Xn(o,g,_,b),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=c,this._done=!1};Ws.prototype.isDone=function(){return this._done},Ws.prototype.continuePlacement=function(o,s,a){for(var c=this,g=f.browser.now(),_=function(){var I=f.browser.now()-g;return!c._forceFullPlacement&&I>2};this._currentPlacementIndex>=0;){var b=s[o[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=S)&&(!b.maxzoom||b.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Sc(b)),this._inProgressLayer.continuePlacement(a[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ws.prototype.commit=function(o){return this.placement.commit(o),this.placement};var ch=512/f.EXTENT/2,Yl=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var c=0;c<s.length;c++){var g=s.get(c),_=g.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,o)})}};Yl.prototype.getScaledCoordinates=function(o,s){var a=ch/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*f.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*f.EXTENT+o.anchorY)*a)}},Yl.prototype.findMatches=function(o,s,a){for(var c=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),g=0;g<o.length;g++){var _=o.get(g);if(!_.crossTileID){var b=this.indexedSymbolInstances[_.key];if(b)for(var S=this.getScaledCoordinates(_,s),I=0,L=b;I<L.length;I+=1){var N=L[I];if(Math.abs(N.coord.x-S.x)<=c&&Math.abs(N.coord.y-S.y)<=c&&!a[N.crossTileID]){a[N.crossTileID]=!0,_.crossTileID=N.crossTileID;break}}}}};var Ui=function(){this.maxCrossTileID=0};Ui.prototype.generate=function(){return++this.maxCrossTileID};var Ho=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ho.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var c=this.indexes[a],g={};for(var _ in c){var b=c[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),g[b.tileID.key]=b}this.indexes[a]=g}this.lng=o},Ho.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var c=0;c<s.symbolInstances.length;c++)s.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var g=this.usedCrossTileIDs[o.overscaledZ];for(var _ in this.indexes){var b=this.indexes[_];if(Number(_)>o.overscaledZ)for(var S in b){var I=b[S];I.tileID.isChildOf(o)&&I.findMatches(s.symbolInstances,o,g)}else{var L=b[o.scaledTo(Number(_)).key];L&&L.findMatches(s.symbolInstances,o,g)}}for(var N=0;N<s.symbolInstances.length;N++){var j=s.symbolInstances.get(N);j.crossTileID||(j.crossTileID=a.generate(),g[j.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Yl(o,s.symbolInstances,s.bucketInstanceId),!0},Ho.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var c=0,g=s.indexedSymbolInstances[a];c<g.length;c+=1)delete this.usedCrossTileIDs[o][g[c].crossTileID]},Ho.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var c=this.indexes[a];for(var g in c)o[c[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,c[g]),delete c[g],s=!0)}return s};var Go=function(){this.layerIndexes={},this.crossTileIDs=new Ui,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Go.prototype.addLayer=function(o,s,a){var c=this.layerIndexes[o.id];c===void 0&&(c=this.layerIndexes[o.id]=new Ho);var g=!1,_={};c.handleWrapJump(a);for(var b=0,S=s;b<S.length;b+=1){var I=S[b],L=I.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(I.tileID,L,this.crossTileIDs)&&(g=!0),_[L.bucketInstanceId]=!0)}return c.removeStaleBuckets(_)&&(g=!0),g},Go.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(c){s[c]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var wa=function(o,s){return f.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},$o=f.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ko=f.pick(it,["setCenter","setZoom","setBearing","setPitch"]),Ql=function(){var o={},s=f.styleSpec.$version;for(var a in f.styleSpec.$root){var c,g=f.styleSpec.$root[a];g.required&&(c=a==="version"?s:g.type==="array"?[]:{})!=null&&(o[a]=c)}return o}(),mi=function(o){function s(a,c){var g=this;c===void 0&&(c={}),o.call(this),this.map=a,this.dispatcher=new un(Me(),this),this.imageManager=new Ot,this.imageManager.setEventedParent(this),this.glyphManager=new ln(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new dr(256,512),this.crossTileSymbolIndex=new Go,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());var _=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(b){_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},function(S,I){if(f.triggerPluginCompletionEvent(S),I&&I.every(function(N){return N}))for(var L in _.sourceCaches)_.sourceCaches[L].reload()})}),this.on("data",function(b){if(b.dataType==="source"&&b.sourceDataType==="metadata"){var S=g.sourceCaches[b.sourceId];if(S){var I=S.getSource();if(I&&I.vectorLayerIds)for(var L in g._layers){var N=g._layers[L];N.source===I.id&&g._validateLayer(N)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"}));var _=typeof c.validate=="boolean"?c.validate:!f.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,c.accessToken);var b=this.map._requestManager.transformRequest(a,f.ResourceType.Style);this._request=f.getJSON(b,function(S,I){g._request=null,S?g.fire(new f.ErrorEvent(S)):I&&g._load(I,_)})},s.prototype.loadJSON=function(a,c){var g=this;c===void 0&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.browser.frame(function(){g._request=null,g._load(a,c.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(Ql,!1)},s.prototype._load=function(a,c){if(!c||!wa(this,f.validateStyle(a))){for(var g in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(g,a.sources[g],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var _=tt(this.stylesheet.layers);this._order=_.map(function(L){return L.id}),this._layers={},this._serializedLayers={};for(var b=0,S=_;b<S.length;b+=1){var I=S[b];(I=f.createStyleLayer(I)).setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=I,this._serializedLayers[I.id]=I.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new eo(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}},s.prototype._loadSprite=function(a){var c=this;this._spriteRequest=function(g,_,b){var S,I,L,N=f.browser.devicePixelRatio>1?"@2x":"",j=f.getJSON(_.transformRequest(_.normalizeSpriteURL(g,N,".json"),f.ResourceType.SpriteJSON),function(K,re){j=null,L||(L=K,S=re,X())}),q=f.getImage(_.transformRequest(_.normalizeSpriteURL(g,N,".png"),f.ResourceType.SpriteImage),function(K,re){q=null,L||(L=K,I=re,X())});function X(){if(L)b(L);else if(S&&I){var K=f.browser.getImageData(I),re={};for(var H in S){var te=S[H],le=te.width,me=te.height,Ce=te.x,Ee=te.y,Ie=te.sdf,Ne=te.pixelRatio,We=te.stretchX,Ke=te.stretchY,ut=te.content,wt=new f.RGBAImage({width:le,height:me});f.RGBAImage.copy(K,wt,{x:Ce,y:Ee},{x:0,y:0},{width:le,height:me}),re[H]={data:wt,pixelRatio:Ne,sdf:Ie,stretchX:We,stretchY:Ke,content:ut}}b(null,re)}}return{cancel:function(){j&&(j.cancel(),j=null),q&&(q.cancel(),q=null)}}}(a,this.map._requestManager,function(g,_){if(c._spriteRequest=null,g)c.fire(new f.ErrorEvent(g));else if(_)for(var b in _)c.imageManager.addImage(b,_[b]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new f.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var g=a.sourceLayer;if(g){var _=c.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new f.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+_.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var c=[],g=0,_=a;g<_.length;g+=1){var b=this._layers[_[g]];b.type!=="custom"&&c.push(b.serialize())}return c},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var c=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);for(var b in(g.length||_.length)&&this._updateWorkerLayers(g,_),this._updatedSources){var S=this._updatedSources[b];S==="reload"?this._reloadSource(b):S==="clear"&&this._clearSource(b)}for(var I in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var L={};for(var N in this.sourceCaches){var j=this.sourceCaches[N];L[N]=j.used,j.used=!1}for(var q=0,X=this._order;q<X.length;q+=1){var K=this._layers[X[q]];K.recalculate(a,this._availableImages),!K.isHidden(a.zoom)&&K.source&&(this.sourceCaches[K.source].used=!0)}for(var re in L){var H=this.sourceCaches[re];L[re]!==H.used&&H.fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:re}))}this.light.recalculate(a),this.z=a.zoom,c&&this.fire(new f.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:c})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var c=this;if(this._checkLoaded(),wa(this,f.validateStyle(a)))return!1;(a=f.clone$1(a)).layers=tt(a.layers);var g=function(b,S){if(!b)return[{command:it.setStyle,args:[S]}];var I=[];try{if(!f.deepEqual(b.version,S.version))return[{command:it.setStyle,args:[S]}];f.deepEqual(b.center,S.center)||I.push({command:it.setCenter,args:[S.center]}),f.deepEqual(b.zoom,S.zoom)||I.push({command:it.setZoom,args:[S.zoom]}),f.deepEqual(b.bearing,S.bearing)||I.push({command:it.setBearing,args:[S.bearing]}),f.deepEqual(b.pitch,S.pitch)||I.push({command:it.setPitch,args:[S.pitch]}),f.deepEqual(b.sprite,S.sprite)||I.push({command:it.setSprite,args:[S.sprite]}),f.deepEqual(b.glyphs,S.glyphs)||I.push({command:it.setGlyphs,args:[S.glyphs]}),f.deepEqual(b.transition,S.transition)||I.push({command:it.setTransition,args:[S.transition]}),f.deepEqual(b.light,S.light)||I.push({command:it.setLight,args:[S.light]});var L={},N=[];(function(q,X,K,re){var H;for(H in X=X||{},q=q||{})q.hasOwnProperty(H)&&(X.hasOwnProperty(H)||at(H,K,re));for(H in X)X.hasOwnProperty(H)&&(q.hasOwnProperty(H)?f.deepEqual(q[H],X[H])||(q[H].type==="geojson"&&X[H].type==="geojson"&&br(q,X,H)?K.push({command:it.setGeoJSONSourceData,args:[H,X[H].data]}):Xt(H,X,K,re)):Ut(H,X,K))})(b.sources,S.sources,N,L);var j=[];b.layers&&b.layers.forEach(function(q){L[q.source]?I.push({command:it.removeLayer,args:[q.id]}):j.push(q)}),I=I.concat(N),function(q,X,K){X=X||[];var re,H,te,le,me,Ce,Ee,Ie=(q=q||[]).map(ur),Ne=X.map(ur),We=q.reduce(Yt,{}),Ke=X.reduce(Yt,{}),ut=Ie.slice(),wt=Object.create(null);for(re=0,H=0;re<Ie.length;re++)Ke.hasOwnProperty(te=Ie[re])?H++:(K.push({command:it.removeLayer,args:[te]}),ut.splice(ut.indexOf(te,H),1));for(re=0,H=0;re<Ne.length;re++)ut[ut.length-1-re]!==(te=Ne[Ne.length-1-re])&&(We.hasOwnProperty(te)?(K.push({command:it.removeLayer,args:[te]}),ut.splice(ut.lastIndexOf(te,ut.length-H),1)):H++,K.push({command:it.addLayer,args:[Ke[te],Ce=ut[ut.length-re]]}),ut.splice(ut.length-re,0,te),wt[te]=!0);for(re=0;re<Ne.length;re++)if(le=We[te=Ne[re]],me=Ke[te],!wt[te]&&!f.deepEqual(le,me))if(f.deepEqual(le.source,me.source)&&f.deepEqual(le["source-layer"],me["source-layer"])&&f.deepEqual(le.type,me.type)){for(Ee in Ht(le.layout,me.layout,K,te,null,it.setLayoutProperty),Ht(le.paint,me.paint,K,te,null,it.setPaintProperty),f.deepEqual(le.filter,me.filter)||K.push({command:it.setFilter,args:[te,me.filter]}),f.deepEqual(le.minzoom,me.minzoom)&&f.deepEqual(le.maxzoom,me.maxzoom)||K.push({command:it.setLayerZoomRange,args:[te,me.minzoom,me.maxzoom]}),le)le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Ht(le[Ee],me[Ee],K,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||K.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}));for(Ee in me)me.hasOwnProperty(Ee)&&!le.hasOwnProperty(Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Ht(le[Ee],me[Ee],K,te,Ee.slice(6),it.setPaintProperty):f.deepEqual(le[Ee],me[Ee])||K.push({command:it.setLayerProperty,args:[te,Ee,me[Ee]]}))}else K.push({command:it.removeLayer,args:[te]}),Ce=ut[ut.lastIndexOf(te)+1],K.push({command:it.addLayer,args:[me,Ce]})}(j,S.layers,I)}catch(q){console.warn("Unable to compute style diff:",q),I=[{command:it.setStyle,args:[S]}]}return I}(this.serialize(),a).filter(function(b){return!(b.command in Ko)});if(g.length===0)return!1;var _=g.filter(function(b){return!(b.command in $o)});if(_.length>0)throw new Error("Unimplemented: "+_.map(function(b){return b.command}).join(", ")+".");return g.forEach(function(b){b.command!=="setTransition"&&c[b.command].apply(c,b.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new f.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,c),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,c){this.imageManager.updateImage(a,c)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new f.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,c,g){var _=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(f.validateStyle.source,"sources."+a,c,null,g))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var b=this.sourceCaches[a]=new J(a,c,this.dispatcher);b.style=this,b.setEventedParent(this,function(){return{isSourceLoaded:_.loaded(),source:b.serialize(),sourceId:a}}),b.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new f.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));var g=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],g.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,c){this._checkLoaded(),this.sourceCaches[a].getSource().setData(c),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=a.id;if(this.getLayer(_))this.fire(new f.ErrorEvent(new Error('Layer with id "'+_+'" already exists on this map')));else{var b;if(a.type==="custom"){if(wa(this,f.validateCustomStyleLayer(a)))return;b=f.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(_,a.source),a=f.clone$1(a),a=f.extend(a,{source:_})),this._validate(f.validateStyle.layer,"layers."+_,a,{arrayIndex:-1},g))return;b=f.createStyleLayer(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize()}var S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(S,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){var I=this._removedLayers[_];delete this._removedLayers[_],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}},s.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var g=this._order.indexOf(a);this._order.splice(g,1);var _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,c,g){this._checkLoaded();var _=this.getLayer(a);_?_.minzoom===c&&_.maxzoom===g||(c!=null&&(_.minzoom=c),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,c,g){g===void 0&&(g={}),this._checkLoaded();var _=this.getLayer(a);if(_){if(!f.deepEqual(_.filter,c))return c==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(f.validateStyle.filter,"layers."+_.id+".filter",c,null,g)||(_.filter=f.clone$1(c),this._updateLayer(_)))}else this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return f.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getLayoutProperty(c),g)||(b.setLayoutProperty(c,g,_),this._updateLayer(b)):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,c){var g=this.getLayer(a);if(g)return g.getLayoutProperty(c);this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,c,g,_){_===void 0&&(_={}),this._checkLoaded();var b=this.getLayer(a);b?f.deepEqual(b.getPaintProperty(c),g)||(b.setPaintProperty(c,g,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new f.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,c){return this.getLayer(a).getPaintProperty(c)},s.prototype.setFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=a.sourceLayer,b=this.sourceCaches[g];if(b!==void 0){var S=b.getSource().type;S==="geojson"&&_?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||_?(a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,a.id,c)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,c){this._checkLoaded();var g=a.source,_=this.sourceCaches[g];if(_!==void 0){var b=_.getSource().type,S=b==="vector"?a.sourceLayer:void 0;b!=="vector"||S?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(S,a.id,c):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var c=a.source,g=a.sourceLayer,_=this.sourceCaches[c];if(_!==void 0){if(_.getSource().type!=="vector"||g)return a.id===void 0&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var c=this,g=function(We){return c._layers[We].type==="fill-extrusion"},_={},b=[],S=this._order.length-1;S>=0;S--){var I=this._order[S];if(g(I)){_[I]=S;for(var L=0,N=a;L<N.length;L+=1){var j=N[L][I];if(j)for(var q=0,X=j;q<X.length;q+=1)b.push(X[q])}}}b.sort(function(We,Ke){return Ke.intersectionZ-We.intersectionZ});for(var K=[],re=this._order.length-1;re>=0;re--){var H=this._order[re];if(g(H))for(var te=b.length-1;te>=0;te--){var le=b[te].feature;if(_[le.layer.id]<re)break;K.push(le),b.pop()}else for(var me=0,Ce=a;me<Ce.length;me+=1){var Ee=Ce[me][H];if(Ee)for(var Ie=0,Ne=Ee;Ie<Ne.length;Ie+=1)K.push(Ne[Ie].feature)}}return K},s.prototype.queryRenderedFeatures=function(a,c,g){c&&c.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var _={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var b=0,S=c.layers;b<S.length;b+=1){var I=S[b],L=this._layers[I];if(!L)return this.fire(new f.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be queried for features."))),[];_[L.source]=!0}}var N=[];for(var j in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!_[j]||N.push(Ze(this.sourceCaches[j],this._layers,this._serializedLayers,a,c,g));return this.placement&&N.push(function(q,X,K,re,H,te,le){for(var me={},Ce=te.queryRenderedSymbols(re),Ee=[],Ie=0,Ne=Object.keys(Ce).map(Number);Ie<Ne.length;Ie+=1)Ee.push(le[Ne[Ie]]);Ee.sort(ct);for(var We=function(){var Tt=ut[Ke],nr=Tt.featureIndex.lookupSymbolFeatures(Ce[Tt.bucketInstanceId],X,Tt.bucketIndex,Tt.sourceLayerIndex,H.filter,H.layers,H.availableImages,q);for(var pt in nr){var Lt=me[pt]=me[pt]||[],Ft=nr[pt];Ft.sort(function(Bt,Pt){var At=Tt.featureSortOrder;if(At){var _n=At.indexOf(Bt.featureIndex);return At.indexOf(Pt.featureIndex)-_n}return Pt.featureIndex-Bt.featureIndex});for(var zt=0,Mt=Ft;zt<Mt.length;zt+=1)Lt.push(Mt[zt])}},Ke=0,ut=Ee;Ke<ut.length;Ke+=1)We();var wt=function(Tt){me[Tt].forEach(function(nr){var pt=nr.feature,Lt=K[q[Tt].source].getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=Lt})};for(var Ct in me)wt(Ct);return me}(this._layers,this._serializedLayers,this.sourceCaches,a,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(N)},s.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var g=this.sourceCaches[a];return g?function(_,b){for(var S=_.getRenderableIds().map(function(X){return _.getTileByID(X)}),I=[],L={},N=0;N<S.length;N++){var j=S[N],q=j.tileID.canonical.key;L[q]||(L[q]=!0,j.querySourceFeatures(I,b))}return I}(g,c):[]},s.prototype.addSourceType=function(a,c,g){return s.getSourceType(a)?g(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:c.workerSourceURL},g):g(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,c){c===void 0&&(c={}),this._checkLoaded();var g=this.light.getLight(),_=!1;for(var b in a)if(!f.deepEqual(a[b],g[b])){_=!0;break}if(_){var S={now:f.browser.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(S)}},s.prototype._validate=function(a,c,g,_,b){return b===void 0&&(b={}),(!b||b.validate!==!1)&&wa(this,a.call(f.validateStyle,f.extend({key:c,style:this.serialize(),value:g,styleSpec:f.styleSpec},_)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var c in this.sourceCaches)this.sourceCaches[c].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,c,g,_,b){b===void 0&&(b=!1);for(var S=!1,I=!1,L={},N=0,j=this._order;N<j.length;N+=1){var q=this._layers[j[N]];if(q.type==="symbol"){if(!L[q.source]){var X=this.sourceCaches[q.source];L[q.source]=X.getRenderableIds(!0).map(function(le){return X.getTileByID(le)}).sort(function(le,me){return me.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(me.tileID)?-1:1)})}var K=this.crossTileSymbolIndex.addLayer(q,L[q.source],a.center.lng);S=S||K}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.browser.now(),a.zoom))&&(this.pauseablePlacement=new Ws(a,this._order,b,c,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.browser.now()),I=!0),S&&this.pauseablePlacement.placement.setStale()),I||S)for(var re=0,H=this._order;re<H.length;re+=1){var te=this._layers[H[re]];te.type==="symbol"&&this.placement.updateLayerOpacities(te,L[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,c,g){this.imageManager.getImages(c.icons,g),this._updateTilesForChangedImages();var _=this.sourceCaches[c.source];_&&_.setDependencies(c.tileID.key,c.type,c.icons)},s.prototype.getGlyphs=function(a,c,g){this.glyphManager.getGlyphs(c.stacks,g)},s.prototype.getResource=function(a,c,g){return f.makeRequest(c,g)},s}(f.Evented);mi.getSourceType=function(o){return Ae[o]},mi.setSourceType=function(o,s){Ae[o]=s},mi.registerForPluginStateChange=f.registerForPluginStateChange;var nn=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),os=wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ph=wr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xd=wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Jd=wr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Tc=wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Cc=wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ac=wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ic=wr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),hh=wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),fh=wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Yd=wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Xs=wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Js=wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),dh=wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Rn=wr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),kc=wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Wo=wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Xo=wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ea=wr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Sa=wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Jo=wr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ta=wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ca=wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Yo=wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),mh=wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),gh=wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function wr(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=s.match(/attribute ([\w]+) ([\w]+)/g),g=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(g):g,S={};return{fragmentSource:o=o.replace(a,function(I,L,N,j,q){return S[q]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
varying `+N+" "+j+" "+q+`;
#else
uniform `+N+" "+j+" u_"+q+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+q+`
    `+N+" "+j+" "+q+" = u_"+q+`;
#endif
`}),vertexSource:s=s.replace(a,function(I,L,N,j,q){var X=j==="float"?"vec2":"vec4",K=q.match(/color/)?"color":X;return S[q]?L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+N+" "+X+" a_"+q+`;
varying `+N+" "+j+" "+q+`;
#else
uniform `+N+" "+j+" u_"+q+`;
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = a_"+q+`;
#else
    `+N+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+q+" = unpack_mix_"+K+"(a_"+q+", u_"+q+`_t);
#else
    `+N+" "+j+" "+q+" = u_"+q+`;
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_`+q+`
uniform lowp float u_`+q+`_t;
attribute `+N+" "+X+" a_"+q+`;
#else
uniform `+N+" "+j+" u_"+q+`;
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_`+q+`
    `+N+" "+j+" "+q+" = a_"+q+`;
#else
    `+N+" "+j+" "+q+" = u_"+q+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+q+`
    `+N+" "+j+" "+q+" = unpack_mix_"+K+"(a_"+q+", u_"+q+`_t);
#else
    `+N+" "+j+" "+q+" = u_"+q+`;
#endif
`}),staticAttributes:c,staticUniforms:b}}var Qd=Object.freeze({__proto__:null,prelude:os,background:ph,backgroundPattern:Xd,circle:Jd,clippingMask:Tc,heatmap:Cc,heatmapTexture:Ac,collisionBox:Ic,collisionCircle:hh,debug:fh,fill:Yd,fillOutline:Xs,fillOutlinePattern:Js,fillPattern:dh,fillExtrusion:Rn,fillExtrusionPattern:kc,hillshadePrepare:Wo,hillshade:Xo,line:Ea,lineGradient:Sa,linePattern:Jo,lineSDF:Ta,raster:Ca,symbolIcon:Yo,symbolSDF:mh,symbolTextAndIcon:gh}),eu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function yh(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var c=o[a].split(" ");s.push(c.pop())}return s}eu.prototype.bind=function(o,s,a,c,g,_,b,S){this.context=o;for(var I=this.boundPaintVertexBuffers.length!==c.length,L=0;!I&&L<c.length;L++)this.boundPaintVertexBuffers[L]!==c[L]&&(I=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!I&&this.boundIndexBuffer===g&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===b&&this.boundDynamicVertexBuffer2===S?(o.bindVertexArrayOES.set(this.vao),b&&b.bind(),g&&g.dynamicDraw&&g.bind(),S&&S.bind()):this.freshBind(s,a,c,g,_,b,S)},eu.prototype.freshBind=function(o,s,a,c,g,_,b){var S,I=o.numAttributes,L=this.context,N=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=c,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=b;else{S=L.currentNumAttributes||0;for(var j=I;j<S;j++)N.disableVertexAttribArray(j)}s.enableAttributes(N,o);for(var q=0,X=a;q<X.length;q+=1)X[q].enableAttributes(N,o);_&&_.enableAttributes(N,o),b&&b.enableAttributes(N,o),s.bind(),s.setVertexAttribPointers(N,o,g);for(var K=0,re=a;K<re.length;K+=1){var H=re[K];H.bind(),H.setVertexAttribPointers(N,o,g)}_&&(_.bind(),_.setVertexAttribPointers(N,o,g)),c&&c.bind(),b&&(b.bind(),b.setVertexAttribPointers(N,o,g)),L.currentNumAttributes=I},eu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var vh=function(o,s,a,c,g,_){var b=o.gl;this.program=b.createProgram();for(var S=yh(a.staticAttributes),I=c?c.getBinderAttributes():[],L=S.concat(I),N=a.staticUniforms?yh(a.staticUniforms):[],j=c?c.getBinderUniforms():[],q=[],X=0,K=N.concat(j);X<K.length;X+=1){var re=K[X];q.indexOf(re)<0&&q.push(re)}var H=c?c.defines():[];_&&H.push("#define OVERDRAW_INSPECTOR;");var te=H.concat(os.fragmentSource,a.fragmentSource).join(`
`),le=H.concat(os.vertexSource,a.vertexSource).join(`
`),me=b.createShader(b.FRAGMENT_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(me,te),b.compileShader(me),b.attachShader(this.program,me);var Ce=b.createShader(b.VERTEX_SHADER);if(b.isContextLost())this.failedToCreate=!0;else{b.shaderSource(Ce,le),b.compileShader(Ce),b.attachShader(this.program,Ce),this.attributes={};var Ee={};this.numAttributes=L.length;for(var Ie=0;Ie<this.numAttributes;Ie++)L[Ie]&&(b.bindAttribLocation(this.program,Ie,L[Ie]),this.attributes[L[Ie]]=Ie);b.linkProgram(this.program),b.deleteShader(Ce),b.deleteShader(me);for(var Ne=0;Ne<q.length;Ne++){var We=q[Ne];if(We&&!Ee[We]){var Ke=b.getUniformLocation(this.program,We);Ke&&(Ee[We]=Ke)}}this.fixedUniforms=g(o,Ee),this.binderUniforms=c?c.getUniforms(o,Ee):[]}}};function _h(o,s,a){var c=1/zr(a,1,s.transform.tileZoom),g=Math.pow(2,a.tileID.overscaledZ),_=a.tileSize*Math.pow(2,s.transform.tileZoom)/g,b=_*(a.tileID.canonical.x+a.tileID.wrap*g),S=_*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[b>>16,S>>16],u_pixel_coord_lower:[65535&b,65535&S]}}vh.prototype.draw=function(o,s,a,c,g,_,b,S,I,L,N,j,q,X,K,re){var H,te=o.gl;if(!this.failedToCreate){for(var le in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(c),o.setColorMode(g),o.setCullFace(_),this.fixedUniforms)this.fixedUniforms[le].set(b[le]);X&&X.setUniforms(o,this.binderUniforms,j,{zoom:q});for(var me=(H={},H[te.LINES]=2,H[te.TRIANGLES]=3,H[te.LINE_STRIP]=1,H)[s],Ce=0,Ee=N.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce],Ne=Ie.vaos||(Ie.vaos={});(Ne[S]||(Ne[S]=new eu)).bind(o,this,I,X?X.getPaintVertexBuffers():[],L,Ie.vertexOffset,K,re),te.drawElements(s,Ie.primitiveLength*me,te.UNSIGNED_SHORT,Ie.primitiveOffset*me*2)}}};var xh=function(o,s,a,c){var g=s.style.light,_=g.properties.get("position"),b=[_.x,_.y,_.z],S=f.create$1();g.properties.get("anchor")==="viewport"&&f.fromRotation(S,-s.transform.angle),f.transformMat3(b,b,S);var I=g.properties.get("color");return{u_matrix:o,u_lightpos:b,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:c}},Aa=function(o,s,a,c,g,_,b){return f.extend(xh(o,s,a,c),_h(_,s,b),{u_height_factor:-Math.pow(2,g.overscaledZ)/b.tileSize/8})},Qo=function(o){return{u_matrix:o}},Ia=function(o,s,a,c){return f.extend(Qo(o),_h(a,s,c))},bh=function(o,s){return{u_matrix:o,u_world:s}},wh=function(o,s,a,c,g){return f.extend(Ia(o,s,a,c),{u_world:g})},Pc=function(o,s,a,c){var g,_,b=o.transform;if(c.paint.get("circle-pitch-alignment")==="map"){var S=zr(a,1,b.zoom);g=!0,_=[S,S]}else g=!1,_=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:f.browser.devicePixelRatio,u_extrude_scale:_}},ka=function(o,s,a){var c=zr(a,1,s.zoom),g=Math.pow(2,s.zoom-a.tileID.overscaledZ),_=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[s.pixelsToGLUnits[0]/(c*g),s.pixelsToGLUnits[1]/(c*g)],u_overscale_factor:_}},Eh=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},Pa=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},Ma=function(o){return{u_matrix:o}},Sh=function(o,s,a,c){return{u_matrix:o,u_extrude_scale:zr(s,1,a),u_intensity:c}},Ys=function(o,s,a){var c=o.transform;return{u_matrix:Th(o,s,a),u_ratio:1/zr(s,1,c.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Cr=function(o,s,a,c){return f.extend(Ys(o,s,a),{u_image:0,u_image_height:c})},tu=function(o,s,a,c){var g=o.transform,_=as(s,g);return{u_matrix:Th(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/zr(s,1,g.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_image:0,u_scale:[_,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},em=function(o,s,a,c,g){var _=o.lineAtlas,b=as(s,o.transform),S=a.layout.get("line-cap")==="round",I=_.getDash(c.from,S),L=_.getDash(c.to,S),N=I.width*g.fromScale,j=L.width*g.toScale;return f.extend(Ys(o,s,a),{u_patternscale_a:[b/N,-I.height/2],u_patternscale_b:[b/j,-L.height/2],u_sdfgamma:_.width/(256*Math.min(N,j)*f.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:L.y,u_mix:g.t})};function as(o,s){return 1/zr(o,1,s.tileZoom)}function Th(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var tm=function(o,s,a,c,g){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(b=g.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Ch(g.paint.get("raster-hue-rotate"))};var _,b};function Ch(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var ru,ss=function(o,s,a,c,g,_,b,S,I,L){var N=g.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:N.width/N.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:b,u_coord_matrix:S,u_is_text:+I,u_pitch_with_map:+c,u_texsize:L,u_texture:0}},Qs=function(o,s,a,c,g,_,b,S,I,L,N){var j=g.transform;return f.extend(ss(o,s,a,c,g,_,b,S,I,L),{u_gamma_scale:c?Math.cos(j._pitch)*j.cameraToCenterDistance:1,u_device_pixel_ratio:f.browser.devicePixelRatio,u_is_halo:+N})},nu=function(o,s,a,c,g,_,b,S,I,L){return f.extend(Qs(o,s,a,c,g,_,b,S,!0,I,!0),{u_texsize_icon:L,u_texture_icon:1})},el=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},ls=function(o,s,a,c,g,_){return f.extend(function(b,S,I,L){var N=I.imageManager.getPattern(b.from.toString()),j=I.imageManager.getPattern(b.to.toString()),q=I.imageManager.getPixelSize(),X=q.width,K=q.height,re=Math.pow(2,L.tileID.overscaledZ),H=L.tileSize*Math.pow(2,I.transform.tileZoom)/re,te=H*(L.tileID.canonical.x+L.tileID.wrap*re),le=H*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:j.tl,u_pattern_br_b:j.br,u_texsize:[X,K],u_mix:S.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:j.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/zr(L,1,I.transform.tileZoom),u_pixel_coord_upper:[te>>16,le>>16],u_pixel_coord_lower:[65535&te,65535&le]}}(c,_,a,g),{u_matrix:o,u_opacity:s})},Ah={fillExtrusion:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_lightpos:new f.Uniform3f(o,s.u_lightpos),u_lightintensity:new f.Uniform1f(o,s.u_lightintensity),u_lightcolor:new f.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new f.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new f.Uniform1f(o,s.u_height_factor),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade),u_opacity:new f.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_texsize:new f.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new f.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new f.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new f.UniformColor(o,s.u_color),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_overlay:new f.Uniform1i(o,s.u_overlay),u_overlay_scale:new f.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new f.Uniform1f(o,s.u_extrude_scale),u_intensity:new f.Uniform1f(o,s.u_intensity),u_matrix:new f.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_world:new f.Uniform2f(o,s.u_world),u_image:new f.Uniform1i(o,s.u_image),u_color_ramp:new f.Uniform1i(o,s.u_color_ramp),u_opacity:new f.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_latrange:new f.Uniform2f(o,s.u_latrange),u_light:new f.Uniform2f(o,s.u_light),u_shadow:new f.UniformColor(o,s.u_shadow),u_highlight:new f.UniformColor(o,s.u_highlight),u_accent:new f.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_image:new f.Uniform1i(o,s.u_image),u_dimension:new f.Uniform2f(o,s.u_dimension),u_zoom:new f.Uniform1f(o,s.u_zoom),u_unpack:new f.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_image:new f.Uniform1i(o,s.u_image),u_image_height:new f.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_texsize:new f.Uniform2f(o,s.u_texsize),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_image:new f.Uniform1i(o,s.u_image),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_scale:new f.Uniform3f(o,s.u_scale),u_fade:new f.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_ratio:new f.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new f.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new f.Uniform1f(o,s.u_sdfgamma),u_image:new f.Uniform1i(o,s.u_image),u_tex_y_a:new f.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new f.Uniform1f(o,s.u_tex_y_b),u_mix:new f.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new f.Uniform2f(o,s.u_tl_parent),u_scale_parent:new f.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new f.Uniform1f(o,s.u_buffer_scale),u_fade_t:new f.Uniform1f(o,s.u_fade_t),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image0:new f.Uniform1i(o,s.u_image0),u_image1:new f.Uniform1i(o,s.u_image1),u_brightness_low:new f.Uniform1f(o,s.u_brightness_low),u_brightness_high:new f.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new f.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new f.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new f.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texture:new f.Uniform1i(o,s.u_texture),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new f.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new f.Uniform1f(o,s.u_size_t),u_size:new f.Uniform1f(o,s.u_size),u_camera_to_center_distance:new f.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new f.Uniform1f(o,s.u_pitch),u_rotate_symbol:new f.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new f.Uniform1f(o,s.u_fade_change),u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new f.Uniform1i(o,s.u_is_text),u_pitch_with_map:new f.Uniform1i(o,s.u_pitch_with_map),u_texsize:new f.Uniform2f(o,s.u_texsize),u_texsize_icon:new f.Uniform2f(o,s.u_texsize_icon),u_texture:new f.Uniform1i(o,s.u_texture),u_texture_icon:new f.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new f.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_color:new f.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new f.UniformMatrix4f(o,s.u_matrix),u_opacity:new f.Uniform1f(o,s.u_opacity),u_image:new f.Uniform1i(o,s.u_image),u_pattern_tl_a:new f.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(o,s.u_pattern_br_b),u_texsize:new f.Uniform2f(o,s.u_texsize),u_mix:new f.Uniform1f(o,s.u_mix),u_pattern_size_a:new f.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new f.Uniform1f(o,s.u_scale_a),u_scale_b:new f.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(o,s.u_tile_units_to_pixels)}}};function us(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=o.useProgram("collisionBox"),N=[],j=0,q=0,X=0;X<c.length;X++){var K=c[X],re=s.getTile(K),H=re.getBucket(a);if(H){var te=K.posMatrix;g[0]===0&&g[1]===0||(te=o.translatePosMatrix(K.posMatrix,re,g,_));var le=b?H.textCollisionBox:H.iconCollisionBox,me=H.collisionCircleArray;if(me.length>0){var Ce=f.create(),Ee=te;f.mul(Ce,H.placementInvProjMatrix,o.transform.glCoordMatrix),f.mul(Ce,Ce,H.placementViewportMatrix),N.push({circleArray:me,circleOffset:q,transform:Ee,invTransform:Ce}),q=j+=me.length/4}le&&L.draw(S,I.LINES,Z.disabled,W.disabled,o.colorModeForRenderPass(),ce.disabled,ka(te,o.transform,re),a.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,null,o.transform.zoom,null,null,le.collisionVertexBuffer)}}if(b&&N.length){var Ie=o.useProgram("collisionCircle"),Ne=new f.StructArrayLayout2f1f2i16;Ne.resize(4*j),Ne._trim();for(var We=0,Ke=0,ut=N;Ke<ut.length;Ke+=1)for(var wt=ut[Ke],Ct=0;Ct<wt.circleArray.length/4;Ct++){var Tt=4*Ct,nr=wt.circleArray[Tt+0],pt=wt.circleArray[Tt+1],Lt=wt.circleArray[Tt+2],Ft=wt.circleArray[Tt+3];Ne.emplace(We++,nr,pt,Lt,Ft,0),Ne.emplace(We++,nr,pt,Lt,Ft,1),Ne.emplace(We++,nr,pt,Lt,Ft,2),Ne.emplace(We++,nr,pt,Lt,Ft,3)}(!ru||ru.length<2*j)&&(ru=function(Zr){var Vn=2*Zr,An=new f.StructArrayLayout3ui6;An.resize(Vn),An._trim();for(var Vr=0;Vr<Vn;Vr++){var Yr=6*Vr;An.uint16[Yr+0]=4*Vr+0,An.uint16[Yr+1]=4*Vr+1,An.uint16[Yr+2]=4*Vr+2,An.uint16[Yr+3]=4*Vr+2,An.uint16[Yr+4]=4*Vr+3,An.uint16[Yr+5]=4*Vr+0}return An}(j));for(var zt=S.createIndexBuffer(ru,!0),Mt=S.createVertexBuffer(Ne,f.collisionCircleLayout.members,!0),Bt=0,Pt=N;Bt<Pt.length;Bt+=1){var At=Pt[Bt],_n=Eh(At.transform,At.invTransform,o.transform);Ie.draw(S,I.TRIANGLES,Z.disabled,W.disabled,o.colorModeForRenderPass(),ce.disabled,_n,a.id,Mt,zt,f.SegmentVector.simpleSegment(0,2*At.circleOffset,At.circleArray.length,At.circleArray.length/2),null,o.transform.zoom,null,null,null)}Mt.destroy(),zt.destroy()}}var no=f.identity(new Float32Array(16));function Ih(o,s,a,c,g,_){var b=f.getAnchorAlignment(o),S=-(b.horizontalAlign-.5)*s,I=-(b.verticalAlign-.5)*a,L=f.evaluateVariableOffset(o,c);return new f.Point((S/g+L[0])*_,(I/g+L[1])*_)}function kh(o,s,a,c,g,_,b,S,I,L,N){var j=o.text.placedSymbolArray,q=o.text.dynamicLayoutVertexArray,X=o.icon.dynamicLayoutVertexArray,K={};q.clear();for(var re=0;re<j.length;re++){var H=j.get(re),te=H.hidden||!H.crossTileID||o.allowVerticalPlacement&&!H.placedOrientation?null:c[H.crossTileID];if(te){var le=new f.Point(H.anchorX,H.anchorY),me=Wt(le,a?S:b),Ce=cr(_.cameraToCenterDistance,me.signedDistanceFromCamera),Ee=g.evaluateSizeForFeature(o.textSizeData,L,H)*Ce/f.ONE_EM;a&&(Ee*=o.tilePixelRatio/I);for(var Ie=Ih(te.anchor,te.width,te.height,te.textOffset,te.textBoxScale,Ee),Ne=a?Wt(le.add(Ie),b).point:me.point.add(s?Ie.rotate(-_.angle):Ie),We=o.allowVerticalPlacement&&H.placedOrientation===f.WritingMode.vertical?Math.PI/2:0,Ke=0;Ke<H.numGlyphs;Ke++)f.addDynamicAttributes(q,Ne,We);N&&H.associatedIconIndex>=0&&(K[H.associatedIconIndex]={shiftedAnchor:Ne,angle:We})}else Wn(H.numGlyphs,q)}if(N){X.clear();for(var ut=o.icon.placedSymbolArray,wt=0;wt<ut.length;wt++){var Ct=ut.get(wt);if(Ct.hidden)Wn(Ct.numGlyphs,X);else{var Tt=K[wt];if(Tt)for(var nr=0;nr<Ct.numGlyphs;nr++)f.addDynamicAttributes(X,Tt.shiftedAnchor,Tt.angle);else Wn(Ct.numGlyphs,X)}}o.icon.dynamicLayoutVertexBuffer.updateData(X)}o.text.dynamicLayoutVertexBuffer.updateData(q)}function Ph(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function za(o,s,a,c,g,_,b,S,I,L,N,j){for(var q=o.context,X=q.gl,K=o.transform,re=S==="map",H=I==="map",te=re&&a.layout.get("symbol-placement")!=="point",le=re&&!H&&!te,me=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=!1,Ee=o.depthModeForSublayer(0,Z.ReadOnly),Ie=a.layout.get("text-variable-anchor"),Ne=[],We=0,Ke=c;We<Ke.length;We+=1){var ut=Ke[We],wt=s.getTile(ut),Ct=wt.getBucket(a);if(Ct){var Tt=g?Ct.text:Ct.icon;if(Tt&&Tt.segments.get().length){var nr=Tt.programConfigurations.get(a.id),pt=g||Ct.sdfIcons,Lt=g?Ct.textSizeData:Ct.iconSizeData,Ft=H||K.pitch!==0,zt=o.useProgram(Ph(pt,g,Ct),nr),Mt=f.evaluateSizeForZoom(Lt,K.zoom),Bt=void 0,Pt=[0,0],At=void 0,_n=void 0,Zr=null,Vn=void 0;if(g)At=wt.glyphAtlasTexture,_n=X.LINEAR,Bt=wt.glyphAtlasTexture.size,Ct.iconsInText&&(Pt=wt.imageAtlasTexture.size,Zr=wt.imageAtlasTexture,Vn=Ft||o.options.rotating||o.options.zooming||Lt.kind==="composite"||Lt.kind==="camera"?X.LINEAR:X.NEAREST);else{var An=a.layout.get("icon-size").constantOr(0)!==1||Ct.iconsNeedLinear;At=wt.imageAtlasTexture,_n=pt||o.options.rotating||o.options.zooming||An||Ft?X.LINEAR:X.NEAREST,Bt=wt.imageAtlasTexture.size}var Vr=zr(wt,1,o.transform.zoom),Yr=Xr(ut.posMatrix,H,re,o.transform,Vr),bi=_r(ut.posMatrix,H,re,o.transform,Vr),Qn=Ie&&Ct.hasTextData(),oa=a.layout.get("icon-text-fit")!=="none"&&Qn&&Ct.hasIconData();te&&Gs(Ct,ut.posMatrix,o,g,Yr,bi,H,L);var si=o.translatePosMatrix(ut.posMatrix,wt,_,b),lo=te||g&&Ie||oa?no:Yr,Zi=o.translatePosMatrix(bi,wt,_,b,!0),hl=pt&&a.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ms={program:zt,buffers:Tt,uniformValues:pt?Ct.iconsInText?nu(Lt.kind,Mt,le,H,o,si,lo,Zi,Bt,Pt):Qs(Lt.kind,Mt,le,H,o,si,lo,Zi,g,Bt,!0):ss(Lt.kind,Mt,le,H,o,si,lo,Zi,g,Bt),atlasTexture:At,atlasTextureIcon:Zr,atlasInterpolation:_n,atlasInterpolationIcon:Vn,isSDF:pt,hasHalo:hl};if(me&&Ct.canOverlap){Ce=!0;for(var aa=0,gs=Tt.segments.get();aa<gs.length;aa+=1){var fl=gs[aa];Ne.push({segments:new f.SegmentVector([fl]),sortKey:fl.sortKey,state:ms})}}else Ne.push({segments:Tt.segments,sortKey:0,state:ms})}}}Ce&&Ne.sort(function(sa,Fa){return sa.sortKey-Fa.sortKey});for(var Eo=0,dl=Ne;Eo<dl.length;Eo+=1){var So=dl[Eo],xn=So.state;if(q.activeTexture.set(X.TEXTURE0),xn.atlasTexture.bind(xn.atlasInterpolation,X.CLAMP_TO_EDGE),xn.atlasTextureIcon&&(q.activeTexture.set(X.TEXTURE1),xn.atlasTextureIcon&&xn.atlasTextureIcon.bind(xn.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),xn.isSDF){var Fo=xn.uniformValues;xn.hasHalo&&(Fo.u_is_halo=1,tl(xn.buffers,So.segments,a,o,xn.program,Ee,N,j,Fo)),Fo.u_is_halo=0}tl(xn.buffers,So.segments,a,o,xn.program,Ee,N,j,xn.uniformValues)}}function tl(o,s,a,c,g,_,b,S,I){var L=c.context;g.draw(L,L.gl.TRIANGLES,_,b,S,ce.disabled,I,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,c.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function iu(o,s,a,c,g,_,b){var S,I,L,N,j,q=o.context.gl,X=a.paint.get("fill-pattern"),K=X&&X.constantOr(1),re=a.getCrossfadeParameters();b?(I=K&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",S=q.LINES):(I=K?"fillPattern":"fill",S=q.TRIANGLES);for(var H=0,te=c;H<te.length;H+=1){var le=te[H],me=s.getTile(le);if(!K||me.patternsLoaded()){var Ce=me.getBucket(a);if(Ce){var Ee=Ce.programConfigurations.get(a.id),Ie=o.useProgram(I,Ee);K&&(o.context.activeTexture.set(q.TEXTURE0),me.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Ee.updatePaintBuffers(re));var Ne=X.constantOr(null);if(Ne&&me.imageAtlas){var We=me.imageAtlas,Ke=We.patternPositions[Ne.to.toString()],ut=We.patternPositions[Ne.from.toString()];Ke&&ut&&Ee.setConstantPatternPositions(Ke,ut)}var wt=o.translatePosMatrix(le.posMatrix,me,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(b){N=Ce.indexBuffer2,j=Ce.segments2;var Ct=[q.drawingBufferWidth,q.drawingBufferHeight];L=I==="fillOutlinePattern"&&K?wh(wt,o,re,me,Ct):bh(wt,Ct)}else N=Ce.indexBuffer,j=Ce.segments,L=K?Ia(wt,o,re,me):Qo(wt);Ie.draw(o.context,S,g,o.stencilModeForClipping(le),_,ce.disabled,L,a.id,Ce.layoutVertexBuffer,N,j,a.paint,o.transform.zoom,Ee)}}}}function Mc(o,s,a,c,g,_,b){for(var S=o.context,I=S.gl,L=a.paint.get("fill-extrusion-pattern"),N=L.constantOr(1),j=a.getCrossfadeParameters(),q=a.paint.get("fill-extrusion-opacity"),X=0,K=c;X<K.length;X+=1){var re=K[X],H=s.getTile(re),te=H.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me=o.useProgram(N?"fillExtrusionPattern":"fillExtrusion",le);N&&(o.context.activeTexture.set(I.TEXTURE0),H.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),le.updatePaintBuffers(j));var Ce=L.constantOr(null);if(Ce&&H.imageAtlas){var Ee=H.imageAtlas,Ie=Ee.patternPositions[Ce.to.toString()],Ne=Ee.patternPositions[Ce.from.toString()];Ie&&Ne&&le.setConstantPatternPositions(Ie,Ne)}var We=o.translatePosMatrix(re.posMatrix,H,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Ke=a.paint.get("fill-extrusion-vertical-gradient"),ut=N?Aa(We,o,Ke,q,re,j,H):xh(We,o,Ke,q);me.draw(S,S.gl.TRIANGLES,g,_,b,ce.backCCW,ut,a.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,a.paint,o.transform.zoom,le)}}}function ou(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.fbo;if(I){var L=o.useProgram("hillshade");b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get());var N=function(j,q,X){var K=X.paint.get("hillshade-shadow-color"),re=X.paint.get("hillshade-highlight-color"),H=X.paint.get("hillshade-accent-color"),te=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=j.transform.angle);var le,me,Ce,Ee=!j.options.moving;return{u_matrix:j.transform.calculatePosMatrix(q.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:(le=q.tileID,me=Math.pow(2,le.canonical.z),Ce=le.canonical.y,[new f.MercatorCoordinate(0,Ce/me).toLngLat().lat,new f.MercatorCoordinate(0,(Ce+1)/me).toLngLat().lat]),u_light:[X.paint.get("hillshade-exaggeration"),te],u_shadow:K,u_highlight:re,u_accent:H}}(o,s,a);L.draw(b,S.TRIANGLES,c,g,_,ce.disabled,N,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function rm(o,s,a,c,g,_){var b=o.context,S=b.gl,I=s.dem;if(I&&I.data){var L=I.dim,N=I.stride,j=I.getPixels();if(b.activeTexture.set(S.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(N),s.demTexture){var q=s.demTexture;q.update(j,{premultiply:!1}),q.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else s.demTexture=new f.Texture(b,j,S.RGBA,{premultiply:!1}),s.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);b.activeTexture.set(S.TEXTURE0);var X=s.fbo;if(!X){var K=new f.Texture(b,{width:L,height:L,data:null},S.RGBA);K.bind(S.LINEAR,S.CLAMP_TO_EDGE),(X=s.fbo=b.createFramebuffer(L,L,!0)).colorAttachment.set(K.texture)}b.bindFramebuffer.set(X.framebuffer),b.viewport.set([0,0,L,L]),o.useProgram("hillshadePrepare").draw(b,S.TRIANGLES,c,g,_,ce.disabled,function(re,H){var te=H.stride,le=f.create();return f.ortho(le,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(le,le,[0,-f.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[te,te],u_zoom:re.overscaledZ,u_unpack:H.getUnpackVector()}}(s.tileID,I),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function au(o,s,a,c,g){var _=c.paint.get("raster-fade-duration");if(_>0){var b=f.browser.now(),S=(b-o.timeAdded)/_,I=s?(b-s.timeAdded)/_:-1,L=a.getSource(),N=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),j=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(o.tileID.overscaledZ-N),q=j&&o.refreshedUponExpiration?1:f.clamp(j?S:1-I,0,1);return o.refreshedUponExpiration&&S>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}var zc=new f.Color(1,0,0,1),Mh=new f.Color(0,1,0,1),zh=new f.Color(0,0,1,1),su=new f.Color(1,0,1,1),Lc=new f.Color(0,1,1,1);function Rc(o,s,a,c){rl(o,0,s+a/2,o.transform.width,a,c)}function Oc(o,s,a,c){rl(o,s-a/2,0,a,o.transform.height,c)}function rl(o,s,a,c,g,_){var b=o.context,S=b.gl;S.enable(S.SCISSOR_TEST),S.scissor(s*f.browser.devicePixelRatio,a*f.browser.devicePixelRatio,c*f.browser.devicePixelRatio,g*f.browser.devicePixelRatio),b.clear({color:_}),S.disable(S.SCISSOR_TEST)}function Lh(o,s,a){var c=o.context,g=c.gl,_=a.posMatrix,b=o.useProgram("debug"),S=Z.disabled,I=W.disabled,L=o.colorModeForRenderPass();c.activeTexture.set(g.TEXTURE0),o.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),b.draw(c,g.LINE_STRIP,S,I,L,ce.disabled,Pa(_,f.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var N=s.getTileByID(a.key).latestRawTileData,j=Math.floor((N&&N.byteLength||0)/1024),q=s.getTile(a).tileSize,X=512/Math.min(q,512)*(a.overscaledZ/o.transform.zoom)*.5,K=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(K+=" => "+a.overscaledZ),function(re,H){re.initDebugOverlayCanvas();var te=re.debugOverlayCanvas,le=re.context.gl,me=re.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,te.width,te.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(H,5,5),me.strokeText(H,5,5),re.debugOverlayTexture.update(te),re.debugOverlayTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE)}(o,K+" "+j+"kb"),b.draw(c,g.TRIANGLES,S,I,ae.alphaBlended,ce.disabled,Pa(_,f.Color.transparent,X),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var La={symbol:function(o,s,a,c,g){if(o.renderPass==="translucent"){var _=W.disabled,b=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(S,I,L,N,j,q,X){for(var K=I.transform,re=j==="map",H=q==="map",te=0,le=S;te<le.length;te+=1){var me=le[te],Ce=N.getTile(me),Ee=Ce.getBucket(L);if(Ee&&Ee.text&&Ee.text.segments.get().length){var Ie=f.evaluateSizeForZoom(Ee.textSizeData,K.zoom),Ne=zr(Ce,1,I.transform.zoom),We=Xr(me.posMatrix,H,re,I.transform,Ne),Ke=L.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ie){var ut=Math.pow(2,K.zoom-Ce.tileID.overscaledZ);kh(Ee,re,H,X,f.symbolSize,K,We,me.posMatrix,ut,Ie,Ke)}}}}(c,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),g),a.paint.get("icon-opacity").constantOr(1)!==0&&za(o,s,a,c,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),_,b),a.paint.get("text-opacity").constantOr(1)!==0&&za(o,s,a,c,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),_,b),s.map.showCollisionBoxes&&(us(o,s,a,c,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),us(o,s,a,c,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("circle-opacity"),_=a.paint.get("circle-stroke-width"),b=a.paint.get("circle-stroke-opacity"),S=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||_.constantOr(1)!==0&&b.constantOr(1)!==0){for(var I=o.context,L=I.gl,N=o.depthModeForSublayer(0,Z.ReadOnly),j=W.disabled,q=o.colorModeForRenderPass(),X=[],K=0;K<c.length;K++){var re=c[K],H=s.getTile(re),te=H.getBucket(a);if(te){var le=te.programConfigurations.get(a.id),me={programConfiguration:le,program:o.useProgram("circle",le),layoutVertexBuffer:te.layoutVertexBuffer,indexBuffer:te.indexBuffer,uniformValues:Pc(o,re,H,a)};if(S)for(var Ce=0,Ee=te.segments.get();Ce<Ee.length;Ce+=1){var Ie=Ee[Ce];X.push({segments:new f.SegmentVector([Ie]),sortKey:Ie.sortKey,state:me})}else X.push({segments:te.segments,sortKey:0,state:me})}}S&&X.sort(function(wt,Ct){return wt.sortKey-Ct.sortKey});for(var Ne=0,We=X;Ne<We.length;Ne+=1){var Ke=We[Ne],ut=Ke.state;ut.program.draw(I,L.TRIANGLES,N,j,q,ce.disabled,ut.uniformValues,a.id,ut.layoutVertexBuffer,ut.indexBuffer,Ke.segments,a.paint,o.transform.zoom,ut.programConfiguration)}}}},heatmap:function(o,s,a,c){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var g=o.context,_=g.gl,b=W.disabled,S=new ae([_.ONE,_.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(X,K,re){var H=X.gl;X.activeTexture.set(H.TEXTURE1),X.viewport.set([0,0,K.width/4,K.height/4]);var te=re.heatmapFbo;if(te)H.bindTexture(H.TEXTURE_2D,te.colorAttachment.get()),X.bindFramebuffer.set(te.framebuffer);else{var le=H.createTexture();H.bindTexture(H.TEXTURE_2D,le),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.LINEAR),te=re.heatmapFbo=X.createFramebuffer(K.width/4,K.height/4,!1),function(me,Ce,Ee,Ie){var Ne=me.gl;Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Ce.width/4,Ce.height/4,0,Ne.RGBA,me.extRenderToTextureHalfFloat?me.extTextureHalfFloat.HALF_FLOAT_OES:Ne.UNSIGNED_BYTE,null),Ie.colorAttachment.set(Ee)}(X,K,le,te)}})(g,o,a),g.clear({color:f.Color.transparent});for(var I=0;I<c.length;I++){var L=c[I];if(!s.hasRenderableParent(L)){var N=s.getTile(L),j=N.getBucket(a);if(j){var q=j.programConfigurations.get(a.id);o.useProgram("heatmap",q).draw(g,_.TRIANGLES,Z.disabled,b,S,ce.disabled,Sh(L.posMatrix,N,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,a.paint,o.transform.zoom,q)}}}g.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(X,K){var re=X.context,H=re.gl,te=K.heatmapFbo;if(te){re.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,te.colorAttachment.get()),re.activeTexture.set(H.TEXTURE1);var le=K.colorRampTexture;le||(le=K.colorRampTexture=new f.Texture(re,K.colorRamp,H.RGBA)),le.bind(H.LINEAR,H.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(re,H.TRIANGLES,Z.disabled,W.disabled,X.colorModeForRenderPass(),ce.disabled,function(me,Ce,Ee,Ie){var Ne=f.create();f.ortho(Ne,0,me.width,me.height,0,0,1);var We=me.context.gl;return{u_matrix:Ne,u_world:[We.drawingBufferWidth,We.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}}(X,K),K.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,K.paint,X.transform.zoom)}}(o,a))},line:function(o,s,a,c){if(o.renderPass==="translucent"){var g=a.paint.get("line-opacity"),_=a.paint.get("line-width");if(g.constantOr(1)!==0&&_.constantOr(1)!==0)for(var b=o.depthModeForSublayer(0,Z.ReadOnly),S=o.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),L=a.paint.get("line-pattern"),N=L.constantOr(1),j=a.paint.get("line-gradient"),q=a.getCrossfadeParameters(),X=N?"linePattern":I?"lineSDF":j?"lineGradient":"line",K=o.context,re=K.gl,H=!0,te=0,le=c;te<le.length;te+=1){var me=le[te],Ce=s.getTile(me);if(!N||Ce.patternsLoaded()){var Ee=Ce.getBucket(a);if(Ee){var Ie=Ee.programConfigurations.get(a.id),Ne=o.context.program.get(),We=o.useProgram(X,Ie),Ke=H||We.program!==Ne,ut=L.constantOr(null);if(ut&&Ce.imageAtlas){var wt=Ce.imageAtlas,Ct=wt.patternPositions[ut.to.toString()],Tt=wt.patternPositions[ut.from.toString()];Ct&&Tt&&Ie.setConstantPatternPositions(Ct,Tt)}var nr=N?tu(o,Ce,a,q):I?em(o,Ce,a,I,q):j?Cr(o,Ce,a,Ee.lineClipsArray.length):Ys(o,Ce,a);if(N)K.activeTexture.set(re.TEXTURE0),Ce.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),Ie.updatePaintBuffers(q);else if(I&&(Ke||o.lineAtlas.dirty))K.activeTexture.set(re.TEXTURE0),o.lineAtlas.bind(K);else if(j){var pt=Ee.gradients[a.id],Lt=pt.texture;if(a.gradientVersion!==pt.version){var Ft=256;if(a.stepInterpolant){var zt=s.getSource().maxzoom,Mt=me.canonical.z===zt?Math.ceil(1<<o.transform.maxZoom-me.canonical.z):1;Ft=f.clamp(f.nextPowerOfTwo(Ee.maxLineLength/f.EXTENT*1024*Mt),256,K.maxTextureSize)}pt.gradient=f.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:pt.gradient||void 0,clips:Ee.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new f.Texture(K,pt.gradient,re.RGBA),pt.version=a.gradientVersion,Lt=pt.texture}K.activeTexture.set(re.TEXTURE0),Lt.bind(a.stepInterpolant?re.NEAREST:re.LINEAR,re.CLAMP_TO_EDGE)}We.draw(K,re.TRIANGLES,b,o.stencilModeForClipping(me),S,ce.disabled,nr,a.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,a.paint,o.transform.zoom,Ie,Ee.layoutVertexBuffer2),H=!1}}}}},fill:function(o,s,a,c){var g=a.paint.get("fill-color"),_=a.paint.get("fill-opacity");if(_.constantOr(1)!==0){var b=o.colorModeForRenderPass(),S=a.paint.get("fill-pattern"),I=o.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(f.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===I){var L=o.depthModeForSublayer(1,o.renderPass==="opaque"?Z.ReadWrite:Z.ReadOnly);iu(o,s,a,c,L,b,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var N=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,Z.ReadOnly);iu(o,s,a,c,N,b,!0)}}},"fill-extrusion":function(o,s,a,c){var g=a.paint.get("fill-extrusion-opacity");if(g!==0&&o.renderPass==="translucent"){var _=new Z(o.context.gl.LEQUAL,Z.ReadWrite,o.depthRangeFor3D);if(g!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Mc(o,s,a,c,_,W.disabled,ae.disabled),Mc(o,s,a,c,_,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var b=o.colorModeForRenderPass();Mc(o,s,a,c,_,W.disabled,b)}}},hillshade:function(o,s,a,c){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var g=o.context,_=o.depthModeForSublayer(0,Z.ReadOnly),b=o.colorModeForRenderPass(),S=o.renderPass==="translucent"?o.stencilConfigForOverlap(c):[{},c],I=S[0],L=0,N=S[1];L<N.length;L+=1){var j=N[L],q=s.getTile(j);q.needsHillshadePrepare&&o.renderPass==="offscreen"?rm(o,q,a,_,W.disabled,b):o.renderPass==="translucent"&&ou(o,q,a,_,I[j.overscaledZ],b)}g.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,c){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&c.length)for(var g=o.context,_=g.gl,b=s.getSource(),S=o.useProgram("raster"),I=o.colorModeForRenderPass(),L=b instanceof Te?[{},c]:o.stencilConfigForOverlap(c),N=L[0],j=L[1],q=j[j.length-1].overscaledZ,X=!o.options.moving,K=0,re=j;K<re.length;K+=1){var H=re[K],te=o.depthModeForSublayer(H.overscaledZ-q,a.paint.get("raster-opacity")===1?Z.ReadWrite:Z.ReadOnly,_.LESS),le=s.getTile(H),me=o.transform.calculatePosMatrix(H.toUnwrapped(),X);le.registerFadeDuration(a.paint.get("raster-fade-duration"));var Ce=s.findLoadedParent(H,0),Ee=au(le,Ce,s,a,o.transform),Ie=void 0,Ne=void 0,We=a.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;g.activeTexture.set(_.TEXTURE0),le.texture.bind(We,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(_.TEXTURE1),Ce?(Ce.texture.bind(We,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,Ce.tileID.overscaledZ-le.tileID.overscaledZ),Ne=[le.tileID.canonical.x*Ie%1,le.tileID.canonical.y*Ie%1]):le.texture.bind(We,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);var Ke=tm(me,Ne||[0,0],Ie||1,Ee,a);b instanceof Te?S.draw(g,_.TRIANGLES,te,W.disabled,I,ce.disabled,Ke,a.id,b.boundsBuffer,o.quadTriangleIndexBuffer,b.boundsSegments):S.draw(g,_.TRIANGLES,te,N[H.overscaledZ],I,ce.disabled,Ke,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var c=a.paint.get("background-color"),g=a.paint.get("background-opacity");if(g!==0){var _=o.context,b=_.gl,S=o.transform,I=S.tileSize,L=a.paint.get("background-pattern");if(!o.isPatternMissing(L)){var N=!L&&c.a===1&&g===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===N){var j=W.disabled,q=o.depthModeForSublayer(0,N==="opaque"?Z.ReadWrite:Z.ReadOnly),X=o.colorModeForRenderPass(),K=o.useProgram(L?"backgroundPattern":"background"),re=S.coveringTiles({tileSize:I});L&&(_.activeTexture.set(b.TEXTURE0),o.imageManager.bind(o.context));for(var H=a.getCrossfadeParameters(),te=0,le=re;te<le.length;te+=1){var me=le[te],Ce=o.transform.calculatePosMatrix(me.toUnwrapped()),Ee=L?ls(Ce,g,o,L,{tileID:me,tileSize:I},H):el(Ce,g,c);K.draw(_,b.TRIANGLES,q,j,X,ce.disabled,Ee,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var c=0;c<a.length;c++)Lh(o,s,a[c])},custom:function(o,s,a){var c=o.context,g=a.implementation;if(o.renderPass==="offscreen"){var _=g.prerender;_&&(o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),_.call(g,c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),c.setColorMode(o.colorModeForRenderPass()),c.setStencilMode(W.disabled);var b=g.renderingMode==="3d"?new Z(o.context.gl.LEQUAL,Z.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,Z.ReadOnly);c.setDepthMode(b),g.render(c.gl,o.transform.customLayerMatrix()),c.setDirty(),o.setBaseState(),c.bindFramebuffer.set(null)}}},Lr=function(o,s){this.context=new V(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Go,this.gpuTimers={}};Lr.prototype.resize=function(o,s){if(this.width=o*f.browser.devicePixelRatio,this.height=s*f.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,c=this.style._order;a<c.length;a+=1)this.style._layers[c[a]].resize()},Lr.prototype.setup=function(){var o=this.context,s=new f.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(f.EXTENT,0),s.emplaceBack(0,f.EXTENT),s.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,nn.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);var a=new f.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(f.EXTENT,0),a.emplaceBack(0,f.EXTENT),a.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=o.createVertexBuffer(a,nn.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);var c=new f.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(f.EXTENT,0,f.EXTENT,0),c.emplaceBack(0,f.EXTENT,0,f.EXTENT),c.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(c,Je.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);var g=new f.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(g,nn.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);var _=new f.StructArrayLayout1ui2;_.emplaceBack(0),_.emplaceBack(1),_.emplaceBack(3),_.emplaceBack(2),_.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(_);var b=new f.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(b),this.emptyTexture=new f.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var S=this.context.gl;this.stencilClearMode=new W({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)},Lr.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=f.create();f.ortho(a,0,this.width,this.height,0,0,1),f.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,Z.disabled,this.stencilClearMode,ae.disabled,ce.disabled,Ma(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Lr.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,c=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(ae.disabled),a.setDepthMode(Z.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var _=0,b=s;_<b.length;_+=1){var S=b[_],I=this._tileClippingMaskIDs[S.key]=this.nextStencilID++;g.draw(a,c.TRIANGLES,Z.disabled,new W({func:c.ALWAYS,mask:0},I,255,c.KEEP,c.KEEP,c.REPLACE),ae.disabled,ce.disabled,Ma(S.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Lr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new W({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new W({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},Lr.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,c=o.sort(function(I,L){return L.overscaledZ-I.overscaledZ}),g=c[c.length-1].overscaledZ,_=c[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();for(var b={},S=0;S<_;S++)b[S+g]=new W({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=_,[b,c]}return[(s={},s[g]=W.disabled,s),c]},Lr.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ae([o.CONSTANT_COLOR,o.ONE],new f.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ae.unblended:ae.alphaBlended},Lr.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return Z.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Z(a||this.context.gl.LEQUAL,s,[c,c])},Lr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Lr.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(f.browser.now()),this.imageManager.beginFrame();var c=this.style._order,g=this.style.sourceCaches;for(var _ in g){var b=g[_];b.used&&b.prepare(this.context)}var S,I,L={},N={},j={};for(var q in g){var X=g[q];L[q]=X.getVisibleCoordinates(),N[q]=L[q].slice().reverse(),j[q]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var K=0;K<c.length;K++)if(this.style._layers[c[K]].is3D()){this.opaquePassCutoff=K;break}this.renderPass="offscreen";for(var re=0,H=c;re<H.length;re+=1){var te=this.style._layers[H[re]];if(te.hasOffscreenPass()&&!te.isHidden(this.transform.zoom)){var le=N[te.source];(te.type==="custom"||le.length)&&this.renderLayer(this,g[te.source],te,le)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var me=this.style._layers[c[this.currentLayer]],Ce=g[me.source],Ee=L[me.source];this._renderTileClippingMasks(me,Ee),this.renderLayer(this,Ce,me,Ee)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var Ie=this.style._layers[c[this.currentLayer]],Ne=g[Ie.source],We=(Ie.type==="symbol"?j:N)[Ie.source];this._renderTileClippingMasks(Ie,L[Ie.source]),this.renderLayer(this,Ne,Ie,We)}this.options.showTileBoundaries&&(f.values(this.style._layers).forEach(function(Ke){Ke.source&&!Ke.isHidden(a.transform.zoom)&&(Ke.source!==(I&&I.id)&&(I=a.style.sourceCaches[Ke.source]),(!S||S.getSource().maxzoom<I.getSource().maxzoom)&&(S=I))}),S&&La.debug(this,S,S.getVisibleCoordinates())),this.options.showPadding&&function(Ke){var ut=Ke.transform.padding;Rc(Ke,Ke.transform.height-(ut.top||0),3,zc),Rc(Ke,ut.bottom||0,3,Mh),Oc(Ke,ut.left||0,3,zh),Oc(Ke,Ke.transform.width-(ut.right||0),3,su);var wt=Ke.transform.centerPoint;(function(Ct,Tt,nr,pt){rl(Ct,Tt-1,nr-10,2,20,pt),rl(Ct,Tt-10,nr-1,20,2,pt)})(Ke,wt.x,Ke.transform.height-wt.y,Lc)}(this),this.context.setDefault()},Lr.prototype.renderLayer=function(o,s,a,c){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||c.length)&&(this.id=a.id,this.gpuTimingStart(a),La[a.type](o,s,a,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},Lr.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},Lr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},Lr.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},Lr.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var c=o[a],g=this.context.extTimerQuery,_=g.getQueryObjectEXT(c.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(c.query),s[a]=_}return s},Lr.prototype.translatePosMatrix=function(o,s,a,c,g){if(!a[0]&&!a[1])return o;var _=g?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(_){var b=Math.sin(_),S=Math.cos(_);a=[a[0]*S-a[1]*b,a[0]*b+a[1]*S]}var I=[g?a[0]:zr(s,a[0],this.transform.zoom),g?a[1]:zr(s,a[1],this.transform.zoom),0],L=new Float32Array(16);return f.translate(L,o,I),L},Lr.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},Lr.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},Lr.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},Lr.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new vh(this.context,o,Qd[o],s,Ah[o],this._showOverdrawInspector)),this.cache[a]},Lr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Lr.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},Lr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Lr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var lu=function(o,s){this.points=o,this.planes=s};lu.fromInvProjectionMatrix=function(o,s,a){var c=Math.pow(2,a),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(b){return f.transformMat4([],b,o)}).map(function(b){return f.scale$1([],b,1/b[3]/s*c)}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(b){var S=f.sub([],g[b[0]],g[b[1]]),I=f.sub([],g[b[2]],g[b[1]]),L=f.normalize([],f.cross([],S,I)),N=-f.dot(L,g[b[1]]);return L.concat(N)});return new lu(g,_)};var Ra=function(o,s){this.min=o,this.max=s,this.center=f.scale$2([],f.add([],this.min,this.max),.5)};Ra.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=f.clone$2(this.min),c=f.clone$2(this.max),g=0;g<s.length;g++)a[g]=s[g]?this.min[g]:this.center[g],c[g]=s[g]?this.center[g]:this.max[g];return c[2]=this.max[2],new Ra(a,c)},Ra.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},Ra.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},Ra.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,c=0;c<o.planes.length;c++){for(var g=o.planes[c],_=0,b=0;b<s.length;b++)_+=f.dot$1(g,s[b])>=0;if(_===0)return 0;_!==s.length&&(a=!1)}if(a)return 2;for(var S=0;S<3;S++){for(var I=Number.MAX_VALUE,L=-Number.MAX_VALUE,N=0;N<o.points.length;N++){var j=o.points[N][S]-this.min[S];I=Math.min(I,j),L=Math.max(L,j)}if(L<0||I>this.max[S]-this.min[S])return 0}return 1};var ea=function(o,s,a,c){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),c===void 0&&(c=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=c};ea.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=f.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=f.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=f.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=f.number(o.right,s.right,a)),this},ea.prototype.getCenter=function(o,s){var a=f.clamp((this.left+o-this.right)/2,0,o),c=f.clamp((this.top+s-this.bottom)/2,0,s);return new f.Point(a,c)},ea.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},ea.prototype.clone=function(){return new ea(this.top,this.bottom,this.left,this.right)},ea.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jt=function(o,s,a,c,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a??0,this._maxPitch=c??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ea,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ar={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jt.prototype.clone=function(){var o=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},Ar.minZoom.get=function(){return this._minZoom},Ar.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},Ar.maxZoom.get=function(){return this._maxZoom},Ar.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},Ar.minPitch.get=function(){return this._minPitch},Ar.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},Ar.maxPitch.get=function(){return this._maxPitch},Ar.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},Ar.renderWorldCopies.get=function(){return this._renderWorldCopies},Ar.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},Ar.worldSize.get=function(){return this.tileSize*this.scale},Ar.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ar.size.get=function(){return new f.Point(this.width,this.height)},Ar.bearing.get=function(){return-this.angle/Math.PI*180},Ar.bearing.set=function(o){var s=-f.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=f.create$2(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ar.pitch.get=function(){return this._pitch/Math.PI*180},Ar.pitch.set=function(o){var s=f.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},Ar.fov.get=function(){return this._fov/Math.PI*180},Ar.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},Ar.zoom.get=function(){return this._zoom},Ar.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},Ar.center.get=function(){return this._center},Ar.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},Ar.padding.get=function(){return this._edgeInsets.toJSON()},Ar.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},Ar.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jt.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},Jt.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},Jt.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},Jt.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new f.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new f.Point(0,0)),c=this.pointCoordinate(new f.Point(this.width,0)),g=this.pointCoordinate(new f.Point(this.width,this.height)),_=this.pointCoordinate(new f.Point(0,this.height)),b=Math.floor(Math.min(a.x,c.x,g.x,_.x)),S=Math.floor(Math.max(a.x,c.x,g.x,_.x)),I=b-1;I<=S+1;I++)I!==0&&s.push(new f.UnwrappedTileID(I,o));return s},Jt.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var c=f.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,s),_=[g*c.x,g*c.y,0],b=lu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),S=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(S=s);var I=function(Ke){return{aabb:new Ra([Ke*g,0,0],[(Ke+1)*g,g,0]),zoom:0,x:0,y:0,wrap:Ke,fullyVisible:!1}},L=[],N=[],j=s,q=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var X=1;X<=3;X++)L.push(I(-X)),L.push(I(X));for(L.push(I(0));L.length>0;){var K=L.pop(),re=K.x,H=K.y,te=K.fullyVisible;if(!te){var le=K.aabb.intersects(b);if(le===0)continue;te=le===2}var me=K.aabb.distanceX(_),Ce=K.aabb.distanceY(_),Ee=Math.max(Math.abs(me),Math.abs(Ce));if(K.zoom===j||Ee>3+(1<<j-K.zoom)-2&&K.zoom>=S)N.push({tileID:new f.OverscaledTileID(K.zoom===j?q:K.zoom,K.wrap,K.zoom,re,H),distanceSq:f.sqrLen([_[0]-.5-re,_[1]-.5-H])});else for(var Ie=0;Ie<4;Ie++){var Ne=(re<<1)+Ie%2,We=(H<<1)+(Ie>>1);L.push({aabb:K.aabb.quadrant(Ie),zoom:K.zoom+1,x:Ne,y:We,wrap:K.wrap,fullyVisible:te})}}return N.sort(function(Ke,ut){return Ke.distanceSq-ut.distanceSq}).map(function(Ke){return Ke.tileID})},Jt.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},Ar.unmodified.get=function(){return this._unmodified},Jt.prototype.zoomScale=function(o){return Math.pow(2,o)},Jt.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},Jt.prototype.project=function(o){var s=f.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.Point(f.mercatorXfromLng(o.lng)*this.worldSize,f.mercatorYfromLat(s)*this.worldSize)},Jt.prototype.unproject=function(o){return new f.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},Ar.point.get=function(){return this.project(this.center)},Jt.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),c=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(o),_=new f.MercatorCoordinate(g.x-(a.x-c.x),g.y-(a.y-c.y));this.center=this.coordinateLocation(_),this._renderWorldCopies&&(this.center=this.center.wrap())},Jt.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},Jt.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},Jt.prototype.locationCoordinate=function(o){return f.MercatorCoordinate.fromLngLat(o)},Jt.prototype.coordinateLocation=function(o){return o.toLngLat()},Jt.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];f.transformMat4(s,s,this.pixelMatrixInverse),f.transformMat4(a,a,this.pixelMatrixInverse);var c=s[3],g=a[3],_=s[1]/c,b=a[1]/g,S=s[2]/c,I=a[2]/g,L=(0-S)/(I-S);return new f.MercatorCoordinate(f.number(s[0]/c,a[0]/g,L)/this.worldSize,f.number(_,b,L)/this.worldSize)},Jt.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix),new f.Point(s[0]/s[3],s[1]/s[3])},Jt.prototype.getBounds=function(){return new f.LngLatBounds().extend(this.pointLocation(new f.Point(0,0))).extend(this.pointLocation(new f.Point(this.width,0))).extend(this.pointLocation(new f.Point(this.width,this.height))).extend(this.pointLocation(new f.Point(0,this.height)))},Jt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jt.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jt.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,c=s?this._alignedPosMatrixCache:this._posMatrixCache;if(c[a])return c[a];var g=o.canonical,_=this.worldSize/this.zoomScale(g.z),b=g.x+Math.pow(2,g.z)*o.wrap,S=f.identity(new Float64Array(16));return f.translate(S,S,[b*_,g.y*_,0]),f.scale(S,S,[_/f.EXTENT,_/f.EXTENT,1]),f.multiply(S,s?this.alignedProjMatrix:this.projMatrix,S),c[a]=new Float32Array(S),c[a]},Jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,c,g=-90,_=90,b=-180,S=180,I=this.size,L=this._unmodified;if(this.latRange){var N=this.latRange;g=f.mercatorYfromLat(N[1])*this.worldSize,o=(_=f.mercatorYfromLat(N[0])*this.worldSize)-g<I.y?I.y/(_-g):0}if(this.lngRange){var j=this.lngRange;b=f.mercatorXfromLng(j[0])*this.worldSize,s=(S=f.mercatorXfromLng(j[1])*this.worldSize)-b<I.x?I.x/(S-b):0}var q=this.point,X=Math.max(s||0,o||0);if(X)return this.center=this.unproject(new f.Point(s?(S+b)/2:q.x,o?(_+g)/2:q.y)),this.zoom+=this.scaleZoom(X),this._unmodified=L,void(this._constraining=!1);if(this.latRange){var K=q.y,re=I.y/2;K-re<g&&(c=g+re),K+re>_&&(c=_-re)}if(this.lngRange){var H=q.x,te=I.x/2;H-te<b&&(a=b+te),H+te>S&&(a=S-te)}a===void 0&&c===void 0||(this.center=this.unproject(new f.Point(a!==void 0?a:q.x,c!==void 0?c:q.y))),this._unmodified=L,this._constraining=!1}},Jt.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),c=Math.sin(a)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-s-a,.01,Math.PI-.01)),g=this.point,_=g.x,b=g.y,S=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),I=this.height/50,L=new Float64Array(16);f.perspective(L,this._fov,this.width/this.height,I,S),L[8]=2*-o.x/this.width,L[9]=2*o.y/this.height,f.scale(L,L,[1,-1,1]),f.translate(L,L,[0,0,-this.cameraToCenterDistance]),f.rotateX(L,L,this._pitch),f.rotateZ(L,L,this.angle),f.translate(L,L,[-_,-b,0]),this.mercatorMatrix=f.scale([],L,[this.worldSize,this.worldSize,this.worldSize]),f.scale(L,L,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=L,this.invProjMatrix=f.invert([],this.projMatrix);var N=this.width%2/2,j=this.height%2/2,q=Math.cos(this.angle),X=Math.sin(this.angle),K=_-Math.round(_)+q*N+X*j,re=b-Math.round(b)+q*j+X*N,H=new Float64Array(L);if(f.translate(H,H,[K>.5?K-1:K,re>.5?re-1:re,0]),this.alignedProjMatrix=H,L=f.create(),f.scale(L,L,[this.width/2,-this.height/2,1]),f.translate(L,L,[1,-1,0]),this.labelPlaneMatrix=L,L=f.create(),f.scale(L,L,[1,-1,1]),f.translate(L,L,[-1,-1,0]),f.scale(L,L,[2/this.width,2/this.height,1]),this.glCoordMatrix=L,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(L=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=L,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new f.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return f.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jt.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.Point(0,o))},Jt.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,c=s.y,g=s.x,_=s.y,b=0,S=o;b<S.length;b+=1){var I=S[b];a=Math.min(a,I.x),c=Math.min(c,I.y),g=Math.max(g,I.x),_=Math.max(_,I.y)}return[new f.Point(a,c),new f.Point(g,c),new f.Point(g,_),new f.Point(a,_),new f.Point(a,c)]},Object.defineProperties(Jt.prototype,Ar);var Mi=function(o){var s,a,c,g;this._hashName=o&&encodeURIComponent(o),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,c=null,g=function(){c=null,a&&(s(),c=setTimeout(g,300),a=!1)},function(){return a=!0,c||g(),c})};Mi.prototype.addTo=function(o){return this._map=o,f.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mi.prototype.remove=function(){return f.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mi.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,c=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,c),_=Math.round(s.lng*g)/g,b=Math.round(s.lat*g)/g,S=this._map.getBearing(),I=this._map.getPitch(),L="";if(L+=o?"/"+_+"/"+b+"/"+a:a+"/"+b+"/"+_,(S||I)&&(L+="/"+Math.round(10*S)/10),I&&(L+="/"+Math.round(I)),this._hashName){var N=this._hashName,j=!1,q=f.window.location.hash.slice(1).split("&").map(function(X){var K=X.split("=")[0];return K===N?(j=!0,K+"="+L):X}).filter(function(X){return X});return j||q.push(N+"="+L),"#"+q.join("&")}return"#"+L},Mi.prototype._getCurrentHash=function(){var o,s=this,a=f.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===s._hashName&&(o=c)}),(o&&o[1]||"").split("/")):a.split("/")},Mi.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},Mi.prototype._updateHashUnthrottled=function(){var o=f.window.location.href.replace(/(#.+)?$/,this.getHashString());try{f.window.history.replaceState(f.window.history.state,null,o)}catch{}};var nl={linearity:.3,easing:f.bezier(0,0,.3,1)},cs=f.extend({deceleration:2500,maxSpeed:1400},nl),il=f.extend({deceleration:20,maxSpeed:1400},nl),nm=f.extend({deceleration:1e3,maxSpeed:360},nl),im=f.extend({deceleration:1e3,maxSpeed:90},nl),ol=function(o){this._map=o,this.clear()};function al(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function Oo(o,s,a){var c=a.maxSpeed,g=a.linearity,_=a.deceleration,b=f.clamp(o*g/(s/1e3),-c,c),S=Math.abs(b)/(_*g);return{easing:a.easing,duration:1e3*S,amount:b*(S/2)}}ol.prototype.clear=function(){this._inertiaBuffer=[]},ol.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.browser.now(),settings:o})},ol.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=f.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},ol.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new f.Point(0,0),pinchAround:void 0,around:void 0},a=0,c=this._inertiaBuffer;a<c.length;a+=1){var g=c[a].settings;s.zoom+=g.zoomDelta||0,s.bearing+=g.bearingDelta||0,s.pitch+=g.pitchDelta||0,g.panDelta&&s.pan._add(g.panDelta),g.around&&(s.around=g.around),g.pinchAround&&(s.pinchAround=g.pinchAround)}var _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(s.pan.mag()){var S=Oo(s.pan.mag(),_,f.extend({},cs,o||{}));b.offset=s.pan.mult(S.amount/s.pan.mag()),b.center=this._map.transform.center,al(b,S)}if(s.zoom){var I=Oo(s.zoom,_,il);b.zoom=this._map.transform.zoom+I.amount,al(b,I)}if(s.bearing){var L=Oo(s.bearing,_,nm);b.bearing=this._map.transform.bearing+f.clamp(L.amount,-179,179),al(b,L)}if(s.pitch){var N=Oo(s.pitch,_,im);b.pitch=this._map.transform.pitch+N.amount,al(b,N)}if(b.zoom||b.bearing){var j=s.pinchAround===void 0?s.around:s.pinchAround;b.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),f.extend(b,{noMoveStart:!0})}};var pn=function(o){function s(c,g,_,b){b===void 0&&(b={});var S=Y.mousePos(g.getCanvasContainer(),_),I=g.unproject(S);o.call(this,c,f.extend({point:S,lngLat:I,originalEvent:_},b)),this._defaultPrevented=!1,this.target=g}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),sl=function(o){function s(c,g,_){var b=c==="touchend"?_.changedTouches:_.touches,S=Y.touchPos(g.getCanvasContainer(),b),I=S.map(function(j){return g.unproject(j)}),L=S.reduce(function(j,q,X,K){return j.add(q.div(K.length))},new f.Point(0,0)),N=g.unproject(L);o.call(this,c,{points:S,point:L,lngLats:I,lngLat:N,originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),Rh=function(o){function s(c,g,_){o.call(this,c,{originalEvent:_}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(f.Event),on=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};on.prototype.reset=function(){delete this._mousedownPos},on.prototype.wheel=function(o){return this._firePreventable(new Rh(o.type,this._map,o))},on.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new pn(o.type,this._map,o))},on.prototype.mouseup=function(o){this._map.fire(new pn(o.type,this._map,o))},on.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new pn(o.type,this._map,o))},on.prototype.dblclick=function(o){return this._firePreventable(new pn(o.type,this._map,o))},on.prototype.mouseover=function(o){this._map.fire(new pn(o.type,this._map,o))},on.prototype.mouseout=function(o){this._map.fire(new pn(o.type,this._map,o))},on.prototype.touchstart=function(o){return this._firePreventable(new sl(o.type,this._map,o))},on.prototype.touchmove=function(o){this._map.fire(new sl(o.type,this._map,o))},on.prototype.touchend=function(o){this._map.fire(new sl(o.type,this._map,o))},on.prototype.touchcancel=function(o){this._map.fire(new sl(o.type,this._map,o))},on.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},on.prototype.isEnabled=function(){return!0},on.prototype.isActive=function(){return!1},on.prototype.enable=function(){},on.prototype.disable=function(){};var ft=function(o){this._map=o};ft.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ft.prototype.mousemove=function(o){this._map.fire(new pn(o.type,this._map,o))},ft.prototype.mousedown=function(){this._delayContextMenu=!0},ft.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ft.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new pn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},ft.prototype.isEnabled=function(){return!0},ft.prototype.isActive=function(){return!1},ft.prototype.enable=function(){},ft.prototype.disable=function(){};var gi=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function uu(o,s){for(var a={},c=0;c<o.length;c++)a[o[c].identifier]=s[c];return a}gi.prototype.isEnabled=function(){return!!this._enabled},gi.prototype.isActive=function(){return!!this._active},gi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},gi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gi.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(Y.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},gi.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=a,this._box||(this._box=Y.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var g=Math.min(c.x,a.x),_=Math.max(c.x,a.x),b=Math.min(c.y,a.y),S=Math.max(c.y,a.y);Y.setTransform(this._box,"translate("+g+"px,"+b+"px)"),this._box.style.width=_-g+"px",this._box.style.height=S-b+"px"}}},gi.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var c=this._startPos,g=s;if(this.reset(),Y.suppressClick(),c.x!==g.x||c.y!==g.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(_){return _.fitScreenCoordinates(c,g,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},gi.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},gi.prototype.blur=function(){this.reset()},gi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(Y.remove(this._box),this._box=null),Y.enableDrag(),delete this._startPos,delete this._lastPos},gi.prototype._fireEvent=function(o,s){return this._map.fire(new f.Event(o,{originalEvent:s}))};var ps=function(o){this.reset(),this.numTouches=o.numTouches};ps.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ps.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(c){for(var g=new f.Point(0,0),_=0,b=c;_<b.length;_+=1)g._add(b[_]);return g.div(c.length)}(s),this.touches=uu(a,s)))},ps.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var c=uu(a,s);for(var g in this.touches){var _=c[g];(!_||_.dist(this.touches[g])>30)&&(this.aborted=!0)}}},ps.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var io=function(o){this.singleTap=new ps(o),this.numTaps=o.numTaps,this.reset()};io.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},io.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},io.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},io.prototype.touchend=function(o,s,a){var c=this.singleTap.touchend(o,s,a);if(c){var g=o.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(c)<30;if(g&&_||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var yi=function(){this._zoomIn=new io({numTouches:1,numTaps:2}),this._zoomOut=new io({numTouches:2,numTaps:1}),this.reset()};yi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},yi.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},yi.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},yi.prototype.touchend=function(o,s,a){var c=this,g=this._zoomIn.touchend(o,s,a),_=this._zoomOut.touchend(o,s,a);return g?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(g)},{originalEvent:o})}}):_?(this._active=!0,o.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(b){return b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(_)},{originalEvent:o})}}):void 0},yi.prototype.touchcancel=function(){this.reset()},yi.prototype.enable=function(){this._enabled=!0},yi.prototype.disable=function(){this._enabled=!1,this.reset()},yi.prototype.isEnabled=function(){return this._enabled},yi.prototype.isActive=function(){return this._active};var Dc={0:1,2:2},rt=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};rt.prototype.blur=function(){this.reset()},rt.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rt.prototype._correctButton=function(o,s){return!1},rt.prototype._move=function(o,s){return{}},rt.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=Y.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},rt.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(c,g){var _=Dc[g];return c.buttons===void 0||(c.buttons&_)!==_}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},rt.prototype.mouseupWindow=function(o){this._lastPoint&&Y.mouseButton(o)===this._eventButton&&(this._moved&&Y.suppressClick(),this.reset())},rt.prototype.enable=function(){this._enabled=!0},rt.prototype.disable=function(){this._enabled=!1,this.reset()},rt.prototype.isEnabled=function(){return this._enabled},rt.prototype.isActive=function(){return this._active};var Bc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,c){o.prototype.mousedown.call(this,a,c),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,c){return c===0&&!a.ctrlKey},s.prototype._move=function(a,c){return{around:c,panDelta:c.sub(a)}},s}(rt),cu=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=.8*(c.x-a.x);if(g)return this._active=!0,{bearingDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),Fc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,c){return c===0&&a.ctrlKey||c===2},s.prototype._move=function(a,c){var g=-.5*(c.y-a.y);if(g)return this._active=!0,{pitchDelta:g}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(rt),Vi=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Vi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new f.Point(0,0)},Vi.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},Vi.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},Vi.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},Vi.prototype.touchcancel=function(){this.reset()},Vi.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var c=uu(a,s),g=new f.Point(0,0),_=new f.Point(0,0),b=0;for(var S in c){var I=c[S],L=this._touches[S];L&&(g._add(I),_._add(I.sub(L)),b++,c[S]=I)}if(this._touches=c,!(b<this._minTouches)&&_.mag()){var N=_.div(b);if(this._sum._add(N),!(this._sum.mag()<this._clickTolerance))return{around:g.div(b),panDelta:N}}},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};var vi=function(){this.reset()};function pu(o,s,a){for(var c=0;c<o.length;c++)if(o[c].identifier===a)return s[c]}function hu(o,s){return Math.log(o/s)/Math.LN2}vi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},vi.prototype._start=function(o){},vi.prototype._move=function(o,s,a){return{}},vi.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},vi.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var c=this._firstTwoTouches,g=c[1],_=pu(a,s,c[0]),b=pu(a,s,g);if(_&&b){var S=this._aroundCenter?null:_.add(b).div(2);return this._move([_,b],S,o)}}},vi.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var c=this._firstTwoTouches,g=c[1],_=pu(a,s,c[0]),b=pu(a,s,g);_&&b||(this._active&&Y.suppressClick(),this.reset())}},vi.prototype.touchcancel=function(){this.reset()},vi.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var _i=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(hu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hu(this._distance,g),pinchAround:c}},s}(vi);function Do(o,s){return 180*o.angleWith(s)/Math.PI}var Oh=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,c){var g=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Do(this._vector,g),pinchAround:c}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var c=25/(Math.PI*this._minDiameter)*360,g=Do(a,this._startVector);return Math.abs(g)<c},s}(vi);function ll(o){return Math.abs(o.y)>Math.abs(o.x)}var Nc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,ll(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,c,g){var _=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,b,g.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,c,g){if(this._valid!==void 0)return this._valid;var _=a.mag()>=2,b=c.mag()>=2;if(_||b){if(!_||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var S=a.y>0==c.y>0;return ll(a)&&ll(c)&&S}},s}(vi),Uc={panStep:100,bearingStep:15,pitchStep:10},oo=function(){var o=Uc;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function zi(o){return o*(2-o)}oo.prototype.blur=function(){this.reset()},oo.prototype.reset=function(){this._active=!1},oo.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,c=0,g=0,_=0,b=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?c=-1:(o.preventDefault(),_=-1);break;case 39:o.shiftKey?c=1:(o.preventDefault(),_=1);break;case 38:o.shiftKey?g=1:(o.preventDefault(),b=-1);break;case 40:o.shiftKey?g=-1:(o.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(c=0,g=0),{cameraAnimation:function(S){var I=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:zi,zoom:a?Math.round(I)+a*(o.shiftKey?2:1):I,bearing:S.getBearing()+c*s._bearingStep,pitch:S.getPitch()+g*s._pitchStep,offset:[-_*s._panStep,-b*s._panStep],center:S.getCenter()},{originalEvent:o})}}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active},oo.prototype.disableRotation=function(){this._rotationDisabled=!0},oo.prototype.enableRotation=function(){this._rotationDisabled=!1};var Gt=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,f.bindAll(["_onTimeout"],this)};Gt.prototype.setZoomRate=function(o){this._defaultZoomRate=o},Gt.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},Gt.prototype.isEnabled=function(){return!!this._enabled},Gt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Gt.prototype.isZooming=function(){return!!this._zooming},Gt.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},Gt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gt.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=f.browser.now(),c=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(c*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},Gt.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},Gt.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=Y.mousePos(this._el,o);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Gt.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&c!==0&&(c=1/c);var g=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(g*c))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var _,b=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,S=this._startZoom,I=this._easing,L=!1;if(this._type==="wheel"&&S&&I){var N=Math.min((f.browser.now()-this._lastWheelEventTime)/200,1),j=I(N);_=f.number(S,b,j),N<1?this._frameId||(this._frameId=!0):L=!0}else _=b,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!L,zoomDelta:_-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Gt.prototype._smoothOutEasing=function(o){var s=f.ease;if(this._prevEase){var a=this._prevEase,c=(f.browser.now()-a.start)/a.duration,g=a.easing(c+.01)-a.easing(c),_=.27/Math.sqrt(g*g+1e-4)*.01,b=Math.sqrt(.0729-_*_);s=f.bezier(_,b,.25,1)}return this._prevEase={start:f.browser.now(),duration:o,easing:s},s},Gt.prototype.blur=function(){this.reset()},Gt.prototype.reset=function(){this._active=!1};var xo=function(o,s){this._clickZoom=o,this._tapZoom=s};xo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},xo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},xo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},xo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ji=function(){this.reset()};ji.prototype.reset=function(){this._active=!1},ji.prototype.blur=function(){this.reset()},ji.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},ji.prototype.enable=function(){this._enabled=!0},ji.prototype.disable=function(){this._enabled=!1,this.reset()},ji.prototype.isEnabled=function(){return this._enabled},ji.prototype.isActive=function(){return this._active};var On=function(){this._tap=new io({numTouches:1,numTaps:1}),this.reset()};On.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},On.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},On.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var c=s[0],g=c.y-this._swipePoint.y;return this._swipePoint=c,o.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(o,s,a)},On.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},On.prototype.touchcancel=function(){this.reset()},On.prototype.enable=function(){this._enabled=!0},On.prototype.disable=function(){this._enabled=!1,this.reset()},On.prototype.isEnabled=function(){return this._enabled},On.prototype.isActive=function(){return this._active};var Oa=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};Oa.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Oa.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Oa.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Oa.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ta=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};ta.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ta.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ta.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ta.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ao=function(o,s,a,c){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};ao.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ao.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ao.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ao.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ao.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ao.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Jn=function(o){return o.zoom||o.drag||o.pitch||o.rotate},ul=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(f.Event);function bt(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yt=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ol(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),f.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[f.window,"blur",void 0]];for(var c=0,g=this._listeners;c<g.length;c+=1){var _=g[c],b=_[0];Y.addEventListener(b,_[1],b===f.window.document?this.handleWindowEvent:this.handleEvent,_[2])}};yt.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],c=a[0];Y.removeEventListener(c,a[1],c===f.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},yt.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new on(s,o));var c=s.boxZoom=new gi(s,o);this._add("boxZoom",c);var g=new yi,_=new ji;s.doubleClickZoom=new xo(_,g),this._add("tapZoom",g),this._add("clickZoom",_);var b=new On;this._add("tapDragZoom",b);var S=s.touchPitch=new Nc;this._add("touchPitch",S);var I=new cu(o),L=new Fc(o);s.dragRotate=new ta(o,I,L),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);var N=new Bc(o),j=new Vi(o);s.dragPan=new Oa(a,N,j),this._add("mousePan",N),this._add("touchPan",j,["touchZoom","touchRotate"]);var q=new Oh,X=new _i;s.touchZoomRotate=new ao(a,X,q,b),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]);var K=s.scrollZoom=new Gt(s,this);this._add("scrollZoom",K,["mousePan"]);var re=s.keyboard=new oo;this._add("keyboard",re),this._add("blockableMapEvent",new ft(s));for(var H=0,te=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];H<te.length;H+=1){var le=te[H];o.interactive&&o[le]&&s[le].enable(o[le])}},yt.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},yt.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yt.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},yt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yt.prototype.isMoving=function(){return!!Jn(this._eventsInProgress)||this.isZooming()},yt.prototype._blockedByActive=function(o,s,a){for(var c in o)if(c!==a&&(!s||s.indexOf(c)<0))return!0;return!1},yt.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yt.prototype._getMapTouches=function(o){for(var s=[],a=0,c=o;a<c.length;a+=1){var g=c[a];this._el.contains(g.target)&&s.push(g)}return s},yt.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,c={needsRenderFrame:!1},g={},_={},b=o.touches?this._getMapTouches(o.touches):void 0,S=b?Y.touchPos(this._el,b):Y.mousePos(this._el,o),I=0,L=this._handlers;I<L.length;I+=1){var N=L[I],j=N.handlerName,q=N.handler,X=N.allowed;if(q.isEnabled()){var K=void 0;this._blockedByActive(_,X,j)?q.reset():q[s||o.type]&&(K=q[s||o.type](o,S,b),this.mergeHandlerResult(c,g,K,j,a),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||q.isActive())&&(_[j]=q)}}var re={};for(var H in this._previousActiveHandlers)_[H]||(re[H]=a);this._previousActiveHandlers=_,(Object.keys(re).length||bt(c))&&(this._changes.push([c,g,re]),this._triggerRenderFrame()),(Object.keys(_).length||bt(c))&&this._map._stop(!0),this._updatingCamera=!1;var te=c.cameraAnimation;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},yt.prototype.mergeHandlerResult=function(o,s,a,c,g){if(a){f.extend(o,a);var _={handlerName:c,originalEvent:a.originalEvent||g};a.zoomDelta!==void 0&&(s.zoom=_),a.panDelta!==void 0&&(s.drag=_),a.pitchDelta!==void 0&&(s.pitch=_),a.bearingDelta!==void 0&&(s.rotate=_)}},yt.prototype._applyChanges=function(){for(var o={},s={},a={},c=0,g=this._changes;c<g.length;c+=1){var _=g[c],b=_[0],S=_[1],I=_[2];b.panDelta&&(o.panDelta=(o.panDelta||new f.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(o.around=b.around),b.pinchAround!==void 0&&(o.pinchAround=b.pinchAround),b.noInertia&&(o.noInertia=b.noInertia),f.extend(s,S),f.extend(a,I)}this._updateMapTransform(o,s,a),this._changes=[]},yt.prototype._updateMapTransform=function(o,s,a){var c=this._map,g=c.transform;if(!bt(o))return this._fireEvents(s,a,!0);var _=o.panDelta,b=o.zoomDelta,S=o.bearingDelta,I=o.pitchDelta,L=o.around,N=o.pinchAround;N!==void 0&&(L=N),c._stop(!0),L=L||c.transform.centerPoint;var j=g.pointLocation(_?L.sub(_):L);S&&(g.bearing+=S),I&&(g.pitch+=I),b&&(g.zoom+=b),g.setLocationAtPoint(j,L),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},yt.prototype._fireEvents=function(o,s,a){var c=this,g=Jn(this._eventsInProgress),_=Jn(o),b={};for(var S in o)this._eventsInProgress[S]||(b[S+"start"]=o[S].originalEvent),this._eventsInProgress[S]=o[S];for(var I in!g&&_&&this._fireEvent("movestart",_.originalEvent),b)this._fireEvent(I,b[I]);for(var L in _&&this._fireEvent("move",_.originalEvent),o)this._fireEvent(L,o[L].originalEvent);var N,j={};for(var q in this._eventsInProgress){var X=this._eventsInProgress[q],K=X.handlerName,re=X.originalEvent;this._handlersById[K].isActive()||(delete this._eventsInProgress[q],j[q+"end"]=N=s[K]||re)}for(var H in j)this._fireEvent(H,j[H]);var te=Jn(this._eventsInProgress);if(a&&(g||_)&&!te){this._updatingCamera=!0;var le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=function(Ce){return Ce!==0&&-c._bearingSnap<Ce&&Ce<c._bearingSnap};le?(me(le.bearing||this._map.getBearing())&&(le.bearing=0),this._map.easeTo(le,{originalEvent:N})):(this._map.fire(new f.Event("moveend",{originalEvent:N})),me(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yt.prototype._fireEvent=function(o,s){this._map.fire(new f.Event(o,s?{originalEvent:s}:{}))},yt.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new ul("renderFrame",{timeStamp:s})),o._applyChanges()})},yt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var fu=function(o){function s(a,c){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=c.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,c){return this.jumpTo({center:a},c)},s.prototype.panBy=function(a,c,g){return a=f.Point.convert(a).mult(-1),this.panTo(this.transform.center,f.extend({offset:a},c),g)},s.prototype.panTo=function(a,c,g){return this.easeTo(f.extend({center:a},c),g)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,c){return this.jumpTo({zoom:a},c),this},s.prototype.zoomTo=function(a,c,g){return this.easeTo(f.extend({zoom:a},c),g)},s.prototype.zoomIn=function(a,c){return this.zoomTo(this.getZoom()+1,a,c),this},s.prototype.zoomOut=function(a,c){return this.zoomTo(this.getZoom()-1,a,c),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,c){return this.jumpTo({bearing:a},c),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,c){return this.jumpTo({padding:a},c),this},s.prototype.rotateTo=function(a,c,g){return this.easeTo(f.extend({bearing:a},c),g)},s.prototype.resetNorth=function(a,c){return this.rotateTo(0,f.extend({duration:1e3},a),c),this},s.prototype.resetNorthPitch=function(a,c){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},a),c),this},s.prototype.snapToNorth=function(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,c){return this.jumpTo({pitch:a},c),this},s.prototype.cameraForBounds=function(a,c){a=f.LngLatBounds.convert(a);var g=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,c)},s.prototype._cameraForBoxAndBearing=function(a,c,g,_){var b={top:0,bottom:0,right:0,left:0};if(typeof(_=f.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){var S=_.padding;_.padding={top:S,bottom:S,right:S,left:S}}_.padding=f.extend(b,_.padding);var I=this.transform,L=I.padding,N=I.project(f.LngLat.convert(a)),j=I.project(f.LngLat.convert(c)),q=N.rotate(-g*Math.PI/180),X=j.rotate(-g*Math.PI/180),K=new f.Point(Math.max(q.x,X.x),Math.max(q.y,X.y)),re=new f.Point(Math.min(q.x,X.x),Math.min(q.y,X.y)),H=K.sub(re),te=(I.width-(L.left+L.right+_.padding.left+_.padding.right))/H.x,le=(I.height-(L.top+L.bottom+_.padding.top+_.padding.bottom))/H.y;if(!(le<0||te<0)){var me=Math.min(I.scaleZoom(I.scale*Math.min(te,le)),_.maxZoom),Ce=typeof _.offset.x=="number"?new f.Point(_.offset.x,_.offset.y):f.Point.convert(_.offset),Ee=new f.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(g*Math.PI/180),Ie=Ce.add(Ee).mult(I.scale/I.zoomScale(me));return{center:I.unproject(N.add(j).div(2).sub(Ie)),zoom:me,bearing:g}}f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,c,g){return this._fitInternal(this.cameraForBounds(a,c),c,g)},s.prototype.fitScreenCoordinates=function(a,c,g,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.Point.convert(a)),this.transform.pointLocation(f.Point.convert(c)),g,_),_,b)},s.prototype._fitInternal=function(a,c,g){return a?(delete(c=f.extend(a,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this},s.prototype.jumpTo=function(a,c){this.stop();var g=this.transform,_=!1,b=!1,S=!1;return"zoom"in a&&g.zoom!==+a.zoom&&(_=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=f.LngLat.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(b=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(S=!0,g.pitch=+a.pitch),a.padding==null||g.isPaddingEqual(a.padding)||(g.padding=a.padding),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),_&&this.fire(new f.Event("zoomstart",c)).fire(new f.Event("zoom",c)).fire(new f.Event("zoomend",c)),b&&this.fire(new f.Event("rotatestart",c)).fire(new f.Event("rotate",c)).fire(new f.Event("rotateend",c)),S&&this.fire(new f.Event("pitchstart",c)).fire(new f.Event("pitch",c)).fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))},s.prototype.easeTo=function(a,c){var g=this;this._stop(!1,a.easeId),((a=f.extend({offset:[0,0],duration:500,easing:f.ease},a)).animate===!1||!a.essential&&f.browser.prefersReducedMotion)&&(a.duration=0);var _=this.transform,b=this.getZoom(),S=this.getBearing(),I=this.getPitch(),L=this.getPadding(),N="zoom"in a?+a.zoom:b,j="bearing"in a?this._normalizeBearing(a.bearing,S):S,q="pitch"in a?+a.pitch:I,X="padding"in a?a.padding:_.padding,K=f.Point.convert(a.offset),re=_.centerPoint.add(K),H=_.pointLocation(re),te=f.LngLat.convert(a.center||H);this._normalizeCenter(te);var le,me,Ce=_.project(H),Ee=_.project(te).sub(Ce),Ie=_.zoomScale(N-b);a.around&&(le=f.LngLat.convert(a.around),me=_.locationPoint(le));var Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||N!==b,this._rotating=this._rotating||S!==j,this._pitching=this._pitching||q!==I,this._padding=!_.isPaddingEqual(X),this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,Ne),this._ease(function(We){if(g._zooming&&(_.zoom=f.number(b,N,We)),g._rotating&&(_.bearing=f.number(S,j,We)),g._pitching&&(_.pitch=f.number(I,q,We)),g._padding&&(_.interpolatePadding(L,X,We),re=_.centerPoint.add(K)),le)_.setLocationAtPoint(le,me);else{var Ke=_.zoomScale(_.zoom-b),ut=N>b?Math.min(2,Ie):Math.max(.5,Ie),wt=Math.pow(ut,1-We),Ct=_.unproject(Ce.add(Ee.mult(We*wt)).mult(Ke));_.setLocationAtPoint(_.renderWorldCopies?Ct.wrap():Ct,re)}g._fireMoveEvents(c)},function(We){g._afterEase(c,We)},a),this},s.prototype._prepareEase=function(a,c,g){g===void 0&&(g={}),this._moving=!0,c||g.moving||this.fire(new f.Event("movestart",a)),this._zooming&&!g.zooming&&this.fire(new f.Event("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new f.Event("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new f.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new f.Event("move",a)),this._zooming&&this.fire(new f.Event("zoom",a)),this._rotating&&this.fire(new f.Event("rotate",a)),this._pitching&&this.fire(new f.Event("pitch",a))},s.prototype._afterEase=function(a,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var g=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new f.Event("zoomend",a)),_&&this.fire(new f.Event("rotateend",a)),b&&this.fire(new f.Event("pitchend",a)),this.fire(new f.Event("moveend",a))}},s.prototype.flyTo=function(a,c){var g=this;if(!a.essential&&f.browser.prefersReducedMotion){var _=f.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_,c)}this.stop(),a=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},a);var b=this.transform,S=this.getZoom(),I=this.getBearing(),L=this.getPitch(),N=this.getPadding(),j="zoom"in a?f.clamp(+a.zoom,b.minZoom,b.maxZoom):S,q="bearing"in a?this._normalizeBearing(a.bearing,I):I,X="pitch"in a?+a.pitch:L,K="padding"in a?a.padding:b.padding,re=b.zoomScale(j-S),H=f.Point.convert(a.offset),te=b.centerPoint.add(H),le=b.pointLocation(te),me=f.LngLat.convert(a.center||le);this._normalizeCenter(me);var Ce=b.project(le),Ee=b.project(me).sub(Ce),Ie=a.curve,Ne=Math.max(b.width,b.height),We=Ne/re,Ke=Ee.mag();if("minZoom"in a){var ut=f.clamp(Math.min(a.minZoom,S,j),b.minZoom,b.maxZoom),wt=Ne/b.zoomScale(ut-S);Ie=Math.sqrt(wt/Ke*2)}var Ct=Ie*Ie;function Tt(Pt){var At=(We*We-Ne*Ne+(Pt?-1:1)*Ct*Ct*Ke*Ke)/(2*(Pt?We:Ne)*Ct*Ke);return Math.log(Math.sqrt(At*At+1)-At)}function nr(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function pt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}var Lt=Tt(0),Ft=function(Pt){return pt(Lt)/pt(Lt+Ie*Pt)},zt=function(Pt){return Ne*((pt(Lt)*(nr(At=Lt+Ie*Pt)/pt(At))-nr(Lt))/Ct)/Ke;var At},Mt=(Tt(1)-Lt)/Ie;if(Math.abs(Ke)<1e-6||!isFinite(Mt)){if(Math.abs(Ne-We)<1e-6)return this.easeTo(a,c);var Bt=We<Ne?-1:1;Mt=Math.abs(Math.log(We/Ne))/Ie,zt=function(){return 0},Ft=function(Pt){return Math.exp(Bt*Ie*Pt)}}return a.duration="duration"in a?+a.duration:1e3*Mt/("screenSpeed"in a?+a.screenSpeed/Ie:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=I!==q,this._pitching=X!==L,this._padding=!b.isPaddingEqual(K),this._prepareEase(c,!1),this._ease(function(Pt){var At=Pt*Mt,_n=1/Ft(At);b.zoom=Pt===1?j:S+b.scaleZoom(_n),g._rotating&&(b.bearing=f.number(I,q,Pt)),g._pitching&&(b.pitch=f.number(L,X,Pt)),g._padding&&(b.interpolatePadding(N,K,Pt),te=b.centerPoint.add(H));var Zr=Pt===1?me:b.unproject(Ce.add(Ee.mult(zt(At))).mult(_n));b.setLocationAtPoint(b.renderWorldCopies?Zr.wrap():Zr,te),g._fireMoveEvents(c)},function(){return g._afterEase(c)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}if(!a){var _=this.handlers;_&&_.stop(!1)}return this},s.prototype._ease=function(a,c,g){g.animate===!1||g.duration===0?(a(1),c()):(this._easeStart=f.browser.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((f.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,c){a=f.wrap(a,-180,180);var g=Math.abs(a-c);return Math.abs(a-360-c)<g&&(a-=360),Math.abs(a+360-c)<g&&(a+=360),a},s.prototype._normalizeCenter=function(a){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var g=a.lng-c.center.lng;a.lng+=g>180?-360:g<-180?360:0}},s}(f.Evented),Yn=function(o){o===void 0&&(o={}),this.options=o,f.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Yn.prototype.getDefaultPosition=function(){return"bottom-right"},Yn.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Y.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Yn.prototype.onRemove=function(){Y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Yn.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},Yn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Yn.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(c,g,_){return g.value&&(c+=g.key+"="+g.value+(_<s.length-1?"&":"")),c},"?");o.href=f.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},Yn.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Yn.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(S){return typeof S!="string"?"":S})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var c in a){var g=a[c];if(g.used){var _=g.getSource();_.attribution&&o.indexOf(_.attribution)<0&&o.push(_.attribution)}}o.sort(function(S,I){return S.length-I.length});var b=(o=o.filter(function(S,I){for(var L=I+1;L<o.length;L++)if(o[L].indexOf(S)>=0)return!1;return!0})).join(" | ");b!==this._attribHTML&&(this._attribHTML=b,o.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Yn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var so=function(){f.bindAll(["_updateLogo"],this),f.bindAll(["_updateCompact"],this)};so.prototype.onAdd=function(o){this._map=o,this._container=Y.create("div","mapboxgl-ctrl");var s=Y.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},so.prototype.onRemove=function(){Y.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},so.prototype.getDefaultPosition=function(){return"bottom-left"},so.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},so.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},so.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var Dn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Dn.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},Dn.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,c=s?this._queue.concat(s):this._queue;a<c.length;a+=1){var g=c[a];if(g.id===o)return void(g.cancelled=!0)}},Dn.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,c=s;a<c.length;a+=1){var g=c[a];if(!g.cancelled&&(g.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Dn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var bo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Vc=f.window.HTMLImageElement,du=f.window.HTMLElement,fr=f.window.ImageBitmap,Cn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Dh=function(o){function s(c){var g=this;if((c=f.extend({},Cn,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var _=new Jt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(o.call(this,_,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Dn,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},bo,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new f.RequestManager(c.transformRequest,c.accessToken),typeof c.container=="string"){if(this._container=f.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof du))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),f.window!==void 0&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1),f.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yt(this,c),this._hash=c.hash&&new Mi(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,f.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Yn({customAttribution:c.customAttribution})),this.addControl(new so,c.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(b){g._update(b.dataType==="style"),g.fire(new f.Event(b.dataType+"data",b))}),this.on("dataloading",function(b){g.fire(new f.Event(b.dataType+"dataloading",b))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(c,g){if(g===void 0&&(g=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var _=c.onAdd(this);this._controls.push(c);var b=this._controlPositions[g];return g.indexOf("bottom")!==-1?b.insertBefore(_,b.firstChild):b.appendChild(_),this},s.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(c);return g>-1&&this._controls.splice(g,1),c.onRemove(this),this},s.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},s.prototype.resize=function(c){var g=this._containerDimensions(),_=g[0],b=g[1];if(_===this.transform.width&&b===this.transform.height)return this;this._resizeCanvas(_,b),this.transform.resize(_,b),this.painter.resize(_,b);var S=!this._moving;return S&&this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),this.fire(new f.Event("resize",c)),S&&this.fire(new f.Event("moveend",c)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(f.LngLatBounds.convert(c)),this._update()},s.prototype.setMinZoom=function(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(c){if((c=c??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},s.prototype.project=function(c){return this.transform.locationPoint(f.LngLat.convert(c))},s.prototype.unproject=function(c){return this.transform.pointLocation(f.Point.convert(c))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(c,g,_){var b,S=this;if(c==="mouseenter"||c==="mouseover"){var I=!1;return{layer:g,listener:_,delegates:{mousemove:function(N){var j=S.getLayer(g)?S.queryRenderedFeatures(N.point,{layers:[g]}):[];j.length?I||(I=!0,_.call(S,new pn(c,S,N.originalEvent,{features:j}))):I=!1},mouseout:function(){I=!1}}}}if(c==="mouseleave"||c==="mouseout"){var L=!1;return{layer:g,listener:_,delegates:{mousemove:function(N){(S.getLayer(g)?S.queryRenderedFeatures(N.point,{layers:[g]}):[]).length?L=!0:L&&(L=!1,_.call(S,new pn(c,S,N.originalEvent)))},mouseout:function(N){L&&(L=!1,_.call(S,new pn(c,S,N.originalEvent)))}}}}return{layer:g,listener:_,delegates:(b={},b[c]=function(N){var j=S.getLayer(g)?S.queryRenderedFeatures(N.point,{layers:[g]}):[];j.length&&(N.features=j,_.call(S,N),delete N.features)},b)}},s.prototype.on=function(c,g,_){if(_===void 0)return o.prototype.on.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(b),b.delegates)this.on(S,b.delegates[S]);return this},s.prototype.once=function(c,g,_){if(_===void 0)return o.prototype.once.call(this,c,g);var b=this._createDelegatedListener(c,g,_);for(var S in b.delegates)this.once(S,b.delegates[S]);return this},s.prototype.off=function(c,g,_){var b=this;return _===void 0?o.prototype.off.call(this,c,g):(this._delegatedListeners&&this._delegatedListeners[c]&&function(S){for(var I=S[c],L=0;L<I.length;L++){var N=I[L];if(N.layer===g&&N.listener===_){for(var j in N.delegates)b.off(j,N.delegates[j]);return I.splice(L,1),b}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(c,g){if(!this.style)return[];var _;if(g!==void 0||c===void 0||c instanceof f.Point||Array.isArray(c)||(g=c,c=void 0),g=g||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof f.Point||typeof c[0]=="number")_=[f.Point.convert(c)];else{var b=f.Point.convert(c[0]),S=f.Point.convert(c[1]);_=[b,new f.Point(S.x,b.y),S,new f.Point(b.x,S.y),b]}return this.style.queryRenderedFeatures(_,g,this.transform)},s.prototype.querySourceFeatures=function(c,g){return this.style.querySourceFeatures(c,g)},s.prototype.setStyle=function(c,g){return(g=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(c,g))},s.prototype._getUIString=function(c){var g=this._locale[c];if(g==null)throw new Error("Missing UI string '"+c+"'");return g},s.prototype._updateStyle=function(c,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new mi(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new mi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(c,g){var _=this;if(typeof c=="string"){var b=this._requestManager.normalizeStyleURL(c),S=this._requestManager.transformRequest(b,f.ResourceType.Style);f.getJSON(S,function(I,L){I?_.fire(new f.ErrorEvent(I)):L&&_._updateDiff(L,g)})}else typeof c=="object"&&this._updateDiff(c,g)},s.prototype._updateDiff=function(c,g){try{this.style.setState(c)&&this._update(!0)}catch(_){f.warnOnce("Unable to perform style diff: "+(_.message||_.error||_)+".  Rebuilding the style from scratch."),this._updateStyle(c,g)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(c,g){return this._lazyInitEmptyStyle(),this.style.addSource(c,g),this._update(!0)},s.prototype.isSourceLoaded=function(c){var g=this.style&&this.style.sourceCaches[c];if(g!==void 0)return g.loaded();this.fire(new f.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},s.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var g in c){var _=c[g]._tiles;for(var b in _){var S=_[b];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(c,g,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,g,_)},s.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},s.prototype.getSource=function(c){return this.style.getSource(c)},s.prototype.addImage=function(c,g,_){_===void 0&&(_={});var b=_.pixelRatio;b===void 0&&(b=1);var S=_.sdf;S===void 0&&(S=!1);var I=_.stretchX,L=_.stretchY,N=_.content;if(this._lazyInitEmptyStyle(),g instanceof Vc||fr&&g instanceof fr){var j=f.browser.getImageData(g);this.style.addImage(c,{data:new f.RGBAImage({width:j.width,height:j.height},j.data),pixelRatio:b,stretchX:I,stretchY:L,content:N,sdf:S,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var q=g;this.style.addImage(c,{data:new f.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:b,stretchX:I,stretchY:L,content:N,sdf:S,version:0,userImage:q}),q.onAdd&&q.onAdd(this,c)}},s.prototype.updateImage=function(c,g){var _=this.style.getImage(c);if(!_)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var b=g instanceof Vc||fr&&g instanceof fr?f.browser.getImageData(g):g,S=b.width,I=b.height,L=b.data;return S===void 0||I===void 0?this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):S!==_.data.width||I!==_.data.height?this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(_.data.replace(L,!(g instanceof Vc||fr&&g instanceof fr)),void this.style.updateImage(c,_))},s.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(c){this.style.removeImage(c)},s.prototype.loadImage=function(c,g){f.getImage(this._requestManager.transformRequest(c,f.ResourceType.Image),g)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(c,g){return this._lazyInitEmptyStyle(),this.style.addLayer(c,g),this._update(!0)},s.prototype.moveLayer=function(c,g){return this.style.moveLayer(c,g),this._update(!0)},s.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},s.prototype.getLayer=function(c){return this.style.getLayer(c)},s.prototype.setLayerZoomRange=function(c,g,_){return this.style.setLayerZoomRange(c,g,_),this._update(!0)},s.prototype.setFilter=function(c,g,_){return _===void 0&&(_={}),this.style.setFilter(c,g,_),this._update(!0)},s.prototype.getFilter=function(c){return this.style.getFilter(c)},s.prototype.setPaintProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setPaintProperty(c,g,_,b),this._update(!0)},s.prototype.getPaintProperty=function(c,g){return this.style.getPaintProperty(c,g)},s.prototype.setLayoutProperty=function(c,g,_,b){return b===void 0&&(b={}),this.style.setLayoutProperty(c,g,_,b),this._update(!0)},s.prototype.getLayoutProperty=function(c,g){return this.style.getLayoutProperty(c,g)},s.prototype.setLight=function(c,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(c,g),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(c,g){return this.style.setFeatureState(c,g),this._update()},s.prototype.removeFeatureState=function(c,g){return this.style.removeFeatureState(c,g),this._update()},s.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var c=0,g=0;return this._container&&(c=this._container.clientWidth||400,g=this._container.clientHeight||300),[c,g]},s.prototype._detectMissingCSS=function(){f.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&f.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y.create("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=Y.create("div","mapboxgl-canvas-container",c);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=Y.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var _=this._containerDimensions();this._resizeCanvas(_[0],_[1]);var b=this._controlContainer=Y.create("div","mapboxgl-control-container",c),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(I){S[I]=Y.create("div","mapboxgl-ctrl-"+I,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(c,g){var _=f.browser.devicePixelRatio||1;this._canvas.width=_*c,this._canvas.height=_*g,this._canvas.style.width=c+"px",this._canvas.style.height=g+"px"},s.prototype._setupPainter=function(){var c=f.extend({},ke.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);g?(this.painter=new Lr(g,this.transform),f.webpSupported.testSupport(g)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:c}))},s.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:c}))},s.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},s.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},s.prototype._render=function(c){var g,_=this,b=0,S=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=S.createQueryEXT(),S.beginQueryEXT(S.TIME_ELAPSED_EXT,g),b=f.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var I=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var L=this.transform.zoom,N=f.browser.now();this.style.zoomHistory.update(L,N);var j=new f.EvaluationParameters(L,{now:N,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=j.crossFadingFactor();q===1&&q===this._crossFadingFactor||(I=!0,this._crossFadingFactor=q),this.style.update(j)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||I)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var X=f.browser.now()-b;S.endQueryEXT(S.TIME_ELAPSED_EXT,g),setTimeout(function(){var H=S.getQueryObjectEXT(g,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(g),_.fire(new f.Event("gpu-timing-frame",{cpuTime:X,gpuTime:H}))},50)}if(this.listens("gpu-timing-layer")){var K=this.painter.collectGpuTimers();setTimeout(function(){var H=_.painter.queryGpuTimers(K);_.fire(new f.Event("gpu-timing-layer",{layerTimes:H}))},50)}var re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new f.Event("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,g=this._controls;c<g.length;c+=1)g[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),f.window!==void 0&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("orientationchange",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1));var _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),Da(this._canvasContainer),Da(this._controlContainer),Da(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new f.Event("remove"))},s.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=f.browser.frame(function(g){c._frame=null,c._render(g)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(c){this._vertices=c,this._update()},s.prototype._setCacheLimits=function(c,g){f.setCacheLimits(c,g)},a.version.get=function(){return f.version},Object.defineProperties(s.prototype,a),s}(fu);function Da(o){o.parentNode&&o.parentNode.removeChild(o)}var jc={showCompass:!0,showZoom:!0,visualizePitch:!1},Bo=function(o){var s=this;this.options=f.extend({},jc,o),this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),Y.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=Y.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Bo.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},Bo.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},Bo.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xi(this._map,this._compass,this.options.visualizePitch)),this._container},Bo.prototype.onRemove=function(){Y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Bo.prototype._createButton=function(o,s){var a=Y.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},Bo.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var xi=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new cu({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new Fc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Y.addEventListener(s,"mousedown",this.mousedown),Y.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),Y.addEventListener(s,"touchmove",this.touchmove),Y.addEventListener(s,"touchend",this.touchend),Y.addEventListener(s,"touchcancel",this.reset)};function hs(o,s,a){if(o=new f.LngLat(o.lng,o.lat),s){var c=new f.LngLat(o.lng-360,o.lat),g=new f.LngLat(o.lng+360,o.lat),_=a.locationPoint(o).distSqr(s);a.locationPoint(c).distSqr(s)<_?o=c:a.locationPoint(g).distSqr(s)<_&&(o=g)}for(;Math.abs(o.lng-a.center.lng)>180;){var b=a.locationPoint(o);if(b.x>=0&&b.y>=0&&b.x<=a.width&&b.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}xi.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),Y.disableDrag()},xi.prototype.move=function(o,s){var a=this.map,c=this.mouseRotate.mousemoveWindow(o,s);if(c&&c.bearingDelta&&a.setBearing(a.getBearing()+c.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(o,s);g&&g.pitchDelta&&a.setPitch(a.getPitch()+g.pitchDelta)}},xi.prototype.off=function(){var o=this.element;Y.removeEventListener(o,"mousedown",this.mousedown),Y.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),Y.removeEventListener(o,"touchmove",this.touchmove),Y.removeEventListener(o,"touchend",this.touchend),Y.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},xi.prototype.offTemp=function(){Y.enableDrag(),Y.removeEventListener(f.window,"mousemove",this.mousemove),Y.removeEventListener(f.window,"mouseup",this.mouseup)},xi.prototype.mousedown=function(o){this.down(f.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),Y.mousePos(this.element,o)),Y.addEventListener(f.window,"mousemove",this.mousemove),Y.addEventListener(f.window,"mouseup",this.mouseup)},xi.prototype.mousemove=function(o){this.move(o,Y.mousePos(this.element,o))},xi.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},xi.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},xi.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Y.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},xi.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},xi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var wo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function mu(o,s,a){var c=o.classList;for(var g in wo)c.remove("mapboxgl-"+a+"-anchor-"+g);c.add("mapboxgl-"+a+"-anchor-"+s)}var fs,cl=function(o){function s(a,c){if(o.call(this),(a instanceof f.window.HTMLElement||c)&&(a=f.extend({element:a},c)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=f.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y.create("div"),this._element.setAttribute("aria-label","Map marker");var g=Y.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var _=Y.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");var b=Y.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");var S=Y.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var I=0,L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];I<L.length;I+=1){var N=L[I],j=Y.createNS("http://www.w3.org/2000/svg","ellipse");j.setAttributeNS(null,"opacity","0.04"),j.setAttributeNS(null,"cx","10.5"),j.setAttributeNS(null,"cy","5.80029008"),j.setAttributeNS(null,"rx",N.rx),j.setAttributeNS(null,"ry",N.ry),S.appendChild(j)}var q=Y.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);var X=Y.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(X);var K=Y.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");var re=Y.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(re);var H=Y.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");var te=Y.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");var le=Y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");var me=Y.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),te.appendChild(le),te.appendChild(me),b.appendChild(S),b.appendChild(q),b.appendChild(K),b.appendChild(H),b.appendChild(te),g.appendChild(b),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=f.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ce){Ce.preventDefault()}),this._element.addEventListener("mousedown",function(Ce){Ce.preventDefault()}),mu(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Y.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var c=a.code,g=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&g!==32&&g!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var c=a.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=hs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),Y.setTransform(this._element,wo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+c)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=f.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new f.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(f.Evented),qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ds=0,Ba=!1,Zc=function(o){function s(a){o.call(this),this.options=f.extend({},qc,a),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var c;return this._map=a,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,fs!==void 0?c(fs):f.window.navigator.permissions!==void 0?f.window.navigator.permissions.query({name:"geolocation"}).then(function(g){c(fs=g.state!=="denied")}):c(fs=!!f.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ds=0,Ba=!1},s.prototype._isOutOfMapMaxBounds=function(a){var c=this._map.getMaxBounds(),g=a.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),b=f.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(g),b,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var c=new f.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,c=this._map.unproject([0,a]),g=this._map.unproject([1,a]),_=c.distanceTo(g),b=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=b+"px",this._circleElement.style.height=b+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Ba)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var c=this;if(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=Y.create("button","mapboxgl-ctrl-geolocate",this._container),Y.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var _=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new cl(this._dotElement),this._circleElement=Y.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(b){b.geolocateSource||c._watchState!=="ACTIVE_LOCK"||b.originalEvent&&b.originalEvent.type==="resize"||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new f.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ds--,Ba=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ds>1?(a={maximumAge:6e5,timeout:0},Ba=!0):(a=this.options.positionOptions,Ba=!1),this._geolocationWatchID=f.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else f.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(f.Evented),ra={maxWidth:100,unit:"metric"},na=function(o){this.options=f.extend({},ra,o),f.bindAll(["_onMove","setUnit"],this)};function gu(o,s,a){var c=a&&a.maxWidth||100,g=o._container.clientHeight/2,_=o.unproject([0,g]),b=o.unproject([c,g]),S=_.distanceTo(b);if(a&&a.unit==="imperial"){var I=3.2808*S;I>5280?ia(s,c,I/5280,o._getUIString("ScaleControl.Miles")):ia(s,c,I,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?ia(s,c,S/1852,o._getUIString("ScaleControl.NauticalMiles")):S>=1e3?ia(s,c,S/1e3,o._getUIString("ScaleControl.Kilometers")):ia(s,c,S,o._getUIString("ScaleControl.Meters"))}function ia(o,s,a,c){var g,_,b,S=(g=a,(_=Math.pow(10,(""+Math.floor(g)).length-1))*(b=(b=g/_)>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(I){var L=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*L)/L}(b)));o.style.width=s*(S/a)+"px",o.innerHTML=S+"&nbsp;"+c}na.prototype.getDefaultPosition=function(){return"bottom-left"},na.prototype._onMove=function(){gu(this._map,this._container,this.options)},na.prototype.onAdd=function(o){return this._map=o,this._container=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},na.prototype.onRemove=function(){Y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},na.prototype.setUnit=function(o){this.options.unit=o,gu(this._map,this._container,this.options)};var qi=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof f.window.HTMLElement?this._container=o.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in f.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in f.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in f.window.document&&(this._fullscreenchange="MSFullscreenChange")};qi.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},qi.prototype.onRemove=function(){Y.remove(this._controlContainer),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},qi.prototype._checkFullscreenSupport=function(){return!!(f.window.document.fullscreenEnabled||f.window.document.mozFullScreenEnabled||f.window.document.msFullscreenEnabled||f.window.document.webkitFullscreenEnabled)},qi.prototype._setupUI=function(){var o=this._fullscreenButton=Y.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},qi.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},qi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},qi.prototype._isFullscreen=function(){return this._fullscreen},qi.prototype._changeIcon=function(){(f.window.document.fullscreenElement||f.window.document.mozFullScreenElement||f.window.document.webkitFullscreenElement||f.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},qi.prototype._onClickFullscreen=function(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.mozCancelFullScreen?f.window.document.mozCancelFullScreen():f.window.document.msExitFullscreen?f.window.document.msExitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Gc=function(o){function s(a){o.call(this),this.options=f.extend(Object.create(Hc),a),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&Y.remove(this._content),this._container&&(Y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=f.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(f.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var c,g=f.window.document.createDocumentFragment(),_=f.window.document.createElement("body");for(_.innerHTML=a;c=_.firstChild;)g.appendChild(c);return this.setDOMContent(g)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Y.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Y.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Y.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Y.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(j){return c._container.classList.add(j)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var g=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),_=this.options.anchor,b=function j(q){if(q){if(typeof q=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(q,2)));return{center:new f.Point(0,0),top:new f.Point(0,q),"top-left":new f.Point(X,X),"top-right":new f.Point(-X,X),bottom:new f.Point(0,-q),"bottom-left":new f.Point(X,-X),"bottom-right":new f.Point(-X,-X),left:new f.Point(q,0),right:new f.Point(-q,0)}}if(q instanceof f.Point||Array.isArray(q)){var K=f.Point.convert(q);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}return{center:f.Point.convert(q.center||[0,0]),top:f.Point.convert(q.top||[0,0]),"top-left":f.Point.convert(q["top-left"]||[0,0]),"top-right":f.Point.convert(q["top-right"]||[0,0]),bottom:f.Point.convert(q.bottom||[0,0]),"bottom-left":f.Point.convert(q["bottom-left"]||[0,0]),"bottom-right":f.Point.convert(q["bottom-right"]||[0,0]),left:f.Point.convert(q.left||[0,0]),right:f.Point.convert(q.right||[0,0])}}return j(new f.Point(0,0))}(this.options.offset);if(!_){var S,I=this._container.offsetWidth,L=this._container.offsetHeight;S=g.y+b.bottom.y<L?["top"]:g.y>this._map.transform.height-L?["bottom"]:[],g.x<I/2?S.push("left"):g.x>this._map.transform.width-I/2&&S.push("right"),_=S.length===0?"bottom":S.join("-")}var N=g.add(b[_]).round();Y.setTransform(this._container,wo[_]+" translate("+N.x+"px,"+N.y+"px)"),mu(this._container,_,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(pl);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(f.Evented),yu={version:f.version,supported:ke,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:Dh,NavigationControl:Bo,GeolocateControl:Zc,AttributionControl:Yn,ScaleControl:na,FullscreenControl:qi,Popup:Gc,Marker:cl,Style:mi,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.Point,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,config:f.config,prewarm:function(){Me().acquire(Pe)},clearPrewarmedResources:function(){var o=gt;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(Pe),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(o){f.config.ACCESS_TOKEN=o},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(o){f.config.API_URL=o},get workerCount(){return Ve.workerCount},set workerCount(o){Ve.workerCount=o},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){f.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){f.clearTileCache(o)},workerUrl:""};return yu}),_e})})(x);var E=y;function C(fe){if(typeof fe=="string"){var pe=fe;if(fe=document.getElementById(fe),!fe)throw new Error("No element with id "+pe)}return fe}function P(fe){if(!/^#([0-9a-f]{3}){1,2}$/i.test(fe)&&!/^[a-z]+$/i.test(fe))throw new Error("Invalid color")}function B(fe,pe){var ue=41,be=27,_e=2,Oe=new fe.Marker()._element.querySelector("svg");Oe.removeAttribute("display"),Oe.setAttribute("xmlns","http://www.w3.org/2000/svg"),Oe.setAttribute("height",ue),Oe.setAttribute("width",be),Oe.setAttribute("viewBox","0 0 "+be+" "+ue),P(pe),Oe.querySelector("*[fill='#3FB1CE']").setAttribute("fill",pe);var f=Oe.querySelectorAll("circle"),ke=f[f.length-1];if(f.length==1){var Y=ke.cloneNode();Y.setAttribute("fill","#000000"),Y.setAttribute("opacity",.25),ke.parentNode.insertBefore(Y,ke)}ke.setAttribute("r",4.5);var Fe=new Image(be*_e,ue*_e);return Fe.src="data:image/svg+xml;utf8,"+encodeURIComponent(Oe.outerHTML),Fe}var U={},ee=function(pe,ue,be,_e){var Oe=this;!ve.library&&typeof window<"u"&&(ve.library=window.mapboxgl||window.maplibregl||null);var f=ve.library;if(!f)throw new Error("No mapping library found");var ke,Y={},Fe={},ze=[],Xe=0;pe=C(pe),pe.id&&(U[pe.id]=this);function xe(Te,Le,Re){var Ae=new XMLHttpRequest;Ae.open("GET",Le,!0),Ae.setRequestHeader("Content-Type","application/json"),Ae.onload=function(){Ae.status===200?Re(JSON.parse(Ae.responseText)):tr(Te,Ae.statusText)},Ae.send()}function mt(Te){ke.loaded()?Te():ke.on("load",Te)}function et(Te){return typeof Te=="number"?Te:new Date(Te).getTime()/1e3}function $t(Te,Le,Re){for(var Ae=0;Ae<Le.length;Ae++){var Ye=Le[Ae],Ze=et(Ye.time);Ze&&(Fe[Ze]||(Fe[Ze]=[]),Fe[Ze].push(Ye),Je.extend(Ii(Ye)))}for(var ct in Fe)Object.prototype.hasOwnProperty.call(Fe,ct)&&ze.push(parseInt(ct));ze.sort(),to(Te,Fe[ze[Xe]],Re),mt(function(){setTimeout(function(){Rt(Te,Re)},100)})}function Rt(Te,Le){Xe++,fi(Te,Fe[ze[Xe]],Le),Xe<ze.length-1&&setTimeout(function(){Rt(Te,Le)},100)}function tr(Te,Le){Te.textContent=Le}function Ot(Te,Le,Re,Ae){try{Ae(Te,Le,Re)}catch(Ye){throw tr(Te,Ye.message),Ye}}function mn(Te,Le,Re,Ae){typeof Le=="string"?xe(Te,Le,function(Ye){Ot(Te,Ye,Re,Ae)}):typeof Le=="function"?Le(function(Ye){Ot(Te,Ye,Re,Ae)},function(Ye){tr(Te,Ye)}):Ot(Te,Le,Re,Ae)}function fi(Te,Le,Re){Be(function(){Re.trail&&(ln(Le,Re.trail),ke.getSource("trails").setData(rn(Le))),ke.getSource("objects").setData(gn(Le,Re))})}var Kr=new window.Map;function gn(Te,Le){for(var Re={type:"FeatureCollection",features:[]},Ae=0;Ae<Te.length;Ae++){var Ye=Te[Ae],Ze=Object.assign({},Ye),ct=void 0;if(_e==="point"){if(Ze.icon||(Ze.icon=Le.defaultIcon||"mapkick"),Ze.mapkickIconSize=Ze.icon==="mapkick"?.5:1,Ze.mapkickIconAnchor=Ze.icon==="mapkick"?"bottom":"center",Ze.mapkickIconOffset=Ze.icon==="mapkick"?[0,10]:[0,0],Ze.icon==="mapkick"){var nt=Ze.color||qe.color||"#f84d4d",It=Kr.get(nt);It===void 0&&(It=Kr.size,P(nt),Kr.set(nt,It)),Ze.icon="mapkick-"+It}var Vt=Ii(Ye);if(!Vt[1])throw new Error("missing latitude (index: "+Ae+")");if(!Vt[0])throw new Error("missing longitude (index: "+Ae+")");ct={type:"Point",coordinates:Vt}}else{if(ct=Ye.geometry,!ct)throw new Error("missing geometry (index: "+Ae+")");delete Ze.geometry,Ze.mapkickColor=Ze.color||qe.color||"#0090ff"}Re.features.push({type:"Feature",id:Ae,geometry:ct,properties:Ze})}return Re}function Ii(Te){return[Te.longitude||Te.lng||Te.lon,Te.latitude||Te.lat]}function Bi(Te){return Te.id}function ln(Te,Le){for(var Re=0;Re<Te.length;Re++){var Ae=Te[Re],Ye=Bi(Ae);Y[Ye]||(Y[Ye]=[]),Y[Ye].push(Ii(Ae)),Le&&Le.len&&Y[Ye].length>Le.len&&Y[Ye].shift()}}function rn(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.length;Re++){var Ae=Te[Re];Le.features.push({type:"Feature",geometry:{type:"LineString",coordinates:Y[Bi(Ae)]}})}return Le}function Mn(Te){for(var Le={type:"FeatureCollection",features:[]},Re=0;Re<Te.features.length;Re++){var Ae=Te.features[Re],Ye=void 0,Ze=new f.LngLatBounds;if(un(Ze,Ae.geometry),!Ze.isEmpty()){var ct=Ze.getCenter();Ye=[ct.lng,ct.lat]}Ye&&Le.features.push({type:"Feature",id:Re,geometry:{type:"Point",coordinates:Ye},properties:Ae.properties})}return Le}function eo(Te){for(var Le=Te.getStyle().layers,Re,Ae=Le.length-1;Ae>=0;Ae--){var Ye=Le[Ae];if(!(Ye.metadata&&Ye.metadata["mapbox:featureComponent"]==="place-labels"))break;Re=Ye.id}return Re}function dr(Te,Le){var Re={};if(ke.addSource(Te,{type:"geojson",data:Le}),_e==="point")ke.addLayer({id:Te+"-text",source:Te,type:"symbol",layout:{"text-field":"{label}","text-size":11,"text-anchor":"top","text-offset":[0,1]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}}),ke.addLayer({id:Te,source:Te,type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-size":{type:"identity",property:"mapkickIconSize"},"icon-anchor":{type:"identity",property:"mapkickIconAnchor"},"icon-offset":{type:"identity",property:"mapkickIconOffset"}}});else{var Ae=eo(ke),Ye=Te+"-outline";ke.addLayer({id:Ye,source:Te,type:"line",paint:{"line-color":{type:"identity",property:"mapkickColor"},"line-opacity":.7,"line-width":1}},Ae),ke.addLayer({id:Te,source:Te,type:"fill",paint:{"fill-color":{type:"identity",property:"mapkickColor"},"fill-opacity":.3}},Ye);for(var Ze=Te+"-text",ct=Mn(Le),nt=0;nt<ct.features.length;nt++){var It=ct.features[nt];Re[It.id]=It.geometry.coordinates}ke.addSource(Ze,{type:"geojson",data:ct}),ke.addLayer({id:Te+"-text",source:Ze,type:"symbol",layout:{"text-field":"{label}","text-size":11},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}})}var Vt=!("hover"in $e)||$e.hover,jt={closeButton:!1,closeOnClick:!1};Vt||(jt.anchor="bottom");var dt=new f.Popup(jt),Pr=function(lr,rr){var yn=window.getComputedStyle(rr.getElement()),Un=new DOMMatrixReadOnly(yn.transform),vn=5,ii=5,vo=Un.m42,di=Un.m41;(vo<vn||di<vn)&&lr.panBy([Math.min(di-vn-ii,0),Math.min(vo-vn-ii,0)])},Mr=function(lr){var rr=ki(lr),yn=rr.properties.tooltip;if(yn){_e==="point"&&rr.properties.icon.startsWith("mapkick-")?dt.options.offset={top:[0,14],"top-left":[0,14],"top-right":[0,14],bottom:[0,-44],"bottom-left":[0,-44],"bottom-right":[0,-44],left:[14,0],right:[-14,0]}:dt.options.offset=14;var Un;_e==="point"?Un=rr.geometry.coordinates:Un=Re[rr.id],dt.setLngLat(Un),$e.html?dt.setHTML(yn):dt.setText(yn),dt.addTo(ke),dt._container.offsetWidth%2!==0&&(dt._container.style.width=dt._container.offsetWidth+1+"px"),_e!=="area"&&Pr(ke,dt)}},cn=function(lr){return lr.geometry.coordinates[1]},ki=function(lr){for(var rr=lr.features,yn=rr[0],Un=1;Un<rr.length;Un++){var vn=rr[Un];cn(vn)<cn(yn)&&(yn=vn)}return yn};if(!Vt){var zn=null;ke.on("click",Te,function(lr){var rr=ki(lr).id;rr!==zn&&(Mr(lr),zn=rr,lr.mapkickPopupOpened=!0)}),ke.on("click",function(lr){lr.mapkickPopupOpened||(dt.remove(),zn=null)})}ke.on("mouseenter",Te,function(lr){var rr=ki(lr).properties.tooltip;rr&&(ke.getCanvas().style.cursor="pointer",Vt&&Mr(lr))}),ke.on("mouseleave",Te,function(){ke.getCanvas().style.cursor="",Vt&&dt.remove()})}function un(Te,Le){if(Le.type==="Point")Te.extend(Le.coordinates);else if(Le.type==="Polygon")for(var Re=Le.coordinates[0],Ae=0;Ae<Re.length;Ae++)Te.extend(Re[Ae]);else if(Le.type==="MultiPolygon")for(var Ye=Le.coordinates,Ze=0;Ze<Ye.length;Ze++)for(var ct=Ye[Ze][0],nt=0;nt<ct.length;nt++)Te.extend(ct[nt])}var to=function(Te,Le,Re){var Ae=gn(Le,Re);Re=Re||{};for(var Ye=0;Ye<Ae.features.length;Ye++)un(Je,Ae.features[Ye].geometry);Te.textContent="";var Ze=Re.style;if(!Ze){var ct=!("accessToken"in f)||/^1\.1[45]/.test(f.version);if(ct)throw new Error("style required for MapLibre");Ze="mapbox://styles/mapbox/streets-v12"}var nt=Re.zoom,It=Re.center;It||(Je.isEmpty()?(It=[0,0],nt||(nt=1)):It=Je.getCenter());var Vt={container:Te,style:Ze,dragRotate:!1,touchZoomRotate:!1,center:It,zoom:nt||15};Re.style||(Vt.projection="mercator"),Re.accessToken&&(Vt.accessToken=Re.accessToken),ke=new f.Map(Vt),Re.controls&&ke.addControl(new f.NavigationControl({showCompass:!1})),Re.zoom||(ke.style.stylesheet||(ke.style.stylesheet={}),Je.isEmpty()||ke.fitBounds(Je,{padding:40,animate:!1,maxZoom:15})),Oe.map=ke,mt(function(){Re.trail&&(ln(Le),ke.addSource("trails",{type:"geojson",data:rn([])}),ke.addLayer({id:"trails",source:"trails",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}}));var jt=Kr.size;function dt(){if(jt!==0){jt--;return}dr("objects",Ae),oe=!0;for(var Pr;Pr=de.shift();)Pr()}Kr.forEach(function(Pr,Mr){var cn=B(f,Mr);cn.addEventListener("load",function(){ke.addImage("mapkick-"+Pr+"-15",cn),dt()})}),dt()})},oe=!1,de=[];function Be(Te){oe?Te():de.push(Te)}be=be||{},be=Object.assign({},ve.options,be);var $e=be.tooltips||{},qe=be.markers||{},Je=new f.LngLatBounds;be.replay?mn(pe,ue,be,$t):(mn(pe,ue,be,to),be.refresh&&(this.intervalId=setInterval(function(){mn(pe,ue,be,fi)},be.refresh*1e3)))};ee.prototype.getMapObject=function(){return this.map},ee.prototype.destroy=function(){this.stopRefresh(),this.map&&(this.map.remove(),this.map=null)},ee.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};var se=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"point")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ne=function(fe){function pe(ue,be,_e){fe.call(this,ue,be,_e,"area")}return fe&&(pe.__proto__=fe),pe.prototype=Object.create(fe&&fe.prototype),pe.prototype.constructor=pe,pe}(ee),ve={Map:se,AreaMap:ne,maps:U,options:{},library:null};return ve.use=function(fe){ve.library=fe},typeof window<"u"&&!window.Mapkick&&(window.Mapkick=ve,setTimeout(function(){window.dispatchEvent(new Event("mapkick:load"))},0)),ve.use(E),ve})})(h5);function sb(t,n){return function(){return t.apply(n,arguments)}}const{toString:f5}=Object.prototype,{getPrototypeOf:Oy}=Object,Bd=(t=>n=>{const l=f5.call(n);return t[l]||(t[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),va=t=>(t=t.toLowerCase(),n=>Bd(n)===t),Fd=t=>n=>typeof n===t,{isArray:xc}=Array,Kp=Fd("undefined");function d5(t){return t!==null&&!Kp(t)&&t.constructor!==null&&!Kp(t.constructor)&&Po(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lb=va("ArrayBuffer");function m5(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&lb(t.buffer),n}const g5=Fd("string"),Po=Fd("function"),ub=Fd("number"),Nd=t=>t!==null&&typeof t=="object",y5=t=>t===!0||t===!1,Ff=t=>{if(Bd(t)!=="object")return!1;const n=Oy(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},v5=va("Date"),_5=va("File"),x5=va("Blob"),b5=va("FileList"),w5=t=>Nd(t)&&Po(t.pipe),E5=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Po(t.append)&&((n=Bd(t))==="formdata"||n==="object"&&Po(t.toString)&&t.toString()==="[object FormData]"))},S5=va("URLSearchParams"),T5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ih(t,n,{allOwnKeys:l=!1}={}){if(t===null||typeof t>"u")return;let p,m;if(typeof t!="object"&&(t=[t]),xc(t))for(p=0,m=t.length;p<m;p++)n.call(null,t[p],p,t);else{const y=l?Object.getOwnPropertyNames(t):Object.keys(t),x=y.length;let E;for(p=0;p<x;p++)E=y[p],n.call(null,t[E],E,t)}}function cb(t,n){n=n.toLowerCase();const l=Object.keys(t);let p=l.length,m;for(;p-- >0;)if(m=l[p],n===m.toLowerCase())return m;return null}const pb=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hb=t=>!Kp(t)&&t!==pb;function Pg(){const{caseless:t}=hb(this)&&this||{},n={},l=(p,m)=>{const y=t&&cb(n,m)||m;Ff(n[y])&&Ff(p)?n[y]=Pg(n[y],p):Ff(p)?n[y]=Pg({},p):xc(p)?n[y]=p.slice():n[y]=p};for(let p=0,m=arguments.length;p<m;p++)arguments[p]&&ih(arguments[p],l);return n}const C5=(t,n,l,{allOwnKeys:p}={})=>(ih(n,(m,y)=>{l&&Po(m)?t[y]=sb(m,l):t[y]=m},{allOwnKeys:p}),t),A5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),I5=(t,n,l,p)=>{t.prototype=Object.create(n.prototype,p),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),l&&Object.assign(t.prototype,l)},k5=(t,n,l,p)=>{let m,y,x;const E={};if(n=n||{},t==null)return n;do{for(m=Object.getOwnPropertyNames(t),y=m.length;y-- >0;)x=m[y],(!p||p(x,t,n))&&!E[x]&&(n[x]=t[x],E[x]=!0);t=l!==!1&&Oy(t)}while(t&&(!l||l(t,n))&&t!==Object.prototype);return n},P5=(t,n,l)=>{t=String(t),(l===void 0||l>t.length)&&(l=t.length),l-=n.length;const p=t.indexOf(n,l);return p!==-1&&p===l},M5=t=>{if(!t)return null;if(xc(t))return t;let n=t.length;if(!ub(n))return null;const l=new Array(n);for(;n-- >0;)l[n]=t[n];return l},z5=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Oy(Uint8Array)),L5=(t,n)=>{const p=(t&&t[Symbol.iterator]).call(t);let m;for(;(m=p.next())&&!m.done;){const y=m.value;n.call(t,y[0],y[1])}},R5=(t,n)=>{let l;const p=[];for(;(l=t.exec(n))!==null;)p.push(l);return p},O5=va("HTMLFormElement"),D5=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,p,m){return p.toUpperCase()+m}),y0=(({hasOwnProperty:t})=>(n,l)=>t.call(n,l))(Object.prototype),B5=va("RegExp"),fb=(t,n)=>{const l=Object.getOwnPropertyDescriptors(t),p={};ih(l,(m,y)=>{n(m,y,t)!==!1&&(p[y]=m)}),Object.defineProperties(t,p)},F5=t=>{fb(t,(n,l)=>{if(Po(t)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const p=t[l];if(Po(p)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},N5=(t,n)=>{const l={},p=m=>{m.forEach(y=>{l[y]=!0})};return xc(t)?p(t):p(String(t).split(n)),l},U5=()=>{},V5=(t,n)=>(t=+t,Number.isFinite(t)?t:n),$m="abcdefghijklmnopqrstuvwxyz",v0="0123456789",db={DIGIT:v0,ALPHA:$m,ALPHA_DIGIT:$m+$m.toUpperCase()+v0},j5=(t=16,n=db.ALPHA_DIGIT)=>{let l="";const{length:p}=n;for(;t--;)l+=n[Math.random()*p|0];return l};function q5(t){return!!(t&&Po(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Z5=t=>{const n=new Array(10),l=(p,m)=>{if(Nd(p)){if(n.indexOf(p)>=0)return;if(!("toJSON"in p)){n[m]=p;const y=xc(p)?[]:{};return ih(p,(x,E)=>{const C=l(x,m+1);!Kp(C)&&(y[E]=C)}),n[m]=void 0,y}}return p};return l(t,0)},H5=va("AsyncFunction"),G5=t=>t&&(Nd(t)||Po(t))&&Po(t.then)&&Po(t.catch),je={isArray:xc,isArrayBuffer:lb,isBuffer:d5,isFormData:E5,isArrayBufferView:m5,isString:g5,isNumber:ub,isBoolean:y5,isObject:Nd,isPlainObject:Ff,isUndefined:Kp,isDate:v5,isFile:_5,isBlob:x5,isRegExp:B5,isFunction:Po,isStream:w5,isURLSearchParams:S5,isTypedArray:z5,isFileList:b5,forEach:ih,merge:Pg,extend:C5,trim:T5,stripBOM:A5,inherits:I5,toFlatObject:k5,kindOf:Bd,kindOfTest:va,endsWith:P5,toArray:M5,forEachEntry:L5,matchAll:R5,isHTMLForm:O5,hasOwnProperty:y0,hasOwnProp:y0,reduceDescriptors:fb,freezeMethods:F5,toObjectSet:N5,toCamelCase:D5,noop:U5,toFiniteNumber:V5,findKey:cb,global:pb,isContextDefined:hb,ALPHABET:db,generateString:j5,isSpecCompliantForm:q5,toJSONObject:Z5,isAsyncFn:H5,isThenable:G5};function Tr(t,n,l,p,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),l&&(this.config=l),p&&(this.request=p),m&&(this.response=m)}je.inherits(Tr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mb=Tr.prototype,gb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gb[t]={value:t}});Object.defineProperties(Tr,gb);Object.defineProperty(mb,"isAxiosError",{value:!0});Tr.from=(t,n,l,p,m,y)=>{const x=Object.create(mb);return je.toFlatObject(t,x,function(C){return C!==Error.prototype},E=>E!=="isAxiosError"),Tr.call(x,t.message,n,l,p,m),x.cause=t,x.name=t.name,y&&Object.assign(x,y),x};const $5=null;function Mg(t){return je.isPlainObject(t)||je.isArray(t)}function yb(t){return je.endsWith(t,"[]")?t.slice(0,-2):t}function _0(t,n,l){return t?t.concat(n).map(function(m,y){return m=yb(m),!l&&y?"["+m+"]":m}).join(l?".":""):n}function K5(t){return je.isArray(t)&&!t.some(Mg)}const W5=je.toFlatObject(je,{},null,function(n){return/^is[A-Z]/.test(n)});function Ud(t,n,l){if(!je.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,l=je.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ve,fe){return!je.isUndefined(fe[ve])});const p=l.metaTokens,m=l.visitor||B,y=l.dots,x=l.indexes,C=(l.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(n);if(!je.isFunction(m))throw new TypeError("visitor must be a function");function P(ne){if(ne===null)return"";if(je.isDate(ne))return ne.toISOString();if(!C&&je.isBlob(ne))throw new Tr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(ne)||je.isTypedArray(ne)?C&&typeof Blob=="function"?new Blob([ne]):Buffer.from(ne):ne}function B(ne,ve,fe){let pe=ne;if(ne&&!fe&&typeof ne=="object"){if(je.endsWith(ve,"{}"))ve=p?ve:ve.slice(0,-2),ne=JSON.stringify(ne);else if(je.isArray(ne)&&K5(ne)||(je.isFileList(ne)||je.endsWith(ve,"[]"))&&(pe=je.toArray(ne)))return ve=yb(ve),pe.forEach(function(be,_e){!(je.isUndefined(be)||be===null)&&n.append(x===!0?_0([ve],_e,y):x===null?ve:ve+"[]",P(be))}),!1}return Mg(ne)?!0:(n.append(_0(fe,ve,y),P(ne)),!1)}const U=[],ee=Object.assign(W5,{defaultVisitor:B,convertValue:P,isVisitable:Mg});function se(ne,ve){if(!je.isUndefined(ne)){if(U.indexOf(ne)!==-1)throw Error("Circular reference detected in "+ve.join("."));U.push(ne),je.forEach(ne,function(pe,ue){(!(je.isUndefined(pe)||pe===null)&&m.call(n,pe,je.isString(ue)?ue.trim():ue,ve,ee))===!0&&se(pe,ve?ve.concat(ue):[ue])}),U.pop()}}if(!je.isObject(t))throw new TypeError("data must be an object");return se(t),n}function x0(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(p){return n[p]})}function Dy(t,n){this._pairs=[],t&&Ud(t,this,n)}const vb=Dy.prototype;vb.append=function(n,l){this._pairs.push([n,l])};vb.toString=function(n){const l=n?function(p){return n.call(this,p,x0)}:x0;return this._pairs.map(function(m){return l(m[0])+"="+l(m[1])},"").join("&")};function X5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _b(t,n,l){if(!n)return t;const p=l&&l.encode||X5,m=l&&l.serialize;let y;if(m?y=m(n,l):y=je.isURLSearchParams(n)?n.toString():new Dy(n,l).toString(p),y){const x=t.indexOf("#");x!==-1&&(t=t.slice(0,x)),t+=(t.indexOf("?")===-1?"?":"&")+y}return t}class J5{constructor(){this.handlers=[]}use(n,l,p){return this.handlers.push({fulfilled:n,rejected:l,synchronous:p?p.synchronous:!1,runWhen:p?p.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){je.forEach(this.handlers,function(p){p!==null&&n(p)})}}const b0=J5,xb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Y5=typeof URLSearchParams<"u"?URLSearchParams:Dy,Q5=typeof FormData<"u"?FormData:null,eA=typeof Blob<"u"?Blob:null,tA=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),rA=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ga={isBrowser:!0,classes:{URLSearchParams:Y5,FormData:Q5,Blob:eA},isStandardBrowserEnv:tA,isStandardBrowserWebWorkerEnv:rA,protocols:["http","https","file","blob","url","data"]};function nA(t,n){return Ud(t,new ga.classes.URLSearchParams,Object.assign({visitor:function(l,p,m,y){return ga.isNode&&je.isBuffer(l)?(this.append(p,l.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},n))}function iA(t){return je.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function oA(t){const n={},l=Object.keys(t);let p;const m=l.length;let y;for(p=0;p<m;p++)y=l[p],n[y]=t[y];return n}function bb(t){function n(l,p,m,y){let x=l[y++];const E=Number.isFinite(+x),C=y>=l.length;return x=!x&&je.isArray(m)?m.length:x,C?(je.hasOwnProp(m,x)?m[x]=[m[x],p]:m[x]=p,!E):((!m[x]||!je.isObject(m[x]))&&(m[x]=[]),n(l,p,m[x],y)&&je.isArray(m[x])&&(m[x]=oA(m[x])),!E)}if(je.isFormData(t)&&je.isFunction(t.entries)){const l={};return je.forEachEntry(t,(p,m)=>{n(iA(p),m,l,0)}),l}return null}const aA={"Content-Type":void 0};function sA(t,n,l){if(je.isString(t))try{return(n||JSON.parse)(t),je.trim(t)}catch(p){if(p.name!=="SyntaxError")throw p}return(l||JSON.stringify)(t)}const Vd={transitional:xb,adapter:["xhr","http"],transformRequest:[function(n,l){const p=l.getContentType()||"",m=p.indexOf("application/json")>-1,y=je.isObject(n);if(y&&je.isHTMLForm(n)&&(n=new FormData(n)),je.isFormData(n))return m&&m?JSON.stringify(bb(n)):n;if(je.isArrayBuffer(n)||je.isBuffer(n)||je.isStream(n)||je.isFile(n)||je.isBlob(n))return n;if(je.isArrayBufferView(n))return n.buffer;if(je.isURLSearchParams(n))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let E;if(y){if(p.indexOf("application/x-www-form-urlencoded")>-1)return nA(n,this.formSerializer).toString();if((E=je.isFileList(n))||p.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Ud(E?{"files[]":n}:n,C&&new C,this.formSerializer)}}return y||m?(l.setContentType("application/json",!1),sA(n)):n}],transformResponse:[function(n){const l=this.transitional||Vd.transitional,p=l&&l.forcedJSONParsing,m=this.responseType==="json";if(n&&je.isString(n)&&(p&&!this.responseType||m)){const x=!(l&&l.silentJSONParsing)&&m;try{return JSON.parse(n)}catch(E){if(x)throw E.name==="SyntaxError"?Tr.from(E,Tr.ERR_BAD_RESPONSE,this,null,this.response):E}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ga.classes.FormData,Blob:ga.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};je.forEach(["delete","get","head"],function(n){Vd.headers[n]={}});je.forEach(["post","put","patch"],function(n){Vd.headers[n]=je.merge(aA)});const By=Vd,lA=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uA=t=>{const n={};let l,p,m;return t&&t.split(`
`).forEach(function(x){m=x.indexOf(":"),l=x.substring(0,m).trim().toLowerCase(),p=x.substring(m+1).trim(),!(!l||n[l]&&lA[l])&&(l==="set-cookie"?n[l]?n[l].push(p):n[l]=[p]:n[l]=n[l]?n[l]+", "+p:p)}),n},w0=Symbol("internals");function bp(t){return t&&String(t).trim().toLowerCase()}function Nf(t){return t===!1||t==null?t:je.isArray(t)?t.map(Nf):String(t)}function cA(t){const n=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let p;for(;p=l.exec(t);)n[p[1]]=p[2];return n}const pA=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Km(t,n,l,p,m){if(je.isFunction(p))return p.call(this,n,l);if(m&&(n=l),!!je.isString(n)){if(je.isString(p))return n.indexOf(p)!==-1;if(je.isRegExp(p))return p.test(n)}}function hA(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,l,p)=>l.toUpperCase()+p)}function fA(t,n){const l=je.toCamelCase(" "+n);["get","set","has"].forEach(p=>{Object.defineProperty(t,p+l,{value:function(m,y,x){return this[p].call(this,n,m,y,x)},configurable:!0})})}class jd{constructor(n){n&&this.set(n)}set(n,l,p){const m=this;function y(E,C,P){const B=bp(C);if(!B)throw new Error("header name must be a non-empty string");const U=je.findKey(m,B);(!U||m[U]===void 0||P===!0||P===void 0&&m[U]!==!1)&&(m[U||C]=Nf(E))}const x=(E,C)=>je.forEach(E,(P,B)=>y(P,B,C));return je.isPlainObject(n)||n instanceof this.constructor?x(n,l):je.isString(n)&&(n=n.trim())&&!pA(n)?x(uA(n),l):n!=null&&y(l,n,p),this}get(n,l){if(n=bp(n),n){const p=je.findKey(this,n);if(p){const m=this[p];if(!l)return m;if(l===!0)return cA(m);if(je.isFunction(l))return l.call(this,m,p);if(je.isRegExp(l))return l.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,l){if(n=bp(n),n){const p=je.findKey(this,n);return!!(p&&this[p]!==void 0&&(!l||Km(this,this[p],p,l)))}return!1}delete(n,l){const p=this;let m=!1;function y(x){if(x=bp(x),x){const E=je.findKey(p,x);E&&(!l||Km(p,p[E],E,l))&&(delete p[E],m=!0)}}return je.isArray(n)?n.forEach(y):y(n),m}clear(n){const l=Object.keys(this);let p=l.length,m=!1;for(;p--;){const y=l[p];(!n||Km(this,this[y],y,n,!0))&&(delete this[y],m=!0)}return m}normalize(n){const l=this,p={};return je.forEach(this,(m,y)=>{const x=je.findKey(p,y);if(x){l[x]=Nf(m),delete l[y];return}const E=n?hA(y):String(y).trim();E!==y&&delete l[y],l[E]=Nf(m),p[E]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const l=Object.create(null);return je.forEach(this,(p,m)=>{p!=null&&p!==!1&&(l[m]=n&&je.isArray(p)?p.join(", "):p)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,l])=>n+": "+l).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...l){const p=new this(n);return l.forEach(m=>p.set(m)),p}static accessor(n){const p=(this[w0]=this[w0]={accessors:{}}).accessors,m=this.prototype;function y(x){const E=bp(x);p[E]||(fA(m,x),p[E]=!0)}return je.isArray(n)?n.forEach(y):y(n),this}}jd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.freezeMethods(jd.prototype);je.freezeMethods(jd);const Ja=jd;function Wm(t,n){const l=this||By,p=n||l,m=Ja.from(p.headers);let y=p.data;return je.forEach(t,function(E){y=E.call(l,y,m.normalize(),n?n.status:void 0)}),m.normalize(),y}function wb(t){return!!(t&&t.__CANCEL__)}function oh(t,n,l){Tr.call(this,t??"canceled",Tr.ERR_CANCELED,n,l),this.name="CanceledError"}je.inherits(oh,Tr,{__CANCEL__:!0});function dA(t,n,l){const p=l.config.validateStatus;!l.status||!p||p(l.status)?t(l):n(new Tr("Request failed with status code "+l.status,[Tr.ERR_BAD_REQUEST,Tr.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}const mA=ga.isStandardBrowserEnv?function(){return{write:function(l,p,m,y,x,E){const C=[];C.push(l+"="+encodeURIComponent(p)),je.isNumber(m)&&C.push("expires="+new Date(m).toGMTString()),je.isString(y)&&C.push("path="+y),je.isString(x)&&C.push("domain="+x),E===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(l){const p=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function gA(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yA(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}function Eb(t,n){return t&&!gA(n)?yA(t,n):n}const vA=ga.isStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a");let p;function m(y){let x=y;return n&&(l.setAttribute("href",x),x=l.href),l.setAttribute("href",x),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return p=m(window.location.href),function(x){const E=je.isString(x)?m(x):x;return E.protocol===p.protocol&&E.host===p.host}}():function(){return function(){return!0}}();function _A(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function xA(t,n){t=t||10;const l=new Array(t),p=new Array(t);let m=0,y=0,x;return n=n!==void 0?n:1e3,function(C){const P=Date.now(),B=p[y];x||(x=P),l[m]=C,p[m]=P;let U=y,ee=0;for(;U!==m;)ee+=l[U++],U=U%t;if(m=(m+1)%t,m===y&&(y=(y+1)%t),P-x<n)return;const se=B&&P-B;return se?Math.round(ee*1e3/se):void 0}}function E0(t,n){let l=0;const p=xA(50,250);return m=>{const y=m.loaded,x=m.lengthComputable?m.total:void 0,E=y-l,C=p(E),P=y<=x;l=y;const B={loaded:y,total:x,progress:x?y/x:void 0,bytes:E,rate:C||void 0,estimated:C&&x&&P?(x-y)/C:void 0,event:m};B[n?"download":"upload"]=!0,t(B)}}const bA=typeof XMLHttpRequest<"u",wA=bA&&function(t){return new Promise(function(l,p){let m=t.data;const y=Ja.from(t.headers).normalize(),x=t.responseType;let E;function C(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}je.isFormData(m)&&(ga.isStandardBrowserEnv||ga.isStandardBrowserWebWorkerEnv?y.setContentType(!1):y.setContentType("multipart/form-data;",!1));let P=new XMLHttpRequest;if(t.auth){const se=t.auth.username||"",ne=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.set("Authorization","Basic "+btoa(se+":"+ne))}const B=Eb(t.baseURL,t.url);P.open(t.method.toUpperCase(),_b(B,t.params,t.paramsSerializer),!0),P.timeout=t.timeout;function U(){if(!P)return;const se=Ja.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),ve={data:!x||x==="text"||x==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:se,config:t,request:P};dA(function(pe){l(pe),C()},function(pe){p(pe),C()},ve),P=null}if("onloadend"in P?P.onloadend=U:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(U)},P.onabort=function(){P&&(p(new Tr("Request aborted",Tr.ECONNABORTED,t,P)),P=null)},P.onerror=function(){p(new Tr("Network Error",Tr.ERR_NETWORK,t,P)),P=null},P.ontimeout=function(){let ne=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const ve=t.transitional||xb;t.timeoutErrorMessage&&(ne=t.timeoutErrorMessage),p(new Tr(ne,ve.clarifyTimeoutError?Tr.ETIMEDOUT:Tr.ECONNABORTED,t,P)),P=null},ga.isStandardBrowserEnv){const se=(t.withCredentials||vA(B))&&t.xsrfCookieName&&mA.read(t.xsrfCookieName);se&&y.set(t.xsrfHeaderName,se)}m===void 0&&y.setContentType(null),"setRequestHeader"in P&&je.forEach(y.toJSON(),function(ne,ve){P.setRequestHeader(ve,ne)}),je.isUndefined(t.withCredentials)||(P.withCredentials=!!t.withCredentials),x&&x!=="json"&&(P.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&P.addEventListener("progress",E0(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",E0(t.onUploadProgress)),(t.cancelToken||t.signal)&&(E=se=>{P&&(p(!se||se.type?new oh(null,t,P):se),P.abort(),P=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E)));const ee=_A(B);if(ee&&ga.protocols.indexOf(ee)===-1){p(new Tr("Unsupported protocol "+ee+":",Tr.ERR_BAD_REQUEST,t));return}P.send(m||null)})},Uf={http:$5,xhr:wA};je.forEach(Uf,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const EA={getAdapter:t=>{t=je.isArray(t)?t:[t];const{length:n}=t;let l,p;for(let m=0;m<n&&(l=t[m],!(p=je.isString(l)?Uf[l.toLowerCase()]:l));m++);if(!p)throw p===!1?new Tr(`Adapter ${l} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(je.hasOwnProp(Uf,l)?`Adapter '${l}' is not available in the build`:`Unknown adapter '${l}'`);if(!je.isFunction(p))throw new TypeError("adapter is not a function");return p},adapters:Uf};function Xm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new oh(null,t)}function S0(t){return Xm(t),t.headers=Ja.from(t.headers),t.data=Wm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),EA.getAdapter(t.adapter||By.adapter)(t).then(function(p){return Xm(t),p.data=Wm.call(t,t.transformResponse,p),p.headers=Ja.from(p.headers),p},function(p){return wb(p)||(Xm(t),p&&p.response&&(p.response.data=Wm.call(t,t.transformResponse,p.response),p.response.headers=Ja.from(p.response.headers))),Promise.reject(p)})}const T0=t=>t instanceof Ja?t.toJSON():t;function dc(t,n){n=n||{};const l={};function p(P,B,U){return je.isPlainObject(P)&&je.isPlainObject(B)?je.merge.call({caseless:U},P,B):je.isPlainObject(B)?je.merge({},B):je.isArray(B)?B.slice():B}function m(P,B,U){if(je.isUndefined(B)){if(!je.isUndefined(P))return p(void 0,P,U)}else return p(P,B,U)}function y(P,B){if(!je.isUndefined(B))return p(void 0,B)}function x(P,B){if(je.isUndefined(B)){if(!je.isUndefined(P))return p(void 0,P)}else return p(void 0,B)}function E(P,B,U){if(U in n)return p(P,B);if(U in t)return p(void 0,P)}const C={url:y,method:y,data:y,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:E,headers:(P,B)=>m(T0(P),T0(B),!0)};return je.forEach(Object.keys(Object.assign({},t,n)),function(B){const U=C[B]||m,ee=U(t[B],n[B],B);je.isUndefined(ee)&&U!==E||(l[B]=ee)}),l}const Sb="1.4.0",Fy={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Fy[t]=function(p){return typeof p===t||"a"+(n<1?"n ":" ")+t}});const C0={};Fy.transitional=function(n,l,p){function m(y,x){return"[Axios v"+Sb+"] Transitional option '"+y+"'"+x+(p?". "+p:"")}return(y,x,E)=>{if(n===!1)throw new Tr(m(x," has been removed"+(l?" in "+l:"")),Tr.ERR_DEPRECATED);return l&&!C0[x]&&(C0[x]=!0,console.warn(m(x," has been deprecated since v"+l+" and will be removed in the near future"))),n?n(y,x,E):!0}};function SA(t,n,l){if(typeof t!="object")throw new Tr("options must be an object",Tr.ERR_BAD_OPTION_VALUE);const p=Object.keys(t);let m=p.length;for(;m-- >0;){const y=p[m],x=n[y];if(x){const E=t[y],C=E===void 0||x(E,y,t);if(C!==!0)throw new Tr("option "+y+" must be "+C,Tr.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new Tr("Unknown option "+y,Tr.ERR_BAD_OPTION)}}const zg={assertOptions:SA,validators:Fy},Ts=zg.validators;class ld{constructor(n){this.defaults=n,this.interceptors={request:new b0,response:new b0}}request(n,l){typeof n=="string"?(l=l||{},l.url=n):l=n||{},l=dc(this.defaults,l);const{transitional:p,paramsSerializer:m,headers:y}=l;p!==void 0&&zg.assertOptions(p,{silentJSONParsing:Ts.transitional(Ts.boolean),forcedJSONParsing:Ts.transitional(Ts.boolean),clarifyTimeoutError:Ts.transitional(Ts.boolean)},!1),m!=null&&(je.isFunction(m)?l.paramsSerializer={serialize:m}:zg.assertOptions(m,{encode:Ts.function,serialize:Ts.function},!0)),l.method=(l.method||this.defaults.method||"get").toLowerCase();let x;x=y&&je.merge(y.common,y[l.method]),x&&je.forEach(["delete","get","head","post","put","patch","common"],ne=>{delete y[ne]}),l.headers=Ja.concat(x,y);const E=[];let C=!0;this.interceptors.request.forEach(function(ve){typeof ve.runWhen=="function"&&ve.runWhen(l)===!1||(C=C&&ve.synchronous,E.unshift(ve.fulfilled,ve.rejected))});const P=[];this.interceptors.response.forEach(function(ve){P.push(ve.fulfilled,ve.rejected)});let B,U=0,ee;if(!C){const ne=[S0.bind(this),void 0];for(ne.unshift.apply(ne,E),ne.push.apply(ne,P),ee=ne.length,B=Promise.resolve(l);U<ee;)B=B.then(ne[U++],ne[U++]);return B}ee=E.length;let se=l;for(U=0;U<ee;){const ne=E[U++],ve=E[U++];try{se=ne(se)}catch(fe){ve.call(this,fe);break}}try{B=S0.call(this,se)}catch(ne){return Promise.reject(ne)}for(U=0,ee=P.length;U<ee;)B=B.then(P[U++],P[U++]);return B}getUri(n){n=dc(this.defaults,n);const l=Eb(n.baseURL,n.url);return _b(l,n.params,n.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(n){ld.prototype[n]=function(l,p){return this.request(dc(p||{},{method:n,url:l,data:(p||{}).data}))}});je.forEach(["post","put","patch"],function(n){function l(p){return function(y,x,E){return this.request(dc(E||{},{method:n,headers:p?{"Content-Type":"multipart/form-data"}:{},url:y,data:x}))}}ld.prototype[n]=l(),ld.prototype[n+"Form"]=l(!0)});const Vf=ld;class Ny{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(y){l=y});const p=this;this.promise.then(m=>{if(!p._listeners)return;let y=p._listeners.length;for(;y-- >0;)p._listeners[y](m);p._listeners=null}),this.promise.then=m=>{let y;const x=new Promise(E=>{p.subscribe(E),y=E}).then(m);return x.cancel=function(){p.unsubscribe(y)},x},n(function(y,x,E){p.reason||(p.reason=new oh(y,x,E),l(p.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const l=this._listeners.indexOf(n);l!==-1&&this._listeners.splice(l,1)}static source(){let n;return{token:new Ny(function(m){n=m}),cancel:n}}}const TA=Ny;function CA(t){return function(l){return t.apply(null,l)}}function AA(t){return je.isObject(t)&&t.isAxiosError===!0}const Lg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lg).forEach(([t,n])=>{Lg[n]=t});const IA=Lg;function Tb(t){const n=new Vf(t),l=sb(Vf.prototype.request,n);return je.extend(l,Vf.prototype,n,{allOwnKeys:!0}),je.extend(l,n,null,{allOwnKeys:!0}),l.create=function(m){return Tb(dc(t,m))},l}const $n=Tb(By);$n.Axios=Vf;$n.CanceledError=oh;$n.CancelToken=TA;$n.isCancel=wb;$n.VERSION=Sb;$n.toFormData=Ud;$n.AxiosError=Tr;$n.Cancel=$n.CanceledError;$n.all=function(n){return Promise.all(n)};$n.spread=CA;$n.isAxiosError=AA;$n.mergeConfig=dc;$n.AxiosHeaders=Ja;$n.formToJSON=t=>bb(je.isHTMLForm(t)?new FormData(t):t);$n.HttpStatusCode=IA;$n.default=$n;const zp=$n;var bc=PA,kA=Object.prototype.hasOwnProperty;function PA(){for(var t={},n=0;n<arguments.length;n++){var l=arguments[n];for(var p in l)kA.call(l,p)&&(t[p]=l[p])}return t}var Cb={exports:{}};(function(t,n){(function(){var l={};t.exports=l,l.simpleFilter=function(p,m){return m.filter(function(y){return l.test(p,y)})},l.test=function(p,m){return l.match(p,m)!==null},l.match=function(p,m,y){y=y||{};var x=0,E=[],C=m.length,P=0,B=0,U=y.pre||"",ee=y.post||"",se=y.caseSensitive&&m||m.toLowerCase(),ne;p=y.caseSensitive&&p||p.toLowerCase();for(var ve=0;ve<C;ve++)ne=m[ve],se[ve]===p[x]?(ne=U+ne+ee,x+=1,B+=1+B):B=0,P+=B,E[E.length]=ne;return x===p.length?(P=se===p?1/0:P,{rendered:E.join(""),score:P}):null},l.filter=function(p,m,y){return!m||m.length===0?[]:typeof p!="string"?m:(y=y||{},m.reduce(function(x,E,C,P){var B=E;y.extract&&(B=y.extract(E));var U=l.match(p,B,y);return U!=null&&(x[x.length]={string:U.rendered,score:U.score,index:C,original:E}),x},[]).sort(function(x,E){var C=E.score-x.score;return C||x.index-E.index}))}})()})(Cb);var MA=Cb.exports,Qi=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};Qi.prototype.show=function(){this.element.style.display="block"};Qi.prototype.hide=function(){this.element.style.display="none"};Qi.prototype.add=function(t){this.items.push(t)};Qi.prototype.clear=function(){this.items=[],this.active=0};Qi.prototype.isEmpty=function(){return!this.items.length};Qi.prototype.isVisible=function(){return this.element.style.display==="block"};Qi.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};Qi.prototype.drawItem=function(t,n){var l=document.createElement("li"),p=document.createElement("a");n&&(l.className+=" active"),p.innerHTML=t.string,l.appendChild(p),this.element.appendChild(l),l.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),l.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))};Qi.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};Qi.prototype.move=function(t){this.active=t,this.draw()};Qi.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Qi.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Qi.prototype.drawError=function(t){var n=document.createElement("li");n.innerHTML=t,this.element.appendChild(n),this.show()};var zA=Qi,LA=bc,RA=MA,OA=zA,Ai=function(t,n,l){return l=l||{},this.options=LA({minLength:2,limit:5,filter:!0,hideOnBlur:!0},l),this.el=t,this.data=n||[],this.list=new OA(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(p){this.handleKeyUp(p.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(p){this.handleKeyDown(p)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(p){this.handlePaste(p)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Ai.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};Ai.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Ai.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Ai.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var n=this;setTimeout(function(){n.handleInputChange(t.target.value)},100)}};Ai.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(n){for(var l=0;l<n.length&&(this.list.add(n[l]),l!==this.options.limit-1);l++);this.list.draw()}.bind(this))};Ai.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Ai.prototype.update=function(t){this.data=t,this.handleKeyUp()};Ai.prototype.clear=function(){this.data=[],this.list.clear()};Ai.prototype.normalize=function(t){return t=t.toLowerCase(),t};Ai.prototype.match=function(t,n){return t.indexOf(n)>-1};Ai.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),this.el.dispatchEvent(n)}else this.el.fireEvent("onchange")};Ai.prototype.getCandidates=function(t){var n={pre:"<strong>",post:"</strong>",extract:function(p){return this.getItemValue(p)}.bind(this)},l;this.options.filter?(l=RA.filter(this.query,this.data,n),l=l.map(function(p){return{original:p.original,string:this.render(p.original,p.string)}}.bind(this))):l=this.data.map(function(p){var m=this.render(p);return{original:p,string:m}}.bind(this)),t(l)};Ai.prototype.getItemValue=function(t){return t};Ai.prototype.render=function(t,n){if(n)return n;for(var l=t.original?this.getItemValue(t.original):this.getItemValue(t),p=this.normalize(l),m=p.lastIndexOf(this.query);m>-1;){var y=m+this.query.length;l=l.slice(0,m)+"<strong>"+l.slice(m,y)+"</strong>"+l.slice(y),m=p.slice(0,m).lastIndexOf(this.query)}return l};Ai.prototype.renderError=function(t){this.list.drawError(t)};var DA=Ai,Ab=DA,BA=Ab;typeof window<"u"&&(window.Suggestions=Ab);var FA="Expected a function",A0=0/0,NA="[object Symbol]",UA=/^\s+|\s+$/g,VA=/^[-+]0x[0-9a-f]+$/i,jA=/^0b[01]+$/i,qA=/^0o[0-7]+$/i,ZA=parseInt,HA=typeof fo=="object"&&fo&&fo.Object===Object&&fo,GA=typeof self=="object"&&self&&self.Object===Object&&self,$A=HA||GA||Function("return this")(),KA=Object.prototype,WA=KA.toString,XA=Math.max,JA=Math.min,Jm=function(){return $A.Date.now()};function YA(t,n,l){var p,m,y,x,E,C,P=0,B=!1,U=!1,ee=!0;if(typeof t!="function")throw new TypeError(FA);n=I0(n)||0,Rg(l)&&(B=!!l.leading,U="maxWait"in l,y=U?XA(I0(l.maxWait)||0,n):y,ee="trailing"in l?!!l.trailing:ee);function se(f){var ke=p,Y=m;return p=m=void 0,P=f,x=t.apply(Y,ke),x}function ne(f){return P=f,E=setTimeout(pe,n),B?se(f):x}function ve(f){var ke=f-C,Y=f-P,Fe=n-ke;return U?JA(Fe,y-Y):Fe}function fe(f){var ke=f-C,Y=f-P;return C===void 0||ke>=n||ke<0||U&&Y>=y}function pe(){var f=Jm();if(fe(f))return ue(f);E=setTimeout(pe,ve(f))}function ue(f){return E=void 0,ee&&p?se(f):(p=m=void 0,x)}function be(){E!==void 0&&clearTimeout(E),P=0,p=C=m=E=void 0}function _e(){return E===void 0?x:ue(Jm())}function Oe(){var f=Jm(),ke=fe(f);if(p=arguments,m=this,C=f,ke){if(E===void 0)return ne(C);if(U)return E=setTimeout(pe,n),se(C)}return E===void 0&&(E=setTimeout(pe,n)),x}return Oe.cancel=be,Oe.flush=_e,Oe}function Rg(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function QA(t){return!!t&&typeof t=="object"}function eI(t){return typeof t=="symbol"||QA(t)&&WA.call(t)==NA}function I0(t){if(typeof t=="number")return t;if(eI(t))return A0;if(Rg(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Rg(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(UA,"");var l=jA.test(t);return l||qA.test(t)?ZA(t.slice(2),l?2:8):VA.test(t)?A0:+t}var tI=YA,Uy={exports:{}},ic=typeof Reflect=="object"?Reflect:null,k0=ic&&typeof ic.apply=="function"?ic.apply:function(n,l,p){return Function.prototype.apply.call(n,l,p)},jf;ic&&typeof ic.ownKeys=="function"?jf=ic.ownKeys:Object.getOwnPropertySymbols?jf=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:jf=function(n){return Object.getOwnPropertyNames(n)};function rI(t){console&&console.warn&&console.warn(t)}var Ib=Number.isNaN||function(n){return n!==n};function Ur(){Ur.init.call(this)}Uy.exports=Ur;Uy.exports.once=aI;Ur.EventEmitter=Ur;Ur.prototype._events=void 0;Ur.prototype._eventsCount=0;Ur.prototype._maxListeners=void 0;var P0=10;function qd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ur,"defaultMaxListeners",{enumerable:!0,get:function(){return P0},set:function(t){if(typeof t!="number"||t<0||Ib(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");P0=t}});Ur.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ur.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||Ib(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function kb(t){return t._maxListeners===void 0?Ur.defaultMaxListeners:t._maxListeners}Ur.prototype.getMaxListeners=function(){return kb(this)};Ur.prototype.emit=function(n){for(var l=[],p=1;p<arguments.length;p++)l.push(arguments[p]);var m=n==="error",y=this._events;if(y!==void 0)m=m&&y.error===void 0;else if(!m)return!1;if(m){var x;if(l.length>0&&(x=l[0]),x instanceof Error)throw x;var E=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw E.context=x,E}var C=y[n];if(C===void 0)return!1;if(typeof C=="function")k0(C,this,l);else for(var P=C.length,B=Rb(C,P),p=0;p<P;++p)k0(B[p],this,l);return!0};function Pb(t,n,l,p){var m,y,x;if(qd(l),y=t._events,y===void 0?(y=t._events=Object.create(null),t._eventsCount=0):(y.newListener!==void 0&&(t.emit("newListener",n,l.listener?l.listener:l),y=t._events),x=y[n]),x===void 0)x=y[n]=l,++t._eventsCount;else if(typeof x=="function"?x=y[n]=p?[l,x]:[x,l]:p?x.unshift(l):x.push(l),m=kb(t),m>0&&x.length>m&&!x.warned){x.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=t,E.type=n,E.count=x.length,rI(E)}return t}Ur.prototype.addListener=function(n,l){return Pb(this,n,l,!1)};Ur.prototype.on=Ur.prototype.addListener;Ur.prototype.prependListener=function(n,l){return Pb(this,n,l,!0)};function nI(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mb(t,n,l){var p={fired:!1,wrapFn:void 0,target:t,type:n,listener:l},m=nI.bind(p);return m.listener=l,p.wrapFn=m,m}Ur.prototype.once=function(n,l){return qd(l),this.on(n,Mb(this,n,l)),this};Ur.prototype.prependOnceListener=function(n,l){return qd(l),this.prependListener(n,Mb(this,n,l)),this};Ur.prototype.removeListener=function(n,l){var p,m,y,x,E;if(qd(l),m=this._events,m===void 0)return this;if(p=m[n],p===void 0)return this;if(p===l||p.listener===l)--this._eventsCount===0?this._events=Object.create(null):(delete m[n],m.removeListener&&this.emit("removeListener",n,p.listener||l));else if(typeof p!="function"){for(y=-1,x=p.length-1;x>=0;x--)if(p[x]===l||p[x].listener===l){E=p[x].listener,y=x;break}if(y<0)return this;y===0?p.shift():iI(p,y),p.length===1&&(m[n]=p[0]),m.removeListener!==void 0&&this.emit("removeListener",n,E||l)}return this};Ur.prototype.off=Ur.prototype.removeListener;Ur.prototype.removeAllListeners=function(n){var l,p,m;if(p=this._events,p===void 0)return this;if(p.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):p[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete p[n]),this;if(arguments.length===0){var y=Object.keys(p),x;for(m=0;m<y.length;++m)x=y[m],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(l=p[n],typeof l=="function")this.removeListener(n,l);else if(l!==void 0)for(m=l.length-1;m>=0;m--)this.removeListener(n,l[m]);return this};function zb(t,n,l){var p=t._events;if(p===void 0)return[];var m=p[n];return m===void 0?[]:typeof m=="function"?l?[m.listener||m]:[m]:l?oI(m):Rb(m,m.length)}Ur.prototype.listeners=function(n){return zb(this,n,!0)};Ur.prototype.rawListeners=function(n){return zb(this,n,!1)};Ur.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):Lb.call(t,n)};Ur.prototype.listenerCount=Lb;function Lb(t){var n=this._events;if(n!==void 0){var l=n[t];if(typeof l=="function")return 1;if(l!==void 0)return l.length}return 0}Ur.prototype.eventNames=function(){return this._eventsCount>0?jf(this._events):[]};function Rb(t,n){for(var l=new Array(n),p=0;p<n;++p)l[p]=t[p];return l}function iI(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function oI(t){for(var n=new Array(t.length),l=0;l<n.length;++l)n[l]=t[l].listener||t[l];return n}function aI(t,n){return new Promise(function(l,p){function m(x){t.removeListener(n,y),p(x)}function y(){typeof t.removeListener=="function"&&t.removeListener("error",m),l([].slice.call(arguments))}Ob(t,n,y,{once:!0}),n!=="error"&&sI(t,m,{once:!0})})}function sI(t,n,l){typeof t.on=="function"&&Ob(t,"error",n,l)}function Ob(t,n,l,p){if(typeof t.on=="function")p.once?t.once(n,l):t.on(n,l);else if(typeof t.addEventListener=="function")t.addEventListener(n,function m(y){p.once&&t.removeEventListener(n,m),l(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var lI=Uy.exports,uI={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function cI(t){var n=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n?{key:n[1],value:n[2]}:null}function pI(t){var n=t.match(/<?([^>]*)>(.*)/);if(!n)return null;var l=n[1],p=n[2].split(";"),m=null,y=p.reduce(function(x,E){var C=cI(E);return C?C.key==="rel"?(m||(m=C.value),x):(x[C.key]=C.value,x):x},{});return m?{url:l,rel:m,params:y}:null}function hI(t){return t?t.split(/,\s*</).reduce(function(n,l){var p=pI(l);if(!p)return n;var m=p.rel.split(/\s+/);return m.forEach(function(y){n[y]||(n[y]={url:p.url,params:p.params})}),n},{}):{}}var fI=hI,dI=fI;function Vy(t,n){this.request=t,this.headers=n.headers,this.rawBody=n.body,this.statusCode=n.statusCode;try{this.body=JSON.parse(n.body||"{}")}catch{this.body=n.body}this.links=dI(this.headers.link)}Vy.prototype.hasNextPage=function(){return!!this.links.next};Vy.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var mI=Vy,Zd={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},M0=Zd;function gI(t){var n=t.type||M0.ERROR_HTTP,l;if(t.body)try{l=JSON.parse(t.body)}catch{l=t.body}else l=null;var p=t.message||null;p||(typeof l=="string"?p=l:l&&typeof l.message=="string"?p=l.message:n===M0.ERROR_REQUEST_ABORTED&&(p="Request aborted")),this.message=p,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=l}var yI=gI;function vI(t){var n=t.indexOf(":"),l=t.substring(0,n).trim().toLowerCase(),p=t.substring(n+1).trim();return{name:l,value:p}}function _I(t){var n={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(l){var p=vI(l);n[p.name]=p.value}),n}var xI=_I,bI=mI,z0=yI,Ym=Zd,wI=xI,ud={};function EI(t){var n=ud[t.id];n&&(n.abort(),delete ud[t.id])}function SI(t,n){return new bI(t,{body:n.response,headers:wI(n.getAllResponseHeaders()),statusCode:n.status})}function L0(t){var n=t.total,l=t.loaded,p=100*l/n;return{total:n,transferred:l,percent:p}}function Db(t,n){return new Promise(function(l,p){n.onprogress=function(x){t.emitter.emit(Ym.EVENT_PROGRESS_DOWNLOAD,L0(x))};var m=t.file;m&&(n.upload.onprogress=function(x){t.emitter.emit(Ym.EVENT_PROGRESS_UPLOAD,L0(x))}),n.onerror=function(x){p(x)},n.onabort=function(){var x=new z0({request:t,type:Ym.ERROR_REQUEST_ABORTED});p(x)},n.onload=function(){if(delete ud[t.id],n.status<200||n.status>=400){var x=new z0({request:t,body:n.response,statusCode:n.status});p(x);return}l(n)};var y=t.body;typeof y=="string"?n.send(y):y?n.send(JSON.stringify(y)):m?n.send(m):n.send(),ud[t.id]=n}).then(function(l){return SI(t,l)})}function Bb(t,n){var l=t.url(n),p=new window.XMLHttpRequest;return p.open(t.method,l),Object.keys(t.headers).forEach(function(m){p.setRequestHeader(m,t.headers[m])}),p}function TI(t){return Promise.resolve().then(function(){var n=Bb(t,t.client.accessToken);return Db(t,n)})}var CI={browserAbort:EI,sendRequestXhr:Db,browserSend:TI,createRequestXhr:Bb},cd={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */cd.exports;(function(t,n){(function(l){var p=n,m=t&&t.exports==p&&t,y=typeof fo=="object"&&fo;(y.global===y||y.window===y)&&(l=y);var x=function(ne){this.message=ne};x.prototype=new Error,x.prototype.name="InvalidCharacterError";var E=function(ne){throw new x(ne)},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=/[\t\n\f\r ]/g,B=function(ne){ne=String(ne).replace(P,"");var ve=ne.length;ve%4==0&&(ne=ne.replace(/==?$/,""),ve=ne.length),(ve%4==1||/[^+a-zA-Z0-9/]/.test(ne))&&E("Invalid character: the string to be decoded is not correctly encoded.");for(var fe=0,pe,ue,be="",_e=-1;++_e<ve;)ue=C.indexOf(ne.charAt(_e)),pe=fe%4?pe*64+ue:ue,fe++%4&&(be+=String.fromCharCode(255&pe>>(-2*fe&6)));return be},U=function(ne){ne=String(ne),/[^\0-\xFF]/.test(ne)&&E("The string to be encoded contains characters outside of the Latin1 range.");for(var ve=ne.length%3,fe="",pe=-1,ue,be,_e,Oe,f=ne.length-ve;++pe<f;)ue=ne.charCodeAt(pe)<<16,be=ne.charCodeAt(++pe)<<8,_e=ne.charCodeAt(++pe),Oe=ue+be+_e,fe+=C.charAt(Oe>>18&63)+C.charAt(Oe>>12&63)+C.charAt(Oe>>6&63)+C.charAt(Oe&63);return ve==2?(ue=ne.charCodeAt(pe)<<8,be=ne.charCodeAt(++pe),Oe=ue+be,fe+=C.charAt(Oe>>10)+C.charAt(Oe>>4&63)+C.charAt(Oe<<2&63)+"="):ve==1&&(Oe=ne.charCodeAt(pe),fe+=C.charAt(Oe>>2)+C.charAt(Oe<<4&63)+"=="),fe},ee={encode:U,decode:B,version:"0.1.0"};if(p&&!p.nodeType)if(m)m.exports=ee;else for(var se in ee)ee.hasOwnProperty(se)&&(p[se]=ee[se]);else l.base64=ee})(fo)})(cd,cd.exports);var AI=cd.exports,II=AI,Qm={};function kI(t){if(Qm[t])return Qm[t];var n=t.split("."),l=n[0],p=n[1];if(!p)throw new Error("Invalid token");var m=PI(p),y={usage:l,user:m.u};return Tl(m,"a")&&(y.authorization=m.a),Tl(m,"exp")&&(y.expires=m.exp*1e3),Tl(m,"iat")&&(y.created=m.iat*1e3),Tl(m,"scopes")&&(y.scopes=m.scopes),Tl(m,"client")&&(y.client=m.client),Tl(m,"ll")&&(y.lastLogin=m.ll),Tl(m,"iu")&&(y.impersonator=m.iu),Qm[t]=y,y}function PI(t){try{return JSON.parse(II.decode(t))}catch{throw new Error("Invalid token")}}function Tl(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var Fb=kI,Nb={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,l="~";function p(){}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(l=!1));function m(C,P,B){this.fn=C,this.context=P,this.once=B||!1}function y(C,P,B,U,ee){if(typeof B!="function")throw new TypeError("The listener must be a function");var se=new m(B,U||C,ee),ne=l?l+P:P;return C._events[ne]?C._events[ne].fn?C._events[ne]=[C._events[ne],se]:C._events[ne].push(se):(C._events[ne]=se,C._eventsCount++),C}function x(C,P){--C._eventsCount===0?C._events=new p:delete C._events[P]}function E(){this._events=new p,this._eventsCount=0}E.prototype.eventNames=function(){var P=[],B,U;if(this._eventsCount===0)return P;for(U in B=this._events)n.call(B,U)&&P.push(l?U.slice(1):U);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(B)):P},E.prototype.listeners=function(P){var B=l?l+P:P,U=this._events[B];if(!U)return[];if(U.fn)return[U.fn];for(var ee=0,se=U.length,ne=new Array(se);ee<se;ee++)ne[ee]=U[ee].fn;return ne},E.prototype.listenerCount=function(P){var B=l?l+P:P,U=this._events[B];return U?U.fn?1:U.length:0},E.prototype.emit=function(P,B,U,ee,se,ne){var ve=l?l+P:P;if(!this._events[ve])return!1;var fe=this._events[ve],pe=arguments.length,ue,be;if(fe.fn){switch(fe.once&&this.removeListener(P,fe.fn,void 0,!0),pe){case 1:return fe.fn.call(fe.context),!0;case 2:return fe.fn.call(fe.context,B),!0;case 3:return fe.fn.call(fe.context,B,U),!0;case 4:return fe.fn.call(fe.context,B,U,ee),!0;case 5:return fe.fn.call(fe.context,B,U,ee,se),!0;case 6:return fe.fn.call(fe.context,B,U,ee,se,ne),!0}for(be=1,ue=new Array(pe-1);be<pe;be++)ue[be-1]=arguments[be];fe.fn.apply(fe.context,ue)}else{var _e=fe.length,Oe;for(be=0;be<_e;be++)switch(fe[be].once&&this.removeListener(P,fe[be].fn,void 0,!0),pe){case 1:fe[be].fn.call(fe[be].context);break;case 2:fe[be].fn.call(fe[be].context,B);break;case 3:fe[be].fn.call(fe[be].context,B,U);break;case 4:fe[be].fn.call(fe[be].context,B,U,ee);break;default:if(!ue)for(Oe=1,ue=new Array(pe-1);Oe<pe;Oe++)ue[Oe-1]=arguments[Oe];fe[be].fn.apply(fe[be].context,ue)}}return!0},E.prototype.on=function(P,B,U){return y(this,P,B,U,!1)},E.prototype.once=function(P,B,U){return y(this,P,B,U,!0)},E.prototype.removeListener=function(P,B,U,ee){var se=l?l+P:P;if(!this._events[se])return this;if(!B)return x(this,se),this;var ne=this._events[se];if(ne.fn)ne.fn===B&&(!ee||ne.once)&&(!U||ne.context===U)&&x(this,se);else{for(var ve=0,fe=[],pe=ne.length;ve<pe;ve++)(ne[ve].fn!==B||ee&&!ne[ve].once||U&&ne[ve].context!==U)&&fe.push(ne[ve]);fe.length?this._events[se]=fe.length===1?fe[0]:fe:x(this,se)}return this},E.prototype.removeAllListeners=function(P){var B;return P?(B=l?l+P:P,this._events[B]&&x(this,B)):(this._events=new p,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=l,E.EventEmitter=E,t.exports=E})(Nb);var MI=Nb.exports;function zI(t){return t.map(encodeURIComponent).join(",")}function Ub(t){return Array.isArray(t)?zI(t):encodeURIComponent(String(t))}function Vb(t,n,l){if(l===!1||l===null)return t;var p=/\?/.test(t)?"&":"?",m=encodeURIComponent(n);return l!==void 0&&l!==""&&l!==!0&&(m+="="+Ub(l)),""+t+p+m}function LI(t,n){if(!n)return t;var l=t;return Object.keys(n).forEach(function(p){var m=n[p];m!==void 0&&(Array.isArray(m)&&(m=m.filter(function(y){return y!=null}).join(",")),l=Vb(l,p,m))}),l}function RI(t,n){if(!n||t.slice(0,4)==="http")return t;var l=t[0]==="/"?"":"/";return""+n.replace(/\/$/,"")+l+t}function OI(t,n){return n?t.replace(/\/:([a-zA-Z0-9]+)/g,function(l,p){var m=n[p];if(m===void 0)throw new Error("Unspecified route parameter "+p);var y=Ub(m);return"/"+y}):t}var DI={appendQueryObject:LI,appendQueryParam:Vb,prependOrigin:RI,interpolateRouteParams:OI},BI=Fb,jy=bc,FI=MI,Mf=DI,R0=Zd,NI=1;function Fs(t,n){if(!t)throw new Error("MapiRequest requires a client");if(!n||!n.path||!n.method)throw new Error("MapiRequest requires an options object with path and method properties");var l={};n.body&&(l["content-type"]="application/json");var p=jy(l,n.headers),m=Object.keys(p).reduce(function(y,x){return y[x.toLowerCase()]=p[x],y},{});this.id=NI++,this._options=n,this.emitter=new FI,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=n.path,this.method=n.method,this.origin=n.origin||t.origin,this.query=n.query||{},this.params=n.params||{},this.body=n.body||null,this.file=n.file||null,this.encoding=n.encoding||"utf8",this.sendFileAs=n.sendFileAs||null,this.headers=m}Fs.prototype.url=function(n){var l=Mf.prependOrigin(this.path,this.origin);l=Mf.appendQueryObject(l,this.query);var p=this.params,m=n??this.client.accessToken;if(m){l=Mf.appendQueryParam(l,"access_token",m);var y=BI(m).user;p=jy({ownerId:y},p)}return l=Mf.interpolateRouteParams(l,p),l};Fs.prototype.send=function(){var n=this;if(n.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return n.sent=!0,n.client.sendRequest(n).then(function(l){return n.response=l,n.emitter.emit(R0.EVENT_RESPONSE,l),l},function(l){throw n.error=l,n.emitter.emit(R0.EVENT_ERROR,l),l})};Fs.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Fs.prototype.eachPage=function(n){var l=this;function p(x){function E(){delete l._nextPageRequest;var C=x.nextPage();C&&(l._nextPageRequest=C,y(C))}n(null,x,E)}function m(x){n(x,null,function(){})}function y(x){x.send().then(p,m)}y(this)};Fs.prototype.clone=function(){return this._extend()};Fs.prototype._extend=function(n){var l=jy(this._options,n);return new Fs(this.client,l)};var UI=Fs,VI=Fb,jI=UI,qI=Zd;function jb(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");VI(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||qI.API_ORIGIN}jb.prototype.createRequest=function(n){return new jI(this,n)};var qb=jb,Zb=CI,Hb=qb;function mc(t){Hb.call(this,t)}mc.prototype=Object.create(Hb.prototype);mc.prototype.constructor=mc;mc.prototype.sendRequest=Zb.browserSend;mc.prototype.abortRequest=Zb.browserAbort;function ZI(t){return new mc(t)}var Gb=ZI,HI=Gb,GI=HI,$I=Object.prototype.toString,KI=function(t){var n;return $I.call(t)==="[object Object]"&&(n=Object.getPrototypeOf(t),n===null||n===Object.getPrototypeOf({}))},WI=KI,XI=bc,$b="value",eg=`
  `,$r={};$r.assert=function(t,n){return n=n||{},function(l){var p=Ns(t,l);if(p){var m=qy(p,n);throw n.apiName&&(m=n.apiName+": "+m),new Error(m)}}};$r.shape=function(n){var l=ek(n);return function(m){var y=Ns($r.plainObject,m);if(y)return y;for(var x,E,C=[],P=0;P<l.length;P++)x=l[P].key,E=l[P].value,y=Ns(E,m[x]),y&&C.push([x].concat(y));return C.length<2?C[0]:function(B){C=C.map(function(se){var ne=se[0],ve=qy(se,B).split(`
`).join(eg);return"- "+ne+": "+ve});var U=B.path.join("."),ee=U===$b?"":" of "+U;return"The following properties"+ee+" have invalid values:"+eg+C.join(eg)}}};$r.strictShape=function(n){var l=$r.shape(n);return function(m){var y=l(m);if(y)return y;var x=Object.keys(m).reduce(function(E,C){return n[C]===void 0&&E.push(C),E},[]);if(x.length!==0)return function(){return"The following keys are invalid: "+x.join(", ")}}};$r.arrayOf=function(n){return Kb(n)};$r.tuple=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return Kb(n)};function Kb(t){var n=Array.isArray(t),l=function(p){return n?t[p]:t};return function(m){var y=Ns($r.plainArray,m);if(y)return y;if(n&&m.length!==t.length)return"an array with "+t.length+" items";for(var x=0;x<m.length;x++)if(y=Ns(l(x),m[x]),y)return[x].concat(y)}}$r.required=function(n){function l(p){return p==null?function(m){return Wb(m,Xb(m.path)?"cannot be undefined/null.":"is required.")}:n.apply(this,arguments)}return l.__required=!0,l};$r.oneOfType=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(p){var m=n.map(function(y){return Ns(y,p)}).filter(Boolean);if(m.length===n.length)return m.every(function(y){return y.length===1&&typeof y[0]=="string"})?JI(m.map(function(y){return y[0]})):m.reduce(function(y,x){return x.length>y.length?x:y})}};$r.equal=function(n){return function(p){if(p!==n)return JSON.stringify(n)}};$r.oneOf=function(){var n=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),l=n.map(function(p){return $r.equal(p)});return $r.oneOfType.apply(this,l)};$r.range=function(n){var l=n[0],p=n[1];return function(y){var x=Ns($r.number,y);if(x||y<l||y>p)return"number between "+l+" & "+p+" (inclusive)"}};$r.any=function(){};$r.boolean=function(n){if(typeof n!="boolean")return"boolean"};$r.number=function(n){if(typeof n!="number")return"number"};$r.plainArray=function(n){if(!Array.isArray(n))return"array"};$r.plainObject=function(n){if(!WI(n))return"object"};$r.string=function(n){if(typeof n!="string")return"string"};$r.func=function(n){if(typeof n!="function")return"function"};function Ns(t,n){if(!(n==null&&!t.hasOwnProperty("__required"))){var l=t(n);if(l)return Array.isArray(l)?l:[l]}}function qy(t,n){var l=t.length,p=t[l-1],m=t.slice(0,l-1);return m.length===0&&(m=[$b]),n=XI(n,{path:m}),typeof p=="function"?p(n):Wb(n,YI(p))}function JI(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function YI(t){return"must be "+QI(t)+"."}function QI(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function Wb(t,n){var l=Xb(t.path),p=t.path.join(".")+" "+n,m=l?"Item at position ":"";return m+p}function Xb(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function ek(t){return Object.keys(t||{}).map(function(n){return{key:n,value:t[n]}})}$r.validate=Ns;$r.processMessage=qy;var tk=$r,rk=bc,oc=tk;function nk(t){if(typeof window<"u")return t instanceof fo.Blob||t instanceof fo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function ik(t,n){return oc.assert(oc.strictShape(t),n)}function ok(t){var n="date";if(typeof t=="boolean")return n;try{var l=new Date(t);if(l.getTime&&isNaN(l.getTime()))return n}catch{return n}}function ak(t){return oc.tuple(oc.number,oc.number)(t)}var sk=rk(oc,{file:nk,date:ok,coordinates:ak,assertShape:ik});function lk(t,n){var l=function(p,m){return n.indexOf(p)!==-1&&m!==void 0};return typeof n=="function"&&(l=n),Object.keys(t).filter(function(p){return l(p,t[p])}).reduce(function(p,m){return p[m]=t[m],p},{})}var uk=lk;function ck(t,n){return Object.keys(t).reduce(function(l,p){return l[p]=n(p,t[p]),l},{})}var pk=ck,hk=pk;function fk(t){return hk(t,function(n,l){return typeof l=="boolean"?JSON.stringify(l):l})}var dk=fk,mk=qb,gk=Gb;function yk(t){return function(n){var l;mk.prototype.isPrototypeOf(n)?l=n:l=gk(n);var p=Object.create(t);return p.client=l,p}}var vk=yk,Jb=bc,gr=sk,pd=uk,Yb=dk,_k=vk,Zy={},Qb=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Zy.forwardGeocode=function(t){gr.assertShape({query:gr.required(gr.string),mode:gr.oneOf("mapbox.places","mapbox.places-permanent"),countries:gr.arrayOf(gr.string),proximity:gr.oneOf(gr.coordinates,"ip"),types:gr.arrayOf(gr.oneOf(Qb)),autocomplete:gr.boolean,bbox:gr.arrayOf(gr.number),limit:gr.number,language:gr.arrayOf(gr.string),routing:gr.boolean,fuzzyMatch:gr.boolean,worldview:gr.string})(t),t.mode=t.mode||"mapbox.places";var n=Yb(Jb({country:t.countries},pd(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:pd(t,["mode","query"]),query:n})};Zy.reverseGeocode=function(t){gr.assertShape({query:gr.required(gr.coordinates),mode:gr.oneOf("mapbox.places","mapbox.places-permanent"),countries:gr.arrayOf(gr.string),types:gr.arrayOf(gr.oneOf(Qb)),bbox:gr.arrayOf(gr.number),limit:gr.number,language:gr.arrayOf(gr.string),reverseMode:gr.oneOf("distance","score"),routing:gr.boolean,worldview:gr.string})(t),t.mode=t.mode||"mapbox.places";var n=Yb(Jb({country:t.countries},pd(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:pd(t,["mode","query"]),query:n})};var xk=_k(Zy);let bk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ew=t=>crypto.getRandomValues(new Uint8Array(t)),tw=(t,n,l)=>{let p=(2<<Math.log(t.length-1)/Math.LN2)-1,m=-~(1.6*p*n/t.length);return(y=n)=>{let x="";for(;;){let E=l(m),C=m;for(;C--;)if(x+=t[E[C]&p]||"",x.length===y)return x}}},wk=(t,n=21)=>tw(t,n,ew),Ek=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,l)=>(l&=63,l<36?n+=l.toString(36):l<62?n+=(l-26).toString(36).toUpperCase():l>62?n+="-":n+="_",n),"");const Sk=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:wk,customRandom:tw,nanoid:Ek,random:ew,urlAlphabet:bk},Symbol.toStringTag,{value:"Module"})),Tk=p5(Sk);var Ck=Tk.nanoid;function rw(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}rw.prototype={select:function(t,n){var l=this.getSelectedIndex(t,n),p=this.getEventPayload("search.select",n);if(p.resultIndex=l,p.resultPlaceName=t.place_name,p.resultId=t.id,!(l===this.lastSentIndex&&p.queryString===this.lastSentInput||l==-1)&&(this.lastSentIndex=l,this.lastSentInput=p.queryString,!!p.queryString))return this.push(p)},start:function(t){var n=this.getEventPayload("search.start",t);if(n.queryString)return this.push(n)},keyevent:function(t,n){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var l=this.getEventPayload("search.keystroke",n);if(l.lastAction=t.key,!!l.queryString)return this.push(l)}},send:function(t,n){if(!this.enableEventLogging)return n?n():void 0;var l=this.getRequestOptions(t);this.request(l,function(p){if(p)return this.handleError(p,n);if(n)return n()}.bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var n={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return n},getEventPayload:function(t,n){var l;n.options.proximity?typeof n.options.proximity=="object"?l=[n.options.proximity.longitude,n.options.proximity.latitude]:n.options.proximity==="ip"?l=[999,999]:l=n.options.proximity:l=null;var p=n._map?n._map.getZoom():void 0,m={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:n.options.autocomplete,fuzzyMatch:n.options.fuzzyMatch,proximity:l,limit:n.options.limit,routing:n.options.routing,worldview:n.options.worldview,mapZoom:p,keyboardLocale:this.locale};return t==="search.select"?m.queryString=n.inputString:t!="search.select"&&n._inputEl?m.queryString=n._inputEl.value:m.queryString=n.inputString,m},request:function(t,n){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(this.readyState==4)return this.status==204?n(null):n(this.statusText)},l.open(t.method,t.host+"/"+t.path,!0);for(var p in t.headers){var m=t.headers[p];l.setRequestHeader(p,m)}l.send(t.body)},handleError:function(t,n){if(n)return n(t)},generateSessionID:function(){return Ck()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,n){if(n._typeahead){var l=n._typeahead.data,p=t.id,m=l.map(function(x){return x.id}),y=m.indexOf(p);return y}},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com"||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,n){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||n)&&this.flush()},remove:function(){this.flush()}};var Ak=rw,Ik={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},kk={placeholder:Ik},nw={exports:{}};(function(t){(function(n,l,p){t.exports?t.exports=p():n[l]=p()})(fo,"subtag",function(){var n="",l=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function p(C){return C.match(l)||[]}function m(C){return p(C).filter(function(P,B){return P&&B})}function y(C){return C=p(C),{language:C[1]||n,extlang:C[2]||n,script:C[3]||n,region:C[4]||n}}function x(C,P,B){Object.defineProperty(C,P,{value:B,enumerable:!0})}function E(C,P,B){function U(ee){return p(ee)[C]||n}x(U,"pattern",P),x(y,B,U)}return E(1,/^[a-zA-Z]{2,3}$/,"language"),E(2,/^[a-zA-Z]{3}$/,"extlang"),E(3,/^[a-zA-Z]{4}$/,"script"),E(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),x(y,"split",m),y})})(nw);var Pk=nw.exports;function iw(){}iw.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(n,l){window.navigator.geolocation.getCurrentPosition(n,l,t)})}};var Mk=iw;function zk(t,n){const l=ow(t),p=["address","street","place","country"];var m;if(typeof n=="function")return n(l);const y=p.indexOf(n);return y===-1?m=p:m=p.slice(y),m.reduce(function(x,E){return l[E]?(x!==""&&(x=x+", "),x+l[E]):x},"")}function ow(t){const n=t.address||"",l=t.text||"",p=t.place_name||"",y={address:p.split(",")[0],houseNumber:n,street:l,placeName:p};return t.context.forEach(function(x){const E=x.id.split(".")[0];y[E]=x.text}),y}const Lk=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var Rk={transformFeatureToGeolocationText:zk,getAddressInfo:ow,REVERSE_GEOCODE_COORD_RGX:Lk},Ok=BA,Dk=tI,Cl=bc,Bk=lI.EventEmitter,O0=uI,tg=GI,rg=xk,Fk=Ak,Nk=kk,Uk=Pk,Vk=Mk,D0=Rk;const Cs={FORWARD:0,LOCAL:1,REVERSE:2};function jk(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function aw(t){this._eventEmitter=new Bk,this.options=Cl({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new Vk}aw.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var n=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+n[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+n.splice(1,n.length).join(",")+"</div></div>"}},addTo:function(t){function n(l,p){if(!document.body.contains(p))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const m=l.onAdd();p.appendChild(m)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)n(this,t);else if(typeof t=="string"){const l=document.querySelectorAll(t);if(l.length===0)throw new Error("Element ",t,"not found.");if(l.length>1)throw new Error("Geocoder can only be added to a single html element");n(this,l[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=rg(tg({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new Fk(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var n=this.container=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var l=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Dk(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(P){this.eventManager.keyevent(P,this)}.bind(this));var p=document.createElement("div");p.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var m=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(m),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),p.appendChild(this._clearEl),p.appendChild(this._loadingEl),n.appendChild(l),n.appendChild(this._inputEl),n.appendChild(p),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var y=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(y),p.appendChild(this._geolocateEl),this._showGeolocateButton()}var x=this._typeahead=new Ok(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),x.getItemValue=this.options.getItemValue;var E=x.list.draw,C=this._footerNode=jk();return x.list.draw=function(){E.call(this),C.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),C.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(C)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),n},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const n={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(n),this._fly(n),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(n),this._showClearButton(),this.fresh=!1;const l={limit:1,language:[this.options.language],query:n.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const p=n.geometry.coordinates[0]+","+n.geometry.coordinates[1];this._setInputValue(p),this._eventEmitter.emit("result",{result:n})}else this.geocoderService.reverseGeocode(l).send().then(function(p){const m=p.body.features[0];if(m){const y=D0.transformFeatureToGeolocationText(m,this.options.addressAccuracy);this._setInputValue(y),m.user_coordinates=n.geometry.coordinates,this._eventEmitter.emit("result",{result:m})}else this._eventEmitter.emit("result",{result:{user_coordinates:n.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,n){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");return l.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),l.setAttribute("viewBox","0 0 18 18"),l.setAttribute("xml:space","preserve"),l.setAttribute("width",18),l.setAttribute("height",18),l.innerHTML=n,l},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var n=(t.clipboardData||window.clipboardData).getData("text");n.length>=this.options.minLength&&this._geocode(n)},_onKeyDown:function(t){var n=27,l=9;if(t.keyCode===n&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var p=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,m=p?p.value:"";if(!m)return this.fresh=!0,t.keyCode!==l&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[l,n,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&p.value.length>=this.options.minLength&&this._geocode(p.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var n;if(t.properties&&O0[t.properties.short_code])n=Cl({},this.options.flyTo),this._map&&this._map.fitBounds(O0[t.properties.short_code].bbox,n);else if(t.bbox){var l=t.bbox;n=Cl({},this.options.flyTo),this._map&&this._map.fitBounds([[l[0],l[1]],[l[2],l[3]]],n)}else{var p={zoom:this.options.zoom};n=Cl({},p,this.options.flyTo),t.center?n.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(n.center=t.geometry.coordinates),this._map&&this._map.flyTo(n)}},_requestType:function(t,n){var l;return t.localGeocoderOnly?l=Cs.LOCAL:t.reverseGeocode&&D0.REVERSE_GEOCODE_COORD_RGX.test(n)?l=Cs.REVERSE:l=Cs.FORWARD,l},_setupConfig:function(t,n){const l=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],p=/[\s,]+/;var m=this,y=l.reduce(function(E,C){if(m.options[C]===void 0||m.options[C]===null)return E;["countries","types","language"].indexOf(C)>-1?E[C]=m.options[C].split(p):E[C]=m.options[C];const P=typeof m.options[C].longitude=="number"&&typeof m.options[C].latitude=="number";if(C==="proximity"&&P){const B=m.options[C].longitude,U=m.options[C].latitude;E[C]=[B,U]}return E},{});switch(t){case Cs.REVERSE:{var x=n.split(p).map(function(E){return parseFloat(E,10)});m.options.flipCoordinates||x.reverse(),y.types&&y.types[0],y=Cl(y,{query:x,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(E){E in y&&delete y[E]})}break;case Cs.FORWARD:{const E=n.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(E)&&(n=n.replace(/,/g," ")),y=Cl(y,{query:n})}break}return y},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const n=this._requestType(this.options,t),l=this._setupConfig(n,t);var p;switch(n){case Cs.LOCAL:p=Promise.resolve();break;case Cs.FORWARD:p=this.geocoderService.forwardGeocode(l).send();break;case Cs.REVERSE:p=this.geocoderService.reverseGeocode(l).send();break}var m=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],y=[],x=null;return p.catch(function(E){x=E}.bind(this)).then(function(E){this._hideLoadingIcon();var C={};return E?E.statusCode=="200"&&(C=E.body,C.request=E.request,C.headers=E.headers):C={type:"FeatureCollection",features:[]},C.config=l,this.fresh&&(this.eventManager.start(this),this.fresh=!1),C.features=C.features?m.concat(C.features):m,this.options.externalGeocoder?(y=this.options.externalGeocoder(t,C.features)||Promise.resolve([]),y.then(function(P){return C.features=C.features?P.concat(C.features):P,C},function(){return C})):C}.bind(this)).then(function(E){if(x)throw x;this.options.filter&&E.features.length&&(E.features=E.features.filter(this.options.filter)),E.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",E),this._typeahead.update(E.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",E))}.bind(this)).catch(function(E){this._hideLoadingIcon(),this._hideAttribution(),m.length&&this.options.localGeocoder||y.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(m)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:m}),this._eventEmitter.emit("error",{error:E})}.bind(this)),p},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var n=this;t.relatedTarget&&n._clear(t)},_onQueryResult:function(t){var n=t.body;if(n.features.length){var l=n.features[0];this._typeahead.selected=l,this._inputEl.value=l.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],n=Uk.language(t),l=Nk.placeholder[n];if(l)return l}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t,n=!0){return this.options.proximity=t,n&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var n=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||n,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=rg(tg({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=rg(tg({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var n={color:"#4668F2"},l=Cl({},n,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(l),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,n){return this._eventEmitter.on(t,n),this},off:function(t,n){return this._eventEmitter.removeListener(t,n),this.eventManager.remove(),this}};var qk=aw;const sw=c5(qk);const Hy=(t,n)=>{const l=t.__vccOpts||t;for(const[p,m]of n)l[p]=m;return l},Zk={props:["current-location","access-token"],data(){return{markers:{schools:null,hostitals:null}}},methods:{search(){const t=parseFloat(this.currentLocation[0])-.02,n=parseFloat(this.currentLocation[1])-.02,l=parseFloat(this.currentLocation[0])+.02,p=parseFloat(this.currentLocation[1])+.02,m=`bbox=${t},${n},${l},${p}`;console.log(this.currentLocation),console.log(m),console.log(this.currentLocation),zp.get(`https://api.mapbox.com/search/v1/forward/クリニック?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"clinics",data:y.data})}),zp.get(`https://api.mapbox.com/search/searchbox/v1/category/生活>小学校?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"schools",data:y.data})}),zp.get(`https://api.mapbox.com/search/searchbox/v1/category/医療>病院?language=ja&limit=10&${m}&proximity=${this.currentLocation[0]},${this.currentLocation[1]}&country=JP&access_token=${this.accessToken}`).then(y=>{console.log(y.data),this.$emit("found-places",{type:"hospitals",data:y.data})})}}};function Hk(t,n,l,p,m,y){return co(),Ka("div",null,[Zn("button",{class:"btn btn-info",onClick:n[0]||(n[0]=(...x)=>y.search&&y.search(...x))},"Search places nearby")])}const Gk=Hy(Zk,[["render",Hk]]);const $k={props:["map","center"],components:{SearchButton:Gk},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,marker:!1,editPositionFlg:!1,locationFound:!1,addressEdited:!0}},mounted(){this.init()},computed:{btnEditPositionText(){return this.editPositionFlg?"Save new position":"Adjust position"}},methods:{toggleEditPosition(){this.editPositionFlg,this.editPositionFlg=!this.editPositionFlg},async init(){try{let t=new sw({accessToken:this.access_token,mapboxgl,marker:!1})}catch(t){console.log("map error",t)}},async getLocation(){try{this.loading=!0,console.log(this.center);const t=await zp.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.center[0]},${this.center[1]}.json?access_token=${this.access_token}&language=ja`);if(this.loading=!1,t.data.features.length==0)throw Error("not found!");this.location=t.data.features[0].place_name}catch(t){this.loading=!1,console.log(t),t.message==="not found!"&&console.log("not found!")}},async searchLngLat(){console.log("click"),this.location&&(this.loading=!0,zp.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.location}.json?proximity=ip&access_token=${this.access_token}&language=ja`).then(t=>{if(this.loading=!1,t.data.features.length===0)throw Error("not found");this.$emit("set-marker",t.data.features[0].center),this.locationFound=!0,this.addressEdited=!1}).catch(t=>{this.locationFound=!1,t.message=="not found"&&console.log("not found"),console.log(t)}))},showMarkers(t){this.$emit("found-places",t)}}},Kk={class:"sidebar p-1"},Wk={class:"dislpay-arena"},Xk={class:"coordinates-header"},Jk=Zn("h3",null,"Current Coordinates",-1),Yk={class:"coordinates-header"},Qk=Zn("h3",null,"Enter my address:",-1),eP={class:"form-group"},tP=["disabled"],rP={key:2},nP={key:1};function iP(t,n,l,p,m,y){const x=oy("SearchButton");return co(),Ka("div",Kk,[Zn("div",Wk,[Zn("div",Xk,[Jk,Zn("p",null,"Latitude: "+Lf(l.center[0]),1),Zn("p",null,"Longitude: "+Lf(l.center[1]),1)]),Zn("div",Yk,[Qk,Zn("div",eP,[d1(Zn("input",{type:"text",class:"form-control location-control my-1","onUpdate:modelValue":n[0]||(n[0]=E=>m.location=E),onInput:n[1]||(n[1]=E=>m.addressEdited=!0)},null,544),[[Vp,m.location]]),m.addressEdited?(co(),Ka("button",{key:0,type:"button",class:"btn btn-info",onClick:n[2]||(n[2]=(...E)=>y.searchLngLat&&y.searchLngLat(...E))}," Show on the map! ")):Wu("",!0),m.locationFound&&!m.addressEdited?(co(),Ka("button",{key:1,type:"button",disabled:m.loading,class:yc([{disabled:m.loading},"btn btn-info mx-1"]),onClick:n[3]||(n[3]=(...E)=>y.toggleEditPosition&&y.toggleEditPosition(...E))},Lf(y.btnEditPositionText),11,tP)):Wu("",!0),m.editPositionFlg?(co(),Ka("p",rP,"Move marker")):Wu("",!0)]),m.locationFound?(co(),Id(x,{key:0,"access-token":m.access_token,"current-location":l.center,onFoundPlaces:y.showMarkers},null,8,["access-token","current-location","onFoundPlaces"])):Wu("",!0),m.locationFound?(co(),Ka("p",nP," elementary school red hospital blue clinics green ")):Wu("",!0)])])])}const oP=Hy($k,[["render",iP]]);const aP={components:{Sidebar:oP},data(){return{loading:!1,location:"",access_token:this.$mapboxApiKey,center:[132.7445942,35.3665752],map:{}}},mounted(){this.createMap()},methods:{async createMap(){try{this.map=U2(this.access_token);let t=new sw({accessToken:this.access_token,mapboxgl,marker:!1});this.map.addControl(t)}catch(t){console.log("map error",t)}},showMarkers({type:t,data:n}){let l="red";switch(t){case"hospitals":l="blue";break;case"clinics":l="green";break}console.log(this.map.getSource(t)),this.map.getSource(t)?this.map.getSource(t).setData(n):(this.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:n.features}}),this.map.addLayer({id:t,type:"circle",source:t,paint:{"circle-radius":10,"circle-color":l,"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":.5}}))},setMarker(t){this.marker&&this.marker.remove();const n=new mapboxgl.Marker({draggable:!0,color:"#D80739"}).setLngLat(t).addTo(this.map);n.on("dragend",l=>{this.center=Object.values(l.target.getLngLat()),console.log("center changed welcome",this.center)}),this.marker=n,this.center=t,this.map.flyTo({center:t,speed:.2})}}},sP={class:"main"},lP=Zn("div",{class:"map-wrapper"},[Zn("div",{id:"map"}),Zn("button",{class:"btn btn-light m-1",id:"fly"},"Let's go Izumo!")],-1);function uP(t,n,l,p,m,y){const x=oy("Sidebar");return co(),Ka("div",sP,[qr(x,{map:m.map,onSetMarker:y.setMarker,center:m.center,onFoundPlaces:y.showMarkers},null,8,["map","onSetMarker","center","onFoundPlaces"]),lP])}const cP=Hy(aP,[["render",uP]]),pP={id:"app"},hP=Zn("header",null,[Zn("a",{href:"/properties/new"},"New")],-1),fP={__name:"App",setup(t){return(n,l)=>(co(),Ka("div",pP,[hP,Zn("main",null,[qr(cP)])]))}},Gy=bx(fP);Gy.config.globalProperties.$mapboxApiKey="pk.eyJ1IjoiaXJpbmFzayIsImEiOiJjbDIwOHhrbm0wdWJlM2pxZDNvN3A5NHNzIn0.M37Dun7-7tjVc9C0O82lpw";Gy.mount("#app");console.log("app",Gy);
